var Mce=Object.defineProperty,Oce=Object.defineProperties,Tce=Object.getOwnPropertyDescriptors,N$=Object.getOwnPropertySymbols,kZ=Object.prototype.hasOwnProperty,FZ=Object.prototype.propertyIsEnumerable,IZ=(it,bt,pe)=>bt in it?Mce(it,bt,{enumerable:!0,configurable:!0,writable:!0,value:pe}):it[bt]=pe,W=(it,bt)=>{for(var pe in bt||(bt={}))kZ.call(bt,pe)&&IZ(it,pe,bt[pe]);if(N$)for(var pe of N$(bt))FZ.call(bt,pe)&&IZ(it,pe,bt[pe]);return it},_t=(it,bt)=>Oce(it,Tce(bt)),Pk=it=>"symbol"==typeof it?it:it+"",gn=(it,bt)=>{var pe={};for(var _e in it)kZ.call(it,_e)&&bt.indexOf(_e)<0&&(pe[_e]=it[_e]);if(null!=it&&N$)for(var _e of N$(it))bt.indexOf(_e)<0&&FZ.call(it,_e)&&(pe[_e]=it[_e]);return pe};(self.webpackChunka2agc=self.webpackChunka2agc||[]).push([[179],{8255:it=>{function bt(pe){return Promise.resolve().then(()=>{var _e=new Error("Cannot find module '"+pe+"'");throw _e.code="MODULE_NOT_FOUND",_e})}bt.keys=()=>[],bt.resolve=bt,bt.id=8255,it.exports=bt},7266:(it,bt,pe)=>{it.exports={ResizeSensor:pe(9835),ElementQueries:pe(4845)}},4845:function(it,bt,pe){"use strict";var _e,K,qe;"undefined"!=typeof window&&window,K=[pe(9835)],void 0!==(qe="function"==typeof(_e=function(Ce){var xe=function(){var de,De={},Ae=[];function Ie(ae){ae||(ae=document.documentElement);var me=window.getComputedStyle(ae,null).fontSize;return parseFloat(me)||16}function nt(ae,me){var Ze=me.split(/\d/),Ve=Ze[Ze.length-1];switch(me=parseFloat(me),Ve){case"px":return me;case"em":return me*Ie(ae);case"rem":return me*Ie();case"vw":return me*document.documentElement.clientWidth/100;case"vh":return me*document.documentElement.clientHeight/100;case"vmin":case"vmax":var $e=document.documentElement.clientWidth/100,lt=document.documentElement.clientHeight/100;return me*(0,Math["vmin"===Ve?"min":"max"])($e,lt);default:return me}}function T(ae,me){this.element=ae;var Ze,Ve,$e,lt,We,wt,at,Pe,Gt=["min-width","min-height","max-width","max-height"];this.call=function(){for(Ze in $e=function(ae){if(!ae.getBoundingClientRect)return{width:ae.offsetWidth,height:ae.offsetHeight};var me=ae.getBoundingClientRect();return{width:Math.round(me.width),height:Math.round(me.height)}}(this.element),wt={},De[me])!De[me].hasOwnProperty(Ze)||(lt=nt(this.element,(Ve=De[me][Ze]).value),We="width"===Ve.property?$e.width:$e.height,at="","min"===Ve.mode&&We>=lt&&(at+=Ve.value),"max"===Ve.mode&&We<=lt&&(at+=Ve.value),wt[Pe=Ve.mode+"-"+Ve.property]||(wt[Pe]=""),at&&-1===(" "+wt[Pe]+" ").indexOf(" "+at+" ")&&(wt[Pe]+=" "+at));for(var gt in Gt)!Gt.hasOwnProperty(gt)||(wt[Gt[gt]]?this.element.setAttribute(Gt[gt],wt[Gt[gt]].substr(1)):this.element.removeAttribute(Gt[gt]))}}function Yt(ae,me){ae.elementQueriesSetupInformation||(ae.elementQueriesSetupInformation=new T(ae,me)),ae.elementQueriesSensor||(ae.elementQueriesSensor=new Ce(ae,function(){ae.elementQueriesSetupInformation.call()}))}function Kt(ae,me,Ze,Ve){if(void 0===De[ae]){De[ae]=[];var $e=Ae.length;de.innerHTML+="\n"+ae+" {animation: 0.1s element-queries;}",de.innerHTML+="\n"+ae+" > .resize-sensor {min-width: "+$e+"px;}",Ae.push(ae)}De[ae].push({mode:me,property:Ze,value:Ve})}function Nt(ae){var me;if(document.querySelectorAll&&(me=ae?ae.querySelectorAll.bind(ae):document.querySelectorAll.bind(document)),!me&&"undefined"!=typeof $$&&(me=$$),!me&&"undefined"!=typeof jQuery&&(me=jQuery),!me)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return me}function ti(ae){var me=[],Ze=[],Ve=[],$e=0,lt=-1,We=[];for(var wt in ae.children)if(ae.children.hasOwnProperty(wt)&&ae.children[wt].tagName&&"img"===ae.children[wt].tagName.toLowerCase()){me.push(ae.children[wt]);var at=ae.children[wt].getAttribute("min-width")||ae.children[wt].getAttribute("data-min-width"),Pe=ae.children[wt].getAttribute("data-src")||ae.children[wt].getAttribute("url");Ve.push(Pe),Ze.push({minWidth:at}),at?ae.children[wt].style.display="none":($e=me.length-1,ae.children[wt].style.display="block")}function gt(){var yn,ft=!1;for(yn in me)!me.hasOwnProperty(yn)||Ze[yn].minWidth&&ae.offsetWidth>Ze[yn].minWidth&&(ft=yn);if(ft||(ft=$e),lt!==ft)if(We[ft])me[lt].style.display="none",me[ft].style.display="block",lt=ft;else{var xt=new Image;xt.onload=function(){me[ft].src=Ve[ft],me[lt].style.display="none",me[ft].style.display="block",We[ft]=!0,lt=ft},xt.src=Ve[ft]}else me[ft].src=Ve[ft]}lt=$e,ae.resizeSensorInstance=new Ce(ae,gt),gt()}var Jt=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,Qe=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function Lt(ae){var me,Ze,Ve,$e;for(ae=ae.replace(/'/g,'"');null!==(me=Jt.exec(ae));)for(Ze=me[1]+me[3],Ve=me[2];null!==($e=Qe.exec(Ve));)Kt(Ze,$e[1],$e[2],$e[3])}function pt(ae){var me="";if(ae)if("string"==typeof ae)(-1!==(ae=ae.toLowerCase()).indexOf("min-width")||-1!==ae.indexOf("max-width"))&&Lt(ae);else for(var Ze=0,Ve=ae.length;Ze<Ve;Ze++)1===ae[Ze].type?(-1!==(me=ae[Ze].selectorText||ae[Ze].cssText).indexOf("min-height")||-1!==me.indexOf("max-height")||-1!==me.indexOf("min-width")||-1!==me.indexOf("max-width"))&&Lt(me):4===ae[Ze].type?pt(ae[Ze].cssRules||ae[Ze].rules):3===ae[Ze].type&&ae[Ze].styleSheet.hasOwnProperty("cssRules")&&pt(ae[Ze].styleSheet.cssRules)}var Mt=!1;this.init=function(){var ae="animationstart";void 0!==document.documentElement.style.webkitAnimationName?ae="webkitAnimationStart":void 0!==document.documentElement.style.MozAnimationName?ae="mozanimationstart":void 0!==document.documentElement.style.OAnimationName&&(ae="oanimationstart"),document.body.addEventListener(ae,function(Ve){var $e=Ve.target,lt=$e&&window.getComputedStyle($e,null),We=lt&&lt.getPropertyValue("animation-name");if(We&&-1!==We.indexOf("element-queries")){$e.elementQueriesSensor=new Ce($e,function(){$e.elementQueriesSetupInformation&&$e.elementQueriesSetupInformation.call()});var Pe=window.getComputedStyle($e.resizeSensor,null).getPropertyValue("min-width");Pe=parseInt(Pe.replace("px","")),Yt(Ve.target,Ae[Pe])}}),Mt||((de=document.createElement("style")).type="text/css",de.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",de.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(de),Mt=!0);for(var me=0,Ze=document.styleSheets.length;me<Ze;me++)try{document.styleSheets[me].href&&0===document.styleSheets[me].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[me].href),pt(document.styleSheets[me].cssRules||document.styleSheets[me].rules||document.styleSheets[me].cssText)}catch(Ve){}!function(){for(var me=Nt()("[data-responsive-image],[responsive-image]"),Ze=0,Ve=me.length;Ze<Ve;Ze++)ti(me[Ze])}()},this.findElementQueriesElements=function(ae){!function(ae){var me=Nt(ae);for(var Ze in De)if(De.hasOwnProperty(Ze))for(var Ve=me(Ze,ae),$e=0,lt=Ve.length;$e<lt;$e++)Yt(Ve[$e],Ze)}(ae)},this.update=function(){this.init()}};xe.update=function(){xe.instance.update()},xe.detach=function(de){de.elementQueriesSetupInformation?(de.elementQueriesSensor.detach(),delete de.elementQueriesSetupInformation,delete de.elementQueriesSensor):de.resizeSensorInstance&&(de.resizeSensorInstance.detach(),delete de.resizeSensorInstance)},xe.init=function(){xe.instance||(xe.instance=new xe),xe.instance.init()};return xe.findElementQueriesElements=function(de){xe.instance.findElementQueriesElements(de)},xe.listen=function(){!function(de){if(document.addEventListener)document.addEventListener("DOMContentLoaded",de,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var De=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(de(),clearInterval(De))},10);else window.onload=de}(xe.init)},xe})?_e.apply(bt,K):_e)&&(it.exports=qe)},9835:function(it,bt,pe){"use strict";var _e,K;"undefined"!=typeof window&&window,void 0!==(K="function"==typeof(_e=function(){if("undefined"==typeof window)return null;var qe="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),Ce=qe.requestAnimationFrame||qe.mozRequestAnimationFrame||qe.webkitRequestAnimationFrame||function(ke){return qe.setTimeout(ke,20)},xe=qe.cancelAnimationFrame||qe.mozCancelAnimationFrame||qe.webkitCancelAnimationFrame||function(ke){qe.clearTimeout(ke)};function ve(ke,nt){var T=Object.prototype.toString.call(ke),Yt="[object Array]"===T||"[object NodeList]"===T||"[object HTMLCollection]"===T||"[object Object]"===T||"undefined"!=typeof jQuery&&ke instanceof jQuery||"undefined"!=typeof Elements&&ke instanceof Elements,Kt=0,Nt=ke.length;if(Yt)for(;Kt<Nt;Kt++)nt(ke[Kt]);else nt(ke)}function de(ke){if(!ke.getBoundingClientRect)return{width:ke.offsetWidth,height:ke.offsetHeight};var nt=ke.getBoundingClientRect();return{width:Math.round(nt.width),height:Math.round(nt.height)}}function De(ke,nt){Object.keys(nt).forEach(function(T){ke.style[T]=nt[T]})}var Ae=function(ke,nt){var T=0;function Yt(){var Dt,ti,Nt=[];this.add=function(oi){Nt.push(oi)},this.call=function(oi){for(Dt=0,ti=Nt.length;Dt<ti;Dt++)Nt[Dt].call(this,oi)},this.remove=function(oi){var Jt=[];for(Dt=0,ti=Nt.length;Dt<ti;Dt++)Nt[Dt]!==oi&&Jt.push(Nt[Dt]);Nt=Jt},this.length=function(){return Nt.length}}function Kt(Nt,Dt){if(Nt){if(Nt.resizedAttached)return void Nt.resizedAttached.add(Dt);Nt.resizedAttached=new Yt,Nt.resizedAttached.add(Dt),Nt.resizeSensor=document.createElement("div"),Nt.resizeSensor.dir="ltr",Nt.resizeSensor.className="resize-sensor";var ti={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},oi={position:"absolute",left:"0px",top:"0px",transition:"0s"};De(Nt.resizeSensor,ti);var Jt=document.createElement("div");Jt.className="resize-sensor-expand",De(Jt,ti);var Qe=document.createElement("div");De(Qe,oi),Jt.appendChild(Qe);var Lt=document.createElement("div");Lt.className="resize-sensor-shrink",De(Lt,ti);var pt=document.createElement("div");De(pt,oi),De(pt,{width:"200%",height:"200%"}),Lt.appendChild(pt),Nt.resizeSensor.appendChild(Jt),Nt.resizeSensor.appendChild(Lt),Nt.appendChild(Nt.resizeSensor);var Mt=window.getComputedStyle(Nt),ae=Mt?Mt.getPropertyValue("position"):null;"absolute"!==ae&&"relative"!==ae&&"fixed"!==ae&&"sticky"!==ae&&(Nt.style.position="relative");var me=!1,Ze=0,Ve=de(Nt),$e=0,lt=0,We=!0;T=0;var at=function(){if(We){if(0===Nt.offsetWidth&&0===Nt.offsetHeight)return void(T||(T=Ce(function(){T=0,at()})));We=!1}var ft,yn;yn=Nt.offsetHeight,Qe.style.width=(ft=Nt.offsetWidth)+10+"px",Qe.style.height=yn+10+"px",Jt.scrollLeft=ft+10,Jt.scrollTop=yn+10,Lt.scrollLeft=ft+10,Lt.scrollTop=yn+10};Nt.resizeSensor.resetSensor=at;var Pe=function(){Ze=0,me&&($e=Ve.width,lt=Ve.height,Nt.resizedAttached&&Nt.resizedAttached.call(Ve))},Gt=function(){Ve=de(Nt),(me=Ve.width!==$e||Ve.height!==lt)&&!Ze&&(Ze=Ce(Pe)),at()},gt=function(ft,yn,xt){ft.attachEvent?ft.attachEvent("on"+yn,xt):ft.addEventListener(yn,xt)};gt(Jt,"scroll",Gt),gt(Lt,"scroll",Gt),T=Ce(function(){T=0,at()})}}ve(ke,function(Nt){Kt(Nt,nt)}),this.detach=function(Nt){T||(xe(T),T=0),Ae.detach(ke,Nt)},this.reset=function(){ke.resizeSensor.resetSensor()}};if(Ae.reset=function(ke){ve(ke,function(nt){nt.resizeSensor.resetSensor()})},Ae.detach=function(ke,nt){ve(ke,function(T){!T||T.resizedAttached&&"function"==typeof nt&&(T.resizedAttached.remove(nt),T.resizedAttached.length())||T.resizeSensor&&(T.contains(T.resizeSensor)&&T.removeChild(T.resizeSensor),delete T.resizeSensor,delete T.resizedAttached)})},"undefined"!=typeof MutationObserver){var Ie=new MutationObserver(function(ke){for(var nt in ke)if(ke.hasOwnProperty(nt))for(var T=ke[nt].addedNodes,Yt=0;Yt<T.length;Yt++)T[Yt].resizeSensor&&Ae.reset(T[Yt])});document.addEventListener("DOMContentLoaded",function(ke){Ie.observe(document.body,{childList:!0,subtree:!0})})}return Ae})?_e.call(bt,pe,bt,it):_e)&&(it.exports=K)},5270:(it,bt,pe)=>{"use strict";const _e=pe(9377),K=Symbol("max"),qe=Symbol("length"),Ce=Symbol("lengthCalculator"),xe=Symbol("allowStale"),ve=Symbol("maxAge"),de=Symbol("dispose"),De=Symbol("noDisposeOnSet"),Ae=Symbol("lruList"),Ie=Symbol("cache"),ke=Symbol("updateAgeOnGet"),nt=()=>1,Yt=(Jt,Qe,Lt)=>{const pt=Jt[Ie].get(Qe);if(pt){const Mt=pt.value;if(Kt(Jt,Mt)){if(Dt(Jt,pt),!Jt[xe])return}else Lt&&(Jt[ke]&&(pt.value.now=Date.now()),Jt[Ae].unshiftNode(pt));return Mt.value}},Kt=(Jt,Qe)=>{if(!Qe||!Qe.maxAge&&!Jt[ve])return!1;const Lt=Date.now()-Qe.now;return Qe.maxAge?Lt>Qe.maxAge:Jt[ve]&&Lt>Jt[ve]},Nt=Jt=>{if(Jt[qe]>Jt[K])for(let Qe=Jt[Ae].tail;Jt[qe]>Jt[K]&&null!==Qe;){const Lt=Qe.prev;Dt(Jt,Qe),Qe=Lt}},Dt=(Jt,Qe)=>{if(Qe){const Lt=Qe.value;Jt[de]&&Jt[de](Lt.key,Lt.value),Jt[qe]-=Lt.length,Jt[Ie].delete(Lt.key),Jt[Ae].removeNode(Qe)}};class ti{constructor(Qe,Lt,pt,Mt,ae){this.key=Qe,this.value=Lt,this.length=pt,this.now=Mt,this.maxAge=ae||0}}const oi=(Jt,Qe,Lt,pt)=>{let Mt=Lt.value;Kt(Jt,Mt)&&(Dt(Jt,Lt),Jt[xe]||(Mt=void 0)),Mt&&Qe.call(pt,Mt.value,Mt.key,Jt)};it.exports=class{constructor(Qe){if("number"==typeof Qe&&(Qe={max:Qe}),Qe||(Qe={}),Qe.max&&("number"!=typeof Qe.max||Qe.max<0))throw new TypeError("max must be a non-negative number");this[K]=Qe.max||1/0;const pt=Qe.length||nt;if(this[Ce]="function"!=typeof pt?nt:pt,this[xe]=Qe.stale||!1,Qe.maxAge&&"number"!=typeof Qe.maxAge)throw new TypeError("maxAge must be a number");this[ve]=Qe.maxAge||0,this[de]=Qe.dispose,this[De]=Qe.noDisposeOnSet||!1,this[ke]=Qe.updateAgeOnGet||!1,this.reset()}set max(Qe){if("number"!=typeof Qe||Qe<0)throw new TypeError("max must be a non-negative number");this[K]=Qe||1/0,Nt(this)}get max(){return this[K]}set allowStale(Qe){this[xe]=!!Qe}get allowStale(){return this[xe]}set maxAge(Qe){if("number"!=typeof Qe)throw new TypeError("maxAge must be a non-negative number");this[ve]=Qe,Nt(this)}get maxAge(){return this[ve]}set lengthCalculator(Qe){"function"!=typeof Qe&&(Qe=nt),Qe!==this[Ce]&&(this[Ce]=Qe,this[qe]=0,this[Ae].forEach(Lt=>{Lt.length=this[Ce](Lt.value,Lt.key),this[qe]+=Lt.length})),Nt(this)}get lengthCalculator(){return this[Ce]}get length(){return this[qe]}get itemCount(){return this[Ae].length}rforEach(Qe,Lt){Lt=Lt||this;for(let pt=this[Ae].tail;null!==pt;){const Mt=pt.prev;oi(this,Qe,pt,Lt),pt=Mt}}forEach(Qe,Lt){Lt=Lt||this;for(let pt=this[Ae].head;null!==pt;){const Mt=pt.next;oi(this,Qe,pt,Lt),pt=Mt}}keys(){return this[Ae].toArray().map(Qe=>Qe.key)}values(){return this[Ae].toArray().map(Qe=>Qe.value)}reset(){this[de]&&this[Ae]&&this[Ae].length&&this[Ae].forEach(Qe=>this[de](Qe.key,Qe.value)),this[Ie]=new Map,this[Ae]=new _e,this[qe]=0}dump(){return this[Ae].map(Qe=>!Kt(this,Qe)&&{k:Qe.key,v:Qe.value,e:Qe.now+(Qe.maxAge||0)}).toArray().filter(Qe=>Qe)}dumpLru(){return this[Ae]}set(Qe,Lt,pt){if((pt=pt||this[ve])&&"number"!=typeof pt)throw new TypeError("maxAge must be a number");const Mt=pt?Date.now():0,ae=this[Ce](Lt,Qe);if(this[Ie].has(Qe)){if(ae>this[K])return Dt(this,this[Ie].get(Qe)),!1;const Ve=this[Ie].get(Qe).value;return this[de]&&(this[De]||this[de](Qe,Ve.value)),Ve.now=Mt,Ve.maxAge=pt,Ve.value=Lt,this[qe]+=ae-Ve.length,Ve.length=ae,this.get(Qe),Nt(this),!0}const me=new ti(Qe,Lt,ae,Mt,pt);return me.length>this[K]?(this[de]&&this[de](Qe,Lt),!1):(this[qe]+=me.length,this[Ae].unshift(me),this[Ie].set(Qe,this[Ae].head),Nt(this),!0)}has(Qe){if(!this[Ie].has(Qe))return!1;const Lt=this[Ie].get(Qe).value;return!Kt(this,Lt)}get(Qe){return Yt(this,Qe,!0)}peek(Qe){return Yt(this,Qe,!1)}pop(){const Qe=this[Ae].tail;return Qe?(Dt(this,Qe),Qe.value):null}del(Qe){Dt(this,this[Ie].get(Qe))}load(Qe){this.reset();const Lt=Date.now();for(let pt=Qe.length-1;pt>=0;pt--){const Mt=Qe[pt],ae=Mt.e||0;if(0===ae)this.set(Mt.k,Mt.v);else{const me=ae-Lt;me>0&&this.set(Mt.k,Mt.v,me)}}}prune(){this[Ie].forEach((Qe,Lt)=>Yt(this,Lt,!1))}}},5478:function(it){it.exports=function(){"use strict";function bt(Ue,Ne){for(var Me=0;Me<Ne.length;Me++){var Y=Ne[Me];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(Ue,Y.key,Y)}}function K(Ue,Ne){(null==Ne||Ne>Ue.length)&&(Ne=Ue.length);for(var Me=0,Y=new Array(Ne);Me<Ne;Me++)Y[Me]=Ue[Me];return Y}function qe(Ue,Ne){var Me="undefined"!=typeof Symbol&&Ue[Symbol.iterator]||Ue["@@iterator"];if(Me)return(Me=Me.call(Ue)).next.bind(Me);if(Array.isArray(Ue)||(Me=function(Ue,Ne){if(Ue){if("string"==typeof Ue)return K(Ue,Ne);var Me=Object.prototype.toString.call(Ue).slice(8,-1);if("Object"===Me&&Ue.constructor&&(Me=Ue.constructor.name),"Map"===Me||"Set"===Me)return Array.from(Ue);if("Arguments"===Me||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Me))return K(Ue,Ne)}}(Ue))||Ne&&Ue&&"number"==typeof Ue.length){Me&&(Ue=Me);var Y=0;return function(){return Y>=Ue.length?{done:!0}:{done:!1,value:Ue[Y++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Ce={exports:{}};function xe(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}Ce.exports={defaults:{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},getDefaults:xe,changeDefaults:function(Ue){Ce.exports.defaults=Ue}};var de=/[&<>"']/,De=/[&<>"']/g,Ae=/[<>"']|&(?!#?\w+;)/,Ie=/[<>"']|&(?!#?\w+;)/g,ke={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},nt=function(Ne){return ke[Ne]};var Yt=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function Kt(Ue){return Ue.replace(Yt,function(Ne,Me){return"colon"===(Me=Me.toLowerCase())?":":"#"===Me.charAt(0)?"x"===Me.charAt(1)?String.fromCharCode(parseInt(Me.substring(2),16)):String.fromCharCode(+Me.substring(1)):""})}var Nt=/(^|[^\[])\^/g;var ti=/[^\w:]/g,oi=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;var Qe={},Lt=/^[^:]+:\/*[^/]*$/,pt=/^([^:]+:)[\s\S]*$/,Mt=/^([^:]+:\/*[^/]*)[\s\S]*$/;function ae(Ue,Ne){Qe[" "+Ue]||(Qe[" "+Ue]=Lt.test(Ue)?Ue+"/":$e(Ue,"/",!0));var Me=-1===(Ue=Qe[" "+Ue]).indexOf(":");return"//"===Ne.substring(0,2)?Me?Ne:Ue.replace(pt,"$1")+Ne:"/"===Ne.charAt(0)?Me?Ne:Ue.replace(Mt,"$1")+Ne:Ue+Ne}function $e(Ue,Ne,Me){var Y=Ue.length;if(0===Y)return"";for(var ie=0;ie<Y;){var he=Ue.charAt(Y-ie-1);if(he!==Ne||Me){if(he===Ne||!Me)break;ie++}else ie++}return Ue.substr(0,Y-ie)}var at_escape=function(Ue,Ne){if(Ne){if(de.test(Ue))return Ue.replace(De,nt)}else if(Ae.test(Ue))return Ue.replace(Ie,nt);return Ue},at_unescape=Kt,at_edit=function(Ue,Ne){Ue=Ue.source||Ue,Ne=Ne||"";var Me={replace:function(ie,he){return he=(he=he.source||he).replace(Nt,"$1"),Ue=Ue.replace(ie,he),Me},getRegex:function(){return new RegExp(Ue,Ne)}};return Me},at_cleanUrl=function(Ue,Ne,Me){if(Ue){var Y;try{Y=decodeURIComponent(Kt(Me)).replace(ti,"").toLowerCase()}catch(ie){return null}if(0===Y.indexOf("javascript:")||0===Y.indexOf("vbscript:")||0===Y.indexOf("data:"))return null}Ne&&!oi.test(Me)&&(Me=ae(Ne,Me));try{Me=encodeURI(Me).replace(/%25/g,"%")}catch(ie){return null}return Me},at_noopTest={exec:function(){}},at_merge=function(Ue){for(var Me,Y,Ne=1;Ne<arguments.length;Ne++)for(Y in Me=arguments[Ne])Object.prototype.hasOwnProperty.call(Me,Y)&&(Ue[Y]=Me[Y]);return Ue},at_checkSanitizeDeprecation=function(Ue){Ue&&Ue.sanitize&&!Ue.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},at_repeatString=function(Ue,Ne){if(Ne<1)return"";for(var Me="";Ne>1;)1&Ne&&(Me+=Ue),Ne>>=1,Ue+=Ue;return Me+Ue},Pe=Ce.exports.defaults,Gt=$e,gt=function(Ue,Ne){var Y=Ue.replace(/\|/g,function(he,Le,Te){for(var Je=!1,L=Le;--L>=0&&"\\"===Te[L];)Je=!Je;return Je?"|":" |"}).split(/ \|/),ie=0;if(Y.length>Ne)Y.splice(Ne);else for(;Y.length<Ne;)Y.push("");for(;ie<Y.length;ie++)Y[ie]=Y[ie].trim().replace(/\\\|/g,"|");return Y},ft=at_escape,yn=function(Ue,Ne){if(-1===Ue.indexOf(Ne[1]))return-1;for(var Me=Ue.length,Y=0,ie=0;ie<Me;ie++)if("\\"===Ue[ie])ie++;else if(Ue[ie]===Ne[0])Y++;else if(Ue[ie]===Ne[1]&&--Y<0)return ie;return-1};function xt(Ue,Ne,Me){var Y=Ne.href,ie=Ne.title?ft(Ne.title):null,he=Ue[1].replace(/\\([\[\]])/g,"$1");return"!"!==Ue[0].charAt(0)?{type:"link",raw:Me,href:Y,title:ie,text:he}:{type:"image",raw:Me,href:Y,title:ie,text:ft(he)}}var sn=function(){function Ue(Me){this.options=Me||Pe}var Ne=Ue.prototype;return Ne.space=function(Y){var ie=this.rules.block.newline.exec(Y);if(ie)return ie[0].length>1?{type:"space",raw:ie[0]}:{raw:"\n"}},Ne.code=function(Y){var ie=this.rules.block.code.exec(Y);if(ie){var he=ie[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:ie[0],codeBlockStyle:"indented",text:this.options.pedantic?he:Gt(he,"\n")}}},Ne.fences=function(Y){var ie=this.rules.block.fences.exec(Y);if(ie){var he=ie[0],Le=function(Ue,Ne){var Me=Ue.match(/^(\s+)(?:```)/);if(null===Me)return Ne;var Y=Me[1];return Ne.split("\n").map(function(ie){var he=ie.match(/^\s+/);return null===he?ie:he[0].length>=Y.length?ie.slice(Y.length):ie}).join("\n")}(he,ie[3]||"");return{type:"code",raw:he,lang:ie[2]?ie[2].trim():ie[2],text:Le}}},Ne.heading=function(Y){var ie=this.rules.block.heading.exec(Y);if(ie){var he=ie[2].trim();if(/#$/.test(he)){var Le=Gt(he,"#");(this.options.pedantic||!Le||/ $/.test(Le))&&(he=Le.trim())}return{type:"heading",raw:ie[0],depth:ie[1].length,text:he}}},Ne.nptable=function(Y){var ie=this.rules.block.nptable.exec(Y);if(ie){var he={type:"table",header:gt(ie[1].replace(/^ *| *\| *$/g,"")),align:ie[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:ie[3]?ie[3].replace(/\n$/,"").split("\n"):[],raw:ie[0]};if(he.header.length===he.align.length){var Te,Le=he.align.length;for(Te=0;Te<Le;Te++)he.align[Te]=/^ *-+: *$/.test(he.align[Te])?"right":/^ *:-+: *$/.test(he.align[Te])?"center":/^ *:-+ *$/.test(he.align[Te])?"left":null;for(Le=he.cells.length,Te=0;Te<Le;Te++)he.cells[Te]=gt(he.cells[Te],he.header.length);return he}}},Ne.hr=function(Y){var ie=this.rules.block.hr.exec(Y);if(ie)return{type:"hr",raw:ie[0]}},Ne.blockquote=function(Y){var ie=this.rules.block.blockquote.exec(Y);if(ie){var he=ie[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:ie[0],text:he}}},Ne.list=function(Y){var ie=this.rules.block.list.exec(Y);if(ie){var Q,ne,le,re,ge,Be,ct,Qt,ni,he=ie[0],Le=ie[2],Te=Le.length>1,Je={type:"list",raw:he,ordered:Te,start:Te?+Le.slice(0,-1):"",loose:!1,items:[]},L=ie[0].match(this.rules.block.item),q=!1,Ri=L.length;le=this.rules.block.listItemStart.exec(L[0]);for(var gr=0;gr<Ri;gr++){if(he=Q=L[gr],this.options.pedantic||(ni=Q.match(new RegExp("\\n\\s*\\n {0,"+(le[0].length-1)+"}\\S")))&&(ge=Q.length-ni.index+L.slice(gr+1).join("\n").length,Je.raw=Je.raw.substring(0,Je.raw.length-ge),he=Q=Q.substring(0,ni.index),Ri=gr+1),gr!==Ri-1){if(re=this.rules.block.listItemStart.exec(L[gr+1]),this.options.pedantic?re[1].length>le[1].length:re[1].length>=le[0].length||re[1].length>3){L.splice(gr,2,L[gr]+(!this.options.pedantic&&re[1].length<le[0].length&&!L[gr].match(/\n$/)?"":"\n")+L[gr+1]),gr--,Ri--;continue}(!this.options.pedantic||this.options.smartLists?re[2][re[2].length-1]!==Le[Le.length-1]:Te===(1===re[2].length))&&(ge=L.slice(gr+1).join("\n").length,Je.raw=Je.raw.substring(0,Je.raw.length-ge),gr=Ri-1),le=re}ne=Q.length,~(Q=Q.replace(/^ *([*+-]|\d+[.)]) ?/,"")).indexOf("\n ")&&(ne-=Q.length,Q=Q.replace(this.options.pedantic?/^ {1,4}/gm:new RegExp("^ {1,"+ne+"}","gm"),"")),Q=Gt(Q,"\n"),gr!==Ri-1&&(he+="\n"),Be=q||/\n\n(?!\s*$)/.test(he),gr!==Ri-1&&(q="\n\n"===he.slice(-2),Be||(Be=q)),Be&&(Je.loose=!0),this.options.gfm&&(Qt=void 0,(ct=/^\[[ xX]\] /.test(Q))&&(Qt=" "!==Q[1],Q=Q.replace(/^\[[ xX]\] +/,""))),Je.items.push({type:"list_item",raw:he,task:ct,checked:Qt,loose:Be,text:Q})}return Je}},Ne.html=function(Y){var ie=this.rules.block.html.exec(Y);if(ie)return{type:this.options.sanitize?"paragraph":"html",raw:ie[0],pre:!this.options.sanitizer&&("pre"===ie[1]||"script"===ie[1]||"style"===ie[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(ie[0]):ft(ie[0]):ie[0]}},Ne.def=function(Y){var ie=this.rules.block.def.exec(Y);if(ie)return ie[3]&&(ie[3]=ie[3].substring(1,ie[3].length-1)),{type:"def",tag:ie[1].toLowerCase().replace(/\s+/g," "),raw:ie[0],href:ie[2],title:ie[3]}},Ne.table=function(Y){var ie=this.rules.block.table.exec(Y);if(ie){var he={type:"table",header:gt(ie[1].replace(/^ *| *\| *$/g,"")),align:ie[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:ie[3]?ie[3].replace(/\n$/,"").split("\n"):[]};if(he.header.length===he.align.length){he.raw=ie[0];var Te,Le=he.align.length;for(Te=0;Te<Le;Te++)he.align[Te]=/^ *-+: *$/.test(he.align[Te])?"right":/^ *:-+: *$/.test(he.align[Te])?"center":/^ *:-+ *$/.test(he.align[Te])?"left":null;for(Le=he.cells.length,Te=0;Te<Le;Te++)he.cells[Te]=gt(he.cells[Te].replace(/^ *\| *| *\| *$/g,""),he.header.length);return he}}},Ne.lheading=function(Y){var ie=this.rules.block.lheading.exec(Y);if(ie)return{type:"heading",raw:ie[0],depth:"="===ie[2].charAt(0)?1:2,text:ie[1]}},Ne.paragraph=function(Y){var ie=this.rules.block.paragraph.exec(Y);if(ie)return{type:"paragraph",raw:ie[0],text:"\n"===ie[1].charAt(ie[1].length-1)?ie[1].slice(0,-1):ie[1]}},Ne.text=function(Y){var ie=this.rules.block.text.exec(Y);if(ie)return{type:"text",raw:ie[0],text:ie[0]}},Ne.escape=function(Y){var ie=this.rules.inline.escape.exec(Y);if(ie)return{type:"escape",raw:ie[0],text:ft(ie[1])}},Ne.tag=function(Y,ie,he){var Le=this.rules.inline.tag.exec(Y);if(Le)return!ie&&/^<a /i.test(Le[0])?ie=!0:ie&&/^<\/a>/i.test(Le[0])&&(ie=!1),!he&&/^<(pre|code|kbd|script)(\s|>)/i.test(Le[0])?he=!0:he&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(Le[0])&&(he=!1),{type:this.options.sanitize?"text":"html",raw:Le[0],inLink:ie,inRawBlock:he,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(Le[0]):ft(Le[0]):Le[0]}},Ne.link=function(Y){var ie=this.rules.inline.link.exec(Y);if(ie){var he=ie[2].trim();if(!this.options.pedantic&&/^</.test(he)){if(!/>$/.test(he))return;var Le=Gt(he.slice(0,-1),"\\");if((he.length-Le.length)%2==0)return}else{var Te=yn(ie[2],"()");if(Te>-1){var L=(0===ie[0].indexOf("!")?5:4)+ie[1].length+Te;ie[2]=ie[2].substring(0,Te),ie[0]=ie[0].substring(0,L).trim(),ie[3]=""}}var q=ie[2],Q="";if(this.options.pedantic){var ne=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(q);ne&&(q=ne[1],Q=ne[3])}else Q=ie[3]?ie[3].slice(1,-1):"";return q=q.trim(),/^</.test(q)&&(q=this.options.pedantic&&!/>$/.test(he)?q.slice(1):q.slice(1,-1)),xt(ie,{href:q&&q.replace(this.rules.inline._escapes,"$1"),title:Q&&Q.replace(this.rules.inline._escapes,"$1")},ie[0])}},Ne.reflink=function(Y,ie){var he;if((he=this.rules.inline.reflink.exec(Y))||(he=this.rules.inline.nolink.exec(Y))){var Le=(he[2]||he[1]).replace(/\s+/g," ");if(!(Le=ie[Le.toLowerCase()])||!Le.href){var Te=he[0].charAt(0);return{type:"text",raw:Te,text:Te}}return xt(he,Le,he[0])}},Ne.emStrong=function(Y,ie,he){void 0===he&&(he="");var Le=this.rules.inline.emStrong.lDelim.exec(Y);if(Le&&(!Le[3]||!he.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var Te=Le[1]||Le[2]||"";if(!Te||Te&&(""===he||this.rules.inline.punctuation.exec(he))){var L,q,Je=Le[0].length-1,Q=Je,ne=0,le="*"===Le[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(le.lastIndex=0,ie=ie.slice(-1*Y.length+Je);null!=(Le=le.exec(ie));)if(L=Le[1]||Le[2]||Le[3]||Le[4]||Le[5]||Le[6]){if(q=L.length,Le[3]||Le[4]){Q+=q;continue}if((Le[5]||Le[6])&&Je%3&&!((Je+q)%3)){ne+=q;continue}if(!((Q-=q)>0))return q=Math.min(q,q+Q+ne),Math.min(Je,q)%2?{type:"em",raw:Y.slice(0,Je+Le.index+q+1),text:Y.slice(1,Je+Le.index+q)}:{type:"strong",raw:Y.slice(0,Je+Le.index+q+1),text:Y.slice(2,Je+Le.index+q-1)}}}}},Ne.codespan=function(Y){var ie=this.rules.inline.code.exec(Y);if(ie){var he=ie[2].replace(/\n/g," "),Le=/[^ ]/.test(he),Te=/^ /.test(he)&&/ $/.test(he);return Le&&Te&&(he=he.substring(1,he.length-1)),he=ft(he,!0),{type:"codespan",raw:ie[0],text:he}}},Ne.br=function(Y){var ie=this.rules.inline.br.exec(Y);if(ie)return{type:"br",raw:ie[0]}},Ne.del=function(Y){var ie=this.rules.inline.del.exec(Y);if(ie)return{type:"del",raw:ie[0],text:ie[2]}},Ne.autolink=function(Y,ie){var Le,Te,he=this.rules.inline.autolink.exec(Y);if(he)return Te="@"===he[2]?"mailto:"+(Le=ft(this.options.mangle?ie(he[1]):he[1])):Le=ft(he[1]),{type:"link",raw:he[0],text:Le,href:Te,tokens:[{type:"text",raw:Le,text:Le}]}},Ne.url=function(Y,ie){var he;if(he=this.rules.inline.url.exec(Y)){var Le,Te;if("@"===he[2])Te="mailto:"+(Le=ft(this.options.mangle?ie(he[0]):he[0]));else{var Je;do{Je=he[0],he[0]=this.rules.inline._backpedal.exec(he[0])[0]}while(Je!==he[0]);Le=ft(he[0]),Te="www."===he[1]?"http://"+Le:Le}return{type:"link",raw:he[0],text:Le,href:Te,tokens:[{type:"text",raw:Le,text:Le}]}}},Ne.inlineText=function(Y,ie,he){var Te,Le=this.rules.inline.text.exec(Y);if(Le)return Te=ie?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(Le[0]):ft(Le[0]):Le[0]:ft(this.options.smartypants?he(Le[0]):Le[0]),{type:"text",raw:Le[0],text:Te}},Ue}(),Yi=at_noopTest,At=at_edit,pi=at_merge,$t={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:Yi,table:Yi,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};$t.def=At($t.def).replace("label",$t._label).replace("title",$t._title).getRegex(),$t.bullet=/(?:[*+-]|\d{1,9}[.)])/,$t.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,$t.item=At($t.item,"gm").replace(/bull/g,$t.bullet).getRegex(),$t.listItemStart=At(/^( *)(bull) */).replace("bull",$t.bullet).getRegex(),$t.list=At($t.list).replace(/bull/g,$t.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+$t.def.source+")").getRegex(),$t._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",$t._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,$t.html=At($t.html,"i").replace("comment",$t._comment).replace("tag",$t._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),$t.paragraph=At($t._paragraph).replace("hr",$t.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",$t._tag).getRegex(),$t.blockquote=At($t.blockquote).replace("paragraph",$t.paragraph).getRegex(),$t.normal=pi({},$t),$t.gfm=pi({},$t.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),$t.gfm.nptable=At($t.gfm.nptable).replace("hr",$t.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",$t._tag).getRegex(),$t.gfm.table=At($t.gfm.table).replace("hr",$t.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",$t._tag).getRegex(),$t.pedantic=pi({},$t.normal,{html:At("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",$t._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Yi,paragraph:At($t.normal._paragraph).replace("hr",$t.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",$t.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var ht={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Yi,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Yi,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};ht.punctuation=At(ht.punctuation).replace(/punctuation/g,ht._punctuation).getRegex(),ht.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,ht.escapedEmSt=/\\\*|\\_/g,ht._comment=At($t._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),ht.emStrong.lDelim=At(ht.emStrong.lDelim).replace(/punct/g,ht._punctuation).getRegex(),ht.emStrong.rDelimAst=At(ht.emStrong.rDelimAst,"g").replace(/punct/g,ht._punctuation).getRegex(),ht.emStrong.rDelimUnd=At(ht.emStrong.rDelimUnd,"g").replace(/punct/g,ht._punctuation).getRegex(),ht._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,ht._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,ht._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,ht.autolink=At(ht.autolink).replace("scheme",ht._scheme).replace("email",ht._email).getRegex(),ht._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,ht.tag=At(ht.tag).replace("comment",ht._comment).replace("attribute",ht._attribute).getRegex(),ht._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ht._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,ht._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,ht.link=At(ht.link).replace("label",ht._label).replace("href",ht._href).replace("title",ht._title).getRegex(),ht.reflink=At(ht.reflink).replace("label",ht._label).getRegex(),ht.reflinkSearch=At(ht.reflinkSearch,"g").replace("reflink",ht.reflink).replace("nolink",ht.nolink).getRegex(),ht.normal=pi({},ht),ht.pedantic=pi({},ht.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:At(/^!?\[(label)\]\((.*?)\)/).replace("label",ht._label).getRegex(),reflink:At(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ht._label).getRegex()}),ht.gfm=pi({},ht.normal,{escape:At(ht.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),ht.gfm.url=At(ht.gfm.url,"i").replace("email",ht.gfm._extended_email).getRegex(),ht.breaks=pi({},ht.gfm,{br:At(ht.br).replace("{2,}","*").getRegex(),text:At(ht.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var vi={block:$t,inline:ht},Nn=sn,gi=Ce.exports.defaults,Gn=vi.block,jn=vi.inline,Xi=at_repeatString;function En(Ue){return Ue.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function rn(Ue){var Me,Y,Ne="",ie=Ue.length;for(Me=0;Me<ie;Me++)Y=Ue.charCodeAt(Me),Math.random()>.5&&(Y="x"+Y.toString(16)),Ne+="&#"+Y+";";return Ne}var ut=function(){function Ue(Me){this.tokens=[],this.tokens.links=Object.create(null),this.options=Me||gi,this.options.tokenizer=this.options.tokenizer||new Nn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var Y={block:Gn.normal,inline:jn.normal};this.options.pedantic?(Y.block=Gn.pedantic,Y.inline=jn.pedantic):this.options.gfm&&(Y.block=Gn.gfm,Y.inline=this.options.breaks?jn.breaks:jn.gfm),this.tokenizer.rules=Y}Ue.lex=function(Y,ie){return new Ue(ie).lex(Y)},Ue.lexInline=function(Y,ie){return new Ue(ie).inlineTokens(Y)};var Ne=Ue.prototype;return Ne.lex=function(Y){return Y=Y.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(Y,this.tokens,!0),this.inline(this.tokens),this.tokens},Ne.blockTokens=function(Y,ie,he){var Te,Je,L,q,Q,ne,Le=this;for(void 0===ie&&(ie=[]),void 0===he&&(he=!0),this.options.pedantic&&(Y=Y.replace(/^ +$/gm,""));Y;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(re){return!!(Te=re.call(Le,Y,ie))&&(Y=Y.substring(Te.raw.length),ie.push(Te),!0)}))){if(Te=this.tokenizer.space(Y)){Y=Y.substring(Te.raw.length),Te.type&&ie.push(Te);continue}if(Te=this.tokenizer.code(Y)){Y=Y.substring(Te.raw.length),(q=ie[ie.length-1])&&"paragraph"===q.type?(q.raw+="\n"+Te.raw,q.text+="\n"+Te.text):ie.push(Te);continue}if(Te=this.tokenizer.fences(Y)){Y=Y.substring(Te.raw.length),ie.push(Te);continue}if(Te=this.tokenizer.heading(Y)){Y=Y.substring(Te.raw.length),ie.push(Te);continue}if(Te=this.tokenizer.nptable(Y)){Y=Y.substring(Te.raw.length),ie.push(Te);continue}if(Te=this.tokenizer.hr(Y)){Y=Y.substring(Te.raw.length),ie.push(Te);continue}if(Te=this.tokenizer.blockquote(Y)){Y=Y.substring(Te.raw.length),Te.tokens=this.blockTokens(Te.text,[],he),ie.push(Te);continue}if(Te=this.tokenizer.list(Y)){for(Y=Y.substring(Te.raw.length),L=Te.items.length,Je=0;Je<L;Je++)Te.items[Je].tokens=this.blockTokens(Te.items[Je].text,[],!1);ie.push(Te);continue}if(Te=this.tokenizer.html(Y)){Y=Y.substring(Te.raw.length),ie.push(Te);continue}if(he&&(Te=this.tokenizer.def(Y))){Y=Y.substring(Te.raw.length),this.tokens.links[Te.tag]||(this.tokens.links[Te.tag]={href:Te.href,title:Te.title});continue}if(Te=this.tokenizer.table(Y)){Y=Y.substring(Te.raw.length),ie.push(Te);continue}if(Te=this.tokenizer.lheading(Y)){Y=Y.substring(Te.raw.length),ie.push(Te);continue}if(Q=Y,this.options.extensions&&this.options.extensions.startBlock&&function(){var re=1/0,ge=Y.slice(1),Be=void 0;Le.options.extensions.startBlock.forEach(function(ct){"number"==typeof(Be=ct.call(this,ge))&&Be>=0&&(re=Math.min(re,Be))}),re<1/0&&re>=0&&(Q=Y.substring(0,re+1))}(),he&&(Te=this.tokenizer.paragraph(Q))){q=ie[ie.length-1],ne&&"paragraph"===q.type?(q.raw+="\n"+Te.raw,q.text+="\n"+Te.text):ie.push(Te),ne=Q.length!==Y.length,Y=Y.substring(Te.raw.length);continue}if(Te=this.tokenizer.text(Y)){Y=Y.substring(Te.raw.length),(q=ie[ie.length-1])&&"text"===q.type?(q.raw+="\n"+Te.raw,q.text+="\n"+Te.text):ie.push(Te);continue}if(Y){var le="Infinite loop on byte: "+Y.charCodeAt(0);if(this.options.silent){console.error(le);break}throw new Error(le)}}return ie},Ne.inline=function(Y){var ie,he,Le,Te,Je,L,q=Y.length;for(ie=0;ie<q;ie++)switch(L=Y[ie],L.type){case"paragraph":case"text":case"heading":L.tokens=[],this.inlineTokens(L.text,L.tokens);break;case"table":for(L.tokens={header:[],cells:[]},Te=L.header.length,he=0;he<Te;he++)L.tokens.header[he]=[],this.inlineTokens(L.header[he],L.tokens.header[he]);for(Te=L.cells.length,he=0;he<Te;he++)for(Je=L.cells[he],L.tokens.cells[he]=[],Le=0;Le<Je.length;Le++)L.tokens.cells[he][Le]=[],this.inlineTokens(Je[Le],L.tokens.cells[he][Le]);break;case"blockquote":this.inline(L.tokens);break;case"list":for(Te=L.items.length,he=0;he<Te;he++)this.inline(L.items[he].tokens)}return Y},Ne.inlineTokens=function(Y,ie,he,Le){var Te=this;void 0===ie&&(ie=[]),void 0===he&&(he=!1),void 0===Le&&(Le=!1);var Je,L,q,ne,le,re,Q=Y;if(this.tokens.links){var ge=Object.keys(this.tokens.links);if(ge.length>0)for(;null!=(ne=this.tokenizer.rules.inline.reflinkSearch.exec(Q));)ge.includes(ne[0].slice(ne[0].lastIndexOf("[")+1,-1))&&(Q=Q.slice(0,ne.index)+"["+Xi("a",ne[0].length-2)+"]"+Q.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(ne=this.tokenizer.rules.inline.blockSkip.exec(Q));)Q=Q.slice(0,ne.index)+"["+Xi("a",ne[0].length-2)+"]"+Q.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(ne=this.tokenizer.rules.inline.escapedEmSt.exec(Q));)Q=Q.slice(0,ne.index)+"++"+Q.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;Y;)if(le||(re=""),le=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(ct){return!!(Je=ct.call(Te,Y,ie))&&(Y=Y.substring(Je.raw.length),ie.push(Je),!0)}))){if(Je=this.tokenizer.escape(Y)){Y=Y.substring(Je.raw.length),ie.push(Je);continue}if(Je=this.tokenizer.tag(Y,he,Le)){Y=Y.substring(Je.raw.length),he=Je.inLink,Le=Je.inRawBlock,(L=ie[ie.length-1])&&"text"===Je.type&&"text"===L.type?(L.raw+=Je.raw,L.text+=Je.text):ie.push(Je);continue}if(Je=this.tokenizer.link(Y)){Y=Y.substring(Je.raw.length),"link"===Je.type&&(Je.tokens=this.inlineTokens(Je.text,[],!0,Le)),ie.push(Je);continue}if(Je=this.tokenizer.reflink(Y,this.tokens.links)){Y=Y.substring(Je.raw.length),L=ie[ie.length-1],"link"===Je.type?(Je.tokens=this.inlineTokens(Je.text,[],!0,Le),ie.push(Je)):L&&"text"===Je.type&&"text"===L.type?(L.raw+=Je.raw,L.text+=Je.text):ie.push(Je);continue}if(Je=this.tokenizer.emStrong(Y,Q,re)){Y=Y.substring(Je.raw.length),Je.tokens=this.inlineTokens(Je.text,[],he,Le),ie.push(Je);continue}if(Je=this.tokenizer.codespan(Y)){Y=Y.substring(Je.raw.length),ie.push(Je);continue}if(Je=this.tokenizer.br(Y)){Y=Y.substring(Je.raw.length),ie.push(Je);continue}if(Je=this.tokenizer.del(Y)){Y=Y.substring(Je.raw.length),Je.tokens=this.inlineTokens(Je.text,[],he,Le),ie.push(Je);continue}if(Je=this.tokenizer.autolink(Y,rn)){Y=Y.substring(Je.raw.length),ie.push(Je);continue}if(!he&&(Je=this.tokenizer.url(Y,rn))){Y=Y.substring(Je.raw.length),ie.push(Je);continue}if(q=Y,this.options.extensions&&this.options.extensions.startInline&&function(){var ct=1/0,Qt=Y.slice(1),ni=void 0;Te.options.extensions.startInline.forEach(function(Ri){"number"==typeof(ni=Ri.call(this,Qt))&&ni>=0&&(ct=Math.min(ct,ni))}),ct<1/0&&ct>=0&&(q=Y.substring(0,ct+1))}(),Je=this.tokenizer.inlineText(q,Le,En)){Y=Y.substring(Je.raw.length),"_"!==Je.raw.slice(-1)&&(re=Je.raw.slice(-1)),le=!0,(L=ie[ie.length-1])&&"text"===L.type?(L.raw+=Je.raw,L.text+=Je.text):ie.push(Je);continue}if(Y){var Be="Infinite loop on byte: "+Y.charCodeAt(0);if(this.options.silent){console.error(Be);break}throw new Error(Be)}}return ie},function(Ue,Ne,Me){Ne&&bt(Ue.prototype,Ne),Me&&bt(Ue,Me)}(Ue,null,[{key:"rules",get:function(){return{block:Gn,inline:jn}}}]),Ue}(),Si=Ce.exports.defaults,sr=at_cleanUrl,Mr=at_escape,Pn=function(){function Ue(Me){this.options=Me||Si}var Ne=Ue.prototype;return Ne.code=function(Y,ie,he){var Le=(ie||"").match(/\S*/)[0];if(this.options.highlight){var Te=this.options.highlight(Y,Le);null!=Te&&Te!==Y&&(he=!0,Y=Te)}return Y=Y.replace(/\n$/,"")+"\n",Le?'<pre><code class="'+this.options.langPrefix+Mr(Le,!0)+'">'+(he?Y:Mr(Y,!0))+"</code></pre>\n":"<pre><code>"+(he?Y:Mr(Y,!0))+"</code></pre>\n"},Ne.blockquote=function(Y){return"<blockquote>\n"+Y+"</blockquote>\n"},Ne.html=function(Y){return Y},Ne.heading=function(Y,ie,he,Le){return this.options.headerIds?"<h"+ie+' id="'+this.options.headerPrefix+Le.slug(he)+'">'+Y+"</h"+ie+">\n":"<h"+ie+">"+Y+"</h"+ie+">\n"},Ne.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},Ne.list=function(Y,ie,he){var Le=ie?"ol":"ul";return"<"+Le+(ie&&1!==he?' start="'+he+'"':"")+">\n"+Y+"</"+Le+">\n"},Ne.listitem=function(Y){return"<li>"+Y+"</li>\n"},Ne.checkbox=function(Y){return"<input "+(Y?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},Ne.paragraph=function(Y){return"<p>"+Y+"</p>\n"},Ne.table=function(Y,ie){return ie&&(ie="<tbody>"+ie+"</tbody>"),"<table>\n<thead>\n"+Y+"</thead>\n"+ie+"</table>\n"},Ne.tablerow=function(Y){return"<tr>\n"+Y+"</tr>\n"},Ne.tablecell=function(Y,ie){var he=ie.header?"th":"td";return(ie.align?"<"+he+' align="'+ie.align+'">':"<"+he+">")+Y+"</"+he+">\n"},Ne.strong=function(Y){return"<strong>"+Y+"</strong>"},Ne.em=function(Y){return"<em>"+Y+"</em>"},Ne.codespan=function(Y){return"<code>"+Y+"</code>"},Ne.br=function(){return this.options.xhtml?"<br/>":"<br>"},Ne.del=function(Y){return"<del>"+Y+"</del>"},Ne.link=function(Y,ie,he){if(null===(Y=sr(this.options.sanitize,this.options.baseUrl,Y)))return he;var Le='<a href="'+Mr(Y)+'"';return ie&&(Le+=' title="'+ie+'"'),Le+">"+he+"</a>"},Ne.image=function(Y,ie,he){if(null===(Y=sr(this.options.sanitize,this.options.baseUrl,Y)))return he;var Le='<img src="'+Y+'" alt="'+he+'"';return ie&&(Le+=' title="'+ie+'"'),Le+(this.options.xhtml?"/>":">")},Ne.text=function(Y){return Y},Ue}(),Kn=function(){function Ue(){}var Ne=Ue.prototype;return Ne.strong=function(Y){return Y},Ne.em=function(Y){return Y},Ne.codespan=function(Y){return Y},Ne.del=function(Y){return Y},Ne.html=function(Y){return Y},Ne.text=function(Y){return Y},Ne.link=function(Y,ie,he){return""+he},Ne.image=function(Y,ie,he){return""+he},Ne.br=function(){return""},Ue}(),as=function(){function Ue(){this.seen={}}var Ne=Ue.prototype;return Ne.serialize=function(Y){return Y.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},Ne.getNextSafeSlug=function(Y,ie){var he=Y,Le=0;if(this.seen.hasOwnProperty(he)){Le=this.seen[Y];do{he=Y+"-"+ ++Le}while(this.seen.hasOwnProperty(he))}return ie||(this.seen[Y]=Le,this.seen[he]=0),he},Ne.slug=function(Y,ie){void 0===ie&&(ie={});var he=this.serialize(Y);return this.getNextSafeSlug(he,ie.dryrun)},Ue}(),hr=Pn,pr=Kn,Ki=as,ea=Ce.exports.defaults,Ii=at_unescape,ls=ut,qs=function(){function Ue(Me){this.options=Me||ea,this.options.renderer=this.options.renderer||new hr,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new pr,this.slugger=new Ki}Ue.parse=function(Y,ie){return new Ue(ie).parse(Y)},Ue.parseInline=function(Y,ie){return new Ue(ie).parseInline(Y)};var Ne=Ue.prototype;return Ne.parse=function(Y,ie){void 0===ie&&(ie=!0);var Le,Te,Je,L,q,Q,ne,le,re,ge,Be,ct,Qt,ni,Ri,gr,Il,oc,id,he="",D0=Y.length;for(Le=0;Le<D0;Le++)if(ge=Y[Le],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[ge.type]&&(!1!==(id=this.options.extensions.renderers[ge.type].call(this,ge))||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(ge.type)))he+=id||"";else switch(ge.type){case"space":continue;case"hr":he+=this.renderer.hr();continue;case"heading":he+=this.renderer.heading(this.parseInline(ge.tokens),ge.depth,Ii(this.parseInline(ge.tokens,this.textRenderer)),this.slugger);continue;case"code":he+=this.renderer.code(ge.text,ge.lang,ge.escaped);continue;case"table":for(le="",ne="",L=ge.header.length,Te=0;Te<L;Te++)ne+=this.renderer.tablecell(this.parseInline(ge.tokens.header[Te]),{header:!0,align:ge.align[Te]});for(le+=this.renderer.tablerow(ne),re="",L=ge.cells.length,Te=0;Te<L;Te++){for(ne="",q=(Q=ge.tokens.cells[Te]).length,Je=0;Je<q;Je++)ne+=this.renderer.tablecell(this.parseInline(Q[Je]),{header:!1,align:ge.align[Je]});re+=this.renderer.tablerow(ne)}he+=this.renderer.table(le,re);continue;case"blockquote":re=this.parse(ge.tokens),he+=this.renderer.blockquote(re);continue;case"list":for(Be=ge.ordered,ct=ge.start,Qt=ge.loose,L=ge.items.length,re="",Te=0;Te<L;Te++)gr=(Ri=ge.items[Te]).checked,Il=Ri.task,ni="",Ri.task&&(oc=this.renderer.checkbox(gr),Qt?Ri.tokens.length>0&&"text"===Ri.tokens[0].type?(Ri.tokens[0].text=oc+" "+Ri.tokens[0].text,Ri.tokens[0].tokens&&Ri.tokens[0].tokens.length>0&&"text"===Ri.tokens[0].tokens[0].type&&(Ri.tokens[0].tokens[0].text=oc+" "+Ri.tokens[0].tokens[0].text)):Ri.tokens.unshift({type:"text",text:oc}):ni+=oc),ni+=this.parse(Ri.tokens,Qt),re+=this.renderer.listitem(ni,Il,gr);he+=this.renderer.list(re,Be,ct);continue;case"html":he+=this.renderer.html(ge.text);continue;case"paragraph":he+=this.renderer.paragraph(this.parseInline(ge.tokens));continue;case"text":for(re=ge.tokens?this.parseInline(ge.tokens):ge.text;Le+1<D0&&"text"===Y[Le+1].type;)re+="\n"+((ge=Y[++Le]).tokens?this.parseInline(ge.tokens):ge.text);he+=ie?this.renderer.paragraph(re):re;continue;default:var rd='Token with "'+ge.type+'" type was not found.';if(this.options.silent)return void console.error(rd);throw new Error(rd)}return he},Ne.parseInline=function(Y,ie){ie=ie||this.renderer;var Le,Te,Je,he="",L=Y.length;for(Le=0;Le<L;Le++)if(Te=Y[Le],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[Te.type]&&(!1!==(Je=this.options.extensions.renderers[Te.type].call(this,Te))||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(Te.type)))he+=Je||"";else switch(Te.type){case"escape":he+=ie.text(Te.text);break;case"html":he+=ie.html(Te.text);break;case"link":he+=ie.link(Te.href,Te.title,this.parseInline(Te.tokens,ie));break;case"image":he+=ie.image(Te.href,Te.title,Te.text);break;case"strong":he+=ie.strong(this.parseInline(Te.tokens,ie));break;case"em":he+=ie.em(this.parseInline(Te.tokens,ie));break;case"codespan":he+=ie.codespan(Te.text);break;case"br":he+=ie.br();break;case"del":he+=ie.del(this.parseInline(Te.tokens,ie));break;case"text":he+=ie.text(Te.text);break;default:var q='Token with "'+Te.type+'" type was not found.';if(this.options.silent)return void console.error(q);throw new Error(q)}return he},Ue}(),Zn=sn,uo=Pn,us=Kn,_a=as,Os=at_merge,mu=at_checkSanitizeDeprecation,Qa=at_escape,Fl=Ce.exports.getDefaults,co=Ce.exports.changeDefaults,Ln=Ce.exports.defaults;function Dn(Ue,Ne,Me){if(null==Ue)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof Ue)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(Ue)+", string expected");if("function"==typeof Ne&&(Me=Ne,Ne=null),Ne=Os({},Dn.defaults,Ne||{}),mu(Ne),Me){var ie,Y=Ne.highlight;try{ie=ls.lex(Ue,Ne)}catch(Je){return Me(Je)}var he=function(L){var q;if(!L)try{Ne.walkTokens&&Dn.walkTokens(ie,Ne.walkTokens),q=qs.parse(ie,Ne)}catch(Q){L=Q}return Ne.highlight=Y,L?Me(L):Me(null,q)};if(!Y||Y.length<3||(delete Ne.highlight,!ie.length))return he();var Le=0;return Dn.walkTokens(ie,function(Je){"code"===Je.type&&(Le++,setTimeout(function(){Y(Je.text,Je.lang,function(L,q){if(L)return he(L);null!=q&&q!==Je.text&&(Je.text=q,Je.escaped=!0),0==--Le&&he()})},0))}),void(0===Le&&he())}try{var Te=ls.lex(Ue,Ne);return Ne.walkTokens&&Dn.walkTokens(Te,Ne.walkTokens),qs.parse(Te,Ne)}catch(Je){if(Je.message+="\nPlease report this to https://github.com/markedjs/marked.",Ne.silent)return"<p>An error occurred:</p><pre>"+Qa(Je.message+"",!0)+"</pre>";throw Je}}return Dn.options=Dn.setOptions=function(Ue){return Os(Dn.defaults,Ue),co(Dn.defaults),Dn},Dn.getDefaults=Fl,Dn.defaults=Ln,Dn.use=function(){for(var Ue=this,Ne=arguments.length,Me=new Array(Ne),Y=0;Y<Ne;Y++)Me[Y]=arguments[Y];var Le,ie=Os.apply(void 0,[{}].concat(Me)),he=Dn.defaults.extensions||{renderers:{},childTokens:{}};Me.forEach(function(Te){if(Te.extensions&&(Le=!0,Te.extensions.forEach(function(L){if(!L.name)throw new Error("extension name required");if(L.renderer){var q=he.renderers?he.renderers[L.name]:null;he.renderers[L.name]=q?function(){for(var Q=arguments.length,ne=new Array(Q),le=0;le<Q;le++)ne[le]=arguments[le];var re=L.renderer.apply(this,ne);return!1===re&&(re=q.apply(this,ne)),re}:L.renderer}if(L.tokenizer){if(!L.level||"block"!==L.level&&"inline"!==L.level)throw new Error("extension level must be 'block' or 'inline'");he[L.level]?he[L.level].unshift(L.tokenizer):he[L.level]=[L.tokenizer],L.start&&("block"===L.level?he.startBlock?he.startBlock.push(L.start):he.startBlock=[L.start]:"inline"===L.level&&(he.startInline?he.startInline.push(L.start):he.startInline=[L.start]))}L.childTokens&&(he.childTokens[L.name]=L.childTokens)})),Te.renderer&&function(){var L=Dn.defaults.renderer||new uo,q=function(le){var re=L[le];L[le]=function(){for(var ge=arguments.length,Be=new Array(ge),ct=0;ct<ge;ct++)Be[ct]=arguments[ct];var Qt=Te.renderer[le].apply(L,Be);return!1===Qt&&(Qt=re.apply(L,Be)),Qt}};for(var Q in Te.renderer)q(Q);ie.renderer=L}(),Te.tokenizer&&function(){var L=Dn.defaults.tokenizer||new Zn,q=function(le){var re=L[le];L[le]=function(){for(var ge=arguments.length,Be=new Array(ge),ct=0;ct<ge;ct++)Be[ct]=arguments[ct];var Qt=Te.tokenizer[le].apply(L,Be);return!1===Qt&&(Qt=re.apply(L,Be)),Qt}};for(var Q in Te.tokenizer)q(Q);ie.tokenizer=L}(),Te.walkTokens){var Je=Dn.defaults.walkTokens;ie.walkTokens=function(L){Te.walkTokens.call(Ue,L),Je&&Je(L)}}Le&&(ie.extensions=he),Dn.setOptions(ie)})},Dn.walkTokens=function(Ue,Ne){for(var ie,Me=function(){var Le=ie.value;switch(Ne(Le),Le.type){case"table":for(var Je,Te=qe(Le.tokens.header);!(Je=Te()).done;)Dn.walkTokens(Je.value,Ne);for(var Q,q=qe(Le.tokens.cells);!(Q=q()).done;)for(var re,le=qe(Q.value);!(re=le()).done;)Dn.walkTokens(re.value,Ne);break;case"list":Dn.walkTokens(Le.items,Ne);break;default:Dn.defaults.extensions&&Dn.defaults.extensions.childTokens&&Dn.defaults.extensions.childTokens[Le.type]?Dn.defaults.extensions.childTokens[Le.type].forEach(function(Be){Dn.walkTokens(Le[Be],Ne)}):Le.tokens&&Dn.walkTokens(Le.tokens,Ne)}},Y=qe(Ue);!(ie=Y()).done;)Me()},Dn.parseInline=function(Ue,Ne){if(null==Ue)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof Ue)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(Ue)+", string expected");Ne=Os({},Dn.defaults,Ne||{}),mu(Ne);try{var Me=ls.lexInline(Ue,Ne);return Ne.walkTokens&&Dn.walkTokens(Me,Ne.walkTokens),qs.parseInline(Me,Ne)}catch(Y){if(Y.message+="\nPlease report this to https://github.com/markedjs/marked.",Ne.silent)return"<p>An error occurred:</p><pre>"+Qa(Y.message+"",!0)+"</pre>";throw Y}},Dn.Parser=qs,Dn.parser=qs.parse,Dn.Renderer=uo,Dn.TextRenderer=us,Dn.Lexer=ls,Dn.lexer=ls.lex,Dn.Tokenizer=Zn,Dn.Slugger=_a,Dn.parse=Dn,Dn}()},593:function(it,bt){var pe,K;void 0!==(K="function"==typeof(pe=function qe(){"use strict";var Ce="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==Ce?Ce:{},xe=!Ce.document&&!!Ce.postMessage,ve=xe&&/blob:/i.test((Ce.location||{}).protocol),de={},De=0,Ae={parse:function(ae,me){var Ze=(me=me||{}).dynamicTyping||!1;if(Mt(Ze)&&(me.dynamicTypingFunction=Ze,Ze={}),me.dynamicTyping=Ze,me.transform=!!Mt(me.transform)&&me.transform,me.worker&&Ae.WORKERS_SUPPORTED){var Ve=function(){if(!Ae.WORKERS_SUPPORTED)return!1;var wt,at,lt=(wt=Ce.URL||Ce.webkitURL||null,at=qe.toString(),Ae.BLOB_URL||(Ae.BLOB_URL=wt.createObjectURL(new Blob(["(",at,")();"],{type:"text/javascript"})))),We=new Ce.Worker(lt);return We.onmessage=oi,We.id=De++,de[We.id]=We}();return Ve.userStep=me.step,Ve.userChunk=me.chunk,Ve.userComplete=me.complete,Ve.userError=me.error,me.step=Mt(me.step),me.chunk=Mt(me.chunk),me.complete=Mt(me.complete),me.error=Mt(me.error),delete me.worker,void Ve.postMessage({input:ae,config:me,workerId:Ve.id})}var $e=null;return"string"==typeof ae?$e=me.download?new nt(me):new Yt(me):!0===ae.readable&&Mt(ae.read)&&Mt(ae.on)?$e=new Kt(me):(Ce.File&&ae instanceof File||ae instanceof Object)&&($e=new T(me)),$e.stream(ae)},unparse:function(ae,me){var Ze=!1,Ve=!0,$e=",",lt="\r\n",We='"',wt=We+We,at=!1,Pe=null,Gt=!1;!function(){if("object"==typeof me){if("string"!=typeof me.delimiter||Ae.BAD_DELIMITERS.filter(function(xt){return-1!==me.delimiter.indexOf(xt)}).length||($e=me.delimiter),("boolean"==typeof me.quotes||"function"==typeof me.quotes||Array.isArray(me.quotes))&&(Ze=me.quotes),"boolean"!=typeof me.skipEmptyLines&&"string"!=typeof me.skipEmptyLines||(at=me.skipEmptyLines),"string"==typeof me.newline&&(lt=me.newline),"string"==typeof me.quoteChar&&(We=me.quoteChar),"boolean"==typeof me.header&&(Ve=me.header),Array.isArray(me.columns)){if(0===me.columns.length)throw new Error("Option columns is empty");Pe=me.columns}void 0!==me.escapeChar&&(wt=me.escapeChar+We),"boolean"==typeof me.escapeFormulae&&(Gt=me.escapeFormulae)}}();var gt=new RegExp(Dt(We),"g");if("string"==typeof ae&&(ae=JSON.parse(ae)),Array.isArray(ae)){if(!ae.length||Array.isArray(ae[0]))return ft(null,ae,at);if("object"==typeof ae[0])return ft(Pe||Object.keys(ae[0]),ae,at)}else if("object"==typeof ae)return"string"==typeof ae.data&&(ae.data=JSON.parse(ae.data)),Array.isArray(ae.data)&&(ae.fields||(ae.fields=ae.meta&&ae.meta.fields),ae.fields||(ae.fields=Array.isArray(ae.data[0])?ae.fields:"object"==typeof ae.data[0]?Object.keys(ae.data[0]):[]),Array.isArray(ae.data[0])||"object"==typeof ae.data[0]||(ae.data=[ae.data])),ft(ae.fields||[],ae.data||[],at);throw new Error("Unable to serialize unrecognized input");function ft(xt,qt,sn){var Yi="";"string"==typeof xt&&(xt=JSON.parse(xt)),"string"==typeof qt&&(qt=JSON.parse(qt));var At=Array.isArray(xt)&&0<xt.length,pi=!Array.isArray(qt[0]);if(At&&Ve){for(var $t=0;$t<xt.length;$t++)0<$t&&(Yi+=$e),Yi+=yn(xt[$t],$t);0<qt.length&&(Yi+=lt)}for(var ht=0;ht<qt.length;ht++){var vi=At?xt.length:qt[ht].length,Nn=!1,gi=At?0===Object.keys(qt[ht]).length:0===qt[ht].length;if(sn&&!At&&(Nn="greedy"===sn?""===qt[ht].join("").trim():1===qt[ht].length&&0===qt[ht][0].length),"greedy"===sn&&At){for(var Gn=[],jn=0;jn<vi;jn++)Gn.push(qt[ht][pi?xt[jn]:jn]);Nn=""===Gn.join("").trim()}if(!Nn){for(var En=0;En<vi;En++)0<En&&!gi&&(Yi+=$e),Yi+=yn(qt[ht][At&&pi?xt[En]:En],En);ht<qt.length-1&&(!sn||0<vi&&!gi)&&(Yi+=lt)}}return Yi}function yn(xt,qt){if(null==xt)return"";if(xt.constructor===Date)return JSON.stringify(xt).slice(1,25);!0===Gt&&"string"==typeof xt&&null!==xt.match(/^[=+\-@].*$/)&&(xt="'"+xt);var sn=xt.toString().replace(gt,wt);return"boolean"==typeof Ze&&Ze||"function"==typeof Ze&&Ze(xt,qt)||Array.isArray(Ze)&&Ze[qt]||function(At,pi){for(var $t=0;$t<pi.length;$t++)if(-1<At.indexOf(pi[$t]))return!0;return!1}(sn,Ae.BAD_DELIMITERS)||-1<sn.indexOf($e)||" "===sn.charAt(0)||" "===sn.charAt(sn.length-1)?We+sn+We:sn}}};if(Ae.RECORD_SEP=String.fromCharCode(30),Ae.UNIT_SEP=String.fromCharCode(31),Ae.BYTE_ORDER_MARK="\ufeff",Ae.BAD_DELIMITERS=["\r","\n",'"',Ae.BYTE_ORDER_MARK],Ae.WORKERS_SUPPORTED=!xe&&!!Ce.Worker,Ae.NODE_STREAM_INPUT=1,Ae.LocalChunkSize=10485760,Ae.RemoteChunkSize=5242880,Ae.DefaultDelimiter=",",Ae.Parser=ti,Ae.ParserHandle=Nt,Ae.NetworkStreamer=nt,Ae.FileStreamer=T,Ae.StringStreamer=Yt,Ae.ReadableStreamStreamer=Kt,Ce.jQuery){var Ie=Ce.jQuery;Ie.fn.parse=function(ae){var me=ae.config||{},Ze=[];return this.each(function(lt){if("INPUT"!==Ie(this).prop("tagName").toUpperCase()||"file"!==Ie(this).attr("type").toLowerCase()||!Ce.FileReader||!this.files||0===this.files.length)return!0;for(var We=0;We<this.files.length;We++)Ze.push({file:this.files[We],inputElem:this,instanceConfig:Ie.extend({},me)})}),Ve(),this;function Ve(){if(0!==Ze.length){var We,wt,at,Pe=Ze[0];if(Mt(ae.before)){var Gt=ae.before(Pe.file,Pe.inputElem);if("object"==typeof Gt){if("abort"===Gt.action)return"AbortError",We=Pe.file,wt=Pe.inputElem,at=Gt.reason,void(Mt(ae.error)&&ae.error({name:"AbortError"},We,wt,at));if("skip"===Gt.action)return void $e();"object"==typeof Gt.config&&(Pe.instanceConfig=Ie.extend(Pe.instanceConfig,Gt.config))}else if("skip"===Gt)return void $e()}var gt=Pe.instanceConfig.complete;Pe.instanceConfig.complete=function(ft){Mt(gt)&&gt(ft,Pe.file,Pe.inputElem),$e()},Ae.parse(Pe.file,Pe.instanceConfig)}else Mt(ae.complete)&&ae.complete()}function $e(){Ze.splice(0,1),Ve()}}}function ke(ae){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(me){var Ze=Lt(me);Ze.chunkSize=parseInt(Ze.chunkSize),me.step||me.chunk||(Ze.chunkSize=null),this._handle=new Nt(Ze),(this._handle.streamer=this)._config=Ze}.call(this,ae),this.parseChunk=function(me,Ze){if(this.isFirstChunk&&Mt(this._config.beforeFirstChunk)){var Ve=this._config.beforeFirstChunk(me);void 0!==Ve&&(me=Ve)}this.isFirstChunk=!1,this._halted=!1;var $e=this._partialLine+me;this._partialLine="";var lt=this._handle.parse($e,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var We=lt.meta.cursor;this._finished||(this._partialLine=$e.substring(We-this._baseIndex),this._baseIndex=We),lt&&lt.data&&(this._rowCount+=lt.data.length);var wt=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(ve)Ce.postMessage({results:lt,workerId:Ae.WORKER_ID,finished:wt});else if(Mt(this._config.chunk)&&!Ze){if(this._config.chunk(lt,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);lt=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(lt.data),this._completeResults.errors=this._completeResults.errors.concat(lt.errors),this._completeResults.meta=lt.meta),this._completed||!wt||!Mt(this._config.complete)||lt&&lt.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),wt||lt&&lt.meta.paused||this._nextChunk(),lt}this._halted=!0},this._sendError=function(me){Mt(this._config.error)?this._config.error(me):ve&&this._config.error&&Ce.postMessage({workerId:Ae.WORKER_ID,error:me,finished:!1})}}function nt(ae){var me;(ae=ae||{}).chunkSize||(ae.chunkSize=Ae.RemoteChunkSize),ke.call(this,ae),this._nextChunk=xe?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(Ze){this._input=Ze,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(me=new XMLHttpRequest,this._config.withCredentials&&(me.withCredentials=this._config.withCredentials),xe||(me.onload=pt(this._chunkLoaded,this),me.onerror=pt(this._chunkError,this)),me.open(this._config.downloadRequestBody?"POST":"GET",this._input,!xe),this._config.downloadRequestHeaders){var Ze=this._config.downloadRequestHeaders;for(var Ve in Ze)me.setRequestHeader(Ve,Ze[Ve])}this._config.chunkSize&&me.setRequestHeader("Range","bytes="+this._start+"-"+(this._start+this._config.chunkSize-1));try{me.send(this._config.downloadRequestBody)}catch(lt){this._chunkError(lt.message)}xe&&0===me.status&&this._chunkError()}},this._chunkLoaded=function(){var Ve;4===me.readyState&&(me.status<200||400<=me.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:me.responseText.length,this._finished=!this._config.chunkSize||this._start>=(null===(Ve=me.getResponseHeader("Content-Range"))?-1:parseInt(Ve.substring(Ve.lastIndexOf("/")+1))),this.parseChunk(me.responseText)))},this._chunkError=function(Ze){this._sendError(new Error(me.statusText||Ze))}}function T(ae){var me,Ze;(ae=ae||{}).chunkSize||(ae.chunkSize=Ae.LocalChunkSize),ke.call(this,ae);var Ve="undefined"!=typeof FileReader;this.stream=function($e){this._input=$e,Ze=$e.slice||$e.webkitSlice||$e.mozSlice,Ve?((me=new FileReader).onload=pt(this._chunkLoaded,this),me.onerror=pt(this._chunkError,this)):me=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var $e=this._input;if(this._config.chunkSize){var lt=Math.min(this._start+this._config.chunkSize,this._input.size);$e=Ze.call($e,this._start,lt)}var We=me.readAsText($e,this._config.encoding);Ve||this._chunkLoaded({target:{result:We}})},this._chunkLoaded=function($e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk($e.target.result)},this._chunkError=function(){this._sendError(me.error)}}function Yt(ae){var me;ke.call(this,ae=ae||{}),this.stream=function(Ze){return me=Ze,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var Ze,Ve=this._config.chunkSize;return Ve?(Ze=me.substring(0,Ve),me=me.substring(Ve)):(Ze=me,me=""),this._finished=!me,this.parseChunk(Ze)}}}function Kt(ae){ke.call(this,ae=ae||{});var me=[],Ze=!0,Ve=!1;this.pause=function(){ke.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){ke.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function($e){this._input=$e,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){Ve&&1===me.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),me.length?this.parseChunk(me.shift()):Ze=!0},this._streamData=pt(function($e){try{me.push("string"==typeof $e?$e:$e.toString(this._config.encoding)),Ze&&(Ze=!1,this._checkIsFinished(),this.parseChunk(me.shift()))}catch(lt){this._streamError(lt)}},this),this._streamError=pt(function($e){this._streamCleanUp(),this._sendError($e)},this),this._streamEnd=pt(function(){this._streamCleanUp(),Ve=!0,this._streamData("")},this),this._streamCleanUp=pt(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function Nt(ae){var me,Ze,Ve,$e=Math.pow(2,53),lt=-$e,We=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,wt=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,at=this,Pe=0,Gt=0,gt=!1,ft=!1,yn=[],xt={data:[],errors:[],meta:{}};if(Mt(ae.step)){var qt=ae.step;ae.step=function(ht){if(xt=ht,At())Yi();else{if(Yi(),0===xt.data.length)return;Pe+=ht.data.length,ae.preview&&Pe>ae.preview?Ze.abort():(xt.data=xt.data[0],qt(xt,at))}}}function sn(ht){return"greedy"===ae.skipEmptyLines?""===ht.join("").trim():1===ht.length&&0===ht[0].length}function Yi(){if(xt&&Ve&&($t("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+Ae.DefaultDelimiter+"'"),Ve=!1),ae.skipEmptyLines)for(var ht=0;ht<xt.data.length;ht++)sn(xt.data[ht])&&xt.data.splice(ht--,1);return At()&&function(){if(xt)if(Array.isArray(xt.data[0])){for(var Nn=0;At()&&Nn<xt.data.length;Nn++)xt.data[Nn].forEach(vi);xt.data.splice(0,1)}else xt.data.forEach(vi);function vi(gi,Gn){Mt(ae.transformHeader)&&(gi=ae.transformHeader(gi,Gn)),yn.push(gi)}}(),function(){if(!xt||!ae.header&&!ae.dynamicTyping&&!ae.transform)return xt;function vi(gi,Gn){var jn,Xi=ae.header?{}:[];for(jn=0;jn<gi.length;jn++){var En=jn,rn=gi[jn];ae.header&&(En=jn>=yn.length?"__parsed_extra":yn[jn]),ae.transform&&(rn=ae.transform(rn,En)),rn=pi(En,rn),"__parsed_extra"===En?(Xi[En]=Xi[En]||[],Xi[En].push(rn)):Xi[En]=rn}return ae.header&&(jn>yn.length?$t("FieldMismatch","TooManyFields","Too many fields: expected "+yn.length+" fields but parsed "+jn,Gt+Gn):jn<yn.length&&$t("FieldMismatch","TooFewFields","Too few fields: expected "+yn.length+" fields but parsed "+jn,Gt+Gn)),Xi}var Nn=1;return!xt.data.length||Array.isArray(xt.data[0])?(xt.data=xt.data.map(vi),Nn=xt.data.length):xt.data=vi(xt.data,0),ae.header&&xt.meta&&(xt.meta.fields=yn),Gt+=Nn,xt}()}function At(){return ae.header&&0===yn.length}function pi(ht,vi){return Nn=ht,ae.dynamicTypingFunction&&void 0===ae.dynamicTyping[Nn]&&(ae.dynamicTyping[Nn]=ae.dynamicTypingFunction(Nn)),!0===(ae.dynamicTyping[Nn]||ae.dynamicTyping)?"true"===vi||"TRUE"===vi||"false"!==vi&&"FALSE"!==vi&&(function(gi){if(We.test(gi)){var Gn=parseFloat(gi);if(lt<Gn&&Gn<$e)return!0}return!1}(vi)?parseFloat(vi):wt.test(vi)?new Date(vi):""===vi?null:vi):vi;var Nn}function $t(ht,vi,Nn,gi){var Gn={type:ht,code:vi,message:Nn};void 0!==gi&&(Gn.row=gi),xt.errors.push(Gn)}this.parse=function(ht,vi,Nn){if(ae.newline||(ae.newline=function(Xi,En){Xi=Xi.substring(0,1048576);var rn=new RegExp(Dt(En)+"([^]*?)"+Dt(En),"gm"),ut=(Xi=Xi.replace(rn,"")).split("\r"),Si=Xi.split("\n");if(1===ut.length||1<Si.length&&Si[0].length<ut[0].length)return"\n";for(var Mr=0,Pn=0;Pn<ut.length;Pn++)"\n"===ut[Pn][0]&&Mr++;return Mr>=ut.length/2?"\r\n":"\r"}(ht,ae.quoteChar||'"')),Ve=!1,ae.delimiter)Mt(ae.delimiter)&&(ae.delimiter=ae.delimiter(ht),xt.meta.delimiter=ae.delimiter);else{var Gn=function(Xi,En,rn,ut,Si){var sr,Mr,Pn,Kn;Si=Si||[",","\t","|",";",Ae.RECORD_SEP,Ae.UNIT_SEP];for(var as=0;as<Si.length;as++){var hr=Si[as],pr=0,Ki=0,ea=0;Pn=void 0;for(var Ii=new ti({comments:ut,delimiter:hr,newline:En,preview:10}).parse(Xi),gs=0;gs<Ii.data.length;gs++)if(rn&&sn(Ii.data[gs]))ea++;else{var ls=Ii.data[gs].length;Ki+=ls,void 0!==Pn?0<ls&&(pr+=Math.abs(ls-Pn),Pn=ls):Pn=ls}0<Ii.data.length&&(Ki/=Ii.data.length-ea),(void 0===Mr||pr<=Mr)&&(void 0===Kn||Kn<Ki)&&1.99<Ki&&(Mr=pr,sr=hr,Kn=Ki)}return{successful:!!(ae.delimiter=sr),bestDelimiter:sr}}(ht,ae.newline,ae.skipEmptyLines,ae.comments,ae.delimitersToGuess);Gn.successful?ae.delimiter=Gn.bestDelimiter:(Ve=!0,ae.delimiter=Ae.DefaultDelimiter),xt.meta.delimiter=ae.delimiter}var jn=Lt(ae);return ae.preview&&ae.header&&jn.preview++,me=ht,Ze=new ti(jn),xt=Ze.parse(me,vi,Nn),Yi(),gt?{meta:{paused:!0}}:xt||{meta:{paused:!1}}},this.paused=function(){return gt},this.pause=function(){gt=!0,Ze.abort(),me=Mt(ae.chunk)?"":me.substring(Ze.getCharIndex())},this.resume=function(){at.streamer._halted?(gt=!1,at.streamer.parseChunk(me,!0)):setTimeout(at.resume,3)},this.aborted=function(){return ft},this.abort=function(){ft=!0,Ze.abort(),xt.meta.aborted=!0,Mt(ae.complete)&&ae.complete(xt),me=""}}function Dt(ae){return ae.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ti(ae){var me,Ze=(ae=ae||{}).delimiter,Ve=ae.newline,$e=ae.comments,lt=ae.step,We=ae.preview,wt=ae.fastMode,at=me=void 0===ae.quoteChar?'"':ae.quoteChar;if(void 0!==ae.escapeChar&&(at=ae.escapeChar),("string"!=typeof Ze||-1<Ae.BAD_DELIMITERS.indexOf(Ze))&&(Ze=","),$e===Ze)throw new Error("Comment character same as delimiter");!0===$e?$e="#":("string"!=typeof $e||-1<Ae.BAD_DELIMITERS.indexOf($e))&&($e=!1),"\n"!==Ve&&"\r"!==Ve&&"\r\n"!==Ve&&(Ve="\n");var Pe=0,Gt=!1;this.parse=function(gt,ft,yn){if("string"!=typeof gt)throw new Error("Input must be a string");var xt=gt.length,qt=Ze.length,sn=Ve.length,Yi=$e.length,At=Mt(lt),pi=[],$t=[],ht=[],vi=Pe=0;if(!gt)return Kn();if(wt||!1!==wt&&-1===gt.indexOf(me)){for(var Nn=gt.split(Ve),gi=0;gi<Nn.length;gi++){if(Pe+=(ht=Nn[gi]).length,gi!==Nn.length-1)Pe+=Ve.length;else if(yn)return Kn();if(!$e||ht.substring(0,Yi)!==$e){if(At){if(pi=[],Si(ht.split(Ze)),as(),Gt)return Kn()}else Si(ht.split(Ze));if(We&&We<=gi)return pi=pi.slice(0,We),Kn(!0)}}return Kn()}for(var Gn=gt.indexOf(Ze,Pe),jn=gt.indexOf(Ve,Pe),Xi=new RegExp(Dt(at)+Dt(me),"g"),En=gt.indexOf(me,Pe);;)if(gt[Pe]!==me)if($e&&0===ht.length&&gt.substring(Pe,Pe+Yi)===$e){if(-1===jn)return Kn();jn=gt.indexOf(Ve,Pe=jn+sn),Gn=gt.indexOf(Ze,Pe)}else if(-1!==Gn&&(Gn<jn||-1===jn))ht.push(gt.substring(Pe,Gn)),Gn=gt.indexOf(Ze,Pe=Gn+qt);else{if(-1===jn)break;if(ht.push(gt.substring(Pe,jn)),Pn(jn+sn),At&&(as(),Gt))return Kn();if(We&&pi.length>=We)return Kn(!0)}else for(En=Pe,Pe++;;){if(-1===(En=gt.indexOf(me,En+1)))return yn||$t.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:pi.length,index:Pe}),Mr();if(En===xt-1)return Mr(gt.substring(Pe,En).replace(Xi,me));if(me!==at||gt[En+1]!==at){if(me===at||0===En||gt[En-1]!==at){-1!==Gn&&Gn<En+1&&(Gn=gt.indexOf(Ze,En+1)),-1!==jn&&jn<En+1&&(jn=gt.indexOf(Ve,En+1));var rn=sr(-1===jn?Gn:Math.min(Gn,jn));if(gt[En+1+rn]===Ze){ht.push(gt.substring(Pe,En).replace(Xi,me)),gt[Pe=En+1+rn+qt]!==me&&(En=gt.indexOf(me,Pe)),Gn=gt.indexOf(Ze,Pe),jn=gt.indexOf(Ve,Pe);break}var ut=sr(jn);if(gt.substring(En+1+ut,En+1+ut+sn)===Ve){if(ht.push(gt.substring(Pe,En).replace(Xi,me)),Pn(En+1+ut+sn),Gn=gt.indexOf(Ze,Pe),En=gt.indexOf(me,Pe),At&&(as(),Gt))return Kn();if(We&&pi.length>=We)return Kn(!0);break}$t.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:pi.length,index:Pe}),En++}}else En++}return Mr();function Si(hr){pi.push(hr),vi=Pe}function sr(hr){var pr=0;if(-1!==hr){var Ki=gt.substring(En+1,hr);Ki&&""===Ki.trim()&&(pr=Ki.length)}return pr}function Mr(hr){return yn||(void 0===hr&&(hr=gt.substring(Pe)),ht.push(hr),Pe=xt,Si(ht),At&&as()),Kn()}function Pn(hr){Pe=hr,Si(ht),ht=[],jn=gt.indexOf(Ve,Pe)}function Kn(hr){return{data:pi,errors:$t,meta:{delimiter:Ze,linebreak:Ve,aborted:Gt,truncated:!!hr,cursor:vi+(ft||0)}}}function as(){lt(Kn()),pi=[],$t=[]}},this.abort=function(){Gt=!0},this.getCharIndex=function(){return Pe}}function oi(ae){var me=ae.data,Ze=de[me.workerId],Ve=!1;if(me.error)Ze.userError(me.error,me.file);else if(me.results&&me.results.data){var $e={abort:function(){Ve=!0,Jt(me.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Qe,resume:Qe};if(Mt(Ze.userStep)){for(var lt=0;lt<me.results.data.length&&(Ze.userStep({data:me.results.data[lt],errors:me.results.errors,meta:me.results.meta},$e),!Ve);lt++);delete me.results}else Mt(Ze.userChunk)&&(Ze.userChunk(me.results,$e,me.file),delete me.results)}me.finished&&!Ve&&Jt(me.workerId,me.results)}function Jt(ae,me){var Ze=de[ae];Mt(Ze.userComplete)&&Ze.userComplete(me),Ze.terminate(),delete de[ae]}function Qe(){throw new Error("Not implemented.")}function Lt(ae){if("object"!=typeof ae||null===ae)return ae;var me=Array.isArray(ae)?[]:{};for(var Ze in ae)me[Ze]=Lt(ae[Ze]);return me}function pt(ae,me){return function(){ae.apply(me,arguments)}}function Mt(ae){return"function"==typeof ae}return ve&&(Ce.onmessage=function(ae){var me=ae.data;if(void 0===Ae.WORKER_ID&&me&&(Ae.WORKER_ID=me.workerId),"string"==typeof me.input)Ce.postMessage({workerId:Ae.WORKER_ID,results:Ae.parse(me.input,me.config),finished:!0});else if(Ce.File&&me.input instanceof File||me.input instanceof Object){var Ze=Ae.parse(me.input,me.config);Ze&&Ce.postMessage({workerId:Ae.WORKER_ID,results:Ze,finished:!0})}}),(nt.prototype=Object.create(ke.prototype)).constructor=nt,(T.prototype=Object.create(ke.prototype)).constructor=T,(Yt.prototype=Object.create(Yt.prototype)).constructor=Yt,(Kt.prototype=Object.create(ke.prototype)).constructor=Kt,Ae})?pe.apply(bt,[]):pe)&&(it.exports=K)},6585:(it,bt,pe)=>{const _e=Symbol("SemVer ANY");class K{static get ANY(){return _e}constructor(ke,nt){if(nt=qe(nt),ke instanceof K){if(ke.loose===!!nt.loose)return ke;ke=ke.value}de("comparator",ke,nt),this.options=nt,this.loose=!!nt.loose,this.parse(ke),this.value=this.semver===_e?"":this.operator+this.semver.version,de("comp",this)}parse(ke){const T=ke.match(this.options.loose?Ce[xe.COMPARATORLOOSE]:Ce[xe.COMPARATOR]);if(!T)throw new TypeError(`Invalid comparator: ${ke}`);this.operator=void 0!==T[1]?T[1]:"","="===this.operator&&(this.operator=""),this.semver=T[2]?new De(T[2],this.options.loose):_e}toString(){return this.value}test(ke){if(de("Comparator.test",ke,this.options.loose),this.semver===_e||ke===_e)return!0;if("string"==typeof ke)try{ke=new De(ke,this.options)}catch(nt){return!1}return ve(ke,this.operator,this.semver,this.options)}intersects(ke,nt){if(!(ke instanceof K))throw new TypeError("a Comparator is required");if((!nt||"object"!=typeof nt)&&(nt={loose:!!nt,includePrerelease:!1}),""===this.operator)return""===this.value||new Ae(ke.value,nt).test(this.value);if(""===ke.operator)return""===ke.value||new Ae(this.value,nt).test(ke.semver);const T=!(">="!==this.operator&&">"!==this.operator||">="!==ke.operator&&">"!==ke.operator),Yt=!("<="!==this.operator&&"<"!==this.operator||"<="!==ke.operator&&"<"!==ke.operator),Kt=this.semver.version===ke.semver.version,Nt=!(">="!==this.operator&&"<="!==this.operator||">="!==ke.operator&&"<="!==ke.operator),Dt=ve(this.semver,"<",ke.semver,nt)&&(">="===this.operator||">"===this.operator)&&("<="===ke.operator||"<"===ke.operator),ti=ve(this.semver,">",ke.semver,nt)&&("<="===this.operator||"<"===this.operator)&&(">="===ke.operator||">"===ke.operator);return T||Yt||Kt&&Nt||Dt||ti}}it.exports=K;const qe=pe(6919),{re:Ce,t:xe}=pe(2489),ve=pe(9143),de=pe(536),De=pe(8508),Ae=pe(3880)},3880:(it,bt,pe)=>{class _e{constructor($e,lt){if(lt=Ce(lt),$e instanceof _e)return $e.loose===!!lt.loose&&$e.includePrerelease===!!lt.includePrerelease?$e:new _e($e.raw,lt);if($e instanceof xe)return this.raw=$e.value,this.set=[[$e]],this.format(),this;if(this.options=lt,this.loose=!!lt.loose,this.includePrerelease=!!lt.includePrerelease,this.raw=$e,this.set=$e.split(/\s*\|\|\s*/).map(We=>this.parseRange(We.trim())).filter(We=>We.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${$e}`);if(this.set.length>1){const We=this.set[0];if(this.set=this.set.filter(wt=>!T(wt[0])),0===this.set.length)this.set=[We];else if(this.set.length>1)for(const wt of this.set)if(1===wt.length&&Yt(wt[0])){this.set=[wt];break}}this.format()}format(){return this.range=this.set.map($e=>$e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange($e){$e=$e.trim();const We=`parseRange:${Object.keys(this.options).join(",")}:${$e}`,wt=qe.get(We);if(wt)return wt;const at=this.options.loose;$e=$e.replace(at?De[Ae.HYPHENRANGELOOSE]:De[Ae.HYPHENRANGE],me(this.options.includePrerelease)),ve("hyphen replace",$e),$e=$e.replace(De[Ae.COMPARATORTRIM],Ie),ve("comparator trim",$e,De[Ae.COMPARATORTRIM]),$e=($e=($e=$e.replace(De[Ae.TILDETRIM],ke)).replace(De[Ae.CARETTRIM],nt)).split(/\s+/).join(" ");const Gt=at?De[Ae.COMPARATORLOOSE]:De[Ae.COMPARATOR],gt=$e.split(" ").map(qt=>Nt(qt,this.options)).join(" ").split(/\s+/).map(qt=>ae(qt,this.options)).filter(this.options.loose?qt=>!!qt.match(Gt):()=>!0).map(qt=>new xe(qt,this.options)),yn=new Map;for(const qt of gt){if(T(qt))return[qt];yn.set(qt.value,qt)}yn.size>1&&yn.has("")&&yn.delete("");const xt=[...yn.values()];return qe.set(We,xt),xt}intersects($e,lt){if(!($e instanceof _e))throw new TypeError("a Range is required");return this.set.some(We=>Kt(We,lt)&&$e.set.some(wt=>Kt(wt,lt)&&We.every(at=>wt.every(Pe=>at.intersects(Pe,lt)))))}test($e){if(!$e)return!1;if("string"==typeof $e)try{$e=new de($e,this.options)}catch(lt){return!1}for(let lt=0;lt<this.set.length;lt++)if(Ze(this.set[lt],$e,this.options))return!0;return!1}}it.exports=_e;const qe=new(pe(5270))({max:1e3}),Ce=pe(6919),xe=pe(6585),ve=pe(536),de=pe(8508),{re:De,t:Ae,comparatorTrimReplace:Ie,tildeTrimReplace:ke,caretTrimReplace:nt}=pe(2489),T=Ve=>"<0.0.0-0"===Ve.value,Yt=Ve=>""===Ve.value,Kt=(Ve,$e)=>{let lt=!0;const We=Ve.slice();let wt=We.pop();for(;lt&&We.length;)lt=We.every(at=>wt.intersects(at,$e)),wt=We.pop();return lt},Nt=(Ve,$e)=>(ve("comp",Ve,$e),Ve=Jt(Ve,$e),ve("caret",Ve),Ve=ti(Ve,$e),ve("tildes",Ve),Ve=Lt(Ve,$e),ve("xrange",Ve),Ve=Mt(Ve,$e),ve("stars",Ve),Ve),Dt=Ve=>!Ve||"x"===Ve.toLowerCase()||"*"===Ve,ti=(Ve,$e)=>Ve.trim().split(/\s+/).map(lt=>oi(lt,$e)).join(" "),oi=(Ve,$e)=>Ve.replace($e.loose?De[Ae.TILDELOOSE]:De[Ae.TILDE],(We,wt,at,Pe,Gt)=>{let gt;return ve("tilde",Ve,We,wt,at,Pe,Gt),Dt(wt)?gt="":Dt(at)?gt=`>=${wt}.0.0 <${+wt+1}.0.0-0`:Dt(Pe)?gt=`>=${wt}.${at}.0 <${wt}.${+at+1}.0-0`:Gt?(ve("replaceTilde pr",Gt),gt=`>=${wt}.${at}.${Pe}-${Gt} <${wt}.${+at+1}.0-0`):gt=`>=${wt}.${at}.${Pe} <${wt}.${+at+1}.0-0`,ve("tilde return",gt),gt}),Jt=(Ve,$e)=>Ve.trim().split(/\s+/).map(lt=>Qe(lt,$e)).join(" "),Qe=(Ve,$e)=>{ve("caret",Ve,$e);const We=$e.includePrerelease?"-0":"";return Ve.replace($e.loose?De[Ae.CARETLOOSE]:De[Ae.CARET],(wt,at,Pe,Gt,gt)=>{let ft;return ve("caret",Ve,wt,at,Pe,Gt,gt),Dt(at)?ft="":Dt(Pe)?ft=`>=${at}.0.0${We} <${+at+1}.0.0-0`:Dt(Gt)?ft="0"===at?`>=${at}.${Pe}.0${We} <${at}.${+Pe+1}.0-0`:`>=${at}.${Pe}.0${We} <${+at+1}.0.0-0`:gt?(ve("replaceCaret pr",gt),ft="0"===at?"0"===Pe?`>=${at}.${Pe}.${Gt}-${gt} <${at}.${Pe}.${+Gt+1}-0`:`>=${at}.${Pe}.${Gt}-${gt} <${at}.${+Pe+1}.0-0`:`>=${at}.${Pe}.${Gt}-${gt} <${+at+1}.0.0-0`):(ve("no pr"),ft="0"===at?"0"===Pe?`>=${at}.${Pe}.${Gt}${We} <${at}.${Pe}.${+Gt+1}-0`:`>=${at}.${Pe}.${Gt}${We} <${at}.${+Pe+1}.0-0`:`>=${at}.${Pe}.${Gt} <${+at+1}.0.0-0`),ve("caret return",ft),ft})},Lt=(Ve,$e)=>(ve("replaceXRanges",Ve,$e),Ve.split(/\s+/).map(lt=>pt(lt,$e)).join(" ")),pt=(Ve,$e)=>(Ve=Ve.trim()).replace($e.loose?De[Ae.XRANGELOOSE]:De[Ae.XRANGE],(We,wt,at,Pe,Gt,gt)=>{ve("xRange",Ve,We,wt,at,Pe,Gt,gt);const ft=Dt(at),yn=ft||Dt(Pe),xt=yn||Dt(Gt);return"="===wt&&xt&&(wt=""),gt=$e.includePrerelease?"-0":"",ft?We=">"===wt||"<"===wt?"<0.0.0-0":"*":wt&&xt?(yn&&(Pe=0),Gt=0,">"===wt?(wt=">=",yn?(at=+at+1,Pe=0,Gt=0):(Pe=+Pe+1,Gt=0)):"<="===wt&&(wt="<",yn?at=+at+1:Pe=+Pe+1),"<"===wt&&(gt="-0"),We=`${wt+at}.${Pe}.${Gt}${gt}`):yn?We=`>=${at}.0.0${gt} <${+at+1}.0.0-0`:xt&&(We=`>=${at}.${Pe}.0${gt} <${at}.${+Pe+1}.0-0`),ve("xRange return",We),We}),Mt=(Ve,$e)=>(ve("replaceStars",Ve,$e),Ve.trim().replace(De[Ae.STAR],"")),ae=(Ve,$e)=>(ve("replaceGTE0",Ve,$e),Ve.trim().replace(De[$e.includePrerelease?Ae.GTE0PRE:Ae.GTE0],"")),me=Ve=>($e,lt,We,wt,at,Pe,Gt,gt,ft,yn,xt,qt,sn)=>`${lt=Dt(We)?"":Dt(wt)?`>=${We}.0.0${Ve?"-0":""}`:Dt(at)?`>=${We}.${wt}.0${Ve?"-0":""}`:Pe?`>=${lt}`:`>=${lt}${Ve?"-0":""}`} ${gt=Dt(ft)?"":Dt(yn)?`<${+ft+1}.0.0-0`:Dt(xt)?`<${ft}.${+yn+1}.0-0`:qt?`<=${ft}.${yn}.${xt}-${qt}`:Ve?`<${ft}.${yn}.${+xt+1}-0`:`<=${gt}`}`.trim(),Ze=(Ve,$e,lt)=>{for(let We=0;We<Ve.length;We++)if(!Ve[We].test($e))return!1;if($e.prerelease.length&&!lt.includePrerelease){for(let We=0;We<Ve.length;We++)if(ve(Ve[We].semver),Ve[We].semver!==xe.ANY&&Ve[We].semver.prerelease.length>0){const wt=Ve[We].semver;if(wt.major===$e.major&&wt.minor===$e.minor&&wt.patch===$e.patch)return!0}return!1}return!0}},8508:(it,bt,pe)=>{const _e=pe(536),{MAX_LENGTH:K,MAX_SAFE_INTEGER:qe}=pe(3147),{re:Ce,t:xe}=pe(2489),ve=pe(6919),{compareIdentifiers:de}=pe(8322);class De{constructor(Ie,ke){if(ke=ve(ke),Ie instanceof De){if(Ie.loose===!!ke.loose&&Ie.includePrerelease===!!ke.includePrerelease)return Ie;Ie=Ie.version}else if("string"!=typeof Ie)throw new TypeError(`Invalid Version: ${Ie}`);if(Ie.length>K)throw new TypeError(`version is longer than ${K} characters`);_e("SemVer",Ie,ke),this.options=ke,this.loose=!!ke.loose,this.includePrerelease=!!ke.includePrerelease;const nt=Ie.trim().match(ke.loose?Ce[xe.LOOSE]:Ce[xe.FULL]);if(!nt)throw new TypeError(`Invalid Version: ${Ie}`);if(this.raw=Ie,this.major=+nt[1],this.minor=+nt[2],this.patch=+nt[3],this.major>qe||this.major<0)throw new TypeError("Invalid major version");if(this.minor>qe||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>qe||this.patch<0)throw new TypeError("Invalid patch version");this.prerelease=nt[4]?nt[4].split(".").map(T=>{if(/^[0-9]+$/.test(T)){const Yt=+T;if(Yt>=0&&Yt<qe)return Yt}return T}):[],this.build=nt[5]?nt[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(Ie){if(_e("SemVer.compare",this.version,this.options,Ie),!(Ie instanceof De)){if("string"==typeof Ie&&Ie===this.version)return 0;Ie=new De(Ie,this.options)}return Ie.version===this.version?0:this.compareMain(Ie)||this.comparePre(Ie)}compareMain(Ie){return Ie instanceof De||(Ie=new De(Ie,this.options)),de(this.major,Ie.major)||de(this.minor,Ie.minor)||de(this.patch,Ie.patch)}comparePre(Ie){if(Ie instanceof De||(Ie=new De(Ie,this.options)),this.prerelease.length&&!Ie.prerelease.length)return-1;if(!this.prerelease.length&&Ie.prerelease.length)return 1;if(!this.prerelease.length&&!Ie.prerelease.length)return 0;let ke=0;do{const nt=this.prerelease[ke],T=Ie.prerelease[ke];if(_e("prerelease compare",ke,nt,T),void 0===nt&&void 0===T)return 0;if(void 0===T)return 1;if(void 0===nt)return-1;if(nt!==T)return de(nt,T)}while(++ke)}compareBuild(Ie){Ie instanceof De||(Ie=new De(Ie,this.options));let ke=0;do{const nt=this.build[ke],T=Ie.build[ke];if(_e("prerelease compare",ke,nt,T),void 0===nt&&void 0===T)return 0;if(void 0===T)return 1;if(void 0===nt)return-1;if(nt!==T)return de(nt,T)}while(++ke)}inc(Ie,ke){switch(Ie){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",ke);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",ke);break;case"prepatch":this.prerelease.length=0,this.inc("patch",ke),this.inc("pre",ke);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",ke),this.inc("pre",ke);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let nt=this.prerelease.length;for(;--nt>=0;)"number"==typeof this.prerelease[nt]&&(this.prerelease[nt]++,nt=-2);-1===nt&&this.prerelease.push(0)}ke&&(this.prerelease[0]===ke?isNaN(this.prerelease[1])&&(this.prerelease=[ke,0]):this.prerelease=[ke,0]);break;default:throw new Error(`invalid increment argument: ${Ie}`)}return this.format(),this.raw=this.version,this}}it.exports=De},7658:(it,bt,pe)=>{const _e=pe(667);it.exports=(qe,Ce)=>{const xe=_e(qe.trim().replace(/^[=v]+/,""),Ce);return xe?xe.version:null}},9143:(it,bt,pe)=>{const _e=pe(7146),K=pe(9154),qe=pe(872),Ce=pe(8613),xe=pe(5217),ve=pe(5617);it.exports=(De,Ae,Ie,ke)=>{switch(Ae){case"===":return"object"==typeof De&&(De=De.version),"object"==typeof Ie&&(Ie=Ie.version),De===Ie;case"!==":return"object"==typeof De&&(De=De.version),"object"==typeof Ie&&(Ie=Ie.version),De!==Ie;case"":case"=":case"==":return _e(De,Ie,ke);case"!=":return K(De,Ie,ke);case">":return qe(De,Ie,ke);case">=":return Ce(De,Ie,ke);case"<":return xe(De,Ie,ke);case"<=":return ve(De,Ie,ke);default:throw new TypeError(`Invalid operator: ${Ae}`)}}},8561:(it,bt,pe)=>{const _e=pe(8508),K=pe(667),{re:qe,t:Ce}=pe(2489);it.exports=(ve,de)=>{if(ve instanceof _e)return ve;if("number"==typeof ve&&(ve=String(ve)),"string"!=typeof ve)return null;let De=null;if((de=de||{}).rtl){let Ae;for(;(Ae=qe[Ce.COERCERTL].exec(ve))&&(!De||De.index+De[0].length!==ve.length);)(!De||Ae.index+Ae[0].length!==De.index+De[0].length)&&(De=Ae),qe[Ce.COERCERTL].lastIndex=Ae.index+Ae[1].length+Ae[2].length;qe[Ce.COERCERTL].lastIndex=-1}else De=ve.match(qe[Ce.COERCE]);return null===De?null:K(`${De[2]}.${De[3]||"0"}.${De[4]||"0"}`,de)}},5934:(it,bt,pe)=>{const _e=pe(8508);it.exports=(qe,Ce,xe)=>{const ve=new _e(qe,xe),de=new _e(Ce,xe);return ve.compare(de)||ve.compareBuild(de)}},306:(it,bt,pe)=>{const _e=pe(3132);it.exports=(qe,Ce)=>_e(qe,Ce,!0)},3132:(it,bt,pe)=>{const _e=pe(8508);it.exports=(qe,Ce,xe)=>new _e(qe,xe).compare(new _e(Ce,xe))},2696:(it,bt,pe)=>{const _e=pe(667),K=pe(7146);it.exports=(Ce,xe)=>{if(K(Ce,xe))return null;{const ve=_e(Ce),de=_e(xe),De=ve.prerelease.length||de.prerelease.length,Ae=De?"pre":"",Ie=De?"prerelease":"";for(const ke in ve)if(("major"===ke||"minor"===ke||"patch"===ke)&&ve[ke]!==de[ke])return Ae+ke;return Ie}}},7146:(it,bt,pe)=>{const _e=pe(3132);it.exports=(qe,Ce,xe)=>0===_e(qe,Ce,xe)},872:(it,bt,pe)=>{const _e=pe(3132);it.exports=(qe,Ce,xe)=>_e(qe,Ce,xe)>0},8613:(it,bt,pe)=>{const _e=pe(3132);it.exports=(qe,Ce,xe)=>_e(qe,Ce,xe)>=0},5864:(it,bt,pe)=>{const _e=pe(8508);it.exports=(qe,Ce,xe,ve)=>{"string"==typeof xe&&(ve=xe,xe=void 0);try{return new _e(qe,xe).inc(Ce,ve).version}catch(de){return null}}},5217:(it,bt,pe)=>{const _e=pe(3132);it.exports=(qe,Ce,xe)=>_e(qe,Ce,xe)<0},5617:(it,bt,pe)=>{const _e=pe(3132);it.exports=(qe,Ce,xe)=>_e(qe,Ce,xe)<=0},5541:(it,bt,pe)=>{const _e=pe(8508);it.exports=(qe,Ce)=>new _e(qe,Ce).major},5771:(it,bt,pe)=>{const _e=pe(8508);it.exports=(qe,Ce)=>new _e(qe,Ce).minor},9154:(it,bt,pe)=>{const _e=pe(3132);it.exports=(qe,Ce,xe)=>0!==_e(qe,Ce,xe)},667:(it,bt,pe)=>{const{MAX_LENGTH:_e}=pe(3147),{re:K,t:qe}=pe(2489),Ce=pe(8508),xe=pe(6919);it.exports=(de,De)=>{if(De=xe(De),de instanceof Ce)return de;if("string"!=typeof de||de.length>_e||!(De.loose?K[qe.LOOSE]:K[qe.FULL]).test(de))return null;try{return new Ce(de,De)}catch(Ie){return null}}},1891:(it,bt,pe)=>{const _e=pe(8508);it.exports=(qe,Ce)=>new _e(qe,Ce).patch},9861:(it,bt,pe)=>{const _e=pe(667);it.exports=(qe,Ce)=>{const xe=_e(qe,Ce);return xe&&xe.prerelease.length?xe.prerelease:null}},4391:(it,bt,pe)=>{const _e=pe(3132);it.exports=(qe,Ce,xe)=>_e(Ce,qe,xe)},885:(it,bt,pe)=>{const _e=pe(5934);it.exports=(qe,Ce)=>qe.sort((xe,ve)=>_e(ve,xe,Ce))},4138:(it,bt,pe)=>{const _e=pe(3880);it.exports=(qe,Ce,xe)=>{try{Ce=new _e(Ce,xe)}catch(ve){return!1}return Ce.test(qe)}},4875:(it,bt,pe)=>{const _e=pe(5934);it.exports=(qe,Ce)=>qe.sort((xe,ve)=>_e(xe,ve,Ce))},8888:(it,bt,pe)=>{const _e=pe(667);it.exports=(qe,Ce)=>{const xe=_e(qe,Ce);return xe?xe.version:null}},8772:(it,bt,pe)=>{const _e=pe(2489);it.exports={re:_e.re,src:_e.src,tokens:_e.t,SEMVER_SPEC_VERSION:pe(3147).SEMVER_SPEC_VERSION,SemVer:pe(8508),compareIdentifiers:pe(8322).compareIdentifiers,rcompareIdentifiers:pe(8322).rcompareIdentifiers,parse:pe(667),valid:pe(8888),clean:pe(7658),inc:pe(5864),diff:pe(2696),major:pe(5541),minor:pe(5771),patch:pe(1891),prerelease:pe(9861),compare:pe(3132),rcompare:pe(4391),compareLoose:pe(306),compareBuild:pe(5934),sort:pe(4875),rsort:pe(885),gt:pe(872),lt:pe(5217),eq:pe(7146),neq:pe(9154),gte:pe(8613),lte:pe(5617),cmp:pe(9143),coerce:pe(8561),Comparator:pe(6585),Range:pe(3880),satisfies:pe(4138),toComparators:pe(7342),maxSatisfying:pe(5725),minSatisfying:pe(3754),minVersion:pe(2406),validRange:pe(6860),outside:pe(4694),gtr:pe(5142),ltr:pe(4557),intersects:pe(5430),simplifyRange:pe(7296),subset:pe(9179)}},3147:it=>{it.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16}},536:it=>{const bt="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...pe)=>console.error("SEMVER",...pe):()=>{};it.exports=bt},8322:it=>{const bt=/^[0-9]+$/,pe=(K,qe)=>{const Ce=bt.test(K),xe=bt.test(qe);return Ce&&xe&&(K=+K,qe=+qe),K===qe?0:Ce&&!xe?-1:xe&&!Ce?1:K<qe?-1:1};it.exports={compareIdentifiers:pe,rcompareIdentifiers:(K,qe)=>pe(qe,K)}},6919:it=>{const bt=["includePrerelease","loose","rtl"];it.exports=_e=>_e?"object"!=typeof _e?{loose:!0}:bt.filter(K=>_e[K]).reduce((K,qe)=>(K[qe]=!0,K),{}):{}},2489:(it,bt,pe)=>{const{MAX_SAFE_COMPONENT_LENGTH:_e}=pe(3147),K=pe(536),qe=(bt=it.exports={}).re=[],Ce=bt.src=[],xe=bt.t={};let ve=0;const de=(De,Ae,Ie)=>{const ke=ve++;K(ke,Ae),xe[De]=ke,Ce[ke]=Ae,qe[ke]=new RegExp(Ae,Ie?"g":void 0)};de("NUMERICIDENTIFIER","0|[1-9]\\d*"),de("NUMERICIDENTIFIERLOOSE","[0-9]+"),de("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),de("MAINVERSION",`(${Ce[xe.NUMERICIDENTIFIER]})\\.(${Ce[xe.NUMERICIDENTIFIER]})\\.(${Ce[xe.NUMERICIDENTIFIER]})`),de("MAINVERSIONLOOSE",`(${Ce[xe.NUMERICIDENTIFIERLOOSE]})\\.(${Ce[xe.NUMERICIDENTIFIERLOOSE]})\\.(${Ce[xe.NUMERICIDENTIFIERLOOSE]})`),de("PRERELEASEIDENTIFIER",`(?:${Ce[xe.NUMERICIDENTIFIER]}|${Ce[xe.NONNUMERICIDENTIFIER]})`),de("PRERELEASEIDENTIFIERLOOSE",`(?:${Ce[xe.NUMERICIDENTIFIERLOOSE]}|${Ce[xe.NONNUMERICIDENTIFIER]})`),de("PRERELEASE",`(?:-(${Ce[xe.PRERELEASEIDENTIFIER]}(?:\\.${Ce[xe.PRERELEASEIDENTIFIER]})*))`),de("PRERELEASELOOSE",`(?:-?(${Ce[xe.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Ce[xe.PRERELEASEIDENTIFIERLOOSE]})*))`),de("BUILDIDENTIFIER","[0-9A-Za-z-]+"),de("BUILD",`(?:\\+(${Ce[xe.BUILDIDENTIFIER]}(?:\\.${Ce[xe.BUILDIDENTIFIER]})*))`),de("FULLPLAIN",`v?${Ce[xe.MAINVERSION]}${Ce[xe.PRERELEASE]}?${Ce[xe.BUILD]}?`),de("FULL",`^${Ce[xe.FULLPLAIN]}$`),de("LOOSEPLAIN",`[v=\\s]*${Ce[xe.MAINVERSIONLOOSE]}${Ce[xe.PRERELEASELOOSE]}?${Ce[xe.BUILD]}?`),de("LOOSE",`^${Ce[xe.LOOSEPLAIN]}$`),de("GTLT","((?:<|>)?=?)"),de("XRANGEIDENTIFIERLOOSE",`${Ce[xe.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),de("XRANGEIDENTIFIER",`${Ce[xe.NUMERICIDENTIFIER]}|x|X|\\*`),de("XRANGEPLAIN",`[v=\\s]*(${Ce[xe.XRANGEIDENTIFIER]})(?:\\.(${Ce[xe.XRANGEIDENTIFIER]})(?:\\.(${Ce[xe.XRANGEIDENTIFIER]})(?:${Ce[xe.PRERELEASE]})?${Ce[xe.BUILD]}?)?)?`),de("XRANGEPLAINLOOSE",`[v=\\s]*(${Ce[xe.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Ce[xe.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Ce[xe.XRANGEIDENTIFIERLOOSE]})(?:${Ce[xe.PRERELEASELOOSE]})?${Ce[xe.BUILD]}?)?)?`),de("XRANGE",`^${Ce[xe.GTLT]}\\s*${Ce[xe.XRANGEPLAIN]}$`),de("XRANGELOOSE",`^${Ce[xe.GTLT]}\\s*${Ce[xe.XRANGEPLAINLOOSE]}$`),de("COERCE",`(^|[^\\d])(\\d{1,${_e}})(?:\\.(\\d{1,${_e}}))?(?:\\.(\\d{1,${_e}}))?(?:$|[^\\d])`),de("COERCERTL",Ce[xe.COERCE],!0),de("LONETILDE","(?:~>?)"),de("TILDETRIM",`(\\s*)${Ce[xe.LONETILDE]}\\s+`,!0),bt.tildeTrimReplace="$1~",de("TILDE",`^${Ce[xe.LONETILDE]}${Ce[xe.XRANGEPLAIN]}$`),de("TILDELOOSE",`^${Ce[xe.LONETILDE]}${Ce[xe.XRANGEPLAINLOOSE]}$`),de("LONECARET","(?:\\^)"),de("CARETTRIM",`(\\s*)${Ce[xe.LONECARET]}\\s+`,!0),bt.caretTrimReplace="$1^",de("CARET",`^${Ce[xe.LONECARET]}${Ce[xe.XRANGEPLAIN]}$`),de("CARETLOOSE",`^${Ce[xe.LONECARET]}${Ce[xe.XRANGEPLAINLOOSE]}$`),de("COMPARATORLOOSE",`^${Ce[xe.GTLT]}\\s*(${Ce[xe.LOOSEPLAIN]})$|^$`),de("COMPARATOR",`^${Ce[xe.GTLT]}\\s*(${Ce[xe.FULLPLAIN]})$|^$`),de("COMPARATORTRIM",`(\\s*)${Ce[xe.GTLT]}\\s*(${Ce[xe.LOOSEPLAIN]}|${Ce[xe.XRANGEPLAIN]})`,!0),bt.comparatorTrimReplace="$1$2$3",de("HYPHENRANGE",`^\\s*(${Ce[xe.XRANGEPLAIN]})\\s+-\\s+(${Ce[xe.XRANGEPLAIN]})\\s*$`),de("HYPHENRANGELOOSE",`^\\s*(${Ce[xe.XRANGEPLAINLOOSE]})\\s+-\\s+(${Ce[xe.XRANGEPLAINLOOSE]})\\s*$`),de("STAR","(<|>)?=?\\s*\\*"),de("GTE0","^\\s*>=\\s*0.0.0\\s*$"),de("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},5142:(it,bt,pe)=>{const _e=pe(4694);it.exports=(qe,Ce,xe)=>_e(qe,Ce,">",xe)},5430:(it,bt,pe)=>{const _e=pe(3880);it.exports=(qe,Ce,xe)=>(qe=new _e(qe,xe),Ce=new _e(Ce,xe),qe.intersects(Ce))},4557:(it,bt,pe)=>{const _e=pe(4694);it.exports=(qe,Ce,xe)=>_e(qe,Ce,"<",xe)},5725:(it,bt,pe)=>{const _e=pe(8508),K=pe(3880);it.exports=(Ce,xe,ve)=>{let de=null,De=null,Ae=null;try{Ae=new K(xe,ve)}catch(Ie){return null}return Ce.forEach(Ie=>{Ae.test(Ie)&&(!de||-1===De.compare(Ie))&&(de=Ie,De=new _e(de,ve))}),de}},3754:(it,bt,pe)=>{const _e=pe(8508),K=pe(3880);it.exports=(Ce,xe,ve)=>{let de=null,De=null,Ae=null;try{Ae=new K(xe,ve)}catch(Ie){return null}return Ce.forEach(Ie=>{Ae.test(Ie)&&(!de||1===De.compare(Ie))&&(de=Ie,De=new _e(de,ve))}),de}},2406:(it,bt,pe)=>{const _e=pe(8508),K=pe(3880),qe=pe(872);it.exports=(xe,ve)=>{xe=new K(xe,ve);let de=new _e("0.0.0");if(xe.test(de)||(de=new _e("0.0.0-0"),xe.test(de)))return de;de=null;for(let De=0;De<xe.set.length;++De){let Ie=null;xe.set[De].forEach(ke=>{const nt=new _e(ke.semver.version);switch(ke.operator){case">":0===nt.prerelease.length?nt.patch++:nt.prerelease.push(0),nt.raw=nt.format();case"":case">=":(!Ie||qe(nt,Ie))&&(Ie=nt);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${ke.operator}`)}}),Ie&&(!de||qe(de,Ie))&&(de=Ie)}return de&&xe.test(de)?de:null}},4694:(it,bt,pe)=>{const _e=pe(8508),K=pe(6585),{ANY:qe}=K,Ce=pe(3880),xe=pe(4138),ve=pe(872),de=pe(5217),De=pe(5617),Ae=pe(8613);it.exports=(ke,nt,T,Yt)=>{let Kt,Nt,Dt,ti,oi;switch(ke=new _e(ke,Yt),nt=new Ce(nt,Yt),T){case">":Kt=ve,Nt=De,Dt=de,ti=">",oi=">=";break;case"<":Kt=de,Nt=Ae,Dt=ve,ti="<",oi="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(xe(ke,nt,Yt))return!1;for(let Jt=0;Jt<nt.set.length;++Jt){let Lt=null,pt=null;if(nt.set[Jt].forEach(Mt=>{Mt.semver===qe&&(Mt=new K(">=0.0.0")),Lt=Lt||Mt,pt=pt||Mt,Kt(Mt.semver,Lt.semver,Yt)?Lt=Mt:Dt(Mt.semver,pt.semver,Yt)&&(pt=Mt)}),Lt.operator===ti||Lt.operator===oi||(!pt.operator||pt.operator===ti)&&Nt(ke,pt.semver))return!1;if(pt.operator===oi&&Dt(ke,pt.semver))return!1}return!0}},7296:(it,bt,pe)=>{const _e=pe(4138),K=pe(3132);it.exports=(qe,Ce,xe)=>{const ve=[];let de=null,De=null;const Ae=qe.sort((T,Yt)=>K(T,Yt,xe));for(const T of Ae)_e(T,Ce,xe)?(De=T,de||(de=T)):(De&&ve.push([de,De]),De=null,de=null);de&&ve.push([de,null]);const Ie=[];for(const[T,Yt]of ve)Ie.push(T===Yt?T:Yt||T!==Ae[0]?Yt?T===Ae[0]?`<=${Yt}`:`${T} - ${Yt}`:`>=${T}`:"*");const ke=Ie.join(" || "),nt="string"==typeof Ce.raw?Ce.raw:String(Ce);return ke.length<nt.length?ke:Ce}},9179:(it,bt,pe)=>{const _e=pe(3880),K=pe(6585),{ANY:qe}=K,Ce=pe(4138),xe=pe(3132),de=(Ie,ke,nt)=>{if(Ie===ke)return!0;if(1===Ie.length&&Ie[0].semver===qe){if(1===ke.length&&ke[0].semver===qe)return!0;Ie=nt.includePrerelease?[new K(">=0.0.0-0")]:[new K(">=0.0.0")]}if(1===ke.length&&ke[0].semver===qe){if(nt.includePrerelease)return!0;ke=[new K(">=0.0.0")]}const T=new Set;let Yt,Kt,Nt;for(const pt of Ie)">"===pt.operator||">="===pt.operator?Yt=De(Yt,pt,nt):"<"===pt.operator||"<="===pt.operator?Kt=Ae(Kt,pt,nt):T.add(pt.semver);if(T.size>1)return null;if(Yt&&Kt){if(Nt=xe(Yt.semver,Kt.semver,nt),Nt>0)return null;if(0===Nt&&(">="!==Yt.operator||"<="!==Kt.operator))return null}for(const pt of T){if(Yt&&!Ce(pt,String(Yt),nt)||Kt&&!Ce(pt,String(Kt),nt))return null;for(const Mt of ke)if(!Ce(pt,String(Mt),nt))return!1;return!0}let Dt,ti,oi,Jt,Qe=!(!Kt||nt.includePrerelease||!Kt.semver.prerelease.length)&&Kt.semver,Lt=!(!Yt||nt.includePrerelease||!Yt.semver.prerelease.length)&&Yt.semver;Qe&&1===Qe.prerelease.length&&"<"===Kt.operator&&0===Qe.prerelease[0]&&(Qe=!1);for(const pt of ke){if(Jt=Jt||">"===pt.operator||">="===pt.operator,oi=oi||"<"===pt.operator||"<="===pt.operator,Yt)if(Lt&&pt.semver.prerelease&&pt.semver.prerelease.length&&pt.semver.major===Lt.major&&pt.semver.minor===Lt.minor&&pt.semver.patch===Lt.patch&&(Lt=!1),">"===pt.operator||">="===pt.operator){if(Dt=De(Yt,pt,nt),Dt===pt&&Dt!==Yt)return!1}else if(">="===Yt.operator&&!Ce(Yt.semver,String(pt),nt))return!1;if(Kt)if(Qe&&pt.semver.prerelease&&pt.semver.prerelease.length&&pt.semver.major===Qe.major&&pt.semver.minor===Qe.minor&&pt.semver.patch===Qe.patch&&(Qe=!1),"<"===pt.operator||"<="===pt.operator){if(ti=Ae(Kt,pt,nt),ti===pt&&ti!==Kt)return!1}else if("<="===Kt.operator&&!Ce(Kt.semver,String(pt),nt))return!1;if(!pt.operator&&(Kt||Yt)&&0!==Nt)return!1}return!(Yt&&oi&&!Kt&&0!==Nt||Kt&&Jt&&!Yt&&0!==Nt||Lt||Qe)},De=(Ie,ke,nt)=>{if(!Ie)return ke;const T=xe(Ie.semver,ke.semver,nt);return T>0?Ie:T<0||">"===ke.operator&&">="===Ie.operator?ke:Ie},Ae=(Ie,ke,nt)=>{if(!Ie)return ke;const T=xe(Ie.semver,ke.semver,nt);return T<0?Ie:T>0||"<"===ke.operator&&"<="===Ie.operator?ke:Ie};it.exports=(Ie,ke,nt={})=>{if(Ie===ke)return!0;Ie=new _e(Ie,nt),ke=new _e(ke,nt);let T=!1;e:for(const Yt of Ie.set){for(const Kt of ke.set){const Nt=de(Yt,Kt,nt);if(T=T||null!==Nt,Nt)continue e}if(T)return!1}return!0}},7342:(it,bt,pe)=>{const _e=pe(3880);it.exports=(qe,Ce)=>new _e(qe,Ce).set.map(xe=>xe.map(ve=>ve.value).join(" ").trim().split(" "))},6860:(it,bt,pe)=>{const _e=pe(3880);it.exports=(qe,Ce)=>{try{return new _e(qe,Ce).range||"*"}catch(xe){return null}}},4141:function(it,bt,pe){!function(_e,K,qe){"use strict";Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function d(){var f=isNaN(arguments[0])?1:Number(arguments[0]);return f?Array.prototype.reduce.call(this,function(m,b){return Array.isArray(b)?m.push.apply(m,d.call(b,f-1)):m.push(b),m},[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(d){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var d,f,Ze={exports:{}};d=Ze,f=function(){function m(ce,Se){return null!=Se&&ce instanceof Se}var b,w,A;try{b=Map}catch(ce){b=function(){}}try{w=Set}catch(ce){w=function(){}}try{A=Promise}catch(ce){A=function(){}}function O(ce,Se,He,Ge,dt){"object"==typeof Se&&(He=Se.depth,Ge=Se.prototype,dt=Se.includeNonEnumerable,Se=Se.circular);var vt=[],St=[],Rt="undefined"!=typeof Buffer;return void 0===Se&&(Se=!0),void 0===He&&(He=1/0),function an(Vt,kn){if(null===Vt)return null;if(0===kn)return Vt;var Bn,ui;if("object"!=typeof Vt)return Vt;if(m(Vt,b))Bn=new b;else if(m(Vt,w))Bn=new w;else if(m(Vt,A))Bn=new A(function(wl,$u){Vt.then(function(Vc){wl(an(Vc,kn-1))},function(Vc){$u(an(Vc,kn-1))})});else if(O.__isArray(Vt))Bn=[];else if(O.__isRegExp(Vt))Bn=new RegExp(Vt.source,ee(Vt)),Vt.lastIndex&&(Bn.lastIndex=Vt.lastIndex);else if(O.__isDate(Vt))Bn=new Date(Vt.getTime());else{if(Rt&&Buffer.isBuffer(Vt))return Bn=Buffer.allocUnsafe?Buffer.allocUnsafe(Vt.length):new Buffer(Vt.length),Vt.copy(Bn),Bn;m(Vt,Error)?Bn=Object.create(Vt):void 0===Ge?(ui=Object.getPrototypeOf(Vt),Bn=Object.create(ui)):(Bn=Object.create(Ge),ui=Ge)}if(Se){var Mi=vt.indexOf(Vt);if(-1!=Mi)return St[Mi];vt.push(Vt),St.push(Bn)}for(var Ni in m(Vt,b)&&Vt.forEach(function(wl,$u){var Vc=an($u,kn-1),jp=an(wl,kn-1);Bn.set(Vc,jp)}),m(Vt,w)&&Vt.forEach(function(wl){var $u=an(wl,kn-1);Bn.add($u)}),Vt){var Ui;ui&&(Ui=Object.getOwnPropertyDescriptor(ui,Ni)),(!Ui||null!=Ui.set)&&(Bn[Ni]=an(Vt[Ni],kn-1))}if(Object.getOwnPropertySymbols){var Bc=Object.getOwnPropertySymbols(Vt);for(Ni=0;Ni<Bc.length;Ni++){var ru=Bc[Ni];(Na=Object.getOwnPropertyDescriptor(Vt,ru))&&!Na.enumerable&&!dt||(Bn[ru]=an(Vt[ru],kn-1),Na.enumerable||Object.defineProperty(Bn,ru,{enumerable:!1}))}}if(dt){var Bu=Object.getOwnPropertyNames(Vt);for(Ni=0;Ni<Bu.length;Ni++){var Na,Vu=Bu[Ni];(Na=Object.getOwnPropertyDescriptor(Vt,Vu))&&Na.enumerable||(Bn[Vu]=an(Vt[Vu],kn-1),Object.defineProperty(Bn,Vu,{enumerable:!1}))}}return Bn}(ce,He)}function F(ce){return Object.prototype.toString.call(ce)}function ee(ce){var Se="";return ce.global&&(Se+="g"),ce.ignoreCase&&(Se+="i"),ce.multiline&&(Se+="m"),Se}return O.clonePrototype=function(Se){if(null===Se)return null;var He=function(){};return He.prototype=Se,new He},O.__objToStr=F,O.__isDate=function(ce){return"object"==typeof ce&&"[object Date]"===F(ce)},O.__isArray=function(ce){return"object"==typeof ce&&"[object Array]"===F(ce)},O.__isRegExp=function(ce){return"object"==typeof ce&&"[object RegExp]"===F(ce)},O.__getRegExpFlags=ee,O}(),d.exports&&(d.exports=f);var lt=function(d,f){f||(f={}),"function"==typeof f&&(f={cmp:f});var A,m="boolean"==typeof f.cycles&&f.cycles,b=f.cmp&&(A=f.cmp,function(O){return function(F,B){return A({key:F,value:O[F]},{key:B,value:O[B]})}}),w=[];return function A(O){if(O&&O.toJSON&&"function"==typeof O.toJSON&&(O=O.toJSON()),void 0!==O){if("number"==typeof O)return isFinite(O)?""+O:"null";if("object"!=typeof O)return JSON.stringify(O);var F,B;if(Array.isArray(O)){for(B="[",F=0;F<O.length;F++)F&&(B+=","),B+=A(O[F])||"null";return B+"]"}if(null===O)return"null";if(-1!==w.indexOf(O)){if(m)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var $=w.push(O)-1,U=Object.keys(O).sort(b&&b(O));for(B="",F=0;F<U.length;F++){var ee=U[F],ce=A(O[ee]);!ce||(B&&(B+=","),B+=JSON.stringify(ee)+":"+ce)}return w.splice($,1),"{"+B+"}"}}(d)};function We(d){return!!d.or}function wt(d){return!!d.and}function at(d){return!!d.not}function Pe(d,f){if(at(d))Pe(d.not,f);else if(wt(d))for(const m of d.and)Pe(m,f);else if(We(d))for(const m of d.or)Pe(m,f);else f(d)}function Gt(d,f){return at(d)?{not:Gt(d.not,f)}:wt(d)?{and:d.and.map(m=>Gt(m,f))}:We(d)?{or:d.or.map(m=>Gt(m,f))}:f(d)}const gt=function d(f,m){if(f===m)return!0;if(f&&m&&"object"==typeof f&&"object"==typeof m){if(f.constructor!==m.constructor)return!1;var b,w,A;if(Array.isArray(f)){if((b=f.length)!=m.length)return!1;for(w=b;0!=w--;)if(!d(f[w],m[w]))return!1;return!0}if(f.constructor===RegExp)return f.source===m.source&&f.flags===m.flags;if(f.valueOf!==Object.prototype.valueOf)return f.valueOf()===m.valueOf();if(f.toString!==Object.prototype.toString)return f.toString()===m.toString();if((b=(A=Object.keys(f)).length)!==Object.keys(m).length)return!1;for(w=b;0!=w--;)if(!Object.prototype.hasOwnProperty.call(m,A[w]))return!1;for(w=b;0!=w--;){var O=A[w];if(!d(f[O],m[O]))return!1}return!0}return f!=f&&m!=m},ft=Ze.exports;function yn(d,f){const m={};for(const b of f)K.hasOwnProperty(d,b)&&(m[b]=d[b]);return m}function xt(d,f){const m=W({},d);for(const b of f)delete m[b];return m}Set.prototype.toJSON=function(){return`Set(${[...this].map(d=>lt(d)).join(",")})`};const qt=lt;function sn(d){if(K.isNumber(d))return d;const f=K.isString(d)?d:lt(d);if(f.length<250)return f;let m=0;for(let b=0;b<f.length;b++)m=(m<<5)-m+f.charCodeAt(b),m&=m;return m}function Yi(d){return!1===d||null===d}function At(d,f){return d.includes(f)}function pi(d,f){let m=0;for(const[b,w]of d.entries())if(f(w,b,m++))return!0;return!1}function $t(d,f){let m=0;for(const[b,w]of d.entries())if(!f(w,b,m++))return!1;return!0}function ht(d,...f){for(const m of f)vi(d,null!=m?m:{});return d}function vi(d,f){for(const m of ut(f))K.writeConfig(d,m,f[m],!0)}function Nn(d,f){const m=[],b={};let w;for(const A of d)w=f(A),!(w in b)&&(b[w]=1,m.push(A));return m}function Gn(d,f){if(d.size!==f.size)return!1;for(const m of d)if(!f.has(m))return!1;return!0}function jn(d,f){for(const m of d)if(f.has(m))return!0;return!1}function Xi(d){const f=new Set;for(const m of d){const w=K.splitAccessPath(m).map((O,F)=>0===F?O:`[${O}]`),A=w.map((O,F)=>w.slice(0,F+1).join(""));for(const O of A)f.add(O)}return f}function En(d,f){return void 0===d||void 0===f||jn(Xi(d),Xi(f))}function rn(d){return 0===ut(d).length}const ut=Object.keys,Si=Object.values,sr=Object.entries;function Mr(d){return!0===d||!1===d}function Pn(d){const f=d.replace(/\W/g,"_");return(d.match(/^\d+/)?"_":"")+f}function Kn(d,f){return at(d)?`!(${Kn(d.not,f)})`:wt(d)?`(${d.and.map(m=>Kn(m,f)).join(") && (")})`:We(d)?`(${d.or.map(m=>Kn(m,f)).join(") || (")})`:f(d)}function as(d,f){if(0===f.length)return!0;const m=f.shift();return m in d&&as(d[m],f)&&delete d[m],rn(d)}function hr(d){return d.charAt(0).toUpperCase()+d.substr(1)}function pr(d,f="datum"){const m=K.splitAccessPath(d),b=[];for(let w=1;w<=m.length;w++){const A=`[${m.slice(0,w).map(K.stringValue).join("][")}]`;b.push(`${f}${A}`)}return b.join(" && ")}function Ki(d,f="datum"){return`${f}[${K.stringValue(K.splitAccessPath(d).join("."))}]`}function ea(d){return d.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Ii(d){return`${K.splitAccessPath(d).map(ea).join("\\.")}`}function gs(d,f,m){return d.replace(new RegExp(f.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),m)}function ls(d){return`${K.splitAccessPath(d).join(".")}`}function qs(d){return d?K.splitAccessPath(d).length:0}function Zn(...d){for(const f of d)if(void 0!==f)return f}let uo=42;function us(d){const f=++uo;return d?String(d)+f:f}function Os(d){return mu(d)?d:`__${d}`}function mu(d){return d.startsWith("__")}function Qa(d){if(void 0!==d)return(d%360+360)%360}function Fl(d){return!!K.isNumber(d)||!isNaN(d)&&!isNaN(parseFloat(d))}const co="row",Ln="column",Dn="facet",tn="x",Ue="y",Ne="x2",Me="y2",Y="radius",ie="radius2",he="theta",Le="theta2",Te="latitude",Je="longitude",L="latitude2",q="longitude2",Q="color",ne="fill",le="stroke",re="shape",ge="size",Be="angle",ct="opacity",Qt="fillOpacity",ni="strokeOpacity",Ri="strokeWidth",gr="strokeDash",Il="text",oc="order",id="detail",D0="key",rd="tooltip",AS="href",ta="url",_r="description",rL={theta:1,theta2:1,radius:1,radius2:1};function BC(d){return d in rL}const ot={longitude:1,longitude2:1,latitude:1,latitude2:1};const Rl=ut(ot),MS=_t(W(W(W({},{x:1,y:1,x2:1,y2:1}),rL),ot),{color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1});function Ah(d){return d===Q||d===ne||d===le}const iv={row:1,column:1,facet:1},Nl=ut(iv),Mh=W(W({},MS),iv),x0=ut(Mh),GM=gn(Mh,["order","detail","tooltip"]),OS=gn(GM,["row","column","facet"]);function na(d){return!!OS[d]}function Pl(d){return!!Mh[d]}const Vk=[Ne,Me,L,q,Le,ie];function rv(d){return Or(d)!==d}function Or(d){switch(d){case Ne:return tn;case Me:return Ue;case L:return Te;case q:return Je;case Le:return he;case ie:return Y}return d}function od(d){if(BC(d))switch(d){case he:return"startAngle";case Le:return"endAngle";case Y:return"outerRadius";case ie:return"innerRadius"}return d}function yu(d){switch(d){case tn:return Ne;case Ue:return Me;case Te:return L;case Je:return q;case he:return Le;case Y:return ie}}function _u(d){switch(d){case tn:case Ne:return"width";case Ue:case Me:return"height"}}const ra=gn(MS,["x","y","x2","y2","latitude","longitude","latitude2","longitude2","theta","theta2","radius","radius2"]),Sn=ut(ra),Fs={x:1,y:1},cs=ut(Fs);function el(d){return d in Fs}const ug={theta:1,radius:1},Ht=ut(ug);function ov(d){return"width"===d?tn:Ue}const nl=gn(ra,["text","tooltip","href","url","description","detail","key","order"]),nn=ut(nl);const Oo=W(W(W({},Fs),ug),nl),Ll=ut(Oo);function kr(d){return!!Oo[d]}function Cf(d,f){return function(d){switch(d){case Q:case ne:case le:case _r:case id:case D0:case rd:case AS:case oc:case ct:case Qt:case ni:case Ri:case Dn:case co:case Ln:return Xr;case tn:case Ue:case Te:case Je:return cg;case Ne:case Me:case L:case q:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case ge:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case gr:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case re:return{point:"always",geoshape:"always"};case Il:return{text:"always"};case Be:return{point:"always",square:"always",text:"always"};case ta:return{image:"always"};case he:case Y:return{text:"always",arc:"always"};case Le:case ie:return{arc:"always"}}}(d)[f]}const Xr={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},cg=gn(Xr,["geoshape"]);function Th(d){switch(d){case tn:case Ue:case he:case Y:case ge:case Be:case Ri:case ct:case Qt:case ni:case Ne:case Me:case Le:case ie:return;case Dn:case co:case Ln:case re:case gr:case Il:case rd:case AS:case ta:case _r:return"discrete";case Q:case ne:case le:return"flexible";case Te:case Je:case L:case q:case id:case D0:case oc:return}}const dg={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},$C={count:1,min:1,max:1};function oa(d){return!!d&&!!d.argmin}function ds(d){return!!d&&!!d.argmax}function kh(d){return K.isString(d)&&!!dg[d]}const vu=["count","valid","missing","distinct"];function ho(d){return K.isString(d)&&At(vu,d)}const FS=["count","sum","distinct","valid","missing"],S0=K.toSet(["mean","average","median","q1","q3","min","max"]);function A0(d){return K.isBoolean(d)&&(d=Tw(d,void 0)),"bin"+ut(d).map(f=>jr(d[f])?Pn(`_${f}_${sr(d[f])}`):Pn(`_${f}_${d[f]}`)).join("")}function Ji(d){return!0===d||po(d)&&!d.binned}function Kr(d){return"binned"===d||po(d)&&!0===d.binned}function po(d){return K.isObject(d)}function jr(d){return null==d?void 0:d.param}function M0(d){switch(d){case co:case Ln:case ge:case Q:case ne:case le:case Ri:case ct:case Qt:case ni:case re:return 6;case gr:return 4;default:return 10}}function va(d){return d&&!!d.expr}function Fr(d){const f=ut(d||{}),m={};for(const b of f)m[b]=ba(d[b]);return m}function fg(d){const an=d,{anchor:f,frame:m,offset:b,orient:w,angle:A,limit:O,color:F,subtitleColor:B,subtitleFont:$,subtitleFontSize:U,subtitleFontStyle:ee,subtitleFontWeight:ce,subtitleLineHeight:Se,subtitlePadding:He}=an,Ge=gn(an,["anchor","frame","offset","orient","angle","limit","color","subtitleColor","subtitleFont","subtitleFontSize","subtitleFontStyle","subtitleFontWeight","subtitleLineHeight","subtitlePadding"]),dt=W(W({},Ge),F?{fill:F}:{}),vt=W(W(W(W(W(W({},f?{anchor:f}:{}),m?{frame:m}:{}),b?{offset:b}:{}),w?{orient:w}:{}),void 0!==A?{angle:A}:{}),void 0!==O?{limit:O}:{}),St=W(W(W(W(W(W(W({},B?{subtitleColor:B}:{}),$?{subtitleFont:$}:{}),U?{subtitleFontSize:U}:{}),ee?{subtitleFontStyle:ee}:{}),ce?{subtitleFontWeight:ce}:{}),Se?{subtitleLineHeight:Se}:{}),He?{subtitlePadding:He}:{});return{titleMarkConfig:dt,subtitleMarkConfig:yn(d,["align","baseline","dx","dy","limit"]),nonMarkTitleProperties:vt,subtitle:St}}function Bl(d){return K.isString(d)||K.isArray(d)&&K.isString(d[0])}function mn(d){return d&&!!d.signal}function Qr(d){return!!d.step}function ud(d){return!K.isArray(d)&&"field"in d&&"data"in d}const zk=ut({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),av={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},jC=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function zC(d){const f=K.isArray(d.condition)?d.condition.map(T0):T0(d.condition);return _t(W({},ba(d)),{condition:f})}function ba(d){if(va(d)){const f=d,{expr:m}=f,b=gn(f,["expr"]);return W({signal:m},b)}return d}function T0(d){if(va(d)){const f=d,{expr:m}=f,b=gn(f,["expr"]);return W({signal:m},b)}return d}function Nr(d){if(va(d)){const f=d,{expr:m}=f,b=gn(f,["expr"]);return W({signal:m},b)}return mn(d)?d:void 0!==d?{value:d}:void 0}function RS(d){return mn(d)?d.signal:K.stringValue(d.value)}function Ir(d){return mn(d)?d.signal:null==d?null:K.stringValue(d)}function Uk(d){var f;return[].concat(d.type,null!=(f=d.style)?f:[])}function vn(d,f,m,b={}){const{vgChannel:w,ignoreVgConfig:A}=b;return w&&void 0!==f[w]?f[w]:void 0!==f[d]?f[d]:!A||w&&w!==d?hg(d,f,m,b):void 0}function hg(d,f,m,{vgChannel:b}={}){return Zn(b?Fh(d,f,m.style):void 0,Fh(d,f,m.style),b?m[f.type][b]:void 0,m[f.type][d],b?m.mark[b]:m.mark[d])}function Fh(d,f,m){return Ih(d,Uk(f),m)}function Ih(d,f,m){let b;f=K.array(f);for(const w of f){const A=m[w];A&&void 0!==A[d]&&(b=A[d])}return b}function lv(d,f){return K.array(d).reduce((m,b)=>{var w;return m.field.push(Ut(b,f)),m.order.push(null!=(w=b.sort)?w:"ascending"),m},{field:[],order:[]})}function Hk(d,f){const m=[...d];return f.forEach(b=>{for(const w of m)if(gt(w,b))return;m.push(b)}),m}function Wk(d,f){return gt(d,f)||!f?d:d?[...K.array(d),...K.array(f)].join(", "):f}function Gk(d,f){const m=d.value,b=f.value;if(null==m||null===b)return{explicit:d.explicit,value:null};if((Bl(m)||mn(m))&&(Bl(b)||mn(b)))return{explicit:d.explicit,value:Wk(m,b)};if(Bl(m)||mn(m))return{explicit:d.explicit,value:m};if(Bl(b)||mn(b))return{explicit:d.explicit,value:b};if(!(Bl(m)||mn(m)||Bl(b)||mn(b)))return{explicit:d.explicit,value:Hk(m,b)};throw new Error("It should never reach here")}function hn(d,f,m){return f in d?Object.defineProperty(d,f,{value:m,enumerable:!0,configurable:!0,writable:!0}):d[f]=m,d}function or(d,f,m){return function(d,f,m){if(f.set)f.set.call(d,m);else{if(!f.writable)throw new TypeError("attempted to set read only private field");f.value=m}}(d,HC(d,f,"set"),m),m}function HC(d,f,m){if(!f.has(d))throw new TypeError("attempted to "+m+" private field on non-instance");return f.get(d)}function k0(d){return`Invalid specification ${qt(d)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const NS='Autosize "fit" only works for single views and layered views.';function WC(d){return("width"==d?"Width":"Height")+' "container" only works for single views and layered views.'}function uv(d){return`${"width"==d?"Width":"Height"} "container" only works well with autosize "fit" or "fit-${"width"==d?"x":"y"}".`}function PS(d){return d?`Dropping "fit-${d}" because spec has discrete ${_u(d)}.`:'Dropping "fit" because spec has discrete size.'}function Ca(d){return`Unknown field for ${d}. Cannot calculate view size.`}function GC(d){return`Cannot project a selection on encoding channel "${d}", which has no field.`}function LS(d,f){return`Cannot project a selection on encoding channel "${d}" as it uses an aggregate function ("${f}").`}function BS(d){return`Selection not supported for ${d} yet.`}const Xk="The same selection must be used to override scale domains in a layered view.";function Qk(d){return`The "columns" property cannot be used when "${d}" has nested row/column.`}function XC(d,f,m){return`An ancestor parsed field "${d}" as ${m} but a child wants to parse the field as ${f}.`}function pg(d){return`Ignoring an invalid transform: ${qt(d)}.`}function QC(d){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${d} are dropped.`}function ZC(d){return`Invalid field type "${d}".`}function Zk(d,f){const{fill:m,stroke:b}=f;return`Dropping color ${d} as the plot also has ${m&&b?"fill and stroke":m?"fill":"stroke"}.`}function hv(d,f){return`Dropping ${qt(d)} from channel "${f}" since it does not contain any data field, datum, value, or signal.`}function F0(d,f,m){return`${d} dropped as it is incompatible with "${f}"${m?` when ${m}`:""}.`}function iF(d){return`${d} encoding should be discrete (ordinal / nominal / binned).`}function Ct(d){return`${d} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Zr(d,f){return`Using discrete channel "${d}" to encode "${f}" field can be misleading as it does not encode ${"ordinal"===f?"order":"magnitude"}.`}function tw(d){return`Using unaggregated domain with raw field has no effect (${qt(d)}).`}function dL(d){return`Unaggregated domain not applicable for "${d}" since it produces values outside the origin domain of the source data.`}function rF(d){return`Unaggregated domain is currently unsupported for log scale (${qt(d)}).`}function ko(d,f,m){return`${m}-scale's "${f}" is dropped as it does not work with ${d} scale.`}function P0(d){return`The step for "${d}" is dropped because the ${"width"===d?"x":"y"} is continuous.`}const gg="Domains that should be unioned has conflicting sort properties. Sort will be set to true.";function Ef(d,f){return`Invalid ${d}: ${qt(f)}.`}function _v(d){return`1D error band does not support ${d}.`}function cd(d){return`Channel ${d} is required for "binned" bin.`}const Xs=K.logger(K.Warn);let rl=Xs;function It(...d){rl.warn(...d)}function Ph(d){if(d&&K.isObject(d))for(const f of Bh)if(f in d)return!0;return!1}const WS=["january","february","march","april","may","june","july","august","september","october","november","december"],ow=WS.map(d=>d.substr(0,3)),B0=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],mg=B0.map(d=>d.substr(0,3));function lw(d,f){const m=[];if(f&&void 0!==d.day&&ut(d).length>1&&(It(function(d){return`Dropping day from datetime ${qt(d)} as day cannot be combined with other units.`}(d)),delete(d=ft(d)).day),m.push(void 0!==d.year?d.year:2012),void 0!==d.month){const b=f?function(d){if(Fl(d)&&(d=+d),K.isNumber(d))return d-1;{const f=d.toLowerCase(),m=WS.indexOf(f);if(-1!==m)return m;const b=f.substr(0,3),w=ow.indexOf(b);if(-1!==w)return w;throw new Error(Ef("month",d))}}(d.month):d.month;m.push(b)}else if(void 0!==d.quarter){const b=f?function(d){if(Fl(d)&&(d=+d),K.isNumber(d))return d>4&&It(Ef("quarter",d)),d-1;throw new Error(Ef("quarter",d))}(d.quarter):d.quarter;m.push(K.isNumber(b)?3*b:`${b}*3`)}else m.push(0);if(void 0!==d.date)m.push(d.date);else if(void 0!==d.day){const b=f?function(d){if(Fl(d)&&(d=+d),K.isNumber(d))return d%7;{const f=d.toLowerCase(),m=B0.indexOf(f);if(-1!==m)return m;const b=f.substr(0,3),w=mg.indexOf(b);if(-1!==w)return w;throw new Error(Ef("day",d))}}(d.day):d.day;m.push(K.isNumber(b)?b+1:`${b}+1`)}else m.push(1);for(const b of["hours","minutes","seconds","milliseconds"]){const w=d[b];m.push(void 0===w?0:w)}return m}function $l(d){const m=lw(d,!0).join(", ");return d.utc?`utc(${m})`:`datetime(${m})`}const GS={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Bh=ut(GS);function uw(d){return d.startsWith("utc")}const dw={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function qS(d){return Bh.filter(f=>yg(d,f))}function yg(d,f){const m=d.indexOf(f);return!(m<0||m>0&&"seconds"===f&&"i"===d.charAt(m-1)||d.length>m+3&&"day"===f&&"o"===d.charAt(m+3)||m>0&&"year"===f&&"f"===d.charAt(m-1))}function fw(d,f,{end:m}={end:!1}){const b=pr(f),w=uw(d)?"utc":"";function A(B){return"quarter"===B?`(${w}quarter(${b})-1)`:`${w}${B}(${b})`}let O;const F={};for(const B of Bh)yg(d,B)&&(F[B]=A(B),O=B);return m&&(F[O]+="+1"),function(d){const m=lw(d,!1).join(", ");return d.utc?`utc(${m})`:`datetime(${m})`}(F)}function V0(d){if(!d)return;const f=qS(d);return`timeUnitSpecifier(${qt(f)}, ${qt(dw)})`}function Fo(d){if(!d)return;let f;return K.isString(d)?f={unit:d}:K.isObject(d)&&(f=W(W({},d),d.unit?{unit:d.unit}:{})),uw(f.unit)&&(f.utc=!0,f.unit=function(d){return d.substr(3)}(f.unit)),f}function hw(d){return d&&!!d.field&&void 0!==d.equal}function dd(d){return d&&!!d.field&&void 0!==d.lt}function Df(d){return d&&!!d.field&&void 0!==d.lte}function xf(d){return d&&!!d.field&&void 0!==d.gt}function pw(d){return d&&!!d.field&&void 0!==d.gte}function $0(d){if(null!=d&&d.field){if(K.isArray(d.range)&&2===d.range.length)return!0;if(mn(d.range))return!0}return!1}function Ev(d){return d&&!!d.field&&(K.isArray(d.oneOf)||K.isArray(d.in))}function j0(d){return Ev(d)||hw(d)||$0(d)||dd(d)||xf(d)||Df(d)||pw(d)}function go(d,f){return xu(d,{timeUnit:f,wrapTime:!0})}function U0(d,f=!0){var m;const{field:b}=d,w=null===(m=Fo(d.timeUnit))||void 0===m?void 0:m.unit,A=w?`time(${fw(w,b)})`:Ut(d,{expr:"datum"});if(hw(d))return`${A}===${go(d.equal,w)}`;if(dd(d))return`${A}<${go(d.lt,w)}`;if(xf(d))return`${A}>${go(d.gt,w)}`;if(Df(d))return`${A}<=${go(d.lte,w)}`;if(pw(d))return`${A}>=${go(d.gte,w)}`;if(Ev(d))return`indexof([${function(d,f){return d.map(m=>go(m,f))}(d.oneOf,w).join(",")}], ${A}) !== -1`;if(function(d){return d&&!!d.field&&void 0!==d.valid}(d))return bg(A,d.valid);if($0(d)){const{range:O}=d,F=mn(O)?{signal:`${O.signal}[0]`}:O[0],B=mn(O)?{signal:`${O.signal}[1]`}:O[1];if(null!==F&&null!==B&&f)return"inrange("+A+", ["+go(F,w)+", "+go(B,w)+"])";const $=[];return null!==F&&$.push(`${A} >= ${go(F,w)}`),null!==B&&$.push(`${A} <= ${go(B,w)}`),$.length>0?$.join(" && "):"true"}throw new Error(`Invalid field predicate: ${qt(d)}`)}function bg(d,f=!0){return f?`isValid(${d}) && isFinite(+${d})`:`!isValid(${d}) || !isFinite(+${d})`}function Vh(d){var f;return j0(d)&&d.timeUnit?_t(W({},d),{timeUnit:null===(f=Fo(d.timeUnit))||void 0===f?void 0:f.unit}):d}const fd="quantitative",Ti="ordinal",hd="temporal",$h="nominal",jh="geojson";const zr_LINEAR="linear",zr_LOG="log",zr_POW="pow",zr_SQRT="sqrt",zr_SYMLOG="symlog",zr_TIME="time",zr_UTC="utc",zr_QUANTILE="quantile",zr_QUANTIZE="quantize",zr_THRESHOLD="threshold",zr_POINT="point",zr_BAND="band",sl={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function xv(d,f){const m=sl[d],b=sl[f];return m===b||"ordinal-position"===m&&"time"===b||"ordinal-position"===b&&"time"===m}const H0={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function gw(d){return H0[d]}const Uh=["linear","log","pow","sqrt","symlog","time","utc"],Cr=K.toSet(Uh),pd=K.toSet(["linear","log","pow","sqrt","symlog"]);const Cg=K.toSet(["quantile","quantize","threshold"]),W0=Uh.concat(["quantile","quantize","threshold","sequential","identity"]),yw=K.toSet(W0),Wh=K.toSet(["ordinal","bin-ordinal","point","band"]);function aa(d){return d in Wh}function ol(d){return d in yw}function uc(d){return d in Cr}function G0(d){return d in Cg}function q0(d){return null==d?void 0:d.param}const wa=gn({type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},["type","domain","range","rangeMax","rangeMin","scheme"]),Gh=ut(wa);function ar(d,f){switch(f){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(d);case"bins":return!["point","band","identity","ordinal"].includes(d);case"round":return uc(d)||"band"===d||"point"===d;case"padding":case"rangeMin":case"rangeMax":return uc(d)||["point","band"].includes(d);case"paddingOuter":case"align":return["point","band"].includes(d);case"paddingInner":return"band"===d;case"domainMax":case"domainMid":case"domainMin":case"clamp":return uc(d);case"nice":return uc(d)||"quantize"===d||"threshold"===d;case"exponent":return"pow"===d;case"base":return"log"===d;case"constant":return"symlog"===d;case"zero":return ol(d)&&!At(["log","time","utc","threshold","quantile"],d)}}function qh(d,f){switch(f){case"interpolate":case"scheme":case"domainMid":return Ah(d)?void 0:function(d){return`Cannot use the scale property "${d}" with non-color channel.`}(d);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}const Io={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},mo=Io.arc,Ea=Io.area,Sf=Io.bar,Da=Io.image,al=Io.line,wg=Io.point,Sv=Io.rect,Eg=Io.rule,lF=Io.text,Av=Io.tick,XS=Io.trail,yo=Io.circle,K0=Io.square,Yh=Io.geoshape;function Af(d){return["line","area","trail"].includes(d)}function _w(d){return["rect","bar","image","arc"].includes(d)}const KS=ut(Io);function cc(d){return d.type}K.toSet(KS);const cF=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit","fill","fillOpacity"],Ov=ut({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1}),Mf=ut({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1});function Ke(d){return d&&null!=d.band}const Dg={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},QS={binSpacing:1,continuousBandSize:5,timeUnitBandPosition:.5},md={binSpacing:0,continuousBandSize:5,timeUnitBandPosition:.5};function Cu(d){const{channel:f,channelDef:m,markDef:b,scale:w,config:A}=d,O=Xh(d);return Bt(m)&&!ho(m.aggregate)&&w&&uc(w.get("type"))&&!1===w.get("zero")?Of({fieldDef:m,channel:f,markDef:b,ref:O,config:A}):O}function Of({fieldDef:d,channel:f,markDef:m,ref:b,config:w}){return Af(m.type)||null===vn("invalid",m,w)?b:[dF(d,f),b]}function dF(d,f){const m=se(d,!0),w="y"===Or(f)?{field:{group:"height"}}:{value:0};return W({test:m},w)}function se(d,f=!0){return bg(K.isString(d)?d:Ut(d,{expr:"datum"}),!f)}function yd(d,f,m,b){const w={};if(f&&(w.scale=f),hc(d)){const{datum:A}=d;Ph(A)?w.signal=$l(A):mn(A)?w.signal=A.signal:va(A)?w.signal=A.expr:w.value=A}else w.field=Ut(d,m);if(b){const{offset:A,band:O}=b;A&&(w.offset=A),O&&(w.band=O)}return w}function dc({scaleName:d,fieldOrDatumDef:f,fieldOrDatumDef2:m,offset:b,startSuffix:w,bandPosition:A=.5}){const O=0<A&&A<1?"datum":void 0,F=Ut(f,{expr:O,suffix:w}),B=void 0!==m?Ut(m,{expr:O}):Ut(f,{suffix:"end",expr:O}),$={};if(0===A||1===A)$.scale=d,$.field=0===A?F:B;else{const U=mn(A)?`${A.signal} * ${F} + (1-${A.signal}) * ${B}`:`${A} * ${F} + ${1-A} * ${B}`;$.signal=`scale("${d}", ${U})`}return b&&($.offset=b),$}function Xh({channel:d,channelDef:f,channel2Def:m,markDef:b,config:w,scaleName:A,scale:O,stack:F,offset:B,defaultRef:$,bandPosition:U}){var ee;if(f){if(si(f)){if(Sa(f)){null!=U||(U=Nv({fieldDef:f,fieldDef2:m,markDef:b,config:w}));const{bin:Se,timeUnit:He,type:Ge}=f;if(Ji(Se)||U&&He&&Ge===hd)return null!=F&&F.impute?yd(f,A,{binSuffix:"mid"},{offset:B}):U?dc({scaleName:A,fieldOrDatumDef:f,bandPosition:U,offset:B}):yd(f,A,kf(f,d)?{binSuffix:"range"}:{},{offset:B});if(Kr(Se)){if(Bt(m))return dc({scaleName:A,fieldOrDatumDef:f,fieldOrDatumDef2:m,bandPosition:U,offset:B});It(cd(d===tn?Ne:Me))}}const ce=null==O?void 0:O.get("type");return yd(f,A,aa(ce)?{binSuffix:"range"}:{},{offset:B,band:"band"===ce?null!=(ee=null!=U?U:f.bandPosition)?ee:.5:void 0})}if(Pr(f)){const Se=B?{offset:B}:{};return W(W({},xg(d,f.value)),Se)}}return K.isFunction($)&&($=$()),$&&W(W({},$),B?{offset:B}:{})}function xg(d,f){return At(["x","x2"],d)&&"width"===f?{field:{group:"width"}}:At(["y","y2"],d)&&"height"===f?{field:{group:"height"}}:Nr(f)}function fc(d){return d&&"number"!==d&&"time"!==d}function J0(d,f,m){return`${d}(${f}${m?`, ${qt(m)}`:""})`}function _d({fieldOrDatumDef:d,format:f,formatType:m,expr:b,normalizeStack:w,config:A}){if(fc(m))return Sg({fieldOrDatumDef:d,format:f,formatType:m,expr:b,config:A});const O=lr(d,b,w);if(Tf(d)){var F,B;const $=function(d,f,m,b,w){return!f||m?`${w?"utc":"time"}Format(${d}, '${m=K.isString(m)?m:b}')`:function(d,f,m){if(!d)return;const b=V0(d);return`${m||uw(d)?"utc":"time"}Format(${f}, ${b})`}(f,d,w)}(O,Bt(d)?null===(F=Fo(d.timeUnit))||void 0===F?void 0:F.unit:void 0,f,A.timeFormat,Ro(d)&&(null===(B=d.scale)||void 0===B?void 0:B.type)===zr_UTC);return $?{signal:$}:void 0}return f=Ew(xa(d),f,A),Bt(d)&&Ji(d.bin)?{signal:Fv(O,Ut(d,{expr:b,binSuffix:"end"}),f,m,A)}:f||"quantitative"===xa(d)?{signal:`${Z0(O,f)}`}:{signal:`isValid(${O}) ? ${O} : ""+${O}`}}function lr(d,f,m){return Bt(d)?m?`${Ut(d,{expr:f,suffix:"end"})}-${Ut(d,{expr:f,suffix:"start"})}`:Ut(d,{expr:f}):function(d){const{datum:f}=d;return Ph(f)?$l(f):`${qt(f)}`}(d)}function Sg({fieldOrDatumDef:d,format:f,formatType:m,expr:b,normalizeStack:w,config:A,field:O}){return null!=O||(O=lr(d,b,w)),Bt(d)&&Ji(d.bin)?{signal:Fv(O,Ut(d,{expr:b,binSuffix:"end"}),f,m,A)}:{signal:J0(m,O,f)}}function wu(d,f,m,b,w,A){var O;if(!fc(b))return Tf(d)?function(d,f,m,b){return d||(f?{signal:V0(f)}:b?void 0:m.timeFormat)}(m,Bt(d)?null===(O=Fo(d.timeUnit))||void 0===O?void 0:O.unit:void 0,w,A):Ew(f,m,w)}function ww(d,f,m){return d&&(mn(d)||"number"===d||"time"===d)?d:Tf(f)&&"time"!==m&&"utc"!==m?"time":void 0}function Ew(d,f,m){return K.isString(f)?f:d===fd?m.numberFormat:void 0}function Z0(d,f){return`format(${d}, "${f||""}")`}function kv(d,f,m,b){var w;return fc(m)?J0(m,d,f):Z0(d,null!=(w=K.isString(f)?f:void 0)?w:b.numberFormat)}function Fv(d,f,m,b,w){const A=kv(d,m,b,w),O=kv(f,m,b,w);return`${bg(d,!1)} ? "null" : ${A} + " \u2013 " + ${O}`}const jl="min",Kh={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function ty(d){return d in Kh}function Iv(d){return!!d&&!!d.encoding}function Eu(d){return!(!d||"count"!==d.op&&!d.field)}function Rv(d){return!!d&&K.isArray(d)}function Ag(d){return"row"in d||"column"in d}function ny(d){return!!d&&"header"in d}function Mg(d){return"facet"in d}function iy(d){const{field:f,timeUnit:m,bin:b,aggregate:w}=d;return _t(W(W(W({},m?{timeUnit:m}:{}),b?{bin:b}:{}),w?{aggregate:w}:{}),{field:f})}function vd(d){return"sort"in d}function Nv({fieldDef:d,fieldDef2:f,markDef:m,config:b}){if(si(d)&&void 0!==d.bandPosition)return d.bandPosition;if(Bt(d)){const{timeUnit:w,bin:A}=d;if(w&&!f)return _w(m.type)?0:hg("timeUnitBandPosition",m,b);if(Ji(A))return.5}}function Pv({channel:d,fieldDef:f,fieldDef2:m,markDef:b,config:w,scaleType:A,useVlSizeChannel:O}){const F=_u(d),B=vn(O?"size":F,b,w,{vgChannel:F});if(void 0!==B)return B;if(Bt(f)){const{timeUnit:ce,bin:Se}=f;if(ce&&!m)return{band:hg("timeUnitBandSize",b,w)};if(Ji(Se)&&!aa(A))return{band:1}}var $,U,ee;return _w(b.type)?A?aa(A)?(null===(U=w[b.type])||void 0===U?void 0:U.discreteBandSize)||{band:1}:null===(ee=w[b.type])||void 0===ee?void 0:ee.continuousBandSize:null===($=w[b.type])||void 0===$?void 0:$.discreteBandSize:void 0}function Sw(d,f,m,b){return!!(Ji(d.bin)||d.timeUnit&&Sa(d)&&"temporal"===d.type)&&void 0!==Nv({fieldDef:d,fieldDef2:f,markDef:m,config:b})}function bd(d){return d&&"condition"in d}function Qh(d){const f=d&&d.condition;return!!f&&!K.isArray(f)&&Bt(f)}function Cd(d){const f=d&&d.condition;return!!f&&!K.isArray(f)&&si(f)}function Bt(d){return d&&(!!d.field||"count"===d.aggregate)}function xa(d){return d&&d.type}function hc(d){return d&&"datum"in d}function Du(d){return Sa(d)&&!sy(d)||Lv(d)}function Lv(d){return hc(d)&&K.isNumber(d.datum)}function si(d){return Bt(d)||hc(d)}function Sa(d){return d&&("field"in d||"count"===d.aggregate)&&"type"in d}function Pr(d){return d&&"value"in d&&"value"in d}function Ro(d){return d&&("scale"in d||"sort"in d)}function Bv(d){return d&&("axis"in d||"stack"in d||"impute"in d)}function Aw(d){return d&&"legend"in d}function Mw(d){return d&&("format"in d||"formatType"in d)}function eA(d){return xt(d,["legend","axis","header","scale"])}function Ut(d,f={}){var O,F,B;let m=d.field;const b=f.prefix;let w=f.suffix,A="";if(function(d){return"count"===d.aggregate}(d))m=Os("count");else{let $;if(!f.nofn)if(function(d){return"op"in d}(d))$=d.op;else{const{bin:U,aggregate:ee,timeUnit:ce}=d;Ji(U)?($=A0(U),w=(null!=(O=f.binSuffix)?O:"")+(null!=(F=f.suffix)?F:"")):ee?ds(ee)?(A=`["${m}"]`,m=`argmax_${ee.argmax}`):oa(ee)?(A=`["${m}"]`,m=`argmin_${ee.argmin}`):$=String(ee):ce&&($=function(d){const b=Fo(d),{utc:f}=b,m=gn(b,["utc"]);return m.unit?(f?"utc":"")+ut(m).map(w=>Pn(`${"unit"===w?"":`_${w}_`}${m[w]}`)).join(""):(f?"utc":"")+"timeunit"+ut(m).map(w=>Pn(`_${w}_${m[w]}`)).join("")}(ce),w=(!["range","mid"].includes(f.binSuffix)&&f.binSuffix||"")+(null!=(B=f.suffix)?B:""))}$&&(m=m?`${$}_${m}`:$)}return w&&(m=`${m}_${w}`),b&&(m=`${b}_${m}`),f.forAs?ls(m):f.expr?Ki(m,f.expr)+A:Ii(m)+A}function sy(d){switch(d.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Bt(d)&&!!d.bin;case"temporal":return!1}throw new Error(ZC(d.type))}const mF=(d,f)=>{switch(f.fieldTitle){case"plain":return d.field;case"functional":return function(d){const{aggregate:f,bin:m,timeUnit:b,field:w}=d;if(ds(f))return`${w} for argmax(${f.argmax})`;if(oa(f))return`${w} for argmin(${f.argmin})`;const A=Fo(b),O=f||(null==A?void 0:A.unit)||(null==A?void 0:A.maxbins)&&"timeunit"||Ji(m)&&"bin";return O?`${O.toUpperCase()}(${w})`:w}(d);default:return function(d,f){const{field:m,bin:b,timeUnit:w,aggregate:A}=d;if("count"===A)return f.countTitle;if(Ji(b))return`${m} (binned)`;if(w){var O;const F=null===(O=Fo(w))||void 0===O?void 0:O.unit;if(F)return`${m} (${qS(F).join("-")})`}else if(A)return ds(A)?`${m} for max ${A.argmax}`:oa(A)?`${m} for min ${A.argmin}`:`${hr(A)} of ${m}`;return m}(d,f)}};let Aa=mF;function Tg(d){Aa=d}function No(d,f,{allowDisabling:m,includeDefault:b=!0}){var B,w;const A=null===(w=wd(d))||void 0===w?void 0:w.title;if(!Bt(d))return A;const O=d,F=b?jv(O,f):void 0;return m?Zn(A,O.title,F):null!=(B=null!=A?A:O.title)?B:F}function wd(d){return Bv(d)&&d.axis?d.axis:Aw(d)&&d.legend?d.legend:ny(d)&&d.header?d.header:void 0}function jv(d,f){return Aa(d,f)}function Ed(d){var f;if(Mw(d)){const{format:m,formatType:b}=d;return{format:m,formatType:b}}{const m=null!=(f=wd(d))?f:{},{format:b,formatType:w}=m;return{format:b,formatType:w}}}function Dd(d){return Bt(d)?d:Qh(d)?d.condition:void 0}function Rs(d){return si(d)?d:Cd(d)?d.condition:void 0}function tA(d,f,m,b={}){return K.isString(d)||K.isNumber(d)||K.isBoolean(d)?(It(function(d,f,m){return`Channel ${d} is a ${f}. Converted to {value: ${qt(m)}}.`}(f,K.isString(d)?"string":K.isNumber(d)?"number":"boolean",d)),{value:d}):si(d)?Fg(d,f,m,b):Cd(d)?_t(W({},d),{condition:Fg(d.condition,f,m,b)}):d}function Fg(d,f,m,b){if(Mw(d)){const w=d,{formatType:F}=w,B=gn(w,["format","formatType"]);if(fc(F)&&!m.customFormatTypes)return It(QC(f)),Fg(B,f,m,b)}else{const O=Bv(d)?"axis":Aw(d)?"legend":ny(d)?"header":null;if(O&&d[O]){const A=d[O],{formatType:B}=A,$=gn(A,["format","formatType"]);if(fc(B)&&!m.customFormatTypes)return It(QC(f)),Fg(_t(W({},d),{[O]:$}),f,m,b)}}return Bt(d)?oy(d,f,b):function(d){let f=d.type;if(f)return d;const{datum:m}=d;return f=K.isNumber(m)?"quantitative":K.isString(m)?"nominal":Ph(m)?"temporal":void 0,_t(W({},d),{type:f})}(d)}function oy(d,f,{compositeMark:m=!1}={}){const{aggregate:b,timeUnit:w,bin:A,field:O}=d,F=W({},d);if(!m&&b&&!kh(b)&&!ds(b)&&!oa(b)&&(It(function(d){return`Invalid aggregation operator "${d}".`}(b)),delete F.aggregate),w&&(F.timeUnit=Fo(w)),O&&(F.field=`${O}`),Ji(A)&&(F.bin=Tw(A,f)),Kr(A)&&!el(f)&&It(function(d){return`Channel ${d} should not be used with "binned" bin.`}(f)),Sa(F)){const{type:$}=F,U=function(d){if(d)switch(d=d.toLowerCase(),d){case"q":case fd:return"quantitative";case"t":case hd:return"temporal";case"o":case Ti:return"ordinal";case"n":case $h:return"nominal";case jh:return"geojson"}}($);$!==U&&(F.type=U),"quantitative"!==$&&ho(b)&&(It(function(d,f){return`Invalid field type "${d}" for aggregate: "${f}", using "quantitative" instead.`}($,b)),F.type="quantitative")}else if(!rv(f)){const $=function(d,f){var m;switch(f){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(vd(d)&&K.isArray(d.sort))return"ordinal";const{aggregate:b,bin:w,timeUnit:A}=d;if(A)return"temporal";if(w||b&&!ds(b)&&!oa(b))return"quantitative";if(Ro(d)&&null!==(m=d.scale)&&void 0!==m&&m.type)switch(sl[d.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}(F,f);F.type=$}if(Sa(F)){const{compatible:$,warning:U}=function(d,f){const m=d.type;if("geojson"===m&&"shape"!==f)return{compatible:!1,warning:`Channel ${f} should not be used with a geojson data.`};switch(f){case co:case Ln:case Dn:return sy(d)?ay:{compatible:!1,warning:iF(f)};case tn:case Ue:case Q:case ne:case le:case Il:case id:case D0:case rd:case AS:case ta:case Be:case he:case Y:case _r:return ay;case Je:case q:case Te:case L:return m!==fd?{compatible:!1,warning:`Channel ${f} should be used with a quantitative field only, not ${d.type} field.`}:ay;case ct:case Qt:case ni:case Ri:case ge:case Le:case ie:case Ne:case Me:return"nominal"!==m||d.sort?ay:{compatible:!1,warning:`Channel ${f} should not be used with an unsorted discrete field.`};case re:case gr:return sy(d)||function(d){var f;return Ro(d)&&G0(null===(f=d.scale)||void 0===f?void 0:f.type)}(d)?ay:{compatible:!1,warning:Ct(f)};case oc:return"nominal"!==d.type||"sort"in d?ay:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}}(F,f)||{};!1===$&&It(U)}if(vd(F)&&K.isString(F.sort)){const{sort:$}=F;if(ty($))return _t(W({},F),{sort:{encoding:$}});const U=$.substr(1);if("-"===$.charAt(0)&&ty(U))return _t(W({},F),{sort:{encoding:U,order:"descending"}})}if(ny(F)){const{header:$}=F;if($){const B=$,{orient:U}=B,ee=gn(B,["orient"]);if(U)return _t(W({},F),{header:_t(W({},ee),{labelOrient:$.labelOrient||U,titleOrient:$.titleOrient||U})})}}return F}function Tw(d,f){return K.isBoolean(d)?{maxbins:M0(f)}:"binned"===d?{binned:!0}:d.maxbins||d.step?d:_t(W({},d),{maxbins:M0(f)})}const ay={compatible:!0};function Tf(d){const{formatType:f}=Ed(d);return"time"===f||!f&&function(d){return d&&("temporal"===d.type||Bt(d)&&!!d.timeUnit)}(d)}function xu(d,{timeUnit:f,type:m,wrapTime:b,undefinedIfExprNotRequired:w}){var A;const O=f&&(null===(A=Fo(f))||void 0===A?void 0:A.unit);let B,F=O||"temporal"===m;return va(d)?B=d.expr:mn(d)?B=d.signal:Ph(d)?(F=!0,B=$l(d)):(K.isString(d)||K.isNumber(d))&&F&&(B=`datetime(${qt(d)})`,function(d){return!!GS[d]}(O)&&(K.isNumber(d)&&d<1e4||K.isString(d)&&isNaN(Date.parse(d)))&&(B=$l({[O]:d}))),B?b&&F?`time(${B})`:B:w?void 0:qt(d)}function nA(d,f){const{type:m}=d;return f.map(b=>{const w=xu(b,{timeUnit:Bt(d)?d.timeUnit:void 0,type:m,undefinedIfExprNotRequired:!0});return void 0!==w?{signal:w}:b})}function kf(d,f){return Ji(d.bin)?kr(f)&&["ordinal","nominal"].includes(d.type):(console.warn("Only call this method for binned field defs."),!1)}const Ig={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Ff(d){return d&&d.condition}const ly=["domain","grid","labels","ticks","title"],yF={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},wi={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},_F=_t(W({},wi),{style:1,labelExpr:1,encoding:1});function zv(d){return!!_F[d]}const Uv=ut({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1});function xd(d){return"mark"in d}class uy{constructor(f,m){this.name=f,this.run=m}hasMatchingType(f){return!!xd(f)&&function(d){return cc(d)?d.type:d}(f.mark)===this.name}}function Jh(d,f){const m=d&&d[f];return!!m&&(K.isArray(m)?pi(m,b=>!!b.field):Bt(m)||Qh(m))}function Hv(d){return pi(x0,f=>{if(Jh(d,f)){const m=d[f];if(K.isArray(m))return pi(m,b=>!!b.aggregate);{const b=Dd(m);return b&&!!b.aggregate}}return!1})}function Wv(d,f){const m=[],b=[],w=[],A=[],O={};return Zh(d,(F,B)=>{if(Bt(F)){const $=F,{field:U,aggregate:ee,bin:ce,timeUnit:Se}=$,He=gn($,["field","aggregate","bin","timeUnit"]);if(ee||Se||ce){const Ge=wd(F),dt=null==Ge?void 0:Ge.title;let vt=Ut(F,{forAs:!0});const St=_t(W(W({},dt?[]:{title:No(F,f,{allowDisabling:!0})}),He),{field:vt});if(ee){let Rt;if(ds(ee)?(Rt="argmax",vt=Ut({op:"argmax",field:ee.argmax},{forAs:!0}),St.field=`${vt}.${U}`):oa(ee)?(Rt="argmin",vt=Ut({op:"argmin",field:ee.argmin},{forAs:!0}),St.field=`${vt}.${U}`):"boxplot"!==ee&&"errorbar"!==ee&&"errorband"!==ee&&(Rt=ee),Rt){const an={op:Rt,as:vt};U&&(an.field=U),A.push(an)}}else if(m.push(vt),Sa(F)&&Ji(ce))b.push({bin:ce,field:U,as:vt}),m.push(Ut(F,{binSuffix:"end"})),kf(F,B)&&m.push(Ut(F,{binSuffix:"range"})),el(B)&&(O[`${B}2`]={field:`${vt}_end`}),St.bin="binned",rv(B)||(St.type=fd);else if(Se){w.push({timeUnit:Se,field:U,as:vt});const Rt=Sa(F)&&F.type!==hd&&"time";Rt&&(B===Il||B===rd?St.formatType=Rt:function(d){return!!ra[d]}(B)?St.legend=W({formatType:Rt},St.legend):el(B)&&(St.axis=W({formatType:Rt},St.axis)))}O[B]=St}else m.push(U),O[B]=d[B]}else O[B]=d[B]}),{bins:b,timeUnits:w,aggregate:A,groupby:m,encoding:O}}function gL(d,f,m,b){return ut(d).reduce((w,A)=>{if(!Pl(A))return It(function(d){return`${d}-encoding is dropped as ${d} is not a valid encoding channel.`}(A)),w;const O=d[A];if("angle"===A&&"arc"===f&&!d.theta&&(It("Arc marks uses theta channel rather than angle, replacing angle with theta."),A=he),!function(d,f,m){const b=Cf(f,m);if(!b)return!1;if("binned"===b){const w=d[f===Ne?tn:Ue];return!!(Bt(w)&&Bt(d[f])&&Kr(w.bin))}return!0}(d,A,f))return It(F0(A,f)),w;if(A===ge&&"line"===f){const F=Dd(d[A]);if(null!=F&&F.aggregate)return It("Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead."),w}if(A===Q&&(m?"fill"in d:"stroke"in d))return It(Zk("encoding",{fill:"fill"in d,stroke:"stroke"in d})),w;if(A===id||A===oc&&!K.isArray(O)&&!Pr(O)||A===rd&&K.isArray(O))O&&(w[A]=K.array(O).reduce((F,B)=>(Bt(B)?F.push(oy(B,A)):It(hv(B,A)),F),[]));else{if(A===rd&&null===O)w[A]=null;else if(!(Bt(O)||hc(O)||Pr(O)||bd(O)||mn(O)))return It(hv(O,A)),w;w[A]=tA(O,A,b)}return w},{})}function If(d,f){const m={};for(const b of ut(d)){const w=tA(d[b],b,f,{compositeMark:!0});m[b]=w}return m}function Po(d){const f=[];for(const m of ut(d))if(Jh(d,m)){const w=K.array(d[m]);for(const A of w)Bt(A)?f.push(A):Qh(A)&&f.push(A.condition)}return f}function Zh(d,f,m){if(d)for(const b of ut(d)){const w=d[b];if(K.isArray(w))for(const A of w)f.call(m,A,b);else f.call(m,w,b)}}function cy(d,f){return ut(f).reduce((m,b)=>{switch(b){case tn:case Ue:case AS:case _r:case ta:case Ne:case Me:case he:case Le:case Y:case ie:case Te:case Je:case L:case q:case Il:case re:case Be:case rd:return m;case oc:if("line"===d||"trail"===d)return m;case id:case D0:{const w=f[b];if(K.isArray(w)||Bt(w))for(const A of K.array(w))A.aggregate||m.push(Ut(A,{}));return m}case ge:if("trail"===d)return m;case Q:case ne:case le:case ct:case Qt:case ni:case gr:case Ri:{const w=Dd(f[b]);return w&&!w.aggregate&&m.push(Ut(w,{})),m}}},[])}function Rf(d,f,m,b=!0){return"tooltip"in m?{tooltip:m.tooltip}:{tooltip:[...d.map(({fieldPrefix:O,titlePrefix:F})=>{const B=b?` of ${dy(f)}`:"";return{field:O+f.field,type:f.type,title:mn(F)?{signal:`${F}"${escape(B)}"`}:F+B}}),...Nn(Po(m).map(eA),sn)]}}function dy(d){const{title:f,field:m}=d;return Zn(f,m)}function fy(d,f,m,b,w){const{scale:A,axis:O}=m;return({partName:F,mark:B,positionPrefix:$,endPositionPrefix:U,extraEncoding:ee={}})=>{const ce=dy(m);return Gv(d,F,w,{mark:B,encoding:W(W(W({[f]:W(W(W({field:`${$}_${m.field}`,type:m.type},void 0!==ce?{title:ce}:{}),void 0!==A?{scale:A}:{}),void 0!==O?{axis:O}:{})},K.isString(U)?{[`${f}2`]:{field:`${U}_${m.field}`}}:{}),b),ee)})}}function Gv(d,f,m,b){const{clip:w,color:A,opacity:O}=d,F=d.type;return d[f]||void 0===d[f]&&m[f]?[_t(W({},b),{mark:W(_t(W(W(W(W(W({},m[f]),w?{clip:w}:{}),A?{color:A}:{}),O?{opacity:O}:{}),cc(b.mark)?b.mark:{type:b.mark}),{style:`${F}-${f}`}),K.isBoolean(d[f])?{}:d[f])})]:[]}function Ng(d,f,m){const{encoding:b}=d,w="vertical"===f?"y":"x",O=b[`${w}2`],F=b[`${w}Error`],B=b[`${w}Error2`];return{continuousAxisChannelDef:hy(b[w],m),continuousAxisChannelDef2:hy(O,m),continuousAxisChannelDefError:hy(F,m),continuousAxisChannelDefError2:hy(B,m),continuousAxis:w}}function hy(d,f){if(null!=d&&d.aggregate){const m=d,{aggregate:b}=m,w=gn(m,["aggregate"]);return b!==f&&It(function(d,f){return`Continuous axis should not have customized aggregation function ${d}; ${f} already agregates the axis.`}(b,f)),w}return d}function Iw(d,f){const{mark:m,encoding:b}=d,{x:w,y:A}=b;if(cc(m)&&m.orient)return m.orient;if(Du(w)){if(Du(A)){const O=Bt(w)&&w.aggregate,F=Bt(A)&&A.aggregate;if(!O&&F===f)return"vertical";if(!F&&O===f)return"horizontal";if(O===f&&F===f)throw new Error("Both x and y cannot have aggregate");return Tf(A)&&!Tf(w)?"horizontal":"vertical"}return"horizontal"}if(Du(A))return"vertical";throw new Error(`Need a valid continuous axis for ${f}s`)}const Pg="boxplot",Rw=new uy(Pg,Nw);function Yv(d){return K.isNumber(d)?"tukey":d}function Nw(d,{config:f}){var rh,ID;const a_=d=_t(W({},d),{encoding:If(d.encoding,f)}),{mark:m,params:w}=a_,O=gn(a_,["mark","encoding","params","projection"]),F=cc(m)?m:{type:m};w&&It(BS("boxplot"));const B=null!=(rh=F.extent)?rh:f.boxplot.extent,$=vn("size",F,f),U=Yv(B),{bins:ee,timeUnits:ce,transform:Se,continuousAxisChannelDef:He,continuousAxis:Ge,groupby:dt,aggregate:vt,encodingWithoutContinuousAxis:St,ticksOrient:Rt,boxOrient:an,customTooltipWithoutAggregatedField:Vt}=function(d,f,m){const b=Iw(d,Pg),{continuousAxisChannelDef:w,continuousAxis:A}=Ng(d,b,Pg),O=w.field,F=Yv(f),B=[...Lg(O),{op:"median",field:O,as:`mid_box_${O}`},{op:"min",field:O,as:("min-max"===F?"lower_whisker_":"min_")+O},{op:"max",field:O,as:("min-max"===F?"upper_whisker_":"max_")+O}],$="min-max"===F||"tukey"===F?[]:[{calculate:`datum["upper_box_${O}"] - datum["lower_box_${O}"]`,as:`iqr_${O}`},{calculate:`min(datum["upper_box_${O}"] + datum["iqr_${O}"] * ${f}, datum["max_${O}"])`,as:`upper_whisker_${O}`},{calculate:`max(datum["lower_box_${O}"] - datum["iqr_${O}"] * ${f}, datum["min_${O}"])`,as:`lower_whisker_${O}`}],kn=d.encoding,{[A]:U}=kn,ee=gn(kn,[Pk(A)]),{customTooltipWithoutAggregatedField:ce,filteredEncoding:Se}=function(d){const A=d,{tooltip:f}=A,m=gn(A,["tooltip"]);if(!f)return{filteredEncoding:m};let b,w;if(K.isArray(f)){for(const O of f)O.aggregate?(b||(b=[]),b.push(O)):(w||(w=[]),w.push(O));b&&(m.tooltip=b)}else f.aggregate?m.tooltip=f:w=f;return K.isArray(w)&&1===w.length&&(w=w[0]),{customTooltipWithoutAggregatedField:w,filteredEncoding:m}}(ee),{bins:He,timeUnits:Ge,aggregate:dt,groupby:vt,encoding:St}=Wv(Se,m),Rt="vertical"===b?"horizontal":"vertical",an=b;return{bins:He,timeUnits:Ge,transform:[...He,...Ge,{aggregate:[...dt,...B],groupby:vt},...$],groupby:vt,aggregate:dt,continuousAxisChannelDef:w,continuousAxis:A,encodingWithoutContinuousAxis:St,ticksOrient:Rt,boxOrient:an,customTooltipWithoutAggregatedField:ce}}(d,B,f),A2=St,{color:kn,size:Bn}=A2,ui=gn(A2,["color","size"]),Mi=RL=>fy(F,Ge,He,RL,f.boxplot),Ni=Mi(ui),Ui=Mi(St),Bc=Mi(W(W({},ui),Bn?{size:Bn}:{})),ru=Rf([{fieldPrefix:"min-max"===U?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===U?"lower_whisker_":"min_",titlePrefix:"Min"}],He,St),Na={type:"tick",color:"black",opacity:1,orient:Rt,invalid:null,aria:!1},Bu="min-max"===U?ru:Rf([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],He,St),Vu=[...Ni({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:Bu}),...Ni({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:Bu}),...Ni({partName:"ticks",mark:Na,positionPrefix:"lower_whisker",extraEncoding:Bu}),...Ni({partName:"ticks",mark:Na,positionPrefix:"upper_whisker",extraEncoding:Bu})],wl=[..."tukey"!==U?Vu:[],...Ui({partName:"box",mark:_t(W({type:"bar"},$?{size:$}:{}),{orient:an,invalid:null,ariaRoleDescription:"box"}),positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:ru}),...Bc({partName:"median",mark:_t(W(W({type:"tick",invalid:null},K.isObject(f.boxplot.median)&&f.boxplot.median.color?{color:f.boxplot.median.color}:{}),$?{size:$}:{}),{orient:Rt,aria:!1}),positionPrefix:"mid_box",extraEncoding:ru})];if("min-max"===U)return _t(W({},O),{transform:(null!=(ID=O.transform)?ID:[]).concat(Se),layer:wl});const $u=`datum["lower_box_${He.field}"]`,Vc=`datum["upper_box_${He.field}"]`,jp=`(${Vc} - ${$u})`,Pm=`${$u} - ${B} * ${jp}`,o_=`${Vc} + ${B} * ${jp}`,Lm=`datum["${He.field}"]`,b1={joinaggregate:Lg(He.field),groupby:dt},zp={transform:[{filter:`(${Pm} <= ${Lm}) && (${Lm} <= ${o_})`},{aggregate:[{op:"min",field:He.field,as:`lower_whisker_${He.field}`},{op:"max",field:He.field,as:`upper_whisker_${He.field}`},{op:"min",field:`lower_box_${He.field}`,as:`lower_box_${He.field}`},{op:"max",field:`upper_box_${He.field}`,as:`upper_box_${He.field}`},...vt],groupby:dt}],layer:Vu},Bm=gn(ui,["tooltip"]),{scale:ki,axis:Gd}=He,ju=dy(He),Up=xt(Gd,["title"]),Us=Gv(F,"outliers",f.boxplot,{transform:[{filter:`(${Lm} < ${Pm}) || (${Lm} > ${o_})`}],mark:"point",encoding:W(W(W({[Ge]:W(W(W({field:He.field,type:He.type},void 0!==ju?{title:ju}:{}),void 0!==ki?{scale:ki}:{}),rn(Up)?{}:{axis:Up})},Bm),kn?{color:kn}:{}),Vt?{tooltip:Vt}:{})})[0];let Un;const fa=[...ee,...ce,b1];return Us?Un={transform:fa,layer:[Us,zp]}:(Un=zp,Un.transform.unshift(...fa)),_t(W({},O),{layer:[Un,{transform:Se,layer:wl}]})}function Lg(d){return[{op:"q1",field:d,as:`lower_box_${d}`},{op:"q3",field:d,as:`upper_box_${d}`}]}const Bg="errorbar",mL=new uy(Bg,Lw);function Lw(d,{config:f}){d=_t(W({},d),{encoding:If(d.encoding,f)});const{transform:m,continuousAxisChannelDef:b,continuousAxis:w,encodingWithoutContinuousAxis:A,ticksOrient:O,markDef:F,outerSpec:B,tooltipEncoding:$}=Vw(d,Bg,f);delete A.size;const U=fy(F,w,b,A,f.errorbar),ee=F.thickness,ce=F.size,Se=W(W({type:"tick",orient:O,aria:!1},void 0!==ee?{thickness:ee}:{}),void 0!==ce?{size:ce}:{}),He=[...U({partName:"ticks",mark:Se,positionPrefix:"lower",extraEncoding:$}),...U({partName:"ticks",mark:Se,positionPrefix:"upper",extraEncoding:$}),...U({partName:"rule",mark:W({type:"rule",ariaRoleDescription:"errorbar"},void 0!==ee?{size:ee}:{}),positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:$})];return W(_t(W({},B),{transform:m}),He.length>1?{layer:He}:W({},He[0]))}function Vg(d,f){const{encoding:m}=d;if(function(d){return(si(d.x)||si(d.y))&&!si(d.x2)&&!si(d.y2)&&!si(d.xError)&&!si(d.xError2)&&!si(d.yError)&&!si(d.yError2)}(m))return{orient:Iw(d,f),inputType:"raw"};const b=function(d){return si(d.x2)||si(d.y2)}(m),w=function(d){return si(d.xError)||si(d.xError2)||si(d.yError)||si(d.yError2)}(m),A=m.x,O=m.y;if(b){if(w)throw new Error(`${f} cannot be both type aggregated-upper-lower and aggregated-error`);const F=m.x2,B=m.y2;if(si(F)&&si(B))throw new Error(`${f} cannot have both x2 and y2`);if(si(F)){if(Du(A))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${f}`)}if(si(B)){if(Du(O))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${f}`)}throw new Error("No ranged axis")}{const F=m.xError,$=m.yError,U=m.yError2;if(si(m.xError2)&&!si(F))throw new Error(`${f} cannot have xError2 without xError`);if(si(U)&&!si($))throw new Error(`${f} cannot have yError2 without yError`);if(si(F)&&si($))throw new Error(`${f} cannot have both xError and yError with both are quantiative`);if(si(F)){if(Du(A))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(si($)){if(Du(O))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Vw(d,f,m){var $u,Vc,jp,o_;const wl=d,{mark:b,encoding:w,params:A}=wl,F=gn(wl,["mark","encoding","params","projection"]),B=cc(b)?b:{type:b};A&&It(BS(f));const{orient:$,inputType:U}=Vg(d,f),{continuousAxisChannelDef:ee,continuousAxisChannelDef2:ce,continuousAxisChannelDefError:Se,continuousAxisChannelDefError2:He,continuousAxis:Ge}=Ng(d,$,f),{errorBarSpecificAggregate:dt,postAggregateCalculates:vt,tooltipSummary:St,tooltipTitleWithFieldName:Rt}=function(d,f,m,b,w,A,O,F){let B=[],$=[];const U=f.field;let ee,ce=!1;if("raw"===A){const Se=d.center?d.center:d.extent?"iqr"===d.extent?"median":"mean":F.errorbar.center,He=d.extent?d.extent:"mean"===Se?"stderr":"iqr";if("median"===Se!=("iqr"===He)&&It(function(d,f,m){return`${d} is not usually used with ${f} for ${m}.`}(Se,He,O)),"stderr"===He||"stdev"===He)B=[{op:He,field:U,as:`extent_${U}`},{op:Se,field:U,as:`center_${U}`}],$=[{calculate:`datum["center_${U}"] + datum["extent_${U}"]`,as:`upper_${U}`},{calculate:`datum["center_${U}"] - datum["extent_${U}"]`,as:`lower_${U}`}],ee=[{fieldPrefix:"center_",titlePrefix:hr(Se)},{fieldPrefix:"upper_",titlePrefix:Xv(Se,He,"+")},{fieldPrefix:"lower_",titlePrefix:Xv(Se,He,"-")}],ce=!0;else{let Ge,dt,vt;"ci"===He?(Ge="mean",dt="ci0",vt="ci1"):(Ge="median",dt="q1",vt="q3"),B=[{op:dt,field:U,as:`lower_${U}`},{op:vt,field:U,as:`upper_${U}`},{op:Ge,field:U,as:`center_${U}`}],ee=[{fieldPrefix:"upper_",titlePrefix:No({field:U,aggregate:vt,type:"quantitative"},F,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:No({field:U,aggregate:dt,type:"quantitative"},F,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:No({field:U,aggregate:Ge,type:"quantitative"},F,{allowDisabling:!1})}]}}else{(d.center||d.extent)&&It(function(d,f){return`${f?"extent ":""}${f&&d?"and ":""}${d?"center ":""}${f&&d?"are ":"is "}not needed when data are aggregated.`}(d.center,d.extent)),"aggregated-upper-lower"===A?(ee=[],$=[{calculate:`datum["${m.field}"]`,as:`upper_${U}`},{calculate:`datum["${U}"]`,as:`lower_${U}`}]):"aggregated-error"===A&&(ee=[{fieldPrefix:"",titlePrefix:U}],$=[{calculate:`datum["${U}"] + datum["${b.field}"]`,as:`upper_${U}`}],$.push(w?{calculate:`datum["${U}"] + datum["${w.field}"]`,as:`lower_${U}`}:{calculate:`datum["${U}"] - datum["${b.field}"]`,as:`lower_${U}`}));for(const Se of $)ee.push({fieldPrefix:Se.as.substring(0,6),titlePrefix:gs(gs(Se.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:$,errorBarSpecificAggregate:B,tooltipSummary:ee,tooltipTitleWithFieldName:ce}}(B,ee,ce,Se,He,U,f,m),Pm=w,{[Ge]:an,[$u="x"===Ge?"x2":"y2"]:Vt,[Vc="x"===Ge?"xError":"yError"]:kn,[jp="x"===Ge?"xError2":"yError2"]:Bn}=Pm,ui=gn(Pm,[Pk(Ge),Pk($u),Pk(Vc),Pk(jp)]),{bins:Mi,timeUnits:Ni,aggregate:Ui,groupby:Bc,encoding:ru}=Wv(ui,m),Na=[...Ui,...dt],Bu="raw"!==U?[]:Bc,Vu=Rf(St,ee,ru,Rt);return{transform:[...null!=(o_=F.transform)?o_:[],...Mi,...Ni,...0===Na.length?[]:[{aggregate:Na,groupby:Bu}],...vt],groupby:Bu,continuousAxisChannelDef:ee,continuousAxis:Ge,encodingWithoutContinuousAxis:ru,ticksOrient:"vertical"===$?"horizontal":"vertical",markDef:B,outerSpec:F,tooltipEncoding:Vu}}function Xv(d,f,m){return`${hr(d)} ${m} ${f}`}const py="errorband",Kv=new uy(py,Ma);function Ma(d,{config:f}){d=_t(W({},d),{encoding:If(d.encoding,f)});const{transform:m,continuousAxisChannelDef:b,continuousAxis:w,encodingWithoutContinuousAxis:A,markDef:O,outerSpec:F,tooltipEncoding:B}=Vw(d,py,f),$=O,U=fy($,w,b,A,f.errorband),ee=void 0!==d.encoding.x&&void 0!==d.encoding.y;let ce={type:ee?"area":"rect"},Se={type:ee?"line":"rule"};const He=W(W({},$.interpolate?{interpolate:$.interpolate}:{}),$.tension&&$.interpolate?{tension:$.tension}:{});return ee?(ce=_t(W(W({},ce),He),{ariaRoleDescription:"errorband"}),Se=_t(W(W({},Se),He),{aria:!1})):$.interpolate?It(_v("interpolate")):$.tension&&It(_v("tension")),_t(W({},F),{transform:m,layer:[...U({partName:"band",mark:ce,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:B}),...U({partName:"borders",mark:Se,positionPrefix:"lower",extraEncoding:B}),...U({partName:"borders",mark:Se,positionPrefix:"upper",extraEncoding:B})]})}const $w={};function Qv(d,f,m){const b=new uy(d,f);$w[d]={normalizer:b,parts:m}}Qv(Pg,Nw,["box","median","outliers","rule","ticks"]),Qv(Bg,Lw,["ticks","rule"]),Qv(py,Ma,["band","borders"]);const sA=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],wF={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},zw={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},oA=ut(wF),Uw=ut(zw),Nf=ut({header:1,headerRow:1,headerColumn:1,headerFacet:1}),ll=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Pf="_vgsid_",aA={point:{on:"click",fields:[Pf],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Bo(d){return!(!d||"legend"!==d&&!d.legend)}function ep(d){return Bo(d)&&K.isObject(d)}function $g(d){return!!d.select}function Hw(d){const f=[];for(const b of d||[]){if($g(b))continue;const m=b,{expr:w,bind:A}=m,O=gn(m,["expr","bind"]);if(A&&w){const F=_t(W({},O),{bind:A,init:w});f.push(F)}else{const F=W(W(W({},O),w?{update:w}:{}),A?{bind:A}:{});f.push(F)}}return f}function tp(d){return"concat"in d}function Sd(d){return"vconcat"in d}function Jv(d){return"hconcat"in d}const qw=["background","padding"];function DF(d,f){const m={};for(const b of qw)d&&void 0!==d[b]&&(m[b]=ba(d[b]));return f&&(m.params=d.params),m}function vo(d){return K.isObject(d)&&void 0!==d.step}function eb(d){return d.view||d.width||d.height}const jg=ut({align:1,bounds:1,center:1,columns:1,spacing:1});function Xw(d,f){var m;return null!=(m=d[f])?m:d["width"===f?"continuousWidth":"continuousHeight"]}function Su(d,f){const m=zg(d,f);return vo(m)?m.step:lA}function zg(d,f){var b;return Zn(null!=(b=d[f])?b:d["width"===f?"discreteWidth":"discreteHeight"],{step:d.step})}const lA=20,uA={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:lA},mark:{color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},arc:{},area:{},bar:QS,circle:{},geoshape:{},image:{},line:{},point:{},rect:md,rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:aA,style:{},title:{},facet:{spacing:20},concat:{spacing:20}},Ul=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Kw={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},np={blue:Ul[0],orange:Ul[1],red:Ul[2],teal:Ul[3],green:Ul[4],yellow:Ul[5],purple:Ul[6],pink:Ul[7],brown:Ul[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Jw(d){const f=ut(d||{}),m={};for(const b of f){const w=d[b];m[b]=Ff(w)?zC(w):ba(w)}return m}const cA=[...Mf,...Uv,...Nf,"background","padding","legend","lineBreak","scale","style","title","view"];function ib(d={}){const B=d,{color:f,font:m,fontSize:b,selection:w}=B,A=gn(B,["color","font","fontSize","selection"]),O=K.mergeConfig({},ft(uA),m?function(d){return{text:{font:d},style:{"guide-label":{font:d},"guide-title":{font:d},"group-title":{font:d},"group-subtitle":{font:d}}}}(m):{},f?function(d={}){return{signals:[{name:"color",value:K.isObject(d)?W(W({},np),d):np}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}(f):{},b?function(d){return{signals:[{name:"fontSize",value:K.isObject(d)?W(W({},Kw),d):Kw}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}(b):{},A||{});w&&qe.writeConfig(O,"selection",w,!0);const F=xt(O,cA);for(const $ of["background","lineBreak","padding"])O[$]&&(F[$]=ba(O[$]));for(const $ of Mf)O[$]&&(F[$]=Fr(O[$]));for(const $ of Uv)O[$]&&(F[$]=Jw(O[$]));for(const $ of Nf)O[$]&&(F[$]=Fr(O[$]));return O.legend&&(F.legend=Fr(O.legend)),O.scale&&(F.scale=Fr(O.scale)),O.style&&(F.style=function(d){const f=ut(d),m={};for(const b of f)m[b]=Jw(d[b]);return m}(O.style)),O.title&&(F.title=Fr(O.title)),O.view&&(F.view=Fr(O.view)),F}const Vo=["view",...KS],pc=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],AF=W({view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"]},{area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]});function rb(d){d=ft(d);for(const f of pc)delete d[f];if(d.axis)for(const f in d.axis)Ff(d.axis[f])&&delete d.axis[f];if(d.legend)for(const f of sA)delete d.legend[f];if(d.mark){for(const f of Ov)delete d.mark[f];d.mark.tooltip&&K.isObject(d.mark.tooltip)&&delete d.mark.tooltip}d.params&&(d.signals=(d.signals||[]).concat(Hw(d.params)),delete d.params);for(const f of Vo){for(const b of Ov)delete d[f][b];const m=AF[f];if(m)for(const b of m)delete d[f][b];ip(d,f)}for(const f of ut($w))delete d[f];!function(d){const{titleMarkConfig:f,subtitleMarkConfig:m,subtitle:b}=fg(d.title);rn(f)||(d.style["group-title"]=W(W({},d.style["group-title"]),f)),rn(m)||(d.style["group-subtitle"]=W(W({},d.style["group-subtitle"]),m)),rn(b)?delete d.title:d.title=b}(d);for(const f in d)K.isObject(d[f])&&rn(d[f])&&delete d[f];return rn(d)?void 0:d}function ip(d,f,m,b){"view"===f&&(m="cell");const A=W(W({},b?d[f][b]:d[f]),d.style[null!=m?m:f]);rn(A)||(d.style[null!=m?m:f]=A),b||delete d[f]}function fs(d){return"layer"in d}class gc{map(f,m){return Mg(f)?this.mapFacet(f,m):function(d){return"repeat"in d}(f)?this.mapRepeat(f,m):Jv(f)?this.mapHConcat(f,m):Sd(f)?this.mapVConcat(f,m):tp(f)?this.mapConcat(f,m):this.mapLayerOrUnit(f,m)}mapLayerOrUnit(f,m){if(fs(f))return this.mapLayer(f,m);if(xd(f))return this.mapUnit(f,m);throw new Error(k0(f))}mapLayer(f,m){return _t(W({},f),{layer:f.layer.map(b=>this.mapLayerOrUnit(b,m))})}mapHConcat(f,m){return _t(W({},f),{hconcat:f.hconcat.map(b=>this.map(b,m))})}mapVConcat(f,m){return _t(W({},f),{vconcat:f.vconcat.map(b=>this.map(b,m))})}mapConcat(f,m){const A=f,{concat:b}=A,w=gn(A,["concat"]);return _t(W({},w),{concat:b.map(O=>this.map(O,m))})}mapFacet(f,m){return _t(W({},f),{spec:this.map(f.spec,m)})}mapRepeat(f,m){return _t(W({},f),{spec:this.map(f.spec,m)})}}const dA={zero:1,center:1,normalize:1};const ob=new Set([mo,Sf,Ea,Eg,wg,yo,K0,al,lF,Av]),ab=new Set([Sf,Ea,mo]);function mc(d){return Bt(d)&&"quantitative"===xa(d)&&!d.bin}function Zw(d,f){const m="x"===f?"y":"radius",b=d[f],w=d[m];if(Bt(b)&&Bt(w))if(mc(b)&&mc(w)){if(b.stack)return f;if(w.stack)return m;const F=Bt(b)&&!!b.aggregate;if(F!==(Bt(w)&&!!w.aggregate))return F?f:m;{var A,O;const $=null===(A=b.scale)||void 0===A?void 0:A.type,U=null===(O=w.scale)||void 0===O?void 0:O.type;if($&&"linear"!==$)return m;if(U&&"linear"!==U)return f}}else{if(mc(b))return f;if(mc(w))return m}else{if(mc(b))return f;if(mc(w))return m}}function eE(d,f,m={}){var b,w;const A=cc(d)?d.type:d;if(!ob.has(A))return null;const O=Zw(f,"x")||Zw(f,"theta");if(!O)return null;const F=f[O],B=Bt(F)?Ut(F,{}):void 0;let $=function(d){switch(d){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}(O),U=f[$],ee=Bt(U)?Ut(U,{}):void 0;ee===B&&(ee=void 0,U=void 0,$=void 0);const ce=Sn.reduce((He,Ge)=>{if("tooltip"!==Ge&&Jh(f,Ge)){const dt=f[Ge];for(const vt of K.array(dt)){const St=Dd(vt);if(St.aggregate)continue;const Rt=Ut(St,{});(!Rt||Rt!==ee)&&He.push({channel:Ge,fieldDef:St})}}return He},[]);let Se;if(void 0!==F.stack?Se=K.isBoolean(F.stack)?F.stack?"zero":null:F.stack:ab.has(A)&&(Se="zero"),!Se||!function(d){return d in dA}(Se)||Hv(f)&&0===ce.length)return null;if(null!=F&&null!==(b=F.scale)&&void 0!==b&&b.type&&(null==F||null===(w=F.scale)||void 0===w?void 0:w.type)!==zr_LINEAR){if(m.disallowNonLinearStack)return null;It(function(d){return`Cannot stack non-linear scale (${d}).`}(F.scale.type))}return si(f[yu(O)])?(void 0!==F.stack&&It(function(d){return`Cannot stack "${d}" if there is already "${d}2".`}(O)),null):(Bt(F)&&F.aggregate&&!At(FS,F.aggregate)&&It(function(d){return`Stacking is applied even though the aggregate function is non-summative ("${d}").`}(F.aggregate)),{groupbyChannel:U?$:void 0,groupbyField:ee,fieldChannel:O,impute:null!==F.impute&&Af(A),stackBy:ce,offset:Se})}function MF(d){const b=gn(d,["point","line"]);return ut(b).length>1?b:b.type}function tE(d){for(const f of["line","area","rule","trail"])d[f]&&(d=_t(W({},d),{[f]:xt(d[f],["point","line"])}));return d}function sp(d,f={},m){return"transparent"===d.point?{opacity:0}:d.point?K.isObject(d.point)?d.point:{}:void 0!==d.point?null:f.point||m.shape?K.isObject(f.point)?f.point:{}:void 0}function lb(d,f={}){return d.line?!0===d.line?{}:d.line:void 0!==d.line?null:f.line?!0===f.line?{}:f.line:void 0}class bL{constructor(){hn(this,"name","path-overlay")}hasMatchingType(f,m){if(xd(f)){const{mark:b,encoding:w}=f,A=cc(b)?b:{type:b};switch(A.type){case"line":case"rule":case"trail":return!!sp(A,m[A.type],w);case"area":return!!sp(A,m[A.type],w)||!!lb(A,m[A.type])}}return!1}run(f,m,b){const{config:w}=m,vt=f,{params:A,projection:O,mark:F,encoding:B}=vt,$=gn(vt,["params","projection","mark","encoding"]),U=If(B,w),ee=cc(F)?F:{type:F},ce=sp(ee,w[ee.type],U),Se="area"===ee.type&&lb(ee,w[ee.type]),He=[_t(W({},A?{params:A}:{}),{mark:MF(W(W({},"area"===ee.type&&void 0===ee.opacity&&void 0===ee.fillOpacity?{opacity:.7}:{}),ee)),encoding:xt(U,["shape"])})],Ge=eE(ee,U);let dt=U;if(Ge){const{fieldChannel:St,offset:Rt}=Ge;dt=_t(W({},U),{[St]:W(W({},U[St]),Rt?{stack:Rt}:{})})}return Se&&He.push(_t(W({},O?{projection:O}:{}),{mark:W(W({type:"line"},yn(ee,["clip","interpolate","tension","tooltip"])),Se),encoding:dt})),ce&&He.push(_t(W({},O?{projection:O}:{}),{mark:W(W({type:"point",opacity:1,filled:!0},yn(ee,["clip","tooltip"])),ce),encoding:dt})),b(_t(W({},$),{layer:He}),_t(W({},m),{config:tE(w)}))}}function nE(d,f){return f?Ag(d)?iE(d,f):cb(d,f):d}function ub(d,f){return f?iE(d,f):d}function gy(d,f,m){const b=f[d];return function(d){return d&&!K.isString(d)&&"repeat"in d}(b)?b.repeat in m?_t(W({},f),{[d]:m[b.repeat]}):void It(function(d){return`Unknown repeated value "${d}".`}(b.repeat)):f}function cb(d,f){if(void 0!==(d=gy("field",d,f))){if(null===d)return null;if(vd(d)&&Eu(d.sort)){const m=gy("field",d.sort,f);d=W(W({},d),m?{sort:m}:{})}return d}}function my(d,f){if(Bt(d))return cb(d,f);{const m=gy("datum",d,f);return m!==d&&!m.type&&(m.type="nominal"),m}}function ul(d,f){if(!si(d)){if(Cd(d)){const b=my(d.condition,f);if(b)return _t(W({},d),{condition:b});return gn(d,["condition"])}return d}{const b=my(d,f);if(b)return b;if(bd(d))return{condition:d.condition}}}function iE(d,f){const m={};for(const b in d)if(K.hasOwnProperty(d,b)){const w=d[b];if(K.isArray(w))m[b]=w.map(A=>ul(A,f)).filter(A=>A);else{const A=ul(w,f);void 0!==A&&(m[b]=A)}}return m}class hA{constructor(){hn(this,"name","RuleForRangedLine")}hasMatchingType(f){if(xd(f)){const{encoding:m,mark:b}=f;if("line"===b||cc(b)&&"line"===b.type)for(const w of Vk){const O=m[Or(w)];if(m[w]&&(Bt(O)&&!Kr(O.bin)||hc(O)))return!0}}return!1}run(f,m,b){const{encoding:w,mark:A}=f;return It(function(d,f){return`Line mark is for continuous lines and thus cannot be used with ${d&&f?"x2 and y2":d?"x2":"y2"}. We will use the rule mark (line segments) instead.`}(!!w.x2,!!w.y2)),b(_t(W({},f),{mark:K.isObject(A)?_t(W({},A),{type:"rule"}):"rule"}),m)}}function rE({parentEncoding:d,encoding:f={},layer:m}){let b={};if(d){const w=new Set([...ut(d),...ut(f)]);for(const A of w){const O=f[A],F=d[A];if(si(O)){const B=W(W({},F),O);b[A]=B}else Cd(O)?b[A]=_t(W({},O),{condition:W(W({},F),O.condition)}):O||null===O?b[A]=O:(m||Pr(F)||mn(F)||si(F)||K.isArray(F))&&(b[A]=F)}}else b=f;return!b||rn(b)?void 0:b}function sE(d){const{parentProjection:f,projection:m}=d;return f&&m&&It(function(d){const{parentProjection:f,projection:m}=d;return`Layer's shared projection ${qt(f)} is overridden by a child projection ${qt(m)}.`}({parentProjection:f,projection:m})),null!=m?m:f}function oE(d){return"filter"in d}function yy(d){return void 0!==(null==d?void 0:d.stop)}function pA(d){return"lookup"in d}function ei(d){return"pivot"in d}function mt(d){return"density"in d}function Lf(d){return"quantile"in d}function db(d){return"regression"in d}function cl(d){return"loess"in d}function aE(d){return"sample"in d}function Ug(d){return"window"in d}function zi(d){return"joinaggregate"in d}function Od(d){return"flatten"in d}function lE(d){return"calculate"in d}function uE(d){return"bin"in d}function cE(d){return"impute"in d}function CL(d){return"timeUnit"in d}function gA(d){return"aggregate"in d}function dE(d){return"stack"in d}function Td(d){return"fold"in d}function vy(d,f){const w=d,{transform:m}=w,b=gn(w,["transform"]);if(m){const A=m.map(O=>{if(oE(O))return{filter:by(O,f)};if(uE(O)&&po(O.bin))return _t(W({},O),{bin:hE(O.bin)});if(pA(O)){const F=O.from,{selection:B}=F,$=gn(F,["selection"]);return B?_t(W({},O),{from:W({param:B},$)}):O}return O});return _t(W({},b),{transform:A})}return d}function mA(d,f){var m,b;const w=ft(d);if(Bt(w)&&po(w.bin)&&(w.bin=hE(w.bin)),Ro(w)&&null!==(m=w.scale)&&void 0!==m&&null!==(b=m.domain)&&void 0!==b&&b.selection){const A=w.scale.domain,{selection:F}=A,B=gn(A,["selection"]);w.scale.domain=W(W({},B),F?{param:F}:{})}if(bd(w))if(qe.isArray(w.condition))w.condition=w.condition.map(F=>{const ce=F,{param:$}=ce,ee=gn(ce,["selection","param","test"]);return $?F:_t(W({},ee),{test:by(F,f)})});else{const O=mA(w.condition,f),{param:B}=O,U=gn(O,["selection","param","test"]);w.condition=B?w.condition:_t(W({},U),{test:by(w.condition,f)})}return w}function hE(d){const f=d.extent;if(null!=f&&f.selection){const m=f,{selection:b}=m,w=gn(m,["selection"]);return _t(W({},d),{extent:_t(W({},w),{param:b})})}return d}function by(d,f){const m=b=>Gt(b,w=>{var B,A;const F={param:w,empty:null==(B=f.emptySelections[w])||B};return null!=(A=f.selectionPredicates)[w]||(A[w]=[]),f.selectionPredicates[w].push(F),F});return d.selection?m(d.selection):Gt(d.test||d.filter,b=>b.selection?m(b.selection):b)}class pE extends gc{map(f,m){var w;const b=null!=(w=m.selections)?w:[];if(f.params&&!xd(f)){const A=[];for(const O of f.params)$g(O)?b.push(O):A.push(O);f.params=A}return m.selections=b,super.map(f,yA(f,m))}mapUnit(f,m){var O;const b=m.selections;if(!b||!b.length)return f;const w=(null!=(O=m.path)?O:[]).concat(f.name),A=[];for(const F of b)if(F.views&&F.views.length)for(const B of F.views)(qe.isString(B)&&(B===f.name||w.indexOf(B)>=0)||qe.isArray(B)&&B.map($=>w.indexOf($)).every(($,U,ee)=>-1!==$&&(0===U||$>ee[U-1])))&&A.push(F);else A.push(F);return A.length&&(f.params=A),f}}for(const d of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const f=pE.prototype[d];pE.prototype[d]=function(m,b){return f.call(this,m,yA(m,b))}}function yA(d,f){var m;return d.name?_t(W({},f),{path:(null!=(m=f.path)?m:[]).concat(d.name)}):f}function _A(d,f){void 0===f&&(f=ib(d.config));const m=function(d,f={}){const m={config:f};return FF.map(vA.map(bA.map(d,m),m),m)}(d,f),{width:b,height:w}=d,A=function(d,f,m){let{width:b,height:w}=f;const A=xd(d)||fs(d),O={};A?"container"==b&&"container"==w?(O.type="fit",O.contains="padding"):"container"==b?(O.type="fit-x",O.contains="padding"):"container"==w&&(O.type="fit-y",O.contains="padding"):("container"==b&&(It(WC("width")),b=void 0),"container"==w&&(It(WC("height")),w=void 0));const F=W(W(W({type:"pad"},O),m?IF(m.autosize):{}),IF(d.autosize));if("fit"===F.type&&!A&&(It(NS),F.type="pad"),"container"==b&&!("fit"==F.type||"fit-x"==F.type)&&It(uv("width")),"container"==w&&!("fit"==F.type||"fit-y"==F.type)&&It(uv("height")),!gt(F,{type:"pad"}))return F}(m,{width:b,height:w,autosize:d.autosize},f);return W(W({},m),A?{autosize:A}:{})}const vA=new class extends gc{constructor(...f){super(...f),hn(this,"nonFacetUnitNormalizers",[Rw,mL,Kv,new bL,new hA])}map(f,m){if(xd(f)){const b=Jh(f.encoding,co),w=Jh(f.encoding,Ln),A=Jh(f.encoding,Dn);if(b||w||A)return this.mapFacetedUnit(f,m)}return super.map(f,m)}mapUnit(f,m){const{parentEncoding:b,parentProjection:w}=m,A=ub(f.encoding,m.repeater),O=W(W({},f),A?{encoding:A}:{});if(b||w)return this.mapUnitWithParentEncodingOrProjection(O,m);const F=this.mapLayerOrUnit.bind(this);for(const B of this.nonFacetUnitNormalizers)if(B.hasMatchingType(O,m.config))return B.run(O,m,F);return O}mapRepeat(f,m){return function(d){return!K.isArray(d.repeat)&&d.repeat.layer}(f)?this.mapLayerRepeat(f,m):this.mapNonLayerRepeat(f,m)}mapLayerRepeat(f,m){const ee=f,{repeat:b,spec:w}=ee,A=gn(ee,["repeat","spec"]),{row:O,column:F,layer:B}=b,{repeater:$={},repeaterPrefix:U=""}=m;return O||F?this.mapRepeat(_t(W({},f),{repeat:W(W({},O?{row:O}:{}),F?{column:F}:{}),spec:{repeat:{layer:B},spec:w}}),m):_t(W({},A),{layer:B.map(ce=>{const Se=_t(W({},$),{layer:ce}),He=`${(w.name||"")+U}child__layer_${Pn(ce)}`,Ge=this.mapLayerOrUnit(w,_t(W({},m),{repeater:Se,repeaterPrefix:He}));return Ge.name=He,Ge})})}mapNonLayerRepeat(f,m){var Ge;const He=f,{repeat:b,spec:w,data:A}=He,O=gn(He,["repeat","spec","data"]);!K.isArray(b)&&f.columns&&(f=xt(f,["columns"]),It(Qk("repeat")));const F=[],{repeater:B={},repeaterPrefix:$=""}=m,U=!K.isArray(b)&&b.row||[B?B.row:null],ee=!K.isArray(b)&&b.column||[B?B.column:null],ce=K.isArray(b)&&b||[B?B.repeat:null];for(const dt of ce)for(const vt of U)for(const St of ee){const Rt={repeat:dt,row:vt,column:St,layer:B.layer},an=(w.name||"")+$+"child__"+(K.isArray(b)?`${Pn(dt)}`:(b.row?`row_${Pn(vt)}`:"")+(b.column?`column_${Pn(St)}`:"")),Vt=this.map(w,_t(W({},m),{repeater:Rt,repeaterPrefix:an}));Vt.name=an,F.push(xt(Vt,["data"]))}const Se=K.isArray(b)?f.columns:b.column?b.column.length:1;return _t(W({data:null!=(Ge=w.data)?Ge:A,align:"all"},O),{columns:Se,concat:F})}mapFacet(f,m){const{facet:b}=f;return Ag(b)&&f.columns&&(f=xt(f,["columns"]),It(Qk("facet"))),super.mapFacet(f,m)}mapUnitWithParentEncodingOrProjection(f,m){const{encoding:b,projection:w}=f,{parentEncoding:A,parentProjection:O,config:F}=m,B=sE({parentProjection:O,projection:w}),$=rE({parentEncoding:A,encoding:ub(b,m.repeater)});return this.mapUnit(W(W(W({},f),B?{projection:B}:{}),$?{encoding:$}:{}),{config:F})}mapFacetedUnit(f,m){const St=f.encoding,{row:b,column:w,facet:A}=St,O=gn(St,["row","column","facet"]),Rt=f,{mark:F,width:B,projection:$,height:U,view:ee,params:ce}=Rt,He=gn(Rt,["mark","width","projection","height","view","params","encoding"]),{facetMapping:Ge,layout:dt}=this.getFacetMappingAndLayout({row:b,column:w,facet:A},m),vt=ub(O,m.repeater);return this.mapFacet(_t(W(W({},He),dt),{facet:Ge,spec:W(_t(W(W(W(W({},B?{width:B}:{}),U?{height:U}:{}),ee?{view:ee}:{}),$?{projection:$}:{}),{mark:F,encoding:vt}),ce?{params:ce}:{})}),m)}getFacetMappingAndLayout(f,m){const{row:b,column:w,facet:A}=f;if(b||w){A&&It(function(d){return`Facet encoding dropped as ${d.join(" and ")} ${d.length>1?"are":"is"} also specified.`}([...b?[co]:[],...w?[Ln]:[]]));const $={},U={};for(const ee of[co,Ln]){const ce=f[ee];if(ce){const vt=gn(ce,["align","center","spacing","columns"]);$[ee]=vt;for(const St of["align","center","spacing"])void 0!==ce[St]&&(null!=U[St]||(U[St]={}),U[St][ee]=ce[St])}}return{facetMapping:$,layout:U}}{const B=A,{align:$,center:U,spacing:ee,columns:ce}=B;return{facetMapping:nE(gn(B,["align","center","spacing","columns"]),m.repeater),layout:W(W(W(W({},$?{align:$}:{}),U?{center:U}:{}),ee?{spacing:ee}:{}),ce?{columns:ce}:{})}}}mapLayer(f,A){var O=A,{parentEncoding:m,parentProjection:b}=O,w=gn(O,["parentEncoding","parentProjection"]);const ee=f,{encoding:F,projection:B}=ee,$=gn(ee,["encoding","projection"]),U=_t(W({},w),{parentEncoding:rE({parentEncoding:m,encoding:F,layer:!0}),parentProjection:sE({parentProjection:b,projection:B})});return super.mapLayer($,U)}},bA=new class extends gc{map(f,m){return null!=m.emptySelections||(m.emptySelections={}),null!=m.selectionPredicates||(m.selectionPredicates={}),f=vy(f,m),super.map(f,m)}mapLayerOrUnit(f,m){if((f=vy(f,m)).encoding){const b={};for(const[w,A]of sr(f.encoding))b[w]=mA(A,m);f=_t(W({},f),{encoding:b})}return super.mapLayerOrUnit(f,m)}mapUnit(f,m){const A=f,{selection:b}=A,w=gn(A,["selection"]);return b?_t(W({},w),{params:sr(b).map(([O,F])=>{var Se;const ce=F,{init:B,bind:$,empty:U}=ce,ee=gn(ce,["init","bind","empty"]);"single"===ee.type?(ee.type="point",ee.toggle=!1):"multi"===ee.type&&(ee.type="point"),m.emptySelections[O]="none"!==U;for(const He of Si(null!=(Se=m.selectionPredicates[O])?Se:{}))He.empty="none"!==U;return{name:O,value:B,select:ee,bind:$}})}):f}},FF=new pE;function IF(d){return K.isString(d)?{type:d}:null!=d?d:{}}class Bf{constructor(f={},m={}){this.explicit=f,this.implicit=m}clone(){return new Bf(ft(this.explicit),ft(this.implicit))}combine(){return W(W({},this.explicit),this.implicit)}get(f){return Zn(this.explicit[f],this.implicit[f])}getWithExplicit(f){return void 0!==this.explicit[f]?{explicit:!0,value:this.explicit[f]}:void 0!==this.implicit[f]?{explicit:!1,value:this.implicit[f]}:{explicit:!1,value:void 0}}setWithExplicit(f,{value:m,explicit:b}){void 0!==m&&this.set(f,m,b)}set(f,m,b){return delete this[b?"implicit":"explicit"][f],this[b?"explicit":"implicit"][f]=m,this}copyKeyFromSplit(f,{explicit:m,implicit:b}){void 0!==m[f]?this.set(f,m[f],!0):void 0!==b[f]&&this.set(f,b[f],!1)}copyKeyFromObject(f,m){void 0!==m[f]&&this.set(f,m[f],!0)}copyAll(f){for(const m of ut(f.combine())){const b=f.getWithExplicit(m);this.setWithExplicit(m,b)}}}function Vf(d){return{explicit:!0,value:d}}function Oa(d){return{explicit:!1,value:d}}function RF(d){return(f,m,b,w)=>{const A=d(f.value,m.value);return A>0?f:A<0?m:Ta(f,m,b,w)}}function Ta(d,f,m,b){return d.explicit&&f.explicit&&It(function(d,f,m,b){return`Conflicting ${f.toString()} property "${d.toString()}" (${qt(m)} and ${qt(b)}). Using ${qt(m)}.`}(m,b,d.value,f.value)),d}function Ks(d,f,m,b,w=Ta){return void 0===d||void 0===d.value?f:d.explicit&&!f.explicit?d:f.explicit&&!d.explicit?f:gt(d.value,f.value)?d:w(d,f,m,b)}class CA extends Bf{constructor(f={},m={},b=!1){super(f,m),this.explicit=f,this.implicit=m,this.parseNothing=b}clone(){const f=super.clone();return f.parseNothing=this.parseNothing,f}}function Cy(d){return"url"in d}function gE(d){return"values"in d}function $f(d){return"name"in d&&!Cy(d)&&!gE(d)&&!yc(d)}function yc(d){return d&&(op(d)||mE(d)||Hg(d))}function op(d){return"sequence"in d}function mE(d){return"sphere"in d}function Hg(d){return"graticule"in d}let ir;!function(d){d[d.Raw=0]="Raw",d[d.Main=1]="Main",d[d.Row=2]="Row",d[d.Column=3]="Column",d[d.Lookup=4]="Lookup"}(ir||(ir={}));const wy=/[[\]{}]/,jf={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let Wl,Gl;function dl(d,f,m){return Wl=f||"view",Gl=m||jf,lp(d.trim()).map(vE)}function Qs(d,f,m,b,w){const A=d.length;let F,O=0;for(;f<A;++f){if(F=d[f],!O&&F===m)return f;w&&w.indexOf(F)>=0?--O:b&&b.indexOf(F)>=0&&++O}return f}function lp(d){const f=[],m=d.length;let b=0,w=0;for(;w<m;)w=Qs(d,w,",","[{","]}"),f.push(d.substring(b,w).trim()),b=++w;if(0===f.length)throw"Empty event selector: "+d;return f}function vE(d){return"["===d[0]?function(d){const f=d.length;let b,m=1;if(m=Qs(d,m,"]","[","]"),m===f)throw"Empty between selector: "+d;if(b=lp(d.substring(1,m)),2!==b.length)throw"Between selector must have two elements: "+d;if(">"!==(d=d.slice(m+1).trim())[0])throw"Expected '>' after between selector: "+d;b=b.map(vE);const w=vE(d.slice(1).trim());return w.between?{between:b,stream:w}:(w.between=b,w)}(d):function(d){const f={source:Wl},m=[];let B,$,b=[0,0],w=0,A=0,O=d.length,F=0;if("}"===d[O-1]){if(F=d.lastIndexOf("{"),!(F>=0))throw"Unmatched right brace: "+d;try{b=function(d){const f=d.split(",");if(!d.length||f.length>2)throw d;return f.map(m=>{const b=+m;if(b!=b)throw d;return b})}(d.substring(F+1,O-1))}catch(U){throw"Invalid throttle specification: "+d}O=(d=d.slice(0,F).trim()).length,F=0}if(!O)throw d;if("@"===d[0]&&(w=++F),B=Qs(d,F,":"),B<O&&(m.push(d.substring(A,B).trim()),A=F=++B),F=Qs(d,F,"["),F===O)m.push(d.substring(A,O).trim());else if(m.push(d.substring(A,F).trim()),$=[],A=++F,A===O)throw"Unmatched left bracket: "+d;for(;F<O;){if(F=Qs(d,F,"]"),F===O)throw"Unmatched left bracket: "+d;if($.push(d.substring(A,F).trim()),F<O-1&&"["!==d[++F])throw"Expected left bracket: "+d;A=++F}if(!(O=m.length)||wy.test(m[O-1]))throw"Invalid event selector: "+d;return O>1?(f.type=m[1],w?f.markname=m[0].slice(1):function(d){return Gl[d]}(m[0])?f.marktype=m[0]:f.source=m[0]):f.type=m[0],"!"===f.type.slice(-1)&&(f.consume=!0,f.type=f.type.slice(0,-1)),null!=$&&(f.filter=$),b[0]&&(f.throttle=b[0]),b[1]&&(f.debounce=b[1]),f}(d)}function zf(d,f=!0,m=K.identity){if(K.isArray(d)){const b=d.map(w=>zf(w,f,m));return f?`[${b.join(", ")}]`:b}return Ph(d)?m(f?$l(d):function(d){const f=lw(d,!0);return d.utc?+new Date(Date.UTC(...f)):+new Date(...f)}(d)):f?m(qt(d)):d}function SA(d,f){var m;for(const b of Si(null!=(m=d.component.selection)?m:{})){const w=b.name;let A=`${w}${vc}, ${"global"===b.resolve?"true":`{unit: ${Tu(d)}}`}`;for(const O of Oy)!O.defined(b)||(O.signals&&(f=O.signals(d,b,f)),O.modifyExpr&&(A=O.modifyExpr(d,b,A)));f.push({name:w+Gf,on:[{events:{signal:b.name+vc},update:`modify(${K.stringValue(b.name+Wf)}, ${A})`}]})}return qg(f)}function Ey(d,f){if(d.component.selection&&ut(d.component.selection).length){const m=K.stringValue(d.getName("cell"));f.unshift({name:"facet",value:{},on:[{events:dl("mousemove","scope"),update:`isTuple(facet) ? facet : group(${m}).datum`}]})}return qg(f)}function OA(d,f){var m;for(const b of Si(null!=(m=d.component.selection)?m:{}))for(const w of Oy)w.defined(b)&&w.marks&&(f=w.marks(d,b,f));return f}function qg(d){return d.map(f=>(f.on&&!f.on.length&&delete f.on,f))}class Zi{constructor(f,m){this.debugName=m,hn(this,"_children",[]),hn(this,"_parent",null),hn(this,"_hash",void 0),f&&(this.parent=f)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(f){this._parent=f,f&&f.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(f,m){this._children.includes(f)?It("Attempt to add the same child twice."):void 0!==m?this._children.splice(m,0,f):this._children.push(f)}removeChild(f){const m=this._children.indexOf(f);return this._children.splice(m,1),m}remove(){let f=this._parent.removeChild(this);for(const m of this._children)m._parent=this._parent,this._parent.addChild(m,f++)}insertAsParentOf(f){const m=f.parent;m.removeChild(this),this.parent=m,f.parent=this}swapWithParent(){const f=this._parent,m=f.parent;for(const b of this._children)b.parent=f;this._children=[],f.removeChild(this),f.parent.removeChild(f),this.parent=m,f.parent=this}}class ts extends Zi{clone(){const f=new this.constructor;return f.debugName=`clone_${this.debugName}`,f._source=this._source,f._name=`clone_${this._name}`,f.type=this.type,f.refCounts=this.refCounts,f.refCounts[f._name]=0,f}constructor(f,m,b,w){super(f,m),this.type=b,this.refCounts=w,hn(this,"_source",void 0),hn(this,"_name",void 0),this._source=this._name=m,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return void 0===this._hash&&(this._hash=`Output ${us()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(f){this._source=f}}class xr extends Zi{clone(){return new xr(null,ft(this.formula))}constructor(f,m){super(f),this.formula=m}static makeFromEncoding(f,m){const b=m.reduceFieldDef((w,A)=>{const{field:O,timeUnit:F}=A;if(F){const B=Ut(A,{forAs:!0});w[sn({as:B,field:O,timeUnit:F})]={as:B,field:O,timeUnit:F}}return w},{});return rn(b)?null:new xr(f,b)}static makeFromTransform(f,m){const F=W({},m),{timeUnit:b}=F,w=gn(F,["timeUnit"]),A=Fo(b),O=_t(W({},w),{timeUnit:A});return new xr(f,{[sn(O)]:O})}merge(f){this.formula=W({},this.formula);for(const m in f.formula)this.formula[m]||(this.formula[m]=f.formula[m]);for(const m of f.children)f.removeChild(m),m.parent=this;f.remove()}removeFormulas(f){const m={};for(const[b,w]of sr(this.formula))f.has(w.as)||(m[b]=w);this.formula=m}producedFields(){return new Set(Si(this.formula).map(f=>f.as))}dependentFields(){return new Set(Si(this.formula).map(f=>f.field))}hash(){return`TimeUnit ${sn(this.formula)}`}assemble(){const f=[];for(const b of Si(this.formula)){const{field:w,as:A,timeUnit:O}=b,m=Fo(O),{unit:F,utc:B}=m,$=gn(m,["unit","utc"]);f.push(_t(W(W(W({field:Ii(w),type:"timeunit"},F?{units:qS(F)}:{}),B?{timezone:"utc"}:{}),$),{as:[A,`${A}_end`]}))}return f}}const Js="_tuple_fields";class TA{constructor(...f){hn(this,"hasChannel",void 0),hn(this,"hasField",void 0),hn(this,"timeUnit",void 0),hn(this,"items",void 0),this.items=f,this.hasChannel={},this.hasField={}}}const wE={defined:()=>!0,parse:(d,f,m)=>{var He;const b=f.name,w=null!=(He=f.project)?He:f.project=new TA,A={},O={},F=new Set,B=(Ge,dt)=>{const vt="visual"===dt?Ge.channel:Ge.field;let St=Pn(`${b}_${vt}`);for(let Rt=1;F.has(St);Rt++)St=Pn(`${b}_${vt}_${Rt}`);return F.add(St),{[dt]:St}},$=f.type,U=d.config.selection[$],ee=void 0!==m.value?K.array(m.value):null;let{fields:ce,encodings:Se}=K.isObject(m.select)?m.select:{};if(!ce&&!Se&&ee)for(const Ge of ee)if(K.isObject(Ge))for(const dt of ut(Ge))na(dt)?(Se||(Se=[])).push(dt):"interval"===$?(It('Interval selections should be initialized using "x" and/or "y" keys.'),Se=U.encodings):(ce||(ce=[])).push(dt);!ce&&!Se&&(Se=U.encodings,"fields"in U&&(ce=U.fields));for(const Ge of null!=Se?Se:[]){const dt=d.fieldDef(Ge);if(dt){let vt=dt.field;if(dt.aggregate){It(LS(Ge,dt.aggregate));continue}if(!vt){It(GC(Ge));continue}if(dt.timeUnit){vt=d.vgField(Ge);const St={timeUnit:dt.timeUnit,as:vt,field:dt.field};O[sn(St)]=St}if(!A[vt]){let St="E";"interval"===$?ol(d.getScaleComponent(Ge).get("type"))&&(St="R"):dt.bin&&(St="R-RE");const Rt={field:vt,channel:Ge,type:St};Rt.signals=W(W({},B(Rt,"data")),B(Rt,"visual")),w.items.push(A[vt]=Rt),w.hasField[vt]=w.hasChannel[Ge]=A[vt]}}else It(GC(Ge))}for(const Ge of null!=ce?ce:[]){if(w.hasField[Ge])continue;const dt={type:"E",field:Ge};dt.signals=W({},B(dt,"data")),w.items.push(dt),w.hasField[Ge]=dt}ee&&(f.init=ee.map(Ge=>w.items.map(dt=>K.isObject(Ge)?void 0!==Ge[dt.channel]?Ge[dt.channel]:Ge[dt.field]:Ge))),rn(O)||(w.timeUnit=new xr(null,O))},signals:(d,f,m)=>{const b=f.name+Js;return m.filter(A=>A.name===b).length>0?m:m.concat({name:b,value:f.project.items.map(A=>{const B=gn(A,["signals","hasLegend"]);return B.field=Ii(B.field),B})})}},Uf={defined:d=>"interval"===d.type&&"global"===d.resolve&&d.bind&&"scales"===d.bind,parse:(d,f)=>{const m=f.scales=[];for(const b of f.project.items){const w=b.channel;if(!kr(w))continue;const A=d.getScaleComponent(w),O=A?A.get("type"):void 0;A&&ol(O)?(A.set("selectionExtent",{param:f.name,field:b.field},!0),m.push(b)):It("Scale bindings are currently only supported for scales with unbinned, continuous domains.")}},topLevelSignals:(d,f,m)=>{const b=f.scales.filter(O=>0===m.filter(F=>F.name===O.signals.data).length);if(!d.parent||Yg(d)||0===b.length)return m;const w=m.filter(O=>O.name===f.name)[0];let A=w.update;if(A.indexOf(xb)>=0)w.update=`{${b.map(O=>`${K.stringValue(Ii(O.field))}: ${O.signals.data}`).join(", ")}}`;else{for(const O of b){const F=`${K.stringValue(Ii(O.field))}: ${O.signals.data}`;A.includes(F)||(A=`${A.substring(0,A.length-1)}, ${F}}`)}w.update=A}return m.concat(b.map(O=>({name:O.signals.data})))},signals:(d,f,m)=>{if(d.parent&&!Yg(d))for(const b of f.scales){const w=m.filter(A=>A.name===b.signals.data)[0];w.push="outer",delete w.value,delete w.update}return m}};function EE(d,f){return`domain(${K.stringValue(d.scaleName(f))})`}function Yg(d){return d.parent&&Pp(d.parent)&&!d.parent.parent}const ka="_brush",Dy="_scale_trigger",hb={defined:d=>"interval"===d.type,signals:(d,f,m)=>{const b=f.name,w=b+Js,A=Uf.defined(f),O=f.init?f.init[0]:null,F=[],B=[];if(f.translate&&!A){const U=`!event.item || event.item.mark.name !== ${K.stringValue(b+ka)}`;xE(f,(ee,ce)=>{var Ge,Se;const He=K.array(null!=(Ge=(Se=ce.between[0]).filter)?Ge:Se.filter=[]);return He.includes(U)||He.push(U),ee})}f.project.items.forEach((U,ee)=>{const ce=U.channel;if(ce!==tn&&ce!==Ue)return void It("Interval selections only support x and y encoding channels.");const He=function(d,f,m,b){const w=m.channel,A=m.signals.visual,O=m.signals.data,F=Uf.defined(f),B=K.stringValue(d.scaleName(w)),$=d.getScaleComponent(w),U=$?$.get("type"):void 0,ee=Ge=>`scale(${B}, ${Ge})`,ce=d.getSizeSignalRef(w===tn?"width":"height").signal,Se=`${w}(unit)`,He=xE(f,(Ge,dt)=>[...Ge,{events:dt.between[0],update:`[${Se}, ${Se}]`},{events:dt,update:`[${A}[0], clamp(${Se}, 0, ${ce})]`}]);return He.push({events:{signal:f.name+Dy},update:ol(U)?`[${ee(`${O}[0]`)}, ${ee(`${O}[1]`)}]`:"[0, 0]"}),F?[{name:O,on:[]}]:[_t(W({name:A},b?{init:zf(b,!0,ee)}:{value:[]}),{on:He}),_t(W({name:O},b?{init:zf(b)}:{}),{on:[{events:{signal:A},update:`${A}[0] === ${A}[1] ? null : invert(${B}, ${A})`}]})]}(d,f,U,O?O[ee]:null),Ge=U.signals.data,dt=U.signals.visual,vt=K.stringValue(d.scaleName(ce)),Rt=ol(d.getScaleComponent(ce).get("type"))?"+":"";m.push(...He),F.push(Ge),B.push({scaleName:d.scaleName(ce),expr:`(!isArray(${Ge}) || (${Rt}invert(${vt}, ${dt})[0] === ${Rt}${Ge}[0] && ${Rt}invert(${vt}, ${dt})[1] === ${Rt}${Ge}[1]))`})}),!A&&B.length&&m.push({name:b+Dy,value:{},on:[{events:B.map(U=>({scale:U.scaleName})),update:`${B.map(U=>U.expr).join(" && ")} ? ${b+Dy} : {}`}]});const $=`unit: ${Tu(d)}, fields: ${w}, values`;return m.concat(W(W({name:b+vc},O?{init:`{${$}: ${zf(O)}}`}:{}),F.length?{on:[{events:[{signal:F.join(" || ")}],update:`${F.join(" && ")} ? {${$}: [${F}]} : null`}]}:{}))},marks:(d,f,m)=>{const b=f.name,{x:w,y:A}=f.project.hasChannel,O=w&&w.signals.visual,F=A&&A.signals.visual,B=`data(${K.stringValue(f.name+Wf)})`;if(Uf.defined(f)||!w&&!A)return m;const $={x:void 0!==w?{signal:`${O}[0]`}:{value:0},y:void 0!==A?{signal:`${F}[0]`}:{value:0},x2:void 0!==w?{signal:`${O}[1]`}:{field:{group:"width"}},y2:void 0!==A?{signal:`${F}[1]`}:{field:{group:"height"}}};if("global"===f.resolve)for(const dt of ut($))$[dt]=[W({test:`${B}.length && ${B}[0].unit === ${Tu(d)}`},$[dt]),{value:0}];const Ge=f.mark,{fill:U,fillOpacity:ee,cursor:ce}=Ge,Se=gn(Ge,["fill","fillOpacity","cursor"]),He=ut(Se).reduce((dt,vt)=>(dt[vt]=[{test:[void 0!==w&&`${O}[0] !== ${O}[1]`,void 0!==A&&`${F}[0] !== ${F}[1]`].filter(St=>St).join(" && "),value:Se[vt]},{value:null}],dt),{});return[{name:`${b+ka}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:U},fillOpacity:{value:ee}},update:$}},...m,{name:b+ka,type:"rect",clip:!0,encode:{enter:_t(W({},ce?{cursor:{value:ce}}:{}),{fill:{value:"transparent"}}),update:W(W({},$),He)}}]}};function xE(d,f){return d.events.reduce((m,b)=>b.between?f(m,b):(It(`${b} is not an ordered event stream for interval selections.`),m),[])}const pb={defined:d=>"point"===d.type,signals:(d,f,m)=>{var ce;const b=f.name,w=b+Js,O="(item().isVoronoi ? datum.datum : datum)",F=f.project.items.map(Se=>{const He=d.fieldDef(Se.channel);return null!=He&&He.bin?`[${O}[${K.stringValue(d.vgField(Se.channel,{}))}], ${O}[${K.stringValue(d.vgField(Se.channel,{binSuffix:"end"}))}]]`:`${O}[${K.stringValue(Se.field)}]`}).join(", "),B=`unit: ${Tu(d)}, fields: ${w}, values`,$=f.events,U=Si(null!=(ce=d.component.selection)?ce:{}).reduce((Se,He)=>"interval"===He.type?Se.concat(He.name+ka):Se,[]).map(Se=>`indexof(item().mark.name, '${Se}') < 0`).join(" && ");return m.concat([{name:b+vc,on:$?[{events:$,update:`${"datum && item().mark.marktype !== 'group'"+(U?` && ${U}`:"")} ? {${B}: [${F}]} : null`,force:!0}]:[]}])}};function up(d,f,m,b){const w=bd(f)&&f.condition,A=b(f);return w?{[m]:[...K.array(w).map(B=>{const $=b(B);if(function(d){return d.param}(B)){const{param:U,empty:ee}=B,ce=YE(d,{param:U,empty:ee});return W({test:ce},$)}{const U=By(d,B.test);return W({test:U},$)}}),...void 0!==A?[A]:[]]}:void 0!==A?{[m]:A}:{}}function gb(d,f="text"){return up(d,d.encoding[f],f,b=>cp(b,d.config))}function cp(d,f,m="datum"){if(d){if(Pr(d))return Nr(d.value);if(si(d)){const{format:b,formatType:w}=Ed(d);return _d({fieldOrDatumDef:d,format:b,formatType:w,expr:m,config:f})}}}function SE(d,f={}){const{encoding:m,markDef:b,config:w,stack:A}=d,O=m.tooltip;if(K.isArray(O))return{tooltip:mb({tooltip:O},A,w,f)};{const F=f.reactiveGeom?"datum.datum":"datum";return up(d,O,"tooltip",B=>{const $=cp(B,w,F);if($)return $;if(null===B)return;let U=vn("tooltip",b,w);return!0===U&&(U={content:"encoding"}),K.isString(U)?{value:U}:K.isObject(U)?mn(U)?U:"encoding"===U.content?mb(m,A,w,f):{signal:F}:void 0})}}function Ns(d,f,m,{reactiveGeom:b}={}){const w={},A=b?"datum.datum":"datum",O=[];function F($,U){const ee=Or(U),ce=Sa($)?$:_t(W({},$),{type:d[ee].type}),Se=ce.title||jv(ce,m),He=K.array(Se).join(", ");let Ge;if(el(U)){const dt="x"===U?"x2":"y2",vt=Dd(d[dt]);if(Kr(ce.bin)&&vt){const St=Ut(ce,{expr:A}),Rt=Ut(vt,{expr:A}),{format:an,formatType:Vt}=Ed(ce);Ge=Fv(St,Rt,an,Vt,m),w[dt]=!0}else if(f&&f.fieldChannel===U&&"normalize"===f.offset){const{format:St,formatType:Rt}=Ed(ce);Ge=_d({fieldOrDatumDef:ce,format:St,formatType:Rt,expr:A,config:m,normalizeStack:!0}).signal}}null!=Ge||(Ge=cp(ce,m,A).signal),O.push({channel:U,key:He,value:Ge})}Zh(d,($,U)=>{Bt($)?F($,U):Qh($)&&F($.condition,U)});const B={};for(const{channel:$,key:U,value:ee}of O)!w[$]&&!B[U]&&(B[U]=ee);return B}function mb(d,f,m,{reactiveGeom:b}={}){const w=Ns(d,f,m,{reactiveGeom:b}),A=sr(w).map(([O,F])=>`"${O}": ${F}`);return A.length>0?{signal:`{${A.join(", ")}}`}:void 0}function AE(d){const{markDef:f,config:m}=d,b=vn("aria",f,m);return!1===b?{}:W(W(W({},b?{aria:b}:{}),function(d){const{mark:f,markDef:m,config:b}=d;if(!1===b.aria)return{};const w=vn("ariaRoleDescription",m,b);return null!=w?{ariaRoleDescription:{value:w}}:f in av?{}:{ariaRoleDescription:{value:f}}}(d)),function(d){const{encoding:f,markDef:m,config:b,stack:w}=d,A=f.description;if(A)return up(d,A,"description",B=>cp(B,d.config));const O=vn("description",m,b);if(null!=O)return{description:Nr(O)};if(!1===b.aria)return{};const F=Ns(f,w,b);return rn(F)?void 0:{description:{signal:sr(F).map(([B,$],U)=>`"${U>0?"; ":""}${B}: " + (${$})`).join(" + ")}}}(d))}function ur(d,f,m={}){const{markDef:b,encoding:w,config:A}=f,{vgChannel:O}=m;let{defaultRef:F,defaultValue:B}=m;return void 0===F&&(null!=B||(B=vn(d,b,A,{vgChannel:O,ignoreVgConfig:!0})),void 0!==B&&(F=Nr(B))),up(f,w[d],null!=O?O:d,U=>Xh({channel:d,channelDef:U,markDef:b,config:A,scaleName:f.scaleName(d),scale:f.getScaleComponent(d),stack:null,defaultRef:F}))}function xy(d,f={filled:void 0}){var ce,Se,He,Ge;const{markDef:m,encoding:b,config:w}=d,{type:A}=m,O=null!=(ce=f.filled)?ce:vn("filled",m,w),F=At(["bar","point","circle","square","geoshape"],A)?"transparent":void 0,B=null!=(He=null!=(Se=vn(!0===O?"color":void 0,m,w,{vgChannel:"fill"}))?Se:w.mark[!0===O&&"color"])?He:F,$=null!=(Ge=vn(!1===O?"color":void 0,m,w,{vgChannel:"stroke"}))?Ge:w.mark[!1===O&&"color"],U=O?"fill":"stroke",ee=W(W({},B?{fill:Nr(B)}:{}),$?{stroke:Nr($)}:{});return m.color&&(O?m.fill:m.stroke)&&It(Zk("property",{fill:"fill"in m,stroke:"stroke"in m})),W(W(W(W({},ee),ur("color",d,{vgChannel:U,defaultValue:O?B:$})),ur("fill",d,{defaultValue:b.fill?B:void 0})),ur("stroke",d,{defaultValue:b.stroke?$:void 0}))}function Xg(d,f){const b=f[function(d){switch(d){case tn:return"xOffset";case Ue:return"yOffset";case Ne:return"x2Offset";case Me:return"y2Offset";case he:return"thetaOffset";case Y:return"radiusOffset";case Le:return"theta2Offset";case ie:return"radius2Offset"}}(d)];if(b)return b}function $o(d,f,{defaultPos:m,vgChannel:b}){const{encoding:w,markDef:A,config:O,stack:F}=f,B=w[d],$=w[yu(d)],U=f.scaleName(d),ee=f.getScaleComponent(d),ce=Xg(d,A),Se=yb({model:f,defaultPos:m,channel:d,scaleName:U,scale:ee}),He=!B&&el(d)&&(w.latitude||w.longitude)?{field:f.getName(d)}:function(d){const{channel:f,channelDef:m,scaleName:b,stack:w,offset:A,markDef:O}=d;if(si(m)&&w&&f===w.fieldChannel){if(Bt(m)){let F=m.bandPosition;if(void 0===F&&"text"===O.type&&("radius"===f||"theta"===f)&&(F=.5),void 0!==F)return dc({scaleName:b,fieldOrDatumDef:m,startSuffix:"start",bandPosition:F,offset:A})}return yd(m,b,{suffix:"end"},{offset:A})}return Cu(d)}({channel:d,channelDef:B,channel2Def:$,markDef:A,config:O,scaleName:U,scale:ee,stack:F,offset:ce,defaultRef:Se});return He?{[b||d]:He}:void 0}function yb({model:d,defaultPos:f,channel:m,scaleName:b,scale:w}){const{markDef:A,config:O}=d;return()=>{const F=Or(m),B=od(m),$=vn(m,A,O,{vgChannel:B});if(void 0!==$)return xg(m,$);switch(f){case"zeroOrMin":case"zeroOrMax":if(b){const U=w.get("type");if(!At([zr_LOG,zr_TIME,zr_UTC],U)&&w.domainDefinitelyIncludesZero())return{scale:b,value:0}}if("zeroOrMin"===f)return"y"===F?{field:{group:"height"}}:{value:0};switch(F){case"radius":return{signal:`min(${d.width.signal},${d.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":{const U=d[_u(m)];return _t(W({},U),{mult:.5})}}}}const ME={left:"x",center:"xc",right:"x2"},OE={top:"y",middle:"yc",bottom:"y2"};function _b(d,f,m,b="middle"){if("radius"===d||"theta"===d)return od(d);const w="x"===d?"align":"baseline",A=vn(w,f,m);let O;return mn(A)?(It(function(d){return`The ${d} for range marks cannot be an expression`}(w)),O=void 0):O=A,"x"===d?ME[O||("top"===b?"left":"center")]:OE[O||b]}function vb(d,f,{defaultPos:m,defaultPos2:b,range:w}){return w?TE(d,f,{defaultPos:m,defaultPos2:b}):$o(d,f,{defaultPos:m})}function TE(d,f,{defaultPos:m,defaultPos2:b}){const{markDef:w,config:A}=f,O=yu(d),F=_u(d),B=function(d,f,m){const{encoding:b,mark:w,markDef:A,stack:O,config:F}=d,B=Or(m),$=_u(m),U=od(m),ee=b[B],ce=d.scaleName(B),Se=d.getScaleComponent(B),He=Xg(m in b||m in A?m:B,d.markDef);if(!ee&&("x2"===m||"y2"===m)&&(b.latitude||b.longitude)){const dt=_u(m),vt=d.markDef[dt];return null!=vt?{[dt]:{value:vt}}:{[U]:{field:d.getName(m)}}}const Ge=function({channel:d,channelDef:f,channel2Def:m,markDef:b,config:w,scaleName:A,scale:O,stack:F,offset:B,defaultRef:$}){return si(f)&&F&&d.charAt(0)===F.fieldChannel.charAt(0)?yd(f,A,{suffix:"start"},{offset:B}):Cu({channel:d,channelDef:m,scaleName:A,scale:O,stack:F,markDef:b,config:w,offset:B,defaultRef:$})}({channel:m,channelDef:ee,channel2Def:b[m],markDef:A,config:F,scaleName:ce,scale:Se,stack:O,offset:He,defaultRef:void 0});return void 0!==Ge?{[U]:Ge}:bb(m,A)||bb(m,{[m]:Fh(m,A,F.style),[$]:Fh($,A,F.style)})||bb(m,F[w])||bb(m,F.mark)||{[U]:yb({model:d,defaultPos:f,channel:m,scaleName:ce,scale:Se})()}}(f,b,O),$=B[F]?_b(d,w,A):od(d);return W(W({},$o(d,f,{defaultPos:m,vgChannel:$})),B)}function bb(d,f){const m=_u(d),b=od(d);if(void 0!==f[b])return{[b]:xg(d,f[b])};if(void 0!==f[d])return{[b]:xg(d,f[d])};if(f[m]){const w=f[m];if(!Ke(w))return{[m]:xg(d,w)};It(function(d){return`Position range does not support relative band size for ${d}.`}(m))}}function Yl(d,f,m){var vt,St,Rt;const{config:b,encoding:w,markDef:A}=d,O=yu(f),F=_u(f),B=w[f],$=w[O],U=d.getScaleComponent(f),ee=U?U.get("type"):void 0,ce=d.scaleName(f),Se=A.orient,He=null!=(St=null!=(vt=w[F])?vt:w.size)?St:vn("size",A,b,{vgChannel:F}),Ge="bar"===m&&("x"===f?"vertical"===Se:"horizontal"===Se);if(!Bt(B)||!(Ji(B.bin)||Kr(B.bin)||B.timeUnit&&!$)||He&&!Ke(He)||aa(ee))return(si(B)&&aa(ee)||Ge)&&!$?function(d,f,m){const{markDef:b,encoding:w,config:A,stack:O}=m,F=b.orient,B=m.scaleName(f),$=m.getScaleComponent(f),U=_u(f),ee=yu(f),ce="horizontal"===F&&"y"===f||"vertical"===F&&"x"===f;let Se;(w.size||b.size)&&(ce?Se=ur("size",m,{vgChannel:U,defaultRef:Nr(b.size)}):It(function(d){return`Cannot apply size to non-oriented mark "${d}".`}(b.type)));const He=Pv({channel:f,fieldDef:d,markDef:b,config:A,scaleType:null==$?void 0:$.get("type"),useVlSizeChannel:ce});Se=Se||{[U]:Cb(U,B,$,A,He)};const dt=_b(f,b,A,"band"===(null==$?void 0:$.get("type"))&&"band"in Se[U]?"top":"middle"),vt="xc"===dt||"yc"===dt,St=Xg(f,b),Rt=Cu({channel:f,channelDef:d,markDef:b,config:A,scaleName:B,scale:$,stack:O,offset:St,defaultRef:yb({model:m,defaultPos:"mid",channel:f,scaleName:B,scale:$}),bandPosition:vt?.5:mn(He)?{signal:`(1-${He})/2`}:Ke(He)?(1-He.band)/2:0});if(U)return W({[dt]:Rt},Se);{const an=od(ee),Vt=Se[U],kn=St?_t(W({},Vt),{offset:St}):Vt;return{[dt]:Rt,[an]:K.isArray(Rt)?[Rt[0],_t(W({},Rt[1]),{offset:kn})]:_t(W({},Rt),{offset:kn})}}}(B,f,d):TE(f,d,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"});{var dt;const an=Pv({channel:f,fieldDef:B,markDef:A,config:b,scaleType:ee}),Vt=null===(dt=d.component.axes[f])||void 0===dt?void 0:dt[0];return function({fieldDef:d,fieldDef2:f,channel:m,bandSize:b,scaleName:w,markDef:A,spacing:O=0,axisTranslate:F,reverse:B,config:$}){const U=yu(m),ee=od(m),ce=od(U),Se=Xg(m,A),He=mn(b)?{signal:`(1-${b.signal})/2`}:Ke(b)?(1-b.band)/2:.5;if(Ji(d.bin)||d.timeUnit)return{[ce]:wb({channel:m,fieldDef:d,scaleName:w,markDef:A,bandPosition:He,offset:fp(U,O,B,F,Se),config:$}),[ee]:wb({channel:m,fieldDef:d,scaleName:w,markDef:A,bandPosition:mn(He)?{signal:`1-${He.signal}`}:1-He,offset:fp(m,O,B,F,Se),config:$})};if(Kr(d.bin)){const Ge=yd(d,w,{},{offset:fp(U,O,B,F,Se)});if(Bt(f))return{[ce]:Ge,[ee]:yd(f,w,{},{offset:fp(m,O,B,F,Se)})};if(po(d.bin)&&d.bin.step)return{[ce]:Ge,[ee]:{signal:`scale("${w}", ${Ut(d,{expr:"datum"})} + ${d.bin.step})`,offset:fp(m,O,B,F,Se)}}}It(cd(U))}({fieldDef:B,fieldDef2:$,channel:f,markDef:A,scaleName:ce,bandSize:an,axisTranslate:null!=(Rt=null==Vt?void 0:Vt.get("translate"))?Rt:.5,spacing:el(f)?vn("binSpacing",A,b):void 0,reverse:U.get("reverse"),config:b})}}function Cb(d,f,m,b,w){if(Ke(w)){if(!m)return{mult:w.band,field:{group:d}};{const O=m.get("type");if("band"===O)return{scale:f,band:w.band};1!==w.band&&(It(function(d){return`Cannot use the relative band size with ${d} scale.`}(O)),w=void 0)}}else{if(mn(w))return w;if(w)return{value:w}}if(m){const O=m.get("range");if(Qr(O)&&K.isNumber(O.step))return{value:O.step-2}}return{value:Su(b.view,d)-2}}function fp(d,f,m,b,w){if(BC(d))return 0;const A="x"===d||"y2"===d?-f/2:f/2;if(mn(m)||mn(w)||mn(b)){const O=Ir(m),F=Ir(w),B=Ir(b);return{signal:(B?`${B} + `:"")+(O?`(${O} ? -1 : 1) * `:"")+(F?`(${F} + ${A})`:A)}}return w=w||0,b+(m?-w-A:+w+A)}function wb({channel:d,fieldDef:f,scaleName:m,markDef:b,bandPosition:w,offset:A,config:O}){return Of({fieldDef:f,channel:d,markDef:b,ref:dc({scaleName:m,fieldOrDatumDef:f,bandPosition:w,offset:A}),config:O})}const EL=new Set(["aria","width","height"]);function jo(d,f){const{fill:m,stroke:b}="include"===f.color?xy(d):{};return W(W(W(W(W(W(W(W(W(W(W(W({},function(d,f){return zk.reduce((m,b)=>(!EL.has(b)&&void 0!==d[b]&&"ignore"!==f[b]&&(m[b]=Nr(d[b])),m),{})}(d.markDef,f)),Kg(d,"fill",m)),Kg(d,"stroke",b)),ur("opacity",d)),ur("fillOpacity",d)),ur("strokeOpacity",d)),ur("strokeWidth",d)),ur("strokeDash",d)),function(d){const{encoding:f,mark:m}=d,b=f.order;return!Af(m)&&Pr(b)?up(d,b,"zindex",w=>Nr(w.value)):{}}(d)),SE(d)),gb(d,"href")),AE(d))}function Kg(d,f,m){const{config:b,mark:w,markDef:A}=d;if("hide"===vn("invalid",A,b)&&m&&!Af(w)){const F=function(d,{invalid:f=!1,channels:m}){const b=m.reduce((A,O)=>{const F=d.getScaleComponent(O);if(F){const B=F.get("type"),$=d.vgField(O,{expr:"datum"});$&&ol(B)&&(A[$]=!0)}return A},{}),w=ut(b);if(w.length>0){const A=f?"||":"&&";return w.map(O=>se(O,f)).join(` ${A} `)}}(d,{invalid:!0,channels:Ll});if(F)return{[f]:[{test:F,value:null},...K.array(m)]}}return m?{[f]:m}:{}}function Sy(d){const{config:f,markDef:m}=d;if(vn("invalid",m,f)){const w=function(d,{invalid:f=!1,channels:m}){const b=m.reduce((A,O)=>{const F=d.getScaleComponent(O);if(F){const B=F.get("type"),$=d.vgField(O,{expr:"datum"});$&&ol(B)&&(A[$]=!0)}return A},{}),w=ut(b);if(w.length>0){const A=f?"||":"&&";return w.map(O=>se(O,f)).join(` ${A} `)}}(d,{channels:cs});if(w)return{defined:{signal:w}}}return{}}function Ou(d,f){if(void 0!==f)return{[d]:Nr(f)}}const hp="voronoi",IE={defined:d=>"point"===d.type&&d.nearest,parse:(d,f)=>{if(f.events)for(const m of f.events)m.markname=d.getName(hp)},marks:(d,f,m)=>{const{x:b,y:w}=f.project.hasChannel,A=d.mark;if(Af(A))return It(function(d){return`The "nearest" transform is not supported for ${d} marks.`}(A)),m;const O={name:d.getName(hp),type:"path",interactive:!0,from:{data:d.getName("marks")},encode:{update:W({fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0}},SE(d,{reactiveGeom:!0}))},transform:[{type:"voronoi",x:{expr:b||!w?"datum.datum.x || 0":"0"},y:{expr:w||!b?"datum.datum.y || 0":"0"},size:[d.getSizeSignalRef("width"),d.getSizeSignalRef("height")]}]};let F=0,B=!1;return m.forEach(($,U)=>{var ce;const ee=null!=(ce=$.name)?ce:"";ee===d.component.mark[0].name?F=U:ee.indexOf(hp)>=0&&(B=!0)}),B||m.splice(F+1,0,O),m}},FA={defined:d=>"point"===d.type&&"global"===d.resolve&&d.bind&&"scales"!==d.bind&&!Bo(d.bind),parse:(d,f,m)=>PA(f,m),topLevelSignals:(d,f,m)=>{const b=f.name,w=f.project,A=f.bind,O=f.init&&f.init[0],F=IE.defined(f)?"(item().isVoronoi ? datum.datum : datum)":"datum";return w.items.forEach((B,$)=>{var ce,Se;const U=Pn(`${b}_${B.field}`);m.filter(He=>He.name===U).length||m.unshift(_t(W({name:U},O?{init:zf(O[$])}:{value:null}),{on:f.events?[{events:f.events,update:`datum && item().mark.marktype !== 'group' ? ${F}[${K.stringValue(B.field)}] : null`}]:[],bind:null!=(Se=null!=(ce=A[B.field])?ce:A[B.channel])?Se:A}))}),m},signals:(d,f,m)=>{const b=f.name,w=f.project,A=m.filter($=>$.name===b+vc)[0],O=b+Js,F=w.items.map($=>Pn(`${b}_${$.field}`)),B=F.map($=>`${$} !== null`).join(" && ");return F.length&&(A.update=`${B} ? {fields: ${O}, values: [${F.join(", ")}]} : null`),delete A.value,delete A.on,m}},RE="_toggle",pp={defined:d=>"point"===d.type&&!!d.toggle,signals:(d,f,m)=>m.concat({name:f.name+RE,value:!1,on:[{events:f.events,update:f.toggle}]}),modifyExpr:(d,f)=>{const m=f.name+vc,b=f.name+RE;return`${b} ? null : ${m}, `+("global"===f.resolve?`${b} ? null : true, `:`${b} ? null : {unit: ${Tu(d)}}, `)+`${b} ? ${m} : null`}},IA={defined:d=>void 0!==d.clear&&!1!==d.clear,parse:(d,f)=>{f.clear&&(f.clear=K.isString(f.clear)?dl(f.clear,"view"):f.clear)},topLevelSignals:(d,f,m)=>{if(FA.defined(f))for(const b of f.project.items){const w=m.findIndex(A=>A.name===Pn(`${f.name}_${b.field}`));-1!==w&&m[w].on.push({events:f.clear,update:"null"})}return m},signals:(d,f,m)=>{function b(w,A){-1!==w&&m[w].on&&m[w].on.push({events:f.clear,update:A})}if("interval"===f.type)for(const w of f.project.items){const A=m.findIndex(O=>O.name===w.signals.visual);b(A,"[0, 0]"),-1===A&&b(m.findIndex(F=>F.name===w.signals.data),"null")}else{let w=m.findIndex(A=>A.name===f.name+vc);b(w,"null"),pp.defined(f)&&(w=m.findIndex(A=>A.name===f.name+RE),b(w,"false"))}return m}},Qg={defined:d=>{const f="global"===d.resolve&&d.bind&&Bo(d.bind),m=1===d.project.items.length&&d.project.items[0].field!==Pf;return f&&!m&&It("Legend bindings are only supported for selections over an individual field or encoding channel."),f&&m},parse:(d,f,m)=>{var O;const b=ft(m);if(b.select=K.isString(b.select)?{type:b.select,toggle:f.toggle}:_t(W({},b.select),{toggle:f.toggle}),PA(f,b),qe.isObject(m.select)&&(m.select.on||m.select.clear)){const F='event.item && indexof(event.item.mark.role, "legend") < 0';for(const B of f.events)B.filter=K.array(null!=(O=B.filter)?O:[]),B.filter.includes(F)||B.filter.push(F)}const w=ep(f.bind)?f.bind.legend:"click",A=K.isString(w)?dl(w,"view"):K.array(w);f.bind={legend:{merge:A}}},topLevelSignals:(d,f,m)=>{const b=f.name,w=ep(f.bind)&&f.bind.legend,A=O=>F=>{const B=ft(F);return B.markname=O,B};for(const O of f.project.items){if(!O.hasLegend)continue;const F=`${Pn(O.field)}_legend`,B=`${b}_${F}`;if(0===m.filter(U=>U.name===B).length){const U=w.merge.map(A(`${F}_symbols`)).concat(w.merge.map(A(`${F}_labels`))).concat(w.merge.map(A(`${F}_entries`)));m.unshift(_t(W({name:B},f.init?{}:{value:null}),{on:[{events:U,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:w.merge,update:`!event.item || !datum ? null : ${B}`,force:!0}]}))}}return m},signals:(d,f,m)=>{const b=f.name,w=f.project,A=m.find(ce=>ce.name===b+vc),O=b+Js,F=w.items.filter(ce=>ce.hasLegend).map(ce=>Pn(`${b}_${Pn(ce.field)}_legend`)),$=`${F.map(ce=>`${ce} !== null`).join(" && ")} ? {fields: ${O}, values: [${F.join(", ")}]} : null`;f.events&&F.length>0?A.on.push({events:F.map(ce=>({signal:ce})),update:$}):F.length>0&&(A.update=$,delete A.value,delete A.on);const U=m.find(ce=>ce.name===b+RE),ee=ep(f.bind)&&f.bind.legend;return U&&(f.events?U.on.push(_t(W({},U.on[0]),{events:ee})):U.on[0].events=ee),m}};const Eb="_translate_anchor",Ay="_translate_delta",NE={defined:d=>"interval"===d.type&&d.translate,signals:(d,f,m)=>{const b=f.name,w=Uf.defined(f),A=b+Eb,{x:O,y:F}=f.project.hasChannel;let B=dl(f.translate,"scope");return w||(B=B.map($=>($.between[0].markname=b+ka,$))),m.push({name:A,value:{},on:[{events:B.map($=>$.between[0]),update:"{x: x(unit), y: y(unit)"+(void 0!==O?`, extent_x: ${w?EE(d,tn):`slice(${O.signals.visual})`}`:"")+(void 0!==F?`, extent_y: ${w?EE(d,Ue):`slice(${F.signals.visual})`}`:"")+"}"}]},{name:b+Ay,value:{},on:[{events:B,update:`{x: ${A}.x - x(unit), y: ${A}.y - y(unit)}`}]}),void 0!==O&&RA(d,f,O,"width",m),void 0!==F&&RA(d,f,F,"height",m),m}};function RA(d,f,m,b,w){var Vt,kn;const A=f.name,O=A+Eb,F=A+Ay,B=m.channel,$=Uf.defined(f),U=w.filter(Bn=>Bn.name===m.signals[$?"data":"visual"])[0],ee=d.getSizeSignalRef(b).signal,ce=d.getScaleComponent(B),Se=ce.get("type"),He=ce.get("reverse"),dt=`${O}.extent_${B}`,an=`${$?"log"===Se?"panLog":"symlog"===Se?"panSymlog":"pow"===Se?"panPow":"panLinear":"panLinear"}(${dt}, ${$?B===tn?He?"":"-":He?"-":"":""}${F}.${B} / ${$?`${ee}`:`span(${dt})`}${$?"pow"===Se?`, ${null!=(Vt=ce.get("exponent"))?Vt:1}`:"symlog"===Se?`, ${null!=(kn=ce.get("constant"))?kn:1}`:"":""})`;U.on.push({events:{signal:F},update:$?an:`clampRange(${an}, 0, ${ee})`})}const PE="_zoom_anchor",Db="_zoom_delta",My={defined:d=>"interval"===d.type&&d.zoom,signals:(d,f,m)=>{const b=f.name,w=Uf.defined(f),A=b+Db,{x:O,y:F}=f.project.hasChannel,B=K.stringValue(d.scaleName(tn)),$=K.stringValue(d.scaleName(Ue));let U=dl(f.zoom,"scope");return w||(U=U.map(ee=>(ee.markname=b+ka,ee))),m.push({name:b+PE,on:[{events:U,update:w?"{"+[B?`x: invert(${B}, x(unit))`:"",$?`y: invert(${$}, y(unit))`:""].filter(ee=>!!ee).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:A,on:[{events:U,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==O&&NA(d,f,O,"width",m),void 0!==F&&NA(d,f,F,"height",m),m}};function NA(d,f,m,b,w){var St,Rt;const A=f.name,O=m.channel,F=Uf.defined(f),B=w.filter(an=>an.name===m.signals[F?"data":"visual"])[0],$=d.getSizeSignalRef(b).signal,U=d.getScaleComponent(O),ee=U.get("type"),ce=F?EE(d,O):B.name,Se=A+Db,vt=`${F?"log"===ee?"zoomLog":"symlog"===ee?"zoomSymlog":"pow"===ee?"zoomPow":"zoomLinear":"zoomLinear"}(${ce}, ${A}${PE}.${O}, ${Se}${F?"pow"===ee?`, ${null!=(St=U.get("exponent"))?St:1}`:"symlog"===ee?`, ${null!=(Rt=U.get("constant"))?Rt:1}`:"":""})`;B.on.push({events:{signal:Se},update:F?vt:`clampRange(${vt}, 0, ${$})`})}const Wf="_store",vc="_tuple",Gf="_modify",xb="vlSelectionResolve",Oy=[pb,hb,wE,pp,FA,Uf,Qg,IA,NE,My,IE];function Tu(d,{escape:f}={escape:!0}){let m=f?K.stringValue(d.name):d.name;const b=function(d){let f=d.parent;for(;f&&!Fc(f);)f=f.parent;return f}(d);if(b){const{facet:w}=b;for(const A of Nl)w[A]&&(m+=` + '__facet_${A}_' + (facet[${K.stringValue(b.vgField(A))}])`)}return m}function LE(d){var f;return Si(null!=(f=d.component.selection)?f:{}).reduce((m,b)=>m||b.project.items.some(w=>w.field===Pf),!1)}function PA(d,f){(qe.isString(f.select)||!f.select.on)&&delete d.events,(qe.isString(f.select)||!f.select.clear)&&delete d.clear,(qe.isString(f.select)||!f.select.toggle)&&delete d.toggle}function fl(d){this.type=d}fl.prototype.visit=function(d){let f,m,b;if(d(this))return 1;for(f=function(d){switch(d.type){case"ArrayExpression":return d.elements;case"BinaryExpression":case"LogicalExpression":return[d.left,d.right];case"CallExpression":return[d.callee].concat(d.arguments);case"ConditionalExpression":return[d.test,d.consequent,d.alternate];case"MemberExpression":return[d.object,d.property];case"ObjectExpression":return d.properties;case"Property":return[d.key,d.value];case"UnaryExpression":return[d.argument];case"Identifier":case"Literal":case"RawCode":default:return[]}}(this),m=0,b=f.length;m<b;++m)if(f[m].visit(d))return 1};var Xl,fn,st,Ps,cr;(Xl={})[1]="Boolean",Xl[2]="<end>",Xl[3]="Identifier",Xl[4]="Keyword",Xl[5]="Null",Xl[6]="Numeric",Xl[7]="Punctuator",Xl[8]="String",Xl[9]="RegularExpression";var VE="Identifier",Ls="Unexpected token %0",zE="Invalid regular expression",Iy="Invalid regular expression: missing /",Ob="Octal literals are not allowed in strict mode.",Zs="ILLEGAL",Tb="Disabled.",UE=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),qn=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function mp(d,f){if(!d)throw new Error("ASSERT: "+f)}function hs(d){return d>=48&&d<=57}function Ry(d){return"0123456789abcdefABCDEF".indexOf(d)>=0}function yp(d){return"01234567".indexOf(d)>=0}function HE(d){return 32===d||9===d||11===d||12===d||160===d||d>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(d)>=0}function _p(d){return 10===d||13===d||8232===d||8233===d}function em(d){return 36===d||95===d||d>=65&&d<=90||d>=97&&d<=122||92===d||d>=128&&UE.test(String.fromCharCode(d))}function WE(d){return 36===d||95===d||d>=65&&d<=90||d>=97&&d<=122||d>=48&&d<=57||92===d||d>=128&&qn.test(String.fromCharCode(d))}const vp={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function zo(){for(;st<Ps;){const d=fn.charCodeAt(st);if(!HE(d)&&!_p(d))break;++st}}function Ny(d){var f,m,b,w=0;for(m="u"===d?4:2,f=0;f<m;++f)st<Ps&&Ry(fn[st])?(b=fn[st++],w=16*w+"0123456789abcdef".indexOf(b.toLowerCase())):hi({},Ls,Zs);return String.fromCharCode(w)}function ku(){var d,f;for(f=0,"}"===(d=fn[st])&&hi({},Ls,Zs);st<Ps&&Ry(d=fn[st++]);)f=16*f+"0123456789abcdef".indexOf(d.toLowerCase());return(f>1114111||"}"!==d)&&hi({},Ls,Zs),f<=65535?String.fromCharCode(f):String.fromCharCode(55296+(f-65536>>10),56320+(f-65536&1023))}function bp(){var d,f;for(d=fn.charCodeAt(st++),f=String.fromCharCode(d),92===d&&(117!==fn.charCodeAt(st)&&hi({},Ls,Zs),++st,(!(d=Ny("u"))||"\\"===d||!em(d.charCodeAt(0)))&&hi({},Ls,Zs),f=d);st<Ps&&WE(d=fn.charCodeAt(st));)++st,f+=String.fromCharCode(d),92===d&&(f=f.substr(0,f.length-1),117!==fn.charCodeAt(st)&&hi({},Ls,Zs),++st,(!(d=Ny("u"))||"\\"===d||!WE(d.charCodeAt(0)))&&hi({},Ls,Zs),f+=d);return f}function qF(){var d,f;for(d=st++;st<Ps;){if(92===(f=fn.charCodeAt(st)))return st=d,bp();if(!WE(f))break;++st}return fn.slice(d,st)}function tm(){var m,w,A,O,d=st,f=fn.charCodeAt(st),b=fn[st];switch(f){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++st,{type:7,value:String.fromCharCode(f),start:d,end:st};default:if(61===(m=fn.charCodeAt(st+1)))switch(f){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return st+=2,{type:7,value:String.fromCharCode(f)+String.fromCharCode(m),start:d,end:st};case 33:case 61:return 61===fn.charCodeAt(st+=2)&&++st,{type:7,value:fn.slice(d,st),start:d,end:st}}}return">>>="===(O=fn.substr(st,4))?{type:7,value:O,start:d,end:st+=4}:">>>"===(A=O.substr(0,3))||"<<="===A||">>="===A?{type:7,value:A,start:d,end:st+=3}:b===(w=A.substr(0,2))[1]&&"+-<>&|".indexOf(b)>=0||"=>"===w?{type:7,value:w,start:d,end:st+=2}:("//"===w&&hi({},Ls,Zs),"<>=!+-*%&|^/".indexOf(b)>=0?{type:7,value:b,start:d,end:++st}:void hi({},Ls,Zs))}function ys(){var d,f,m;if(mp(hs((m=fn[st]).charCodeAt(0))||"."===m,"Numeric literal must start with a decimal digit or a decimal point"),f=st,d="","."!==m){if(d=fn[st++],m=fn[st],"0"===d){if("x"===m||"X"===m)return++st,function(d){let f="";for(;st<Ps&&Ry(fn[st]);)f+=fn[st++];return 0===f.length&&hi({},Ls,Zs),em(fn.charCodeAt(st))&&hi({},Ls,Zs),{type:6,value:parseInt("0x"+f,16),start:d,end:st}}(f);if(yp(m))return function(d){let f="0"+fn[st++];for(;st<Ps&&yp(fn[st]);)f+=fn[st++];return(em(fn.charCodeAt(st))||hs(fn.charCodeAt(st)))&&hi({},Ls,Zs),{type:6,value:parseInt(f,8),octal:!0,start:d,end:st}}(f);m&&hs(m.charCodeAt(0))&&hi({},Ls,Zs)}for(;hs(fn.charCodeAt(st));)d+=fn[st++];m=fn[st]}if("."===m){for(d+=fn[st++];hs(fn.charCodeAt(st));)d+=fn[st++];m=fn[st]}if("e"===m||"E"===m)if(d+=fn[st++],("+"===(m=fn[st])||"-"===m)&&(d+=fn[st++]),hs(fn.charCodeAt(st)))for(;hs(fn.charCodeAt(st));)d+=fn[st++];else hi({},Ls,Zs);return em(fn.charCodeAt(st))&&hi({},Ls,Zs),{type:6,value:parseFloat(d),start:f,end:st}}function nm(){var d,f,m,b;return cr=null,zo(),d=st,f=function(){var d,f,m,b;for(mp("/"===(d=fn[st]),"Regular expression literal must start with a slash"),f=fn[st++],m=!1,b=!1;st<Ps;)if(f+=d=fn[st++],"\\"===d)_p((d=fn[st++]).charCodeAt(0))&&hi({},Iy),f+=d;else if(_p(d.charCodeAt(0)))hi({},Iy);else if(m)"]"===d&&(m=!1);else{if("/"===d){b=!0;break}"["===d&&(m=!0)}return b||hi({},Iy),{value:f.substr(1,f.length-2),literal:f}}(),m=function(){var d,f,m;for(f="",m="";st<Ps&&WE((d=fn[st]).charCodeAt(0));)++st,"\\"===d&&st<Ps?hi({},Ls,Zs):(m+=d,f+=d);return m.search(/[^gimuy]/g)>=0&&hi({},zE,m),{value:m,literal:f}}(),b=function(d,f){let m=d;f.indexOf("u")>=0&&(m=m.replace(/\\u\{([0-9a-fA-F]+)\}/g,(b,w)=>{if(parseInt(w,16)<=1114111)return"x";hi({},zE)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(m)}catch(b){hi({},zE)}try{return new RegExp(d,f)}catch(b){return null}}(f.value,m.value),{literal:f.literal+m.literal,value:b,regex:{pattern:f.value,flags:m.value},start:d,end:st}}function pl(){if(zo(),st>=Ps)return{type:2,start:st,end:st};const d=fn.charCodeAt(st);return em(d)?function(){var d,f;return d=st,{type:1===(f=92===fn.charCodeAt(st)?bp():qF()).length?3:vp.hasOwnProperty(f)?4:"null"===f?5:"true"===f||"false"===f?1:3,value:f,start:d,end:st}}():40===d||41===d||59===d?tm():39===d||34===d?function(){var f,m,b,w,d="",A=!1;for(mp("'"===(f=fn[st])||'"'===f,"String literal must starts with a quote"),m=st,++st;st<Ps;){if((b=fn[st++])===f){f="";break}if("\\"===b)if((b=fn[st++])&&_p(b.charCodeAt(0)))"\r"===b&&"\n"===fn[st]&&++st;else switch(b){case"u":case"x":"{"===fn[st]?(++st,d+=ku()):d+=Ny(b);break;case"n":d+="\n";break;case"r":d+="\r";break;case"t":d+="\t";break;case"b":d+="\b";break;case"f":d+="\f";break;case"v":d+="\v";break;default:yp(b)?(0!==(w="01234567".indexOf(b))&&(A=!0),st<Ps&&yp(fn[st])&&(A=!0,w=8*w+"01234567".indexOf(fn[st++]),"0123".indexOf(b)>=0&&st<Ps&&yp(fn[st])&&(w=8*w+"01234567".indexOf(fn[st++]))),d+=String.fromCharCode(w)):d+=b}else{if(_p(b.charCodeAt(0)))break;d+=b}}return""!==f&&hi({},Ls,Zs),{type:8,value:d,octal:A,start:m,end:st}}():46===d?hs(fn.charCodeAt(st+1))?ys():tm():hs(d)?ys():tm()}function _s(){const d=cr;return st=d.end,cr=pl(),st=d.end,d}function wp(){const d=st;cr=pl(),st=d}function Ep(d,f,m){const b=new fl("||"===d||"&&"===d?"LogicalExpression":"BinaryExpression");return b.operator=d,b.left=f,b.right=m,b}function Yf(d,f){const m=new fl("CallExpression");return m.callee=d,m.arguments=f,m}function Rd(d){const f=new fl(VE);return f.name=d,f}function Fa(d){const f=new fl("Literal");return f.value=d.value,f.raw=fn.slice(d.start,d.end),d.regex&&("//"===f.raw&&(f.raw="/(?:)/"),f.regex=d.regex),f}function Dp(d,f,m){const b=new fl("MemberExpression");return b.computed="["===d,b.object=f,b.property=m,b.computed||(m.member=!0),b}function om(d,f,m){const b=new fl("Property");return b.key=f,b.value=m,b.kind=d,b}function hi(d,f){var m,b=Array.prototype.slice.call(arguments,2),w=f.replace(/%(\d)/g,(A,O)=>(mp(O<b.length,"Message reference must be in range"),b[O]));throw(m=new Error(w)).index=st,m.description=w,m}function Ia(d){2===d.type&&hi(d,"Unexpected end of input"),6===d.type&&hi(d,"Unexpected number"),8===d.type&&hi(d,"Unexpected string"),3===d.type&&hi(d,"Unexpected identifier"),4===d.type&&hi(d,"Unexpected reserved word"),hi(d,Ls,d.value)}function ns(d){const f=_s();(7!==f.type||f.value!==d)&&Ia(f)}function rr(d){return 7===cr.type&&cr.value===d}function cn(d){return 4===cr.type&&cr.value===d}function kb(){const d=[];for(st=cr.start,ns("[");!rr("]");)rr(",")?(_s(),d.push(null)):(d.push(um()),rr("]")||ns(","));return _s(),function(d){const f=new fl("ArrayExpression");return f.elements=d,f}(d)}function Kf(){st=cr.start;const d=_s();return 8===d.type||6===d.type?(d.octal&&hi(d,Ob),Fa(d)):Rd(d.value)}function Fb(){var d,f,m;return st=cr.start,3===(d=cr).type?(m=Kf(),ns(":"),om("init",m,um())):2!==d.type&&7!==d.type?(f=Kf(),ns(":"),om("init",f,um())):void Ia(d)}function UA(){var f,b,d=[],w={},A=String;for(st=cr.start,ns("{");!rr("}");)b="$"+((f=Fb()).key.type===VE?f.key.name:A(f.key.value)),Object.prototype.hasOwnProperty.call(w,b)?hi({},"Duplicate data property in object literal not allowed in strict mode"):w[b]=!0,d.push(f),rr("}")||ns(",");return ns("}"),function(d){const f=new fl("ObjectExpression");return f.properties=d,f}(d)}const Bs={if:1};function am(){var d,f,m;if(rr("("))return function(){ns("(");const d=qE();return ns(")"),d}();if(rr("["))return kb();if(rr("{"))return UA();if(st=cr.start,3===(d=cr.type)||Bs[cr.value])m=Rd(_s().value);else if(8===d||6===d)cr.octal&&hi(cr,Ob),m=Fa(_s());else{if(4===d)throw new Error(Tb);1===d?((f=_s()).value="true"===f.value,m=Fa(f)):5===d?((f=_s()).value=null,m=Fa(f)):rr("/")||rr("/=")?(m=Fa(nm()),wp()):Ia(_s())}return m}function Ly(){const d=[];if(ns("("),!rr(")"))for(;st<Ps&&(d.push(um()),!rr(")"));)ns(",");return ns(")"),d}function GE(){return ns("."),function(){st=cr.start;const d=_s();return function(d){return 3===d.type||4===d.type||1===d.type||5===d.type}(d)||Ia(d),Rd(d.value)}()}function XF(){ns("[");const d=qE();return ns("]"),d}function Ib(){const d=function(){var d;for(d=am();;)if(rr("."))d=Dp(".",d,GE());else if(rr("("))d=Yf(d,Ly());else{if(!rr("["))break;d=Dp("[",d,XF())}return d}();if(7===cr.type&&(rr("++")||rr("--")))throw new Error(Tb);return d}function lm(){var d,f;if(7!==cr.type&&4!==cr.type)f=Ib();else{if(rr("++")||rr("--"))throw new Error(Tb);if(rr("+")||rr("-")||rr("~")||rr("!"))d=_s(),f=lm(),f=function(d,f){const m=new fl("UnaryExpression");return m.operator=d,m.argument=f,m.prefix=!0,m}(d.value,f);else{if(cn("delete")||cn("void")||cn("typeof"))throw new Error(Tb);f=Ib()}}return f}function KF(d){let f=0;if(7!==d.type&&4!==d.type)return 0;switch(d.value){case"||":f=1;break;case"&&":f=2;break;case"|":f=3;break;case"^":f=4;break;case"&":f=5;break;case"==":case"!=":case"===":case"!==":f=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":f=7;break;case"<<":case">>":case">>>":f=8;break;case"+":case"-":f=9;break;case"*":case"/":case"%":f=11}return f}function um(){var d,f;return d=function(){var d,f,m,b,w,A,O,F,B,$;if(d=cr,B=lm(),0===(w=KF(b=cr)))return B;for(b.prec=w,_s(),f=[d,cr],A=[B,b,O=lm()];(w=KF(cr))>0;){for(;A.length>2&&w<=A[A.length-2].prec;)O=A.pop(),F=A.pop().value,B=A.pop(),f.pop(),m=Ep(F,B,O),A.push(m);(b=_s()).prec=w,A.push(b),f.push(cr),m=lm(),A.push(m)}for(m=A[$=A.length-1],f.pop();$>1;)f.pop(),m=Ep(A[$-1].value,A[$-2],m),$-=2;return m}(),rr("?")&&(_s(),f=um(),ns(":"),d=function(d,f,m){const b=new fl("ConditionalExpression");return b.test=d,b.consequent=f,b.alternate=m,b}(d,f,um())),d}function qE(){const d=um();if(rr(","))throw new Error(Tb);return d}function cm(d){const f=[];return"Identifier"===d.type?[d.name]:"Literal"===d.type?[d.value]:("MemberExpression"===d.type&&(f.push(...cm(d.object)),f.push(...cm(d.property))),f)}function WA(d){return"MemberExpression"===d.object.type?WA(d.object):"datum"===d.object.name}function Ai(d){const f=function(d){st=0,Ps=(fn=d).length,cr=null,wp();const f=qE();if(2!==cr.type)throw new Error("Unexpect token after expression.");return f}(d),m=new Set;return f.visit(b=>{"MemberExpression"===b.type&&WA(b)&&m.add(cm(b).slice(1).join("."))}),m}class Nd extends Zi{clone(){return new Nd(null,this.model,ft(this.filter))}constructor(f,m,b){super(f),this.model=m,this.filter=b,hn(this,"expr",void 0),hn(this,"_dependentFields",void 0),this.expr=By(this.model,this.filter,this),this._dependentFields=Ai(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function YE(d,f,m,b="datum"){const w=K.isString(f)?f:f.param,A=Pn(w),O=K.stringValue(A+Wf);let F;try{F=d.getSelectionComponent(A,w)}catch(U){return`!!${A}`}if(F.project.timeUnit){const U=null!=m?m:d.component.data.raw,ee=F.project.timeUnit.clone();U.parent?ee.insertAsParentOf(U):U.parent=ee}const B=`vlSelectionTest(${O}, ${b}${"global"===F.resolve?")":`, ${K.stringValue(F.resolve)})`}`,$=`length(data(${O}))`;return!1===f.empty?`${$} && ${B}`:`!${$} || ${B}`}function dm(d,f,m){const b=Pn(f),w=m.encoding;let O,A=m.field;try{O=d.getSelectionComponent(b,f)}catch(F){return b}if(w||A){if(w&&!A){const F=O.project.items.filter(B=>B.channel===w);!F.length||F.length>1?(A=O.project.items[0].field,It((F.length?"Multiple ":"No ")+`matching ${K.stringValue(w)} encoding found for selection ${K.stringValue(m.param)}. Using "field": ${K.stringValue(A)}.`)):A=F[0].field}}else A=O.project.items[0].field,O.project.items.length>1&&It(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${K.stringValue(A)}.`);return`${O.name}[${K.stringValue(Ii(A))}]`}function By(d,f,m){return Kn(f,b=>K.isString(b)?b:function(d){return null==d?void 0:d.param}(b)?YE(d,b,m):U0(b))}function XE(d,f,m,b){var w,A;null!=d.encode||(d.encode={}),null!=(w=d.encode)[f]||(w[f]={}),null!=(A=d.encode[f]).update||(A.update={}),d.encode[f].update[m]=b}function fm(d,f,m,b={header:!1}){const Se=d.combine(),{disable:w,orient:A,scale:O,labelExpr:F,title:B,zindex:$}=Se,U=gn(Se,["disable","orient","scale","labelExpr","title","zindex"]);if(!w){for(const Ge in U){const dt=yF[Ge],vt=U[Ge];if(dt&&dt!==f&&"both"!==dt)delete U[Ge];else if(Ff(vt)){const He=vt,{condition:St}=He,Rt=gn(He,["condition"]),an=K.array(St),Vt=Ig[Ge];if(Vt){const{vgProp:kn,part:Bn}=Vt;XE(U,Bn,kn,[...an.map(Mi=>{const Bc=Mi,{test:Ni}=Bc,Ui=gn(Bc,["test"]);return W({test:By(null,Ni)},Ui)}),Rt]),delete U[Ge]}else if(null===Vt){const kn={signal:an.map(Bn=>{const Ni=Bn,{test:ui}=Ni,Mi=gn(Ni,["test"]);return`${By(null,ui)} ? ${RS(Mi)} : `}).join("")+RS(Rt)};U[Ge]=kn}}else if(mn(vt)){const St=Ig[Ge];if(St){const{vgProp:Rt,part:an}=St;XE(U,an,Rt,vt),delete U[Ge]}}At(["labelAlign","labelBaseline"],Ge)&&null===U[Ge]&&delete U[Ge]}if("grid"===f){if(!U.grid)return;if(U.encode){const{grid:Ge}=U.encode;U.encode=W({},Ge?{grid:Ge}:{}),rn(U.encode)&&delete U.encode}return _t(W({scale:O,orient:A},U),{domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Zn($,0)})}{if(!b.header&&d.mainExtracted)return;if(void 0!==F){var ee,ce;let dt=F;null!==(ee=U.encode)&&void 0!==ee&&null!==(ce=ee.labels)&&void 0!==ce&&ce.update&&mn(U.encode.labels.update.text)&&(dt=gs(F,"datum.label",U.encode.labels.update.text.signal)),XE(U,"labels","text",{signal:dt})}if(null===U.labelAlign&&delete U.labelAlign,U.encode){for(const dt of ly)d.hasAxisPart(dt)||delete U.encode[dt];rn(U.encode)&&delete U.encode}const Ge=function(d,f){if(d)return K.isArray(d)&&!Bl(d)?d.map(m=>jv(m,f)).join(", "):d}(B,m);return _t(W(W(W({scale:O,orient:A,grid:!1},Ge?{title:Ge}:{}),U),!1===m.aria?{aria:!1}:{}),{zindex:Zn($,0)})}}}function Sp(d){const{axes:f}=d.component,m=[];for(const b of cs)if(f[b])for(const w of f[b])if(!w.get("disable")&&!w.get("gridScale")){const A="x"===b?"height":"width",O=d.getSizeSignalRef(A).signal;A!==O&&m.push({name:A,update:O})}return m}function hm(d,f,m,b){return Object.assign.apply(null,[{},...d.map(w=>{if("axisOrient"===w){const A="x"===m?"bottom":"left",O=f["x"===m?"axisBottom":"axisLeft"]||{},F=f["x"===m?"axisTop":"axisRight"]||{},B=new Set([...ut(O),...ut(F)]),$={};for(const U of B.values())$[U]={signal:`${b.signal} === "${A}" ? ${Ir(O[U])} : ${Ir(F[U])}`};return $}return f[w]})])}function XA(d,f,m,b){const w="band"===f?["axisDiscrete","axisBand"]:"point"===f?["axisDiscrete","axisPoint"]:function(d){return d in pd}(f)?["axisQuantitative"]:"time"===f||"utc"===f?["axisTemporal"]:[],A="x"===d?"axisX":"axisY",O=mn(m)?"axisOrient":`axis${hr(m)}`,F=[...w,...w.map($=>A+$.substr(4))],B=["axis",O,A];return{vlOnlyAxisConfig:hm(F,b,d,m),vgAxisConfig:hm(B,b,d,m),axisConfigStyle:JF([...B,...F],b)}}function JF(d,f){const m=[{}];for(const w of d){var b;let A=null===(b=f[w])||void 0===b?void 0:b.style;if(A){A=K.array(A);for(const O of A)m.push(f.style[O])}}return Object.assign.apply(null,m)}function Ap(d,f,m,b={}){const w=Ih(d,m,f);if(void 0!==w)return{configFrom:"style",configValue:w};for(const O of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"]){var A;if(void 0!==(null===(A=b[O])||void 0===A?void 0:A[d]))return{configFrom:O,configValue:b[O][d]}}return{}}const Rb={scale:({model:d,channel:f})=>d.scaleName(f),format:({fieldOrDatumDef:d,config:f,axis:m})=>{const{format:b,formatType:w}=m;return wu(d,d.type,b,w,f,!0)},formatType:({axis:d,fieldOrDatumDef:f,scaleType:m})=>{const{formatType:b}=d;return ww(b,f,m)},grid:({fieldOrDatumDef:d,axis:f,scaleType:m})=>{var b;return null!=(b=f.grid)?b:function(d,f){return!aa(d)&&Bt(f)&&!Ji(null==f?void 0:f.bin)&&!Kr(null==f?void 0:f.bin)}(m,d)},gridScale:({model:d,channel:f})=>function(d,f){const m="x"===f?"y":"x";if(d.getScaleComponent(m))return d.scaleName(m)}(d,f),labelAlign:({axis:d,labelAngle:f,orient:m,channel:b})=>d.labelAlign||QE(f,m,b),labelAngle:({labelAngle:d})=>d,labelBaseline:({axis:d,labelAngle:f,orient:m,channel:b})=>d.labelBaseline||KE(f,m,b),labelFlush:({axis:d,fieldOrDatumDef:f,channel:m})=>{var b;return null!=(b=d.labelFlush)?b:function(d,f){if("x"===f&&At(["quantitative","temporal"],d))return!0}(f.type,m)},labelOverlap:({axis:d,fieldOrDatumDef:f,scaleType:m})=>{var b;return null!=(b=d.labelOverlap)?b:function(d,f,m,b){if(m&&!K.isObject(b)||"nominal"!==d&&"ordinal"!==d)return"log"!==f&&"symlog"!==f||"greedy"}(f.type,m,Bt(f)&&!!f.timeUnit,Bt(f)?f.sort:void 0)},orient:({orient:d})=>d,tickCount:({channel:d,model:f,axis:m,fieldOrDatumDef:b,scaleType:w})=>{var F;const A="x"===d?"width":"y"===d?"height":void 0,O=A?f.getSizeSignalRef(A):void 0;return null!=(F=m.tickCount)?F:function({fieldOrDatumDef:d,scaleType:f,size:m,values:b}){if(!b&&!aa(f)&&"log"!==f){if(Bt(d)){var w;if(Ji(d.bin))return{signal:`ceil(${m.signal}/10)`};if(d.timeUnit&&At(["month","hours","day","quarter"],null===(w=Fo(d.timeUnit))||void 0===w?void 0:w.unit))return}return{signal:`ceil(${m.signal}/40)`}}}({fieldOrDatumDef:b,scaleType:w,size:O,values:m.values})},title:({axis:d,model:f,channel:m})=>{if(void 0!==d.title)return d.title;const b=Bb(f,m);if(void 0!==b)return b;const w=f.typedFieldDef(m),O=f.fieldDef("x"===m?"x2":"y2");return Hk(w?[iy(w)]:[],Bt(O)?[iy(O)]:[])},values:({axis:d,fieldOrDatumDef:f})=>function(d,f){const m=d.values;return K.isArray(m)?nA(f,m):mn(m)?m:void 0}(d,f),zindex:({axis:d,fieldOrDatumDef:f,mark:m})=>{var b;return null!=(b=d.zindex)?b:function(d,f){return"rect"===d&&sy(f)?1:0}(m,f)}};function Nb(d){return`(((${d.signal} % 360) + 360) % 360)`}function KE(d,f,m,b){if(void 0!==d){if("x"===m){if(mn(d)){const w=Nb(d);return{signal:`(45 < ${w} && ${w} < 135) || (225 < ${w} && ${w} < 315) ? "middle" :(${w} <= 45 || 315 <= ${w}) === ${mn(f)?`(${f.signal} === "top")`:"top"===f} ? "bottom" : "top"`}}return 45<d&&d<135||225<d&&d<315?"middle":mn(f)?{signal:`${f.signal} ${d<=45||315<=d?"===":"!=="} "top" ? "bottom" : "top"`}:(d<=45||315<=d)==("top"===f)?"bottom":"top"}if(mn(d)){const w=Nb(d);return{signal:`${w} <= 45 || 315 <= ${w} || (135 <= ${w} && ${w} <= 225) ? ${b?'"middle"':"null"} : (45 <= ${w} && ${w} <= 135) === ${mn(f)?`(${f.signal} === "left")`:"left"===f} ? "top" : "bottom"`}}return d<=45||315<=d||135<=d&&d<=225?b?"middle":null:mn(f)?{signal:`${f.signal} ${45<=d&&d<=135?"===":"!=="} "left" ? "top" : "bottom"`}:(45<=d&&d<=135)==("left"===f)?"top":"bottom"}}function QE(d,f,m){if(void 0===d)return;const b="x"===m,w=b?0:90,A=b?"bottom":"left";if(mn(d)){const O=Nb(d);return{signal:`(${w?`(${O} + 90)`:O} % 180 === 0) ? ${b?null:'"center"'} :(${w} < ${O} && ${O} < ${180+w}) === ${mn(f)?`(${f.signal} === "${A}")`:f===A} ? "left" : "right"`}}return(d+w)%180==0?b?null:"center":mn(f)?{signal:`${f.signal} ${w<d&&d<180+w?"===":"!=="} "${A}" ? "left" : "right"`}:(w<d&&d<180+w)==(f===A)?"left":"right"}function Bb(d,f){const m="x"===f?"x2":"y2",b=d.fieldDef(f),w=d.fieldDef(m),A=b?b.title:void 0,O=w?w.title:void 0;return A&&O?Wk(A,O):A||O||(void 0!==A?A:void 0!==O?O:void 0)}class Qf extends Zi{clone(){return new Qf(null,ft(this.transform))}constructor(f,m){super(f),this.transform=m,hn(this,"_dependentFields",void 0),this._dependentFields=Ai(this.transform.calculate)}static parseAllForSortIndex(f,m){return m.forEachFieldDef((b,w)=>{if(Ro(b)&&Rv(b.sort)){const{field:A,timeUnit:O}=b,F=b.sort,B=F.map(($,U)=>`${U0({field:A,timeUnit:O,equal:$})} ? ${U} : `).join("")+F.length;f=new Qf(f,{calculate:B,as:pm(b,w,{forAs:!0})})}}),f}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${sn(this.transform)}`}}function pm(d,f,m){return Ut(d,W({prefix:f,suffix:"sort_index"},null!=m?m:{}))}function ue(d,f){return At(["top","bottom"],f)?"column":At(["left","right"],f)||"row"===d?"row":"column"}function Mp(d,f,m,b){return Zn((f||{})[d],("row"===b?m.headerRow:"column"===b?m.headerColumn:m.headerFacet)[d],m.header[d])}function yt(d,f,m,b){const w={};for(const A of d){const O=Mp(A,f||{},m,b);void 0!==O&&(w[A]=O)}return w}const Op=["row","column"],Vb=["header","footer"];function we(d,f){const m=d.component.layoutHeaders[f].title,b=d.config?d.config:void 0,w=d.component.layoutHeaders[f].facetFieldDef?d.component.layoutHeaders[f].facetFieldDef:void 0,{titleAnchor:A,titleAngle:O,titleOrient:F}=yt(["titleAnchor","titleAngle","titleOrient"],w.header,b,f),B=ue(f,F),$=Qa(O);return{name:`${f}-title`,type:"group",role:`${B}-title`,title:W(W(W(_t(W({text:m},"row"===f?{orient:"left"}:{}),{style:"guide-title"}),on($,B)),Ee(B,$,A)),jb(b,w,f,oA,wF))}}function Ee(d,f,m="middle"){switch(m){case"start":return{align:"left"};case"end":return{align:"right"}}const b=QE(f,"row"===d?"left":"top","row"===d?"y":"x");return b?{align:b}:{}}function on(d,f){const m=KE(d,"row"===f?"left":"top","row"===f?"y":"x",!0);return m?{baseline:m}:{}}function kL(d,f){const m=d.component.layoutHeaders[f],b=[];for(const w of Vb)if(m[w])for(const A of m[w]){const O=$b(d,f,w,m,A);null!=O&&b.push(O)}return b}function t2(d,f){var b;const{sort:m}=d;return Eu(m)?{field:Ut(m,{expr:"datum"}),order:null!=(b=m.order)?b:"ascending"}:K.isArray(m)?{field:pm(d,f,{expr:"datum"}),order:"ascending"}:{field:Ut(d,{expr:"datum"}),order:null!=m?m:"ascending"}}function Tp(d,f,m){const{format:b,formatType:w,labelAngle:A,labelAnchor:O,labelOrient:F,labelExpr:B}=yt(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],d.header,m,f),$=_d({fieldOrDatumDef:d,format:b,formatType:w,expr:"parent",config:m}).signal,U=ue(f,F);return W(W(W(_t(W({text:{signal:B?gs(gs(B,"datum.label",$),"datum.value",Ut(d,{expr:"parent"})):$}},"row"===f?{orient:"left"}:{}),{style:"guide-label",frame:"group"}),on(A,U)),Ee(U,A,O)),jb(m,d,f,Uw,zw))}function $b(d,f,m,b,w){if(w){let A=null;const{facetFieldDef:O}=b,F=d.config?d.config:void 0;if(O&&w.labels){const{labelOrient:ee}=yt(["labelOrient"],O.header,F,f);("row"===f&&!At(["top","bottom"],ee)||"column"===f&&!At(["left","right"],ee))&&(A=Tp(O,f,F))}const B=Fc(d)&&!Ag(d.facet),$=w.axes,U=(null==$?void 0:$.length)>0;if(A||U){const ee="row"===f?"height":"width";return W(W(W(W(W({name:d.getName(`${f}_${m}`),type:"group",role:`${f}-${m}`},b.facetFieldDef?{from:{data:d.getName(`${f}_domain`)},sort:t2(O,f)}:{}),U&&B?{from:{data:d.getName(`facet_domain_${f}`)}}:{}),A?{title:A}:{}),w.sizeSignal?{encode:{update:{[ee]:w.sizeSignal}}}:{}),U?{axes:$}:{})}}return null}const ZA={column:{start:0,end:1},row:{start:1,end:0}};function eo(d,f){return ZA[f][d]}function jb(d,f,m,b,w){const A={};for(const O of b){if(!w[O])continue;const F=Mp(O,null==f?void 0:f.header,d,m);void 0!==F&&(A[w[O]]=F)}return A}function gm(d){return[...Cn(d,"width"),...Cn(d,"height"),...Cn(d,"childWidth"),...Cn(d,"childHeight")]}function Cn(d,f){const m="width"===f?"x":"y",b=d.component.layoutSize.get(f);if(!b||"merged"===b)return[];const w=d.getSizeSignalRef(f).signal;if("step"===b){const A=d.getScaleComponent(m);if(A){const O=A.get("type"),F=A.get("range");if(aa(O)&&Qr(F)){const B=d.scaleName(m);return Fc(d.parent)&&"independent"===d.parent.component.resolve.scale[m]?[mm(B,F)]:[mm(B,F),{name:w,update:ZE(B,A,`domain('${B}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==b){const A=w.endsWith("width"),O=A?"containerSize()[0]":"containerSize()[1]",B=`isFinite(${O}) ? ${O} : ${Xw(d.config.view,A?"width":"height")}`;return[{name:w,init:B,on:[{update:B,events:"window:resize"}]}]}return[{name:w,value:b}]}function mm(d,f){return{name:`${d}_step`,value:f.step}}function ZE(d,f,m){const b=f.get("type"),w=f.get("padding"),A=Zn(f.get("paddingOuter"),w);let O=f.get("paddingInner");return O="band"===b?void 0!==O?O:w:1,`bandspace(${m}, ${Ir(O)}, ${Ir(A)}) * ${d}_step`}function eD(d){return"childWidth"===d?"width":"childHeight"===d?"height":d}function ym(d,f){return ut(d).reduce((m,b)=>{const w=d[b];return W(W({},m),up(f,w,b,A=>Nr(A.value)))},{})}function _m(d,f){if(Fc(f))return"theta"===d?"independent":"shared";if(Pp(f))return"shared";if(Am(f))return el(d)||"theta"===d||"radius"===d?"independent":"shared";throw new Error("invalid model type for resolve")}function dn(d,f){const m=d.scale[f],b=el(f)?"axis":"legend";return"independent"===m?("shared"===d[b][f]&&It(function(d){return`Setting the scale to be independent for "${d}" means we also have to set the guide (axis or legend) to be independent.`}(f)),"independent"):d[b][f]||"shared"}const Dc=_t(W({},{aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1}),{disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1}),vs=ut(Dc);class Ei extends Bf{}const $y={symbols:function(d,{fieldOrDatumDef:f,model:m,channel:b,legendCmpt:w,legendType:A}){var dt,vt,St,Rt,an,Vt,kn,Bn;if("symbol"!==A)return;const{markDef:O,encoding:F,config:B,mark:$}=m,U=O.filled&&"trail"!==$;let ee=W(W({},function(d,f,m){for(const b of m){const w=hg(b,f.markDef,f.config);void 0!==w&&(d[b]=Nr(w))}return d}({},m,cF)),xy(m,{filled:U}));const ce=null!=(dt=w.get("symbolOpacity"))?dt:B.legend.symbolOpacity,Se=null!=(vt=w.get("symbolFillColor"))?vt:B.legend.symbolFillColor,He=null!=(St=w.get("symbolStrokeColor"))?St:B.legend.symbolStrokeColor,Ge=void 0===ce?null!=(Rt=nD(F.opacity))?Rt:O.opacity:void 0;if(ee.fill)if("fill"===b||U&&b===Q)delete ee.fill;else if(ee.fill.field)Se?delete ee.fill:(ee.fill=Nr(null!=(an=B.legend.symbolBaseFillColor)?an:"black"),ee.fillOpacity=Nr(null!=Ge?Ge:1));else if(K.isArray(ee.fill)){const ui=null!=(Bn=null!=(kn=xc(null!=(Vt=F.fill)?Vt:F.color))?kn:O.fill)?Bn:U&&O.color;ui&&(ee.fill=Nr(ui))}if(ee.stroke)if("stroke"===b||!U&&b===Q)delete ee.stroke;else if(ee.stroke.field||He)delete ee.stroke;else if(K.isArray(ee.stroke)){const ui=Zn(xc(F.stroke||F.color),O.stroke,U?O.color:void 0);ui&&(ee.stroke={value:ui})}if(b!==ct){const ui=Bt(f)&&Jf(0,w,f);ui?ee.opacity=[W({test:ui},Nr(null!=Ge?Ge:1)),Nr(B.legend.unselectedOpacity)]:Ge&&(ee.opacity=Nr(Ge))}return ee=W(W({},ee),d),rn(ee)?void 0:ee},gradient:function(d,{model:f,legendType:m,legendCmpt:b}){var U;if("gradient"!==m)return;const{config:w,markDef:A,encoding:O}=f;let F={};const $=void 0===(null!=(U=b.get("gradientOpacity"))?U:w.legend.gradientOpacity)?nD(O.opacity)||A.opacity:void 0;return $&&(F.opacity=Nr($)),F=W(W({},F),d),rn(F)?void 0:F},labels:function(d,{fieldOrDatumDef:f,model:m,channel:b,legendCmpt:w}){const A=m.legend(b)||{},O=m.config,F=Bt(f)?Jf(0,w,f):void 0,B=F?[{test:F,value:1},{value:O.legend.unselectedOpacity}]:void 0,{format:$,formatType:U}=A,ee=fc(U)?Sg({fieldOrDatumDef:f,field:"datum.value",format:$,formatType:U,config:O}):void 0,ce=W(W(W({},B?{opacity:B}:{}),ee?{text:ee}:{}),d);return rn(ce)?void 0:ce},entries:function(d,{legendCmpt:f}){const m=f.get("selections");return null!=m&&m.length?_t(W({},d),{fill:{value:"transparent"}}):d}};function nD(d){return Jl(d,(f,m)=>Math.max(f,m.value))}function xc(d){return Jl(d,(f,m)=>Zn(f,m.value))}function Jl(d,f){return function(d){const f=d&&d.condition;return!!f&&(K.isArray(f)||Pr(f))}(d)?K.array(d.condition).reduce(f,d.value):Pr(d)?d.value:void 0}function Jf(d,f,m){const b=f.get("selections");if(null==b||!b.length)return;const w=K.stringValue(m.field);return b.map(A=>`(!length(data(${K.stringValue(Pn(A)+Wf)})) || (${A}[${w}] && indexof(${A}[${w}], datum.value) >= 0))`).join(" || ")}const jy={direction:({direction:d})=>d,format:({fieldOrDatumDef:d,legend:f,config:m})=>{const{format:b,formatType:w}=f;return wu(d,d.type,b,w,m,!1)},formatType:({legend:d,fieldOrDatumDef:f,scaleType:m})=>{const{formatType:b}=d;return ww(b,f,m)},gradientLength:d=>{var b,w;const{legend:f,legendConfig:m}=d;return null!=(w=null!=(b=f.gradientLength)?b:m.gradientLength)?w:function({legendConfig:d,model:f,direction:m,orient:b,scaleType:w}){const{gradientHorizontalMaxLength:A,gradientHorizontalMinLength:O,gradientVerticalMaxLength:F,gradientVerticalMinLength:B}=d;if(uc(w))return"horizontal"===m?"top"===b||"bottom"===b?iD(f,"width",O,A):O:iD(f,"height",B,F)}(d)},labelOverlap:({legend:d,legendConfig:f,scaleType:m})=>{var b,w;return null!=(w=null!=(b=d.labelOverlap)?b:f.labelOverlap)?w:function(d){if(At(["quantile","threshold","log","symlog"],d))return"greedy"}(m)},symbolType:({legend:d,markDef:f,channel:m,encoding:b})=>{var w;return null!=(w=d.symbolType)?w:function(d,f,m,b){var w;if("shape"!==f){const A=null!=(w=xc(m))?w:b;if(A)return A}switch(d){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(f.type,m,b.shape,f.shape)},title:({fieldOrDatumDef:d,config:f})=>No(d,f,{allowDisabling:!0}),type:({legendType:d,scaleType:f,channel:m})=>{if(Ah(m)&&uc(f)){if("gradient"===d)return}else if("symbol"===d)return;return d},values:({fieldOrDatumDef:d,legend:f})=>function(d,f){const m=d.values;return K.isArray(m)?nA(f,m):mn(m)?m:void 0}(f,d)};function n2(d){const{legend:f}=d;return Zn(f.type,function({channel:d,timeUnit:f,scaleType:m}){if(Ah(d)){if(At(["quarter","month","day"],f))return"symbol";if(uc(m))return"gradient"}return"symbol"}(d))}function Zl({legendConfig:d,legendType:f,orient:m,legend:b}){var w,A;return null!=(A=null!=(w=b.direction)?w:d[f?"gradientDirection":"symbolDirection"])?A:function(d,f){switch(d){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===f?"horizontal":void 0}}(m,f)}function iD(d,f,m,b){return{signal:`clamp(${d.getSizeSignalRef(f).signal}, ${m}, ${b})`}}function zb(d){const f=zs(d)?function(d){const{encoding:f}=d,m={};for(const b of[Q,...ll]){const w=Rs(f[b]);!w||!d.getScaleComponent(b)||b===re&&Bt(w)&&w.type===jh||(m[b]=ml(d,b))}return m}(d):function(d){const{legends:f,resolve:m}=d.component;for(const b of d.children){zb(b);for(const w of ut(b.component.legends))m.legend[w]=dn(d.component.resolve,w),"shared"===m.legend[w]&&(f[w]=oM(f[w],b.component.legends[w]),f[w]||(m.legend[w]="independent",delete f[w]))}for(const b of ut(f))for(const w of d.children)!w.component.legends[b]||"shared"===m.legend[b]&&delete w.component.legends[b];return f}(d);return d.component.legends=f,f}function sM(d,f,m,b){switch(f){case"disable":return void 0!==m;case"values":return!(null==m||!m.values);case"title":if("title"===f&&d===(null==b?void 0:b.title))return!0}return d===(m||{})[f]}function ml(d,f){var Bn,ui,m,b;let w=d.legend(f);const{markDef:A,encoding:O,config:F}=d,B=F.legend,$=new Ei({},function(d,f){const m=d.scaleName(f);if("trail"===d.mark){if("color"===f)return{stroke:m};if("size"===f)return{strokeWidth:m}}return"color"===f?d.markDef.filled?{fill:m}:{stroke:m}:{[f]:m}}(d,f));!function(d,f,m){var A,O,F,b;const w=null===(b=d.fieldDef(f))||void 0===b?void 0:b.field;for(const B of Si(null!=(A=d.component.selection)?A:{})){const $=null!=(O=B.project.hasField[w])?O:B.project.hasChannel[f];if($&&Qg.defined(B)){const U=null!=(F=m.get("selections"))?F:[];U.push(B.name),m.set("selections",U,!1),$.hasLegend=!0}}}(d,f,$);const U=void 0!==w?!w:B.disable;if($.set("disable",U,void 0!==w),U)return $;w=w||{};const ee=d.getScaleComponent(f).get("type"),ce=Rs(O[f]),Se=Bt(ce)?null===(m=Fo(ce.timeUnit))||void 0===m?void 0:m.unit:void 0,He=w.orient||F.legend.orient||"right",Ge=n2({legend:w,channel:f,timeUnit:Se,scaleType:ee}),vt={legend:w,channel:f,model:d,markDef:A,encoding:O,fieldOrDatumDef:ce,legendConfig:B,config:F,scaleType:ee,orient:He,legendType:Ge,direction:Zl({legend:w,legendType:Ge,orient:He,legendConfig:B})};for(const Mi of vs){if("gradient"===Ge&&Mi.startsWith("symbol")||"symbol"===Ge&&Mi.startsWith("gradient"))continue;const Ni=Mi in jy?jy[Mi](vt):w[Mi];if(void 0!==Ni){const Ui=sM(Ni,Mi,w,d.fieldDef(f));(Ui||void 0===F.legend[Mi])&&$.set(Mi,Ni,Ui)}}const St=null!=(Bn=null===(b=w)||void 0===b?void 0:b.encoding)?Bn:{},Rt=$.get("selections"),an={},Vt={fieldOrDatumDef:ce,model:d,channel:f,legendCmpt:$,legendType:Ge};for(const Mi of["labels","legend","title","symbols","gradient","entries"]){const Ni=ym(null!=(ui=St[Mi])?ui:{},d),Ui=Mi in $y?$y[Mi](Ni,Vt):Ni;void 0!==Ui&&!rn(Ui)&&(an[Mi]=_t(W(W({},null!=Rt&&Rt.length&&Bt(ce)?{name:`${Pn(ce.field)}_legend_${Mi}`}:{}),null!=Rt&&Rt.length?{interactive:!!Rt}:{}),{update:Ui}))}var kn;return rn(an)||$.set("encode",an,!(null===(kn=w)||void 0===kn||!kn.encoding)),$}function oM(d,f){if(!d)return f.clone();const m=d.getWithExplicit("orient"),b=f.getWithExplicit("orient");if(m.explicit&&b.explicit&&m.value!==b.value)return;let w=!1;for(const $ of vs){const U=Ks(d.getWithExplicit($),f.getWithExplicit($),$,"legend",(ee,ce)=>{switch($){case"symbolType":return aM(ee,ce);case"title":return Gk(ee,ce);case"type":return w=!0,Oa("symbol")}return Ta(ee,ce,$,"legend")});d.setWithExplicit($,U)}var A,O,F,B;return w&&(null!==(A=d.implicit)&&void 0!==A&&null!==(O=A.encode)&&void 0!==O&&O.gradient&&as(d.implicit,["encode","gradient"]),null!==(F=d.explicit)&&void 0!==F&&null!==(B=F.encode)&&void 0!==B&&B.gradient&&as(d.explicit,["encode","gradient"])),d}function aM(d,f){return"circle"===f.value?f:d}function Iu(d){const f=d.component.legends,m={};for(const w of ut(f)){const A=d.getScaleComponent(w),O=qt(A.get("domains"));if(m[O])for(const F of m[O])oM(F,f[w])||m[O].push(f[w]);else m[O]=[f[w].clone()]}return Si(m).flat().map(w=>function(d,f){var m;const $=d.combine(),{disable:b,labelExpr:w}=$,O=gn($,["disable","labelExpr","selections"]);if(!b){if(!1===f.aria&&null==O.aria&&(O.aria=!1),null!==(m=O.encode)&&void 0!==m&&m.symbols){const U=O.encode.symbols.update;U.fill&&"transparent"!==U.fill.value&&!U.stroke&&!O.stroke&&(U.stroke={value:"transparent"});for(const ee of ll)O[ee]&&delete U[ee]}if(O.title||delete O.title,void 0!==w){var F,B;let U=w;null!==(F=O.encode)&&void 0!==F&&null!==(B=F.labels)&&void 0!==B&&B.update&&mn(O.encode.labels.update.text)&&(U=gs(w,"datum.label",O.encode.labels.update.text.signal)),function(d,f,m,b){var w,A;null!=d.encode||(d.encode={}),null!=(w=d.encode)[f]||(w[f]={}),null!=(A=d.encode[f]).update||(A.update={}),d.encode[f].update[m]=b}(O,"labels","text",{signal:U})}return O}}(w,d.config)).filter(w=>void 0!==w)}function Co(d){return Pp(d)||Am(d)?function(d){return d.children.reduce((f,m)=>f.concat(m.assembleProjections()),ca(d))}(d):ca(d)}function ca(d){const f=d.component.projection;if(!f||f.merged)return[];const m=f.combine(),{name:b}=m;if(f.data){const w={signal:`[${f.size.map(O=>O.signal).join(", ")}]`},A=f.data.reduce((O,F)=>{const B=mn(F)?F.signal:`data('${d.lookupDataSource(F)}')`;return At(O,B)||O.push(B),O},[]);if(A.length<=0)throw new Error("Projection's fit didn't find any data sources");return[W({name:b,size:w,fit:{signal:A.length>1?`[${A.join(", ")}]`:A[0]}},m)]}return[W({name:b,translate:{signal:"[width / 2, height / 2]"}},m)]}const zy=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class is extends Bf{constructor(f,m,b,w){super(W({},m),{name:f}),this.specifiedProjection=m,this.size=b,this.data=w,hn(this,"merged",!1)}get isFit(){return!!this.data}}function Ru(d){d.component.projection=zs(d)?function(d){var f;if(d.hasProjection){const m=Fr(d.specifiedProjection),b=!(m&&(null!=m.scale||null!=m.translate)),w=b?[d.getSizeSignalRef("width"),d.getSizeSignalRef("height")]:void 0,A=b?function(d){const f=[],{encoding:m}=d;for(const b of[[Je,Te],[q,L]])(Rs(m[b[0]])||Rs(m[b[1]]))&&f.push({signal:d.getName(`geojson_${f.length}`)});return d.channelHasField(re)&&d.typedFieldDef(re).type===jh&&f.push({signal:d.getName(`geojson_${f.length}`)}),0===f.length&&f.push(d.requestDataName(ir.Main)),f}(d):void 0,O=new is(d.projectionName(!0),W(W({},null!=(f=Fr(d.config.projection))?f:{}),null!=m?m:{}),w,A);return O.get("type")||O.set("type","equalEarth",!1),O}}(d):function(d){if(0===d.children.length)return;let f;for(const b of d.children)Ru(b);const m=$t(d.children,b=>{const w=b.component.projection;if(w){if(f){const A=function(d,f){const m=$t(zy,w=>!!(!K.hasOwnProperty(d.explicit,w)&&!K.hasOwnProperty(f.explicit,w)||K.hasOwnProperty(d.explicit,w)&&K.hasOwnProperty(f.explicit,w)&&gt(d.get(w),f.get(w))));if(gt(d.size,f.size)){if(m)return d;if(gt(d.explicit,{}))return f;if(gt(f.explicit,{}))return d}return null}(f,w);return A&&(f=A),!!A}return f=w,!0}return!0});if(f&&m){const b=d.projectionName(!0),w=new is(b,f.specifiedProjection,f.size,ft(f.data));for(const A of d.children){const O=A.component.projection;O&&(O.isFit&&w.data.push(...A.component.projection.data),A.renameProjection(O.get("name"),b),O.merged=!0)}return w}}(d)}function cM(d,f){return`${A0(d)}_${f}`}function sD(d,f,m){var A;const w=cM(null!=(A=Tw(m,void 0))?A:{},f);return d.getName(`${w}_bins`)}function Cm(d,f,m){let b,w;b=function(d){return"as"in d}(d)?K.isString(d.as)?[d.as,`${d.as}_end`]:[d.as[0],d.as[1]]:[Ut(d,{forAs:!0}),Ut(d,{binSuffix:"end",forAs:!0})];const A=W({},Tw(f,void 0)),O=cM(A,d.field),{signal:F,extentSignal:B}=function(d,f){return{signal:d.getName(`${f}_bins`),extentSignal:d.getName(`${f}_extent`)}}(m,O);if(jr(A.extent)){const U=A.extent;w=dm(m,U.param,U),delete A.extent}return{key:O,binComponent:W(W(W({bin:A,field:d.field,as:[b]},F?{signal:F}:{}),B?{extentSignal:B}:{}),w?{span:w}:{})}}class Sc extends Zi{clone(){return new Sc(null,ft(this.bins))}constructor(f,m){super(f),this.bins=m}static makeFromEncoding(f,m){const b=m.reduceFieldDef((w,A,O)=>{if(Sa(A)&&Ji(A.bin)){const{key:F,binComponent:B}=Cm(A,A.bin,m);w[F]=W(W(W({},B),w[F]),function(d,f,m,b){var w,A;if(kf(f,m)){const O=zs(d)&&null!=(A=null!=(w=d.axis(m))?w:d.legend(m))?A:{},F=Ut(f,{expr:"datum"}),B=Ut(f,{expr:"datum",binSuffix:"end"});return{formulaAs:Ut(f,{binSuffix:"range",forAs:!0}),formula:Fv(F,B,O.format,O.formatType,b)}}return{}}(m,A,O,m.config))}return w},{});return rn(b)?null:new Sc(f,b)}static makeFromTransform(f,m,b){const{key:w,binComponent:A}=Cm(m,m.bin,b);return new Sc(f,{[w]:A})}merge(f,m){for(const b of ut(f.bins))b in this.bins?(m(f.bins[b].signal,this.bins[b].signal),this.bins[b].as=Nn([...this.bins[b].as,...f.bins[b].as],sn)):this.bins[b]=f.bins[b];for(const b of f.children)f.removeChild(b),b.parent=this;f.remove()}producedFields(){return new Set(Si(this.bins).map(f=>f.as).flat(2))}dependentFields(){return new Set(Si(this.bins).map(f=>f.field))}hash(){return`Bin ${sn(this.bins)}`}assemble(){return Si(this.bins).flatMap(f=>{const m=[],[b,...w]=f.as,B=f.bin,{extent:A}=B,O=gn(B,["extent"]),F=W(W(W({type:"bin",field:Ii(f.field),as:b,signal:f.signal},jr(A)?{extent:null}:{extent:A}),f.span?{span:{signal:`span(${f.span})`}}:{}),O);!A&&f.extentSignal&&(m.push({type:"extent",field:Ii(f.field),signal:f.extentSignal}),F.extent={signal:f.extentSignal}),m.push(F);for(const $ of w)for(let U=0;U<2;U++)m.push({type:"formula",expr:Ut({field:b[U]},{expr:"datum"}),as:$[U]});return f.formula&&m.push({type:"formula",expr:f.formula,as:f.formulaAs}),m})}}function dM(d,f,m,b){var w;const A=zs(b)?b.encoding[yu(f)]:void 0;if(Sa(m)&&zs(b)&&Sw(m,A,b.markDef,b.config))d.add(Ut(m,{})),d.add(Ut(m,{suffix:"end"})),m.bin&&kf(m,f)&&d.add(Ut(m,{binSuffix:"range"}));else if(function(d){return d in ot}(f)){const O=function(d){switch(d){case Te:return"y";case L:return"y2";case Je:return"x";case q:return"x2"}}(f);d.add(b.getName(O))}else d.add(Ut(m));return Ro(m)&&function(d){return qe.isObject(d)&&"field"in d}(null===(w=m.scale)||void 0===w?void 0:w.range)&&d.add(m.scale.range.field),d}class eu extends Zi{clone(){return new eu(null,new Set(this.dimensions),ft(this.measures))}constructor(f,m,b){super(f),this.dimensions=m,this.measures=b}get groupBy(){return this.dimensions}static makeFromEncoding(f,m){let b=!1;m.forEachFieldDef(O=>{O.aggregate&&(b=!0)});const w={},A=new Set;return b&&(m.forEachFieldDef((O,F)=>{const{aggregate:B,field:$}=O;if(B)if("count"===B){null!=w["*"]||(w["*"]={}),w["*"].count=new Set([Ut(O,{forAs:!0})])}else{if(oa(B)||ds(B)){const Ge=oa(B)?"argmin":"argmax",dt=B[Ge];null!=w[dt]||(w[dt]={}),w[dt][Ge]=new Set([Ut({op:Ge,field:dt},{forAs:!0})])}else null!=w[$]||(w[$]={}),w[$][B]=new Set([Ut(O,{forAs:!0})]);kr(F)&&"unaggregated"===m.scaleDomain(F)&&(null!=w[$]||(w[$]={}),w[$].min=new Set([Ut({field:$,aggregate:"min"},{forAs:!0})]),w[$].max=new Set([Ut({field:$,aggregate:"max"},{forAs:!0})]))}else dM(A,F,O,m)}),A.size+ut(w).length!==0)?new eu(f,A,w):null}static makeFromTransform(f,m){var B;const b=new Set,w={};for(const $ of m.aggregate){const{op:U,field:ee,as:ce}=$;if(U)if("count"===U){null!=w["*"]||(w["*"]={}),w["*"].count=new Set([ce||Ut($,{forAs:!0})])}else null!=w[ee]||(w[ee]={}),w[ee][U]=new Set([ce||Ut($,{forAs:!0})])}for(const $ of null!=(B=m.groupby)?B:[])b.add($);return b.size+ut(w).length===0?null:new eu(f,b,w)}merge(f){return Gn(this.dimensions,f.dimensions)?(function(d,f){var m;for(const b of ut(f)){const w=f[b];for(const A of ut(w))b in d?d[b][A]=new Set([...null!=(m=d[b][A])?m:[],...w[A]]):d[b]={[A]:w[A]}}}(this.measures,f.measures),!0):(function(...d){rl.debug(...d)}("different dimensions, cannot merge"),!1)}addDimensions(f){f.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...ut(this.measures)])}producedFields(){const f=new Set;for(const m of ut(this.measures))for(const b of ut(this.measures[m])){const w=this.measures[m][b];0===w.size?f.add(`${b}_${m}`):w.forEach(f.add,f)}return f}hash(){return`Aggregate ${sn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const f=[],m=[],b=[];for(const A of ut(this.measures))for(const O of ut(this.measures[A]))for(const F of this.measures[A][O])b.push(F),f.push(O),m.push("*"===A?null:Ii(A));return{type:"aggregate",groupby:[...this.dimensions].map(Ii),ops:f,fields:m,as:b}}}class Fp extends Zi{constructor(f,m,b,w){super(f),this.model=m,this.name=b,this.data=w,hn(this,"column",void 0),hn(this,"row",void 0),hn(this,"facet",void 0),hn(this,"childModel",void 0);for(const A of Nl){const O=m.facet[A];if(O){const{bin:F,sort:B}=O;this[A]=W({name:m.getName(`${A}_domain`),fields:[Ut(O),...Ji(F)?[Ut(O,{binSuffix:"end"})]:[]]},Eu(B)?{sortField:B}:K.isArray(B)?{sortIndexField:pm(O,A)}:{})}}this.childModel=m.child}hash(){let f="Facet";for(const m of Nl)this[m]&&(f+=` ${m.charAt(0)}:${sn(this[m])}`);return f}get fields(){const f=[];for(const b of Nl){var m;null!==(m=this[b])&&void 0!==m&&m.fields&&f.push(...this[b].fields)}return f}dependentFields(){const f=new Set(this.fields);for(const m of Nl)this[m]&&(this[m].sortField&&f.add(this[m].sortField.field),this[m].sortIndexField&&f.add(this[m].sortIndexField));return f}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const f={};for(const m of cs){const b=this.childModel.component.scales[m];if(b&&!b.merged){const w=b.get("type"),A=b.get("range");if(aa(w)&&Qr(A)){const F=Qb(jd(this.childModel,m));F?f[m]=F:It(Ca(m))}}}return f}assembleRowColumnHeaderData(f,m,b){const w={row:"y",column:"x",facet:void 0}[f],A=[],O=[],F=[];w&&b&&b[w]&&(m?(A.push(`distinct_${b[w]}`),O.push("max")):(A.push(b[w]),O.push("distinct")),F.push(`distinct_${b[w]}`));const{sortField:B,sortIndexField:$}=this[f];if(B){const{op:U=jl,field:ee}=B;A.push(ee),O.push(U),F.push(Ut(B,{forAs:!0}))}else $&&(A.push($),O.push("max"),F.push($));return{name:this[f].name,source:null!=m?m:this.data,transform:[W({type:"aggregate",groupby:this[f].fields},A.length?{fields:A,ops:O,as:F}:{})]}}assembleFacetHeaderData(f){var $;const{columns:m}=this.model.layout,{layoutHeaders:b}=this.model.component,w=[],A={};for(const U of Op){for(const ee of Vb){const ce=null!=($=b[U]&&b[U][ee])?$:[];for(const Se of ce){var O;if((null===(O=Se.axes)||void 0===O?void 0:O.length)>0){A[U]=!0;break}}}if(A[U]){const ee=`length(data("${this.facet.name}"))`;w.push({name:`${this.facet.name}_${U}`,transform:[{type:"sequence",start:0,stop:"row"===U?m?{signal:`ceil(${ee} / ${m})`}:1:m?{signal:`min(${ee}, ${m})`}:{signal:ee}}]})}}const{row:F,column:B}=A;return(F||B)&&w.unshift(this.assembleRowColumnHeaderData("facet",null,f)),w}assemble(){var F,B;const f=[];let m=null;const b=this.getChildIndependentFieldsWithStep(),{column:w,row:A,facet:O}=this;if(w&&A&&(b.x||b.y)){m=`cross_${this.column.name}_${this.row.name}`;const $=[].concat(null!=(F=b.x)?F:[],null!=(B=b.y)?B:[]),U=$.map(()=>"distinct");f.push({name:m,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:$,ops:U}]})}for(const $ of[Ln,co])this[$]&&f.push(this.assembleRowColumnHeaderData($,m,b));if(O){const $=this.assembleFacetHeaderData(b);$&&f.push(...$)}return f}}function Zf(d){return"'"===d[0]&&"'"===d[d.length-1]||'"'===d[0]&&'"'===d[d.length-1]?d.slice(1,-1):d}function fM(d){const f={};return Pe(d.filter,m=>{var b;if(j0(m)){let w=null;hw(m)?w=ba(m.equal):Df(m)?w=ba(m.lte):dd(m)?w=ba(m.lt):xf(m)?w=ba(m.gt):pw(m)?w=ba(m.gte):$0(m)?w=m.range[0]:Ev(m)&&(w=(null!=(b=m.oneOf)?b:m.in)[0]),w&&(Ph(w)?f[m.field]="date":K.isNumber(w)?f[m.field]="number":K.isString(w)&&(f[m.field]="string")),m.timeUnit&&(f[m.field]="date")}}),f}function jt(d){const f={};function m(b){Tf(b)?f[b.field]="date":"quantitative"===b.type&&function(d){return K.isString(d)&&At(["min","max"],d)}(b.aggregate)?f[b.field]="number":qs(b.field)>1?b.field in f||(f[b.field]="flatten"):Ro(b)&&Eu(b.sort)&&qs(b.sort.field)>1&&(b.sort.field in f||(f[b.sort.field]="flatten"))}if((zs(d)||Fc(d))&&d.forEachFieldDef((b,w)=>{if(Sa(b))m(b);else{const A=Or(w),O=d.fieldDef(A);m(_t(W({},b),{type:O.type}))}}),zs(d)){const{mark:b,markDef:w,encoding:A}=d;if(Af(b)&&!d.encoding.order){const F=A["horizontal"===w.orient?"y":"x"];Bt(F)&&"quantitative"===F.type&&!(F.field in f)&&(f[F.field]="number")}}return f}class Lr extends Zi{clone(){return new Lr(null,ft(this._parse))}constructor(f,m){super(f),hn(this,"_parse",void 0),this._parse=m}hash(){return`Parse ${sn(this._parse)}`}static makeExplicit(f,m,b){var w;let A={};const O=m.data;return!yc(O)&&null!=O&&null!==(w=O.format)&&void 0!==w&&w.parse&&(A=O.format.parse),this.makeWithAncestors(f,A,{},b)}static makeWithAncestors(f,m,b,w){for(const F of ut(b)){const B=w.getWithExplicit(F);void 0!==B.value&&(B.explicit||B.value===b[F]||"derived"===B.value||"flatten"===b[F]?delete b[F]:It(XC(F,b[F],B.value)))}for(const F of ut(m)){const B=w.get(F);void 0!==B&&(B===m[F]?delete m[F]:It(XC(F,m[F],B)))}const A=new Bf(m,b);w.copyAll(A);const O={};for(const F of ut(A.combine())){const B=A.get(F);null!==B&&(O[F]=B)}return 0===ut(O).length||w.parseNothing?null:new Lr(f,O)}get parse(){return this._parse}merge(f){this._parse=W(W({},this._parse),f.parse),f.remove()}assembleFormatParse(){const f={};for(const m of ut(this._parse)){const b=this._parse[m];1===qs(m)&&(f[m]=b)}return f}producedFields(){return new Set(ut(this._parse))}dependentFields(){return new Set(ut(this._parse))}assembleTransforms(f=!1){return ut(this._parse).filter(m=>!f||qs(m)>1).map(m=>{const b=function(d,f){const m=pr(d);return"number"===f?`toNumber(${m})`:"boolean"===f?`toBoolean(${m})`:"string"===f?`toString(${m})`:"date"===f?`toDate(${m})`:"flatten"===f?m:f.startsWith("date:")?`timeParse(${m},'${Zf(f.slice(5,f.length))}')`:f.startsWith("utc:")?`utcParse(${m},'${Zf(f.slice(4,f.length))}')`:(It(function(d){return`Unrecognized parse "${d}".`}(f)),null)}(m,this._parse[m]);return b?{type:"formula",expr:b,as:ls(m)}:null}).filter(m=>null!==m)}}class Ld extends Zi{clone(){return new Ld(null)}constructor(f){super(f)}dependentFields(){return new Set}producedFields(){return new Set([Pf])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Pf}}}class wm extends Zi{clone(){return new wm(null,this.params)}constructor(f,m){super(f),this.params=m}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${sn(this.params)}`}assemble(){return W({type:"graticule"},!0===this.params?{}:this.params)}}class Em extends Zi{clone(){return new Em(null,this.params)}constructor(f,m){super(f),this.params=m}dependentFields(){return new Set}producedFields(){var f;return new Set([null!=(f=this.params.as)?f:"data"])}hash(){return`Hash ${sn(this.params)}`}assemble(){return W({type:"sequence"},this.params)}}class Ac extends Zi{constructor(f){let m;if(super(null),hn(this,"_data",void 0),hn(this,"_name",void 0),hn(this,"_generator",void 0),null!=f||(f={name:"source"}),yc(f)||(m=f.format?W({},xt(f.format,["parse"])):{}),gE(f))this._data={values:f.values};else if(Cy(f)){if(this._data={url:f.url},!m.type){let b=/(?:\.([^.]+))?$/.exec(f.url)[1];At(["json","csv","tsv","dsv","topojson"],b)||(b="json"),m.type=b}}else mE(f)?this._data={values:[{type:"Sphere"}]}:($f(f)||yc(f))&&(this._data={});this._generator=yc(f),f.name&&(this._name=f.name),m&&!rn(m)&&(this._data.format=m)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(f){this._name=f}set parent(f){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return _t(W({name:this._name},this._data),{transform:[]})}}function Hb(d){return d instanceof Ac||d instanceof wm||d instanceof Em}var Uy=new WeakMap;class Wb{constructor(){Uy.set(this,{writable:!0,value:void 0}),or(this,Uy,!1)}setModified(){or(this,Uy,!0)}get modifiedFlag(){return function(d,f){return function(d,f){return f.get?f.get.call(d):f.value}(d,HC(d,f,"get"))}(this,Uy)}}class yl extends Wb{getNodeDepths(f,m,b){b.set(f,m);for(const w of f.children)this.getNodeDepths(w,m+1,b);return b}optimize(f){const b=[...this.getNodeDepths(f,0,new Map).entries()].sort((w,A)=>A[1]-w[1]);for(const w of b)this.run(w[0]);return this.modifiedFlag}}class Gb extends Wb{optimize(f){this.run(f);for(const m of f.children)this.optimize(m);return this.modifiedFlag}}class c2 extends Gb{mergeNodes(f,m){const b=m.shift();for(const w of m)f.removeChild(w),w.parent=b,w.remove()}run(f){const m=f.children.map(w=>w.hash()),b={};for(let w=0;w<m.length;w++)void 0===b[m[w]]?b[m[w]]=[f.children[w]]:b[m[w]].push(f.children[w]);for(const w of ut(b))b[w].length>1&&(this.setModified(),this.mergeNodes(f,b[w]))}}class d2 extends Gb{constructor(f){super(),hn(this,"requiresSelectionId",void 0),this.requiresSelectionId=f&&LE(f)}run(f){f instanceof Ld&&(this.requiresSelectionId&&(Hb(f.parent)||f.parent instanceof eu||f.parent instanceof Lr)||(this.setModified(),f.remove()))}}class hM extends Wb{optimize(f){return this.run(f,new Set),this.modifiedFlag}run(f,m){let b=new Set;f instanceof xr&&(b=f.producedFields(),jn(b,m)&&(this.setModified(),f.removeFormulas(m),0===f.producedFields.length&&f.remove()));for(const w of f.children)this.run(w,new Set([...m,...b]))}}class pM extends Gb{constructor(){super()}run(f){f instanceof ts&&!f.isRequired()&&(this.setModified(),f.remove())}}class aD extends yl{run(f){if(!(Hb(f)||f.numChildren()>1))for(const m of f.children)if(m instanceof Lr)if(f instanceof Lr)this.setModified(),f.merge(m);else{if(En(f.producedFields(),m.dependentFields()))continue;this.setModified(),m.swapWithParent()}}}class $s extends yl{run(f){const m=[...f.children],b=f.children.filter(w=>w instanceof Lr);if(f.numChildren()>1&&b.length>=1){const w={},A=new Set;for(const O of b){const F=O.parse;for(const B of ut(F))B in w?w[B]!==F[B]&&A.add(B):w[B]=F[B]}for(const O of A)delete w[O];if(!rn(w)){this.setModified();const O=new Lr(f,w);for(const F of m){if(F instanceof Lr)for(const B of ut(w))delete F.parse[B];f.removeChild(F),F.parent=O,F instanceof Lr&&0===ut(F.parse).length&&F.remove()}}}}}class qb extends yl{run(f){f instanceof ts||f.numChildren()>0||f instanceof Fp||f instanceof Ac||(this.setModified(),f.remove())}}class Yb extends yl{run(f){const m=f.children.filter(w=>w instanceof xr),b=m.pop();for(const w of m)this.setModified(),b.merge(w)}}class lD extends yl{run(f){const m=f.children.filter(w=>w instanceof eu),b={};for(const w of m){const A=sn(w.groupBy);A in b||(b[A]=[]),b[A].push(w)}for(const w of ut(b)){const A=b[w];if(A.length>1){const O=A.pop();for(const F of A)O.merge(F)&&(f.removeChild(F),F.parent=O,F.remove(),this.setModified())}}}}class gM extends yl{constructor(f){super(),this.model=f}run(f){const m=!(Hb(f)||f instanceof Nd||f instanceof Lr||f instanceof Ld),b=[],w=[];for(const A of f.children)A instanceof Sc&&(m&&!En(f.producedFields(),A.dependentFields())?b.push(A):w.push(A));if(b.length>0){const A=b.pop();for(const O of b)A.merge(O,this.model.renameSignal.bind(this.model));this.setModified(),f instanceof Sc?f.merge(A,this.model.renameSignal.bind(this.model)):A.swapWithParent()}if(w.length>1){const A=w.pop();for(const O of w)A.merge(O,this.model.renameSignal.bind(this.model));this.setModified()}}}class Hy extends yl{run(f){const m=[...f.children];if(!pi(m,O=>O instanceof ts)||f.numChildren()<=1)return;const w=[];let A;for(const O of m)if(O instanceof ts){let F=O;for(;1===F.numChildren();){const[B]=F.children;if(!(B instanceof ts))break;F=B}w.push(...F.children),A?(f.removeChild(O),O.parent=A.parent,A.parent.removeChild(A),A.parent=F,this.setModified()):A=F}else w.push(O);if(w.length){this.setModified();for(const O of w)O.parent.removeChild(O),O.parent=A}}}class da extends Zi{clone(){return new da(null,ft(this.transform))}constructor(f,m){super(f),this.transform=m}addDimensions(f){this.transform.groupby=Nn(this.transform.groupby.concat(f),m=>m)}dependentFields(){const f=new Set;return this.transform.groupby&&this.transform.groupby.forEach(f.add,f),this.transform.joinaggregate.map(m=>m.field).filter(m=>void 0!==m).forEach(f.add,f),f}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(f){var m;return null!=(m=f.as)?m:Ut(f)}hash(){return`JoinAggregateTransform ${sn(this.transform)}`}assemble(){const f=[],m=[],b=[];for(const A of this.transform.joinaggregate)m.push(A.op),b.push(this.getDefaultName(A)),f.push(void 0===A.field?null:A.field);const w=this.transform.groupby;return W({type:"joinaggregate",as:b,ops:m,fields:f},void 0!==w?{groupby:w}:{})}}class tu extends Zi{clone(){return new tu(null,ft(this._stack))}constructor(f,m){super(f),hn(this,"_stack",void 0),this._stack=m}static makeFromTransform(f,m){const{stack:b,groupby:w,as:A,offset:O="zero"}=m,F=[],B=[];if(void 0!==m.sort)for(const ee of m.sort)F.push(ee.field),B.push(Zn(ee.order,"ascending"));const $={field:F,order:B};let U;return U=function(d){return K.isArray(d)&&d.every(f=>K.isString(f))&&d.length>1}(A)?A:K.isString(A)?[A,`${A}_end`]:[`${m.stack}_start`,`${m.stack}_end`],new tu(f,{stackField:b,groupby:w,offset:O,sort:$,facetby:[],as:U})}static makeFromEncoding(f,m){const b=m.stack,{encoding:w}=m;if(!b)return null;const{groupbyChannel:A,fieldChannel:O,offset:F,impute:B}=b;let $;A&&($=Dd(w[A]));const U=function(d){return d.stack.stackBy.reduce((f,m)=>{const w=Ut(m.fieldDef);return w&&f.push(w),f},[])}(m),ee=m.encoding.order;let ce;return ce=K.isArray(ee)||Bt(ee)?lv(ee):U.reduce((Se,He)=>(Se.field.push(He),Se.order.push("y"===O?"descending":"ascending"),Se),{field:[],order:[]}),new tu(f,{dimensionFieldDef:$,stackField:m.vgField(O),facetby:[],stackby:U,sort:ce,offset:F,impute:B,as:[m.vgField(O,{suffix:"start",forAs:!0}),m.vgField(O,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(f){this._stack.facetby.push(...f)}dependentFields(){const f=new Set;return f.add(this._stack.stackField),this.getGroupbyFields().forEach(f.add,f),this._stack.facetby.forEach(f.add,f),this._stack.sort.field.forEach(f.add,f),f}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${sn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDef:f,impute:m,groupby:b}=this._stack;return f?f.bin?m?[Ut(f,{binSuffix:"mid"})]:[Ut(f,{}),Ut(f,{binSuffix:"end"})]:[Ut(f)]:null!=b?b:[]}assemble(){const f=[],{facetby:m,dimensionFieldDef:b,stackField:w,stackby:A,sort:O,offset:F,impute:B,as:$}=this._stack;if(B&&b){const{bandPosition:U=.5,bin:ee}=b;ee&&f.push({type:"formula",expr:`${U}*`+Ut(b,{expr:"datum"})+`+${1-U}*`+Ut(b,{expr:"datum",binSuffix:"end"}),as:Ut(b,{binSuffix:"mid",forAs:!0})}),f.push({type:"impute",field:w,groupby:[...A,...m],key:Ut(b,{binSuffix:"mid"}),method:"value",value:0})}return f.push({type:"stack",groupby:[...this.getGroupbyFields(),...m],field:w,sort:O,as:$,offset:F}),f}}class Bd extends Zi{clone(){return new Bd(null,ft(this.transform))}constructor(f,m){super(f),this.transform=m}addDimensions(f){this.transform.groupby=Nn(this.transform.groupby.concat(f),m=>m)}dependentFields(){var m,b;const f=new Set;return(null!=(m=this.transform.groupby)?m:[]).forEach(f.add,f),(null!=(b=this.transform.sort)?b:[]).forEach(w=>f.add(w.field)),this.transform.window.map(w=>w.field).filter(w=>void 0!==w).forEach(f.add,f),f}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(f){var m;return null!=(m=f.as)?m:Ut(f)}hash(){return`WindowTransform ${sn(this.transform)}`}assemble(){var ee;const f=[],m=[],b=[],w=[];for(const ce of this.transform.window)m.push(ce.op),b.push(this.getDefaultName(ce)),w.push(void 0===ce.param?null:ce.param),f.push(void 0===ce.field?null:ce.field);const A=this.transform.frame,O=this.transform.groupby;if(A&&null===A[0]&&null===A[1]&&m.every(ce=>kh(ce)))return W({type:"joinaggregate",as:b,ops:m,fields:f},void 0!==O?{groupby:O}:{});const F=[],B=[];if(void 0!==this.transform.sort)for(const ce of this.transform.sort)F.push(ce.field),B.push(null!=(ee=ce.order)?ee:"ascending");const U=this.transform.ignorePeers;return W(W(W({type:"window",params:w,as:b,ops:m,fields:f,sort:{field:F,order:B}},void 0!==U?{ignorePeers:U}:{}),void 0!==O?{groupby:O}:{}),void 0!==A?{frame:A}:{})}}function Mc(d){if(d instanceof Fp)if(1!==d.numChildren()||d.children[0]instanceof ts){const f=d.model.component.data.main;Wy(f);const m=function(d){return function f(m){if(!(m instanceof Fp)){const b=m.clone();if(b instanceof ts){const w=Ip+b.getSource();b.setSource(w),d.model.component.data.outputNodes[w]=b}else(b instanceof eu||b instanceof tu||b instanceof Bd||b instanceof da)&&b.addDimensions(d.fields);for(const w of m.children.flatMap(f))w.parent=b;return[b]}return m.children.flatMap(f)}}(d),b=d.children.map(m).flat();for(const w of b)w.parent=f}else{const f=d.children[0];(f instanceof eu||f instanceof tu||f instanceof Bd||f instanceof da)&&f.addDimensions(d.fields),f.swapWithParent(),Mc(d)}else d.children.map(Mc)}function Wy(d){if(d instanceof ts&&d.type===ir.Main&&1===d.numChildren()){const f=d.children[0];f instanceof Fp||(f.swapWithParent(),Wy(d))}}const Ip="scale_";function Dm(d){for(const f of d){for(const m of f.children)if(m.parent!==f)return!1;if(!Dm(f.children))return!1}return!0}function js(d,f){let m=!1;for(const b of f)m=d.optimize(b)||m;return m}function xm(d,f,m){let b=d.sources,w=!1;return w=js(new pM,b)||w,w=js(new d2(f),b)||w,b=b.filter(A=>A.numChildren()>0),w=js(new qb,b)||w,b=b.filter(A=>A.numChildren()>0),m||(w=js(new aD,b)||w,w=js(new gM(f),b)||w,w=js(new hM,b)||w,w=js(new $s,b)||w,w=js(new lD,b)||w,w=js(new Yb,b)||w,w=js(new c2,b)||w,w=js(new Hy,b)||w),d.sources=b,w}class Uo{constructor(f){hn(this,"signal",void 0),Object.defineProperty(this,"signal",{enumerable:!0,get:f})}static fromName(f,m){return new Uo(()=>f(m))}}function _l(d){zs(d)?function(d){const f=d.component.scales;for(const m of ut(f)){const b=Gy(d,m);if(f[m].setWithExplicit("domains",b),$d(d,m),d.component.data.isFaceted){let A=d;for(;!Fc(A)&&A.parent;)A=A.parent;if("shared"===A.component.resolve.scale[m])for(const F of b.value)ud(F)&&(F.data=Ip+F.data.replace(Ip,""))}}}(d):function(d){for(const m of d.children)_l(m);const f=d.component.scales;for(const m of ut(f)){let b,w=null;for(const A of d.children){const O=A.component.scales[m];if(O){b=void 0===b?O.getWithExplicit("domains"):Ks(b,O.getWithExplicit("domains"),"domains","scale",Zt);const F=O.get("selectionExtent");w&&F&&w.param!==F.param&&It(Xk),w=F}}f[m].setWithExplicit("domains",b),w&&f[m].set("selectionExtent",w,!0)}}(d)}function Gy(d,f){const m=d.getScaleComponent(f).get("type"),{encoding:b}=d,w=function(d,f,m,b){if("unaggregated"===d){const{valid:w,reason:A}=hD(f,m);if(!w)return void It(A)}else if(void 0===d&&b.useUnaggregatedDomain){const{valid:w}=hD(f,m);if(w)return"unaggregated"}return d}(d.scaleDomain(f),d.typedFieldDef(f),m,d.config.scale);return w!==d.scaleDomain(f)&&(d.specifiedScales[f]=_t(W({},d.specifiedScales[f]),{domain:w})),"x"===f&&Rs(b.x2)?Rs(b.x)?Ks(Hr(m,w,d,"x"),Hr(m,w,d,"x2"),"domain","scale",Zt):Hr(m,w,d,"x2"):"y"===f&&Rs(b.y2)?Rs(b.y)?Ks(Hr(m,w,d,"y"),Hr(m,w,d,"y2"),"domain","scale",Zt):Hr(m,w,d,"y2"):Hr(m,w,d,f)}function dD(d,f,m){var b;const w=null===(b=Fo(m))||void 0===b?void 0:b.unit;return"temporal"===f||w?function(d,f,m){return d.map(b=>({signal:`{data: ${xu(b,{timeUnit:m,type:f})}}`}))}(d,f,w):[d]}function Hr(d,f,m,b){const{encoding:w}=m,A=Rs(w[b]),{type:O}=A,F=A.timeUnit;if(function(d){return d&&d.unionWith}(f)){const ee=Hr(d,void 0,m,b),ce=dD(f.unionWith,O,F);return Vf([...ee.value,...ce])}if(mn(f))return Vf([f]);if(f&&"unaggregated"!==f&&!q0(f))return Vf(dD(f,O,F));const B=m.stack;if(B&&b===B.fieldChannel){if("normalize"===B.offset)return Oa([[0,1]]);const ee=m.requestDataName(ir.Main);return Oa([{data:ee,field:m.vgField(b,{suffix:"start"})},{data:ee,field:m.vgField(b,{suffix:"end"})}])}const $=kr(b)&&Bt(A)?function(d,f,m){if(!aa(m))return;const b=d.fieldDef(f),w=b.sort;if(Rv(w))return{op:"min",field:pm(b,f),order:"ascending"};const{stack:A}=d,O=A?[...A.groupbyField?[A.groupbyField]:[],...A.stackBy.map(F=>F.fieldDef.field)]:void 0;if(Eu(w))return fD(w,A&&!At(O,w.field));if(Iv(w)){const{encoding:F,order:B}=w,$=d.fieldDef(F),{aggregate:U,field:ee}=$,ce=A&&!At(O,ee);if(oa(U)||ds(U))return fD({field:Ut($),order:B},ce);if(kh(U)||!U)return fD({op:U,field:ee,order:B},ce)}else{if("descending"===w)return{op:"min",field:d.vgField(f),order:"descending"};if(At(["ascending",void 0],w))return!0}}(m,b,d):void 0;if(hc(A))return Oa(dD([A.datum],O,F));const U=A;if("unaggregated"===f){const ee=m.requestDataName(ir.Main),{field:ce}=A;return Oa([{data:ee,field:Ut({field:ce,aggregate:"min"})},{data:ee,field:Ut({field:ce,aggregate:"max"})}])}if(Ji(U.bin)){if(aa(d))return Oa("bin-ordinal"===d?[]:[{data:Mr($)?m.requestDataName(ir.Main):m.requestDataName(ir.Raw),field:m.vgField(b,kf(U,b)?{binSuffix:"range"}:{}),sort:!0!==$&&K.isObject($)?$:{field:m.vgField(b,{}),op:"min"}}]);{const{bin:ee}=U;if(Ji(ee)){const ce=sD(m,U.field,ee);return Oa([new Uo(()=>{const Se=m.getSignalName(ce);return`[${Se}.start, ${Se}.stop]`})])}return Oa([{data:m.requestDataName(ir.Main),field:m.vgField(b,{})}])}}if(U.timeUnit&&At(["time","utc"],d)&&Sw(U,zs(m)?m.encoding[yu(b)]:void 0,m.markDef,m.config)){const ee=m.requestDataName(ir.Main);return Oa([{data:ee,field:m.vgField(b)},{data:ee,field:m.vgField(b,{suffix:"end"})}])}return Oa($?[{data:Mr($)?m.requestDataName(ir.Main):m.requestDataName(ir.Raw),field:m.vgField(b),sort:$}]:[{data:m.requestDataName(ir.Main),field:m.vgField(b)}])}function fD(d,f){const{op:m,field:b,order:w}=d;return W(W({op:null!=m?m:f?"sum":jl},b?{field:Ii(b)}:{}),w?{order:w}:{})}function $d(d,f){var m;const b=d.component.scales[f],w=d.specifiedScales[f].domain,A=null===(m=d.fieldDef(f))||void 0===m?void 0:m.bin,O=q0(w)&&w,F=po(A)&&jr(A.extent)&&A.extent;(O||F)&&b.set("selectionExtent",null!=O?O:F,!0)}function hD(d,f){const{aggregate:m,type:b}=d;return m?K.isString(m)&&!S0[m]?{valid:!1,reason:dL(m)}:"quantitative"===b&&"log"===f?{valid:!1,reason:rF(d)}:{valid:!0}:{valid:!1,reason:tw(d)}}function Zt(d,f,m,b){return d.explicit&&f.explicit&&It(function(d,f,m,b){return`Conflicting ${f.toString()} property "${d.toString()}" (${qt(m)} and ${qt(b)}). Using the union of the two domains.`}(m,b,d.value,f.value)),{explicit:d.explicit,value:[...d.value,...f.value]}}function mM(d){const f=Nn(d.map(O=>{if(ud(O)){return gn(O,["sort"])}return O}),sn),m=Nn(d.map(O=>{if(ud(O)){const F=O.sort;return void 0!==F&&!Mr(F)&&("op"in F&&"count"===F.op&&delete F.field,"ascending"===F.order&&delete F.order),F}}).filter(O=>void 0!==O),sn);if(0===f.length)return;if(1===f.length){const O=d[0];if(ud(O)&&m.length>0){let F=m[0];return m.length>1?(It(gg),F=!0):K.isObject(F)&&"field"in F&&O.field===F.field&&(F=!F.order||{order:F.order}),_t(W({},O),{sort:F})}return O}const b=Nn(m.map(O=>Mr(O)||!("op"in O)||K.isString(O.op)&&O.op in $C?O:(It(function(d){return`Dropping sort property ${qt(d)} as unioned domains only support boolean or op "count", "min", and "max".`}(O)),!0)),sn);let w;1===b.length?w=b[0]:b.length>1&&(It(gg),w=!0);const A=Nn(d.map(O=>ud(O)?O.data:null),O=>O);return W(1===A.length&&null!==A[0]?{data:A[0],fields:f.map(F=>F.field)}:{fields:f},w?{sort:w}:{})}function Qb(d){if(ud(d)&&K.isString(d.field))return d.field;if(function(d){return!K.isArray(d)&&"fields"in d&&!("data"in d)}(d)){let f;for(const m of d.fields)if(ud(m)&&K.isString(m.field))if(f){if(f!==m.field)return It("Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect."),f}else f=m.field;return It("Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect."),f}if(function(d){return!K.isArray(d)&&"fields"in d&&"data"in d}(d)){It("Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.");const f=d.fields[0];return K.isString(f)?f:void 0}}function jd(d,f){return mM(d.component.scales[f].get("domains").map(w=>(ud(w)&&(w.data=d.lookupDataSource(w.data)),w)))}function Tc(d){return Pp(d)||Am(d)?d.children.reduce((f,m)=>f.concat(Tc(m)),nu(d)):nu(d)}function nu(d){return ut(d.component.scales).reduce((f,m)=>{const b=d.component.scales[m];if(b.merged)return f;const w=b.combine(),Ge=w,{name:A,type:O,selectionExtent:F,reverse:U}=Ge,ee=gn(Ge,["name","type","selectionExtent","domains","range","reverse"]),ce=function(d,f,m,b){if(el(m)){if(Qr(d))return{step:{signal:`${f}_step`}}}else if(K.isObject(d)&&ud(d))return _t(W({},d),{data:b.lookupDataSource(d.data)});return d}(w.range,A,m,d),Se=jd(d,m),He=F?function(d,f,m,b){const w=dm(d,f.param,f);return{signal:ol(m.get("type"))&&K.isArray(b)&&b[0]>b[1]?`isValid(${w}) && reverse(${w})`:w}}(d,F,b,Se):null;return f.push(W(W(_t(W(W({name:A,type:O},Se?{domain:Se}:{}),He?{domainRaw:He}:{}),{range:ce}),void 0!==U?{reverse:U}:{}),ee)),f},[])}class Yy extends Bf{constructor(f,m){super({},{name:f}),hn(this,"merged",!1),this.setWithExplicit("type",m)}domainDefinitelyIncludesZero(){return!1!==this.get("zero")||pi(this.get("domains"),f=>K.isArray(f)&&2===f.length&&f[0]<=0&&f[1]>=0)}}const Wr=["range","scheme"];function Jb(d){return"x"===d?"width":"y"===d?"height":void 0}function zd(d,f){const m=d.fieldDef(f);if(null!=m&&m.bin){const{bin:b,field:w}=m,A=Jb(f),O=d.getName(A);if(K.isObject(b)&&b.binned&&void 0!==b.step)return new Uo(()=>{const F=d.scaleName(f),B=`(domain("${F}")[1] - domain("${F}")[0]) / ${b.step}`;return`${d.getSignalName(O)} / (${B})`});if(Ji(b)){const F=sD(d,w,b);return new Uo(()=>{const B=d.getSignalName(F),$=`(${B}.stop - ${B}.start) / ${B}.step`;return`${d.getSignalName(O)} / (${$})`})}}}function p2(d,f){const m=f.specifiedScales[d],{size:b}=f,A=f.getScaleComponent(d).get("type");for(const $ of Wr)if(void 0!==m[$]){const U=ar(A,$),ee=qh(d,$);if(U)if(ee)It(ee);else switch($){case"range":{const ce=m.range;if(K.isArray(ce)){if(el(d))return Vf(ce.map(Se=>{if("width"===Se||"height"===Se){const He=f.getName(Se),Ge=f.getSignalName.bind(f);return Uo.fromName(Ge,He)}return Se}))}else if(K.isObject(ce))return Vf({data:f.requestDataName(ir.Main),field:ce.field,sort:{op:"min",field:f.vgField(d)}});return Vf(ce)}case"scheme":return Vf(Zb(m[$]))}else It(ko(A,$,d))}if(d===tn||d===Ue){const $=d===tn?"width":"height",U=b[$];if(vo(U)){if(aa(A))return Vf({step:U.step});It(P0($))}}const{rangeMin:O,rangeMax:F}=m,B=function(d,f){const{size:m,config:b,mark:w,encoding:A}=f,O=f.getSignalName.bind(f),{type:F}=Rs(A[d]),$=f.getScaleComponent(d).get("type"),{domain:U,domainMid:ee}=f.specifiedScales[d];switch(d){case tn:case Ue:{if(At(["point","band"],$))if(d!==tn||m.width){if(d===Ue&&!m.height){const He=zg(b.view,"height");if(vo(He))return He}}else{const He=zg(b.view,"width");if(vo(He))return He}const ce=Jb(d),Se=f.getName(ce);return d===Ue&&ol($)?[Uo.fromName(O,Se),0]:[0,Uo.fromName(O,Se)]}case ge:{const Se=_M(w,f.component.scales[d].get("zero"),b),He=function(d,f,m,b){const w={x:zd(m,"x"),y:zd(m,"y")};switch(d){case"bar":case"tick":{if(void 0!==b.scale.maxBandSize)return b.scale.maxBandSize;const A=kc(f,w,b.view);return K.isNumber(A)?A-1:new Uo(()=>`${A.signal} - 1`)}case"line":case"trail":case"rule":return b.scale.maxStrokeWidth;case"text":return b.scale.maxFontSize;case"point":case"square":case"circle":{if(b.scale.maxSize)return b.scale.maxSize;const A=kc(f,w,b.view);return K.isNumber(A)?Math.pow(.95*A,2):new Uo(()=>`pow(0.95 * ${A.signal}, 2)`)}}throw new Error(F0("size",d))}(w,m,f,b);return G0($)?function(d,f,m){const b=()=>{const w=Ir(f),A=Ir(d),O=`(${w} - ${A}) / (${m} - 1)`;return`sequence(${A}, ${w} + ${O}, ${O})`};return mn(f)?new Uo(b):{signal:b()}}(Se,He,function(d,f,m,b){switch(d){case"quantile":return f.scale.quantileCount;case"quantize":return f.scale.quantizeCount;case"threshold":return void 0!==m&&K.isArray(m)?m.length+1:(It(function(d){return`Domain for ${d} is required for threshold scale.`}(b)),3)}}($,b,U,d)):[Se,He]}case he:return[0,2*Math.PI];case Be:return[0,360];case Y:return[0,new Uo(()=>`min(${f.getSignalName("width")},${f.getSignalName("height")})/2`)];case Ri:return[b.scale.minStrokeWidth,b.scale.maxStrokeWidth];case gr:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case re:return"symbol";case Q:case ne:case le:return"ordinal"===$?"nominal"===F?"category":"ordinal":void 0!==ee?"diverging":"rect"===w||"geoshape"===w?"heatmap":"ramp";case ct:case Qt:case ni:return[b.scale.minOpacity,b.scale.maxOpacity]}throw new Error(`Scale range undefined for channel ${d}`)}(d,f);return(void 0!==O||void 0!==F)&&ar(A,"rangeMin")&&K.isArray(B)&&2===B.length?Vf([null!=O?O:B[0],null!=F?F:B[1]]):Oa(B)}function Zb(d){return function(d){return!K.isString(d)&&!!d.name}(d)?W({scheme:d.name},xt(d,["name"])):{scheme:d}}function _M(d,f,m){if(f)return mn(f)?{signal:`${f.signal} ? 0 : ${_M(d,!1,m)}`}:0;switch(d){case"bar":case"tick":return m.scale.minBandSize;case"line":case"trail":case"rule":return m.scale.minStrokeWidth;case"text":return m.scale.minFontSize;case"point":case"square":case"circle":return m.scale.minSize}throw new Error(F0("size",d))}function kc(d,f,m){const b=vo(d.width)?d.width.step:Su(m,"width"),w=vo(d.height)?d.height.step:Su(m,"height");return f.x||f.y?new Uo(()=>`min(${[f.x?f.x.signal:b,f.y?f.y.signal:w].join(", ")})`):Math.min(b,w)}function n1(d,f){zs(d)?function(d,f){const m=d.component.scales,{config:b,encoding:w,markDef:A,specifiedScales:O}=d;for(const F of ut(m)){const B=O[F],$=m[F],U=d.getScaleComponent(F),ee=Rs(w[F]),ce=B[f],Se=U.get("type"),He=U.get("padding"),Ge=U.get("paddingInner"),dt=ar(Se,f),vt=qh(F,f);if(void 0!==ce&&(dt?vt&&It(vt):It(ko(Se,f,F))),dt&&void 0===vt)if(void 0!==ce){const St=ee.timeUnit,Rt=ee.type;switch(f){case"domainMax":case"domainMin":Ph(B[f])||"temporal"===Rt||St?$.set(f,{signal:xu(B[f],{type:Rt,timeUnit:St})},!0):$.set(f,B[f],!0);break;default:$.copyKeyFromObject(f,B)}}else{const St=f in i1?i1[f]({model:d,channel:F,fieldOrDatumDef:ee,scaleType:Se,scalePadding:He,scalePaddingInner:Ge,domain:B.domain,markDef:A,config:b}):b.scale[f];void 0!==St&&$.set(f,St,!1)}}}(d,f):r1(d,f)}const i1={bins:({model:d,fieldOrDatumDef:f})=>Bt(f)?function(d,f){const m=f.bin;if(Ji(m)){const b=sD(d,f.field,m);return new Uo(()=>d.getSignalName(b))}if(Kr(m)&&po(m)&&void 0!==m.step)return{step:m.step}}(d,f):void 0,interpolate:({channel:d,fieldOrDatumDef:f})=>function(d,f){if(At([Q,ne,le],d)&&"nominal"!==f)return"hcl"}(d,f.type),nice:({scaleType:d,channel:f,domain:m,fieldOrDatumDef:b})=>function(d,f,m,b){var w;if(!(null!==(w=Dd(b))&&void 0!==w&&w.bin||K.isArray(m)||At([zr_TIME,zr_UTC],d)))return f in Fs||void 0}(d,f,m,b),padding:({channel:d,scaleType:f,fieldOrDatumDef:m,markDef:b,config:w})=>function(d,f,m,b,w,A){if(d in Fs){if(uc(f)){if(void 0!==m.continuousPadding)return m.continuousPadding;const{type:O,orient:F}=w;if("bar"===O&&(!Bt(b)||!b.bin&&!b.timeUnit)&&("vertical"===F&&"x"===d||"horizontal"===F&&"y"===d))return A.continuousBandSize}if(f===zr_POINT)return m.pointPadding}}(d,f,w.scale,m,b,w.bar),paddingInner:({scalePadding:d,channel:f,markDef:m,config:b})=>function(d,f,m,b){if(void 0===d&&f in Fs){const{bandPaddingInner:w,barBandPaddingInner:A,rectBandPaddingInner:O}=b;return Zn(w,"bar"===m?A:O)}}(d,f,m.type,b.scale),paddingOuter:({scalePadding:d,channel:f,scaleType:m,markDef:b,scalePaddingInner:w,config:A})=>function(d,f,m,b,w,A){if(void 0===d&&f in Fs&&m===zr_BAND){const{bandPaddingOuter:O}=A;return Zn(O,mn(w)?{signal:`${w.signal}/2`}:w/2)}}(d,f,m,0,w,A.scale),reverse:({fieldOrDatumDef:d,scaleType:f,channel:m,config:b})=>function(d,f,m,b){return"x"===m&&void 0!==b.xReverse?ol(d)&&"descending"===f?mn(b.xReverse)?{signal:`!${b.xReverse.signal}`}:!b.xReverse:b.xReverse:!(!ol(d)||"descending"!==f)||void 0}(f,Bt(d)?d.sort:void 0,m,b.scale),zero:({channel:d,fieldOrDatumDef:f,domain:m,markDef:b,scaleType:w})=>function(d,f,m,b,w){if(m&&"unaggregated"!==m&&ol(w)){if(K.isArray(m)){const F=m[m.length-1];if(m[0]<=0&&F>=0)return!0}return!1}if("size"===d&&"quantitative"===f.type&&!G0(w))return!0;if((!Bt(f)||!f.bin)&&At([...cs,...Ht],d)){const{orient:O,type:F}=b;return!(At(["bar","area","line","trail"],F)&&("horizontal"===O&&"y"===d||"vertical"===O&&"x"===d))}return!1}(d,f,m,b,w)};function Ky(d){zs(d)?function(d){const f=d.component.scales;for(const m of Ll){const b=f[m];if(!b)continue;const w=p2(m,d);b.setWithExplicit("range",w)}}(d):r1(d,"range")}function r1(d,f){const m=d.component.scales;for(const b of d.children)"range"===f?Ky(b):n1(b,f);for(const b of ut(m)){let w;for(const A of d.children){const O=A.component.scales[b];O&&(w=Ks(w,O.getWithExplicit(f),f,"scale",RF((B,$)=>{switch(f){case"range":return B.step&&$.step?B.step-$.step:0}return 0})))}m[b].setWithExplicit(f,w)}}function CM(d,f,m,b){const w=function(d,f,m){switch(f.type){case"nominal":case"ordinal":var b;if(Ah(d)||"discrete"===Th(d))return"shape"===d&&"ordinal"===f.type&&It(Zr(d,"ordinal")),"ordinal";if(d in Fs){if(At(["rect","bar","image","rule"],m.type))return"band"}else if("arc"===m.type&&d in ug)return"band";return Ke(m[_u(d)])||Bv(f)&&null!==(b=f.axis)&&void 0!==b&&b.tickBand?"band":"point";case"temporal":return Ah(d)?"time":"discrete"===Th(d)?(It(Zr(d,"temporal")),"ordinal"):Bt(f)&&f.timeUnit&&Fo(f.timeUnit).utc?"utc":"time";case"quantitative":return Ah(d)?Bt(f)&&Ji(f.bin)?"bin-ordinal":"linear":"discrete"===Th(d)?(It(Zr(d,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(ZC(f.type))}(f,m,b),{type:A}=d;return kr(f)?void 0!==A?function(d,f){if(!kr(d))return!1;switch(d){case tn:case Ue:case he:case Y:return uc(f)||At(["band","point"],f);case ge:case Ri:case ct:case Qt:case ni:case Be:return uc(f)||G0(f)||At(["band","point","ordinal"],f);case Q:case ne:case le:return"band"!==f;case gr:case re:return"ordinal"===f||G0(f)}}(f,A)?Bt(m)&&!function(d,f){return At([Ti,$h],f)?void 0===d||aa(d):f===hd?At([zr_TIME,zr_UTC,void 0],d):f!==fd||At([zr_LOG,zr_POW,zr_SQRT,zr_SYMLOG,zr_QUANTILE,zr_QUANTIZE,zr_THRESHOLD,zr_LINEAR,void 0],d)}(A,m.type)?(It(function(d,f){return`FieldDef does not work with "${d}" scale. We are using "${f}" scale instead.`}(A,w)),w):A:(It(function(d,f,m){return`Channel "${d}" does not work with "${f}" scale. We are using "${m}" scale instead.`}(f,A,w)),w):w:null}function _D(d){d.component.scales=zs(d)?function(d){const{encoding:f,mark:m,markDef:b}=d;return Ll.reduce((w,A)=>{const O=Rs(f[A]);if(O&&m===Yh&&A===re&&O.type===jh)return w;let F=O&&O.scale;if(O&&null!==F&&!1!==F){null!=F||(F={});const B=CM(F,A,O,b);w[A]=new Yy(d.scaleName(`${A}`,!0),{value:B,explicit:F.type===B})}return w},{})}(d):function(d){const f=d.component.scales={},m={},b=d.component.resolve;for(const O of d.children){_D(O);for(const F of ut(O.component.scales)){var w;if(null!=(w=b.scale)[F]||(w[F]=_m(F,d)),"shared"===b.scale[F]){const B=m[F],$=O.component.scales[F].getWithExplicit("type");B?xv(B.value,$.value)?m[F]=Ks(B,$,"type","scale",DM):(b.scale[F]="independent",delete m[F]):m[F]=$}}}for(const O of ut(m)){const F=d.scaleName(O,!0);f[O]=new Yy(F,m[O]);for(const $ of d.children){const U=$.component.scales[O];U&&($.renameScale(U.get("name"),F),U.merged=!0)}}return f}(d)}const DM=RF((d,f)=>gw(d)-gw(f));class xM{constructor(){hn(this,"nameMap",void 0),this.nameMap={}}rename(f,m){this.nameMap[f]=m}has(f){return void 0!==this.nameMap[f]}get(f){for(;this.nameMap[f]&&f!==this.nameMap[f];)f=this.nameMap[f];return f}}function zs(d){return"unit"===(null==d?void 0:d.type)}function Fc(d){return"facet"===(null==d?void 0:d.type)}function Am(d){return"concat"===(null==d?void 0:d.type)}function Pp(d){return"layer"===(null==d?void 0:d.type)}class Mm{constructor(f,m,b,w,A,O,F){var B,$;this.type=m,this.parent=b,this.config=A,hn(this,"name",void 0),hn(this,"size",void 0),hn(this,"title",void 0),hn(this,"description",void 0),hn(this,"data",void 0),hn(this,"transforms",void 0),hn(this,"layout",void 0),hn(this,"scaleNameMap",void 0),hn(this,"projectionNameMap",void 0),hn(this,"signalNameMap",void 0),hn(this,"component",void 0),hn(this,"view",void 0),hn(this,"children",void 0),hn(this,"correctDataNames",U=>{var ee,ce,Se;return null!==(ee=U.from)&&void 0!==ee&&ee.data&&(U.from.data=this.lookupDataSource(U.from.data)),null!==(ce=U.from)&&void 0!==ce&&null!==(Se=ce.facet)&&void 0!==Se&&Se.data&&(U.from.facet.data=this.lookupDataSource(U.from.facet.data)),U}),this.parent=b,this.config=A,this.view=Fr(F),this.name=null!=(B=f.name)?B:w,this.title=Bl(f.title)?{text:f.title}:f.title?Fr(f.title):void 0,this.scaleNameMap=b?b.scaleNameMap:new xM,this.projectionNameMap=b?b.projectionNameMap:new xM,this.signalNameMap=b?b.signalNameMap:new xM,this.data=f.data,this.description=f.description,this.transforms=function(d){return d.map(f=>oE(f)?{filter:Gt(f.filter,Vh)}:f)}(null!=($=f.transform)?$:[]),this.layout="layer"===m||"unit"===m?{}:function(d,f,m){var F,B;const b=m[f],w={},{spacing:A,columns:O}=b;void 0!==A&&(w.spacing=A),void 0!==O&&(Mg(d)&&!Ag(d.facet)||tp(d))&&(w.columns=O),Sd(d)&&(w.columns=1);for(const $ of jg)if(void 0!==d[$])if("spacing"===$){const U=d[$];w[$]=K.isNumber(U)?U:{row:null!=(F=U.row)?F:A,column:null!=(B=U.column)?B:A}}else w[$]=d[$];return w}(f,m,A),this.component={data:{sources:b?b.component.data.sources:[],outputNodes:b?b.component.data.outputNodes:{},outputNodeRefCounts:b?b.component.data.outputNodeRefCounts:{},isFaceted:Mg(f)||b&&b.component.data.isFaceted&&void 0===f.data},layoutSize:new Bf,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:W({scale:{},axis:{},legend:{}},O?ft(O):{}),selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){!function(d,{ignoreRange:f}={}){_D(d),_l(d);for(const m of Gh)n1(d,m);f||Ky(d)}(this)}parseProjection(){Ru(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){zb(this)}assembleEncodeFromView(f){const b=gn(f,["style"]),w={};for(const O of ut(b)){const F=b[O];void 0!==F&&(w[O]=Nr(F))}return w}assembleGroupEncodeEntry(f){let m={};return this.view&&(m=this.assembleEncodeFromView(this.view)),f||(this.description&&(m.description=Nr(this.description)),"unit"!==this.type&&"layer"!==this.type)?rn(m)?void 0:m:W({width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height")},null!=m?m:{})}assembleLayout(){if(!this.layout)return;const O=this.layout,{spacing:f}=O,m=gn(O,["spacing"]),{component:b,config:w}=this,A=function(d,f){const m={};for(const b of Nl){const w=d[b];if(null!=w&&w.facetFieldDef){const{titleAnchor:A,titleOrient:O}=yt(["titleAnchor","titleOrient"],w.facetFieldDef.header,f,b),F=ue(b,O),B=eo(A,F);void 0!==B&&(m[F]=B)}}return rn(m)?void 0:m}(b.layoutHeaders,w);return W(W(W({padding:f},this.assembleDefaultLayout()),m),A?{titleBand:A}:{})}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:f}=this.component;let m=[];for(const b of Nl)f[b].title&&m.push(we(this,b));for(const b of Op)m=m.concat(kL(this,b));return m}assembleAxes(){return function(d,f){const{x:m=[],y:b=[]}=d;return[...m.map(w=>fm(w,"grid",f)),...b.map(w=>fm(w,"grid",f)),...m.map(w=>fm(w,"main",f)),...b.map(w=>fm(w,"main",f))].filter(w=>w)}(this.component.axes,this.config)}assembleLegends(){return Iu(this)}assembleProjections(){return Co(this)}assembleTitle(){var w;const A=null!=(w=this.title)?w:{},{encoding:f}=A,m=gn(A,["encoding"]),b=W(W(W({},fg(this.config.title).nonMarkTitleProperties),m),f?{encode:{update:f}}:{});if(b.text)return At(["unit","layer"],this.type)?At(["middle",void 0],b.anchor)&&(null!=b.frame||(b.frame="group")):null!=b.anchor||(b.anchor="start"),rn(b)?void 0:b}assembleGroup(f=[]){const m={};(f=f.concat(this.assembleSignals())).length>0&&(m.signals=f);const b=this.assembleLayout();b&&(m.layout=b),m.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const w=!this.parent||Fc(this.parent)?Tc(this):[];w.length>0&&(m.scales=w);const A=this.assembleAxes();A.length>0&&(m.axes=A);const O=this.assembleLegends();return O.length>0&&(m.legends=O),m}getName(f){return Pn((this.name?`${this.name}_`:"")+f)}getDataName(f){return this.getName(ir[f].toLowerCase())}requestDataName(f){const m=this.getDataName(f),b=this.component.data.outputNodeRefCounts;return b[m]=(b[m]||0)+1,m}getSizeSignalRef(f){if(Fc(this.parent)){const b=ov(eD(f)),w=this.component.scales[b];if(w&&!w.merged){const A=w.get("type"),O=w.get("range");if(aa(A)&&Qr(O)){const F=w.get("name"),$=Qb(jd(this,b));return $?{signal:ZE(F,w,Ut({aggregate:"distinct",field:$},{expr:"datum"}))}:(It(Ca(b)),null)}}}return{signal:this.signalNameMap.get(this.getName(f))}}lookupDataSource(f){const m=this.component.data.outputNodes[f];return m?m.getSource():f}getSignalName(f){return this.signalNameMap.get(f)}renameSignal(f,m){this.signalNameMap.rename(f,m)}renameScale(f,m){this.scaleNameMap.rename(f,m)}renameProjection(f,m){this.projectionNameMap.rename(f,m)}scaleName(f,m){return m?this.getName(f):Pl(f)&&kr(f)&&this.component.scales[f]||this.scaleNameMap.has(this.getName(f))?this.scaleNameMap.get(this.getName(f)):void 0}projectionName(f){return f?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}getScaleComponent(f){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const m=this.component.scales[f];return m&&!m.merged?m:this.parent?this.parent.getScaleComponent(f):void 0}getSelectionComponent(f,m){let b=this.component.selection[f];if(!b&&this.parent&&(b=this.parent.getSelectionComponent(f,m)),!b)throw new Error(function(d){return`Cannot find a selection named "${d}".`}(m));return b}hasAxisOrientSignalRef(){var f,m;return(null===(f=this.component.axes.x)||void 0===f?void 0:f.some(b=>b.hasOrientSignalRef()))||(null===(m=this.component.axes.y)||void 0===m?void 0:m.some(b=>b.hasOrientSignalRef()))}}class SM extends Mm{vgField(f,m={}){const b=this.fieldDef(f);if(b)return Ut(b,m)}reduceFieldDef(f,m){return function(d,f,m,b){return d?ut(d).reduce((w,A)=>{const O=d[A];return K.isArray(O)?O.reduce((F,B)=>f.call(b,F,B,A),w):f.call(b,w,O,A)},m):m}(this.getMapping(),(b,w,A)=>{const O=Dd(w);return O?f(b,O,A):b},m)}forEachFieldDef(f,m){Zh(this.getMapping(),(b,w)=>{const A=Dd(b);A&&f(A,w)},m)}}class s1 extends Zi{clone(){return new s1(null,ft(this.transform))}constructor(f,m){var w,A,O;super(f),this.transform=m,this.transform=ft(m);const b=null!=(w=this.transform.as)?w:[void 0,void 0];this.transform.as=[null!=(A=b[0])?A:"value",null!=(O=b[1])?O:"density"]}dependentFields(){var f;return new Set([this.transform.density,...null!=(f=this.transform.groupby)?f:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${sn(this.transform)}`}assemble(){const w=this.transform,{density:f}=w,m=gn(w,["density"]);return W({type:"kde",field:f},m)}}class Om extends Zi{clone(){return new Om(null,W({},this.filter))}constructor(f,m){super(f),this.filter=m}static make(f,m){const{config:b,mark:w,markDef:A}=m;if("filter"!==vn("invalid",A,b))return null;const F=m.reduceFieldDef((B,$,U)=>{const ee=kr(U)&&m.getScaleComponent(U);return ee&&ol(ee.get("type"))&&"count"!==$.aggregate&&!Af(w)&&(B[$.field]=$),B},{});return ut(F).length?new Om(f,F):null}dependentFields(){return new Set(ut(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${sn(this.filter)}`}assemble(){const f=ut(this.filter).reduce((m,b)=>{const w=this.filter[b],A=Ut(w,{expr:"datum"});return null!==w&&("temporal"===w.type?m.push(`(isDate(${A}) || (isValid(${A}) && isFinite(+${A})))`):"quantitative"===w.type&&(m.push(`isValid(${A})`),m.push(`isFinite(+${A})`))),m},[]);return f.length>0?{type:"filter",expr:f.join(" && ")}:null}}class eh extends Zi{clone(){return new eh(this.parent,ft(this.transform))}constructor(f,m){super(f),this.transform=m,this.transform=ft(m);const{flatten:b,as:w=[]}=this.transform;this.transform.as=b.map((A,O)=>{var F;return null!=(F=w[O])?F:A})}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${sn(this.transform)}`}assemble(){const{flatten:f,as:m}=this.transform;return{type:"flatten",fields:f,as:m}}}class o1 extends Zi{clone(){return new o1(null,ft(this.transform))}constructor(f,m){var w,A,O;super(f),this.transform=m,this.transform=ft(m);const b=null!=(w=this.transform.as)?w:[void 0,void 0];this.transform.as=[null!=(A=b[0])?A:"key",null!=(O=b[1])?O:"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${sn(this.transform)}`}assemble(){const{fold:f,as:m}=this.transform;return{type:"fold",fields:f,as:m}}}class Ic extends Zi{clone(){return new Ic(null,ft(this.fields),this.geojson,this.signal)}static parseAll(f,m){if(m.component.projection&&!m.component.projection.isFit)return f;let b=0;for(const w of[[Je,Te],[q,L]]){const A=w.map(O=>{const F=Rs(m.encoding[O]);return Bt(F)?F.field:hc(F)?{expr:`${F.datum}`}:Pr(F)?{expr:`${F.value}`}:void 0});(A[0]||A[1])&&(f=new Ic(f,A,null,m.getName("geojson_"+b++)))}if(m.channelHasField(re)){const w=m.typedFieldDef(re);w.type===jh&&(f=new Ic(f,null,w.field,m.getName("geojson_"+b++)))}return f}constructor(f,m,b,w){super(f),this.fields=m,this.geojson=b,this.signal=w}dependentFields(){var m;const f=(null!=(m=this.fields)?m:[]).filter(K.isString);return new Set([...this.geojson?[this.geojson]:[],...f])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${sn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],_t(W(W({type:"geojson"},this.fields?{fields:this.fields}:{}),this.geojson?{geojson:this.geojson}:{}),{signal:this.signal})]}}class Lp extends Zi{clone(){return new Lp(null,this.projection,ft(this.fields),ft(this.as))}constructor(f,m,b,w){super(f),this.projection=m,this.fields=b,this.as=w}static parseAll(f,m){if(!m.projectionName())return f;for(const b of[[Je,Te],[q,L]]){const w=b.map(O=>{const F=Rs(m.encoding[O]);return Bt(F)?F.field:hc(F)?{expr:`${F.datum}`}:Pr(F)?{expr:`${F.value}`}:void 0}),A=b[0]===q?"2":"";(w[0]||w[1])&&(f=new Lp(f,m.projectionName(),w,[m.getName(`x${A}`),m.getName(`y${A}`)]))}return f}dependentFields(){return new Set(this.fields.filter(K.isString))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${sn(this.fields)} ${sn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Ud extends Zi{clone(){return new Ud(null,ft(this.transform))}constructor(f,m){super(f),this.transform=m}dependentFields(){var f;return new Set([this.transform.impute,this.transform.key,...null!=(f=this.transform.groupby)?f:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(f){const{start:m=0,stop:b,step:w}=f;return{signal:`sequence(${[m,b,...w?[w]:[]].join(",")})`}}static makeFromTransform(f,m){return new Ud(f,m)}static makeFromEncoding(f,m){const b=m.encoding,w=b.x,A=b.y;if(Bt(w)&&Bt(A)){const O=w.impute?w:A.impute?A:void 0;if(void 0===O)return;const F=w.impute?A:A.impute?w:void 0,{method:B,value:$,frame:U,keyvals:ee}=O.impute,ce=cy(m.mark,b);return new Ud(f,W(W(W(W(W({impute:O.field,key:F.field},B?{method:B}:{}),void 0!==$?{value:$}:{}),U?{frame:U}:{}),void 0!==ee?{keyvals:ee}:{}),ce.length?{groupby:ce}:{}))}return null}hash(){return`Impute ${sn(this.transform)}`}assemble(){const{impute:f,key:m,keyvals:b,method:w,groupby:A,value:O,frame:F=[null,null]}=this.transform,B=_t(W(_t(W({type:"impute",field:f,key:m},b?{keyvals:yy(b)?this.processSequence(b):b}:{}),{method:"value"}),A?{groupby:A}:{}),{value:w&&"value"!==w?null:O});return w&&"value"!==w?[B,W({type:"window",as:[`imputed_${f}_value`],ops:[w],fields:[f],frame:F,ignorePeers:!1},A?{groupby:A}:{}),{type:"formula",expr:`datum.${f} === null ? datum.imputed_${f}_value : datum.${f}`,as:f}]:[B]}}class Tm extends Zi{clone(){return new Tm(null,ft(this.transform))}constructor(f,m){var w,A,O;super(f),this.transform=m,this.transform=ft(m);const b=null!=(w=this.transform.as)?w:[void 0,void 0];this.transform.as=[null!=(A=b[0])?A:m.on,null!=(O=b[1])?O:m.loess]}dependentFields(){var f;return new Set([this.transform.loess,this.transform.on,...null!=(f=this.transform.groupby)?f:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${sn(this.transform)}`}assemble(){const A=this.transform,{loess:f,on:m}=A,b=gn(A,["loess","on"]);return W({type:"loess",x:m,y:f},b)}}class Hd extends Zi{clone(){return new Hd(null,ft(this.transform),this.secondary)}constructor(f,m,b){super(f),this.transform=m,this.secondary=b}static make(f,m,b,w){const A=m.component.data.sources,{from:O}=b;let F=null;if(function(d){return"data"in d}(O)){let B=FM(O.data,A);B||(B=new Ac(O.data),A.push(B));const $=m.getName(`lookup_${w}`);F=new ts(B,$,ir.Lookup,m.component.data.outputNodeRefCounts),m.component.data.outputNodes[$]=F}else if(function(d){return"param"in d}(O)){const B=O.param;let $;b=W({as:B},b);try{$=m.getSelectionComponent(Pn(B),B)}catch(U){throw new Error(function(d){return`Lookups can only be performed on selection parameters. "${d}" is a variable parameter.`}(B))}if(F=$.materialized,!F)throw new Error(function(d){return`Cannot define and lookup the "${d}" selection in the same view. Try moving the lookup into a second, layered view?`}(B))}return new Hd(f,b,F.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?K.array(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${sn({transform:this.transform,secondary:this.secondary})}`}assemble(){let f;if(this.transform.from.fields)f=W({values:this.transform.from.fields},this.transform.as?{as:K.array(this.transform.as)}:{});else{let m=this.transform.as;K.isString(m)||(It('If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.'),m="_lookup"),f={as:[m]}}return W(W({type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup]},f),this.transform.default?{default:this.transform.default}:{})}}class Bp extends Zi{clone(){return new Bp(null,ft(this.transform))}constructor(f,m){var w,A,O;super(f),this.transform=m,this.transform=ft(m);const b=null!=(w=this.transform.as)?w:[void 0,void 0];this.transform.as=[null!=(A=b[0])?A:"prob",null!=(O=b[1])?O:"value"]}dependentFields(){var f;return new Set([this.transform.quantile,...null!=(f=this.transform.groupby)?f:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${sn(this.transform)}`}assemble(){const w=this.transform,{quantile:f}=w,m=gn(w,["quantile"]);return W({type:"quantile",field:f},m)}}class a1 extends Zi{clone(){return new a1(null,ft(this.transform))}constructor(f,m){var w,A,O;super(f),this.transform=m,this.transform=ft(m);const b=null!=(w=this.transform.as)?w:[void 0,void 0];this.transform.as=[null!=(A=b[0])?A:m.on,null!=(O=b[1])?O:m.regression]}dependentFields(){var f;return new Set([this.transform.regression,this.transform.on,...null!=(f=this.transform.groupby)?f:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${sn(this.transform)}`}assemble(){const A=this.transform,{regression:f,on:m}=A,b=gn(A,["regression","on"]);return W({type:"regression",x:m,y:f},b)}}class Wd extends Zi{clone(){return new Wd(null,ft(this.transform))}constructor(f,m){super(f),this.transform=m}addDimensions(f){var m;this.transform.groupby=Nn((null!=(m=this.transform.groupby)?m:[]).concat(f),b=>b)}producedFields(){}dependentFields(){var f;return new Set([this.transform.pivot,this.transform.value,...null!=(f=this.transform.groupby)?f:[]])}hash(){return`PivotTransform ${sn(this.transform)}`}assemble(){const{pivot:f,value:m,groupby:b,limit:w,op:A}=this.transform;return W(W(W({type:"pivot",field:f,value:m},void 0!==w?{limit:w}:{}),void 0!==A?{op:A}:{}),void 0!==b?{groupby:b}:{})}}class l1 extends Zi{clone(){return new l1(null,ft(this.transform))}constructor(f,m){super(f),this.transform=m}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${sn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function vD(d){let f=0;return function m(b,w){var A;if(b instanceof Ac&&!b.isGenerator&&!Cy(b.data)&&(d.push(w),w={name:null,source:w.name,transform:[]}),b instanceof Lr&&(b.parent instanceof Ac&&!w.source?(w.format=_t(W({},null!=(A=w.format)?A:{}),{parse:b.assembleFormatParse()}),w.transform.push(...b.assembleTransforms(!0))):w.transform.push(...b.assembleTransforms())),b instanceof Fp)return w.name||(w.name="data_"+f++),!w.source||w.transform.length>0?(d.push(w),b.data=w.name):b.data=w.source,void d.push(...b.assemble());switch((b instanceof wm||b instanceof Em||b instanceof Om||b instanceof Nd||b instanceof Qf||b instanceof Lp||b instanceof eu||b instanceof Hd||b instanceof Bd||b instanceof da||b instanceof o1||b instanceof eh||b instanceof s1||b instanceof Tm||b instanceof Bp||b instanceof a1||b instanceof Ld||b instanceof l1||b instanceof Wd)&&w.transform.push(b.assemble()),(b instanceof Sc||b instanceof xr||b instanceof Ud||b instanceof tu||b instanceof Ic)&&w.transform.push(...b.assemble()),b instanceof ts&&(w.source&&0===w.transform.length?b.setSource(w.source):b.parent instanceof ts?b.setSource(w.name):(w.name||(w.name="data_"+f++),b.setSource(w.name),1===b.numChildren()&&(d.push(w),w={name:null,source:w.name,transform:[]}))),b.numChildren()){case 0:b instanceof ts&&(!w.source||w.transform.length>0)&&d.push(w);break;case 1:m(b.children[0],w);break;default:{w.name||(w.name="data_"+f++);let O=w.name;!w.source||w.transform.length>0?d.push(w):O=w.source;for(const F of b.children)m(F,{name:null,source:O,transform:[]});break}}}}function u1(d){return"top"===d||"left"===d||mn(d)?"header":"footer"}function v2(d,f){const{facet:m,config:b,child:w,component:A}=d;if(d.channelHasField(f)){var O;const F=m[f],B=Mp("title",null,b,f);let $=No(F,b,{allowDisabling:!0,includeDefault:void 0===B||!!B});w.component.layoutHeaders[f].title&&($=K.isArray($)?$.join(", "):$,$+=` / ${w.component.layoutHeaders[f].title}`,w.component.layoutHeaders[f].title=null);const U=Mp("labelOrient",F.header,b,f),ee=null!==F.header&&Zn(null===(O=F.header)||void 0===O?void 0:O.labels,b.header.labels,!0),ce=At(["bottom","right"],U)?"footer":"header";A.layoutHeaders[f]={title:null!==F.header?$:null,facetFieldDef:F,[ce]:"facet"===f?[]:[c1(d,f,ee)]}}}function c1(d,f,m){const b="row"===f?"height":"width";return{labels:m,sizeSignal:d.child.component.layoutSize.get(b)?d.child.getSizeSignalRef(b):void 0,axes:[]}}function OM(d,f){const{child:m}=d;if(m.component.axes[f]){const{layoutHeaders:w,resolve:A}=d.component;if(A.axis[f]=dn(A,f),"shared"===A.axis[f]){const O="x"===f?"column":"row",F=w[O];for(const B of m.component.axes[f]){const $=u1(B.get("orient"));null!=F[$]||(F[$]=[c1(d,O,!1)]);const U=fm(B,"main",d.config,{header:!0});U&&F[$][0].axes.push(U),B.mainExtracted=!0}}}}function CD(d){for(const f of d.children)f.parseLayoutSize()}function d1(d,f){var F;const m=eD(f),b=ov(m),w=d.component.resolve,A=d.component.layoutSize;let O;for(const B of d.children){const $=B.component.layoutSize.getWithExplicit(m),U=null!=(F=w.scale[b])?F:_m(b,d);if("independent"===U&&"step"===$.value){O=void 0;break}if(O){if("independent"===U&&O.value!==$.value){O=void 0;break}O=Ks(O,$,m,"")}else O=$}if(O){for(const B of d.children)d.renameSignal(B.getName(m),d.getName(f)),B.component.layoutSize.set(m,"merged",!1);A.setWithExplicit(f,O)}else A.setWithExplicit(f,{explicit:!1,value:void 0})}function wD(d,f){const b=d.config,w=d.getScaleComponent("width"===f?"x":"y");if(w){const A=w.get("type"),O=w.get("range");if(aa(A)){const F=zg(b.view,f);return Qr(O)||vo(F)?"step":F}return Xw(b.view,f)}if(d.hasProjection||"arc"===d.mark)return Xw(b.view,f);{const A=zg(b.view,f);return vo(A)?A.step:A}}function ED(d,f,m){return Ut(f,W({suffix:`by_${Ut(d)}`},null!=m?m:{}))}class km extends SM{constructor(f,m,b,w){super(f,"facet",m,b,w,f.resolve),hn(this,"facet",void 0),hn(this,"child",void 0),hn(this,"children",void 0),this.child=kD(f.spec,this,this.getName("child"),void 0,w),this.children=[this.child],this.facet=this.initFacet(f.facet)}initFacet(f){if(!Ag(f))return{facet:this.initFacetFieldDef(f,"facet")};const m=ut(f),b={};for(const w of m){if(![co,Ln].includes(w)){It(F0(w,"facet"));break}const A=f[w];if(void 0===A.field){It(hv(A,w));break}b[w]=this.initFacetFieldDef(A,w)}return b}initFacetFieldDef(f,m){const b=oy(f,m);return b.header?b.header=Fr(b.header):null===b.header&&(b.header=null),b}channelHasField(f){return!!this.facet[f]}fieldDef(f){return this.facet[f]}parseData(){this.component.data=Zy(this),this.child.parseData()}parseLayoutSize(){CD(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),function(d){for(const f of Nl)v2(d,f);OM(d,"x"),OM(d,"y")}(this)}assembleSelectionTopLevelSignals(f){return this.child.assembleSelectionTopLevelSignals(f)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(f){return this.child.assembleSelectionData(f)}getHeaderLayoutMixins(){const f={};for(const A of Nl)for(const O of Vb){const F=this.component.layoutHeaders[A],B=F[O],{facetFieldDef:$}=F;if($){const U=Mp("titleOrient",$.header,this.config,A);if(["right","bottom"].includes(U)){const ee=ue(A,U);null!=f.titleAnchor||(f.titleAnchor={}),f.titleAnchor[ee]="end"}}if(null!=B&&B[0]){const U="row"===A?"height":"width",ee="header"===O?"headerBand":"footerBand";"facet"!==A&&!this.child.component.layoutSize.get(U)&&(null!=f[ee]||(f[ee]={}),f[ee][A]=.5),F.title&&(null!=f.offset||(f.offset={}),f.offset["row"===A?"rowTitle":"columnTitle"]=10)}}return f}assembleDefaultLayout(){const{column:f,row:m}=this.facet,b=f?this.columnDistinctSignal():m?1:void 0;let w="all";return(!m&&"independent"===this.component.resolve.scale.x||!f&&"independent"===this.component.resolve.scale.y)&&(w="none"),_t(W(W({},this.getHeaderLayoutMixins()),b?{columns:b}:{}),{bounds:"full",align:w})}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof km))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(f){return this.parent&&this.parent instanceof km?W(W({},this.channelHasField("column")?{encode:{update:{columns:{field:Ut(this.facet.column,{prefix:"distinct"})}}}}:{}),super.assembleGroup(f)):super.assembleGroup(f)}getCardinalityAggregateForChild(){const f=[],m=[],b=[];if(this.child instanceof km){if(this.child.channelHasField("column")){const w=Ut(this.child.facet.column);f.push(w),m.push("distinct"),b.push(`distinct_${w}`)}}else for(const w of cs){const A=this.child.component.scales[w];if(A&&!A.merged){const O=A.get("type"),F=A.get("range");if(aa(O)&&Qr(F)){const $=Qb(jd(this.child,w));$?(f.push($),m.push("distinct"),b.push(`distinct_${$}`)):It(Ca(w))}}}return{fields:f,ops:m,as:b}}assembleFacet(){const{name:f,data:m}=this.component.data.facetRoot,{row:b,column:w}=this.facet,{fields:A,ops:O,as:F}=this.getCardinalityAggregateForChild(),B=[];for(const U of Nl){const ee=this.facet[U];if(ee){B.push(Ut(ee));const{bin:ce,sort:Se}=ee;if(Ji(ce)&&B.push(Ut(ee,{binSuffix:"end"})),Eu(Se)){const{field:He,op:Ge=jl}=Se,dt=ED(ee,Se);b&&w?(A.push(dt),O.push("max"),F.push(dt)):(A.push(He),O.push(Ge),F.push(dt))}else if(K.isArray(Se)){const He=pm(ee,U);A.push(He),O.push("max"),F.push(He)}}}const $=!!b&&!!w;return W({name:f,data:m,groupby:B},$||A.length>0?{aggregate:W(W({},$?{cross:$}:{}),A.length?{fields:A,ops:O,as:F}:{})}:{})}facetSortFields(f){const{facet:m}=this,b=m[f];return b?Eu(b.sort)?[ED(b,b.sort,{expr:"datum"})]:K.isArray(b.sort)?[pm(b,f,{expr:"datum"})]:[Ut(b,{expr:"datum"})]:[]}facetSortOrder(f){const{facet:m}=this,b=m[f];if(b){const{sort:w}=b;return[(Eu(w)?w.order:!K.isArray(w)&&w)||"ascending"]}return[]}assembleLabelTitle(){const{facet:f,config:m}=this;if(f.facet)return Tp(f.facet,"facet",m);const b={row:["top","bottom"],column:["left","right"]};for(const A of Op)if(f[A]){var w;const O=Mp("labelOrient",null===(w=f[A])||void 0===w?void 0:w.header,m,A);if(b[A].includes(O))return Tp(f[A],A,m)}}assembleMarks(){const{child:f}=this,b=function(d){const f=[],m=vD(f);for(const b of d.children)m(b,{source:d.name,name:null,transform:[]});return f}(this.component.data.facetRoot),w=f.assembleGroupEncodeEntry(!1),A=this.assembleLabelTitle()||f.assembleTitle(),O=f.assembleGroupStyle();return[W(W(W(_t(W(W({name:this.getName("cell"),type:"group"},A?{title:A}:{}),O?{style:O}:{}),{from:{facet:this.assembleFacet()},sort:{field:Nl.map(B=>this.facetSortFields(B)).flat(),order:Nl.map(B=>this.facetSortOrder(B)).flat()}}),b.length>0?{data:b}:{}),w?{encode:{update:w}}:{}),f.assembleGroup(Ey(this,[])))]}getMapping(){return this.facet}}function FM(d,f){for(const O of f){var m,b,w,A;const F=O.data;if(d.name&&O.hasName()&&d.name!==O.dataName)continue;const B=null===(m=d.format)||void 0===m?void 0:m.mesh,$=null===(b=F.format)||void 0===b?void 0:b.feature;if(B&&$)continue;const U=null===(w=d.format)||void 0===w?void 0:w.feature;if((U||$)&&U!==$)continue;const ee=null===(A=F.format)||void 0===A?void 0:A.mesh;if(!B&&!ee||B===ee)if(gE(d)&&gE(F)){if(gt(d.values,F.values))return O}else if(Cy(d)&&Cy(F)){if(d.url===F.url)return O}else if($f(d)&&d.name===O.dataName)return O}return null}function Zy(d){var dt,vt,St,Rt,an,Vt,kn,Bn,ui,f;let m=function(d,f){if(d.data||!d.parent){if(null===d.data){const b=new Ac({values:[]});return f.push(b),b}const m=FM(d.data,f);if(m)return yc(d.data)||(m.data.format=ht({},d.data.format,m.data.format)),!m.hasName()&&d.data.name&&(m.dataName=d.data.name),m;{const b=new Ac(d.data);return f.push(b),b}}return d.parent.component.data.facetRoot?d.parent.component.data.facetRoot:d.parent.component.data.main}(d,d.component.data.sources);const{outputNodes:b,outputNodeRefCounts:w}=d.component.data,A=d.data,F=A&&(yc(A)||Cy(A)||gE(A))||!d.parent?new CA:d.parent.component.data.ancestorParse.clone();yc(A)?(op(A)?m=new Em(m,A.sequence):Hg(A)&&(m=new wm(m,A.graticule)),F.parseNothing=!0):null===(null==A||null===(f=A.format)||void 0===f?void 0:f.parse)&&(F.parseNothing=!0),m=null!=(dt=Lr.makeExplicit(m,d,F))?dt:m,m=new Ld(m);const B=d.parent&&Pp(d.parent);(zs(d)||Fc(d))&&B&&(m=null!=(vt=Sc.makeFromEncoding(m,d))?vt:m),d.transforms.length>0&&(m=function(d,f,m){var w,A;let b=0;for(const O of f.transforms){let F,B;if(lE(O))B=d=new Qf(d,O),F="derived";else if(oE(O)){const $=fM(O);B=d=null!=(w=Lr.makeWithAncestors(d,{},$,m))?w:d,d=new Nd(d,f,O.filter)}else if(uE(O))B=d=Sc.makeFromTransform(d,O,f),F="number";else if(CL(O))F="date",void 0===m.getWithExplicit(O.field).value&&(d=new Lr(d,{[O.field]:F}),m.set(O.field,F,!1)),B=d=xr.makeFromTransform(d,O);else if(gA(O))B=d=eu.makeFromTransform(d,O),F="number",LE(f)&&(d=new Ld(d));else if(pA(O))B=d=Hd.make(d,f,O,b++),F="derived";else if(Ug(O))B=d=new Bd(d,O),F="number";else if(zi(O))B=d=new da(d,O),F="number";else if(dE(O))B=d=tu.makeFromTransform(d,O),F="derived";else if(Td(O))B=d=new o1(d,O),F="derived";else if(Od(O))B=d=new eh(d,O),F="derived";else if(ei(O))B=d=new Wd(d,O),F="derived";else if(aE(O))d=new l1(d,O);else if(cE(O))B=d=Ud.makeFromTransform(d,O),F="derived";else if(mt(O))B=d=new s1(d,O),F="derived";else if(Lf(O))B=d=new Bp(d,O),F="derived";else if(db(O))B=d=new a1(d,O),F="derived";else{if(!cl(O)){It(pg(O));continue}B=d=new Tm(d,O),F="derived"}if(B&&void 0!==F)for(const $ of null!=(A=B.producedFields())?A:[])m.set($,F,!1)}return d}(m,d,F));const $=function(d){const f={};if(zs(d)&&d.component.selection)for(const m of ut(d.component.selection)){const b=d.component.selection[m];for(const w of b.project.items)!w.channel&&qs(w.field)>1&&(f[w.field]="flatten")}return f}(d),U=jt(d);m=null!=(St=Lr.makeWithAncestors(m,{},W(W({},$),U),F))?St:m,zs(d)&&(m=Ic.parseAll(m,d),m=Lp.parseAll(m,d)),(zs(d)||Fc(d))&&(B||(m=null!=(Rt=Sc.makeFromEncoding(m,d))?Rt:m),m=null!=(an=xr.makeFromEncoding(m,d))?an:m,m=Qf.parseAllForSortIndex(m,d));const ee=d.getDataName(ir.Raw),ce=new ts(m,ee,ir.Raw,w);if(b[ee]=ce,m=ce,zs(d)){const Mi=eu.makeFromEncoding(m,d);Mi&&(m=Mi,LE(d)&&(m=new Ld(m))),m=null!=(Vt=Ud.makeFromEncoding(m,d))?Vt:m,m=null!=(kn=tu.makeFromEncoding(m,d))?kn:m}zs(d)&&(m=null!=(Bn=Om.make(m,d))?Bn:m);const Se=d.getDataName(ir.Main),He=new ts(m,Se,ir.Main,w);b[Se]=He,m=He,zs(d)&&function(d,f){var m;for(const[b,w]of sr(null!=(m=d.component.selection)?m:{})){const A=d.getName(`lookup_${b}`);d.component.data.outputNodes[A]=w.materialized=new ts(new Nd(f,d,{param:b}),A,ir.Lookup,d.component.data.outputNodeRefCounts)}}(d,He);let Ge=null;if(Fc(d)){const Mi=d.getName("facet");m=null!=(ui=function(d,f){const{row:m,column:b}=f;if(m&&b){let w=null;for(const A of[m,b])if(Eu(A.sort)){const{field:O,op:F=jl}=A.sort;d=w=new da(d,{joinaggregate:[{op:F,field:O,as:ED(A,A.sort,{forAs:!0})}],groupby:[Ut(A)]})}return w}return null}(m,d.facet))?ui:m,Ge=new Fp(m,d,Mi,He.getSource()),b[Mi]=Ge}return _t(W({},d.component.data),{outputNodes:b,outputNodeRefCounts:w,raw:ce,main:He,facetRoot:Ge,ancestorParse:F})}class DD extends Mm{constructor(f,m,b,w){var A,O,F,B;super(f,"concat",m,b,w,f.resolve),hn(this,"children",void 0),("shared"===(null===(A=f.resolve)||void 0===A||null===(O=A.axis)||void 0===O?void 0:O.x)||"shared"===(null===(F=f.resolve)||void 0===F||null===(B=F.axis)||void 0===B?void 0:B.y))&&It("Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415)."),this.children=this.getChildren(f).map(($,U)=>kD($,this,this.getName(`concat_${U}`),void 0,w))}parseData(){this.component.data=Zy(this);for(const f of this.children)f.parseData()}parseSelections(){this.component.selection={};for(const f of this.children){f.parseSelections();for(const m of ut(f.component.selection))this.component.selection[m]=f.component.selection[m]}}parseMarkGroup(){for(const f of this.children)f.parseMarkGroup()}parseAxesAndHeaders(){for(const f of this.children)f.parseAxesAndHeaders()}getChildren(f){return Sd(f)?f.vconcat:Jv(f)?f.hconcat:f.concat}parseLayoutSize(){!function(d){CD(d);const m=void 0===d.layout.columns?"height":"childHeight";d1(d,1===d.layout.columns?"width":"childWidth"),d1(d,m)}(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(f){return this.children.reduce((m,b)=>b.assembleSelectionTopLevelSignals(m),f)}assembleSignals(){return this.children.forEach(f=>f.assembleSignals()),[]}assembleLayoutSignals(){const f=gm(this);for(const m of this.children)f.push(...m.assembleLayoutSignals());return f}assembleSelectionData(f){return this.children.reduce((m,b)=>b.assembleSelectionData(m),f)}assembleMarks(){return this.children.map(f=>{const m=f.assembleTitle(),b=f.assembleGroupStyle(),w=f.assembleGroupEncodeEntry(!1);return W(W(W(W({type:"group",name:f.getName("group")},m?{title:m}:{}),b?{style:b}:{}),w?{encode:{update:w}}:{}),f.assembleGroup())})}assembleGroupStyle(){}assembleDefaultLayout(){const f=this.layout.columns;return _t(W({},null!=f?{columns:f}:{}),{bounds:"full",align:"each"})}}const xD=_t(W({disable:1,gridScale:1,scale:1},wi),{labelExpr:1,encode:1}),f1=ut(xD);class vl extends Bf{constructor(f={},m={},b=!1){super(),this.explicit=f,this.implicit=m,this.mainExtracted=b}clone(){return new vl(ft(this.explicit),ft(this.implicit),this.mainExtracted)}hasAxisPart(f){return"axis"===f||("grid"===f||"title"===f?!!this.get(f):!function(d){return!1===d||null===d}(this.get(f)))}hasOrientSignalRef(){return mn(this.explicit.orient)}}const Fm={bottom:"top",top:"bottom",left:"right",right:"left"};function nh(d,f){if(!d)return f.map(m=>m.clone());{if(d.length!==f.length)return;const m=d.length;for(let b=0;b<m;b++){const w=d[b],A=f[b];if(!!w!=!!A)return;if(w&&A){const O=w.getWithExplicit("orient"),F=A.getWithExplicit("orient");if(O.explicit&&F.explicit&&O.value!==F.value)return;d[b]=w2(w,A)}}}return d}function w2(d,f){for(const m of f1){const b=Ks(d.getWithExplicit(m),f.getWithExplicit(m),m,"axis",(w,A)=>{switch(m){case"title":return Gk(w,A);case"gridScale":return{explicit:w.explicit,value:Zn(w.value,A.value)}}return Ta(w,A,m,"axis")});d.setWithExplicit(m,b)}return d}function AD(d,f,m,b,w){if("disable"===f)return void 0!==m;switch(m=m||{},f){case"titleAngle":case"labelAngle":return d===(mn(m.labelAngle)?m.labelAngle:Qa(m.labelAngle));case"values":return!!m.values;case"encode":return!!m.encoding||!!m.labelAngle;case"title":if(d===Bb(b,w))return!0}return d===m[f]}const Vp=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function e_(d,f){var Rt,m,b,w,A;let O=f.axis(d);const F=new vl,B=Rs(f.encoding[d]),{mark:$,config:U}=f,ee=(null===(m=O)||void 0===m?void 0:m.orient)||(null===(b=U["x"===d?"axisX":"axisY"])||void 0===b?void 0:b.orient)||(null===(w=U.axis)||void 0===w?void 0:w.orient)||function(d){return"x"===d?"bottom":"left"}(d),ce=f.getScaleComponent(d).get("type"),Se=XA(d,ce,ee,f.config),He=void 0!==O?!O:Ap("disable",U.style,null===(A=O)||void 0===A?void 0:A.style,Se).configValue;if(F.set("disable",He,void 0!==O),He)return F;O=O||{};const Ge=function(d,f,m,b,w){const A=null==f?void 0:f.labelAngle;if(void 0!==A)return mn(A)?A:Qa(A);{const{configValue:O}=Ap("labelAngle",b,null==f?void 0:f.style,w);return void 0!==O?Qa(O):m!==tn||!At([$h,Ti],d.type)||Bt(d)&&d.timeUnit?void 0:270}}(B,O,d,U.style,Se),dt={fieldOrDatumDef:B,axis:O,channel:d,model:f,scaleType:ce,orient:ee,labelAngle:Ge,mark:$,config:U};for(const an of f1){const Vt=an in Rb?Rb[an](dt):zv(an)?O[an]:void 0,kn=void 0!==Vt,Bn=AD(Vt,an,O,f,d);if(kn&&Bn)F.set(an,Vt,Bn);else{const{configValue:ui,configFrom:Mi}=zv(an)&&"values"!==an?Ap(an,U.style,O.style,Se):{},Ni=void 0!==ui;kn&&!Ni?F.set(an,Vt,Bn):("vgAxisConfig"!==Mi||Vp.has(an)&&Ni||Ff(ui)||mn(ui))&&F.set(an,ui,!1)}}const vt=null!=(Rt=O.encoding)?Rt:{},St=ly.reduce((an,Vt)=>{var ui;if(!F.hasAxisPart(Vt))return an;const kn=ym(null!=(ui=vt[Vt])?ui:{},f),Bn="labels"===Vt?function(d,f,m){var $;const{encoding:b,config:w}=d,A=null!=($=Rs(b[f]))?$:Rs(b[yu(f)]),O=d.axis(f)||{},{format:F,formatType:B}=O;return fc(B)?W({text:Sg({fieldOrDatumDef:A,field:"datum.value",format:F,formatType:B,config:w})},m):m}(f,d,kn):kn;return void 0!==Bn&&!rn(Bn)&&(an[Vt]={update:Bn}),an},{});return rn(St)||F.set("encode",St,!!O.encoding||void 0!==O.labelAngle),F}function E2(d,f,m){const b=Fr(d),w=vn("orient",b,m);if(b.orient=function(d,f,m){switch(d){case wg:case yo:case K0:case lF:case Sv:case Da:return}const{x:b,y:w,x2:A,y2:O}=f;switch(d){case Sf:if(Bt(b)&&(Kr(b.bin)||Bt(w)&&w.aggregate&&!b.aggregate))return"vertical";if(Bt(w)&&(Kr(w.bin)||Bt(b)&&b.aggregate&&!w.aggregate))return"horizontal";if(O||A){if(m)return m;if(!A&&(Bt(b)&&b.type===fd&&!Ji(b.bin)||Lv(b)))return"horizontal";if(!O&&(Bt(w)&&w.type===fd&&!Ji(w.bin)||Lv(w)))return"vertical"}case Eg:if(A&&(!Bt(b)||!Kr(b.bin))&&O&&(!Bt(w)||!Kr(w.bin)))return;case Ea:if(O)return Bt(w)&&Kr(w.bin)?"horizontal":"vertical";if(A)return Bt(b)&&Kr(b.bin)?"vertical":"horizontal";if(d===Eg){if(b&&!w)return"vertical";if(w&&!b)return"horizontal"}case al:case Av:{const F=Du(b),B=Du(w);if(m)return m;if(F&&!B)return"tick"!==d?"horizontal":"vertical";if(!F&&B)return"tick"!==d?"vertical":"horizontal";if(F&&B){const $=b,U=w,ee=$.type===hd,ce=U.type===hd;return ee&&!ce?"tick"!==d?"vertical":"horizontal":!ee&&ce?"tick"!==d?"horizontal":"vertical":!$.aggregate&&U.aggregate?"tick"!==d?"vertical":"horizontal":$.aggregate&&!U.aggregate&&"tick"!==d?"horizontal":"vertical"}return}}return"vertical"}(b.type,f,w),void 0!==w&&w!==b.orient&&It(function(d,f){return`Specified orient "${d}" overridden with "${f}".`}(b.orient,w)),"bar"===b.type&&b.orient){const F=vn("cornerRadiusEnd",b,m);if(void 0!==F){const B="horizontal"===b.orient&&f.x2||"vertical"===b.orient&&f.y2?["cornerRadius"]:Dg[b.orient];for(const $ of B)b[$]=F;void 0!==b.cornerRadiusEnd&&delete b.cornerRadiusEnd}}return void 0===vn("opacity",b,m)&&(b.opacity=function(d,f){if(At([wg,Av,yo,K0],d)&&!Hv(f))return.7}(b.type,f)),void 0===vn("cursor",b,m)&&(b.cursor=function(d,f,m){return f.href||d.href||vn("href",d,m)?"pointer":d.cursor}(b,f,m)),b}function MD(d,f){const{config:m}=d;return W(W(W(W(W(W({},jo(d,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),$o("x",d,{defaultPos:"mid"})),$o("y",d,{defaultPos:"mid"})),ur("size",d)),ur("angle",d)),function(d,f,m){return m?{shape:{value:m}}:ur("shape",d)}(d,0,f))}function wo(d){var F;const{config:f,markDef:m}=d,{orient:b}=m,w="horizontal"===b?"width":"height",A=d.getScaleComponent("horizontal"===b?"x":"y"),O=null!=(F=vn("size",m,f,{vgChannel:w}))?F:f.tick.bandSize;if(void 0!==O)return O;{const B=A?A.get("range"):void 0;return B&&Qr(B)&&K.isNumber(B.step)?3*B.step/4:3*Su(f.view,w)/4}}const Ra={arc:{vgMark:"arc",encodeEntry:d=>W(W(W(W(W({},jo(d,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),$o("x",d,{defaultPos:"mid"})),$o("y",d,{defaultPos:"mid"})),Yl(d,"radius","arc")),Yl(d,"theta","arc"))},area:{vgMark:"area",encodeEntry:d=>W(W(W(W({},jo(d,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"})),vb("x",d,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===d.markDef.orient})),vb("y",d,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===d.markDef.orient})),Sy(d))},bar:{vgMark:"rect",encodeEntry:d=>W(W(W({},jo(d,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Yl(d,"x","bar")),Yl(d,"y","bar"))},circle:{vgMark:"symbol",encodeEntry:d=>MD(d,"circle")},geoshape:{vgMark:"shape",encodeEntry:d=>W({},jo(d,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),postEncodingTransform:d=>{const{encoding:f}=d,m=f.shape;return[W({type:"geoshape",projection:d.projectionName()},m&&Bt(m)&&m.type===jh?{field:Ut(m,{expr:"datum"})}:{})]}},image:{vgMark:"image",encodeEntry:d=>W(W(W(W({},jo(d,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"})),Yl(d,"x","image")),Yl(d,"y","image")),gb(d,"url"))},line:{vgMark:"line",encodeEntry:d=>W(W(W(W(W({},jo(d,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})),$o("x",d,{defaultPos:"mid"})),$o("y",d,{defaultPos:"mid"})),ur("size",d,{vgChannel:"strokeWidth"})),Sy(d))},point:{vgMark:"symbol",encodeEntry:d=>MD(d)},rect:{vgMark:"rect",encodeEntry:d=>W(W(W({},jo(d,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),Yl(d,"x","rect")),Yl(d,"y","rect"))},rule:{vgMark:"rule",encodeEntry:d=>{const{markDef:f}=d,m=f.orient;return d.encoding.x||d.encoding.y||d.encoding.latitude||d.encoding.longitude?W(W(W(W({},jo(d,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),vb("x",d,{defaultPos:"horizontal"===m?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==m})),vb("y",d,{defaultPos:"vertical"===m?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==m})),ur("size",d,{vgChannel:"strokeWidth"})):{}}},square:{vgMark:"symbol",encodeEntry:d=>MD(d,"square")},text:{vgMark:"text",encodeEntry:d=>{const{config:f,encoding:m}=d;return W(W(W(W(W(W(W(W(W(W({},jo(d,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})),$o("x",d,{defaultPos:"mid"})),$o("y",d,{defaultPos:"mid"})),gb(d)),ur("size",d,{vgChannel:"fontSize"})),ur("angle",d)),Ou("align",function(d,f,m){if(void 0===vn("align",d,m))return"center"}(d.markDef,0,f))),Ou("baseline",function(d,f,m){if(void 0===vn("baseline",d,m))return"middle"}(d.markDef,0,f))),$o("radius",d,{defaultPos:null})),$o("theta",d,{defaultPos:null}))}},tick:{vgMark:"rect",encodeEntry:d=>{const{config:f,markDef:m}=d,b=m.orient,w="horizontal"===b?"width":"height",A="horizontal"===b?"height":"width";return _t(W(W(W(W({},jo(d,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})),$o("x",d,{defaultPos:"mid",vgChannel:"xc"})),$o("y",d,{defaultPos:"mid",vgChannel:"yc"})),ur("size",d,{defaultValue:wo(d),vgChannel:w})),{[A]:Nr(vn("thickness",m,f))})}},trail:{vgMark:"trail",encodeEntry:d=>W(W(W(W(W({},jo(d,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})),$o("x",d,{defaultPos:"mid"})),$o("y",d,{defaultPos:"mid"})),ur("size",d)),Sy(d))}};function m1(d){if(At([al,Ea,XS],d.mark)){const f=cy(d.mark,d.encoding);if(f.length>0)return function(d,f){return[{name:d.getName("pathgroup"),type:"group",from:{facet:{name:S2+d.requestDataName(ir.Main),data:d.requestDataName(ir.Main),groupby:f}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Pc(d,{fromPrefix:S2})}]}(d,f)}else if(d.mark===Sf){const f=jC.some(m=>vn(m,d.markDef,d.config));if(d.stack&&!d.fieldDef("size")&&f)return function(d){const[f]=Pc(d,{fromPrefix:zM}),m=d.scaleName(d.stack.fieldChannel),b=($={})=>d.vgField(d.stack.fieldChannel,$),w=($,U)=>`${$}(${[b({prefix:"min",suffix:"start",expr:U}),b({prefix:"max",suffix:"start",expr:U}),b({prefix:"min",suffix:"end",expr:U}),b({prefix:"max",suffix:"end",expr:U})].map(ce=>`scale('${m}',${ce})`).join(",")})`;let A,O;"x"===d.stack.fieldChannel?(A=_t(W({},yn(f.encode.update,["y","yc","y2","height",...jC])),{x:{signal:w("min","datum")},x2:{signal:w("max","datum")},clip:{value:!0}}),O={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},f.encode.update=_t(W({},xt(f.encode.update,["y","yc","y2"])),{height:{field:{group:"height"}}})):(A=_t(W({},yn(f.encode.update,["x","xc","x2","width"])),{y:{signal:w("min","datum")},y2:{signal:w("max","datum")},clip:{value:!0}}),O={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},f.encode.update=_t(W({},xt(f.encode.update,["x","xc","x2"])),{width:{field:{group:"width"}}}));for(const $ of jC){const U=hg($,d.markDef,d.config);f.encode.update[$]?(A[$]=f.encode.update[$],delete f.encode.update[$]):U&&(A[$]=Nr(U)),U&&(f.encode.update[$]={value:0})}const F=[];if(d.stack.groupbyChannel){const $=d.fieldDef(d.stack.groupbyChannel),U=Ut($);U&&F.push(U),(null!=$&&$.bin||null!=$&&$.timeUnit)&&F.push(Ut($,{binSuffix:"end"}))}return A=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce(($,U)=>{if(f.encode.update[U])return _t(W({},$),{[U]:f.encode.update[U]});{const ee=hg(U,d.markDef,d.config);return void 0!==ee?_t(W({},$),{[U]:Nr(ee)}):$}},A),A.stroke&&(A.strokeForeground={value:!0},A.strokeOffset={value:0}),[{type:"group",from:{facet:{data:d.requestDataName(ir.Main),name:zM+d.requestDataName(ir.Main),groupby:F,aggregate:{fields:[b({suffix:"start"}),b({suffix:"start"}),b({suffix:"end"}),b({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:A},marks:[{type:"group",encode:{update:O},marks:[f]}]}]}(d)}return Pc(d)}const S2="faceted_path_";const zM="stack_group_";function Pc(d,f={fromPrefix:""}){const{mark:m,markDef:b,encoding:w,config:A}=d,O=Zn(b.clip,function(d){const f=d.getScaleComponent("x"),m=d.getScaleComponent("y");return!!(f&&f.get("selectionExtent")||m&&m.get("selectionExtent"))||void 0}(d),function(d){const f=d.component.projection;return!(!f||f.isFit)||void 0}(d)),F=Uk(b),B=w.key,$=function(d){const{encoding:f,stack:m,mark:b,markDef:w,config:A}=d,O=f.order;if(!(!K.isArray(O)&&Pr(O)&&Yi(O.value)||!O&&Yi(vn("order",w,A)))){if((K.isArray(O)||Bt(O))&&!m)return lv(O,{expr:"datum"});if(Af(b)){const B="horizontal"===w.orient?"y":"x",$=f[B];if(Bt($)){const U=$.sort;if(K.isArray(U))return{field:Ut($,{prefix:B,suffix:"sort_index",expr:"datum"})};if(Eu(U))return{field:Ut({aggregate:Hv(d.encoding)?U.op:void 0,field:U.field},{expr:"datum"})};if(Iv(U))return{field:Ut(d.fieldDef(U.encoding),{expr:"datum"}),order:U.order};if(null===U)return;var F;return{field:Ut($,{binSuffix:null!==(F=d.stack)&&void 0!==F&&F.impute?"mid":void 0,expr:"datum"})}}return}}}(d),U=function(d){if(!d.component.selection)return null;const f=ut(d.component.selection).length;let m=f,b=d.parent;for(;b&&0===m;)m=ut(b.component.selection).length,b=b.parent;return m?{interactive:f>0||!!d.encoding.tooltip}:null}(d),ee=vn("aria",b,A),ce=Ra[m].postEncodingTransform?Ra[m].postEncodingTransform(d):null;return[W(_t(W(W(W(W(W(W({name:d.getName("marks"),type:Ra[m].vgMark},O?{clip:!0}:{}),F?{style:F}:{}),B?{key:B.field}:{}),$?{sort:$}:{}),U||{}),!1===ee?{aria:ee}:{}),{from:{data:f.fromPrefix+d.requestDataName(ir.Main)},encode:{update:Ra[m].encodeEntry(d)}}),ce?{transform:ce}:{})]}class HM extends SM{constructor(f,m,b,w={},A){var $;super(f,"unit",m,b,A,void 0,eb(f)?f.view:void 0),hn(this,"markDef",void 0),hn(this,"encoding",void 0),hn(this,"specifiedScales",{}),hn(this,"stack",void 0),hn(this,"specifiedAxes",{}),hn(this,"specifiedLegends",{}),hn(this,"specifiedProjection",{}),hn(this,"selection",[]),hn(this,"children",[]);const O=cc(f.mark)?W({},f.mark):{type:f.mark},F=O.type;void 0===O.filled&&(O.filled=function(d,f,{graticule:m}){if(m)return!1;const b=hg("filled",d,f),w=d.type;return Zn(b,w!==wg&&w!==al&&w!==Eg)}(O,A,{graticule:f.data&&Hg(f.data)}));const B=this.encoding=gL(f.encoding||{},F,O.filled,A);this.markDef=E2(O,B,A),this.size=function({encoding:d,size:f}){for(const m of cs){const b=_u(m);vo(f[b])&&Du(d[m])&&(delete f[b],It(P0(b)))}return f}({encoding:B,size:eb(f)?W(W(W({},w),f.width?{width:f.width}:{}),f.height?{height:f.height}:{}):w}),this.stack=eE(F,B),this.specifiedScales=this.initScales(F,B),this.specifiedAxes=this.initAxes(B),this.specifiedLegends=this.initLegends(B),this.specifiedProjection=f.projection,this.selection=(null!=($=f.params)?$:[]).filter(U=>$g(U))}get hasProjection(){const{encoding:f}=this,m=this.mark===Yh,b=f&&Rl.some(w=>si(f[w]));return m||b}scaleDomain(f){const m=this.specifiedScales[f];return m?m.domain:void 0}axis(f){return this.specifiedAxes[f]}legend(f){return this.specifiedLegends[f]}initScales(f,m){return Ll.reduce((b,w)=>{var O;const A=Rs(m[w]);return A&&(b[w]=this.initScale(null!=(O=A.scale)?O:{})),b},{})}initScale(f){const{domain:m,range:b}=f,w=Fr(f);return K.isArray(m)&&(w.domain=m.map(ba)),K.isArray(b)&&(w.range=b.map(ba)),w}initAxes(f){return cs.reduce((m,b)=>{const w=f[b];if(si(w)||b===tn&&si(f.x2)||b===Ue&&si(f.y2)){const A=si(w)?w.axis:void 0;m[b]=A&&this.initAxis(W({},A))}return m},{})}initAxis(f){const m=ut(f),b={};for(const w of m){const A=f[w];b[w]=Ff(A)?zC(A):ba(A)}return b}initLegends(f){return nn.reduce((m,b)=>{const w=Rs(f[b]);if(w&&function(d){switch(d){case Q:case ne:case le:case ge:case re:case ct:case Ri:case gr:return!0;case Qt:case ni:case Be:return!1}}(b)){const A=w.legend;m[b]=A&&Fr(A)}return m},{})}parseData(){this.component.data=Zy(this)}parseLayoutSize(){!function(d){const{size:f,component:m}=d;for(const b of cs){const w=_u(b);if(f[w]){const A=f[w];m.layoutSize.set(w,vo(A)?"step":A,!0)}else{const A=wD(d,w);m.layoutSize.set(w,A,!1)}}}(this)}parseSelections(){this.component.selection=function(d,f){var w;const m={},b=d.config.selection;if(!f||!f.length)return m;for(const A of f){const O=Pn(A.name),F=A.select,B=K.isString(F)?F:F.type,$=K.isObject(F)?ft(F):{type:B},U=b[B];for(const ce in U)"fields"===ce||"encodings"===ce||("mark"===ce&&($[ce]=W(W({},U[ce]),$[ce])),(void 0===$[ce]||!0===$[ce])&&($[ce]=null!=(w=U[ce])?w:$[ce]));const ee=m[O]=_t(W({},$),{name:O,type:B,init:A.value,bind:A.bind,events:K.isString($.on)?dl($.on,"scope"):K.array(ft($.on))});for(const ce of Oy)ce.defined(ee)&&ce.parse&&ce.parse(d,ee,A)}return m}(this,this.selection)}parseMarkGroup(){this.component.mark=m1(this)}parseAxesAndHeaders(){this.component.axes=function(d){return cs.reduce((f,m)=>(d.component.scales[m]&&(f[m]=[e_(m,d)]),f),{})}(this)}assembleSelectionTopLevelSignals(f){return function(d,f){var b;let m=!1;for(const w of Si(null!=(b=d.component.selection)?b:{})){const A=w.name,O=K.stringValue(A+Wf);if(0===f.filter(B=>B.name===A).length){const $="point"===w.type?", true, true)":")";f.push({name:w.name,update:`${xb}(${O}, ${K.stringValue("global"===w.resolve?"union":w.resolve)}${$}`})}m=!0;for(const B of Oy)B.defined(w)&&B.topLevelSignals&&(f=B.topLevelSignals(d,w,f))}return m&&0===f.filter(A=>"unit"===A.name).length&&f.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),qg(f)}(this,f)}assembleSignals(){return[...Sp(this),...SA(this,[])]}assembleSelectionData(f){return function(d,f){var b;const m=[...f];for(const w of Si(null!=(b=d.component.selection)?b:{})){const A={name:w.name+Wf};if(w.init){const F=w.project.items.map(B=>gn(B,["signals"]));A.values=w.init.map(B=>({unit:Tu(d,{escape:!1}),fields:F,values:zf(B,!1)}))}m.filter(F=>F.name===w.name+Wf).length||m.push(A)}return m}(this,f)}assembleLayout(){return null}assembleLayoutSignals(){return gm(this)}assembleMarks(){var m;let f=null!=(m=this.component.mark)?m:[];return(!this.parent||!Pp(this.parent))&&(f=OA(this,f)),f.map(this.correctDataNames)}assembleGroupStyle(){const{style:f}=this.view||{};return void 0!==f?f:this.encoding.x||this.encoding.y?"cell":void 0}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(f){return Jh(this.encoding,f)}fieldDef(f){return Dd(this.encoding[f])}typedFieldDef(f){const m=this.fieldDef(f);return Sa(m)?m:null}}class i_ extends Mm{constructor(f,m,b,w,A){super(f,"layer",m,b,A,f.resolve,f.view),hn(this,"children",void 0);const O=W(W(W({},w),f.width?{width:f.width}:{}),f.height?{height:f.height}:{});this.children=f.layer.map((F,B)=>{if(fs(F))return new i_(F,this,this.getName(`layer_${B}`),O,A);if(xd(F))return new HM(F,this,this.getName(`layer_${B}`),O,A);throw new Error(k0(F))})}parseData(){this.component.data=Zy(this);for(const f of this.children)f.parseData()}parseLayoutSize(){!function(d){CD(d),d1(d,"width"),d1(d,"height")}(this)}parseSelections(){this.component.selection={};for(const f of this.children){f.parseSelections();for(const m of ut(f.component.selection))this.component.selection[m]=f.component.selection[m]}}parseMarkGroup(){for(const f of this.children)f.parseMarkGroup()}parseAxesAndHeaders(){!function(d){var w;const{axes:f,resolve:m}=d.component,b={top:0,bottom:0,right:0,left:0};for(const A of d.children){A.parseAxesAndHeaders();for(const O of ut(A.component.axes))m.axis[O]=dn(d.component.resolve,O),"shared"===m.axis[O]&&(f[O]=nh(f[O],A.component.axes[O]),f[O]||(m.axis[O]="independent",delete f[O]))}for(const A of cs){for(const O of d.children)if(O.component.axes[A]){if("independent"===m.axis[A]){f[A]=(null!=(w=f[A])?w:[]).concat(O.component.axes[A]);for(const F of O.component.axes[A]){const{value:B,explicit:$}=F.getWithExplicit("orient");if(!mn(B)){if(b[B]>0&&!$){const U=Fm[B];b[B]>b[U]&&F.set("orient",U,!1)}b[B]++}}}delete O.component.axes[A]}if("independent"===m.axis[A]&&f[A]&&f[A].length>1)for(const O of f[A])O.get("grid")&&!O.explicit.grid&&(O.implicit.grid=!1)}}(this)}assembleSelectionTopLevelSignals(f){return this.children.reduce((m,b)=>b.assembleSelectionTopLevelSignals(m),f)}assembleSignals(){return this.children.reduce((f,m)=>f.concat(m.assembleSignals()),Sp(this))}assembleLayoutSignals(){return this.children.reduce((f,m)=>f.concat(m.assembleLayoutSignals()),gm(this))}assembleSelectionData(f){return this.children.reduce((m,b)=>b.assembleSelectionData(m),f)}assembleGroupStyle(){const f=new Set;for(const b of this.children)for(const w of K.array(b.assembleGroupStyle()))f.add(w);const m=Array.from(f);return m.length>1?m:1===m.length?m[0]:void 0}assembleTitle(){let f=super.assembleTitle();if(f)return f;for(const m of this.children)if(f=m.assembleTitle(),f)return f}assembleLayout(){return null}assembleMarks(){return function(d,f){for(const m of d.children)zs(m)&&(f=OA(m,f));return f}(this,this.children.flatMap(f=>f.assembleMarks()))}assembleLegends(){return this.children.reduce((f,m)=>f.concat(m.assembleLegends()),Iu(this))}}function kD(d,f,m,b,w){if(Mg(d))return new km(d,f,m,w);if(fs(d))return new i_(d,f,m,b,w);if(xd(d))return new HM(d,f,m,b,w);if(function(d){return Sd(d)||Jv(d)||tp(d)}(d))return new DD(d,f,m,w);throw new Error(k0(d))}function Rm(d,f,m,b){const w=b.component.layoutSize.get("width"),A=b.component.layoutSize.get("height");if(void 0===f?(f={type:"pad"},b.hasAxisOrientSignalRef()&&(f.resize=!0)):K.isString(f)&&(f={type:f}),w&&A&&function(d){return"fit"===d||"fit-x"===d||"fit-y"===d}(f.type))if("step"===w&&"step"===A)It(PS()),f.type="pad";else if("step"===w||"step"===A){const O="step"===w?"width":"height";It(PS(ov(O))),f.type=function(d){return d?`fit-${ov(d)}`:"fit"}("width"===O?"height":"width")}return W(W(W({},1===ut(f).length&&f.type?"pad"===f.type?{}:{autosize:f.type}:{autosize:f}),DF(m,!1)),DF(d,!0))}function FD(d,f,m={},b){const w=d.config?rb(d.config):void 0,A=[].concat(d.assembleSelectionData([]),function(d,f){var O,F;const m=[],b=vD(m);let w=0;for(const B of d.sources){B.hasName()||(B.dataName="source_"+w++);const $=B.assemble();b(B,$)}for(const B of m)0===B.transform.length&&delete B.transform;let A=0;for(const[B,$]of m.entries())0===(null!=(O=$.transform)?O:[]).length&&!$.source&&m.splice(A++,0,m.splice(B,1)[0]);for(const B of m)for(const $ of null!=(F=B.transform)?F:[])"lookup"===$.type&&($.from=d.outputNodes[$.from].getSource());for(const B of m)B.name in f&&(B.values=f[B.name]);return m}(d.component.data,m)),O=d.assembleProjections(),F=d.assembleTitle(),B=d.assembleGroupStyle(),$=d.assembleGroupEncodeEntry(!0);let U=d.assembleLayoutSignals();U=U.filter(He=>"width"!==He.name&&"height"!==He.name||void 0===He.value||(f[He.name]=+He.value,!1));const Se=f,{params:ee}=Se,ce=gn(Se,["params"]);return W(W(W(W(_t(W(W(W(W(W({$schema:"https://vega.github.io/schema/vega/v5.json"},d.description?{description:d.description}:{}),ce),F?{title:F}:{}),B?{style:B}:{}),$?{encode:{update:$}}:{}),{data:A}),O.length>0?{projections:O}:{}),d.assembleGroup([...U,...d.assembleSelectionTopLevelSignals([]),...Hw(ee)])),w?{config:w}:{}),b?{usermeta:b}:{})}_e.accessPathDepth=qs,_e.accessPathWithDatum=pr,_e.compile=function(d,f={}){f.logger&&function(d){rl=d}(f.logger),f.fieldTitle&&Tg(f.fieldTitle);try{const m=ib(K.mergeConfig(f.config,d.config)),b=_A(d,m),w=kD(b,null,"",void 0,m);return w.parse(),function(d,f){Dm(d.sources);let m=0,b=0;for(let w=0;w<5&&xm(d,f,!0);w++)m++;d.sources.map(Mc);for(let w=0;w<5&&xm(d,f,!1);w++)b++;Dm(d.sources),5===Math.max(m,b)&&It("Maximum optimization runs(5) reached.")}(w.component.data,w),{spec:FD(w,Rm(d,b.autosize,m,w),d.datasets,d.usermeta),normalized:b}}finally{f.logger&&(rl=Xs),f.fieldTitle&&Tg(mF)}},_e.contains=At,_e.deepEqual=gt,_e.deleteNestedProperty=as,_e.duplicate=ft,_e.entries=sr,_e.every=$t,_e.fieldIntersection=En,_e.flatAccessWithDatum=Ki,_e.getFirstDefined=Zn,_e.hasIntersection=jn,_e.hash=sn,_e.internalField=Os,_e.isBoolean=Mr,_e.isEmpty=rn,_e.isEqual=function(d,f){const m=ut(d),b=ut(f);if(m.length!==b.length)return!1;for(const w of m)if(d[w]!==f[w])return!1;return!0},_e.isInternalField=mu,_e.isNullOrFalse=Yi,_e.isNumeric=Fl,_e.keys=ut,_e.logicalExpr=Kn,_e.mergeDeep=ht,_e.normalize=_A,_e.normalizeAngle=Qa,_e.omit=xt,_e.pick=yn,_e.prefixGenerator=Xi,_e.removePathFromField=ls,_e.replaceAll=gs,_e.replacePathInField=Ii,_e.resetIdCounter=function(){uo=42},_e.setEqual=Gn,_e.some=pi,_e.stringify=qt,_e.titleCase=hr,_e.unique=Nn,_e.uniqueId=us,_e.vals=Si,_e.varName=Pn,_e.version="5.1.1",Object.defineProperty(_e,"__esModule",{value:!0})}(bt,pe(2737),pe(5536))},2737:(it,bt,pe)=>{"use strict";function _e(L,q,Q){return L.fields=q||[],L.fname=Q,L}function K(L){return null==L?null:L.fname}function qe(L){return null==L?null:L.fields}function Ce(L){return 1===L.length?xe(L[0]):ve(L)}pe.r(bt),pe.d(bt,{Debug:()=>Qe,Error:()=>ti,Info:()=>Jt,None:()=>Dt,Warn:()=>oi,accessor:()=>_e,accessorFields:()=>qe,accessorName:()=>K,array:()=>Nn,ascending:()=>En,clampRange:()=>gi,compare:()=>Xi,constant:()=>sr,debounce:()=>Mr,error:()=>de,extend:()=>Pn,extent:()=>Kn,extentIndex:()=>as,falsy:()=>Kt,fastmap:()=>ea,field:()=>Ae,flush:()=>Ii,hasOwnProperty:()=>pr,id:()=>Ie,identity:()=>ke,inherits:()=>gs,inrange:()=>ls,isArray:()=>pt,isBoolean:()=>qs,isDate:()=>Zn,isFunction:()=>Gn,isIterable:()=>uo,isNumber:()=>us,isObject:()=>Mt,isRegExp:()=>_a,isString:()=>Os,key:()=>mu,lerp:()=>Qa,logger:()=>Lt,lruCache:()=>co,merge:()=>Ln,mergeConfig:()=>me,one:()=>T,pad:()=>tn,panLinear:()=>ft,panLog:()=>yn,panPow:()=>xt,panSymlog:()=>qt,peek:()=>$e,quarter:()=>ht,repeat:()=>Dn,span:()=>Ue,splitAccessPath:()=>De,stringValue:()=>Ne,toBoolean:()=>Me,toDate:()=>ie,toNumber:()=>lt,toSet:()=>Le,toString:()=>he,truncate:()=>Te,truthy:()=>Yt,utcquarter:()=>vi,visitArray:()=>Je,writeConfig:()=>Ze,zero:()=>nt,zoomLinear:()=>Yi,zoomLog:()=>At,zoomPow:()=>pi,zoomSymlog:()=>$t});const xe=L=>function(q){return q[L]},ve=L=>{const q=L.length;return function(Q){for(let ne=0;ne<q;++ne)Q=Q[L[ne]];return Q}};function de(L){throw Error(L)}function De(L){const q=[],Q=L.length;let ge,Be,ct,ne=null,le=0,re="";function Qt(){q.push(re+L.substring(ge,Be)),re="",ge=Be+1}for(L+="",ge=Be=0;Be<Q;++Be)if(ct=L[Be],"\\"===ct)re+=L.substring(ge,Be),re+=L.substring(++Be,++Be),ge=Be;else if(ct===ne)Qt(),ne=null,le=-1;else{if(ne)continue;ge===le&&'"'===ct||ge===le&&"'"===ct?(ge=Be+1,ne=ct):"."!==ct||le?"["===ct?(Be>ge&&Qt(),le=ge=Be+1):"]"===ct&&(le||de("Access path missing open bracket: "+L),le>0&&Qt(),le=0,ge=Be+1):Be>ge?Qt():ge=Be+1}return le&&de("Access path missing closing bracket: "+L),ne&&de("Access path missing closing quote: "+L),Be>ge&&(Be++,Qt()),q}function Ae(L,q,Q){const ne=De(L);return L=1===ne.length?ne[0]:L,_e((Q&&Q.get||Ce)(ne),[L],q||L)}const Ie=Ae("id"),ke=_e(L=>L,[],"identity"),nt=_e(()=>0,[],"zero"),T=_e(()=>1,[],"one"),Yt=_e(()=>!0,[],"true"),Kt=_e(()=>!1,[],"false");function Nt(L,q,Q){const ne=[q].concat([].slice.call(Q));console[L].apply(console,ne)}const Dt=0,ti=1,oi=2,Jt=3,Qe=4;function Lt(L,q){let Q=L||Dt;return{level(ne){return arguments.length?(Q=+ne,this):Q},error(){return Q>=ti&&Nt(q||"error","ERROR",arguments),this},warn(){return Q>=oi&&Nt(q||"warn","WARN",arguments),this},info(){return Q>=Jt&&Nt(q||"log","INFO",arguments),this},debug(){return Q>=Qe&&Nt(q||"log","DEBUG",arguments),this}}}var pt=Array.isArray;function Mt(L){return L===Object(L)}const ae=L=>"__proto__"!==L;function me(...L){return L.reduce((q,Q)=>{for(const ne in Q)"signals"===ne?q.signals=Ve(q.signals,Q.signals):Ze(q,ne,Q[ne],"legend"===ne?{layout:1}:"style"===ne||null);return q},{})}function Ze(L,q,Q,ne){if(!ae(q))return;let le,re;if(Mt(Q)&&!pt(Q))for(le in re=Mt(L[q])?L[q]:L[q]={},Q)ne&&(!0===ne||ne[le])?Ze(re,le,Q[le]):ae(le)&&(re[le]=Q[le]);else L[q]=Q}function Ve(L,q){if(null==L)return q;const Q={},ne=[];function le(re){Q[re.name]||(Q[re.name]=1,ne.push(re))}return q.forEach(le),L.forEach(le),ne}function $e(L){return L[L.length-1]}function lt(L){return null==L||""===L?null:+L}const We=L=>q=>L*Math.exp(q),wt=L=>q=>Math.log(L*q),at=L=>q=>Math.sign(q)*Math.log1p(Math.abs(q/L)),Pe=L=>q=>Math.sign(q)*Math.expm1(Math.abs(q))*L,Gt=L=>q=>q<0?-Math.pow(-q,L):Math.pow(q,L);function gt(L,q,Q,ne){const le=Q(L[0]),re=Q($e(L)),ge=(re-le)*q;return[ne(le-ge),ne(re-ge)]}function ft(L,q){return gt(L,q,lt,ke)}function yn(L,q){var Q=Math.sign(L[0]);return gt(L,q,wt(Q),We(Q))}function xt(L,q,Q){return gt(L,q,Gt(Q),Gt(1/Q))}function qt(L,q,Q){return gt(L,q,at(Q),Pe(Q))}function sn(L,q,Q,ne,le){const re=ne(L[0]),ge=ne($e(L)),Be=null!=q?ne(q):(re+ge)/2;return[le(Be+(re-Be)*Q),le(Be+(ge-Be)*Q)]}function Yi(L,q,Q){return sn(L,q,Q,lt,ke)}function At(L,q,Q){const ne=Math.sign(L[0]);return sn(L,q,Q,wt(ne),We(ne))}function pi(L,q,Q,ne){return sn(L,q,Q,Gt(ne),Gt(1/ne))}function $t(L,q,Q,ne){return sn(L,q,Q,at(ne),Pe(ne))}function ht(L){return 1+~~(new Date(L).getMonth()/3)}function vi(L){return 1+~~(new Date(L).getUTCMonth()/3)}function Nn(L){return null!=L?pt(L)?L:[L]:[]}function gi(L,q,Q){let re,ne=L[0],le=L[1];return le<ne&&(re=le,le=ne,ne=re),re=le-ne,re>=Q-q?[q,Q]:[ne=Math.min(Math.max(ne,q),Q-re),ne+re]}function Gn(L){return"function"==typeof L}function Xi(L,q,Q){Q=Q||{},q=Nn(q)||[];const ne=[],le=[],re={},ge=Q.comparator||rn;return Nn(L).forEach((Be,ct)=>{null!=Be&&(ne.push("descending"===q[ct]?-1:1),le.push(Be=Gn(Be)?Be:Ae(Be,null,Q)),(qe(Be)||[]).forEach(Qt=>re[Qt]=1))}),0===le.length?null:_e(ge(le,ne),Object.keys(re))}const En=(L,q)=>(L<q||null==L)&&null!=q?-1:(L>q||null==q)&&null!=L?1:(q=q instanceof Date?+q:q,(L=L instanceof Date?+L:L)!==L&&q==q?-1:q!=q&&L==L?1:0),rn=(L,q)=>1===L.length?ut(L[0],q[0]):Si(L,q,L.length),ut=(L,q)=>function(Q,ne){return En(L(Q),L(ne))*q},Si=(L,q,Q)=>(q.push(0),function(ne,le){let re,ge=0,Be=-1;for(;0===ge&&++Be<Q;)re=L[Be],ge=En(re(ne),re(le));return ge*q[Be]});function sr(L){return Gn(L)?L:()=>L}function Mr(L,q){let Q;return ne=>{Q&&clearTimeout(Q),Q=setTimeout(()=>(q(ne),Q=null),L)}}function Pn(L){for(let q,Q,ne=1,le=arguments.length;ne<le;++ne)for(Q in q=arguments[ne],q)L[Q]=q[Q];return L}function Kn(L,q){let ne,le,re,ge,Q=0;if(L&&(ne=L.length))if(null==q){for(le=L[Q];Q<ne&&(null==le||le!=le);le=L[++Q]);for(re=ge=le;Q<ne;++Q)le=L[Q],null!=le&&(le<re&&(re=le),le>ge&&(ge=le))}else{for(le=q(L[Q]);Q<ne&&(null==le||le!=le);le=q(L[++Q]));for(re=ge=le;Q<ne;++Q)le=q(L[Q]),null!=le&&(le<re&&(re=le),le>ge&&(ge=le))}return[re,ge]}function as(L,q){const Q=L.length;let le,re,ge,Be,ct,ne=-1;if(null==q){for(;++ne<Q;)if(re=L[ne],null!=re&&re>=re){le=ge=re;break}if(ne===Q)return[-1,-1];for(Be=ct=ne;++ne<Q;)re=L[ne],null!=re&&(le>re&&(le=re,Be=ne),ge<re&&(ge=re,ct=ne))}else{for(;++ne<Q;)if(re=q(L[ne],ne,L),null!=re&&re>=re){le=ge=re;break}if(ne===Q)return[-1,-1];for(Be=ct=ne;++ne<Q;)re=q(L[ne],ne,L),null!=re&&(le>re&&(le=re,Be=ne),ge<re&&(ge=re,ct=ne))}return[Be,ct]}const hr=Object.prototype.hasOwnProperty;function pr(L,q){return hr.call(L,q)}const Ki={};function ea(L){let Q,q={};function ne(re){return pr(q,re)&&q[re]!==Ki}const le={size:0,empty:0,object:q,has:ne,get:re=>ne(re)?q[re]:void 0,set(re,ge){return ne(re)||(++le.size,q[re]===Ki&&--le.empty),q[re]=ge,this},delete(re){return ne(re)&&(--le.size,++le.empty,q[re]=Ki),this},clear(){le.size=le.empty=0,le.object=q={}},test(re){return arguments.length?(Q=re,le):Q},clean(){const re={};let ge=0;for(const Be in q){const ct=q[Be];ct!==Ki&&(!Q||!Q(ct))&&(re[Be]=ct,++ge)}le.size=ge,le.empty=0,le.object=q=re}};return L&&Object.keys(L).forEach(re=>{le.set(re,L[re])}),le}function Ii(L,q,Q,ne,le,re){if(!Q&&0!==Q)return re;const ge=+Q;let Qt,Be=L[0],ct=$e(L);ct<Be&&(Qt=Be,Be=ct,ct=Qt),Qt=Math.abs(q-Be);const ni=Math.abs(ct-q);return Qt<ni&&Qt<=ge?ne:ni<=ge?le:re}function gs(L,q,Q){const ne=L.prototype=Object.create(q.prototype);return Object.defineProperty(ne,"constructor",{value:L,writable:!0,enumerable:!0,configurable:!0}),Pn(ne,Q)}function ls(L,q,Q,ne){let ge,le=q[0],re=q[q.length-1];return le>re&&(ge=le,le=re,re=ge),ne=void 0===ne||ne,((Q=void 0===Q||Q)?le<=L:le<L)&&(ne?L<=re:L<re)}function qs(L){return"boolean"==typeof L}function Zn(L){return"[object Date]"===Object.prototype.toString.call(L)}function uo(L){return L&&Gn(L[Symbol.iterator])}function us(L){return"number"==typeof L}function _a(L){return"[object RegExp]"===Object.prototype.toString.call(L)}function Os(L){return"string"==typeof L}function mu(L,q,Q){L&&(L=q?Nn(L).map(Be=>Be.replace(/\\(.)/g,"$1")):Nn(L));const ne=L&&L.length,le=Q&&Q.get||Ce,re=Be=>le(q?[Be]:De(Be));let ge;if(ne)if(1===ne){const Be=re(L[0]);ge=function(ct){return""+Be(ct)}}else{const Be=L.map(re);ge=function(ct){let Qt=""+Be[0](ct),ni=0;for(;++ni<ne;)Qt+="|"+Be[ni](ct);return Qt}}else ge=function(){return""};return _e(ge,L,"key")}function Qa(L,q){const Q=L[0],ne=$e(L),le=+q;return le?1===le?ne:Q+le*(ne-Q):Q}function co(L){let q,Q,ne;L=+L||1e4;const le=()=>{q={},Q={},ne=0},re=(ge,Be)=>(++ne>L&&(Q=q,q={},ne=1),q[ge]=Be);return le(),{clear:le,has:ge=>pr(q,ge)||pr(Q,ge),get:ge=>pr(q,ge)?q[ge]:pr(Q,ge)?re(ge,Q[ge]):void 0,set:(ge,Be)=>pr(q,ge)?q[ge]=Be:re(ge,Be)}}function Ln(L,q,Q,ne){const le=q.length,re=Q.length;if(!re)return q;if(!le)return Q;const ge=ne||new q.constructor(le+re);let Be=0,ct=0,Qt=0;for(;Be<le&&ct<re;++Qt)ge[Qt]=L(q[Be],Q[ct])>0?Q[ct++]:q[Be++];for(;Be<le;++Be,++Qt)ge[Qt]=q[Be];for(;ct<re;++ct,++Qt)ge[Qt]=Q[ct];return ge}function Dn(L,q){let Q="";for(;--q>=0;)Q+=L;return Q}function tn(L,q,Q,ne){const le=Q||" ",re=L+"",ge=q-re.length;return ge<=0?re:"left"===ne?Dn(le,ge)+re:"center"===ne?Dn(le,~~(ge/2))+re+Dn(le,Math.ceil(ge/2)):re+Dn(le,ge)}function Ue(L){return L&&$e(L)-L[0]||0}function Ne(L){return pt(L)?"["+L.map(Ne)+"]":Mt(L)||Os(L)?JSON.stringify(L).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):L}function Me(L){return null==L||""===L?null:!(!L||"false"===L||"0"===L||!L)}const Y=L=>us(L)||Zn(L)?L:Date.parse(L);function ie(L,q){return q=q||Y,null==L||""===L?null:q(L)}function he(L){return null==L||""===L?null:L+""}function Le(L){const q={},Q=L.length;for(let ne=0;ne<Q;++ne)q[L[ne]]=!0;return q}function Te(L,q,Q,ne){const le=null!=ne?ne:"\u2026",re=L+"",ge=re.length,Be=Math.max(0,q-le.length);return ge<=q?re:"left"===Q?le+re.slice(ge-Be):"center"===Q?re.slice(0,Math.ceil(Be/2))+le+re.slice(ge-~~(Be/2)):re.slice(0,Be)+le}function Je(L,q,Q){if(L)if(q){const ne=L.length;for(let le=0;le<ne;++le){const re=q(L[le]);re&&Q(re,le,L)}}else L.forEach(Q)}},303:(it,bt,pe)=>{"use strict";function _e(L,q,Q){return L.fields=q||[],L.fname=Q,L}function K(L){return null==L?null:L.fname}function qe(L){return null==L?null:L.fields}function Ce(L){return 1===L.length?xe(L[0]):ve(L)}pe.d(bt,{cG:()=>Qe,jj:()=>ti,kI:()=>Jt,Hq:()=>Dt,uU:()=>oi,ZE:()=>_e,Oj:()=>qe,el:()=>K,IX:()=>Nn,j2:()=>En,l$:()=>gi,qu:()=>Xi,a9:()=>sr,Ds:()=>Mr,vU:()=>de,l7:()=>Pn,We:()=>Kn,dI:()=>as,k:()=>Kt,Xr:()=>ea,EP:()=>Ae,yl:()=>Ii,nr:()=>pr,id:()=>Ie,yR:()=>ke,XW:()=>gs,u5:()=>ls,kJ:()=>pt,jn:()=>qs,J_:()=>Zn,mf:()=>Gn,TW:()=>uo,hj:()=>us,Kn:()=>Mt,Kj:()=>_a,HD:()=>Os,Jy:()=>mu,t7:()=>Qa,kg:()=>Lt,$m:()=>co,TS:()=>Ln,fE:()=>me,kX:()=>T,vk:()=>tn,Dw:()=>ft,mJ:()=>yn,QA:()=>xt,Zw:()=>qt,fj:()=>$e,mS:()=>ht,rx:()=>Dn,yP:()=>Ue,_k:()=>De,m8:()=>Ne,sw:()=>Me,ZU:()=>ie,He:()=>lt,Rg:()=>Le,BB:()=>he,$G:()=>Te,yb:()=>Yt,N3:()=>vi,FP:()=>Je,iL:()=>Ze,bM:()=>nt,ay:()=>Yi,dH:()=>At,mK:()=>pi,bV:()=>$t});const xe=L=>function(q){return q[L]},ve=L=>{const q=L.length;return function(Q){for(let ne=0;ne<q;++ne)Q=Q[L[ne]];return Q}};function de(L){throw Error(L)}function De(L){const q=[],Q=L.length;let ge,Be,ct,ne=null,le=0,re="";function Qt(){q.push(re+L.substring(ge,Be)),re="",ge=Be+1}for(L+="",ge=Be=0;Be<Q;++Be)if(ct=L[Be],"\\"===ct)re+=L.substring(ge,Be),re+=L.substring(++Be,++Be),ge=Be;else if(ct===ne)Qt(),ne=null,le=-1;else{if(ne)continue;ge===le&&'"'===ct||ge===le&&"'"===ct?(ge=Be+1,ne=ct):"."!==ct||le?"["===ct?(Be>ge&&Qt(),le=ge=Be+1):"]"===ct&&(le||de("Access path missing open bracket: "+L),le>0&&Qt(),le=0,ge=Be+1):Be>ge?Qt():ge=Be+1}return le&&de("Access path missing closing bracket: "+L),ne&&de("Access path missing closing quote: "+L),Be>ge&&(Be++,Qt()),q}function Ae(L,q,Q){const ne=De(L);return L=1===ne.length?ne[0]:L,_e((Q&&Q.get||Ce)(ne),[L],q||L)}const Ie=Ae("id"),ke=_e(L=>L,[],"identity"),nt=_e(()=>0,[],"zero"),T=_e(()=>1,[],"one"),Yt=_e(()=>!0,[],"true"),Kt=_e(()=>!1,[],"false");function Nt(L,q,Q){const ne=[q].concat([].slice.call(Q));console[L].apply(console,ne)}const Dt=0,ti=1,oi=2,Jt=3,Qe=4;function Lt(L,q,Q=Nt){let ne=L||Dt;return{level(le){return arguments.length?(ne=+le,this):ne},error(){return ne>=ti&&Q(q||"error","ERROR",arguments),this},warn(){return ne>=oi&&Q(q||"warn","WARN",arguments),this},info(){return ne>=Jt&&Q(q||"log","INFO",arguments),this},debug(){return ne>=Qe&&Q(q||"log","DEBUG",arguments),this}}}var pt=Array.isArray;function Mt(L){return L===Object(L)}const ae=L=>"__proto__"!==L;function me(...L){return L.reduce((q,Q)=>{for(const ne in Q)"signals"===ne?q.signals=Ve(q.signals,Q.signals):Ze(q,ne,Q[ne],"legend"===ne?{layout:1}:"style"===ne||null);return q},{})}function Ze(L,q,Q,ne){if(!ae(q))return;let le,re;if(Mt(Q)&&!pt(Q))for(le in re=Mt(L[q])?L[q]:L[q]={},Q)ne&&(!0===ne||ne[le])?Ze(re,le,Q[le]):ae(le)&&(re[le]=Q[le]);else L[q]=Q}function Ve(L,q){if(null==L)return q;const Q={},ne=[];function le(re){Q[re.name]||(Q[re.name]=1,ne.push(re))}return q.forEach(le),L.forEach(le),ne}function $e(L){return L[L.length-1]}function lt(L){return null==L||""===L?null:+L}const We=L=>q=>L*Math.exp(q),wt=L=>q=>Math.log(L*q),at=L=>q=>Math.sign(q)*Math.log1p(Math.abs(q/L)),Pe=L=>q=>Math.sign(q)*Math.expm1(Math.abs(q))*L,Gt=L=>q=>q<0?-Math.pow(-q,L):Math.pow(q,L);function gt(L,q,Q,ne){const le=Q(L[0]),re=Q($e(L)),ge=(re-le)*q;return[ne(le-ge),ne(re-ge)]}function ft(L,q){return gt(L,q,lt,ke)}function yn(L,q){var Q=Math.sign(L[0]);return gt(L,q,wt(Q),We(Q))}function xt(L,q,Q){return gt(L,q,Gt(Q),Gt(1/Q))}function qt(L,q,Q){return gt(L,q,at(Q),Pe(Q))}function sn(L,q,Q,ne,le){const re=ne(L[0]),ge=ne($e(L)),Be=null!=q?ne(q):(re+ge)/2;return[le(Be+(re-Be)*Q),le(Be+(ge-Be)*Q)]}function Yi(L,q,Q){return sn(L,q,Q,lt,ke)}function At(L,q,Q){const ne=Math.sign(L[0]);return sn(L,q,Q,wt(ne),We(ne))}function pi(L,q,Q,ne){return sn(L,q,Q,Gt(ne),Gt(1/ne))}function $t(L,q,Q,ne){return sn(L,q,Q,at(ne),Pe(ne))}function ht(L){return 1+~~(new Date(L).getMonth()/3)}function vi(L){return 1+~~(new Date(L).getUTCMonth()/3)}function Nn(L){return null!=L?pt(L)?L:[L]:[]}function gi(L,q,Q){let re,ne=L[0],le=L[1];return le<ne&&(re=le,le=ne,ne=re),re=le-ne,re>=Q-q?[q,Q]:[ne=Math.min(Math.max(ne,q),Q-re),ne+re]}function Gn(L){return"function"==typeof L}function Xi(L,q,Q){Q=Q||{},q=Nn(q)||[];const ne=[],le=[],re={},ge=Q.comparator||rn;return Nn(L).forEach((Be,ct)=>{null!=Be&&(ne.push("descending"===q[ct]?-1:1),le.push(Be=Gn(Be)?Be:Ae(Be,null,Q)),(qe(Be)||[]).forEach(Qt=>re[Qt]=1))}),0===le.length?null:_e(ge(le,ne),Object.keys(re))}const En=(L,q)=>(L<q||null==L)&&null!=q?-1:(L>q||null==q)&&null!=L?1:(q=q instanceof Date?+q:q,(L=L instanceof Date?+L:L)!==L&&q==q?-1:q!=q&&L==L?1:0),rn=(L,q)=>1===L.length?ut(L[0],q[0]):Si(L,q,L.length),ut=(L,q)=>function(Q,ne){return En(L(Q),L(ne))*q},Si=(L,q,Q)=>(q.push(0),function(ne,le){let re,ge=0,Be=-1;for(;0===ge&&++Be<Q;)re=L[Be],ge=En(re(ne),re(le));return ge*q[Be]});function sr(L){return Gn(L)?L:()=>L}function Mr(L,q){let Q;return ne=>{Q&&clearTimeout(Q),Q=setTimeout(()=>(q(ne),Q=null),L)}}function Pn(L){for(let q,Q,ne=1,le=arguments.length;ne<le;++ne)for(Q in q=arguments[ne],q)L[Q]=q[Q];return L}function Kn(L,q){let ne,le,re,ge,Q=0;if(L&&(ne=L.length))if(null==q){for(le=L[Q];Q<ne&&(null==le||le!=le);le=L[++Q]);for(re=ge=le;Q<ne;++Q)le=L[Q],null!=le&&(le<re&&(re=le),le>ge&&(ge=le))}else{for(le=q(L[Q]);Q<ne&&(null==le||le!=le);le=q(L[++Q]));for(re=ge=le;Q<ne;++Q)le=q(L[Q]),null!=le&&(le<re&&(re=le),le>ge&&(ge=le))}return[re,ge]}function as(L,q){const Q=L.length;let le,re,ge,Be,ct,ne=-1;if(null==q){for(;++ne<Q;)if(re=L[ne],null!=re&&re>=re){le=ge=re;break}if(ne===Q)return[-1,-1];for(Be=ct=ne;++ne<Q;)re=L[ne],null!=re&&(le>re&&(le=re,Be=ne),ge<re&&(ge=re,ct=ne))}else{for(;++ne<Q;)if(re=q(L[ne],ne,L),null!=re&&re>=re){le=ge=re;break}if(ne===Q)return[-1,-1];for(Be=ct=ne;++ne<Q;)re=q(L[ne],ne,L),null!=re&&(le>re&&(le=re,Be=ne),ge<re&&(ge=re,ct=ne))}return[Be,ct]}const hr=Object.prototype.hasOwnProperty;function pr(L,q){return hr.call(L,q)}const Ki={};function ea(L){let Q,q={};function ne(re){return pr(q,re)&&q[re]!==Ki}const le={size:0,empty:0,object:q,has:ne,get:re=>ne(re)?q[re]:void 0,set(re,ge){return ne(re)||(++le.size,q[re]===Ki&&--le.empty),q[re]=ge,this},delete(re){return ne(re)&&(--le.size,++le.empty,q[re]=Ki),this},clear(){le.size=le.empty=0,le.object=q={}},test(re){return arguments.length?(Q=re,le):Q},clean(){const re={};let ge=0;for(const Be in q){const ct=q[Be];ct!==Ki&&(!Q||!Q(ct))&&(re[Be]=ct,++ge)}le.size=ge,le.empty=0,le.object=q=re}};return L&&Object.keys(L).forEach(re=>{le.set(re,L[re])}),le}function Ii(L,q,Q,ne,le,re){if(!Q&&0!==Q)return re;const ge=+Q;let Qt,Be=L[0],ct=$e(L);ct<Be&&(Qt=Be,Be=ct,ct=Qt),Qt=Math.abs(q-Be);const ni=Math.abs(ct-q);return Qt<ni&&Qt<=ge?ne:ni<=ge?le:re}function gs(L,q,Q){const ne=L.prototype=Object.create(q.prototype);return Object.defineProperty(ne,"constructor",{value:L,writable:!0,enumerable:!0,configurable:!0}),Pn(ne,Q)}function ls(L,q,Q,ne){let ge,le=q[0],re=q[q.length-1];return le>re&&(ge=le,le=re,re=ge),ne=void 0===ne||ne,((Q=void 0===Q||Q)?le<=L:le<L)&&(ne?L<=re:L<re)}function qs(L){return"boolean"==typeof L}function Zn(L){return"[object Date]"===Object.prototype.toString.call(L)}function uo(L){return L&&Gn(L[Symbol.iterator])}function us(L){return"number"==typeof L}function _a(L){return"[object RegExp]"===Object.prototype.toString.call(L)}function Os(L){return"string"==typeof L}function mu(L,q,Q){L&&(L=q?Nn(L).map(Be=>Be.replace(/\\(.)/g,"$1")):Nn(L));const ne=L&&L.length,le=Q&&Q.get||Ce,re=Be=>le(q?[Be]:De(Be));let ge;if(ne)if(1===ne){const Be=re(L[0]);ge=function(ct){return""+Be(ct)}}else{const Be=L.map(re);ge=function(ct){let Qt=""+Be[0](ct),ni=0;for(;++ni<ne;)Qt+="|"+Be[ni](ct);return Qt}}else ge=function(){return""};return _e(ge,L,"key")}function Qa(L,q){const Q=L[0],ne=$e(L),le=+q;return le?1===le?ne:Q+le*(ne-Q):Q}function co(L){let q,Q,ne;L=+L||1e4;const le=()=>{q={},Q={},ne=0},re=(ge,Be)=>(++ne>L&&(Q=q,q={},ne=1),q[ge]=Be);return le(),{clear:le,has:ge=>pr(q,ge)||pr(Q,ge),get:ge=>pr(q,ge)?q[ge]:pr(Q,ge)?re(ge,Q[ge]):void 0,set:(ge,Be)=>pr(q,ge)?q[ge]=Be:re(ge,Be)}}function Ln(L,q,Q,ne){const le=q.length,re=Q.length;if(!re)return q;if(!le)return Q;const ge=ne||new q.constructor(le+re);let Be=0,ct=0,Qt=0;for(;Be<le&&ct<re;++Qt)ge[Qt]=L(q[Be],Q[ct])>0?Q[ct++]:q[Be++];for(;Be<le;++Be,++Qt)ge[Qt]=q[Be];for(;ct<re;++ct,++Qt)ge[Qt]=Q[ct];return ge}function Dn(L,q){let Q="";for(;--q>=0;)Q+=L;return Q}function tn(L,q,Q,ne){const le=Q||" ",re=L+"",ge=q-re.length;return ge<=0?re:"left"===ne?Dn(le,ge)+re:"center"===ne?Dn(le,~~(ge/2))+re+Dn(le,Math.ceil(ge/2)):re+Dn(le,ge)}function Ue(L){return L&&$e(L)-L[0]||0}function Ne(L){return pt(L)?"["+L.map(Ne)+"]":Mt(L)||Os(L)?JSON.stringify(L).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):L}function Me(L){return null==L||""===L?null:!(!L||"false"===L||"0"===L||!L)}const Y=L=>us(L)||Zn(L)?L:Date.parse(L);function ie(L,q){return q=q||Y,null==L||""===L?null:q(L)}function he(L){return null==L||""===L?null:L+""}function Le(L){const q={},Q=L.length;for(let ne=0;ne<Q;++ne)q[L[ne]]=!0;return q}function Te(L,q,Q,ne){const le=null!=ne?ne:"\u2026",re=L+"",ge=re.length,Be=Math.max(0,q-le.length);return ge<=q?re:"left"===Q?le+re.slice(ge-Be):"center"===Q?re.slice(0,Math.ceil(Be/2))+le+re.slice(ge-~~(Be/2)):re.slice(0,Be)+le}function Je(L,q,Q){if(L)if(q){const ne=L.length;for(let le=0;le<ne;++le){const re=q(L[le]);re&&Q(re,le,L)}}else L.forEach(Q)}},5536:(it,bt,pe)=>{"use strict";pe.r(bt),pe.d(bt,{Bounds:()=>$s,CanvasHandler:()=>w,CanvasRenderer:()=>Se,DATE:()=>Ja,DAY:()=>$r,DAYOFYEAR:()=>Za,Dataflow:()=>gd,Debug:()=>T.cG,Error:()=>T.jj,EventStream:()=>lc,Gradient:()=>vs,GroupItem:()=>Yb,HOURS:()=>ra,Handler:()=>ih,Info:()=>T.kI,Item:()=>qb,MILLISECONDS:()=>cs,MINUTES:()=>Sn,MONTH:()=>fo,Marks:()=>bl,MultiPulse:()=>Eg,None:()=>T.Hq,Operator:()=>ji,Parameters:()=>H0,Pulse:()=>Da,QUARTER:()=>ia,RenderType:()=>sh,Renderer:()=>Nc,ResourceLoader:()=>lD,SECONDS:()=>Fs,SVGHandler:()=>vt,SVGRenderer:()=>Un,SVGStringRenderer:()=>Vm,Scenegraph:()=>$M,TIME_UNITS:()=>el,Transform:()=>Ke,View:()=>SN,WEEK:()=>ks,Warn:()=>T.uU,YEAR:()=>Ts,accessor:()=>T.ZE,accessorFields:()=>T.Oj,accessorName:()=>T.el,array:()=>T.IX,ascending:()=>T.j2,bandwidthNRD:()=>ZS,bin:()=>_d,bootstrapCI:()=>wu,boundClip:()=>k2,boundContext:()=>Gy,boundItem:()=>Lu,boundMark:()=>h1,boundStroke:()=>da,changeset:()=>sl,clampRange:()=>T.l$,codegenExpression:()=>d5,compare:()=>T.qu,constant:()=>T.a9,cumulativeLogNormal:()=>xw,cumulativeNormal:()=>ty,cumulativeUniform:()=>Sw,dayofyear:()=>sa,debounce:()=>T.Ds,defaultLocale:()=>Xs,definition:()=>bw,densityLogNormal:()=>Mg,densityNormal:()=>Kh,densityUniform:()=>Pv,domChild:()=>Cl,domClear:()=>wo,domCreate:()=>Mn,domFind:()=>g1,dotbin:()=>ww,error:()=>T.vU,expressionFunction:()=>Do,extend:()=>T.l7,extent:()=>T.We,extentIndex:()=>T.dI,falsy:()=>T.k,fastmap:()=>T.Xr,field:()=>T.EP,flush:()=>T.yl,font:()=>e_,fontFamily:()=>Vp,fontSize:()=>vl,format:()=>Df,formatLocale:()=>Ef,formats:()=>xf,hasOwnProperty:()=>T.nr,id:()=>T.id,identity:()=>T.yR,inferType:()=>yg,inferTypes:()=>fw,ingest:()=>Ti,inherits:()=>T.XW,inrange:()=>T.u5,interpolate:()=>Rb,interpolateColors:()=>hm,interpolateRange:()=>YA,intersect:()=>O2,intersectBoxLine:()=>jd,intersectPath:()=>hD,intersectPoint:()=>Zt,intersectRule:()=>Qb,isArray:()=>T.kJ,isBoolean:()=>T.jn,isDate:()=>T.J_,isFunction:()=>T.mf,isIterable:()=>T.TW,isNumber:()=>T.hj,isObject:()=>T.Kn,isRegExp:()=>T.Kj,isString:()=>T.HD,isTuple:()=>Vh,key:()=>T.Jy,lerp:()=>T.t7,lineHeight:()=>th,loader:()=>Dv,locale:()=>US,logger:()=>T.kg,lruCache:()=>T.$m,markup:()=>zp,merge:()=>T.TS,mergeConfig:()=>T.fE,multiLineOffset:()=>SD,one:()=>T.kX,pad:()=>T.vk,panLinear:()=>T.Dw,panLog:()=>T.mJ,panPow:()=>T.QA,panSymlog:()=>T.Zw,parse:()=>nU,parseExpression:()=>yz,parseSelector:()=>c8,pathCurves:()=>$y,pathEqual:()=>KM,pathParse:()=>kp,pathRectangle:()=>Co,pathRender:()=>bm,pathSymbols:()=>rM,pathTrail:()=>Qn,peek:()=>T.fj,point:()=>m1,projection:()=>LI,quantileLogNormal:()=>Og,quantileNormal:()=>Iv,quantileUniform:()=>bd,quantiles:()=>fc,quantizeInterpolator:()=>XA,quarter:()=>T.mS,quartiles:()=>J0,random:()=>lr,randomInteger:()=>Z0,randomKDE:()=>Ag,randomLCG:()=>Dw,randomLogNormal:()=>iy,randomMixture:()=>vd,randomNormal:()=>Rv,randomUniform:()=>Qh,read:()=>$0,regressionExp:()=>Lv,regressionLinear:()=>hc,regressionLoess:()=>eA,regressionLog:()=>Du,regressionPoly:()=>Pr,regressionPow:()=>si,regressionQuad:()=>Sa,renderModule:()=>w1,repeat:()=>T.rx,resetDefaultLocale:()=>rl,resetSVGClipId:()=>pM,resetSVGDefIds:()=>yW,responseType:()=>pw,runtimeContext:()=>n7,sampleCurve:()=>Vv,sampleLogNormal:()=>ny,sampleNormal:()=>jl,sampleUniform:()=>Nv,scale:()=>Ai,sceneEqual:()=>F2,sceneFromJSON:()=>$p,scenePickVisit:()=>Xy,sceneToJSON:()=>BM,sceneVisit:()=>iu,sceneZOrder:()=>Zb,scheme:()=>Pb,serializeXML:()=>IL,setRandom:()=>Sg,span:()=>T.yP,splitAccessPath:()=>T._k,stringValue:()=>T.m8,textMetrics:()=>Rc,timeBin:()=>jC,timeFloor:()=>Th,timeFormatLocale:()=>cd,timeInterval:()=>vu,timeOffset:()=>FS,timeSequence:()=>A0,timeUnitSpecifier:()=>TS,timeUnits:()=>Ht,toBoolean:()=>T.sw,toDate:()=>T.ZU,toNumber:()=>T.He,toSet:()=>T.Rg,toString:()=>T.BB,transform:()=>QS,transforms:()=>Dg,truncate:()=>T.$G,truthy:()=>T.yb,tupleid:()=>bn,typeParsers:()=>cw,utcFloor:()=>oa,utcInterval:()=>ho,utcOffset:()=>IS,utcSequence:()=>Ji,utcdayofyear:()=>nn,utcquarter:()=>T.N3,utcweek:()=>fi,version:()=>lU,visitArray:()=>T.FP,week:()=>bf,writeConfig:()=>T.iL,zero:()=>T.bM,zoomLinear:()=>T.ay,zoomLog:()=>T.dH,zoomPow:()=>T.mK,zoomSymlog:()=>T.bV});var _e={};pe.r(_e),pe.d(_e,{aggregate:()=>xu,bin:()=>kf,collect:()=>Ff,compare:()=>ly,countpattern:()=>wi,cross:()=>zv,density:()=>Wv,dotbin:()=>cy,expression:()=>Rf,extent:()=>fy,facet:()=>Ng,field:()=>hy,filter:()=>Pg,flatten:()=>qv,fold:()=>Rw,formula:()=>Yv,generate:()=>Nw,impute:()=>Bg,joinaggregate:()=>Vg,kde:()=>Bw,key:()=>iA,load:()=>Vw,lookup:()=>py,multiextent:()=>rA,multivalues:()=>Ma,params:()=>Qv,pivot:()=>jw,prefacet:()=>oA,project:()=>Uw,proxy:()=>Nf,quantile:()=>ll,relay:()=>EF,sample:()=>Pf,sequence:()=>aA,sieve:()=>Bo,subflow:()=>Gv,timeunit:()=>ep,tupleindex:()=>Hw,values:()=>Ww,window:()=>vo});var K={};pe.r(K),pe.d(K,{interpolate:()=>Mu,interpolateArray:()=>PF,interpolateBasis:()=>DE,interpolateBasisClosed:()=>xE,interpolateCubehelix:()=>wp,interpolateCubehelixLong:()=>im,interpolateDate:()=>$o,interpolateDiscrete:()=>Fd,interpolateHcl:()=>qF,interpolateHclLong:()=>YF,interpolateHsl:()=>Ls,interpolateHslLong:()=>zA,interpolateHue:()=>Fy,interpolateLab:()=>ku,interpolateNumber:()=>ql,interpolateNumberArray:()=>ur,interpolateObject:()=>yb,interpolateRgb:()=>mb,interpolateRgbBasis:()=>kA,interpolateRgbBasisClosed:()=>NF,interpolateRound:()=>dp,interpolateString:()=>TE,interpolateTransformCss:()=>xL,interpolateTransformSvg:()=>VE,interpolateZoom:()=>$E,piecewise:()=>fl,quantize:()=>Ep});var qe={};pe.r(qe),pe.d(qe,{bound:()=>D1,identifier:()=>U2,mark:()=>UL,overlap:()=>HL,render:()=>qL,viewlayout:()=>p6});var Ce={};pe.r(Ce),pe.d(Ce,{axisticks:()=>G2,datajoin:()=>r3,encode:()=>s3,legendentries:()=>o3,linkpath:()=>sO,pie:()=>K2,scale:()=>c3,sortitems:()=>lO,stack:()=>tI});var xe={};pe.r(xe),pe.d(xe,{contour:()=>UI,geojson:()=>ha,geopath:()=>b_,geopoint:()=>NO,geoshape:()=>V1,graticule:()=>PO,heatmap:()=>$1,isocontour:()=>kO,kde2d:()=>jI,projection:()=>GI});var ve={};pe.r(ve),pe.d(ve,{force:()=>Gr});var de={};pe.r(de),pe.d(de,{nest:()=>ou,pack:()=>ZO,partition:()=>CR,stratify:()=>wR,tree:()=>ER,treelinks:()=>DR,treemap:()=>mx});var De={};pe.r(De),pe.d(De,{label:()=>bx});var Ae={};pe.r(Ae),pe.d(Ae,{loess:()=>IR,regression:()=>zB});var Ie={};pe.r(Ie),pe.d(Ie,{voronoi:()=>WB});var ke={};pe.r(ke),pe.d(ke,{wordcloud:()=>dT});var nt={};pe.r(nt),pe.d(nt,{crossfilter:()=>GR,resolvefilter:()=>Dx});var T=pe(303);function Yt(i,s,o,l,c,h,g){try{var y=i[h](g),v=y.value}catch(C){return void o(C)}y.done?s(v):Promise.resolve(v).then(l,c)}function Kt(i){return function(){var s=this,o=arguments;return new Promise(function(l,c){var h=i.apply(s,o);function g(v){Yt(h,l,c,g,y,"next",v)}function y(v){Yt(h,l,c,g,y,"throw",v)}g(void 0)})}}var Nt={},Dt={};function Qe(i){return new Function("d","return {"+i.map(function(s,o){return JSON.stringify(s)+": d["+o+'] || ""'}).join(",")+"}")}function pt(i){var s=Object.create(null),o=[];return i.forEach(function(l){for(var c in l)c in s||o.push(s[c]=c)}),o}function Mt(i,s){var o=i+"",l=o.length;return l<s?new Array(s-l+1).join(0)+o:o}function Ze(i){var s=new RegExp('["'+i+"\n\r]"),o=i.charCodeAt(0);function c(x,S){var z,k=[],R=x.length,N=0,P=0,H=R<=0,X=!1;function J(){if(H)return Dt;if(X)return X=!1,Nt;var fe,Re,te=N;if(34===x.charCodeAt(te)){for(;N++<R&&34!==x.charCodeAt(N)||34===x.charCodeAt(++N););return(fe=N)>=R?H=!0:10===(Re=x.charCodeAt(N++))?X=!0:13===Re&&(X=!0,10===x.charCodeAt(N)&&++N),x.slice(te+1,fe-1).replace(/""/g,'"')}for(;N<R;){if(10===(Re=x.charCodeAt(fe=N++)))X=!0;else if(13===Re)X=!0,10===x.charCodeAt(N)&&++N;else if(Re!==o)continue;return x.slice(te,fe)}return H=!0,x.slice(te,R)}for(10===x.charCodeAt(R-1)&&--R,13===x.charCodeAt(R-1)&&--R;(z=J())!==Dt;){for(var oe=[];z!==Nt&&z!==Dt;)oe.push(z),z=J();S&&null==(oe=S(oe,P++))||k.push(oe)}return k}function h(x,S){return x.map(function(k){return S.map(function(R){return E(k[R])}).join(i)})}function C(x){return x.map(E).join(i)}function E(x){return null==x?"":x instanceof Date?function(i){var s=i.getUTCHours(),o=i.getUTCMinutes(),l=i.getUTCSeconds(),c=i.getUTCMilliseconds();return isNaN(i)?"Invalid Date":function(i){return i<0?"-"+Mt(-i,6):i>9999?"+"+Mt(i,6):Mt(i,4)}(i.getUTCFullYear())+"-"+Mt(i.getUTCMonth()+1,2)+"-"+Mt(i.getUTCDate(),2)+(c?"T"+Mt(s,2)+":"+Mt(o,2)+":"+Mt(l,2)+"."+Mt(c,3)+"Z":l?"T"+Mt(s,2)+":"+Mt(o,2)+":"+Mt(l,2)+"Z":o||s?"T"+Mt(s,2)+":"+Mt(o,2)+"Z":"")}(x):s.test(x+="")?'"'+x.replace(/"/g,'""')+'"':x}return{parse:function(x,S){var k,R,N=c(x,function(P,z){if(k)return k(P,z-1);R=P,k=S?function(i,s){var o=Qe(i);return function(l,c){return s(o(l),c,i)}}(P,S):Qe(P)});return N.columns=R||[],N},parseRows:c,format:function(x,S){return null==S&&(S=pt(x)),[S.map(E).join(i)].concat(h(x,S)).join("\n")},formatBody:function(x,S){return null==S&&(S=pt(x)),h(x,S).join("\n")},formatRows:function(x){return x.map(C).join("\n")},formatRow:C,formatValue:E}}function $e(i){return i}function We(i,s){return"string"==typeof s&&(s=i.objects[s]),"GeometryCollection"===s.type?{type:"FeatureCollection",features:s.geometries.map(function(o){return wt(i,o)})}:wt(i,s)}function wt(i,s){var o=s.id,l=s.bbox,c=null==s.properties?{}:s.properties,h=at(i,s);return null==o&&null==l?{type:"Feature",properties:c,geometry:h}:null==l?{type:"Feature",id:o,properties:c,geometry:h}:{type:"Feature",id:o,bbox:l,properties:c,geometry:h}}function at(i,s){var o=function(i){if(null==i)return $e;var s,o,l=i.scale[0],c=i.scale[1],h=i.translate[0],g=i.translate[1];return function(y,v){v||(s=o=0);var C=2,E=y.length,x=new Array(E);for(x[0]=(s+=y[0])*l+h,x[1]=(o+=y[1])*c+g;C<E;)x[C]=y[C],++C;return x}}(i.transform),l=i.arcs;function c(E,x){x.length&&x.pop();for(var S=l[E<0?~E:E],k=0,R=S.length;k<R;++k)x.push(o(S[k],k));E<0&&function(i,s){for(var o,l=i.length,c=l-s;c<--l;)o=i[c],i[c++]=i[l],i[l]=o}(x,R)}function h(E){return o(E)}function g(E){for(var x=[],S=0,k=E.length;S<k;++S)c(E[S],x);return x.length<2&&x.push(x[0]),x}function y(E){for(var x=g(E);x.length<4;)x.push(x[0]);return x}function v(E){return E.map(y)}return function C(E){var S,x=E.type;switch(x){case"GeometryCollection":return{type:x,geometries:E.geometries.map(C)};case"Point":S=h(E.coordinates);break;case"MultiPoint":S=E.coordinates.map(h);break;case"LineString":S=g(E.arcs);break;case"MultiLineString":S=E.arcs.map(g);break;case"Polygon":S=v(E.arcs);break;case"MultiPolygon":S=E.arcs.map(v);break;default:return null}return{type:x,coordinates:S}}(s)}function Pe(i,s){var o={},l={},c={},h=[],g=-1;function v(C,E){for(var x in C){var S=C[x];delete E[S.start],delete S.start,delete S.end,S.forEach(function(k){o[k<0?~k:k]=1}),h.push(S)}}return s.forEach(function(C,E){var S,x=i.arcs[C<0?~C:C];x.length<3&&!x[1][0]&&!x[1][1]&&(S=s[++g],s[g]=C,s[E]=S)}),s.forEach(function(C){var k,R,E=function(C){var S,E=i.arcs[C<0?~C:C],x=E[0];return i.transform?(S=[0,0],E.forEach(function(k){S[0]+=k[0],S[1]+=k[1]})):S=E[E.length-1],C<0?[S,x]:[x,S]}(C),x=E[0],S=E[1];if(k=c[x])if(delete c[k.end],k.push(C),k.end=S,R=l[S]){delete l[R.start];var N=R===k?k:k.concat(R);l[N.start=k.start]=c[N.end=R.end]=N}else l[k.start]=c[k.end]=k;else if(k=l[S])if(delete l[k.start],k.unshift(C),k.start=x,R=c[x]){delete c[R.end];var P=R===k?k:R.concat(k);l[P.start=R.start]=c[P.end=k.end]=P}else l[k.start]=c[k.end]=k;else l[(k=[C]).start=x]=c[k.end=S]=k}),v(c,l),v(l,c),s.forEach(function(C){o[C<0?~C:C]||h.push([C])}),h}function Gt(i){return at(i,gt.apply(this,arguments))}function gt(i,s,o){var l,c,h;if(arguments.length>1)l=ft(0,s,o);else for(c=0,l=new Array(h=i.arcs.length);c<h;++c)l[c]=c;return{type:"MultiLineString",arcs:Pe(i,l)}}function ft(i,s,o){var h,l=[],c=[];function g(x){var S=x<0?~x:x;(c[S]||(c[S]=[])).push({i:x,g:h})}function y(x){x.forEach(g)}function v(x){x.forEach(y)}return function E(x){switch(h=x,x.type){case"GeometryCollection":x.geometries.forEach(E);break;case"LineString":y(x.arcs);break;case"MultiLineString":case"Polygon":v(x.arcs);break;case"MultiPolygon":!function(x){x.forEach(v)}(x.arcs)}}(s),c.forEach(null==o?function(x){l.push(x[0].i)}:function(x){o(x[0].g,x[x.length-1].g)&&l.push(x[0].i)}),l}var yn=Math.sqrt(50),xt=Math.sqrt(10),qt=Math.sqrt(2);function sn(i,s,o){var l,h,g,y,c=-1;if(o=+o,(i=+i)==(s=+s)&&o>0)return[i];if((l=s<i)&&(h=i,i=s,s=h),0===(y=Yi(i,s,o))||!isFinite(y))return[];if(y>0){let v=Math.round(i/y),C=Math.round(s/y);for(v*y<i&&++v,C*y>s&&--C,g=new Array(h=C-v+1);++c<h;)g[c]=(v+c)*y}else{y=-y;let v=Math.round(i*y),C=Math.round(s*y);for(v/y<i&&++v,C/y>s&&--C,g=new Array(h=C-v+1);++c<h;)g[c]=(v+c)/y}return l&&g.reverse(),g}function Yi(i,s,o){var l=(s-i)/Math.max(0,o),c=Math.floor(Math.log(l)/Math.LN10),h=l/Math.pow(10,c);return c>=0?(h>=yn?10:h>=xt?5:h>=qt?2:1)*Math.pow(10,c):-Math.pow(10,-c)/(h>=yn?10:h>=xt?5:h>=qt?2:1)}function At(i,s,o){var l=Math.abs(s-i)/Math.max(0,o),c=Math.pow(10,Math.floor(Math.log(l)/Math.LN10)),h=l/c;return h>=yn?c*=10:h>=xt?c*=5:h>=qt&&(c*=2),s<i?-c:c}var Si,pi=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $t(i){if(!(s=pi.exec(i)))throw new Error("invalid format: "+i);var s;return new ht({fill:s[1],align:s[2],sign:s[3],symbol:s[4],zero:s[5],width:s[6],comma:s[7],precision:s[8]&&s[8].slice(1),trim:s[9],type:s[10]})}function ht(i){this.fill=void 0===i.fill?" ":i.fill+"",this.align=void 0===i.align?">":i.align+"",this.sign=void 0===i.sign?"-":i.sign+"",this.symbol=void 0===i.symbol?"":i.symbol+"",this.zero=!!i.zero,this.width=void 0===i.width?void 0:+i.width,this.comma=!!i.comma,this.precision=void 0===i.precision?void 0:+i.precision,this.trim=!!i.trim,this.type=void 0===i.type?"":i.type+""}function Nn(i,s){if((o=(i=s?i.toExponential(s-1):i.toExponential()).indexOf("e"))<0)return null;var o,l=i.slice(0,o);return[l.length>1?l[0]+l.slice(2):l,+i.slice(o+1)]}function gi(i){return(i=Nn(Math.abs(i)))?i[1]:NaN}function Gn(i,s){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(gi(s)/3)))-gi(Math.abs(i)))}function jn(i,s){return i=Math.abs(i),s=Math.abs(s)-i,Math.max(0,gi(s)-gi(i))+1}function Xi(i){return Math.max(0,-gi(Math.abs(i)))}function Mr(i,s){var o=Nn(i,s);if(!o)return i+"";var l=o[0],c=o[1];return c<0?"0."+new Array(-c).join("0")+l:l.length>c+1?l.slice(0,c+1)+"."+l.slice(c+1):l+new Array(c-l.length+2).join("0")}$t.prototype=ht.prototype,ht.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Pn={"%":(i,s)=>(100*i).toFixed(s),b:i=>Math.round(i).toString(2),c:i=>i+"",d:function(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)},e:(i,s)=>i.toExponential(s),f:(i,s)=>i.toFixed(s),g:(i,s)=>i.toPrecision(s),o:i=>Math.round(i).toString(8),p:(i,s)=>Mr(100*i,s),r:Mr,s:function(i,s){var o=Nn(i,s);if(!o)return i+"";var l=o[0],c=o[1],h=c-(Si=3*Math.max(-8,Math.min(8,Math.floor(c/3))))+1,g=l.length;return h===g?l:h>g?l+new Array(h-g+1).join("0"):h>0?l.slice(0,h)+"."+l.slice(h):"0."+new Array(1-h).join("0")+Nn(i,Math.max(0,s+h-1))[0]},X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function Kn(i){return i}var Ki,ea,Ii,as=Array.prototype.map,hr=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function pr(i){var s=void 0===i.grouping||void 0===i.thousands?Kn:function(i,s){return function(o,l){for(var c=o.length,h=[],g=0,y=i[0],v=0;c>0&&y>0&&(v+y+1>l&&(y=Math.max(1,l-v)),h.push(o.substring(c-=y,c+y)),!((v+=y+1)>l));)y=i[g=(g+1)%i.length];return h.reverse().join(s)}}(as.call(i.grouping,Number),i.thousands+""),o=void 0===i.currency?"":i.currency[0]+"",l=void 0===i.currency?"":i.currency[1]+"",c=void 0===i.decimal?".":i.decimal+"",h=void 0===i.numerals?Kn:function(i){return function(s){return s.replace(/[0-9]/g,function(o){return i[+o]})}}(as.call(i.numerals,String)),g=void 0===i.percent?"%":i.percent+"",y=void 0===i.minus?"\u2212":i.minus+"",v=void 0===i.nan?"NaN":i.nan+"";function C(x){var S=(x=$t(x)).fill,k=x.align,R=x.sign,N=x.symbol,P=x.zero,z=x.width,H=x.comma,X=x.precision,J=x.trim,oe=x.type;"n"===oe?(H=!0,oe="g"):Pn[oe]||(void 0===X&&(X=12),J=!0,oe="g"),(P||"0"===S&&"="===k)&&(P=!0,S="0",k="=");var fe="$"===N?o:"#"===N&&/[boxX]/.test(oe)?"0"+oe.toLowerCase():"",te="$"===N?l:/[%p]/.test(oe)?g:"",Re=Pn[oe],ze=/[defgprs%]/.test(oe);function Fe(Oe){var Ot,Xe,Tt,tt=fe,et=te;if("c"===oe)et=Re(Oe)+et,Oe="";else{var Xt=(Oe=+Oe)<0||1/Oe<0;if(Oe=isNaN(Oe)?v:Re(Math.abs(Oe),X),J&&(Oe=function(i){e:for(var c,s=i.length,o=1,l=-1;o<s;++o)switch(i[o]){case".":l=c=o;break;case"0":0===l&&(l=o),c=o;break;default:if(!+i[o])break e;l>0&&(l=0)}return l>0?i.slice(0,l)+i.slice(c+1):i}(Oe)),Xt&&0==+Oe&&"+"!==R&&(Xt=!1),tt=(Xt?"("===R?R:y:"-"===R||"("===R?"":R)+tt,et=("s"===oe?hr[8+Si/3]:"")+et+(Xt&&"("===R?")":""),ze)for(Ot=-1,Xe=Oe.length;++Ot<Xe;)if(48>(Tt=Oe.charCodeAt(Ot))||Tt>57){et=(46===Tt?c+Oe.slice(Ot+1):Oe.slice(Ot))+et,Oe=Oe.slice(0,Ot);break}}H&&!P&&(Oe=s(Oe,1/0));var un=tt.length+Oe.length+et.length,Wn=un<z?new Array(z-un+1).join(S):"";switch(H&&P&&(Oe=s(Wn+Oe,Wn.length?z-et.length:1/0),Wn=""),k){case"<":Oe=tt+Oe+et+Wn;break;case"=":Oe=tt+Wn+Oe+et;break;case"^":Oe=Wn.slice(0,un=Wn.length>>1)+tt+Oe+et+Wn.slice(un);break;default:Oe=Wn+tt+Oe+et}return h(Oe)}return X=void 0===X?6:/[gprs]/.test(oe)?Math.max(1,Math.min(21,X)):Math.max(0,Math.min(20,X)),Fe.toString=function(){return x+""},Fe}return{format:C,formatPrefix:function(x,S){var k=C(((x=$t(x)).type="f",x)),R=3*Math.max(-8,Math.min(8,Math.floor(gi(S)/3))),N=Math.pow(10,-R),P=hr[8+R/3];return function(z){return k(N*z)+P}}}}Ki=pr({thousands:",",grouping:[3],currency:["$",""]}),ea=Ki.format,Ii=Ki.formatPrefix;var ls=new Date,qs=new Date;function Zn(i,s,o,l){function c(h){return i(h=0===arguments.length?new Date:new Date(+h)),h}return c.floor=function(h){return i(h=new Date(+h)),h},c.ceil=function(h){return i(h=new Date(h-1)),s(h,1),i(h),h},c.round=function(h){var g=c(h),y=c.ceil(h);return h-g<y-h?g:y},c.offset=function(h,g){return s(h=new Date(+h),null==g?1:Math.floor(g)),h},c.range=function(h,g,y){var C,v=[];if(h=c.ceil(h),y=null==y?1:Math.floor(y),!(h<g&&y>0))return v;do{v.push(C=new Date(+h)),s(h,y),i(h)}while(C<h&&h<g);return v},c.filter=function(h){return Zn(function(g){if(g>=g)for(;i(g),!h(g);)g.setTime(g-1)},function(g,y){if(g>=g)if(y<0)for(;++y<=0;)for(;s(g,-1),!h(g););else for(;--y>=0;)for(;s(g,1),!h(g););})},o&&(c.count=function(h,g){return ls.setTime(+h),qs.setTime(+g),i(ls),i(qs),Math.floor(o(ls,qs))},c.every=function(h){return h=Math.floor(h),isFinite(h)&&h>0?h>1?c.filter(l?function(g){return l(g)%h==0}:function(g){return c.count(0,g)%h==0}):c:null}),c}const uo=1e3,us=6e4,_a=60*us,Os=24*_a,mu=7*Os,Qa=30*Os,Fl=365*Os;const Ln=Zn(i=>i.setHours(0,0,0,0),(i,s)=>i.setDate(i.getDate()+s),(i,s)=>(s-i-(s.getTimezoneOffset()-i.getTimezoneOffset())*us)/Os,i=>i.getDate()-1);function tn(i){return Zn(function(s){s.setDate(s.getDate()-(s.getDay()+7-i)%7),s.setHours(0,0,0,0)},function(s,o){s.setDate(s.getDate()+7*o)},function(s,o){return(o-s-(o.getTimezoneOffset()-s.getTimezoneOffset())*us)/mu})}var Ue=tn(0),Ne=tn(1),ie=(tn(2),tn(3),tn(4));const ge=(tn(5),tn(6),Zn(function(i){i.setUTCHours(0,0,0,0)},function(i,s){i.setUTCDate(i.getUTCDate()+s)},function(i,s){return(s-i)/Os},function(i){return i.getUTCDate()-1}));function ct(i){return Zn(function(s){s.setUTCDate(s.getUTCDate()-(s.getUTCDay()+7-i)%7),s.setUTCHours(0,0,0,0)},function(s,o){s.setUTCDate(s.getUTCDate()+7*o)},function(s,o){return(o-s)/mu})}var Qt=ct(0),ni=ct(1),Il=(ct(2),ct(3),ct(4)),BC=(ct(5),ct(6),Zn(function(i){i.setMonth(0,1),i.setHours(0,0,0,0)},function(i,s){i.setFullYear(i.getFullYear()+s)},function(i,s){return s.getFullYear()-i.getFullYear()},function(i){return i.getFullYear()}));BC.every=function(i){return isFinite(i=Math.floor(i))&&i>0?Zn(function(s){s.setFullYear(Math.floor(s.getFullYear()/i)*i),s.setMonth(0,1),s.setHours(0,0,0,0)},function(s,o){s.setFullYear(s.getFullYear()+o*i)}):null};const ot=BC;const Rl=Zn(function(i){i.setDate(1),i.setHours(0,0,0,0)},function(i,s){i.setMonth(i.getMonth()+s)},function(i,s){return s.getMonth()-i.getMonth()+12*(s.getFullYear()-i.getFullYear())},function(i){return i.getMonth()});const iv=Zn(function(i){i.setTime(i-i.getMilliseconds()-i.getSeconds()*uo-i.getMinutes()*us)},function(i,s){i.setTime(+i+s*_a)},function(i,s){return(s-i)/_a},function(i){return i.getHours()});const x0=Zn(function(i){i.setTime(i-i.getMilliseconds()-i.getSeconds()*uo)},function(i,s){i.setTime(+i+s*us)},function(i,s){return(s-i)/us},function(i){return i.getMinutes()});const xn=Zn(function(i){i.setTime(i-i.getMilliseconds())},function(i,s){i.setTime(+i+s*uo)},function(i,s){return(s-i)/uo},function(i){return i.getUTCSeconds()});var VC=Zn(function(){},function(i,s){i.setTime(+i+s)},function(i,s){return s-i});VC.every=function(i){return i=Math.floor(i),isFinite(i)&&i>0?i>1?Zn(function(s){s.setTime(Math.floor(s/i)*i)},function(s,o){s.setTime(+s+o*i)},function(s,o){return(o-s)/i}):VC:null};const sd=VC;var OS=Zn(function(i){i.setUTCMonth(0,1),i.setUTCHours(0,0,0,0)},function(i,s){i.setUTCFullYear(i.getUTCFullYear()+s)},function(i,s){return s.getUTCFullYear()-i.getUTCFullYear()},function(i){return i.getUTCFullYear()});OS.every=function(i){return isFinite(i=Math.floor(i))&&i>0?Zn(function(s){s.setUTCFullYear(Math.floor(s.getUTCFullYear()/i)*i),s.setUTCMonth(0,1),s.setUTCHours(0,0,0,0)},function(s,o){s.setUTCFullYear(s.getUTCFullYear()+o*i)}):null};const na=OS;const rv=Zn(function(i){i.setUTCDate(1),i.setUTCHours(0,0,0,0)},function(i,s){i.setUTCMonth(i.getUTCMonth()+s)},function(i,s){return s.getUTCMonth()-i.getUTCMonth()+12*(s.getUTCFullYear()-i.getUTCFullYear())},function(i){return i.getUTCMonth()});const yu=Zn(function(i){i.setUTCMinutes(0,0,0)},function(i,s){i.setTime(+i+s*_a)},function(i,s){return(s-i)/_a},function(i){return i.getUTCHours()});const Qi=Zn(function(i){i.setUTCSeconds(0,0)},function(i,s){i.setTime(+i+s*us)},function(i,s){return(s-i)/us},function(i){return i.getUTCMinutes()});function sv(i,s){return i<s?-1:i>s?1:i>=s?0:NaN}function ad(i){let s=i,o=i;function l(g,y,v,C){for(null==v&&(v=0),null==C&&(C=g.length);v<C;){const E=v+C>>>1;o(g[E],y)<0?v=E+1:C=E}return v}return 1===i.length&&(s=(g,y)=>i(g)-y,o=function(i){return(s,o)=>sv(i(s),o)}(i)),{left:l,center:function(g,y,v,C){null==v&&(v=0),null==C&&(C=g.length);const E=l(g,y,v,C-1);return E>v&&s(g[E-1],y)>-s(g[E],y)?E-1:E},right:function(g,y,v,C){for(null==v&&(v=0),null==C&&(C=g.length);v<C;){const E=v+C>>>1;o(g[E],y)>0?C=E:v=E+1}return v}}}const Ts="year",ia="quarter",fo="month",ks="week",Ja="date",$r="day",Za="dayofyear",ra="hours",Sn="minutes",Fs="seconds",cs="milliseconds",el=[Ts,ia,fo,ks,Ja,$r,Za,ra,Sn,Fs,cs],ug=el.reduce((i,s,o)=>(i[s]=1+o,i),{});function Ht(i){const s=(0,T.IX)(i).slice(),o={};return s.length||(0,T.vU)("Missing time unit."),s.forEach(c=>{(0,T.nr)(ug,c)?o[c]=1:(0,T.vU)("Invalid time unit: ".concat(c,"."))}),(o[ks]||o[$r]?1:0)+(o[ia]||o[fo]||o[Ja]?1:0)+(o[Za]?1:0)>1&&(0,T.vU)("Incompatible time units: ".concat(i)),s.sort((c,h)=>ug[c]-ug[h]),s}const ov={[Ts]:"%Y ",[ia]:"Q%q ",[fo]:"%b ",[Ja]:"%d ",[ks]:"W%U ",[$r]:"%a ",[Za]:"%j ",[ra]:"%H:00",[Sn]:"00:%M",[Fs]:":%S",[cs]:".%L",["".concat(Ts,"-").concat(fo)]:"%Y-%m ",["".concat(Ts,"-").concat(fo,"-").concat(Ja)]:"%Y-%m-%d ",["".concat(ra,"-").concat(Sn)]:"%H:%M"};function TS(i,s){const o=(0,T.l7)({},ov,s),l=Ht(i),c=l.length;let y,v,h="",g=0;for(g=0;g<c;)for(y=l.length;y>g;--y)if(v=l.slice(g,y).join("-"),null!=o[v]){h+=o[v],g=y;break}return h.trim()}const kt=new Date;function Ys(i){return kt.setFullYear(i),kt.setMonth(0),kt.setDate(1),kt.setHours(0,0,0,0),kt}function sa(i){return Oh(new Date(i))}function bf(i){return tl(new Date(i))}function Oh(i){return Ln.count(Ys(i.getFullYear())-1,i)}function tl(i){return Ue.count(Ys(i.getFullYear())-1,i)}function kS(i){return Ys(i).getDay()}function nl(i,s,o,l,c,h,g){if(0<=i&&i<100){const y=new Date(-1,s,o,l,c,h,g);return y.setFullYear(i),y}return new Date(i,s,o,l,c,h,g)}function nn(i){return Tr(new Date(i))}function fi(i){return Oo(new Date(i))}function Tr(i){const s=Date.UTC(i.getUTCFullYear(),0,1);return ge.count(s-1,i)}function Oo(i){const s=Date.UTC(i.getUTCFullYear(),0,1);return Qt.count(s-1,i)}function Ll(i){return kt.setTime(Date.UTC(i,0,1)),kt.getUTCDay()}function kr(i,s,o,l,c,h,g){if(0<=i&&i<100){const y=new Date(Date.UTC(-1,s,o,l,c,h,g));return y.setUTCFullYear(o.y),y}return new Date(Date.UTC(i,s,o,l,c,h,g))}function Cf(i,s,o,l,c){const h=s||1,g=(0,T.fj)(i),y=(z,H,X)=>function(i,s,o,l){const c=o<=1?i:l?(h,g)=>l+o*Math.floor((i(h,g)-l)/o):(h,g)=>o*Math.floor(i(h,g)/o);return s?(h,g)=>s(c(h,g),g):c}(o[X=X||z],l[X],z===g&&h,H),v=new Date,C=(0,T.Rg)(i),E=C[Ts]?y(Ts):(0,T.a9)(2012),x=C[fo]?y(fo):C[ia]?y(ia):T.bM,S=C[ks]&&C[$r]?y($r,1,ks+$r):C[ks]?y(ks,1):C[$r]?y($r,1):C[Ja]?y(Ja,1):C[Za]?y(Za,1):T.kX,k=C[ra]?y(ra):T.bM,R=C[Sn]?y(Sn):T.bM,N=C[Fs]?y(Fs):T.bM,P=C[cs]?y(cs):T.bM;return function(z){v.setTime(+z);const H=E(v);return c(H,x(v),S(v,H),k(v),R(v),N(v),P(v))}}function ld(i,s,o){return s+7*i-(o+6)%7}const cg={[Ts]:i=>i.getFullYear(),[ia]:i=>Math.floor(i.getMonth()/3),[fo]:i=>i.getMonth(),[Ja]:i=>i.getDate(),[ra]:i=>i.getHours(),[Sn]:i=>i.getMinutes(),[Fs]:i=>i.getSeconds(),[cs]:i=>i.getMilliseconds(),[Za]:i=>Oh(i),[ks]:i=>tl(i),[ks+$r]:(i,s)=>ld(tl(i),i.getDay(),kS(s)),[$r]:(i,s)=>ld(1,i.getDay(),kS(s))},li={[ia]:i=>3*i,[ks]:(i,s)=>ld(i,0,kS(s))};function Th(i,s){return Cf(i,s||1,cg,li,nl)}const dg={[Ts]:i=>i.getUTCFullYear(),[ia]:i=>Math.floor(i.getUTCMonth()/3),[fo]:i=>i.getUTCMonth(),[Ja]:i=>i.getUTCDate(),[ra]:i=>i.getUTCHours(),[Sn]:i=>i.getUTCMinutes(),[Fs]:i=>i.getUTCSeconds(),[cs]:i=>i.getUTCMilliseconds(),[Za]:i=>Tr(i),[ks]:i=>Oo(i),[$r]:(i,s)=>ld(1,i.getUTCDay(),Ll(s)),[ks+$r]:(i,s)=>ld(Oo(i),i.getUTCDay(),Ll(s))},$C={[ia]:i=>3*i,[ks]:(i,s)=>ld(i,0,Ll(s))};function oa(i,s){return Cf(i,s||1,dg,$C,kr)}const ds={[Ts]:ot,[ia]:Rl.every(3),[fo]:Rl,[ks]:Ue,[Ja]:Ln,[$r]:Ln,[Za]:Ln,[ra]:iv,[Sn]:x0,[Fs]:xn,[cs]:sd},kh={[Ts]:na,[ia]:rv.every(3),[fo]:rv,[ks]:Qt,[Ja]:ge,[$r]:ge,[Za]:ge,[ra]:yu,[Sn]:Qi,[Fs]:xn,[cs]:sd};function vu(i){return ds[i]}function ho(i){return kh[i]}function br(i,s,o){return i?i.offset(s,o):void 0}function FS(i,s,o){return br(vu(i),s,o)}function IS(i,s,o){return br(ho(i),s,o)}function S0(i,s,o,l){return i?i.range(s,o,l):void 0}function A0(i,s,o,l){return S0(vu(i),s,o,l)}function Ji(i,s,o,l){return S0(ho(i),s,o,l)}const po=6e4,jr=60*po,M0=24*jr,Fr=30*M0,fg=365*M0,Bl=[Ts,fo,Ja,ra,Sn,Fs,cs],mn=Bl.slice(0,-1),Qr=mn.slice(0,-1),O0=Qr.slice(0,-1),aL=O0.slice(0,-1),jk=[Ts,fo],zk=[Ts],av=[[mn,1,1e3],[mn,5,5e3],[mn,15,15e3],[mn,30,3e4],[Qr,1,po],[Qr,5,5*po],[Qr,15,15*po],[Qr,30,30*po],[O0,1,jr],[O0,3,3*jr],[O0,6,6*jr],[O0,12,12*jr],[aL,1,M0],[[Ts,ks],1,6048e5],[jk,1,Fr],[jk,3,3*Fr],[zk,1,fg]];function jC(i){const s=i.extent,o=i.maxbins||40,l=Math.abs((0,T.yP)(s))/o;let h,g,c=ad(y=>y[2]).right(av,l);return c===av.length?(h=zk,g=At(s[0]/fg,s[1]/fg,o)):c?(c=av[l/av[c-1][2]<av[c][2]/l?c-1:c],h=c[0],g=c[1]):(h=Bl,g=Math.max(At(s[0],s[1],o),1)),{units:h,step:g}}function zC(i){if(0<=i.y&&i.y<100){var s=new Date(-1,i.m,i.d,i.H,i.M,i.S,i.L);return s.setFullYear(i.y),s}return new Date(i.y,i.m,i.d,i.H,i.M,i.S,i.L)}function ba(i){if(0<=i.y&&i.y<100){var s=new Date(Date.UTC(-1,i.m,i.d,i.H,i.M,i.S,i.L));return s.setUTCFullYear(i.y),s}return new Date(Date.UTC(i.y,i.m,i.d,i.H,i.M,i.S,i.L))}function T0(i,s,o){return{y:i,m:s,d:o,H:0,M:0,S:0,L:0}}function Nr(i){var s=i.dateTime,o=i.date,l=i.time,c=i.periods,h=i.days,g=i.shortDays,y=i.months,v=i.shortMonths,C=Fh(c),E=Ih(c),x=Fh(h),S=Ih(h),k=Fh(g),R=Ih(g),N=Fh(y),P=Ih(y),z=Fh(v),H=Ih(v),X={a:function(pn){return g[pn.getDay()]},A:function(pn){return h[pn.getDay()]},b:function(pn){return v[pn.getMonth()]},B:function(pn){return y[pn.getMonth()]},c:null,d:cv,e:cv,f:Xk,g:JC,G:wf,H:uL,I:Jr,j:cL,L:YC,m:ms,M:Kk,p:function(pn){return c[+(pn.getHours()>=12)]},q:function(pn){return 1+~~(pn.getMonth()/3)},Q:N0,s:To,S:Qk,u:dv,U:Vl,V:KC,w:pg,W:il,x:null,X:null,y:QC,Y:Jk,Z:ZC,"%":R0},J={a:function(pn){return g[pn.getUTCDay()]},A:function(pn){return h[pn.getUTCDay()]},b:function(pn){return v[pn.getUTCMonth()]},B:function(pn){return y[pn.getUTCMonth()]},c:null,d:fv,e:fv,f:tF,g:ew,G:dL,H:ii,I:Zk,j:eF,L:hv,m:F0,M:nF,p:function(pn){return c[+(pn.getUTCHours()>=12)]},q:function(pn){return 1+~~(pn.getUTCMonth()/3)},Q:N0,s:To,S:iF,u:Ct,U:Oi,V:Is,w:VS,W:I0,x:null,X:null,y:ac,Y:tw,Z:rF,"%":R0},oe={a:function(pn,_i,nr){var Pt=k.exec(_i.slice(nr));return Pt?(pn.w=R.get(Pt[0].toLowerCase()),nr+Pt[0].length):-1},A:function(pn,_i,nr){var Pt=x.exec(_i.slice(nr));return Pt?(pn.w=S.get(Pt[0].toLowerCase()),nr+Pt[0].length):-1},b:function(pn,_i,nr){var Pt=z.exec(_i.slice(nr));return Pt?(pn.m=H.get(Pt[0].toLowerCase()),nr+Pt[0].length):-1},B:function(pn,_i,nr){var Pt=N.exec(_i.slice(nr));return Pt?(pn.m=P.get(Pt[0].toLowerCase()),nr+Pt[0].length):-1},c:function(pn,_i,nr){return Re(pn,s,_i,nr)},d:k0,e:k0,f:GC,g:or,G:UC,H:WC,I:WC,j:NS,L:Ca,m:Yk,M:uv,p:function(pn,_i,nr){var Pt=C.exec(_i.slice(nr));return Pt?(pn.p=E.get(Pt[0].toLowerCase()),nr+Pt[0].length):-1},q:qk,Q:qC,s:BS,S:PS,u:Hk,U:Wk,V:Gk,w:lv,W:hn,x:function(pn,_i,nr){return Re(pn,o,_i,nr)},X:function(pn,_i,nr){return Re(pn,l,_i,nr)},y:or,Y:UC,Z:HC,"%":LS};function fe(pn,_i){return function(nr){var nc,m0,Ci,Pt=[],du=-1,Vr=0,tc=pn.length;for(nr instanceof Date||(nr=new Date(+nr));++du<tc;)37===pn.charCodeAt(du)&&(Pt.push(pn.slice(Vr,du)),null!=(m0=RS[nc=pn.charAt(++du)])?nc=pn.charAt(++du):m0="e"===nc?" ":"0",(Ci=_i[nc])&&(nc=Ci(nr,m0)),Pt.push(nc),Vr=du+1);return Pt.push(pn.slice(Vr,du)),Pt.join("")}}function te(pn,_i){return function(nr){var Vr,tc,Pt=T0(1900,void 0,1);if(Re(Pt,pn,nr+="",0)!=nr.length)return null;if("Q"in Pt)return new Date(Pt.Q);if("s"in Pt)return new Date(1e3*Pt.s+("L"in Pt?Pt.L:0));if(_i&&!("Z"in Pt)&&(Pt.Z=0),"p"in Pt&&(Pt.H=Pt.H%12+12*Pt.p),void 0===Pt.m&&(Pt.m="q"in Pt?Pt.q:0),"V"in Pt){if(Pt.V<1||Pt.V>53)return null;"w"in Pt||(Pt.w=1),"Z"in Pt?(tc=(Vr=ba(T0(Pt.y,0,1))).getUTCDay(),Vr=tc>4||0===tc?ni.ceil(Vr):ni(Vr),Vr=ge.offset(Vr,7*(Pt.V-1)),Pt.y=Vr.getUTCFullYear(),Pt.m=Vr.getUTCMonth(),Pt.d=Vr.getUTCDate()+(Pt.w+6)%7):(tc=(Vr=zC(T0(Pt.y,0,1))).getDay(),Vr=tc>4||0===tc?Ne.ceil(Vr):Ne(Vr),Vr=Ln.offset(Vr,7*(Pt.V-1)),Pt.y=Vr.getFullYear(),Pt.m=Vr.getMonth(),Pt.d=Vr.getDate()+(Pt.w+6)%7)}else("W"in Pt||"U"in Pt)&&("w"in Pt||(Pt.w="u"in Pt?Pt.u%7:"W"in Pt?1:0),tc="Z"in Pt?ba(T0(Pt.y,0,1)).getUTCDay():zC(T0(Pt.y,0,1)).getDay(),Pt.m=0,Pt.d="W"in Pt?(Pt.w+6)%7+7*Pt.W-(tc+5)%7:Pt.w+7*Pt.U-(tc+6)%7);return"Z"in Pt?(Pt.H+=Pt.Z/100|0,Pt.M+=Pt.Z%100,ba(Pt)):zC(Pt)}}function Re(pn,_i,nr,Pt){for(var nc,m0,du=0,Vr=_i.length,tc=nr.length;du<Vr;){if(Pt>=tc)return-1;if(37===(nc=_i.charCodeAt(du++))){if(nc=_i.charAt(du++),!(m0=oe[nc in RS?_i.charAt(du++):nc])||(Pt=m0(pn,nr,Pt))<0)return-1}else if(nc!=nr.charCodeAt(Pt++))return-1}return Pt}return X.x=fe(o,X),X.X=fe(l,X),X.c=fe(s,X),J.x=fe(o,J),J.X=fe(l,J),J.c=fe(s,J),{format:function(pn){var _i=fe(pn+="",X);return _i.toString=function(){return pn},_i},parse:function(pn){var _i=te(pn+="",!1);return _i.toString=function(){return pn},_i},utcFormat:function(pn){var _i=fe(pn+="",J);return _i.toString=function(){return pn},_i},utcParse:function(pn){var _i=te(pn+="",!0);return _i.toString=function(){return pn},_i}}}var ko,P0,Rh,bu,$S,RS={"-":"",_:" ",0:"0"},Ir=/^\s*\d+/,lL=/^%/,Uk=/[\\^$*+?|[\]().{}]/g;function vn(i,s,o){var l=i<0?"-":"",c=(l?-i:i)+"",h=c.length;return l+(h<o?new Array(o-h+1).join(s)+c:c)}function hg(i){return i.replace(Uk,"\\$&")}function Fh(i){return new RegExp("^(?:"+i.map(hg).join("|")+")","i")}function Ih(i){return new Map(i.map((s,o)=>[s.toLowerCase(),o]))}function lv(i,s,o){var l=Ir.exec(s.slice(o,o+1));return l?(i.w=+l[0],o+l[0].length):-1}function Hk(i,s,o){var l=Ir.exec(s.slice(o,o+1));return l?(i.u=+l[0],o+l[0].length):-1}function Wk(i,s,o){var l=Ir.exec(s.slice(o,o+2));return l?(i.U=+l[0],o+l[0].length):-1}function Gk(i,s,o){var l=Ir.exec(s.slice(o,o+2));return l?(i.V=+l[0],o+l[0].length):-1}function hn(i,s,o){var l=Ir.exec(s.slice(o,o+2));return l?(i.W=+l[0],o+l[0].length):-1}function UC(i,s,o){var l=Ir.exec(s.slice(o,o+4));return l?(i.y=+l[0],o+l[0].length):-1}function or(i,s,o){var l=Ir.exec(s.slice(o,o+2));return l?(i.y=+l[0]+(+l[0]>68?1900:2e3),o+l[0].length):-1}function HC(i,s,o){var l=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(s.slice(o,o+6));return l?(i.Z=l[1]?0:-(l[2]+(l[3]||"00")),o+l[0].length):-1}function qk(i,s,o){var l=Ir.exec(s.slice(o,o+1));return l?(i.q=3*l[0]-3,o+l[0].length):-1}function Yk(i,s,o){var l=Ir.exec(s.slice(o,o+2));return l?(i.m=l[0]-1,o+l[0].length):-1}function k0(i,s,o){var l=Ir.exec(s.slice(o,o+2));return l?(i.d=+l[0],o+l[0].length):-1}function NS(i,s,o){var l=Ir.exec(s.slice(o,o+3));return l?(i.m=0,i.d=+l[0],o+l[0].length):-1}function WC(i,s,o){var l=Ir.exec(s.slice(o,o+2));return l?(i.H=+l[0],o+l[0].length):-1}function uv(i,s,o){var l=Ir.exec(s.slice(o,o+2));return l?(i.M=+l[0],o+l[0].length):-1}function PS(i,s,o){var l=Ir.exec(s.slice(o,o+2));return l?(i.S=+l[0],o+l[0].length):-1}function Ca(i,s,o){var l=Ir.exec(s.slice(o,o+3));return l?(i.L=+l[0],o+l[0].length):-1}function GC(i,s,o){var l=Ir.exec(s.slice(o,o+6));return l?(i.L=Math.floor(l[0]/1e3),o+l[0].length):-1}function LS(i,s,o){var l=lL.exec(s.slice(o,o+1));return l?o+l[0].length:-1}function qC(i,s,o){var l=Ir.exec(s.slice(o));return l?(i.Q=+l[0],o+l[0].length):-1}function BS(i,s,o){var l=Ir.exec(s.slice(o));return l?(i.s=+l[0],o+l[0].length):-1}function cv(i,s){return vn(i.getDate(),s,2)}function uL(i,s){return vn(i.getHours(),s,2)}function Jr(i,s){return vn(i.getHours()%12||12,s,2)}function cL(i,s){return vn(1+Ln.count(ot(i),i),s,3)}function YC(i,s){return vn(i.getMilliseconds(),s,3)}function Xk(i,s){return YC(i,s)+"000"}function ms(i,s){return vn(i.getMonth()+1,s,2)}function Kk(i,s){return vn(i.getMinutes(),s,2)}function Qk(i,s){return vn(i.getSeconds(),s,2)}function dv(i){var s=i.getDay();return 0===s?7:s}function Vl(i,s){return vn(Ue.count(ot(i)-1,i),s,2)}function XC(i){var s=i.getDay();return s>=4||0===s?ie(i):ie.ceil(i)}function KC(i,s){return i=XC(i),vn(ie.count(ot(i),i)+(4===ot(i).getDay()),s,2)}function pg(i){return i.getDay()}function il(i,s){return vn(Ne.count(ot(i)-1,i),s,2)}function QC(i,s){return vn(i.getFullYear()%100,s,2)}function JC(i,s){return vn((i=XC(i)).getFullYear()%100,s,2)}function Jk(i,s){return vn(i.getFullYear()%1e4,s,4)}function wf(i,s){var o=i.getDay();return vn((i=o>=4||0===o?ie(i):ie.ceil(i)).getFullYear()%1e4,s,4)}function ZC(i){var s=i.getTimezoneOffset();return(s>0?"-":(s*=-1,"+"))+vn(s/60|0,"0",2)+vn(s%60,"0",2)}function fv(i,s){return vn(i.getUTCDate(),s,2)}function ii(i,s){return vn(i.getUTCHours(),s,2)}function Zk(i,s){return vn(i.getUTCHours()%12||12,s,2)}function eF(i,s){return vn(1+ge.count(na(i),i),s,3)}function hv(i,s){return vn(i.getUTCMilliseconds(),s,3)}function tF(i,s){return hv(i,s)+"000"}function F0(i,s){return vn(i.getUTCMonth()+1,s,2)}function nF(i,s){return vn(i.getUTCMinutes(),s,2)}function iF(i,s){return vn(i.getUTCSeconds(),s,2)}function Ct(i){var s=i.getUTCDay();return 0===s?7:s}function Oi(i,s){return vn(Qt.count(na(i)-1,i),s,2)}function Zr(i){var s=i.getUTCDay();return s>=4||0===s?Il(i):Il.ceil(i)}function Is(i,s){return i=Zr(i),vn(Il.count(na(i),i)+(4===na(i).getUTCDay()),s,2)}function VS(i){return i.getUTCDay()}function I0(i,s){return vn(ni.count(na(i)-1,i),s,2)}function ac(i,s){return vn(i.getUTCFullYear()%100,s,2)}function ew(i,s){return vn((i=Zr(i)).getUTCFullYear()%100,s,2)}function tw(i,s){return vn(i.getUTCFullYear()%1e4,s,4)}function dL(i,s){var o=i.getUTCDay();return vn((i=o>=4||0===o?Il(i):Il.ceil(i)).getUTCFullYear()%1e4,s,4)}function rF(){return"+0000"}function R0(){return"%"}function N0(i){return+i}function To(i){return Math.floor(+i/1e3)}function gg(i){const s={};return o=>s[o]||(s[o]=i(o))}function pv(i){const s=gg(i.format),o=i.formatPrefix;return{format:s,formatPrefix:o,formatFloat(l){const c=$t(l||",");if(null==c.precision){switch(c.precision=12,c.type){case"%":c.precision-=2;break;case"e":c.precision-=1}return function(i,s){return o=>{const l=i(o),c=l.indexOf(s);if(c<0)return l;let h=function(i,s){let l,o=i.lastIndexOf("e");if(o>0)return o;for(o=i.length;--o>s;)if(l=i.charCodeAt(o),l>=48&&l<=57)return o+1}(l,c);const g=h<l.length?l.slice(h):"";for(;--h>c;)if("0"!==l[h]){++h;break}return l.slice(0,h)+g}}(s(c),s(".1f")(1)[1])}return s(c)},formatSpan(l,c,h,g){g=$t(null==g?",f":g);const y=At(l,c,h),v=Math.max(Math.abs(l),Math.abs(c));let C;if(null==g.precision)switch(g.type){case"s":return isNaN(C=Gn(y,v))||(g.precision=C),o(g,v);case"":case"e":case"g":case"p":case"r":isNaN(C=jn(y,v))||(g.precision=C-("e"===g.type));break;case"f":case"%":isNaN(C=Xi(y))||(g.precision=C-2*("%"===g.type))}return s(g)}}}let gv,yv;function mv(){return gv=pv({format:ea,formatPrefix:Ii})}function zS(i){return pv(pr(i))}function Ef(i){return arguments.length?gv=zS(i):gv}function L0(i,s,o){(0,T.Kn)(o=o||{})||(0,T.vU)("Invalid time multi-format specifier: ".concat(o));const l=s(Fs),c=s(Sn),h=s(ra),g=s(Ja),y=s(ks),v=s(fo),C=s(ia),E=s(Ts),x=i(o[cs]||".%L"),S=i(o[Fs]||":%S"),k=i(o[Sn]||"%I:%M"),R=i(o[ra]||"%I %p"),N=i(o[Ja]||o[$r]||"%a %d"),P=i(o[ks]||"%b %d"),z=i(o[fo]||"%B"),H=i(o[ia]||"%B"),X=i(o[Ts]||"%Y");return J=>(l(J)<J?x:c(J)<J?S:h(J)<J?k:g(J)<J?R:v(J)<J?y(J)<J?N:P:E(J)<J?C(J)<J?z:H:X)(J)}function iw(i){const s=gg(i.format),o=gg(i.utcFormat);return{timeFormat:l=>(0,T.HD)(l)?s(l):L0(s,vu,l),utcFormat:l=>(0,T.HD)(l)?o(l):L0(o,ho,l),timeParse:gg(i.parse),utcParse:gg(i.utcParse)}}function rw(){return yv=iw({format:P0,parse:Rh,utcFormat:bu,utcParse:$S})}function _v(i){return iw(Nr(i))}function cd(i){return arguments.length?yv=_v(i):yv}ko=Nr({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),P0=ko.format,Rh=ko.parse,bu=ko.utcFormat,$S=ko.utcParse,mv(),rw();const sw=(i,s)=>(0,T.l7)({},i,s);function US(i,s){const o=i?zS(i):Ef(),l=s?_v(s):cd();return sw(o,l)}function Xs(i,s){const o=arguments.length;return o&&2!==o&&(0,T.vU)("defaultLocale expects either zero or two arguments."),o?sw(Ef(i),cd(s)):sw(Ef(),cd())}function rl(){return mv(),rw(),Xs()}const es=/^(data:|([A-Za-z]+:)?\/\/)/,Nh=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,It=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,HS="file://";function WS(i,s){return ow.apply(this,arguments)}function ow(){return(ow=Kt(function*(i,s){const o=yield this.sanitize(i,s),l=o.href;return o.localFile?this.file(l):this.http(l,s)})).apply(this,arguments)}function B0(i,s){return mg.apply(this,arguments)}function mg(){return(mg=Kt(function*(i,s){s=(0,T.l7)({},this.options,s);const o=this.fileAccess,l={href:null};let c,h,g;const y=Nh.test(i.replace(It,""));(null==i||"string"!=typeof i||!y)&&(0,T.vU)("Sanitize failure, invalid URI: "+(0,T.m8)(i));const v=es.test(i);return(g=s.baseURL)&&!v&&(!i.startsWith("/")&&!g.endsWith("/")&&(i="/"+i),i=g+i),h=(c=i.startsWith(HS))||"file"===s.mode||"http"!==s.mode&&!v&&o,c?i=i.slice(HS.length):i.startsWith("//")&&("file"===s.defaultProtocol?(i=i.slice(2),h=!0):i=(s.defaultProtocol||"http")+":"+i),Object.defineProperty(l,"localFile",{value:!!h}),l.href=i,s.target&&(l.target=s.target+""),s.rel&&(l.rel=s.rel+""),"image"===s.context&&s.crossOrigin&&(l.crossOrigin=s.crossOrigin+""),l})).apply(this,arguments)}function vv(i){return i?s=>new Promise((o,l)=>{i.readFile(s,(c,h)=>{c?l(c):o(h)})}):aw}function aw(){return bv.apply(this,arguments)}function bv(){return(bv=Kt(function*(){(0,T.vU)("No file system access.")})).apply(this,arguments)}function lw(i){return i?function(){var s=Kt(function*(o,l){const c=(0,T.l7)({},this.options.http,l),h=l&&l.response,g=yield i(o,c);return g.ok?(0,T.mf)(g[h])?g[h]():g.text():(0,T.vU)(g.status+""+g.statusText)});return function(o,l){return s.apply(this,arguments)}}():$l}function $l(){return Lh.apply(this,arguments)}function Lh(){return(Lh=Kt(function*(){(0,T.vU)("No HTTP fetch method available.")})).apply(this,arguments)}const oF=i=>null!=i&&i==i,Cv=i=>!(Number.isNaN(+i)||i instanceof Date),cw={boolean:T.sw,integer:T.He,number:T.He,date:T.ZU,string:T.BB,unknown:T.yR},dw=[i=>"true"===i||"false"===i||!0===i||!1===i,i=>Cv(i)&&Number.isInteger(+i),Cv,i=>!Number.isNaN(Date.parse(i))],qS=["boolean","integer","number","date"];function yg(i,s){if(!i||!i.length)return"unknown";const o=i.length,l=dw.length,c=dw.map((h,g)=>g+1);for(let y,v,h=0,g=0;h<o;++h)for(v=s?i[h][s]:i[h],y=0;y<l;++y)if(c[y]&&oF(v)&&!dw[y](v)&&(c[y]=0,++g,g===dw.length))return"string";return qS[c.reduce((h,g)=>0===h?g:h,0)-1]}function fw(i,s){return s.reduce((o,l)=>(o[l]=yg(i,l),o),{})}function V0(i){const s=function(o,l){const c={delimiter:i};return _g(o,l?(0,T.l7)(l,c):c)};return s.responseType="text",s}function _g(i,s){return s.header&&(i=s.header.map(T.m8).join(s.delimiter)+"\n"+i),Ze(s.delimiter).parse(i+"")}function wv(i,s){const o=s&&s.property?(0,T.EP)(s.property):T.yR;return(0,T.Kn)(i)&&!function(i){return!("function"!=typeof Buffer||!(0,T.mf)(Buffer.isBuffer))&&Buffer.isBuffer(i)}(i)?function(i,s){return!(0,T.kJ)(i)&&(0,T.TW)(i)&&(i=[...i]),s&&s.copy?JSON.parse(JSON.stringify(i)):i}(o(i),s):o(JSON.parse(i))}_g.responseType="text",wv.responseType="json";const hw={interior:(i,s)=>i!==s,exterior:(i,s)=>i===s};function dd(i,s){let o,l,c,h;return i=wv(i,s),s&&s.feature?(o=We,c=s.feature):s&&s.mesh?(o=Gt,c=s.mesh,h=hw[s.filter]):(0,T.vU)("Missing TopoJSON feature or mesh parameter."),l=(l=i.objects[c])?o(i,l,h):(0,T.vU)("Invalid TopoJSON object: "+c),l&&l.features||[l]}dd.responseType="json";const Df={dsv:_g,csv:V0(","),tsv:V0("\t"),json:wv,topojson:dd};function xf(i,s){return arguments.length>1?(Df[i]=s,this):(0,T.nr)(Df,i)?Df[i]:null}function pw(i){const s=xf(i);return s&&s.responseType||"text"}function $0(i,s,o,l){const c=xf((s=s||{}).type||"json");return c||(0,T.vU)("Unknown data format type: "+s.type),i=c(i,s),s.parse&&function(i,s,o,l){if(!i.length)return;const c=cd();o=o||c.timeParse,l=l||c.utcParse;let g,y,v,C,E,x,h=i.columns||Object.keys(i[0]);"auto"===s&&(s=fw(i,h)),h=Object.keys(s);const S=h.map(k=>{const R=s[k];let N,P;if(R&&(R.startsWith("date:")||R.startsWith("utc:")))return N=R.split(/:(.+)?/,2),P=N[1],("'"===P[0]&&"'"===P[P.length-1]||'"'===P[0]&&'"'===P[P.length-1])&&(P=P.slice(1,-1)),("utc"===N[0]?l:o)(P);if(!cw[R])throw Error("Illegal format pattern: "+k+":"+R);return cw[R]});for(v=0,E=i.length,x=h.length;v<E;++v)for(g=i[v],C=0;C<x;++C)y=h[C],g[y]=S[C](g[y])}(i,s.parse,o,l),(0,T.nr)(i,"columns")&&delete i.columns,i}const Dv=(i="undefined"!=typeof fetch&&fetch,o=>({options:o||{},sanitize:B0,load:WS,fileAccess:!1,file:vv(null),http:lw(i)}));var i;function j0(i){const s=i||T.yR,o=[],l={};return o.add=c=>{const h=s(c);return l[h]||(l[h]=1,o.push(c)),o},o.remove=c=>{const h=s(c);if(l[h]){l[h]=0;const g=o.indexOf(c);g>=0&&o.splice(g,1)}return o},o}function go(i,s){return z0.apply(this,arguments)}function z0(){return(z0=Kt(function*(i,s){try{yield s(i)}catch(o){i.error(o)}})).apply(this,arguments)}const U0=Symbol("vega_id");let bg=1;function Vh(i){return!(!i||!bn(i))}function bn(i){return i[U0]}function fd(i,s){return i[U0]=s,i}function Ti(i){const s=i===Object(i)?i:{data:i};return bn(s)?s:fd(s,bg++)}function hd(i){return $h(i,Ti({}))}function $h(i,s){for(const o in i)s[o]=i[o];return s}function jh(i,s){return fd(s,bn(i))}function zh(i,s){return i?s?(o,l)=>i(o,l)||bn(s(o))-bn(s(l)):(o,l)=>i(o,l)||bn(o)-bn(l):null}function zr(i){return i&&i.constructor===sl}function sl(){const i=[],s=[],o=[],l=[],c=[];let h=null,g=!1;return{constructor:sl,insert(y){const v=(0,T.IX)(y),C=v.length;for(let E=0;E<C;++E)i.push(v[E]);return this},remove(y){const v=(0,T.mf)(y)?l:s,C=(0,T.IX)(y),E=C.length;for(let x=0;x<E;++x)v.push(C[x]);return this},modify(y,v,C){const E={field:v,value:(0,T.a9)(C)};return(0,T.mf)(y)?(E.filter=y,c.push(E)):(E.tuple=y,o.push(E)),this},encode(y,v){return(0,T.mf)(y)?c.push({filter:y,field:v}):o.push({tuple:y,field:v}),this},clean(y){return h=y,this},reflow(){return g=!0,this},pulse(y,v){const C={},E={};let x,S,k,R,N,P;for(x=0,S=v.length;x<S;++x)C[bn(v[x])]=1;for(x=0,S=s.length;x<S;++x)N=s[x],C[bn(N)]=-1;for(x=0,S=l.length;x<S;++x)R=l[x],v.forEach(H=>{R(H)&&(C[bn(H)]=-1)});for(x=0,S=i.length;x<S;++x)N=i[x],P=bn(N),C[P]?C[P]=1:y.add.push(Ti(i[x]));for(x=0,S=v.length;x<S;++x)N=v[x],C[bn(N)]<0&&y.rem.push(N);function z(H,X,J){J?H[X]=J(H):y.encode=X,g||(E[bn(H)]=H)}for(x=0,S=o.length;x<S;++x)k=o[x],N=k.tuple,R=k.field,P=C[bn(N)],P>0&&(z(N,R,k.value),y.modifies(R));for(x=0,S=c.length;x<S;++x)k=c[x],R=k.filter,v.forEach(H=>{R(H)&&C[bn(H)]>0&&z(H,k.field,k.value)}),y.modifies(k.field);if(g)y.mod=s.length||l.length?v.filter(H=>C[bn(H)]>0):v.slice();else for(P in E)y.mod.push(E[P]);return(h||null==h&&(s.length||l.length))&&y.clean(!0),y}}}const xv="_:mod:_";function H0(){Object.defineProperty(this,xv,{writable:!0,value:{}})}H0.prototype={set(i,s,o,l){const c=this,h=c[i],g=c[xv];return null!=s&&s>=0?(h[s]!==o||l)&&(h[s]=o,g[s+":"+i]=-1,g[i]=-1):(h!==o||l)&&(c[i]=o,g[i]=(0,T.kJ)(o)?1+o.length:-1),c},modified(i,s){const o=this[xv];if(!arguments.length){for(const l in o)if(o[l])return!0;return!1}if((0,T.kJ)(i)){for(let l=0;l<i.length;++l)if(o[i[l]])return!0;return!1}return null!=s&&s>=0?s+1<o[i]||!!o[s+":"+i]:!!o[i]},clear(){return this[xv]={},this}};let gw=0;const Cr=new H0;function ji(i,s,o,l){this.id=++gw,this.value=i,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,s&&(this._update=s),o&&this.parameters(o,l)}function Hh(i){return function(s){const o=this.flags;return 0===arguments.length?!!(o&i):(this.flags=s?o|i:o&~i,this)}}ji.prototype={targets(){return this._targets||(this._targets=j0(T.id))},set(i){return this.value!==i?(this.value=i,1):0},skip:Hh(1),modified:Hh(2),parameters(i,s,o){s=!1!==s;const l=this._argval=this._argval||new H0,c=this._argops=this._argops||[],h=[];let g,y,v,C;const E=(x,S,k)=>{k instanceof ji?(k!==this&&(s&&k.targets().add(this),h.push(k)),c.push({op:k,name:x,index:S})):l.set(x,S,k)};for(g in i)if(y=i[g],"pulse"===g)(0,T.IX)(y).forEach(x=>{x instanceof ji?x!==this&&(x.targets().add(this),h.push(x)):(0,T.vU)("Pulse parameters must be operator instances.")}),this.source=y;else if((0,T.kJ)(y))for(l.set(g,-1,Array(v=y.length)),C=0;C<v;++C)E(g,C,y[C]);else E(g,-1,y);return this.marshall().clear(),o&&(c.initonly=!0),h},marshall(i){const s=this._argval||Cr,o=this._argops;let l,c,h,g;if(o){const y=o.length;for(c=0;c<y;++c)l=o[c],h=l.op,g=h.modified()&&h.stamp===i,s.set(l.name,l.index,h.value,g);if(o.initonly){for(c=0;c<y;++c)l=o[c],l.op.targets().remove(this);this._argops=null,this._update=null}}return s},detach(){const i=this._argops;let s,o,l,c;if(i)for(s=0,o=i.length;s<o;++s)l=i[s],c=l.op,c._targets&&c._targets.remove(this);this.pulse=null,this.source=null},evaluate(i){const s=this._update;if(s){const o=this.marshall(i.stamp),l=s.call(this,o,i);if(o.clear(),l!==this.value)this.value=l;else if(!this.modified())return i.StopPropagation}},run(i){if(i.stamp<this.stamp)return i.StopPropagation;let s;return this.skip()?(this.skip(!1),s=0):s=this.evaluate(i),this.pulse=s||i}};let yw=0;function lc(i,s,o){this.id=++yw,this.value=null,o&&(this.receive=o),i&&(this._filter=i),s&&(this._apply=s)}function Wh(i,s,o){return new lc(i,s,o)}function Ft(){return(Ft=Kt(function*(i,s){const o=this;let c,l=0;try{c=yield o.loader().load(i,{context:"dataflow",response:pw(s&&s.type)});try{c=o.parse(c,s)}catch(h){l=-2,o.warn("Data ingestion failed",i,h)}}catch(h){l=-1,o.warn("Loading failed",i,h)}return{data:c,status:l}})).apply(this,arguments)}function q0(){return(q0=Kt(function*(i,s,o){const l=this,c=l._pending||fL(l);c.requests+=1;const h=yield l.request(s,o);return l.pulse(i,l.changeset().remove(T.yb).insert(h.data||[])),c.done(),h})).apply(this,arguments)}function fL(i){let s;const o=new Promise(l=>s=l);return o.requests=0,o.done=()=>{0==--o.requests&&(i._pending=null,s(i))},i._pending=o}lc.prototype={_filter:T.yb,_apply:T.yR,targets(){return this._targets||(this._targets=j0(T.id))},consume(i){return arguments.length?(this._consume=!!i,this):!!this._consume},receive(i){if(this._filter(i)){const s=this.value=this._apply(i),o=this._targets,l=o?o.length:0;for(let c=0;c<l;++c)o[c].receive(s);this._consume&&(i.preventDefault(),i.stopPropagation())}},filter(i){const s=Wh(i);return this.targets().add(s),s},apply(i){const s=Wh(null,i);return this.targets().add(s),s},merge(){const i=Wh();this.targets().add(i);for(let s=0,o=arguments.length;s<o;++s)arguments[s].targets().add(i);return i},throttle(i){let s=-1;return this.filter(()=>{const o=Date.now();return o-s>i?(s=o,1):0})},debounce(i){const s=Wh();return this.targets().add(Wh(null,null,(0,T.Ds)(i,o=>{const l=o.dataflow;s.receive(o),l&&l.run&&l.run()}))),s},between(i,s){let o=!1;return i.targets().add(Wh(null,null,()=>o=!0)),s.targets().add(Wh(null,null,()=>o=!1)),this.filter(()=>o)},detach(){this._filter=T.yb,this._targets=null}};const hL={skip:!0};function V$(i,s,o,l,c,h){const g=(0,T.l7)({},h,hL);let y,v;(0,T.mf)(o)||(o=(0,T.a9)(o)),void 0===l?y=C=>i.touch(o(C)):(0,T.mf)(l)?(v=new ji(null,l,c,!1),y=C=>{v.evaluate(C);const E=o(C),x=v.value;zr(x)?i.pulse(E,x,h):i.update(E,x,g)}):y=C=>i.update(o(C),l,g),s.apply(y)}function j$(i,s,o,l,c,h){if(void 0===l)s.targets().add(o);else{const g=h||{},y=new ji(null,function(i,s){return s=(0,T.mf)(s)?s:(0,T.a9)(s),i?function(o,l){const c=s(o,l);return i.skip()||(i.skip(c!==this.value).value=c),c}:s}(o,l),c,!1);y.modified(g.force),y.rank=s.rank,s.targets().add(y),o&&(y.skip(!0),y.value=o.value,y.targets().add(o),i.connect(o,[y]))}}const YS={};function Da(i,s,o){this.dataflow=i,this.stamp=null==s?-1:s,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=o||null}function al(i,s){const o=[];return(0,T.FP)(i,s,l=>o.push(l)),o}function wg(i,s){const o={};return i.visit(s,l=>{o[bn(l)]=1}),l=>o[bn(l)]?null:l}function Sv(i,s){return i?(o,l)=>i(o,l)&&s(o,l):s}function Eg(i,s,o,l){const c=this,h=o.length;let g=0;this.dataflow=i,this.stamp=s,this.fields=null,this.encode=l||null,this.pulses=o;for(let y=0;y<h;++y){const v=o[y];if(v.stamp===s){if(v.fields){const C=c.fields||(c.fields={});for(const E in v.fields)C[E]=1}v.changed(c.ADD)&&(g|=c.ADD),v.changed(c.REM)&&(g|=c.REM),v.changed(c.MOD)&&(g|=c.MOD)}}this.changes=g}function Av(){return(Av=Kt(function*(i,s,o){const l=this,c=[];if(l._pulse)return Af(l);if(l._pending&&(yield l._pending),s&&(yield go(l,s)),!l._touched.length)return l.debug("Dataflow invoked, but nothing to do."),l;const h=++l._clock;l._pulse=new Da(l,h,i),l._touched.forEach(E=>l._enqueue(E,!0)),l._touched=j0(T.id);let y,v,C,g=0;try{for(;l._heap.size()>0;)y=l._heap.pop(),y.rank===y.qrank?(v=y.run(l._getPulse(y,i)),v.then?v=yield v:v.async&&(c.push(v.async),v=YS),v!==YS&&y._targets&&y._targets.forEach(E=>l._enqueue(E)),++g):l._enqueue(y,!0)}catch(E){l._heap.clear(),C=E}if(l._input={},l._pulse=null,l.debug(`Pulse ${h}: ${g} operators`),C&&(l._postrun=[],l.error(C)),l._postrun.length){const E=l._postrun.sort((x,S)=>S.priority-x.priority);l._postrun=[];for(let x=0;x<E.length;++x)yield go(l,E[x].callback)}return o&&(yield go(l,o)),c.length&&Promise.all(c).then(E=>l.runAsync(null,()=>{E.forEach(x=>{try{x(l)}catch(S){l.error(S)}})})),l})).apply(this,arguments)}function yo(){return(yo=Kt(function*(i,s,o){for(;this._running;)yield this._running;const l=()=>this._running=null;return(this._running=this.evaluate(i,s,o)).then(l,l),this._running})).apply(this,arguments)}function Af(i){return i.error("Dataflow already running. Use runAsync() to chain invocations."),i}Da.prototype={StopPropagation:YS,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork(i){return new Da(this.dataflow).init(this,i)},clone(){const i=this.fork(7);return i.add=i.add.slice(),i.rem=i.rem.slice(),i.mod=i.mod.slice(),i.source&&(i.source=i.source.slice()),i.materialize(23)},addAll(){let i=this;return!i.source||i.add===i.rem||!i.rem.length&&i.source.length===i.add.length||(i=new Da(this.dataflow).init(this),i.add=i.source,i.rem=[]),i},init(i,s){const o=this;return o.stamp=i.stamp,o.encode=i.encode,i.fields&&!(64&s)&&(o.fields=i.fields),1&s?(o.addF=i.addF,o.add=i.add):(o.addF=null,o.add=[]),2&s?(o.remF=i.remF,o.rem=i.rem):(o.remF=null,o.rem=[]),4&s?(o.modF=i.modF,o.mod=i.mod):(o.modF=null,o.mod=[]),32&s?(o.srcF=null,o.source=null):(o.srcF=i.srcF,o.source=i.source,i.cleans&&(o.cleans=i.cleans)),o},runAfter(i){this.dataflow.runAfter(i)},changed(i){const s=i||7;return 1&s&&this.add.length||2&s&&this.rem.length||4&s&&this.mod.length},reflow(i){if(i)return this.fork(7).reflow();const s=this.add.length,o=this.source&&this.source.length;return o&&o!==s&&(this.mod=this.source,s&&this.filter(4,wg(this,1))),this},clean(i){return arguments.length?(this.cleans=!!i,this):this.cleans},modifies(i){const s=this.fields||(this.fields={});return(0,T.kJ)(i)?i.forEach(o=>s[o]=!0):s[i]=!0,this},modified(i,s){const o=this.fields;return!(!s&&!this.mod.length||!o)&&(arguments.length?(0,T.kJ)(i)?i.some(l=>o[l]):o[i]:!!o)},filter(i,s){const o=this;return 1&i&&(o.addF=Sv(o.addF,s)),2&i&&(o.remF=Sv(o.remF,s)),4&i&&(o.modF=Sv(o.modF,s)),16&i&&(o.srcF=Sv(o.srcF,s)),o},materialize(i){const s=this;return 1&(i=i||7)&&s.addF&&(s.add=al(s.add,s.addF),s.addF=null),2&i&&s.remF&&(s.rem=al(s.rem,s.remF),s.remF=null),4&i&&s.modF&&(s.mod=al(s.mod,s.modF),s.modF=null),16&i&&s.srcF&&(s.source=s.source.filter(s.srcF),s.srcF=null),s},visit(i,s){const o=this,l=s;if(16&i)return(0,T.FP)(o.source,o.srcF,l),o;1&i&&(0,T.FP)(o.add,o.addF,l),2&i&&(0,T.FP)(o.rem,o.remF,l),4&i&&(0,T.FP)(o.mod,o.modF,l);const c=o.source;if(8&i&&c){const h=o.add.length+o.mod.length;h===c.length||(0,T.FP)(c,h?wg(o,5):o.srcF,l)}return o}},(0,T.XW)(Eg,Da,{fork(i){const s=new Da(this.dataflow).init(this,i&this.NO_FIELDS);return void 0!==i&&(i&s.ADD&&this.visit(s.ADD,o=>s.add.push(o)),i&s.REM&&this.visit(s.REM,o=>s.rem.push(o)),i&s.MOD&&this.visit(s.MOD,o=>s.mod.push(o))),s},changed(i){return this.changes&i},modified(i){const s=this,o=s.fields;return o&&s.changes&s.MOD?(0,T.kJ)(i)?i.some(l=>o[l]):o[i]:0},filter(){(0,T.vU)("MultiPulse does not support filtering.")},materialize(){(0,T.vU)("MultiPulse does not support materialization.")},visit(i,s){const o=this,l=o.pulses,c=l.length;let h=0;if(i&o.SOURCE)for(;h<c;++h)l[h].visit(i,s);else for(;h<c;++h)l[h].stamp===o.stamp&&l[h].visit(i,s);return o}});const vw={skip:!1,force:!1};function Q0(i,s,o,l){let c,h;const g=i[o];for(;o>s&&(h=o-1>>1,c=i[h],l(g,c)<0);)i[o]=c,o=h;return i[o]=g}function gd(){this.logger((0,T.kg)()),this.logLevel(T.jj),this._clock=0,this._rank=0,this._locale=Xs();try{this._loader=Dv()}catch(i){}this._touched=j0(T.id),this._input={},this._pulse=null,this._heap=function(i){let s=[];return{clear:()=>s=[],size:()=>s.length,peek:()=>s[0],push:o=>(s.push(o),Q0(s,0,s.length-1,i)),pop:()=>{const o=s.pop();let l;return s.length?(l=s[0],s[0]=o,function(i,s,o){const l=s,c=i.length,h=i[s];let y,g=1+(s<<1);for(;g<c;)y=g+1,y<c&&o(i[g],i[y])>=0&&(g=y),i[s]=i[g],g=1+((s=g)<<1);i[s]=h,Q0(i,l,s,o)}(s,0,i)):l=o,l}}}((i,s)=>i.qrank-s.qrank),this._postrun=[]}function Mf(i){return function(){return this._log[i].apply(this,arguments)}}function Ke(i,s){ji.call(this,i,null,s)}gd.prototype={stamp(){return this._clock},loader(i){return arguments.length?(this._loader=i,this):this._loader},locale(i){return arguments.length?(this._locale=i,this):this._locale},logger(i){return arguments.length?(this._log=i,this):this._log},error:Mf("error"),warn:Mf("warn"),info:Mf("info"),debug:Mf("debug"),logLevel:Mf("level"),cleanThreshold:1e4,add:function(i,s,o,l){let h,c=1;return i instanceof ji?h=i:i&&i.prototype instanceof ji?h=new i:(0,T.mf)(i)?h=new ji(null,i):(c=0,h=new ji(i,s)),this.rank(h),c&&(l=o,o=s),o&&this.connect(h,h.parameters(o,l)),this.touch(h),h},connect:function(i,s){const o=i.rank,l=s.length;for(let c=0;c<l;++c)if(o<s[c].rank)return void this.rerank(i)},rank:function(i){i.rank=++this._rank},rerank:function(i){const s=[i];let o,l,c;for(;s.length;)if(this.rank(o=s.pop()),l=o._targets)for(c=l.length;--c>=0;)s.push(o=l[c]),o===i&&(0,T.vU)("Cycle detected in dataflow graph.")},pulse:function(i,s,o){this.touch(i,o||vw);const l=new Da(this,this._clock+(this._pulse?0:1)),c=i.pulse&&i.pulse.source||[];return l.target=i,this._input[i.id]=s.pulse(l,c),this},touch:function(i,s){const o=s||vw;return this._pulse?this._enqueue(i):this._touched.add(i),o.skip&&i.skip(!0),this},update:function(i,s,o){const l=o||vw;return(i.set(s)||l.force)&&this.touch(i,l),this},changeset:sl,ingest:function(i,s,o){return s=this.parse(s,o),this.pulse(i,this.changeset().insert(s))},parse:function(i,s){const o=this.locale();return $0(i,s,o.timeParse,o.utcParse)},preload:function(i,s,o){return q0.apply(this,arguments)},request:function(i,s){return Ft.apply(this,arguments)},events:function(i,s,o,l){const c=this,h=Wh(o,l),g=function(C){C.dataflow=c;try{h.receive(C)}catch(E){c.error(E)}finally{c.run()}};let y;y="string"==typeof i&&"undefined"!=typeof document?document.querySelectorAll(i):(0,T.IX)(i);const v=y.length;for(let C=0;C<v;++C)y[C].addEventListener(s,g);return h},on:function(i,s,o,l,c){return(i instanceof ji?j$:V$)(this,i,s,o,l,c),this},evaluate:function(i,s,o){return Av.apply(this,arguments)},run:function(i,s,o){return this._pulse?Af(this):(this.evaluate(i,s,o),this)},runAsync:function(i,s,o){return yo.apply(this,arguments)},runAfter:function(i,s,o){if(this._pulse||s)this._postrun.push({priority:o||0,callback:i});else try{i(this)}catch(l){this.error(l)}},_enqueue:function(i,s){const o=i.stamp<this._clock;o&&(i.stamp=this._clock),(o||s)&&(i.qrank=i.rank,this._heap.push(i))},_getPulse:function(i,s){const o=i.source,l=this._clock;return o&&(0,T.kJ)(o)?new Eg(this,l,o.map(c=>c.pulse),s):this._input[i.id]||function(i,s){return s&&s.stamp===i.stamp?s:(i=i.fork(),s&&s!==YS&&(i.source=s.source),i)}(this._pulse,o&&o.pulse)}},(0,T.XW)(Ke,ji,{run(i){if(i.stamp<this.stamp)return i.StopPropagation;let s;return this.skip()?this.skip(!1):s=this.evaluate(i),s=s||i,s.then?s=s.then(o=>this.pulse=o):s!==i.StopPropagation&&(this.pulse=s),s},evaluate(i){const s=this.marshall(i.stamp),o=this.transform(s,i);return s.clear(),o},transform(){}});const Dg={};function bw(i){const s=QS(i);return s&&s.Definition||null}function QS(i){return i=i&&i.toLowerCase(),(0,T.nr)(Dg,i)?Dg[i]:null}function md(i,s){let o;if(void 0===s)for(const l of i)null!=l&&(o<l||void 0===o&&l>=l)&&(o=l);else{let l=-1;for(let c of i)null!=(c=s(c,++l,i))&&(o<c||void 0===o&&c>=c)&&(o=c)}return o}function JS(i,s){let o;if(void 0===s)for(const l of i)null!=l&&(o>l||void 0===o&&l>=l)&&(o=l);else{let l=-1;for(let c of i)null!=(c=s(c,++l,i))&&(o>c||void 0===o&&c>=c)&&(o=c)}return o}function Tv(i,s,o=0,l=i.length-1,c=sv){for(;l>o;){if(l-o>600){const v=l-o+1,C=s-o+1,E=Math.log(v),x=.5*Math.exp(2*E/3),S=.5*Math.sqrt(E*x*(v-x)/v)*(C-v/2<0?-1:1);Tv(i,s,Math.max(o,Math.floor(s-C*x/v+S)),Math.min(l,Math.floor(s+(v-C)*x/v+S)),c)}const h=i[s];let g=o,y=l;for(Cu(i,o,s),c(i[l],h)>0&&Cu(i,o,l);g<y;){for(Cu(i,g,y),++g,--y;c(i[g],h)<0;)++g;for(;c(i[y],h)>0;)--y}0===c(i[o],h)?Cu(i,o,y):(++y,Cu(i,y,l)),y<=s&&(o=y+1),s<=y&&(l=y-1)}return i}function Cu(i,s,o){const l=i[s];i[s]=i[o],i[o]=l}function Of(i){return null===i?NaN:+i}function se(i,s,o){if(i=Float64Array.from(function*(i,s){if(void 0===s)for(let o of i)null!=o&&(o=+o)>=o&&(yield o);else{let o=-1;for(let l of i)null!=(l=s(l,++o,i))&&(l=+l)>=l&&(yield l)}}(i,o)),l=i.length){if((s=+s)<=0||l<2)return JS(i);if(s>=1)return md(i);var l,c=(l-1)*s,h=Math.floor(c),g=md(Tv(i,h).subarray(0,h+1));return g+(JS(i.subarray(h+1))-g)*(c-h)}}function Cw(i,s,o=Of){if(l=i.length){if((s=+s)<=0||l<2)return+o(i[0],0,i);if(s>=1)return+o(i[l-1],l-1,i);var l,c=(l-1)*s,h=Math.floor(c),g=+o(i[h],h,i);return g+(+o(i[h+1],h+1,i)-g)*(c-h)}}function Xh(i,s){return se(i,.5,s)}function*xg(i,s){if(null==s)for(let o of i)null!=o&&""!==o&&(o=+o)>=o&&(yield o);else{let o=-1;for(let l of i)l=s(l,++o,i),null!=l&&""!==l&&(l=+l)>=l&&(yield l)}}function fc(i,s,o){const l=Float64Array.from(xg(i,o));return l.sort(sv),s.map(c=>Cw(l,c))}function J0(i,s){return fc(i,[.25,.5,.75],s)}function ZS(i,s){const o=i.length,l=function(i,s){const o=function(i,s){let l,o=0,c=0,h=0;if(void 0===s)for(let g of i)null!=g&&(g=+g)>=g&&(l=g-c,c+=l/++o,h+=l*(g-c));else{let g=-1;for(let y of i)null!=(y=s(y,++g,i))&&(y=+y)>=y&&(l=y-c,c+=l/++o,h+=l*(y-c))}if(o>1)return h/(o-1)}(i,s);return o&&Math.sqrt(o)}(i,s),c=J0(i,s);return 1.06*(Math.min(l,(c[2]-c[0])/1.34)||l||Math.abs(c[0])||1)*Math.pow(o,-.2)}function _d(i){const s=i.maxbins||20,o=i.base||10,l=Math.log(o),c=i.divide||[5,2];let y,v,C,E,x,S,h=i.extent[0],g=i.extent[1];const k=i.span||g-h||Math.abs(h)||1;if(i.step)y=i.step;else if(i.steps){for(E=k/s,x=0,S=i.steps.length;x<S&&i.steps[x]<E;++x);y=i.steps[Math.max(0,x-1)]}else{for(v=Math.ceil(Math.log(s)/l),C=i.minstep||0,y=Math.max(C,Math.pow(o,Math.round(Math.log(k)/l)-v));Math.ceil(k/y)>s;)y*=o;for(x=0,S=c.length;x<S;++x)E=y/c[x],E>=C&&k/E<=s&&(y=E)}E=Math.log(y);const N=Math.pow(o,-(E>=0?0:1+~~(-E/l))-1);return(i.nice||void 0===i.nice)&&(E=Math.floor(h/y+N)*y,h=h<E?E-y:E,g=Math.ceil(g/y)*y),{start:h,stop:g===h?h+y:g,step:y}}var lr=Math.random;function Sg(i){lr=i}function wu(i,s,o,l){if(!i.length)return[void 0,void 0];const c=Float64Array.from(xg(i,l)),h=c.length,g=s;let y,v,C,E;for(C=0,E=Array(g);C<g;++C){for(y=0,v=0;v<h;++v)y+=c[~~(lr()*h)];E[C]=y/h}return E.sort(sv),[se(E,o/2),se(E,1-o/2)]}function ww(i,s,o,l){l=l||(S=>S);const c=i.length,h=new Float64Array(c);let x,g=0,y=1,v=l(i[0]),C=v,E=v+s;for(;y<c;++y){if(x=l(i[y]),x>=E){for(C=(v+C)/2;g<y;++g)h[g]=C;E=x+s,v=x}C=x}for(C=(v+C)/2;g<y;++g)h[g]=C;return o?function(i,s){const o=i.length;let h,g,l=0,c=1;for(;i[l]===i[c];)++c;for(;c<o;){for(h=c+1;i[c]===i[h];)++h;if(i[c]-i[c-1]<s){for(g=c+(l+h-c-c>>1);g<c;)i[g++]=i[c];for(;g>c;)i[g--]=i[l]}l=c,c=h}return i}(h,s+s/4):h}function Dw(i){return function(){return(i=(1103515245*i+12345)%2147483647)/2147483647}}function Z0(i,s){let o,l,c;null==s&&(s=i,i=0);const h={min(g){return arguments.length?(o=g||0,c=l-o,h):o},max(g){return arguments.length?(l=g||0,c=l-o,h):l},sample:()=>o+Math.floor(c*lr()),pdf:g=>g===Math.floor(g)&&g>=o&&g<l?1/c:0,cdf(g){const y=Math.floor(g);return y<o?0:y>=l?1:(y-o+1)/c},icdf:g=>g>=0&&g<=1?o-1+Math.floor(g*c):NaN};return h.min(i).max(s)}const kv=Math.sqrt(2*Math.PI),Fv=Math.SQRT2;let ey=NaN;function jl(i,s){i=i||0,s=null==s?1:s;let c,h,o=0,l=0;if(ey==ey)o=ey,ey=NaN;else{do{o=2*lr()-1,l=2*lr()-1,c=o*o+l*l}while(0===c||c>1);h=Math.sqrt(-2*Math.log(c)/c),o*=h,ey=l*h}return i+o*s}function Kh(i,s,o){const l=(i-(s||0))/(o=null==o?1:o);return Math.exp(-.5*l*l)/(o*kv)}function ty(i,s,o){const l=(i-(s=s||0))/(o=null==o?1:o),c=Math.abs(l);let h;if(c>37)h=0;else{const g=Math.exp(-c*c/2);let y;c<7.07106781186547?(y=.0352624965998911*c+.700383064443688,y=y*c+6.37396220353165,y=y*c+33.912866078383,y=y*c+112.079291497871,y=y*c+221.213596169931,y=y*c+220.206867912376,h=g*y,y=.0883883476483184*c+1.75566716318264,y=y*c+16.064177579207,y=y*c+86.7807322029461,y=y*c+296.564248779674,y=y*c+637.333633378831,y=y*c+793.826512519948,y=y*c+440.413735824752,h/=y):(y=c+.65,y=c+4/y,y=c+3/y,y=c+2/y,y=c+1/y,h=g/y/2.506628274631)}return l>0?1-h:h}function Iv(i,s,o){return i<0||i>1?NaN:(s||0)+(null==o?1:o)*Fv*function(i){let o,s=-Math.log((1-i)*(1+i));return s<6.25?(s-=3.125,o=-364441206401782e-35,o=o*s-16850591381820166e-35,o=128584807152564e-32+o*s,o=11157877678025181e-33+o*s,o=o*s-1333171662854621e-31,o=20972767875968562e-33+o*s,o=6637638134358324e-30+o*s,o=o*s-4054566272975207e-29,o=o*s-8151934197605472e-29,o=26335093153082323e-28+o*s,o=o*s-12975133253453532e-27,o=o*s-5415412054294628e-26,o=1.0512122733215323e-9+o*s,o=o*s-4.112633980346984e-9,o=o*s-2.9070369957882005e-8,o=4.2347877827932404e-7+o*s,o=o*s-13654692000834679e-22,o=o*s-13882523362786469e-21,o=.00018673420803405714+o*s,o=o*s-.000740702534166267,o=o*s-.006033670871430149,o=.24015818242558962+o*s,o=1.6536545626831027+o*s):s<16?(s=Math.sqrt(s)-3.25,o=2.2137376921775787e-9,o=9.075656193888539e-8+o*s,o=o*s-2.7517406297064545e-7,o=1.8239629214389228e-8+o*s,o=15027403968909828e-22+o*s,o=o*s-4013867526981546e-21,o=29234449089955446e-22+o*s,o=12475304481671779e-21+o*s,o=o*s-47318229009055734e-21,o=6828485145957318e-20+o*s,o=24031110387097894e-21+o*s,o=o*s-.0003550375203628475,o=.0009532893797373805+o*s,o=o*s-.0016882755560235047,o=.002491442096107851+o*s,o=o*s-.003751208507569241,o=.005370914553590064+o*s,o=1.0052589676941592+o*s,o=3.0838856104922208+o*s):Number.isFinite(s)?(s=Math.sqrt(s)-5,o=-27109920616438573e-27,o=o*s-2.555641816996525e-10,o=1.5076572693500548e-9+o*s,o=o*s-3.789465440126737e-9,o=7.61570120807834e-9+o*s,o=o*s-1.496002662714924e-8,o=2.914795345090108e-8+o*s,o=o*s-6.771199775845234e-8,o=2.2900482228026655e-7+o*s,o=o*s-9.9298272942317e-7,o=4526062597223154e-21+o*s,o=o*s-1968177810553167e-20,o=7599527703001776e-20+o*s,o=o*s-.00021503011930044477,o=o*s-.00013871931833623122,o=1.0103004648645344+o*s,o=4.849906401408584+o*s):o=1/0,o*i}(2*i-1)}function Rv(i,s){let o,l;const c={mean(h){return arguments.length?(o=h||0,c):o},stdev(h){return arguments.length?(l=null==h?1:h,c):l},sample:()=>jl(o,l),pdf:h=>Kh(h,o,l),cdf:h=>ty(h,o,l),icdf:h=>Iv(h,o,l)};return c.mean(i).stdev(s)}function Ag(i,s){const o=Rv();let l=0;const c={data(h){return arguments.length?(i=h,l=h?h.length:0,c.bandwidth(s)):i},bandwidth(h){return arguments.length?(!(s=h)&&i&&(s=ZS(i)),c):s},sample:()=>i[~~(lr()*l)]+s*o.sample(),pdf(h){let g=0,y=0;for(;y<l;++y)g+=o.pdf((h-i[y])/s);return g/s/l},cdf(h){let g=0,y=0;for(;y<l;++y)g+=o.cdf((h-i[y])/s);return g/l},icdf(){throw Error("KDE icdf not supported.")}};return c.data(i)}function ny(i,s){return i=i||0,s=null==s?1:s,Math.exp(i+jl()*s)}function Mg(i,s,o){if(i<=0)return 0;s=s||0,o=null==o?1:o;const l=(Math.log(i)-s)/o;return Math.exp(-.5*l*l)/(o*kv*i)}function xw(i,s,o){return ty(Math.log(i),s,o)}function Og(i,s,o){return Math.exp(Iv(i,s,o))}function iy(i,s){let o,l;const c={mean(h){return arguments.length?(o=h||0,c):o},stdev(h){return arguments.length?(l=null==h?1:h,c):l},sample:()=>ny(o,l),pdf:h=>Mg(h,o,l),cdf:h=>xw(h,o,l),icdf:h=>Og(h,o,l)};return c.mean(i).stdev(s)}function vd(i,s){let l,o=0;const h={weights(g){return arguments.length?(l=function(g){const y=[];let C,v=0;for(C=0;C<o;++C)v+=y[C]=null==g[C]?1:+g[C];for(C=0;C<o;++C)y[C]/=v;return y}(s=g||[]),h):s},distributions(g){return arguments.length?(g?(o=g.length,i=g):(o=0,i=[]),h.weights(s)):i},sample(){const g=lr();let y=i[o-1],v=l[0],C=0;for(;C<o-1;v+=l[++C])if(g<v){y=i[C];break}return y.sample()},pdf(g){let y=0,v=0;for(;v<o;++v)y+=l[v]*i[v].pdf(g);return y},cdf(g){let y=0,v=0;for(;v<o;++v)y+=l[v]*i[v].cdf(g);return y},icdf(){throw Error("Mixture icdf not supported.")}};return h.distributions(i).weights(s)}function Nv(i,s){return null==s&&(s=null==i?1:i,i=0),i+(s-i)*lr()}function Pv(i,s,o){return null==o&&(o=null==s?1:s,s=0),i>=s&&i<=o?1/(o-s):0}function Sw(i,s,o){return null==o&&(o=null==s?1:s,s=0),i<s?0:i>o?1:(i-s)/(o-s)}function bd(i,s,o){return null==o&&(o=null==s?1:s,s=0),i>=0&&i<=1?s+i*(o-s):NaN}function Qh(i,s){let o,l;const c={min(h){return arguments.length?(o=h||0,c):o},max(h){return arguments.length?(l=null==h?1:h,c):l},sample:()=>Nv(o,l),pdf:h=>Pv(h,o,l),cdf:h=>Sw(h,o,l),icdf:h=>bd(h,o,l)};return null==s&&(s=null==i?1:i,i=0),c.min(i).max(s)}function Cd(i,s,o,l){const c=l-i*i,h=Math.abs(c)<1e-24?0:(o-i*s)/c;return[s-h*i,h]}function ry(i,s,o,l){i=i.filter(k=>{let R=s(k),N=o(k);return null!=R&&(R=+R)>=R&&null!=N&&(N=+N)>=N}),l&&i.sort((k,R)=>s(k)-s(R));const c=i.length,h=new Float64Array(c),g=new Float64Array(c);let E,x,S,y=0,v=0,C=0;for(S of i)h[y]=E=+s(S),g[y]=x=+o(S),++y,v+=(E-v)/y,C+=(x-C)/y;for(y=0;y<c;++y)h[y]-=v,g[y]-=C;return[h,g,v,C]}function Bt(i,s,o,l){let h,g,c=-1;for(const y of i)h=s(y),g=o(y),null!=h&&(h=+h)>=h&&null!=g&&(g=+g)>=g&&l(h,g,++c)}function xa(i,s,o,l,c){let h=0,g=0;return Bt(i,s,o,(y,v)=>{const C=v-c(y),E=v-l;h+=C*C,g+=E*E}),1-h/g}function hc(i,s,o){let l=0,c=0,h=0,g=0,y=0;Bt(i,s,o,(E,x)=>{++y,l+=(E-l)/y,c+=(x-c)/y,h+=(E*x-h)/y,g+=(E*E-g)/y});const v=Cd(l,c,h,g),C=E=>v[0]+v[1]*E;return{coef:v,predict:C,rSquared:xa(i,s,o,c,C)}}function Du(i,s,o){let l=0,c=0,h=0,g=0,y=0;Bt(i,s,o,(E,x)=>{++y,E=Math.log(E),l+=(E-l)/y,c+=(x-c)/y,h+=(E*x-h)/y,g+=(E*E-g)/y});const v=Cd(l,c,h,g),C=E=>v[0]+v[1]*Math.log(E);return{coef:v,predict:C,rSquared:xa(i,s,o,c,C)}}function Lv(i,s,o){const[l,c,h,g]=ry(i,s,o);let S,k,R,y=0,v=0,C=0,E=0,x=0;Bt(i,s,o,(H,X)=>{S=l[x++],k=Math.log(X),R=S*X,y+=(X*k-y)/x,v+=(R-v)/x,C+=(R*k-C)/x,E+=(S*R-E)/x});const[N,P]=Cd(v/g,y/g,C/g,E/g),z=H=>Math.exp(N+P*(H-h));return{coef:[Math.exp(N-P*h),P],predict:z,rSquared:xa(i,s,o,g,z)}}function si(i,s,o){let l=0,c=0,h=0,g=0,y=0,v=0;Bt(i,s,o,(x,S)=>{const k=Math.log(x),R=Math.log(S);++v,l+=(k-l)/v,c+=(R-c)/v,h+=(k*R-h)/v,g+=(k*k-g)/v,y+=(S-y)/v});const C=Cd(l,c,h,g),E=x=>C[0]*Math.pow(x,C[1]);return C[0]=Math.exp(C[0]),{coef:C,predict:E,rSquared:xa(i,s,o,y,E)}}function Sa(i,s,o){const[l,c,h,g]=ry(i,s,o),y=l.length;let k,R,N,P,v=0,C=0,E=0,x=0,S=0;for(k=0;k<y;)R=l[k],N=c[k++],P=R*R,v+=(P-v)/k,C+=(P*R-C)/k,E+=(P*P-E)/k,x+=(R*N-x)/k,S+=(P*N-S)/k;const z=E-v*v,H=v*z-C*C,X=(S*v-x*C)/H,J=(x*z-S*C)/H,oe=-X*v,fe=te=>X*(te-=h)*te+J*te+oe+g;return{coef:[oe-J*h+X*h*h+g,J-2*X*h,X],predict:fe,rSquared:xa(i,s,o,g,fe)}}function Pr(i,s,o,l){if(1===l)return hc(i,s,o);if(2===l)return Sa(i,s,o);const[c,h,g,y]=ry(i,s,o),v=c.length,C=[],E=[],x=l+1;let S,k,R,N,P;for(S=0;S<x;++S){for(R=0,N=0;R<v;++R)N+=Math.pow(c[R],S)*h[R];for(C.push(N),P=new Float64Array(x),k=0;k<x;++k){for(R=0,N=0;R<v;++R)N+=Math.pow(c[R],S+k);P[k]=N}E.push(P)}E.push(C);const z=function(i){const s=i.length-1,o=[];let l,c,h,g,y;for(l=0;l<s;++l){for(g=l,c=l+1;c<s;++c)Math.abs(i[l][c])>Math.abs(i[l][g])&&(g=c);for(h=l;h<s+1;++h)y=i[h][l],i[h][l]=i[h][g],i[h][g]=y;for(c=l+1;c<s;++c)for(h=s;h>=l;h--)i[h][c]-=i[h][l]*i[l][c]/i[l][l]}for(c=s-1;c>=0;--c){for(y=0,h=c+1;h<s;++h)y+=i[h][c]*o[h];o[c]=(i[s][c]-y)/i[c][c]}return o}(E),H=X=>{let J=y+z[0]+z[1]*(X-=g)+z[2]*X*X;for(S=3;S<x;++S)J+=z[S]*Math.pow(X,S);return J};return{coef:Ro(x,z,-g,y),predict:H,rSquared:xa(i,s,o,y,H)}}function Ro(i,s,o,l){const c=Array(i);let h,g,y,v;for(h=0;h<i;++h)c[h]=0;for(h=i-1;h>=0;--h)for(y=s[h],v=1,c[h]+=y,g=1;g<=h;++g)v*=(h+1-g)/g,c[h-g]+=y*Math.pow(o,g)*v;return c[0]+=l,c}function eA(i,s,o,l){const[c,h,g,y]=ry(i,s,o,!0),v=c.length,C=Math.max(2,~~(l*v)),E=new Float64Array(v),x=new Float64Array(v),S=new Float64Array(v).fill(1);for(let k=-1;++k<=2;){const R=[0,C-1];for(let P=0;P<v;++P){const z=c[P],H=R[0],X=R[1];let oe=0,fe=0,te=0,Re=0,ze=0;const Fe=1/Math.abs(c[z-c[H]>c[X]-z?H:X]-z||1);for(let et=H;et<=X;++et){const Ot=c[et],Xe=h[et],Tt=fF(Math.abs(z-Ot)*Fe)*S[et],Xt=Ot*Tt;oe+=Tt,fe+=Xt,te+=Xe*Tt,Re+=Xe*Xt,ze+=Ot*Xt}const[Oe,tt]=Cd(fe/oe,te/oe,Re/oe,ze/oe);E[P]=Oe+tt*z,x[P]=Math.abs(h[P]-E[P]),Ut(c,P+1,R)}if(2===k)break;const N=Xh(x);if(Math.abs(N)<1e-12)break;for(let z,H,P=0;P<v;++P)z=x[P]/(6*N),S[P]=z>=1?1e-12:(H=1-z*z)*H}return function(i,s,o,l){const c=i.length,h=[];let C,g=0,y=0,v=[];for(;g<c;++g)C=i[g]+o,v[0]===C?v[1]+=(s[g]-v[1])/++y:(y=0,v[1]+=l,v=[C,s[g]],h.push(v));return v[1]+=l,h}(c,E,g,y)}function fF(i){return(i=1-i*i*i)*i*i}function Ut(i,s,o){const l=i[s];let c=o[0],h=o[1]+1;if(!(h>=i.length))for(;s>c&&i[h]-l<=l-i[c];)o[0]=++c,o[1]=h,++h}const hF=.5*Math.PI/180;function Vv(i,s,o,l){o=o||25,l=Math.max(o,l||200);const c=N=>[N,i(N)],h=s[0],g=s[1],y=g-h,v=y/l,C=[c(h)],E=[];if(o===l){for(let N=1;N<l;++N)C.push(c(h+N/o*y));return C.push(c(g)),C}E.push(c(g));for(let N=o;--N>0;)E.push(c(h+N/o*y));let x=C[0],S=E[E.length-1];const k=1/y,R=function(i,s){let o=i,l=i;const c=s.length;for(let h=0;h<c;++h){const g=s[h][1];g<o&&(o=g),g>l&&(l=g)}return 1/(l-o)}(x[1],E);for(;S;){const N=c((x[0]+S[0])/2);N[0]-x[0]>=v&&gF(x,N,S,k,R)>hF?E.push(N):(x=S,C.push(S),E.pop()),S=E[E.length-1]}return C}function gF(i,s,o,l,c){const h=Math.atan2(c*(o[1]-i[1]),l*(o[0]-i[0])),g=Math.atan2(c*(s[1]-i[1]),l*(s[0]-i[0]));return Math.abs(h-g)}function Aa(i,s,o){i=+i,s=+s,o=(c=arguments.length)<2?(s=i,i=0,1):c<3?1:+o;for(var l=-1,c=0|Math.max(0,Math.ceil((s-i)/o)),h=new Array(c);++l<c;)h[l]=i+l*o;return h}function $v(i){return i&&i.length?1===i.length?i[0]:function(i){return s=>{const o=i.length;let l=1,c=String(i[0](s));for(;l<o;++l)c+="|"+i[l](s);return c}}(i):function(){return""}}function No(i,s,o){return o||i+(s?"_"+s:"")}const wd=()=>{},jv={init:wd,add:wd,rem:wd,idx:0},Ed={values:{init:i=>i.cell.store=!0,value:i=>i.cell.data.values(),idx:-1},count:{value:i=>i.cell.num},__count__:{value:i=>i.missing+i.valid},missing:{value:i=>i.missing},valid:{value:i=>i.valid},sum:{init:i=>i.sum=0,value:i=>i.sum,add:(i,s)=>i.sum+=+s,rem:(i,s)=>i.sum-=s},product:{init:i=>i.product=1,value:i=>i.valid?i.product:void 0,add:(i,s)=>i.product*=s,rem:(i,s)=>i.product/=s},mean:{init:i=>i.mean=0,value:i=>i.valid?i.mean:void 0,add:(i,s)=>(i.mean_d=s-i.mean,i.mean+=i.mean_d/i.valid),rem:(i,s)=>(i.mean_d=s-i.mean,i.mean-=i.valid?i.mean_d/i.valid:i.mean)},average:{value:i=>i.valid?i.mean:void 0,req:["mean"],idx:1},variance:{init:i=>i.dev=0,value:i=>i.valid>1?i.dev/(i.valid-1):void 0,add:(i,s)=>i.dev+=i.mean_d*(s-i.mean),rem:(i,s)=>i.dev-=i.mean_d*(s-i.mean),req:["mean"],idx:1},variancep:{value:i=>i.valid>1?i.dev/i.valid:void 0,req:["variance"],idx:2},stdev:{value:i=>i.valid>1?Math.sqrt(i.dev/(i.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:i=>i.valid>1?Math.sqrt(i.dev/i.valid):void 0,req:["variance"],idx:2},stderr:{value:i=>i.valid>1?Math.sqrt(i.dev/(i.valid*(i.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:i=>i.cell.data.distinct(i.get),req:["values"],idx:3},ci0:{value:i=>i.cell.data.ci0(i.get),req:["values"],idx:3},ci1:{value:i=>i.cell.data.ci1(i.get),req:["values"],idx:3},median:{value:i=>i.cell.data.q2(i.get),req:["values"],idx:3},q1:{value:i=>i.cell.data.q1(i.get),req:["values"],idx:3},q3:{value:i=>i.cell.data.q3(i.get),req:["values"],idx:3},min:{init:i=>i.min=void 0,value:i=>i.min=Number.isNaN(i.min)?i.cell.data.min(i.get):i.min,add:(i,s)=>{(s<i.min||void 0===i.min)&&(i.min=s)},rem:(i,s)=>{s<=i.min&&(i.min=NaN)},req:["values"],idx:4},max:{init:i=>i.max=void 0,value:i=>i.max=Number.isNaN(i.max)?i.cell.data.max(i.get):i.max,add:(i,s)=>{(s>i.max||void 0===i.max)&&(i.max=s)},rem:(i,s)=>{s>=i.max&&(i.max=NaN)},req:["values"],idx:4},argmin:{init:i=>i.argmin=void 0,value:i=>i.argmin||i.cell.data.argmin(i.get),add:(i,s,o)=>{s<i.min&&(i.argmin=o)},rem:(i,s)=>{s<=i.min&&(i.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:i=>i.argmax=void 0,value:i=>i.argmax||i.cell.data.argmax(i.get),add:(i,s,o)=>{s>i.max&&(i.argmax=o)},rem:(i,s)=>{s>=i.max&&(i.argmax=void 0)},req:["max","values"],idx:3}},kg=Object.keys(Ed);function Rs(i,s){return Ed[i](s)}function tA(i,s){return i.idx-s.idx}function Ow(){this.valid=0,this.missing=0,this._ops.forEach(i=>i.init(this))}function oy(i,s){null!=i&&""!==i?i==i&&(++this.valid,this._ops.forEach(o=>o.add(this,i,s))):++this.missing}function Tw(i,s){null!=i&&""!==i?i==i&&(--this.valid,this._ops.forEach(o=>o.rem(this,i,s))):--this.missing}function ay(i){return this._out.forEach(s=>i[s.out]=s.value(this)),i}function kw(i,s){const o=s||T.yR,l=function(i){const s={};i.forEach(l=>s[l.name]=l);const o=l=>{!l.req||l.req.forEach(c=>{s[c]||o(s[c]=Ed[c]())})};return i.forEach(o),Object.values(s).sort(tA)}(i),c=i.slice().sort(tA);function h(g){this._ops=l,this._out=c,this.cell=g,this.init()}return h.prototype.init=Ow,h.prototype.add=oy,h.prototype.rem=Tw,h.prototype.set=ay,h.prototype.get=o,h.fields=i.map(g=>g.out),h}function Tf(i){this._key=i?(0,T.EP)(i):bn,this.reset()}kg.forEach(i=>{Ed[i]=function(i,s){return o=>(0,T.l7)({name:i,out:o||i},jv,s)}(i,Ed[i])});const _o=Tf.prototype;function xu(i){Ke.call(this,null,i),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function kf(i){Ke.call(this,null,i)}function Ig(i,s,o){const l=i;let c=s||[],h=o||[],g={},y=0;return{add:v=>h.push(v),remove:v=>g[l(v)]=++y,size:()=>c.length,data:(v,C)=>(y&&(c=c.filter(E=>!g[l(E)]),g={},y=0),C&&v&&c.sort(v),h.length&&(c=v?(0,T.TS)(v,c,h.sort(v)):c.concat(h),h=[]),c)}}function Ff(i){Ke.call(this,[],i)}function ly(i){ji.call(this,null,yF,i)}function yF(i){return this.value&&!i.modified()?this.value:(0,T.qu)(i.fields,i.orders)}function wi(i){Ke.call(this,null,i)}function zv(i){Ke.call(this,null,i)}_o.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},_o.add=function(i){this._add.push(i)},_o.rem=function(i){this._rem.push(i)},_o.values=function(){if(this._get=null,0===this._rem.length)return this._add;const i=this._add,s=this._rem,o=this._key,l=i.length,c=s.length,h=Array(l-c),g={};let y,v,C;for(y=0;y<c;++y)g[o(s[y])]=1;for(y=0,v=0;y<l;++y)g[o(C=i[y])]?g[o(C)]=0:h[v++]=C;return this._rem=[],this._add=h},_o.distinct=function(i){const s=this.values(),o={};let h,l=s.length,c=0;for(;--l>=0;)h=i(s[l])+"",(0,T.nr)(o,h)||(o[h]=1,++c);return c},_o.extent=function(i){if(this._get!==i||!this._ext){const s=this.values(),o=(0,T.dI)(s,i);this._ext=[s[o[0]],s[o[1]]],this._get=i}return this._ext},_o.argmin=function(i){return this.extent(i)[0]||{}},_o.argmax=function(i){return this.extent(i)[1]||{}},_o.min=function(i){const s=this.extent(i)[0];return null!=s?i(s):void 0},_o.max=function(i){const s=this.extent(i)[1];return null!=s?i(s):void 0},_o.quartile=function(i){return(this._get!==i||!this._q)&&(this._q=J0(this.values(),i),this._get=i),this._q},_o.q1=function(i){return this.quartile(i)[0]},_o.q2=function(i){return this.quartile(i)[1]},_o.q3=function(i){return this.quartile(i)[2]},_o.ci=function(i){return(this._get!==i||!this._ci)&&(this._ci=wu(this.values(),1e3,.05,i),this._get=i),this._ci},_o.ci0=function(i){return this.ci(i)[0]},_o.ci1=function(i){return this.ci(i)[1]},xu.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:kg},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},(0,T.XW)(xu,Ke,{transform(i,s){const o=this,l=s.fork(s.NO_SOURCE|s.NO_FIELDS),c=i.modified();return o.stamp=l.stamp,o.value&&(c||s.modified(o._inputs,!0))?(o._prev=o.value,o.value=c?o.init(i):{},s.visit(s.SOURCE,h=>o.add(h))):(o.value=o.value||o.init(i),s.visit(s.REM,h=>o.rem(h)),s.visit(s.ADD,h=>o.add(h))),l.modifies(o._outputs),o._drop=!1!==i.drop,i.cross&&o._dims.length>1&&(o._drop=!1,o.cross()),s.clean()&&o._drop&&l.clean(!0).runAfter(()=>this.clean()),o.changes(l)},cross(){const i=this,s=i.value,o=i._dnames,l=o.map(()=>({})),c=o.length;function h(y){let v,C,E,x;for(v in y)for(E=y[v].tuple,C=0;C<c;++C)l[C][x=E[o[C]]]=x}h(i._prev),h(s),function g(y,v,C){const E=o[C],x=l[C++];for(const S in x){const k=y?y+"|"+S:S;v[E]=x[S],C<c?g(k,v,C):s[k]||i.cell(k,v)}}("",{},0)},init(i){const s=this._inputs=[],o=this._outputs=[],l={};function c(P){const z=(0,T.IX)((0,T.Oj)(P)),H=z.length;let J,X=0;for(;X<H;++X)l[J=z[X]]||(l[J]=1,s.push(J))}this._dims=(0,T.IX)(i.groupby),this._dnames=this._dims.map(P=>{const z=(0,T.el)(P);return c(P),o.push(z),z}),this.cellkey=i.key?i.key:$v(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const h=i.fields||[null],g=i.ops||["count"],y=i.as||[],v=h.length,C={};let E,x,S,k,R,N;for(v!==g.length&&(0,T.vU)("Unmatched number of fields and aggregate ops."),N=0;N<v;++N)E=h[N],x=g[N],null==E&&"count"!==x&&(0,T.vU)("Null aggregate field specified."),k=(0,T.el)(E),R=No(x,k,y[N]),o.push(R),"count"!==x?(S=C[k],S||(c(E),S=C[k]=[],S.field=E,this._measures.push(S)),"count"!==x&&(this._countOnly=!1),S.push(Rs(x,R))):this._counts.push(R);return this._measures=this._measures.map(P=>kw(P,P.field)),{}},cellkey:$v(),cell(i,s){let o=this.value[i];return o?0===o.num&&this._drop&&o.stamp<this.stamp?(o.stamp=this.stamp,this._adds[this._alen++]=o):o.stamp<this.stamp&&(o.stamp=this.stamp,this._mods[this._mlen++]=o):(o=this.value[i]=this.newcell(i,s),this._adds[this._alen++]=o),o},newcell(i,s){const o={key:i,num:0,agg:null,tuple:this.newtuple(s,this._prev&&this._prev[i]),stamp:this.stamp,store:!1};if(!this._countOnly){const l=this._measures,c=l.length;o.agg=Array(c);for(let h=0;h<c;++h)o.agg[h]=new l[h](o)}return o.store&&(o.data=new Tf),o},newtuple(i,s){const o=this._dnames,l=this._dims,c=l.length,h={};for(let g=0;g<c;++g)h[o[g]]=l[g](i);return s?jh(s.tuple,h):Ti(h)},clean(){const i=this.value;for(const s in i)0===i[s].num&&delete i[s]},add(i){const s=this.cellkey(i),o=this.cell(s,i);if(o.num+=1,this._countOnly)return;o.store&&o.data.add(i);const l=o.agg;for(let c=0,h=l.length;c<h;++c)l[c].add(l[c].get(i),i)},rem(i){const s=this.cellkey(i),o=this.cell(s,i);if(o.num-=1,this._countOnly)return;o.store&&o.data.rem(i);const l=o.agg;for(let c=0,h=l.length;c<h;++c)l[c].rem(l[c].get(i),i)},celltuple(i){const s=i.tuple,o=this._counts;i.store&&i.data.values();for(let l=0,c=o.length;l<c;++l)s[o[l]]=i.num;if(!this._countOnly){const l=i.agg;for(let c=0,h=l.length;c<h;++c)l[c].set(s)}return s},changes(i){const s=this._adds,o=this._mods,l=this._prev,c=this._drop,h=i.add,g=i.rem,y=i.mod;let v,C,E,x;if(l)for(C in l)v=l[C],(!c||v.num)&&g.push(v.tuple);for(E=0,x=this._alen;E<x;++E)h.push(this.celltuple(s[E])),s[E]=null;for(E=0,x=this._mlen;E<x;++E)v=o[E],(0===v.num&&c?g:y).push(this.celltuple(v)),o[E]=null;return this._alen=this._mlen=0,this._prev=null,i}}),kf.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},(0,T.XW)(kf,Ke,{transform(i,s){const o=!1!==i.interval,l=this._bins(i),c=l.start,h=l.step,g=i.as||["bin0","bin1"],y=g[0],v=g[1];let C;return C=i.modified()?(s=s.reflow(!0)).SOURCE:s.modified((0,T.Oj)(i.field))?s.ADD_MOD:s.ADD,s.visit(C,o?E=>{const x=l(E);E[y]=x,E[v]=null==x?null:c+h*(1+(x-c)/h)}:E=>E[y]=l(E)),s.modifies(o?g:y)},_bins(i){if(this.value&&!i.modified())return this.value;const s=i.field,o=_d(i),l=o.step;let g,y,c=o.start,h=c+Math.ceil((o.stop-c)/l)*l;null!=(g=i.anchor)&&(y=g-(c+l*Math.floor((g-c)/l)),c+=y,h+=y);const v=function(C){let E=(0,T.He)(s(C));return null==E?null:E<c?-1/0:E>h?1/0:(E=Math.max(c,Math.min(E,h-l)),c+l*Math.floor(1e-14+(E-c)/l))};return v.start=c,v.stop=o.stop,v.step=l,this.value=(0,T.ZE)(v,(0,T.Oj)(s),i.name||"bin_"+(0,T.el)(s))}}),Ff.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},(0,T.XW)(Ff,Ke,{transform(i,s){const o=s.fork(s.ALL),l=Ig(bn,this.value,o.materialize(o.ADD).add),c=i.sort,h=s.changed()||c&&(i.modified("sort")||s.modified(c.fields));return o.visit(o.REM,l.remove),this.modified(h),this.value=o.source=l.data(zh(c),h),s.source&&s.source.root&&(this.value.root=s.source.root),o}}),(0,T.XW)(ly,ji),wi.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},(0,T.XW)(wi,Ke,{transform(i,s){const o=x=>S=>{for(var R,k=function(i,s,o){switch(s){case"upper":i=i.toUpperCase();break;case"lower":i=i.toLowerCase()}return i.match(o)}(y(S),i.case,h)||[],N=0,P=k.length;N<P;++N)g.test(R=k[N])||x(R)},l=this._parameterCheck(i,s),c=this._counts,h=this._match,g=this._stop,y=i.field,v=i.as||["text","count"],C=o(x=>c[x]=1+(c[x]||0)),E=o(x=>c[x]-=1);return l?s.visit(s.SOURCE,C):(s.visit(s.ADD,C),s.visit(s.REM,E)),this._finish(s,v)},_parameterCheck(i,s){let o=!1;return(i.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(i.stopwords||"")+"$","i"),o=!0),(i.modified("pattern")||!this._match)&&(this._match=new RegExp(i.pattern||"[\\w']+","g"),o=!0),(i.modified("field")||s.modified(i.field.fields))&&(o=!0),o&&(this._counts={}),o},_finish(i,s){const o=this._counts,l=this._tuples||(this._tuples={}),c=s[0],h=s[1],g=i.fork(i.NO_SOURCE|i.NO_FIELDS);let y,v,C;for(y in o)v=l[y],C=o[y]||0,!v&&C?(l[y]=v=Ti({}),v[c]=y,v[h]=C,g.add.push(v)):0===C?(v&&g.rem.push(v),o[y]=null,l[y]=null):v[h]!==C&&(v[h]=C,g.mod.push(v));return g.modifies(s)}}),zv.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},(0,T.XW)(zv,Ke,{transform(i,s){const o=s.fork(s.NO_SOURCE),l=i.as||["a","b"],c=l[0],h=l[1],g=!this.value||s.changed(s.ADD_REM)||i.modified("as")||i.modified("filter");let y=this.value;return g?(y&&(o.rem=y),y=s.materialize(s.SOURCE).source,o.add=this.value=function(i,s,o,l){for(var v,C,c=[],h={},g=i.length,y=0;y<g;++y)for(h[s]=C=i[y],v=0;v<g;++v)h[o]=i[v],l(h)&&(c.push(Ti(h)),(h={})[s]=C);return c}(y,c,h,i.filter||T.yb)):o.mod=y,o.source=this.value,o.modifies(l)}});const Uv={kde:Ag,mixture:vd,normal:Rv,lognormal:iy,uniform:Qh},uy="function";function Hv(i,s){const o=i[uy];(0,T.nr)(Uv,o)||(0,T.vU)("Unknown distribution function: "+o);const l=Uv[o]();for(const c in i)"field"===c?l.data((i.from||s()).map(i[c])):"distributions"===c?l[c](i[c].map(h=>Hv(h,s))):typeof l[c]===uy&&l[c](i[c]);return l}function Wv(i){Ke.call(this,null,i)}const vF=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}];function Po(i,s){return i?i.map((o,l)=>s[l]||(0,T.el)(o)):null}function Zh(i,s,o){const l=[],c=x=>x(v);let h,g,y,v,C,E;if(null==s)l.push(i.map(o));else for(h={},g=0,y=i.length;g<y;++g)v=i[g],C=s.map(c),E=h[C],E||(h[C]=E=[],E.dims=C,l.push(E)),E.push(o(v));return l}function cy(i){Ke.call(this,null,i)}function Rf(i){ji.call(this,null,dy,i),this.modified(!0)}function dy(i){const s=i.expr;return this.value&&!i.modified("expr")?this.value:(0,T.ZE)(o=>s(o,i),(0,T.Oj)(s),(0,T.el)(s))}function fy(i){Ke.call(this,[void 0,void 0],i)}function Gv(i,s){ji.call(this,i),this.parent=s,this.count=0}function Ng(i){Ke.call(this,{},i),this._keys=(0,T.Xr)();const s=this._targets=[];s.active=0,s.forEach=o=>{for(let l=0,c=s.active;l<c;++l)o(s[l],l,s)}}function hy(i){ji.call(this,null,Iw,i)}function Iw(i){return this.value&&!i.modified()?this.value:(0,T.kJ)(i.name)?(0,T.IX)(i.name).map(s=>(0,T.EP)(s)):(0,T.EP)(i.name,i.as)}function Pg(i){Ke.call(this,(0,T.Xr)(),i)}function qv(i){Ke.call(this,[],i)}function Rw(i){Ke.call(this,[],i)}function Yv(i){Ke.call(this,null,i)}function Nw(i){Ke.call(this,[],i)}Wv.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:vF.concat({key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:vF},{name:"weights",type:"number",array:!0}]})},{name:"as",type:"string",array:!0,default:["value","density"]}]},(0,T.XW)(Wv,Ke,{transform(i,s){const o=s.fork(s.NO_SOURCE|s.NO_FIELDS);if(!this.value||s.changed()||i.modified()){const l=Hv(i.distribution,function(i){return()=>i.materialize(i.SOURCE).source}(s)),c=i.steps||i.minsteps||25,h=i.steps||i.maxsteps||200;let g=i.method||"pdf";"pdf"!==g&&"cdf"!==g&&(0,T.vU)("Invalid density method: "+g),!i.extent&&!l.data&&(0,T.vU)("Missing density extent parameter."),g=l[g];const y=i.as||["value","density"],C=Vv(g,i.extent||(0,T.We)(l.data()),c,h).map(E=>{const x={};return x[y[0]]=E[0],x[y[1]]=E[1],Ti(x)});this.value&&(o.rem=this.value),this.value=o.add=o.source=C}return o}}),cy.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]},(0,T.XW)(cy,Ke,{transform(i,s){if(this.value&&!i.modified()&&!s.changed())return s;const o=s.materialize(s.SOURCE).source,l=Zh(s.source,i.groupby,T.yR),c=i.smooth||!1,h=i.field,g=i.step||((i,s)=>(0,T.yP)((0,T.We)(i,s))/30)(o,h),y=zh((R,N)=>h(R)-h(N)),v=i.as||"bin",C=l.length;let k,E=1/0,x=-1/0,S=0;for(;S<C;++S){const R=l[S].sort(y);k=-1;for(const N of ww(R,g,c,h))N<E&&(E=N),N>x&&(x=N),R[++k][v]=N}return this.value={start:E,stop:x,step:g},s.reflow(!0).modifies(v)}}),(0,T.XW)(Rf,ji),fy.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},(0,T.XW)(fy,Ke,{transform(i,s){const o=this.value,l=i.field,c=s.changed()||s.modified(l.fields)||i.modified("field");let h=o[0],g=o[1];if((c||null==h)&&(h=1/0,g=-1/0),s.visit(c?s.SOURCE:s.ADD,y=>{const v=(0,T.He)(l(y));null!=v&&(v<h&&(h=v),v>g&&(g=v))}),!Number.isFinite(h)||!Number.isFinite(g)){let y=(0,T.el)(l);y&&(y=` for field "${y}"`),s.dataflow.warn(`Infinite extent${y}: [${h}, ${g}]`),h=g=void 0}this.value=[h,g]}}),(0,T.XW)(Gv,ji,{connect(i){return this.detachSubflow=i.detachSubflow,this.targets().add(i),i.source=this},add(i){this.count+=1,this.value.add.push(i)},rem(i){this.count-=1,this.value.rem.push(i)},mod(i){this.value.mod.push(i)},init(i){this.value.init(i,i.NO_SOURCE)},evaluate(){return this.value}}),(0,T.XW)(Ng,Ke,{activate(i){this._targets[this._targets.active++]=i},subflow(i,s,o,l){const c=this.value;let g,y,h=(0,T.nr)(c,i)&&c[i];return h?h.value.stamp<o.stamp&&(h.init(o),this.activate(h)):(y=l||(y=this._group[i])&&y.tuple,g=o.dataflow,h=new Gv(o.fork(o.NO_SOURCE),this),g.add(h).connect(s(g,i,y)),c[i]=h,this.activate(h)),h},clean(){const i=this.value;let s=0;for(const o in i)if(0===i[o].count){const l=i[o].detachSubflow;l&&l(),delete i[o],++s}if(s){const o=this._targets.filter(l=>l&&l.count>0);this.initTargets(o)}},initTargets(i){const s=this._targets,o=s.length,l=i?i.length:0;let c=0;for(;c<l;++c)s[c]=i[c];for(;c<o&&null!=s[c];++c)s[c]=null;s.active=l},transform(i,s){const o=s.dataflow,l=i.key,c=i.subflow,h=this._keys,g=i.modified("key"),y=v=>this.subflow(v,c,s);return this._group=i.group||{},this.initTargets(),s.visit(s.REM,v=>{const C=bn(v),E=h.get(C);void 0!==E&&(h.delete(C),y(E).rem(v))}),s.visit(s.ADD,v=>{const C=l(v);h.set(bn(v),C),y(C).add(v)}),g||s.modified(l.fields)?s.visit(s.MOD,v=>{const C=bn(v),E=h.get(C),x=l(v);E===x?y(x).mod(v):(h.set(C,x),y(E).rem(v),y(x).add(v))}):s.changed(s.MOD)&&s.visit(s.MOD,v=>{y(h.get(bn(v))).mod(v)}),g&&s.visit(s.REFLOW,v=>{const C=bn(v),E=h.get(C),x=l(v);E!==x&&(h.set(C,x),y(E).rem(v),y(x).add(v))}),s.clean()?o.runAfter(()=>{this.clean(),h.clean()}):h.empty>o.cleanThreshold&&o.runAfter(h.clean),s}}),(0,T.XW)(hy,ji),Pg.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},(0,T.XW)(Pg,Ke,{transform(i,s){const o=s.dataflow,l=this.value,c=s.fork(),h=c.add,g=c.rem,y=c.mod,v=i.expr;let C=!0;function E(x){const S=bn(x),k=v(x,i),R=l.get(S);k&&R?(l.delete(S),h.push(x)):k||R?C&&k&&!R&&y.push(x):(l.set(S,1),g.push(x))}return s.visit(s.REM,x=>{const S=bn(x);l.has(S)?l.delete(S):g.push(x)}),s.visit(s.ADD,x=>{v(x,i)?h.push(x):l.set(bn(x),1)}),s.visit(s.MOD,E),i.modified()&&(C=!1,s.visit(s.REFLOW,E)),l.empty>o.cleanThreshold&&o.runAfter(l.clean),c}}),qv.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},(0,T.XW)(qv,Ke,{transform(i,s){const o=s.fork(s.NO_SOURCE),l=i.fields,c=Po(l,i.as||[]),h=i.index||null,g=c.length;return o.rem=this.value,s.visit(s.SOURCE,y=>{const v=l.map(R=>R(y)),C=v.reduce((R,N)=>Math.max(R,N.length),0);let x,S,k,E=0;for(;E<C;++E){for(S=hd(y),x=0;x<g;++x)S[c[x]]=null==(k=v[x][E])?null:k;h&&(S[h]=E),o.add.push(S)}}),this.value=o.source=o.add,h&&o.modifies(h),o.modifies(c)}}),Rw.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},(0,T.XW)(Rw,Ke,{transform(i,s){const o=s.fork(s.NO_SOURCE),l=i.fields,c=l.map(T.el),h=i.as||["key","value"],g=h[0],y=h[1],v=l.length;return o.rem=this.value,s.visit(s.SOURCE,C=>{for(let x,E=0;E<v;++E)x=hd(C),x[g]=c[E],x[y]=l[E](C),o.add.push(x)}),this.value=o.source=o.add,o.modifies(h)}}),Yv.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},(0,T.XW)(Yv,Ke,{transform(i,s){const o=i.expr,l=i.as,c=i.modified(),h=i.initonly?s.ADD:c?s.SOURCE:s.modified(o.fields)||s.modified(l)?s.ADD_MOD:s.ADD;return c&&(s=s.materialize().reflow(!0)),i.initonly||s.modifies(l),s.visit(h,g=>g[l]=o(g,i))}}),(0,T.XW)(Nw,Ke,{transform(i,s){const o=s.fork(s.ALL),l=i.generator;let g,y,v,c=this.value,h=i.size-c.length;if(h>0){for(g=[];--h>=0;)g.push(v=Ti(l(i))),c.push(v);o.add=o.add.length?o.materialize(o.ADD).add.concat(g):g}else y=c.slice(0,-h),o.rem=o.rem.length?o.materialize(o.REM).rem.concat(y):y,c=c.slice(-h);return o.source=this.value=c,o}});const Lg={value:"value",median:Xh,mean:function(i,s){let o=0,l=0;if(void 0===s)for(let c of i)null!=c&&(c=+c)>=c&&(++o,l+=c);else{let c=-1;for(let h of i)null!=(h=s(h,++c,i))&&(h=+h)>=h&&(++o,l+=h)}if(o)return l/o},min:JS,max:md},Pw=[];function Bg(i){Ke.call(this,[],i)}function Vg(i){xu.call(this,i)}function Bw(i){Ke.call(this,null,i)}function iA(i){ji.call(this,null,zl,i)}function zl(i){return this.value&&!i.modified()?this.value:(0,T.Jy)(i.fields,i.flat)}function Vw(i){Ke.call(this,[],i),this._pending=null}function Xv(i,s,o){o.forEach(Ti);const l=s.fork(s.NO_FIELDS&s.NO_SOURCE);return l.rem=i.value,i.value=l.source=l.add=o,i._pending=null,l.rem.length&&l.clean(!0),l}function py(i){Ke.call(this,{},i)}function rA(i){ji.call(this,null,Kv,i)}function Kv(i){if(this.value&&!i.modified())return this.value;const s=i.extents,o=s.length;let h,g,l=1/0,c=-1/0;for(h=0;h<o;++h)g=s[h],g[0]<l&&(l=g[0]),g[1]>c&&(c=g[1]);return[l,c]}function Ma(i){ji.call(this,null,$w,i)}function $w(i){return this.value&&!i.modified()?this.value:i.values.reduce((s,o)=>s.concat(o),[])}function Qv(i){Ke.call(this,null,i)}function jw(i){xu.call(this,i)}function oA(i){Ng.call(this,i)}function Uw(i){Ke.call(this,null,i)}function Nf(i){Ke.call(this,null,i)}function ll(i){Ke.call(this,null,i)}function EF(i){Ke.call(this,null,i)}function Pf(i){Ke.call(this,[],i),this.count=0}function aA(i){Ke.call(this,null,i)}function Bo(i){Ke.call(this,null,i),this.modified(!0)}function ep(i){Ke.call(this,null,i)}Bg.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},(0,T.XW)(Bg,Ke,{transform(i,s){var S,k,R,N,P,z,H,X,J,oe,o=s.fork(s.ALL),l=function(i){var o,s=i.method||Lg.value;if(null!=Lg[s])return s===Lg.value?(o=void 0!==i.value?i.value:0,()=>o):Lg[s];(0,T.vU)("Unrecognized imputation method: "+s)}(i),c=function(i){const s=i.field;return o=>o?s(o):NaN}(i),h=(0,T.el)(i.field),g=(0,T.el)(i.key),y=(i.groupby||[]).map(T.el),v=function(i,s,o,l){var C,E,x,S,k,R,N,P,c=z=>z(P),h=[],g=l?l.slice():[],y={},v={};for(g.forEach((z,H)=>y[z]=H+1),S=0,N=i.length;S<N;++S)R=o(P=i[S]),k=y[R]||(y[R]=g.push(R)),(x=v[E=(C=s?s.map(c):Pw)+""])||(x=v[E]=[],h.push(x),x.values=C),x[k-1]=P;return h.domain=g,h}(s.source,i.groupby,i.key,i.keyvals),C=[],E=this.value,x=v.domain.length;for(P=0,X=v.length;P<X;++P)for(R=(S=v[P]).values,k=NaN,H=0;H<x;++H)if(null==S[H]){for(N=v.domain[H],oe={_impute:!0},z=0,J=R.length;z<J;++z)oe[y[z]]=R[z];oe[g]=N,oe[h]=Number.isNaN(k)?k=l(S,c):k,C.push(Ti(oe))}return C.length&&(o.add=o.materialize(o.ADD).add.concat(C)),E.length&&(o.rem=o.materialize(o.REM).rem.concat(E)),this.value=C,o}}),Vg.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:kg},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},(0,T.XW)(Vg,xu,{transform(i,s){const o=this,l=i.modified();let c;return o.value&&(l||s.modified(o._inputs,!0))?(c=o.value=l?o.init(i):{},s.visit(s.SOURCE,h=>o.add(h))):(c=o.value=o.value||this.init(i),s.visit(s.REM,h=>o.rem(h)),s.visit(s.ADD,h=>o.add(h))),o.changes(),s.visit(s.SOURCE,h=>{(0,T.l7)(h,c[o.cellkey(h)].tuple)}),s.reflow(l).modifies(this._outputs)},changes(){const i=this._adds,s=this._mods;let o,l;for(o=0,l=this._alen;o<l;++o)this.celltuple(i[o]),i[o]=null;for(o=0,l=this._mlen;o<l;++o)this.celltuple(s[o]),s[o]=null;this._alen=this._mlen=0}}),Bw.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},(0,T.XW)(Bw,Ke,{transform(i,s){const o=s.fork(s.NO_SOURCE|s.NO_FIELDS);if(!this.value||s.changed()||i.modified()){const l=s.materialize(s.SOURCE).source,c=Zh(l,i.groupby,i.field),h=(i.groupby||[]).map(T.el),g=i.bandwidth,y=i.cumulative?"cdf":"pdf",v=i.as||["value","density"],C=[];let E=i.extent,x=i.steps||i.minsteps||25,S=i.steps||i.maxsteps||200;"pdf"!==y&&"cdf"!==y&&(0,T.vU)("Invalid density method: "+y),"shared"===i.resolve&&(E||(E=(0,T.We)(l,i.field)),x=S=i.steps||S),c.forEach(k=>{const R=Ag(k,g)[y],N=i.counts?k.length:1;Vv(R,E||(0,T.We)(k),x,S).forEach(z=>{const H={};for(let X=0;X<h.length;++X)H[h[X]]=k.dims[X];H[v[0]]=z[0],H[v[1]]=z[1]*N,C.push(Ti(H))})}),this.value&&(o.rem=this.value),this.value=o.add=o.source=C}return o}}),(0,T.XW)(iA,ji),(0,T.XW)(Vw,Ke,{transform(i,s){const o=s.dataflow;return this._pending?Xv(this,s,this._pending):function(i){return i.modified("async")&&!(i.modified("values")||i.modified("url")||i.modified("format"))}(i)?s.StopPropagation:i.values?Xv(this,s,o.parse(i.values,i.format)):i.async?{async:o.request(i.url,i.format).then(c=>(this._pending=(0,T.IX)(c.data),h=>h.touch(this)))}:o.request(i.url,i.format).then(l=>Xv(this,s,(0,T.IX)(l.data)))}}),py.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},(0,T.XW)(py,Ke,{transform(i,s){const o=i.fields,l=i.index,c=i.values,h=null==i.default?null:i.default,g=i.modified(),y=o.length;let x,S,k,v=g?s.SOURCE:s.ADD,C=s,E=i.as;return c?(S=c.length,y>1&&!E&&(0,T.vU)('Multi-field lookup requires explicit "as" parameter.'),E&&E.length!==y*S&&(0,T.vU)('The "as" parameter has too few output field names.'),E=E||c.map(T.el),x=function(R){for(var z,H,N=0,P=0;N<y;++N)if(null==(H=l.get(o[N](R))))for(z=0;z<S;++z,++P)R[E[P]]=h;else for(z=0;z<S;++z,++P)R[E[P]]=c[z](H)}):(E||(0,T.vU)("Missing output field names."),x=function(R){for(var P,N=0;N<y;++N)P=l.get(o[N](R)),R[E[N]]=null==P?h:P}),g?C=s.reflow(!0):(k=o.some(R=>s.modified(R.fields)),v|=k?s.MOD:0),s.visit(v,x),C.modifies(E)}}),(0,T.XW)(rA,ji),(0,T.XW)(Ma,ji),(0,T.XW)(Qv,Ke,{transform(i,s){return this.modified(i.modified()),this.value=i,s.fork(s.NO_SOURCE|s.NO_FIELDS)}}),jw.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:kg,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},(0,T.XW)(jw,xu,{_transform:xu.prototype.transform,transform(i,s){return this._transform(function(i,s){const o=i.field,l=i.value,c=("count"===i.op?"__count__":i.op)||"sum",h=(0,T.Oj)(o).concat((0,T.Oj)(l)),g=function(i,s,o){const l={},c=[];return o.visit(o.SOURCE,h=>{const g=i(h);l[g]||(l[g]=1,c.push(g))}),c.sort(T.j2),s?c.slice(0,s):c}(o,i.limit||0,s);return s.changed()&&i.set("__pivot__",null,null,!0),{key:i.key,groupby:i.groupby,ops:g.map(()=>c),fields:g.map(y=>function(i,s,o,l){return(0,T.ZE)(c=>s(c)===i?o(c):NaN,l,i+"")}(y,o,l,h)),as:g.map(y=>y+""),modified:i.modified.bind(i)}}(i,s),s)}}),(0,T.XW)(oA,Ng,{transform(i,s){const o=i.subflow,l=i.field,c=h=>this.subflow(bn(h),o,s,h);return(i.modified("field")||l&&s.modified((0,T.Oj)(l)))&&(0,T.vU)("PreFacet does not support field modification."),this.initTargets(),l?(s.visit(s.MOD,h=>{const g=c(h);l(h).forEach(y=>g.mod(y))}),s.visit(s.ADD,h=>{const g=c(h);l(h).forEach(y=>g.add(Ti(y)))}),s.visit(s.REM,h=>{const g=c(h);l(h).forEach(y=>g.rem(y))})):(s.visit(s.MOD,h=>c(h).mod(h)),s.visit(s.ADD,h=>c(h).add(h)),s.visit(s.REM,h=>c(h).rem(h))),s.clean()&&s.runAfter(()=>this.clean()),s}}),Uw.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},(0,T.XW)(Uw,Ke,{transform(i,s){const o=s.fork(s.NO_SOURCE),l=i.fields,c=Po(i.fields,i.as||[]),h=l?(y,v)=>function(i,s,o,l){for(let c=0,h=o.length;c<h;++c)s[l[c]]=o[c](i);return s}(y,v,l,c):$h;let g;return this.value?g=this.value:(s=s.addAll(),g=this.value={}),s.visit(s.REM,y=>{const v=bn(y);o.rem.push(g[v]),g[v]=null}),s.visit(s.ADD,y=>{const v=h(y,Ti({}));g[bn(y)]=v,o.add.push(v)}),s.visit(s.MOD,y=>{o.mod.push(h(y,g[bn(y)]))}),o}}),(0,T.XW)(Nf,Ke,{transform(i,s){return this.value=i.value,i.modified("value")?s.fork(s.NO_SOURCE|s.NO_FIELDS):s.StopPropagation}}),ll.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]},(0,T.XW)(ll,Ke,{transform(i,s){const o=s.fork(s.NO_SOURCE|s.NO_FIELDS),l=i.as||["prob","value"];if(this.value&&!i.modified()&&!s.changed())return o.source=this.value,o;const h=Zh(s.materialize(s.SOURCE).source,i.groupby,i.field),g=(i.groupby||[]).map(T.el),y=[],v=i.step||.01,C=i.probs||Aa(v/2,1-1e-14,v),E=C.length;return h.forEach(x=>{const S=fc(x,C);for(let k=0;k<E;++k){const R={};for(let N=0;N<g.length;++N)R[g[N]]=x.dims[N];R[l[0]]=C[k],R[l[1]]=S[k],y.push(Ti(R))}}),this.value&&(o.rem=this.value),this.value=o.add=o.source=y,o}}),(0,T.XW)(EF,Ke,{transform(i,s){let o,l;return this.value?l=this.value:(o=s=s.addAll(),l=this.value={}),i.derive&&(o=s.fork(s.NO_SOURCE),s.visit(s.REM,c=>{const h=bn(c);o.rem.push(l[h]),l[h]=null}),s.visit(s.ADD,c=>{const h=hd(c);l[bn(c)]=h,o.add.push(h)}),s.visit(s.MOD,c=>{const h=l[bn(c)];for(const g in c)h[g]=c[g],o.modifies(g);o.mod.push(h)})),o}}),Pf.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},(0,T.XW)(Pf,Ke,{transform(i,s){const o=s.fork(s.NO_SOURCE),l=i.modified("size"),c=i.size,h=this.value.reduce((E,x)=>(E[bn(x)]=1,E),{});let g=this.value,y=this.count,v=0;function C(E){let x,S;g.length<c?g.push(E):(S=~~((y+1)*lr()),S<g.length&&S>=v&&(x=g[S],h[bn(x)]&&o.rem.push(x),g[S]=E)),++y}if(s.rem.length&&(s.visit(s.REM,E=>{const x=bn(E);h[x]&&(h[x]=-1,o.rem.push(E)),--y}),g=g.filter(E=>-1!==h[bn(E)])),(s.rem.length||l)&&g.length<c&&s.source&&(v=y=g.length,s.visit(s.SOURCE,E=>{h[bn(E)]||C(E)}),v=-1),l&&g.length>c){const E=g.length-c;for(let x=0;x<E;++x)h[bn(g[x])]=-1,o.rem.push(g[x]);g=g.slice(E)}return s.mod.length&&s.visit(s.MOD,E=>{h[bn(E)]&&o.mod.push(E)}),s.add.length&&s.visit(s.ADD,C),(s.add.length||v<0)&&(o.add=g.filter(E=>!h[bn(E)])),this.count=y,this.value=o.source=g,o}}),aA.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},(0,T.XW)(aA,Ke,{transform(i,s){if(this.value&&!i.modified())return;const o=s.materialize().fork(s.MOD),l=i.as||"data";return o.rem=this.value?s.rem.concat(this.value):s.rem,this.value=Aa(i.start,i.stop,i.step||1).map(c=>{const h={};return h[l]=c,Ti(h)}),o.add=s.add.concat(this.value),o}}),(0,T.XW)(Bo,Ke,{transform(i,s){return this.value=s.source,s.changed()?s.fork(s.NO_SOURCE|s.NO_FIELDS):s.StopPropagation}});const $g=["unit0","unit1"];function Hw(i){Ke.call(this,(0,T.Xr)(),i)}function Ww(i){Ke.call(this,null,i)}ep.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:el,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:$g}]},(0,T.XW)(ep,Ke,{transform(i,s){const o=i.field,l=!1!==i.interval,c="utc"===i.timezone,h=this._floor(i,s),g=(c?ho:vu)(h.unit).offset,y=i.as||$g,v=y[0],C=y[1],E=h.step;let x=h.start||1/0,S=h.stop||-1/0,k=s.ADD;return(i.modified()||s.modified((0,T.Oj)(o)))&&(k=(s=s.reflow(!0)).SOURCE,x=1/0,S=-1/0),s.visit(k,R=>{const N=o(R);let P,z;null==N?(R[v]=null,l&&(R[C]=null)):(R[v]=P=z=h(N),l&&(R[C]=z=g(P,E)),P<x&&(x=P),z>S&&(S=z))}),h.start=x,h.stop=S,s.modifies(l?y:v)},_floor(i,s){const o="utc"===i.timezone,{units:l,step:c}=i.units?{units:i.units,step:i.step||1}:jC({extent:i.extent||(0,T.We)(s.materialize(s.SOURCE).source,i.field),maxbins:i.maxbins}),h=Ht(l),g=this.value||{},y=(o?oa:Th)(h,c);return y.unit=(0,T.fj)(h),y.units=h,y.step=c,y.start=g.start,y.stop=g.stop,this.value=y}}),(0,T.XW)(Hw,Ke,{transform(i,s){const o=s.dataflow,l=i.field,c=this.value,h=y=>c.set(l(y),y);let g=!0;return i.modified("field")||s.modified(l.fields)?(c.clear(),s.visit(s.SOURCE,h)):s.changed()?(s.visit(s.REM,y=>c.delete(l(y))),s.visit(s.ADD,h)):g=!1,this.modified(g),c.empty>o.cleanThreshold&&o.runAfter(c.clean),s.fork()}}),(0,T.XW)(Ww,Ke,{transform(i,s){(!this.value||i.modified("field")||i.modified("sort")||s.changed()||i.sort&&s.modified(i.sort.fields))&&(this.value=(i.sort?s.source.slice().sort(zh(i.sort)):s.source).map(i.field))}});const Sd={row_number:function(){return{next:i=>i.index+1}},rank:function(){let i;return{init:()=>i=1,next:s=>{const o=s.index,l=s.data;return o&&s.compare(l[o-1],l[o])?i=o+1:i}}},dense_rank:function(){let i;return{init:()=>i=1,next:s=>{const o=s.index,l=s.data;return o&&s.compare(l[o-1],l[o])?++i:i}}},percent_rank:function(){const i=Sd.rank(),s=i.next;return{init:i.init,next:o=>(s(o)-1)/(o.data.length-1)}},cume_dist:function(){let i;return{init:()=>i=0,next:s=>{const o=s.data,l=s.compare;let c=s.index;if(i<c){for(;c+1<o.length&&!l(o[c],o[c+1]);)++c;i=c}return(1+i)/o.length}}},ntile:function(i,s){(s=+s)>0||(0,T.vU)("ntile num must be greater than zero.");const o=Sd.cume_dist(),l=o.next;return{init:o.init,next:c=>Math.ceil(s*l(c))}},lag:function(i,s){return s=+s||1,{next:o=>{const l=o.index-s;return l>=0?i(o.data[l]):null}}},lead:function(i,s){return s=+s||1,{next:o=>{const l=o.index+s,c=o.data;return l<c.length?i(c[l]):null}}},first_value:function(i){return{next:s=>i(s.data[s.i0])}},last_value:function(i){return{next:s=>i(s.data[s.i1-1])}},nth_value:function(i,s){return(s=+s)>0||(0,T.vU)("nth_value nth must be greater than zero."),{next:o=>{const l=o.i0+(s-1);return l<o.i1?i(o.data[l]):null}}},prev_value:function(i){let s;return{init:()=>s=null,next:o=>{const l=i(o.data[o.index]);return null!=l?s=l:s}}},next_value:function(i){let s,o;return{init:()=>(s=null,o=-1),next:l=>{const c=l.data;return l.index<=o?s:(o=function(i,s,o){for(let l=s.length;o<l;++o)if(null!=i(s[o]))return o;return-1}(i,c,l.index))<0?(o=c.length,s=null):s=i(c[o])}}}},Gw=Object.keys(Sd);function Zv(i){const s=(0,T.IX)(i.ops),o=(0,T.IX)(i.fields),l=(0,T.IX)(i.params),c=(0,T.IX)(i.as),h=this.outputs=[],g=this.windows=[],y={},v={},C=[],E=[];let x=!0;function S(k){(0,T.IX)((0,T.Oj)(k)).forEach(R=>y[R]=1)}S(i.sort),s.forEach((k,R)=>{const N=o[R],P=(0,T.el)(N),z=No(k,P,c[R]);if(S(N),h.push(z),(0,T.nr)(Sd,k))g.push(function(i,s,o,l){const c=Sd[i](s,o);return{init:c.init||T.bM,update:function(h,g){g[l]=c.next(h)}}}(k,o[R],l[R],z));else{if(null==N&&"count"!==k&&(0,T.vU)("Null aggregate field specified."),"count"===k)return void C.push(z);x=!1;let H=v[P];H||(H=v[P]=[],H.field=N,E.push(H)),H.push(Rs(k,z))}}),(C.length||E.length)&&(this.cell=function(i,s,o){i=i.map(v=>kw(v,v.field));const l={num:0,agg:null,store:!1,count:s};if(!o)for(var c=i.length,h=l.agg=Array(c),g=0;g<c;++g)h[g]=new i[g](l);if(l.store)var y=l.data=new Tf;return l.add=function(v){if(l.num+=1,!o){y&&y.add(v);for(let C=0;C<c;++C)h[C].add(h[C].get(v),v)}},l.rem=function(v){if(l.num-=1,!o){y&&y.rem(v);for(let C=0;C<c;++C)h[C].rem(h[C].get(v),v)}},l.set=function(v){let C,E;for(y&&y.values(),C=0,E=s.length;C<E;++C)v[s[C]]=l.num;if(!o)for(C=0,E=h.length;C<E;++C)h[C].set(v)},l.init=function(){l.num=0,y&&y.reset();for(let v=0;v<c;++v)h[v].init()},l}(E,C,x)),this.inputs=Object.keys(y)}const qw=Zv.prototype;function vo(i){Ke.call(this,{},i),this._mlen=0,this._mods=[]}function eb(i,s,o,l){const c=l.sort,h=c&&!l.ignorePeers,g=l.frame||[null,0],y=i.data(o),v=y.length,C=h?ad(c):null,E={i0:0,i1:0,p0:0,p1:0,index:0,data:y,compare:c||(0,T.a9)(-1)};s.init();for(let x=0;x<v;++x)Yw(E,g,x,v),h&&vL(E,C),s.update(E,y[x])}function Yw(i,s,o,l){i.p0=i.i0,i.p1=i.i1,i.i0=null==s[0]?0:Math.max(0,o-Math.abs(s[0])),i.i1=null==s[1]?l:Math.min(l,o+Math.abs(s[1])+1),i.index=o}function vL(i,s){const o=i.i0,l=i.i1-1,c=i.compare,h=i.data,g=h.length-1;o>0&&!c(h[o],h[o-1])&&(i.i0=s.left(h,h[o])),l<g&&!c(h[l],h[l+1])&&(i.i1=s.right(h,h[l]))}function jg(i,s,o){i._context.bezierCurveTo((2*i._x0+i._x1)/3,(2*i._y0+i._y1)/3,(i._x0+2*i._x1)/3,(i._y0+2*i._y1)/3,(i._x0+4*i._x1+s)/6,(i._y0+4*i._y1+o)/6)}function tb(i){this._context=i}function Su(){}function zg(i){this._context=i}function xF(i){this._context=i}function Ul(i,s){this._basis=new tb(i),this._beta=s}qw.init=function(){this.windows.forEach(i=>i.init()),this.cell&&this.cell.init()},qw.update=function(i,s){const o=this.cell,l=this.windows,c=i.data,h=l&&l.length;let g;if(o){for(g=i.p0;g<i.i0;++g)o.rem(c[g]);for(g=i.p1;g<i.i1;++g)o.add(c[g]);o.set(s)}for(g=0;g<h;++g)l[g].update(i,s)},vo.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Gw.concat(kg)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},(0,T.XW)(vo,Ke,{transform(i,s){this.stamp=s.stamp;const o=i.modified(),l=zh(i.sort),c=$v(i.groupby),h=y=>this.group(c(y));let g=this.state;(!g||o)&&(g=this.state=new Zv(i)),o||s.modified(g.inputs)?(this.value={},s.visit(s.SOURCE,y=>h(y).add(y))):(s.visit(s.REM,y=>h(y).remove(y)),s.visit(s.ADD,y=>h(y).add(y)));for(let y=0,v=this._mlen;y<v;++y)eb(this._mods[y],g,l,i);return this._mlen=0,this._mods=[],s.reflow(o).modifies(g.outputs)},group(i){let s=this.value[i];return s||(s=this.value[i]=Ig(bn),s.stamp=-1),s.stamp<this.stamp&&(s.stamp=this.stamp,this._mods[this._mlen++]=s),s}}),tb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:jg(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,s){switch(i=+i,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,s):this._context.moveTo(i,s);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:jg(this,i,s)}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=s}},zg.prototype={areaStart:Su,areaEnd:Su,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(i,s){switch(i=+i,s=+s,this._point){case 0:this._point=1,this._x2=i,this._y2=s;break;case 1:this._point=2,this._x3=i,this._y3=s;break;case 2:this._point=3,this._x4=i,this._y4=s,this._context.moveTo((this._x0+4*this._x1+i)/6,(this._y0+4*this._y1+s)/6);break;default:jg(this,i,s)}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=s}},xF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,s){switch(i=+i,s=+s,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var o=(this._x0+4*this._x1+i)/6,l=(this._y0+4*this._y1+s)/6;this._line?this._context.lineTo(o,l):this._context.moveTo(o,l);break;case 3:this._point=4;default:jg(this,i,s)}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=s}},Ul.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var i=this._x,s=this._y,o=i.length-1;if(o>0)for(var v,l=i[0],c=s[0],h=i[o]-l,g=s[o]-c,y=-1;++y<=o;)this._basis.point(this._beta*i[y]+(1-this._beta)*(l+(v=y/o)*h),this._beta*s[y]+(1-this._beta)*(c+v*g));this._x=this._y=null,this._basis.lineEnd()},point:function(i,s){this._x.push(+i),this._y.push(+s)}};const Kw=function i(s){function o(l){return 1===s?new tb(l):new Ul(l,s)}return o.beta=function(l){return i(+l)},o}(.85);function np(i,s,o){i._context.bezierCurveTo(i._x1+i._k*(i._x2-i._x0),i._y1+i._k*(i._y2-i._y0),i._x2+i._k*(i._x1-s),i._y2+i._k*(i._y1-o),i._x2,i._y2)}function Qw(i,s){this._context=i,this._k=(1-s)/6}Qw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:np(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,s){switch(i=+i,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,s):this._context.moveTo(i,s);break;case 1:this._point=2,this._x1=i,this._y1=s;break;case 2:this._point=3;default:np(this,i,s)}this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=s}};const SF=function i(s){function o(l){return new Qw(l,s)}return o.tension=function(l){return i(+l)},o}(0);function nb(i,s){this._context=i,this._k=(1-s)/6}nb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,s){switch(i=+i,s=+s,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:np(this,i,s)}this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=s}};const Jw=function i(s){function o(l){return new nb(l,s)}return o.tension=function(l){return i(+l)},o}(0);function Ad(i,s){this._context=i,this._k=(1-s)/6}Ad.prototype={areaStart:Su,areaEnd:Su,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(i,s){switch(i=+i,s=+s,this._point){case 0:this._point=1,this._x3=i,this._y3=s;break;case 1:this._point=2,this._context.moveTo(this._x4=i,this._y4=s);break;case 2:this._point=3,this._x5=i,this._y5=s;break;default:np(this,i,s)}this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=s}};const cA=function i(s){function o(l){return new Ad(l,s)}return o.tension=function(l){return i(+l)},o}(0);var ib=Math.abs,Vo=Math.atan2,pc=Math.cos,AF=Math.max,rb=Math.min,Au=Math.sin,ip=Math.sqrt,fs=1e-12,Md=Math.PI,rp=Md/2,gc=2*Md;function dA(i){return i>1?0:i<-1?Md:Math.acos(i)}function sb(i){return i>=1?rp:i<=-1?-rp:Math.asin(i)}function ob(i,s,o){var l=i._x1,c=i._y1,h=i._x2,g=i._y2;if(i._l01_a>fs){var y=2*i._l01_2a+3*i._l01_a*i._l12_a+i._l12_2a,v=3*i._l01_a*(i._l01_a+i._l12_a);l=(l*y-i._x0*i._l12_2a+i._x2*i._l01_2a)/v,c=(c*y-i._y0*i._l12_2a+i._y2*i._l01_2a)/v}if(i._l23_a>fs){var C=2*i._l23_2a+3*i._l23_a*i._l12_a+i._l12_2a,E=3*i._l23_a*(i._l23_a+i._l12_a);h=(h*C+i._x1*i._l23_2a-s*i._l12_2a)/E,g=(g*C+i._y1*i._l23_2a-o*i._l12_2a)/E}i._context.bezierCurveTo(l,c,h,g,i._x2,i._y2)}function ab(i,s){this._context=i,this._alpha=s}ab.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,s){if(i=+i,s=+s,this._point){var o=this._x2-i,l=this._y2-s;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(o*o+l*l,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(i,s):this._context.moveTo(i,s);break;case 1:this._point=2;break;case 2:this._point=3;default:ob(this,i,s)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=s}};const mc=function i(s){function o(l){return s?new ab(l,s):new Qw(l,0)}return o.alpha=function(l){return i(+l)},o}(.5);function Zw(i,s){this._context=i,this._alpha=s}Zw.prototype={areaStart:Su,areaEnd:Su,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(i,s){if(i=+i,s=+s,this._point){var o=this._x2-i,l=this._y2-s;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(o*o+l*l,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=i,this._y3=s;break;case 1:this._point=2,this._context.moveTo(this._x4=i,this._y4=s);break;case 2:this._point=3,this._x5=i,this._y5=s;break;default:ob(this,i,s)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=s}};const fA=function i(s){function o(l){return s?new Zw(l,s):new Ad(l,0)}return o.alpha=function(l){return i(+l)},o}(.5);function eE(i,s){this._context=i,this._alpha=s}eE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,s){if(i=+i,s=+s,this._point){var o=this._x2-i,l=this._y2-s;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(o*o+l*l,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ob(this,i,s)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=i,this._y0=this._y1,this._y1=this._y2,this._y2=s}};const MF=function i(s){function o(l){return s?new eE(l,s):new nb(l,0)}return o.alpha=function(l){return i(+l)},o}(.5);function tE(i){this._context=i}function sp(i){return new tE(i)}function lb(i){this._context=i}function nE(i){return i<0?-1:1}function ub(i,s,o){var l=i._x1-i._x0,c=s-i._x1,h=(i._y1-i._y0)/(l||c<0&&-0),g=(o-i._y1)/(c||l<0&&-0),y=(h*c+g*l)/(l+c);return(nE(h)+nE(g))*Math.min(Math.abs(h),Math.abs(g),.5*Math.abs(y))||0}function gy(i,s){var o=i._x1-i._x0;return o?(3*(i._y1-i._y0)/o-s)/2:s}function cb(i,s,o){var l=i._x0,h=i._x1,g=i._y1,y=(h-l)/3;i._context.bezierCurveTo(l+y,i._y0+y*s,h-y,g-y*o,h,g)}function my(i){this._context=i}function ul(i){this._context=new iE(i)}function iE(i){this._context=i}function rE(i){this._context=i}function sE(i){var s,l,o=i.length-1,c=new Array(o),h=new Array(o),g=new Array(o);for(c[0]=0,h[0]=2,g[0]=i[0]+2*i[1],s=1;s<o-1;++s)c[s]=1,h[s]=4,g[s]=4*i[s]+2*i[s+1];for(c[o-1]=2,h[o-1]=7,g[o-1]=8*i[o-1]+i[o],s=1;s<o;++s)h[s]-=l=c[s]/h[s-1],g[s]-=l*g[s-1];for(c[o-1]=g[o-1]/h[o-1],s=o-2;s>=0;--s)c[s]=(g[s]-c[s+1])/h[s];for(h[o-1]=(i[o]+c[o-1])/2,s=0;s<o-1;++s)h[s]=2*i[s+1]-c[s+1];return[c,h]}function yy(i,s){this._context=i,this._t=s}tE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,s){switch(i=+i,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,s):this._context.moveTo(i,s);break;case 1:this._point=2;default:this._context.lineTo(i,s)}}},lb.prototype={areaStart:Su,areaEnd:Su,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(i,s){i=+i,s=+s,this._point?this._context.lineTo(i,s):(this._point=1,this._context.moveTo(i,s))}},my.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:cb(this,this._t0,gy(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(i,s){var o=NaN;if(s=+s,(i=+i)!==this._x1||s!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(i,s):this._context.moveTo(i,s);break;case 1:this._point=2;break;case 2:this._point=3,cb(this,gy(this,o=ub(this,i,s)),o);break;default:cb(this,this._t0,o=ub(this,i,s))}this._x0=this._x1,this._x1=i,this._y0=this._y1,this._y1=s,this._t0=o}}},(ul.prototype=Object.create(my.prototype)).point=function(i,s){my.prototype.point.call(this,s,i)},iE.prototype={moveTo:function(i,s){this._context.moveTo(s,i)},closePath:function(){this._context.closePath()},lineTo:function(i,s){this._context.lineTo(s,i)},bezierCurveTo:function(i,s,o,l,c,h){this._context.bezierCurveTo(s,i,l,o,h,c)}},rE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var i=this._x,s=this._y,o=i.length;if(o)if(this._line?this._context.lineTo(i[0],s[0]):this._context.moveTo(i[0],s[0]),2===o)this._context.lineTo(i[1],s[1]);else for(var l=sE(i),c=sE(s),h=0,g=1;g<o;++h,++g)this._context.bezierCurveTo(l[0][h],c[0][h],l[1][h],c[1][h],i[g],s[g]);(this._line||0!==this._line&&1===o)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(i,s){this._x.push(+i),this._y.push(+s)}},yy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(i,s){switch(i=+i,s=+s,this._point){case 0:this._point=1,this._line?this._context.lineTo(i,s):this._context.moveTo(i,s);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,s),this._context.lineTo(i,s);else{var o=this._x*(1-this._t)+i*this._t;this._context.lineTo(o,this._y),this._context.lineTo(o,s)}}this._x=i,this._y=s}};const ei=Math.PI,mt=2*ei,Lf=1e-6,db=mt-Lf;function cl(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function aE(){return new cl}cl.prototype=aE.prototype={constructor:cl,moveTo:function(i,s){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+s)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(i,s){this._+="L"+(this._x1=+i)+","+(this._y1=+s)},quadraticCurveTo:function(i,s,o,l){this._+="Q"+ +i+","+ +s+","+(this._x1=+o)+","+(this._y1=+l)},bezierCurveTo:function(i,s,o,l,c,h){this._+="C"+ +i+","+ +s+","+ +o+","+ +l+","+(this._x1=+c)+","+(this._y1=+h)},arcTo:function(i,s,o,l,c){var h=this._x1,g=this._y1,y=(o=+o)-(i=+i),v=(l=+l)-(s=+s),C=h-i,E=g-s,x=C*C+E*E;if((c=+c)<0)throw new Error("negative radius: "+c);if(null===this._x1)this._+="M"+(this._x1=i)+","+(this._y1=s);else if(x>Lf)if(Math.abs(E*y-v*C)>Lf&&c){var S=o-h,k=l-g,R=y*y+v*v,N=S*S+k*k,P=Math.sqrt(R),z=Math.sqrt(x),H=c*Math.tan((ei-Math.acos((R+x-N)/(2*P*z)))/2),X=H/z,J=H/P;Math.abs(X-1)>Lf&&(this._+="L"+(i+X*C)+","+(s+X*E)),this._+="A"+c+","+c+",0,0,"+ +(E*S>C*k)+","+(this._x1=i+J*y)+","+(this._y1=s+J*v)}else this._+="L"+(this._x1=i)+","+(this._y1=s)},arc:function(i,s,o,l,c,h){i=+i,s=+s,h=!!h;var g=(o=+o)*Math.cos(l),y=o*Math.sin(l),v=i+g,C=s+y,E=1^h,x=h?l-c:c-l;if(o<0)throw new Error("negative radius: "+o);null===this._x1?this._+="M"+v+","+C:(Math.abs(this._x1-v)>Lf||Math.abs(this._y1-C)>Lf)&&(this._+="L"+v+","+C),o&&(x<0&&(x=x%mt+mt),x>db?this._+="A"+o+","+o+",0,1,"+E+","+(i-g)+","+(s-y)+"A"+o+","+o+",0,1,"+E+","+(this._x1=v)+","+(this._y1=C):x>Lf&&(this._+="A"+o+","+o+",0,"+ +(x>=ei)+","+E+","+(this._x1=i+o*Math.cos(c))+","+(this._y1=s+o*Math.sin(c))))},rect:function(i,s,o,l){this._+="M"+(this._x0=this._x1=+i)+","+(this._y0=this._y1=+s)+"h"+ +o+"v"+ +l+"h"+-o+"Z"},toString:function(){return this._}};const Ug=aE;function zi(i){return function(){return i}}function Od(i){return i.innerRadius}function lE(i){return i.outerRadius}function uE(i){return i.startAngle}function cE(i){return i.endAngle}function CL(i){return i&&i.padAngle}function gA(i,s,o,l,c,h,g,y){var v=o-i,C=l-s,E=g-c,x=y-h,S=x*v-E*C;if(!(S*S<fs))return[i+(S=(E*(s-h)-x*(i-c))/S)*v,s+S*C]}function dE(i,s,o,l,c,h,g){var y=i-o,v=s-l,C=(g?h:-h)/ip(y*y+v*v),E=C*v,x=-C*y,S=i+E,k=s+x,R=o+E,N=l+x,P=(S+R)/2,z=(k+N)/2,H=R-S,X=N-k,J=H*H+X*X,oe=c-h,fe=S*N-R*k,te=(X<0?-1:1)*ip(AF(0,oe*oe*J-fe*fe)),Re=(fe*X-H*te)/J,ze=(-fe*H-X*te)/J,Fe=(fe*X+H*te)/J,Oe=(-fe*H+X*te)/J,tt=Re-P,et=ze-z,Ot=Fe-P,Xe=Oe-z;return tt*tt+et*et>Ot*Ot+Xe*Xe&&(Re=Fe,ze=Oe),{cx:Re,cy:ze,x01:-E,y01:-x,x11:Re*(c/oe-1),y11:ze*(c/oe-1)}}function _y(i){return"object"==typeof i&&"length"in i?i:Array.from(i)}function vy(i){return i[0]}function mA(i){return i[1]}function hE(i,s){var o=zi(!0),l=null,c=sp,h=null;function g(y){var v,E,S,C=(y=_y(y)).length,x=!1;for(null==l&&(h=c(S=Ug())),v=0;v<=C;++v)!(v<C&&o(E=y[v],v,y))===x&&((x=!x)?h.lineStart():h.lineEnd()),x&&h.point(+i(E,v,y),+s(E,v,y));if(S)return h=null,S+""||null}return i="function"==typeof i?i:void 0===i?vy:zi(i),s="function"==typeof s?s:void 0===s?mA:zi(s),g.x=function(y){return arguments.length?(i="function"==typeof y?y:zi(+y),g):i},g.y=function(y){return arguments.length?(s="function"==typeof y?y:zi(+y),g):s},g.defined=function(y){return arguments.length?(o="function"==typeof y?y:zi(!!y),g):o},g.curve=function(y){return arguments.length?(c=y,null!=l&&(h=c(l)),g):c},g.context=function(y){return arguments.length?(null==y?l=h=null:h=c(l=y),g):l},g}function by(i,s,o){var l=null,c=zi(!0),h=null,g=sp,y=null;function v(E){var x,S,k,N,z,R=(E=_y(E)).length,P=!1,H=new Array(R),X=new Array(R);for(null==h&&(y=g(z=Ug())),x=0;x<=R;++x){if(!(x<R&&c(N=E[x],x,E))===P)if(P=!P)S=x,y.areaStart(),y.lineStart();else{for(y.lineEnd(),y.lineStart(),k=x-1;k>=S;--k)y.point(H[k],X[k]);y.lineEnd(),y.areaEnd()}P&&(H[x]=+i(N,x,E),X[x]=+s(N,x,E),y.point(l?+l(N,x,E):H[x],o?+o(N,x,E):X[x]))}if(z)return y=null,z+""||null}function C(){return hE().defined(c).curve(g).context(h)}return i="function"==typeof i?i:void 0===i?vy:zi(+i),s="function"==typeof s?s:zi(void 0===s?0:+s),o="function"==typeof o?o:void 0===o?mA:zi(+o),v.x=function(E){return arguments.length?(i="function"==typeof E?E:zi(+E),l=null,v):i},v.x0=function(E){return arguments.length?(i="function"==typeof E?E:zi(+E),v):i},v.x1=function(E){return arguments.length?(l=null==E?null:"function"==typeof E?E:zi(+E),v):l},v.y=function(E){return arguments.length?(s="function"==typeof E?E:zi(+E),o=null,v):s},v.y0=function(E){return arguments.length?(s="function"==typeof E?E:zi(+E),v):s},v.y1=function(E){return arguments.length?(o=null==E?null:"function"==typeof E?E:zi(+E),v):o},v.lineX0=v.lineY0=function(){return C().x(i).y(s)},v.lineY1=function(){return C().x(i).y(o)},v.lineX1=function(){return C().x(l).y(s)},v.defined=function(E){return arguments.length?(c="function"==typeof E?E:zi(!!E),v):c},v.curve=function(E){return arguments.length?(g=E,null!=h&&(y=g(h)),v):g},v.context=function(E){return arguments.length?(null==E?h=y=null:y=g(h=E),v):h},v}const pE={draw:function(i,s){var o=Math.sqrt(s/Md);i.moveTo(o,0),i.arc(0,0,o,0,gc)}};Math.sqrt(1/3);Math.sin(Md/10),Math.sin(7*Md/10);function op(i,s){if("undefined"!=typeof document&&document.createElement){const o=document.createElement("canvas");if(o&&o.getContext)return o.width=i,o.height=s,o}return null}Math.sin(gc/10),Math.cos(gc/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12);const Hg=ad(sv),ir=Hg.right,yE=Hg.left,la=(ad(Of),ir);function Hl(i,s){switch(arguments.length){case 0:break;case 1:this.range(i);break;default:this.range(s).domain(i)}return this}function kd(i,s){switch(arguments.length){case 0:break;case 1:"function"==typeof i?this.interpolator(i):this.range(i);break;default:this.domain(i),"function"==typeof s?this.interpolator(s):this.range(s)}return this}const wA=Symbol("implicit");function Wg(){var i=new Map,s=[],o=[],l=wA;function c(h){var g=h+"",y=i.get(g);if(!y){if(l!==wA)return l;i.set(g,y=s.push(h))}return o[(y-1)%o.length]}return c.domain=function(h){if(!arguments.length)return s.slice();s=[],i=new Map;for(const g of h){const y=g+"";i.has(y)||i.set(y,s.push(g))}return c},c.range=function(h){return arguments.length?(o=Array.from(h),c):o.slice()},c.unknown=function(h){return arguments.length?(l=h,c):l},c.copy=function(){return Wg(s,o).unknown(l)},Hl.apply(c,arguments),c}function EA(i,s,o,l){var h,c=At(i,s,o);switch((l=$t(null==l?",f":l)).type){case"s":var g=Math.max(Math.abs(i),Math.abs(s));return null==l.precision&&!isNaN(h=Gn(c,g))&&(l.precision=h),Ii(l,g);case"":case"e":case"g":case"p":case"r":null==l.precision&&!isNaN(h=jn(c,Math.max(Math.abs(i),Math.abs(s))))&&(l.precision=h-("e"===l.type));break;case"f":case"%":null==l.precision&&!isNaN(h=Xi(c))&&(l.precision=h-2*("%"===l.type))}return ea(l)}function ap(i,s,o){i.prototype=s.prototype=o,o.constructor=i}function wy(i,s){var o=Object.create(i.prototype);for(var l in s)o[l]=s[l];return o}function jf(){}var Gl=1/.7,dl="\\s*([+-]?\\d+)\\s*",_c="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qs="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lp=/^#([0-9a-f]{3,8})$/,vE=new RegExp("^rgb\\("+[dl,dl,dl]+"\\)$"),DA=new RegExp("^rgb\\("+[Qs,Qs,Qs]+"\\)$"),xA=new RegExp("^rgba\\("+[dl,dl,dl,_c]+"\\)$"),bE=new RegExp("^rgba\\("+[Qs,Qs,Qs,_c]+"\\)$"),zf=new RegExp("^hsl\\("+[_c,Qs,Qs]+"\\)$"),SA=new RegExp("^hsla\\("+[_c,Qs,Qs,_c]+"\\)$"),Ey={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function AA(){return this.rgb().formatHex()}function OA(){return this.rgb().formatRgb()}function Gg(i){var s,o;return i=(i+"").trim().toLowerCase(),(s=lp.exec(i))?(o=s[1].length,s=parseInt(s[1],16),6===o?CE(s):3===o?new xr(s>>8&15|s>>4&240,s>>4&15|240&s,(15&s)<<4|15&s,1):8===o?qg(s>>24&255,s>>16&255,s>>8&255,(255&s)/255):4===o?qg(s>>12&15|s>>8&240,s>>8&15|s>>4&240,s>>4&15|240&s,((15&s)<<4|15&s)/255):null):(s=vE.exec(i))?new xr(s[1],s[2],s[3],1):(s=DA.exec(i))?new xr(255*s[1]/100,255*s[2]/100,255*s[3]/100,1):(s=xA.exec(i))?qg(s[1],s[2],s[3],s[4]):(s=bE.exec(i))?qg(255*s[1]/100,255*s[2]/100,255*s[3]/100,s[4]):(s=zf.exec(i))?Uf(s[1],s[2]/100,s[3]/100,1):(s=SA.exec(i))?Uf(s[1],s[2]/100,s[3]/100,s[4]):Ey.hasOwnProperty(i)?CE(Ey[i]):"transparent"===i?new xr(NaN,NaN,NaN,0):null}function CE(i){return new xr(i>>16&255,i>>8&255,255&i,1)}function qg(i,s,o,l){return l<=0&&(i=s=o=NaN),new xr(i,s,o,l)}function Zi(i){return i instanceof jf||(i=Gg(i)),i?new xr((i=i.rgb()).r,i.g,i.b,i.opacity):new xr}function ts(i,s,o,l){return 1===arguments.length?Zi(i):new xr(i,s,o,null==l?1:l)}function xr(i,s,o,l){this.r=+i,this.g=+s,this.b=+o,this.opacity=+l}function Js(){return"#"+wE(this.r)+wE(this.g)+wE(this.b)}function TA(){var i=this.opacity;return(1===(i=isNaN(i)?1:Math.max(0,Math.min(1,i)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===i?")":", "+i+")")}function wE(i){return((i=Math.max(0,Math.min(255,Math.round(i)||0)))<16?"0":"")+i.toString(16)}function Uf(i,s,o,l){return l<=0?i=s=o=NaN:o<=0||o>=1?i=s=NaN:s<=0&&(i=NaN),new ka(i,s,o,l)}function EE(i){if(i instanceof ka)return new ka(i.h,i.s,i.l,i.opacity);if(i instanceof jf||(i=Gg(i)),!i)return new ka;if(i instanceof ka)return i;var s=(i=i.rgb()).r/255,o=i.g/255,l=i.b/255,c=Math.min(s,o,l),h=Math.max(s,o,l),g=NaN,y=h-c,v=(h+c)/2;return y?(g=s===h?(o-l)/y+6*(o<l):o===h?(l-s)/y+2:(s-o)/y+4,y/=v<.5?h+c:2-h-c,g*=60):y=v>0&&v<1?0:g,new ka(g,y,v,i.opacity)}function Yg(i,s,o,l){return 1===arguments.length?EE(i):new ka(i,s,o,null==l?1:l)}function ka(i,s,o,l){this.h=+i,this.s=+s,this.l=+o,this.opacity=+l}function Dy(i,s,o){return 255*(i<60?s+(o-s)*i/60:i<180?o:i<240?s+(o-s)*(240-i)/60:s)}function hb(i,s,o,l,c){var h=i*i,g=h*i;return((1-3*i+3*h-g)*s+(4-6*h+3*g)*o+(1+3*i+3*h-3*g)*l+g*c)/6}function DE(i){var s=i.length-1;return function(o){var l=o<=0?o=0:o>=1?(o=1,s-1):Math.floor(o*s),c=i[l],h=i[l+1];return hb((o-l/s)*s,l>0?i[l-1]:2*c-h,c,h,l<s-1?i[l+2]:2*h-c)}}function xE(i){var s=i.length;return function(o){var l=Math.floor(((o%=1)<0?++o:o)*s);return hb((o-l/s)*s,i[(l+s-1)%s],i[l%s],i[(l+1)%s],i[(l+2)%s])}}ap(jf,Gg,{copy:function(i){return Object.assign(new this.constructor,this,i)},displayable:function(){return this.rgb().displayable()},hex:AA,formatHex:AA,formatHsl:function(){return EE(this).formatHsl()},formatRgb:OA,toString:OA}),ap(xr,ts,wy(jf,{brighter:function(i){return i=null==i?Gl:Math.pow(Gl,i),new xr(this.r*i,this.g*i,this.b*i,this.opacity)},darker:function(i){return i=null==i?.7:Math.pow(.7,i),new xr(this.r*i,this.g*i,this.b*i,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Js,formatHex:Js,formatRgb:TA,toString:TA})),ap(ka,Yg,wy(jf,{brighter:function(i){return i=null==i?Gl:Math.pow(Gl,i),new ka(this.h,this.s,this.l*i,this.opacity)},darker:function(i){return i=null==i?.7:Math.pow(.7,i),new ka(this.h,this.s,this.l*i,this.opacity)},rgb:function(){var i=this.h%360+360*(this.h<0),s=isNaN(i)||isNaN(this.s)?0:this.s,o=this.l,l=o+(o<.5?o:1-o)*s,c=2*o-l;return new xr(Dy(i>=240?i-240:i+120,c,l),Dy(i,c,l),Dy(i<120?i+240:i-120,c,l),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var i=this.opacity;return(1===(i=isNaN(i)?1:Math.max(0,Math.min(1,i)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===i?")":", "+i+")")}}));const pb=i=>()=>i;function up(i,s){return function(o){return i+o*s}}function cp(i,s){var o=s-i;return o?up(i,o>180||o<-180?o-360*Math.round(o/360):o):pb(isNaN(i)?s:i)}function Ns(i,s){var o=s-i;return o?up(i,o):pb(isNaN(i)?s:i)}const mb=function i(s){var o=function(i){return 1==(i=+i)?Ns:function(s,o){return o-s?function(i,s,o){return i=Math.pow(i,o),s=Math.pow(s,o)-i,o=1/o,function(l){return Math.pow(i+l*s,o)}}(s,o,i):pb(isNaN(s)?o:s)}}(s);function l(c,h){var g=o((c=ts(c)).r,(h=ts(h)).r),y=o(c.g,h.g),v=o(c.b,h.b),C=Ns(c.opacity,h.opacity);return function(E){return c.r=g(E),c.g=y(E),c.b=v(E),c.opacity=C(E),c+""}}return l.gamma=i,l}(1);function AE(i){return function(s){var g,y,o=s.length,l=new Array(o),c=new Array(o),h=new Array(o);for(g=0;g<o;++g)y=ts(s[g]),l[g]=y.r||0,c[g]=y.g||0,h[g]=y.b||0;return l=i(l),c=i(c),h=i(h),y.opacity=1,function(v){return y.r=l(v),y.g=c(v),y.b=h(v),y+""}}}var kA=AE(DE),NF=AE(xE);function ur(i,s){s||(s=[]);var c,o=i?Math.min(s.length,i.length):0,l=s.slice();return function(h){for(c=0;c<o;++c)l[c]=i[c]*(1-h)+s[c]*h;return l}}function xy(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function PF(i,s){return(xy(s)?ur:Xg)(i,s)}function Xg(i,s){var g,o=s?s.length:0,l=i?Math.min(o,i.length):0,c=new Array(l),h=new Array(o);for(g=0;g<l;++g)c[g]=Mu(i[g],s[g]);for(;g<o;++g)h[g]=s[g];return function(y){for(g=0;g<l;++g)h[g]=c[g](y);return h}}function $o(i,s){var o=new Date;return i=+i,s=+s,function(l){return o.setTime(i*(1-l)+s*l),o}}function ql(i,s){return i=+i,s=+s,function(o){return i*(1-o)+s*o}}function yb(i,s){var c,o={},l={};for(c in(null===i||"object"!=typeof i)&&(i={}),(null===s||"object"!=typeof s)&&(s={}),s)c in i?o[c]=Mu(i[c],s[c]):l[c]=s[c];return function(h){for(c in o)l[c]=o[c](h);return l}}var ME=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,OE=new RegExp(ME.source,"g");function TE(i,s){var l,c,h,o=ME.lastIndex=OE.lastIndex=0,g=-1,y=[],v=[];for(i+="",s+="";(l=ME.exec(i))&&(c=OE.exec(s));)(h=c.index)>o&&(h=s.slice(o,h),y[g]?y[g]+=h:y[++g]=h),(l=l[0])===(c=c[0])?y[g]?y[g]+=c:y[++g]=c:(y[++g]=null,v.push({i:g,x:ql(l,c)})),o=OE.lastIndex;return o<s.length&&(h=s.slice(o),y[g]?y[g]+=h:y[++g]=h),y.length<2?v[0]?function(i){return function(s){return i(s)+""}}(v[0].x):function(i){return function(){return i}}(s):(s=v.length,function(C){for(var x,E=0;E<s;++E)y[(x=v[E]).i]=x.x(C);return y.join("")})}function Mu(i,s){var l,o=typeof s;return null==s||"boolean"===o?pb(s):("number"===o?ql:"string"===o?(l=Gg(s))?(s=l,mb):TE:s instanceof Gg?mb:s instanceof Date?$o:xy(s)?ur:Array.isArray(s)?Xg:"function"!=typeof s.valueOf&&"function"!=typeof s.toString||isNaN(s)?yb:ql)(i,s)}function dp(i,s){return i=+i,s=+s,function(o){return Math.round(i*(1-o)+s*o)}}function Yl(i){return+i}var Cb=[0,1];function ua(i){return i}function fp(i,s){return(s-=i=+i)?function(o){return(o-i)/s}:function(i){return function(){return i}}(isNaN(s)?NaN:.5)}function wb(i,s,o){var l=i[0],c=i[1],h=s[0],g=s[1];return c<l?(l=fp(c,l),h=o(g,h)):(l=fp(l,c),h=o(h,g)),function(y){return h(l(y))}}function EL(i,s,o){var l=Math.min(i.length,s.length)-1,c=new Array(l),h=new Array(l),g=-1;for(i[l]<i[0]&&(i=i.slice().reverse(),s=s.slice().reverse());++g<l;)c[g]=fp(i[g],i[g+1]),h[g]=o(s[g],s[g+1]);return function(y){var v=la(i,y,1,l)-1;return h[v](c[v](y))}}function jo(i,s){return s.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp()).unknown(i.unknown())}function Kg(){var l,c,h,y,v,C,i=Cb,s=Cb,o=Mu,g=ua;function E(){var S=Math.min(i.length,s.length);return g!==ua&&(g=function(i,s){var o;return i>s&&(o=i,i=s,s=o),function(l){return Math.max(i,Math.min(s,l))}}(i[0],i[S-1])),y=S>2?EL:wb,v=C=null,x}function x(S){return null==S||isNaN(S=+S)?h:(v||(v=y(i.map(l),s,o)))(l(g(S)))}return x.invert=function(S){return g(c((C||(C=y(s,i.map(l),ql)))(S)))},x.domain=function(S){return arguments.length?(i=Array.from(S,Yl),E()):i.slice()},x.range=function(S){return arguments.length?(s=Array.from(S),E()):s.slice()},x.rangeRound=function(S){return s=Array.from(S),o=dp,E()},x.clamp=function(S){return arguments.length?(g=!!S||ua,E()):g!==ua},x.interpolate=function(S){return arguments.length?(o=S,E()):o},x.unknown=function(S){return arguments.length?(h=S,x):h},function(S,k){return l=S,c=k,E()}}function kE(){return Kg()(ua,ua)}function Hf(i){var s=i.domain;return i.ticks=function(o){var l=s();return sn(l[0],l[l.length-1],null==o?10:o)},i.tickFormat=function(o,l){var c=s();return EA(c[0],c[c.length-1],null==o?10:o,l)},i.nice=function(o){null==o&&(o=10);var v,C,l=s(),c=0,h=l.length-1,g=l[c],y=l[h],E=10;for(y<g&&(C=g,g=y,y=C,C=c,c=h,h=C);E-- >0;){if((C=Yi(g,y,o))===v)return l[c]=g,l[h]=y,s(l);if(C>0)g=Math.floor(g/C)*C,y=Math.ceil(y/C)*C;else{if(!(C<0))break;g=Math.ceil(g*C)/C,y=Math.floor(y*C)/C}v=C}return i},i}function Ou(i,s){var g,o=0,l=(i=i.slice()).length-1,c=i[o],h=i[l];return h<c&&(g=o,o=l,l=g,g=c,c=h,h=g),i[o]=s.floor(c),i[l]=s.ceil(h),i}function hp(i){return Math.log(i)}function IE(i){return Math.exp(i)}function FA(i){return-Math.log(-i)}function RE(i){return-Math.exp(-i)}function pp(i){return isFinite(i)?+("1e"+i):i<0?0:i}function Jg(i){return function(s){return-i(-s)}}function Eb(i){var c,h,s=i(hp,IE),o=s.domain,l=10;function g(){return c=function(i){return i===Math.E?Math.log:10===i&&Math.log10||2===i&&Math.log2||(i=Math.log(i),function(s){return Math.log(s)/i})}(l),h=function(i){return 10===i?pp:i===Math.E?Math.exp:function(s){return Math.pow(i,s)}}(l),o()[0]<0?(c=Jg(c),h=Jg(h),i(FA,RE)):i(hp,IE),s}return s.base=function(y){return arguments.length?(l=+y,g()):l},s.domain=function(y){return arguments.length?(o(y),g()):o()},s.ticks=function(y){var x,v=o(),C=v[0],E=v[v.length-1];(x=E<C)&&(S=C,C=E,E=S);var R,N,P,S=c(C),k=c(E),z=null==y?10:+y,H=[];if(!(l%1)&&k-S<z){if(S=Math.floor(S),k=Math.ceil(k),C>0){for(;S<=k;++S)for(N=1,R=h(S);N<l;++N)if(!((P=R*N)<C)){if(P>E)break;H.push(P)}}else for(;S<=k;++S)for(N=l-1,R=h(S);N>=1;--N)if(!((P=R*N)<C)){if(P>E)break;H.push(P)}2*H.length<z&&(H=sn(C,E,z))}else H=sn(S,k,Math.min(k-S,z)).map(h);return x?H.reverse():H},s.tickFormat=function(y,v){if(null==v&&(v=10===l?".0e":","),"function"!=typeof v&&(v=ea(v)),y===1/0)return v;null==y&&(y=10);var C=Math.max(1,l*y/s.ticks().length);return function(E){var x=E/h(Math.round(c(E)));return x*l<l-.5&&(x*=l),x<=C?v(E):""}},s.nice=function(){return o(Ou(o(),{floor:function(y){return h(Math.floor(c(y)))},ceil:function(y){return h(Math.ceil(c(y)))}}))},s}function NE(i){return function(s){return s<0?-Math.pow(-s,i):Math.pow(s,i)}}function RA(i){return i<0?-Math.sqrt(-i):Math.sqrt(i)}function PE(i){return i<0?-i*i:i*i}function Db(i){var s=i(ua,ua),o=1;function l(){return 1===o?i(ua,ua):.5===o?i(RA,PE):i(NE(o),NE(1/o))}return s.exponent=function(c){return arguments.length?(o=+c,l()):o},Hf(s)}function My(){var i=Db(Kg());return i.copy=function(){return jo(i,My()).exponent(i.exponent())},Hl.apply(i,arguments),i}function Wf(i){return function(s){return Math.sign(s)*Math.log1p(Math.abs(s/i))}}function vc(i){return function(s){return Math.sign(s)*Math.expm1(Math.abs(s))*i}}function Gf(i){var s=1,o=i(Wf(s),vc(s));return o.constant=function(l){return arguments.length?i(Wf(s=+l),vc(s)):s},Hf(o)}function Oy(i,s,o,l,c,h){const g=[[xn,1,uo],[xn,5,5e3],[xn,15,15e3],[xn,30,3e4],[h,1,us],[h,5,5*us],[h,15,15*us],[h,30,30*us],[c,1,_a],[c,3,3*_a],[c,6,6*_a],[c,12,12*_a],[l,1,Os],[l,2,2*Os],[o,1,mu],[s,1,Qa],[s,3,3*Qa],[i,1,Fl]];function v(C,E,x){const S=Math.abs(E-C)/x,k=ad(([,,P])=>P).right(g,S);if(k===g.length)return i.every(At(C/Fl,E/Fl,x));if(0===k)return sd.every(Math.max(At(C,E,x),1));const[R,N]=g[S/g[k-1][2]<g[k][2]/S?k-1:k];return R.every(N)}return[function(C,E,x){const S=E<C;S&&([C,E]=[E,C]);const k=x&&"function"==typeof x.range?x:v(C,E,x),R=k?k.range(C,+E+1):[];return S?R.reverse():R},v]}const[BF,Tu]=Oy(na,rv,Qt,ge,yu,Qi),[LE,PA]=Oy(ot,Rl,Ue,Ln,iv,x0);function VF(i){return new Date(i)}function $F(i){return i instanceof Date?+i:+new Date(+i)}function LA(i,s,o,l,c,h,g,y,v,C){var E=kE(),x=E.invert,S=E.domain,k=C(".%L"),R=C(":%S"),N=C("%I:%M"),P=C("%I %p"),z=C("%a %d"),H=C("%b %d"),X=C("%B"),J=C("%Y");function oe(fe){return(v(fe)<fe?k:y(fe)<fe?R:g(fe)<fe?N:h(fe)<fe?P:l(fe)<fe?c(fe)<fe?z:H:o(fe)<fe?X:J)(fe)}return E.invert=function(fe){return new Date(x(fe))},E.domain=function(fe){return arguments.length?S(Array.from(fe,$F)):S().map(VF)},E.ticks=function(fe){var te=S();return i(te[0],te[te.length-1],null==fe?10:fe)},E.tickFormat=function(fe,te){return null==te?oe:C(te)},E.nice=function(fe){var te=S();return(!fe||"function"!=typeof fe.range)&&(fe=s(te[0],te[te.length-1],null==fe?10:fe)),fe?S(Ou(te,fe)):E},E.copy=function(){return jo(E,LA(i,s,o,l,c,h,g,y,v,C))},E}function ai(){var o,l,c,h,v,i=0,s=1,g=ua,y=!1;function C(x){return null==x||isNaN(x=+x)?v:g(0===c?.5:(x=(h(x)-o)*c,y?Math.max(0,Math.min(1,x)):x))}function E(x){return function(S){var k,R;return arguments.length?([k,R]=S,g=x(k,R),C):[g(0),g(1)]}}return C.domain=function(x){return arguments.length?([i,s]=x,o=h(i=+i),l=h(s=+s),c=o===l?0:1/(l-o),C):[i,s]},C.clamp=function(x){return arguments.length?(y=!!x,C):y},C.interpolator=function(x){return arguments.length?(g=x,C):g},C.range=E(Mu),C.rangeRound=E(dp),C.unknown=function(x){return arguments.length?(v=x,C):v},function(x){return h=x,o=x(i),l=x(s),c=o===l?0:1/(l-o),C}}function bc(i,s){return s.domain(i.domain()).interpolator(i.interpolator()).clamp(i.clamp()).unknown(i.unknown())}function VA(){var i=Hf(ai()(ua));return i.copy=function(){return bc(i,VA())},kd.apply(i,arguments)}function Ty(){var i=Db(ai());return i.copy=function(){return bc(i,Ty()).exponent(i.exponent())},kd.apply(i,arguments)}function fl(i,s){void 0===s&&(s=i,i=Mu);for(var o=0,l=s.length-1,c=s[0],h=new Array(l<0?0:l);o<l;)h[o]=i(c,c=s[++o]);return function(g){var y=Math.max(0,Math.min(l-1,Math.floor(g*=l)));return h[y](g-y)}}function Ab(){var c,h,g,y,v,E,S,i=0,s=.5,o=1,l=1,C=ua,x=!1;function k(N){return isNaN(N=+N)?S:(N=.5+((N=+E(N))-h)*(l*N<l*h?y:v),C(x?Math.max(0,Math.min(1,N)):N))}function R(N){return function(P){var z,H,X;return arguments.length?([z,H,X]=P,C=fl(N,[z,H,X]),k):[C(0),C(.5),C(1)]}}return k.domain=function(N){return arguments.length?([i,s,o]=N,c=E(i=+i),h=E(s=+s),g=E(o=+o),y=c===h?0:.5/(h-c),v=h===g?0:.5/(g-h),l=h<c?-1:1,k):[i,s,o]},k.clamp=function(N){return arguments.length?(x=!!N,k):x},k.interpolator=function(N){return arguments.length?(C=N,k):C},k.range=R(Mu),k.rangeRound=R(dp),k.unknown=function(N){return arguments.length?(S=N,k):S},function(N){return E=N,c=N(i),h=N(s),g=N(o),y=c===h?0:.5/(h-c),v=h===g?0:.5/(g-h),l=h<c?-1:1,k}}function Ps(){var i=Db(Ab());return i.copy=function(){return bc(i,Ps()).exponent(i.exponent())},kd.apply(i,arguments)}function Fd(i){var s=i.length;return function(o){return i[Math.max(0,Math.min(s-1,Math.floor(o*s)))]}}function Fy(i,s){var o=cp(+i,+s);return function(l){var c=o(l);return c-360*Math.floor(c/360)}}var Mb,Id=180/Math.PI,bo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Zg(i,s,o,l,c,h){var g,y,v;return(g=Math.sqrt(i*i+s*s))&&(i/=g,s/=g),(v=i*o+s*l)&&(o-=i*v,l-=s*v),(y=Math.sqrt(o*o+l*l))&&(o/=y,l/=y,v/=y),i*l<s*o&&(i=-i,s=-s,v=-v,g=-g),{translateX:c,translateY:h,rotate:Math.atan2(s,i)*Id,skewX:Math.atan(v)*Id,scaleX:g,scaleY:y}}function BE(i,s,o,l){function c(C){return C.length?C.pop()+" ":""}return function(C,E){var x=[],S=[];return C=i(C),E=i(E),function(C,E,x,S,k,R){if(C!==x||E!==S){var N=k.push("translate(",null,s,null,o);R.push({i:N-4,x:ql(C,x)},{i:N-2,x:ql(E,S)})}else(x||S)&&k.push("translate("+x+s+S+o)}(C.translateX,C.translateY,E.translateX,E.translateY,x,S),function(C,E,x,S){C!==E?(C-E>180?E+=360:E-C>180&&(C+=360),S.push({i:x.push(c(x)+"rotate(",null,l)-2,x:ql(C,E)})):E&&x.push(c(x)+"rotate("+E+l)}(C.rotate,E.rotate,x,S),function(C,E,x,S){C!==E?S.push({i:x.push(c(x)+"skewX(",null,l)-2,x:ql(C,E)}):E&&x.push(c(x)+"skewX("+E+l)}(C.skewX,E.skewX,x,S),function(C,E,x,S,k,R){if(C!==x||E!==S){var N=k.push(c(k)+"scale(",null,",",null,")");R.push({i:N-4,x:ql(C,x)},{i:N-2,x:ql(E,S)})}else(1!==x||1!==S)&&k.push(c(k)+"scale("+x+","+S+")")}(C.scaleX,C.scaleY,E.scaleX,E.scaleY,x,S),C=E=null,function(k){for(var P,R=-1,N=S.length;++R<N;)x[(P=S[R]).i]=P.x(k);return x.join("")}}}var xL=BE(function(i){const s=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(i+"");return s.isIdentity?bo:Zg(s.a,s.b,s.c,s.d,s.e,s.f)},"px, ","px)","deg)"),VE=BE(function(i){return null!=i&&(Mb||(Mb=document.createElementNS("http://www.w3.org/2000/svg","g")),Mb.setAttribute("transform",i),i=Mb.transform.baseVal.consolidate())?Zg((i=i.matrix).a,i.b,i.c,i.d,i.e,i.f):bo},", ",")",")");function $A(i){return((i=Math.exp(i))+1/i)/2}const $E=function i(s,o,l){function c(h,g){var P,z,y=h[0],v=h[1],C=h[2],S=g[2],k=g[0]-y,R=g[1]-v,N=k*k+R*R;if(N<1e-12)z=Math.log(S/C)/s,P=function(te){return[y+te*k,v+te*R,C*Math.exp(s*te*z)]};else{var H=Math.sqrt(N),X=(S*S-C*C+l*N)/(2*C*o*H),J=(S*S-C*C-l*N)/(2*S*o*H),oe=Math.log(Math.sqrt(X*X+1)-X),fe=Math.log(Math.sqrt(J*J+1)-J);z=(fe-oe)/s,P=function(te){var Re=te*z,ze=$A(oe),Fe=C/(o*H)*(ze*function(i){return((i=Math.exp(2*i))-1)/(i+1)}(s*Re+oe)-function(i){return((i=Math.exp(i))-1/i)/2}(oe));return[y+Fe*k,v+Fe*R,C*ze/$A(s*Re+oe)]}}return P.duration=1e3*z*s/Math.SQRT2,P}return c.rho=function(h){var g=Math.max(.001,+h),y=g*g;return i(g,y,y*y)},c}(Math.SQRT2,2,4);function jA(i){return function(s,o){var l=i((s=Yg(s)).h,(o=Yg(o)).h),c=Ns(s.s,o.s),h=Ns(s.l,o.l),g=Ns(s.opacity,o.opacity);return function(y){return s.h=l(y),s.s=c(y),s.l=h(y),s.opacity=g(y),s+""}}}const Ls=jA(cp);var zA=jA(Ns);const WF=Math.PI/180,Kl=180/Math.PI,Ob=4/29,gp=6/29,Zs=3*gp*gp;function UE(i){if(i instanceof hs)return new hs(i.l,i.a,i.b,i.opacity);if(i instanceof zo)return Ny(i);i instanceof xr||(i=Zi(i));var h,g,s=_p(i.r),o=_p(i.g),l=_p(i.b),c=Ry((.2225045*s+.7168786*o+.0606169*l)/1);return s===o&&o===l?h=g=c:(h=Ry((.4360747*s+.3850649*o+.1430804*l)/.96422),g=Ry((.0139322*s+.0971045*o+.7141733*l)/.82521)),new hs(116*c-16,500*(h-c),200*(c-g),i.opacity)}function mp(i,s,o,l){return 1===arguments.length?UE(i):new hs(i,s,o,null==l?1:l)}function hs(i,s,o,l){this.l=+i,this.a=+s,this.b=+o,this.opacity=+l}function Ry(i){return i>.008856451679035631?Math.pow(i,1/3):i/Zs+Ob}function yp(i){return i>gp?i*i*i:Zs*(i-Ob)}function HE(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function _p(i){return(i/=255)<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function em(i){if(i instanceof zo)return new zo(i.h,i.c,i.l,i.opacity);if(i instanceof hs||(i=UE(i)),0===i.a&&0===i.b)return new zo(NaN,0<i.l&&i.l<100?0:NaN,i.l,i.opacity);var s=Math.atan2(i.b,i.a)*Kl;return new zo(s<0?s+360:s,Math.sqrt(i.a*i.a+i.b*i.b),i.l,i.opacity)}function vp(i,s,o,l){return 1===arguments.length?em(i):new zo(i,s,o,null==l?1:l)}function zo(i,s,o,l){this.h=+i,this.c=+s,this.l=+o,this.opacity=+l}function Ny(i){if(isNaN(i.h))return new hs(i.l,0,0,i.opacity);var s=i.h*WF;return new hs(i.l,Math.cos(s)*i.c,Math.sin(s)*i.c,i.opacity)}function ku(i,s){var o=Ns((i=mp(i)).l,(s=mp(s)).l),l=Ns(i.a,s.a),c=Ns(i.b,s.b),h=Ns(i.opacity,s.opacity);return function(g){return i.l=o(g),i.a=l(g),i.b=c(g),i.opacity=h(g),i+""}}function bp(i){return function(s,o){var l=i((s=vp(s)).h,(o=vp(o)).h),c=Ns(s.c,o.c),h=Ns(s.l,o.l),g=Ns(s.opacity,o.opacity);return function(y){return s.h=l(y),s.c=c(y),s.l=h(y),s.opacity=g(y),s+""}}}ap(hs,mp,wy(jf,{brighter:function(i){return new hs(this.l+18*(null==i?1:i),this.a,this.b,this.opacity)},darker:function(i){return new hs(this.l-18*(null==i?1:i),this.a,this.b,this.opacity)},rgb:function(){var i=(this.l+16)/116,s=isNaN(this.a)?i:i+this.a/500,o=isNaN(this.b)?i:i-this.b/200;return new xr(HE(3.1338561*(s=.96422*yp(s))-1.6168667*(i=1*yp(i))-.4906146*(o=.82521*yp(o))),HE(-.9787684*s+1.9161415*i+.033454*o),HE(.0719453*s-.2289914*i+1.4052427*o),this.opacity)}})),ap(zo,vp,wy(jf,{brighter:function(i){return new zo(this.h,this.c,this.l+18*(null==i?1:i),this.opacity)},darker:function(i){return new zo(this.h,this.c,this.l-18*(null==i?1:i),this.opacity)},rgb:function(){return Ny(this).rgb()}}));const qF=bp(cp);var YF=bp(Ns),Ql=1.78277,Cp=-.29227,ys=-.90649,Fu=1.97294,Py=Fu*ys,hl=Fu*Ql,mi=Ql*Cp- -.14861*ys;function nm(i){if(i instanceof pl)return new pl(i.h,i.s,i.l,i.opacity);i instanceof xr||(i=Zi(i));var o=i.g/255,l=i.b/255,c=(mi*l+Py*(i.r/255)-hl*o)/(mi+Py-hl),h=l-c,g=(Fu*(o-c)-Cp*h)/ys,y=Math.sqrt(g*g+h*h)/(Fu*c*(1-c)),v=y?Math.atan2(g,h)*Kl-120:NaN;return new pl(v<0?v+360:v,y,c,i.opacity)}function qf(i,s,o,l){return 1===arguments.length?nm(i):new pl(i,s,o,null==l?1:l)}function pl(i,s,o,l){this.h=+i,this.s=+s,this.l=+o,this.opacity=+l}function _s(i){return function s(o){function l(c,h){var g=i((c=qf(c)).h,(h=qf(h)).h),y=Ns(c.s,h.s),v=Ns(c.l,h.l),C=Ns(c.opacity,h.opacity);return function(E){return c.h=g(E),c.s=y(E),c.l=v(Math.pow(E,o)),c.opacity=C(E),c+""}}return o=+o,l.gamma=s,l}(1)}ap(pl,qf,wy(jf,{brighter:function(i){return i=null==i?Gl:Math.pow(Gl,i),new pl(this.h,this.s,this.l*i,this.opacity)},darker:function(i){return i=null==i?.7:Math.pow(.7,i),new pl(this.h,this.s,this.l*i,this.opacity)},rgb:function(){var i=isNaN(this.h)?0:(this.h+120)*WF,s=+this.l,o=isNaN(this.s)?0:this.s*s*(1-s),l=Math.cos(i),c=Math.sin(i);return new xr(255*(s+o*(-.14861*l+Ql*c)),255*(s+o*(Cp*l+ys*c)),255*(s+o*(Fu*l)),this.opacity)}}));const wp=_s(cp);var im=_s(Ns);function Ep(i,s){for(var o=new Array(s),l=0;l<s;++l)o[l]=i(l/(s-1));return o}function Yf(i,s,o){const l=i-s+2*o;return i?l>0?l:1:0}const Rd="linear",Fa="log",Dp="pow",sm="sqrt",om="symlog",Xf="time",hi="utc",Ia="sequential",ns="diverging",rr="quantile",cn="quantize",kb="threshold",Kf="ordinal",Fb="point",HA="bin-ordinal",Bs="continuous",am="discrete",Ly="discretizing",gl="interpolating",GE="temporal";function Ib(){const i=Wg().unknown(void 0),s=i.domain,o=i.range;let c,h,l=[0,1],g=!1,y=0,v=0,C=.5;function E(){const x=s().length,S=l[1]<l[0],k=l[1-S],R=Yf(x,y,v);let N=l[S-0];c=(k-N)/(R||1),g&&(c=Math.floor(c)),N+=(k-N-c*(x-y))*C,h=c*(1-y),g&&(N=Math.round(N),h=Math.round(h));const P=Aa(x).map(z=>N+c*z);return o(S?P.reverse():P)}return delete i.unknown,i.domain=function(x){return arguments.length?(s(x),E()):s()},i.range=function(x){return arguments.length?(l=[+x[0],+x[1]],E()):l.slice()},i.rangeRound=function(x){return l=[+x[0],+x[1]],g=!0,E()},i.bandwidth=function(){return h},i.step=function(){return c},i.round=function(x){return arguments.length?(g=!!x,E()):g},i.padding=function(x){return arguments.length?(v=Math.max(0,Math.min(1,x)),y=v,E()):y},i.paddingInner=function(x){return arguments.length?(y=Math.max(0,Math.min(1,x)),E()):y},i.paddingOuter=function(x){return arguments.length?(v=Math.max(0,Math.min(1,x)),E()):v},i.align=function(x){return arguments.length?(C=Math.max(0,Math.min(1,x)),E()):C},i.invertRange=function(x){if(null==x[0]||null==x[1])return;const S=l[1]<l[0],k=S?o().reverse():o(),R=k.length-1;let z,H,X,N=+x[0],P=+x[1];return N!=N||P!=P||(P<N&&(X=N,N=P,P=X),P<k[0]||N>l[1-S])?void 0:(z=Math.max(0,ir(k,N)-1),H=N===P?z:ir(k,P)-1,N-k[z]>h+1e-10&&++z,S&&(X=z,z=R-H,H=R-X),z>H?void 0:s().slice(z,H+1))},i.invert=function(x){const S=i.invertRange([x,x]);return S&&S[0]},i.copy=function(){return Ib().domain(s()).range(l).round(g).paddingInner(y).paddingOuter(v).align(C)},E()}function lm(i){const s=i.copy;return i.padding=i.paddingOuter,delete i.paddingInner,i.copy=function(){return lm(s())},i}var OL=Array.prototype.map;function um(i){return OL.call(i,T.He)}const qE=Array.prototype.slice,cm={};function WA(i,s,o){const l=function(){const h=s();return h.invertRange||(h.invertRange=h.invert?function(i){return function(s){let c,o=s[0],l=s[1];return l<o&&(c=o,o=l,l=c),[i.invert(o),i.invert(l)]}}(h):h.invertExtent?function(i){return function(s){const o=i.range();let g,y,v,C,l=s[0],c=s[1],h=-1;for(c<l&&(y=l,l=c,c=y),v=0,C=o.length;v<C;++v)o[v]>=l&&o[v]<=c&&(h<0&&(h=v),g=v);if(!(h<0))return l=i.invertExtent(o[h]),c=i.invertExtent(o[g]),[void 0===l[0]?l[1]:l[0],void 0===c[1]?c[0]:c[1]]}}(h):void 0),h.type=i,h};return l.metadata=(0,T.Rg)((0,T.IX)(o)),l}function Ai(i,s,o){return arguments.length>1?(cm[i]=WA(i,s,o),this):Nd(i)?cm[i]:void 0}function Nd(i){return(0,T.nr)(cm,i)}function xp(i,s){const o=cm[i];return o&&o.metadata[s]}function YE(i){return xp(i,Bs)}function dm(i){return xp(i,am)}function GA(i){return xp(i,Ly)}function By(i){return xp(i,Fa)}function XE(i){return xp(i,gl)}function fm(i){return xp(i,rr)}Ai("identity",function FE(i){var s;function o(l){return null==l||isNaN(l=+l)?s:l}return o.invert=o,o.domain=o.range=function(l){return arguments.length?(i=Array.from(l,Yl),o):i.slice()},o.unknown=function(l){return arguments.length?(s=l,o):s},o.copy=function(){return FE(i).unknown(s)},i=arguments.length?Array.from(i,Yl):[0,1],Hf(o)}),Ai(Rd,function Sy(){var i=kE();return i.copy=function(){return jo(i,Sy())},Hl.apply(i,arguments),Hf(i)},Bs),Ai(Fa,function Ay(){var i=Eb(Kg()).domain([1,10]);return i.copy=function(){return jo(i,Ay()).base(i.base())},Hl.apply(i,arguments),i},[Bs,Fa]),Ai(Dp,My,Bs),Ai(sm,function(){return My.apply(null,arguments).exponent(.5)},Bs),Ai(om,function xb(){var i=Gf(Kg());return i.copy=function(){return jo(i,xb()).constant(i.constant())},Hl.apply(i,arguments)},Bs),Ai(Xf,function(){return Hl.apply(LA(LE,PA,ot,Rl,Ue,Ln,iv,x0,xn,P0).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},[Bs,GE]),Ai(hi,function(){return Hl.apply(LA(BF,Tu,na,rv,Qt,ge,yu,Qi,xn,bu).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},[Bs,GE]),Ai(Ia,VA,[Bs,gl]),Ai("".concat(Ia,"-").concat(Rd),VA,[Bs,gl]),Ai("".concat(Ia,"-").concat(Fa),function Cc(){var i=Eb(ai()).domain([1,10]);return i.copy=function(){return bc(i,Cc()).base(i.base())},kd.apply(i,arguments)},[Bs,gl,Fa]),Ai("".concat(Ia,"-").concat(Dp),Ty,[Bs,gl]),Ai("".concat(Ia,"-").concat(sm),function(){return Ty.apply(null,arguments).exponent(.5)},[Bs,gl]),Ai("".concat(Ia,"-").concat(om),function Sb(){var i=Gf(ai());return i.copy=function(){return bc(i,Sb()).constant(i.constant())},kd.apply(i,arguments)},[Bs,gl]),Ai("".concat(ns,"-").concat(Rd),function Xl(){var i=Hf(Ab()(ua));return i.copy=function(){return bc(i,Xl())},kd.apply(i,arguments)},[Bs,gl]),Ai("".concat(ns,"-").concat(Fa),function fn(){var i=Eb(Ab()).domain([.1,1,10]);return i.copy=function(){return bc(i,fn()).base(i.base())},kd.apply(i,arguments)},[Bs,gl,Fa]),Ai("".concat(ns,"-").concat(Dp),Ps,[Bs,gl]),Ai("".concat(ns,"-").concat(sm),function(){return Ps.apply(null,arguments).exponent(.5)},[Bs,gl]),Ai("".concat(ns,"-").concat(om),function st(){var i=Gf(Ab());return i.copy=function(){return bc(i,st()).constant(i.constant())},kd.apply(i,arguments)},[Bs,gl]),Ai(rr,function ky(){var l,i=[],s=[],o=[];function c(){var g=0,y=Math.max(1,s.length);for(o=new Array(y-1);++g<y;)o[g-1]=Cw(i,g/y);return h}function h(g){return null==g||isNaN(g=+g)?l:s[la(o,g)]}return h.invertExtent=function(g){var y=s.indexOf(g);return y<0?[NaN,NaN]:[y>0?o[y-1]:i[0],y<o.length?o[y]:i[i.length-1]]},h.domain=function(g){if(!arguments.length)return i.slice();i=[];for(let y of g)null!=y&&!isNaN(y=+y)&&i.push(y);return i.sort(sv),c()},h.range=function(g){return arguments.length?(s=Array.from(g),c()):s.slice()},h.unknown=function(g){return arguments.length?(l=g,h):l},h.quantiles=function(){return o.slice()},h.copy=function(){return ky().domain(i).range(s).unknown(l)},Hl.apply(h,arguments)},[Ly,rr]),Ai(cn,function wc(){var h,i=0,s=1,o=1,l=[.5],c=[0,1];function g(v){return null!=v&&v<=v?c[la(l,v,0,o)]:h}function y(){var v=-1;for(l=new Array(o);++v<o;)l[v]=((v+1)*s-(v-o)*i)/(o+1);return g}return g.domain=function(v){return arguments.length?([i,s]=v,i=+i,s=+s,y()):[i,s]},g.range=function(v){return arguments.length?(o=(c=Array.from(v)).length-1,y()):c.slice()},g.invertExtent=function(v){var C=c.indexOf(v);return C<0?[NaN,NaN]:C<1?[i,l[0]]:C>=o?[l[o-1],s]:[l[C-1],l[C]]},g.unknown=function(v){return arguments.length&&(h=v),g},g.thresholds=function(){return l.slice()},g.copy=function(){return wc().domain([i,s]).range(c).unknown(h)},Hl.apply(Hf(g),arguments)},Ly),Ai(kb,function Ec(){var o,i=[.5],s=[0,1],l=1;function c(h){return null!=h&&h<=h?s[la(i,h,0,l)]:o}return c.domain=function(h){return arguments.length?(i=Array.from(h),l=Math.min(i.length,s.length-1),c):i.slice()},c.range=function(h){return arguments.length?(s=Array.from(h),l=Math.min(i.length,s.length-1),c):s.slice()},c.invertExtent=function(h){var g=s.indexOf(h);return[i[g-1],i[g]]},c.unknown=function(h){return arguments.length?(o=h,c):o},c.copy=function(){return Ec().domain(i).range(s).unknown(o)},Hl.apply(c,arguments)},Ly),Ai(HA,function QF(){let i=[],s=[];function o(l){return null==l||l!=l?void 0:s[(la(i,l)-1)%s.length]}return o.domain=function(l){return arguments.length?(i=um(l),o):i.slice()},o.range=function(l){return arguments.length?(s=qE.call(l),o):s.slice()},o.tickFormat=function(l,c){return EA(i[0],(0,T.fj)(i),null==l?10:l,c)},o.copy=function(){return QF().domain(o.domain()).range(o.range())},o},[am,Ly]),Ai(Kf,Wg,am),Ai("band",Ib,am),Ai(Fb,function(){return lm(Ib().paddingInner(1))},am);const Sp=["clamp","base","constant","exponent"];function YA(i,s){const o=s[0],l=(0,T.fj)(s)-o;return function(c){return i(o+c*l)}}function hm(i,s,o){return fl(Rb(s||"rgb",o),i)}function XA(i,s){const o=new Array(s),l=s+1;for(let c=0;c<s;)o[c]=i(++c/l);return o}function Ap(i,s,o){const l=o-s;let c,h,g;return l&&Number.isFinite(l)?(c=(h=i.type).indexOf("-"),h=c<0?h:h.slice(c+1),g=Ai(h)().domain([s,o]).range([0,1]),Sp.forEach(y=>i[y]?g[y](i[y]()):0),g):(0,T.a9)(.5)}function Rb(i,s){const o=K[function(i){return"interpolate"+i.toLowerCase().split("-").map(s=>s[0].toUpperCase()+s.slice(1)).join("")}(i)];return null!=s&&o&&o.gamma?o.gamma(s):o}function Nb(i){const s=i.length/6|0,o=new Array(s);for(let l=0;l<s;)o[l]="#"+i.slice(6*l,6*++l);return o}function KE(i,s){for(const o in i)Pb(o,s(i[o]))}const QE={};function Pb(i,s){return i=i&&i.toLowerCase(),arguments.length>1?(QE[i]=s,this):QE[i]}KE({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},Nb),KE({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},i=>hm(Nb(i)));const Lb="symbol",Bb=i=>(0,T.kJ)(i)?i.map(s=>String(s)):String(i),TL=(i,s)=>i[1]-s[1],JE=(i,s)=>s[1]-i[1];function Qf(i,s,o){let l;return(0,T.hj)(s)&&(i.bins&&(s=Math.max(s,i.bins.length)),null!=o&&(s=Math.min(s,Math.floor((0,T.yP)(i.domain())/o||1)))),(0,T.Kn)(s)&&(l=s.step,s=s.interval),(0,T.HD)(s)&&(s=i.type===Xf?vu(s):i.type==hi?ho(s):(0,T.vU)("Only time and utc scales accept interval strings."),l&&(s=s.every(l))),s}function pm(i,s,o){let l=i.range(),c=l[0],h=(0,T.fj)(l),g=TL;if(c>h&&(l=h,h=c,c=l,g=JE),c=Math.floor(c),h=Math.ceil(h),s=s.map(y=>[y,i(y)]).filter(y=>c<=y[1]&&y[1]<=h).sort(g).map(y=>y[0]),o>0&&s.length>1){const y=[s[0],(0,T.fj)(s)];for(;s.length>o&&s.length>=3;)s=s.filter((v,C)=>!(C%2));s.length<3&&(s=y)}return s}function ue(i,s){return i.bins?pm(i,i.bins):i.ticks?i.ticks(s):i.domain()}function Mp(i,s,o,l,c,h){const g=s.type;let y=Bb;if(g===Xf||c===Xf)y=i.timeFormat(l);else if(g===hi||c===hi)y=i.utcFormat(l);else if(By(g)){const v=i.formatFloat(l);if(h||s.bins)y=v;else{const C=yt(s,o,!1);y=E=>C(E)?v(E):""}}else if(s.tickFormat){const v=s.domain();y=i.formatSpan(v[0],v[v.length-1],o,l)}else l&&(y=i.format(l));return y}function yt(i,s,o){const l=ue(i,s),c=i.base(),h=Math.log(c),g=Math.max(1,c*s/l.length),y=v=>{let C=v/Math.pow(c,Math.round(Math.log(v)/h));return C*c<c-.5&&(C*=c),C<=g};return o?l.filter(y):y}const Op={[rr]:"quantiles",[cn]:"thresholds",[kb]:"domain"},Vb={[rr]:"quantiles",[cn]:"domain"};function we(i,s){return i.bins?function(i){const s=i.slice(0,-1);return s.max=(0,T.fj)(i),s}(i.bins):i.type===Fa?yt(i,s,!0):Op[i.type]?function(i){const s=[-1/0].concat(i);return s.max=1/0,s}(i[Op[i.type]]()):ue(i,s)}function Tp(i,s,o,l,c,h,g){const y=Vb[s.type]&&h!==Xf&&h!==hi?function(i,s,o){const l=s[Vb[s.type]](),c=l.length;let g,h=c>1?l[1]-l[0]:l[0];for(g=1;g<c;++g)h=Math.min(h,l[g]-l[g-1]);return i.formatSpan(0,h,30,o)}(i,s,c):Mp(i,s,o,c,h,g);return l===Lb&&(i=>Op[i.type]||i.bins)(s)?$b(y):"discrete"===l?eo(y):Vy(y)}const $b=i=>(s,o,l)=>{const c=ZA(l[o+1],ZA(l.max,1/0)),h=jb(s,i),g=jb(c,i);return h&&g?h+" \u2013 "+g:g?"< "+g:"\u2265 "+h},ZA=(i,s)=>null!=i?i:s,eo=i=>(s,o)=>o?i(s):null,Vy=i=>s=>i(s),jb=(i,s)=>Number.isFinite(i)?s(i):null;function mm(i,s,o){o=o||{};const l=Math.max(3,o.maxlen||7),c=function(i,s,o,l){const c=l||s.type;return(0,T.HD)(o)&&function(i){return xp(i,GE)}(c)&&(o=o.replace(/%a/g,"%A").replace(/%b/g,"%B")),o||c!==Xf?o||c!==hi?Tp(i,s,5,null,o,l,!0):i.utcFormat("%A, %d %B %Y, %X UTC"):i.timeFormat("%A, %d %B %Y, %X")}(i,s,o.format,o.formatType);if(GA(s.type)){const h=we(s).slice(1).map(c),g=h.length;return"".concat(g," boundar").concat(1===g?"y":"ies",": ").concat(h.join(", "))}if(dm(s.type)){const h=s.domain(),g=h.length,y=g>l?h.slice(0,l-2).map(c).join(", ")+", ending with "+h.slice(-1).map(c):h.map(c).join(", ");return"".concat(g," value").concat(1===g?"":"s",": ").concat(y)}{const h=s.domain();return"values from ".concat(c(h[0])," to ").concat(c((0,T.fj)(h)))}}let ZE=0;function _m(i){return i&&i.gradient}function dn(i,s,o){const l=i.gradient;let c=i.id,h="radial"===l?"p_":"";return c||(c=i.id="gradient_"+ZE++,"radial"===l?(i.x1=Dc(i.x1,.5),i.y1=Dc(i.y1,.5),i.r1=Dc(i.r1,0),i.x2=Dc(i.x2,.5),i.y2=Dc(i.y2,.5),i.r2=Dc(i.r2,.5),h="p_"):(i.x1=Dc(i.x1,0),i.y1=Dc(i.y1,0),i.x2=Dc(i.x2,1),i.y2=Dc(i.y2,0))),s[c]=i,"url("+(o||"")+"#"+h+c+")"}function Dc(i,s){return null!=i?i:s}function vs(i,s){var l,o=[];return l={gradient:"linear",x1:i?i[0]:0,y1:i?i[1]:0,x2:s?s[0]:1,y2:s?s[1]:0,stops:o,stop:function(c,h){return o.push({offset:c,color:h}),l}}}const Ei={basis:{curve:function(i){return new tb(i)}},"basis-closed":{curve:function(i){return new zg(i)}},"basis-open":{curve:function(i){return new xF(i)}},bundle:{curve:Kw,tension:"beta",value:.85},cardinal:{curve:SF,tension:"tension",value:0},"cardinal-open":{curve:Jw,tension:"tension",value:0},"cardinal-closed":{curve:cA,tension:"tension",value:0},"catmull-rom":{curve:mc,tension:"alpha",value:.5},"catmull-rom-closed":{curve:fA,tension:"alpha",value:.5},"catmull-rom-open":{curve:MF,tension:"alpha",value:.5},linear:{curve:sp},"linear-closed":{curve:function(i){return new lb(i)}},monotone:{horizontal:function(i){return new ul(i)},vertical:function(i){return new my(i)}},natural:{curve:function(i){return new rE(i)}},step:{curve:function(i){return new yy(i,.5)}},"step-after":{curve:function(i){return new yy(i,1)}},"step-before":{curve:function(i){return new yy(i,0)}}};function $y(i,s,o){var l=(0,T.nr)(Ei,i)&&Ei[i],c=null;return l&&(c=l.curve||l[s||"vertical"],l.tension&&null!=o&&(c=c[l.tension](o))),c}const tD={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},vm=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];function kp(i){const s=[];let o,l,c,h,g,y,v,C,E,x;const S=i.slice().replace(vm[0],"###$1").split(vm[1]).slice(1);for(v=0,E=S.length;v<E;++v){for(o=S[v],l=o.slice(1).trim().replace(vm[2],"$1###$2").replace(vm[3],"$1###$2").split(vm[4]),g=o.charAt(0),c=[g],C=0,x=l.length;C<x;++C)(h=+l[C])===h&&c.push(h);if(y=tD[g.toLowerCase()],c.length-1>y){const k=c.length;for(C=1,s.push([g].concat(c.slice(C,C+=y))),g="M"===g?"L":"m"===g?"l":g;C<k;C+=y)s.push([g].concat(c.slice(C,C+y)))}else s.push(c)}return s}const Pd=Math.PI/180,xc=Math.PI/2,Jl=2*Math.PI,Jf=Math.sqrt(3)/2;var jy={},eM={},tM=[].join;function nM(i){const s=tM.call(i);if(eM[s])return eM[s];var o=i[0],l=i[1],c=i[2],h=i[3],g=i[4],y=i[5],v=i[6],C=i[7];const E=C*g,x=-v*y,S=v*g,k=C*y,R=Math.cos(c),N=Math.sin(c),P=Math.cos(h),z=Math.sin(h),H=.5*(h-c),X=Math.sin(.5*H),J=8/3*X*X/Math.sin(H),oe=o+R-J*N,fe=l+N+J*R,te=o+P,Re=l+z,ze=te+J*z,Fe=Re-J*P;return eM[s]=[E*oe+x*fe,S*oe+k*fe,E*ze+x*Fe,S*ze+k*Fe,E*te+x*Re,S*te+k*Re]}const Zl=["l",0,0,0,0,0,0,0];function Vs(i,s,o){const l=Zl[0]=i[0];if("a"===l||"A"===l)Zl[1]=s*i[1],Zl[2]=o*i[2],Zl[3]=i[3],Zl[4]=i[4],Zl[5]=i[5],Zl[6]=s*i[6],Zl[7]=o*i[7];else if("h"===l||"H"===l)Zl[1]=s*i[1];else if("v"===l||"V"===l)Zl[1]=o*i[1];else for(var c=1,h=i.length;c<h;++c)Zl[c]=(c%2==1?s:o)*i[c];return Zl}function bm(i,s,o,l,c,h){var g,S,k,R,N,y=null,v=0,C=0,E=0,x=0;null==o&&(o=0),null==l&&(l=0),null==c&&(c=1),null==h&&(h=c),i.beginPath&&i.beginPath();for(var P=0,z=s.length;P<z;++P){switch(g=s[P],(1!==c||1!==h)&&(g=Vs(g,c,h)),g[0]){case"l":i.lineTo((v+=g[1])+o,(C+=g[2])+l);break;case"L":i.lineTo((v=g[1])+o,(C=g[2])+l);break;case"h":i.lineTo((v+=g[1])+o,C+l);break;case"H":i.lineTo((v=g[1])+o,C+l);break;case"v":i.lineTo(v+o,(C+=g[1])+l);break;case"V":i.lineTo(v+o,(C=g[1])+l);break;case"m":i.moveTo((v+=g[1])+o,(C+=g[2])+l);break;case"M":i.moveTo((v=g[1])+o,(C=g[2])+l);break;case"c":i.bezierCurveTo(v+g[1]+o,C+g[2]+l,(E=v+g[3])+o,(x=C+g[4])+l,(S=v+g[5])+o,(k=C+g[6])+l),v=S,C=k;break;case"C":i.bezierCurveTo(g[1]+o,g[2]+l,(E=g[3])+o,(x=g[4])+l,(v=g[5])+o,(C=g[6])+l);break;case"s":i.bezierCurveTo((E=2*v-E)+o,(x=2*C-x)+l,v+g[1]+o,C+g[2]+l,(S=v+g[3])+o,(k=C+g[4])+l),E=v+g[1],x=C+g[2],v=S,C=k;break;case"S":i.bezierCurveTo((E=2*v-E)+o,(x=2*C-x)+l,g[1]+o,g[2]+l,(S=g[3])+o,(k=g[4])+l),v=S,C=k,E=g[1],x=g[2];break;case"q":i.quadraticCurveTo((E=v+g[1])+o,(x=C+g[2])+l,(S=v+g[3])+o,(k=C+g[4])+l),v=S,C=k;break;case"Q":i.quadraticCurveTo(g[1]+o,g[2]+l,(S=g[3])+o,(k=g[4])+l),v=S,C=k,E=g[1],x=g[2];break;case"t":S=v+g[1],k=C+g[2],null===y[0].match(/[QqTt]/)?(E=v,x=C):"t"===y[0]?(E=2*v-R,x=2*C-N):"q"===y[0]&&(E=2*v-E,x=2*C-x),R=E,N=x,i.quadraticCurveTo(E+o,x+l,S+o,k+l),E=(v=S)+g[1],x=(C=k)+g[2];break;case"T":i.quadraticCurveTo((E=2*v-E)+o,(x=2*C-x)+l,(S=g[1])+o,(k=g[2])+l),v=S,C=k;break;case"a":iD(i,v+o,C+l,[g[1],g[2],g[3],g[4],g[5],g[6]+v+o,g[7]+C+l]),v+=g[6],C+=g[7];break;case"A":iD(i,v+o,C+l,[g[1],g[2],g[3],g[4],g[5],g[6]+o,g[7]+l]),v=g[6],C=g[7];break;case"z":case"Z":i.closePath()}y=g}}function iD(i,s,o,l){const c=function(i,s,o,l,c,h,g,y,v){const C=tM.call(arguments);if(jy[C])return jy[C];const E=g*Pd,x=Math.sin(E),S=Math.cos(E),k=S*(y-i)*.5+x*(v-s)*.5,R=S*(v-s)*.5-x*(y-i)*.5;let N=k*k/((o=Math.abs(o))*o)+R*R/((l=Math.abs(l))*l);N>1&&(N=Math.sqrt(N),o*=N,l*=N);const P=S/o,z=x/o,H=-x/l,X=S/l,J=P*y+z*v,oe=H*y+X*v,fe=P*i+z*s,te=H*i+X*s;let ze=1/((fe-J)*(fe-J)+(te-oe)*(te-oe))-.25;ze<0&&(ze=0);let Fe=Math.sqrt(ze);h==c&&(Fe=-Fe);const Oe=.5*(J+fe)-Fe*(te-oe),tt=.5*(oe+te)+Fe*(fe-J),et=Math.atan2(oe-tt,J-Oe);let Xe=Math.atan2(te-tt,fe-Oe)-et;Xe<0&&1===h?Xe+=Jl:Xe>0&&0===h&&(Xe-=Jl);const Tt=Math.ceil(Math.abs(Xe/(xc+.001))),Xt=[];for(let un=0;un<Tt;++un)Xt[un]=[Oe,tt,et+un*Xe/Tt,et+(un+1)*Xe/Tt,o,l,x,S];return jy[C]=Xt}(l[5],l[6],l[0],l[1],l[3],l[4],l[2],s,o);for(let h=0;h<c.length;++h){const g=nM(c[h]);i.bezierCurveTo(g[0],g[1],g[2],g[3],g[4],g[5])}}const iM=.5773502691896257,zb={circle:{draw:function(i,s){const o=Math.sqrt(s)/2;i.moveTo(o,0),i.arc(0,0,o,0,Jl)}},cross:{draw:function(i,s){var o=Math.sqrt(s)/2,l=o/2.5;i.moveTo(-o,-l),i.lineTo(-o,l),i.lineTo(-l,l),i.lineTo(-l,o),i.lineTo(l,o),i.lineTo(l,l),i.lineTo(o,l),i.lineTo(o,-l),i.lineTo(l,-l),i.lineTo(l,-o),i.lineTo(-l,-o),i.lineTo(-l,-l),i.closePath()}},diamond:{draw:function(i,s){const o=Math.sqrt(s)/2;i.moveTo(-o,0),i.lineTo(0,-o),i.lineTo(o,0),i.lineTo(0,o),i.closePath()}},square:{draw:function(i,s){var o=Math.sqrt(s),l=-o/2;i.rect(l,l,o,o)}},arrow:{draw:function(i,s){var o=Math.sqrt(s)/2,l=o/7,c=o/2.5,h=o/8;i.moveTo(-l,o),i.lineTo(l,o),i.lineTo(l,-h),i.lineTo(c,-h),i.lineTo(0,-o),i.lineTo(-c,-h),i.lineTo(-l,-h),i.closePath()}},wedge:{draw:function(i,s){var o=Math.sqrt(s)/2,l=Jf*o,c=l-o*iM,h=o/4;i.moveTo(0,-l-c),i.lineTo(-h,l-c),i.lineTo(h,l-c),i.closePath()}},triangle:{draw:function(i,s){var o=Math.sqrt(s)/2,l=Jf*o,c=l-o*iM;i.moveTo(0,-l-c),i.lineTo(-o,l-c),i.lineTo(o,l-c),i.closePath()}},"triangle-up":{draw:function(i,s){var o=Math.sqrt(s)/2,l=Jf*o;i.moveTo(0,-l),i.lineTo(-o,l),i.lineTo(o,l),i.closePath()}},"triangle-down":{draw:function(i,s){var o=Math.sqrt(s)/2,l=Jf*o;i.moveTo(0,l),i.lineTo(-o,-l),i.lineTo(o,-l),i.closePath()}},"triangle-right":{draw:function(i,s){var o=Math.sqrt(s)/2,l=Jf*o;i.moveTo(l,0),i.lineTo(-l,-o),i.lineTo(-l,o),i.closePath()}},"triangle-left":{draw:function(i,s){var o=Math.sqrt(s)/2,l=Jf*o;i.moveTo(-l,0),i.lineTo(l,-o),i.lineTo(l,o),i.closePath()}},stroke:{draw:function(i,s){const o=Math.sqrt(s)/2;i.moveTo(-o,0),i.lineTo(o,0)}}};function rM(i){return(0,T.nr)(zb,i)?zb[i]:function(i){if(!(0,T.nr)(Ub,i)){const s=kp(i);Ub[i]={draw:function(o,l){bm(o,s,0,0,Math.sqrt(l)/2)}}}return Ub[i]}(i)}var Ub={};const ml=.448084975506;function r2(i){return i.x}function oM(i){return i.y}function aM(i){return i.width}function s2(i){return i.height}function Iu(i){return"function"==typeof i?i:()=>+i}function rD(i,s,o){return Math.max(s,Math.min(i,o))}function Co(){var i=r2,s=oM,o=aM,l=s2,c=Iu(0),h=c,g=c,y=c,v=null;function C(E,x,S){var k,R=null!=x?x:+i.call(this,E),N=null!=S?S:+s.call(this,E),P=+o.call(this,E),z=+l.call(this,E),H=Math.min(P,z)/2,X=rD(+c.call(this,E),0,H),J=rD(+h.call(this,E),0,H),oe=rD(+g.call(this,E),0,H),fe=rD(+y.call(this,E),0,H);if(v||(v=k=Ug()),X<=0&&J<=0&&oe<=0&&fe<=0)v.rect(R,N,P,z);else{var te=R+P,Re=N+z;v.moveTo(R+X,N),v.lineTo(te-J,N),v.bezierCurveTo(te-ml*J,N,te,N+ml*J,te,N+J),v.lineTo(te,Re-fe),v.bezierCurveTo(te,Re-ml*fe,te-ml*fe,Re,te-fe,Re),v.lineTo(R+oe,Re),v.bezierCurveTo(R+ml*oe,Re,R,Re-ml*oe,R,Re-oe),v.lineTo(R,N+X),v.bezierCurveTo(R,N+ml*X,R+ml*X,N,R+X,N),v.closePath()}if(k)return v=null,k+""||null}return C.x=function(E){return arguments.length?(i=Iu(E),C):i},C.y=function(E){return arguments.length?(s=Iu(E),C):s},C.width=function(E){return arguments.length?(o=Iu(E),C):o},C.height=function(E){return arguments.length?(l=Iu(E),C):l},C.cornerRadius=function(E,x,S,k){return arguments.length?(c=Iu(E),h=null!=x?Iu(x):c,y=null!=S?Iu(S):c,g=null!=k?Iu(k):h,C):c},C.context=function(E){return arguments.length?(v=null==E?null:E,C):v},C}function Qn(){var i,s,o,l,h,g,y,v,c=null;function C(x,S,k){const R=k/2;if(h){var N=y-S,P=x-g;if(N||P){var z=Math.sqrt(N*N+P*P),H=(N/=z)*v,X=(P/=z)*v,J=Math.atan2(P,N);c.moveTo(g-H,y-X),c.lineTo(x-N*R,S-P*R),c.arc(x,S,R,J-Math.PI,J),c.lineTo(g+H,y+X),c.arc(g,y,v,J,J+Math.PI)}else c.arc(x,S,R,0,Jl);c.closePath()}else h=1;g=x,y=S,v=R}function E(x){var S,R,P,k=x.length,N=!1;for(null==c&&(c=P=Ug()),S=0;S<=k;++S)!(S<k&&l(R=x[S],S,x))===N&&(N=!N)&&(h=0),N&&C(+i(R,S,x),+s(R,S,x),+o(R,S,x));if(P)return c=null,P+""||null}return E.x=function(x){return arguments.length?(i=x,E):i},E.y=function(x){return arguments.length?(s=x,E):s},E.size=function(x){return arguments.length?(o=x,E):o},E.defined=function(x){return arguments.length?(l=x,E):l},E.context=function(x){return arguments.length?(c=null==x?null:x,E):c},E}function ca(i,s){return null!=i?i:s}const zy=i=>i.x||0,is=i=>i.y||0,Zf=i=>!1!==i.defined,fM=function(){var i=Od,s=lE,o=zi(0),l=null,c=uE,h=cE,g=CL,y=null;function v(){var C,E,x=+i.apply(this,arguments),S=+s.apply(this,arguments),k=c.apply(this,arguments)-rp,R=h.apply(this,arguments)-rp,N=ib(R-k),P=R>k;if(y||(y=C=Ug()),S<x&&(E=S,S=x,x=E),S>fs)if(N>gc-fs)y.moveTo(S*pc(k),S*Au(k)),y.arc(0,0,S,k,R,!P),x>fs&&(y.moveTo(x*pc(R),x*Au(R)),y.arc(0,0,x,R,k,P));else{var tt,et,z=k,H=R,X=k,J=R,oe=N,fe=N,te=g.apply(this,arguments)/2,Re=te>fs&&(l?+l.apply(this,arguments):ip(x*x+S*S)),ze=rb(ib(S-x)/2,+o.apply(this,arguments)),Fe=ze,Oe=ze;if(Re>fs){var Ot=sb(Re/x*Au(te)),Xe=sb(Re/S*Au(te));(oe-=2*Ot)>fs?(X+=Ot*=P?1:-1,J-=Ot):(oe=0,X=J=(k+R)/2),(fe-=2*Xe)>fs?(z+=Xe*=P?1:-1,H-=Xe):(fe=0,z=H=(k+R)/2)}var Tt=S*pc(z),Xt=S*Au(z),un=x*pc(J),Wn=x*Au(J);if(ze>fs){var Qo,xi=S*pc(H),tr=S*Au(H),Sr=x*pc(X),ao=x*Au(X);if(N<Md&&(Qo=gA(Tt,Xt,Sr,ao,xi,tr,un,Wn))){var cu=Tt-Qo[0],g0=Xt-Qo[1],tS=xi-Qo[0],nS=tr-Qo[1],pn=1/Au(dA((cu*tS+g0*nS)/(ip(cu*cu+g0*g0)*ip(tS*tS+nS*nS)))/2),_i=ip(Qo[0]*Qo[0]+Qo[1]*Qo[1]);Fe=rb(ze,(x-_i)/(pn-1)),Oe=rb(ze,(S-_i)/(pn+1))}}fe>fs?Oe>fs?(tt=dE(Sr,ao,Tt,Xt,S,Oe,P),et=dE(xi,tr,un,Wn,S,Oe,P),y.moveTo(tt.cx+tt.x01,tt.cy+tt.y01),Oe<ze?y.arc(tt.cx,tt.cy,Oe,Vo(tt.y01,tt.x01),Vo(et.y01,et.x01),!P):(y.arc(tt.cx,tt.cy,Oe,Vo(tt.y01,tt.x01),Vo(tt.y11,tt.x11),!P),y.arc(0,0,S,Vo(tt.cy+tt.y11,tt.cx+tt.x11),Vo(et.cy+et.y11,et.cx+et.x11),!P),y.arc(et.cx,et.cy,Oe,Vo(et.y11,et.x11),Vo(et.y01,et.x01),!P))):(y.moveTo(Tt,Xt),y.arc(0,0,S,z,H,!P)):y.moveTo(Tt,Xt),x>fs&&oe>fs?Fe>fs?(tt=dE(un,Wn,xi,tr,x,-Fe,P),et=dE(Tt,Xt,Sr,ao,x,-Fe,P),y.lineTo(tt.cx+tt.x01,tt.cy+tt.y01),Fe<ze?y.arc(tt.cx,tt.cy,Fe,Vo(tt.y01,tt.x01),Vo(et.y01,et.x01),!P):(y.arc(tt.cx,tt.cy,Fe,Vo(tt.y01,tt.x01),Vo(tt.y11,tt.x11),!P),y.arc(0,0,x,Vo(tt.cy+tt.y11,tt.cx+tt.x11),Vo(et.cy+et.y11,et.cx+et.x11),P),y.arc(et.cx,et.cy,Fe,Vo(et.y11,et.x11),Vo(et.y01,et.x01),!P))):y.arc(0,0,x,J,X,P):y.lineTo(un,Wn)}else y.moveTo(0,0);if(y.closePath(),C)return y=null,C+""||null}return v.centroid=function(){var C=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2,E=(+c.apply(this,arguments)+ +h.apply(this,arguments))/2-Md/2;return[pc(E)*C,Au(E)*C]},v.innerRadius=function(C){return arguments.length?(i="function"==typeof C?C:zi(+C),v):i},v.outerRadius=function(C){return arguments.length?(s="function"==typeof C?C:zi(+C),v):s},v.cornerRadius=function(C){return arguments.length?(o="function"==typeof C?C:zi(+C),v):o},v.padRadius=function(C){return arguments.length?(l=null==C?null:"function"==typeof C?C:zi(+C),v):l},v.startAngle=function(C){return arguments.length?(c="function"==typeof C?C:zi(+C),v):c},v.endAngle=function(C){return arguments.length?(h="function"==typeof C?C:zi(+C),v):h},v.padAngle=function(C){return arguments.length?(g="function"==typeof C?C:zi(+C),v):g},v.context=function(C){return arguments.length?(y=null==C?null:C,v):y},v}().startAngle(i=>i.startAngle||0).endAngle(i=>i.endAngle||0).padAngle(i=>i.padAngle||0).innerRadius(i=>i.innerRadius||0).outerRadius(i=>i.outerRadius||0).cornerRadius(i=>i.cornerRadius||0),jt=by().x(zy).y1(is).y0(i=>(i.y||0)+(i.height||0)).defined(Zf),Ur=by().y(is).x1(zy).x0(i=>(i.x||0)+(i.width||0)).defined(Zf),Lr=hE().x(zy).y(is).defined(Zf),Ld=Co().x(zy).y(is).width(i=>i.width||0).height(i=>i.height||0).cornerRadius(i=>ca(i.cornerRadiusTopLeft,i.cornerRadius)||0,i=>ca(i.cornerRadiusTopRight,i.cornerRadius)||0,i=>ca(i.cornerRadiusBottomRight,i.cornerRadius)||0,i=>ca(i.cornerRadiusBottomLeft,i.cornerRadius)||0),wm=function(i,s){var o=null;function l(){var c;if(o||(o=c=Ug()),i.apply(this,arguments).draw(o,+s.apply(this,arguments)),c)return o=null,c+""||null}return i="function"==typeof i?i:zi(i||pE),s="function"==typeof s?s:zi(void 0===s?64:+s),l.type=function(c){return arguments.length?(i="function"==typeof c?c:zi(c),l):i},l.size=function(c){return arguments.length?(s="function"==typeof c?c:zi(+c),l):s},l.context=function(c){return arguments.length?(o=null==c?null:c,l):o},l}().type(i=>rM(i.shape||"circle")).size(i=>ca(i.size,64)),Em=Qn().x(zy).y(is).defined(Zf).size(i=>i.size||1);function Ac(i){return i.cornerRadius||i.cornerRadiusTopLeft||i.cornerRadiusTopRight||i.cornerRadiusBottomRight||i.cornerRadiusBottomLeft}function yl(i,s,o,l){return Ld.context(i)(s,o,l)}var hM=1;function pM(){hM=1}function aD(i,s,o){var l=s.clip,c=i._defs,h=s.clip_id||(s.clip_id="clip"+hM++),g=c.clipping[h]||(c.clipping[h]={id:h});return(0,T.mf)(l)?g.path=l(null):Ac(o)?g.path=yl(null,o,0,0):(g.width=o.width||0,g.height=o.height||0),"url(#"+h+")"}function $s(i){this.clear(),i&&this.union(i)}function qb(i){this.mark=i,this.bounds=this.bounds||new $s}function Yb(i){qb.call(this,i),this.items=this.items||[]}function lD(i){this._pending=0,this._loader=i||Dv()}function gM(i){i._pending+=1}function Hy(i){i._pending-=1}function da(i,s,o){if(s.stroke&&0!==s.opacity&&0!==s.strokeOpacity){const l=null!=s.strokeWidth?+s.strokeWidth:1;i.expand(l+(o?function(i,s){return i.strokeJoin&&"miter"!==i.strokeJoin?0:s}(s,l):0))}return i}$s.prototype={clone(){return new $s(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(i){return this.x1===i.x1&&this.y1===i.y1&&this.x2===i.x2&&this.y2===i.y2},set(i,s,o,l){return o<i?(this.x2=i,this.x1=o):(this.x1=i,this.x2=o),l<s?(this.y2=s,this.y1=l):(this.y1=s,this.y2=l),this},add(i,s){return i<this.x1&&(this.x1=i),s<this.y1&&(this.y1=s),i>this.x2&&(this.x2=i),s>this.y2&&(this.y2=s),this},expand(i){return this.x1-=i,this.y1-=i,this.x2+=i,this.y2+=i,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(i){return this.x1*=i,this.y1*=i,this.x2*=i,this.y2*=i,this},translate(i,s){return this.x1+=i,this.x2+=i,this.y1+=s,this.y2+=s,this},rotate(i,s,o){const l=this.rotatedPoints(i,s,o);return this.clear().add(l[0],l[1]).add(l[2],l[3]).add(l[4],l[5]).add(l[6],l[7])},rotatedPoints(i,s,o){var{x1:l,y1:c,x2:h,y2:g}=this,y=Math.cos(i),v=Math.sin(i),C=s-s*y+o*v,E=o-s*v-o*y;return[y*l-v*c+C,v*l+y*c+E,y*l-v*g+C,v*l+y*g+E,y*h-v*c+C,v*h+y*c+E,y*h-v*g+C,v*h+y*g+E]},union(i){return i.x1<this.x1&&(this.x1=i.x1),i.y1<this.y1&&(this.y1=i.y1),i.x2>this.x2&&(this.x2=i.x2),i.y2>this.y2&&(this.y2=i.y2),this},intersect(i){return i.x1>this.x1&&(this.x1=i.x1),i.y1>this.y1&&(this.y1=i.y1),i.x2<this.x2&&(this.x2=i.x2),i.y2<this.y2&&(this.y2=i.y2),this},encloses(i){return i&&this.x1<=i.x1&&this.x2>=i.x2&&this.y1<=i.y1&&this.y2>=i.y2},alignsWith(i){return i&&(this.x1==i.x1||this.x2==i.x2||this.y1==i.y1||this.y2==i.y2)},intersects(i){return i&&!(this.x2<i.x1||this.x1>i.x2||this.y2<i.y1||this.y1>i.y2)},contains(i,s){return!(i<this.x1||i>this.x2||s<this.y1||s>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}},(0,T.XW)(Yb,qb),lD.prototype={pending(){return this._pending},sanitizeURL(i){const s=this;return gM(s),s._loader.sanitize(i,{context:"href"}).then(o=>(Hy(s),o)).catch(()=>(Hy(s),null))},loadImage(i){const s=this,o="undefined"!=typeof Image?Image:null;return gM(s),s._loader.sanitize(i,{context:"image"}).then(l=>{const c=l.href;if(!c||!o)throw{url:c};const h=new o,g=(0,T.nr)(l,"crossOrigin")?l.crossOrigin:"anonymous";return null!=g&&(h.crossOrigin=g),h.onload=()=>Hy(s),h.onerror=()=>Hy(s),h.src=c,h}).catch(l=>(Hy(s),{complete:!1,width:0,height:0,src:l&&l.url||""}))},ready(){const i=this;return new Promise(s=>{!function o(l){i.pending()?setTimeout(()=>{o(!0)},10):s(l)}(!1)})}};const h2=Jl-1e-8;let tu,Bd,Xb,Mc,Wy,Ip,Rp,Dm;const js=(i,s)=>tu.add(i,s),xm=(i,s)=>js(Bd=i,Xb=s),uD=i=>js(i,tu.y1),Uo=i=>js(tu.x1,i),_l=(i,s)=>Wy*i+Rp*s,Oc=(i,s)=>Ip*i+Dm*s,Vd=(i,s)=>js(_l(i,s),Oc(i,s)),cD=(i,s)=>xm(_l(i,s),Oc(i,s));function Gy(i,s){return tu=i,s?(Mc=s*Pd,Wy=Dm=Math.cos(Mc),Ip=Math.sin(Mc),Rp=-Ip):(Wy=Dm=1,Mc=Ip=Rp=0),Sm}const Sm={beginPath(){},closePath(){},moveTo:cD,lineTo:cD,rect(i,s,o,l){Mc?(Vd(i+o,s),Vd(i+o,s+l),Vd(i,s+l),cD(i,s)):(js(i+o,s+l),xm(i,s))},quadraticCurveTo(i,s,o,l){const c=_l(i,s),h=Oc(i,s),g=_l(o,l),y=Oc(o,l);dD(Bd,c,g,uD),dD(Xb,h,y,Uo),xm(g,y)},bezierCurveTo(i,s,o,l,c,h){const g=_l(i,s),y=Oc(i,s),v=_l(o,l),C=Oc(o,l),E=_l(c,h),x=Oc(c,h);Hr(Bd,g,v,E,uD),Hr(Xb,y,C,x,Uo),xm(E,x)},arc(i,s,o,l,c,h){if(l+=Mc,c+=Mc,Bd=o*Math.cos(c)+i,Xb=o*Math.sin(c)+s,Math.abs(c-l)>h2)js(i-o,s-o),js(i+o,s+o);else{const g=C=>js(o*Math.cos(C)+i,o*Math.sin(C)+s);let y,v;if(g(l),g(c),c!==l)if((l%=Jl)<0&&(l+=Jl),(c%=Jl)<0&&(c+=Jl),c<l&&(h=!h,y=l,l=c,c=y),h)for(c-=Jl,y=l-l%xc,v=0;v<4&&y>c;++v,y-=xc)g(y);else for(y=l-l%xc+xc,v=0;v<4&&y<c;++v,y+=xc)g(y)}}};function dD(i,s,o,l){const c=(i-s)/(i+o-2*s);0<c&&c<1&&l(i+(s-i)*c)}function Hr(i,s,o,l,c){const h=l-i+3*s-3*o,g=i+o-2*s,y=i-s;let E,v=0,C=0;Math.abs(h)>1e-14?(E=g*g+y*h,E>=0&&(E=Math.sqrt(E),v=(-g+E)/h,C=(-g-E)/h)):v=.5*y/g,0<v&&v<1&&c(fD(v,i,s,o,l)),0<C&&C<1&&c(fD(C,i,s,o,l))}function fD(i,s,o,l,c){const h=1-i,g=h*h,y=i*i;return g*h*s+3*g*i*o+3*h*y*l+y*i*c}var $d=($d=op(1,1))?$d.getContext("2d"):null;const Kb=new $s;function hD(i){return function(s,o){if(!$d)return!0;i($d,s),Kb.clear().union(s.bounds).intersect(o).round();const{x1:l,y1:c,x2:h,y2:g}=Kb;for(let y=c;y<=g;++y)for(let v=l;v<=h;++v)if($d.isPointInPath(v,y))return!0;return!1}}function Zt(i,s){return s.contains(i.x||0,i.y||0)}function mM(i,s){const o=i.x||0,l=i.y||0;return s.intersects(Kb.set(o,l,o+(i.width||0),l+(i.height||0)))}function Qb(i,s){const o=i.x||0,l=i.y||0;return jd(s,o,l,null!=i.x2?i.x2:o,null!=i.y2?i.y2:l)}function jd(i,s,o,l,c){const{x1:h,y1:g,x2:y,y2:v}=i,C=l-s,E=c-o;let k,R,N,P,x=0,S=1;for(P=0;P<4;++P){if(0===P&&(k=-C,R=-(h-s)),1===P&&(k=C,R=y-s),2===P&&(k=-E,R=-(g-o)),3===P&&(k=E,R=v-o),Math.abs(k)<1e-10&&R<0)return!1;if(N=R/k,k<0){if(N>S)return!1;N>x&&(x=N)}else if(k>0){if(N<x)return!1;N<S&&(S=N)}}return!0}function Tc(i,s){i.globalCompositeOperation=s.blend||"source-over"}function nu(i,s){return null==i?s:i}function qy(i,s){const o=s.length;for(let l=0;l<o;++l)i.addColorStop(s[l].offset,s[l].color);return i}function Wr(i,s,o){return _m(o)?function(i,s,o){const l=o.width(),c=o.height();let h;if("radial"===s.gradient)h=i.createRadialGradient(o.x1+nu(s.x1,.5)*l,o.y1+nu(s.y1,.5)*c,Math.max(l,c)*nu(s.r1,0),o.x1+nu(s.x2,.5)*l,o.y1+nu(s.y2,.5)*c,Math.max(l,c)*nu(s.r2,.5));else{const g=nu(s.x1,0),y=nu(s.y1,0),v=nu(s.x2,1),C=nu(s.y2,0);if(g!==v&&y!==C&&l!==c){const E=op(Math.ceil(l),Math.ceil(c)),x=E.getContext("2d");return x.scale(l,c),x.fillStyle=qy(x.createLinearGradient(g,y,v,C),s.stops),x.fillRect(0,0,l,c),i.createPattern(E,"no-repeat")}h=i.createLinearGradient(o.x1+g*l,o.y1+y*c,o.x1+v*l,o.y1+C*c)}return qy(h,s.stops)}(i,o,s.bounds):o}function Jb(i,s,o){return(o*=null==s.fillOpacity?1:s.fillOpacity)>0&&(i.globalAlpha=o,i.fillStyle=Wr(i,s,s.fill),!0)}var yM=[];function zd(i,s,o){var l=null!=(l=s.strokeWidth)?l:1;return!(l<=0)&&(o*=null==s.strokeOpacity?1:s.strokeOpacity)>0&&(i.globalAlpha=o,i.strokeStyle=Wr(i,s,s.stroke),i.lineWidth=l,i.lineCap=s.strokeCap||"butt",i.lineJoin=s.strokeJoin||"miter",i.miterLimit=s.strokeMiterLimit||10,i.setLineDash&&(i.setLineDash(s.strokeDash||yM),i.lineDashOffset=s.strokeDashOffset||0),!0)}function p2(i,s){return i.zindex-s.zindex||i.index-s.index}function Zb(i){if(!i.zdirty)return i.zitems;var l,c,h,s=i.items,o=[];for(c=0,h=s.length;c<h;++c)(l=s[c]).index=c,l.zindex&&o.push(l);return i.zdirty=!1,i.zitems=o.sort(p2)}function iu(i,s){var l,c,o=i.items;if(!o||!o.length)return;const h=Zb(i);if(h&&h.length){for(l=0,c=o.length;l<c;++l)o[l].zindex||s(o[l]);o=h}for(l=0,c=o.length;l<c;++l)s(o[l])}function Xy(i,s){var l,c,o=i.items;if(!o||!o.length)return null;const h=Zb(i);for(h&&h.length&&(o=h),c=o.length;--c>=0;)if(l=s(o[c]))return l;if(o===h)for(c=(o=i.items).length;--c>=0;)if(!o[c].zindex&&(l=s(o[c])))return l;return null}function e1(i){return function(s,o,l){iu(o,c=>{(!l||l.intersects(c.bounds))&&pD(i,s,c,c)})}}function _M(i){return function(s,o,l){o.items.length&&(!l||l.intersects(o.bounds))&&pD(i,s,o.items[0],o.items)}}function pD(i,s,o,l){var c=null==o.opacity?1:o.opacity;0!==c&&(i(s,l)||(Tc(s,o),o.fill&&Jb(s,o,c)&&s.fill(),o.stroke&&zd(s,o,c)&&s.stroke()))}function t1(i){return i=i||T.yb,function(s,o,l,c,h,g){return l*=s.pixelRatio,c*=s.pixelRatio,Xy(o,y=>{const v=y.bounds;if((!v||v.contains(h,g))&&v&&i(s,y,l,c,h,g))return y})}}function kc(i,s){return function(o,l,c,h){var C,E,g=Array.isArray(l)?l[0]:l,y=null==s?g.fill:s,v=g.stroke&&o.isPointInStroke;return v&&(E=g.strokeCap,o.lineWidth=null!=(C=g.strokeWidth)?C:1,o.lineCap=null!=E?E:"butt"),!i(o,l)&&(y&&o.isPointInPath(c,h)||v&&o.isPointInStroke(c,h))}}function n1(i){return t1(kc(i))}function Np(i,s){return"translate("+i+","+s+")"}function i1(i){return"rotate("+i+")"}function r1(i){return Np(i.x||0,i.y||0)}function gD(i,s,o){function h(g,y){var v=y.x||0,C=y.y||0,E=y.angle||0;g.translate(v,C),E&&g.rotate(E*=Pd),g.beginPath(),s(g,y),E&&g.rotate(-E),g.translate(-v,-C)}return{type:i,tag:"path",nested:!1,attr:function(g,y){g("transform",function(i){return Np(i.x||0,i.y||0)+(i.angle?" "+i1(i.angle):"")}(y)),g("d",s(null,y))},bound:function(g,y){return s(Gy(g,y.angle),y),da(g,y).translate(y.x||0,y.y||0)},draw:e1(h),pick:n1(h),isect:o||hD(h)}}var Qy=gD("arc",function(i,s){return fM.context(i)(s)});function mD(i,s,o){function h(v,C){v.beginPath(),s(v,C)}const g=kc(h);return{type:i,tag:"path",nested:!0,attr:function(v,C){var E=C.mark.items;E.length&&v("d",s(null,E))},bound:function(v,C){var E=C.items;return 0===E.length?v:(s(Gy(v),E),da(v,E[0]))},draw:_M(h),pick:function(v,C,E,x,S,k){var R=C.items,N=C.bounds;return!R||!R.length||N&&!N.contains(S,k)?null:g(v,R,E*=v.pixelRatio,x*=v.pixelRatio)?R[0]:null},isect:Zt,tip:o}}var CM=mD("area",function(i,s){const o=s[0];return("horizontal"===o.orient?Ur:jt).curve($y(o.interpolate||"linear",o.orient,o.tension)).context(i)(s)},function(i,s){for(var g,y,o="horizontal"===i[0].orient?s[1]:s[0],l="horizontal"===i[0].orient?"y":"x",c=i.length,h=1/0;--c>=0;)!1!==i[c].defined&&(y=Math.abs(i[c][l]-o))<h&&(h=y,g=i[c]);return g});function yD(i,s){i.beginPath(),Ac(s)?yl(i,s,0,0):i.rect(0,0,s.width||0,s.height||0),i.clip()}function _D(i){const s=nu(i.strokeWidth,1);return null!=i.strokeOffset?i.strokeOffset:i.stroke&&s>.5&&s<1.5?.5-Math.abs(s-1):0}function DM(i,s){const o=_D(s);i("d",yl(null,s,o,o))}function Am(i,s,o,l){const c=_D(s);i.beginPath(),yl(i,s,(o||0)+c,(l||0)+c)}const Pp=kc(Am),Mm=kc(Am,!1),SM=kc(Am,!0);var o1={type:"group",tag:"g",nested:!1,attr:function(i,s){i("transform",r1(s))},bound:function(i,s){if(!s.clip&&s.items){const o=s.items,l=o.length;for(let c=0;c<l;++c)i.union(o[c].bounds)}return(s.clip||s.width||s.height)&&!s.noBound&&i.add(0,0).add(s.width||0,s.height||0),da(i,s),i.translate(s.x||0,s.y||0)},draw:function(i,s,o){iu(s,l=>{const c=l.x||0,h=l.y||0,g=l.strokeForeground,y=null==l.opacity?1:l.opacity;(l.stroke||l.fill)&&y&&(Am(i,l,c,h),Tc(i,l),l.fill&&Jb(i,l,y)&&i.fill(),l.stroke&&!g&&zd(i,l,y)&&i.stroke()),i.save(),i.translate(c,h),l.clip&&yD(i,l),o&&o.translate(-c,-h),iu(l,v=>{this.draw(i,v,o)}),o&&o.translate(c,h),i.restore(),g&&l.stroke&&y&&(Am(i,l,c,h),Tc(i,l),zd(i,l,y)&&i.stroke())})},pick:function(i,s,o,l,c,h){if(s.bounds&&!s.bounds.contains(c,h)||!s.items)return null;const g=o*i.pixelRatio,y=l*i.pixelRatio;return Xy(s,v=>{let C,E,x;const S=v.bounds;if(S&&!S.contains(c,h))return;E=v.x||0,x=v.y||0;const N=v.clip;if(N&&(c<E||c>E+(v.width||0)||h<x||h>x+(v.height||0)))return;if(i.save(),i.translate(E,x),E=c-E,x=h-x,N&&Ac(v)&&!SM(i,v,g,y))return i.restore(),null;const P=v.strokeForeground,z=!1!==s.interactive;return z&&P&&v.stroke&&Mm(i,v,g,y)?(i.restore(),v):(C=Xy(v,H=>function(i,s,o){return(!1!==i.interactive||"group"===i.marktype)&&i.bounds&&i.bounds.contains(s,o)}(H,E,x)?this.pick(H,o,l,E,x):null),!C&&z&&(v.fill||!P&&v.stroke)&&Pp(i,v,g,y)&&(C=v),i.restore(),C||null)})},isect:mM,content:function(i,s,o){i("clip-path",s.clip?aD(o,s,s):null)},background:function(i,s){i("class","background"),i("aria-hidden",!0),DM(i,s)},foreground:function(i,s){i("class","foreground"),i("aria-hidden",!0),s.strokeForeground?DM(i,s):i("d","")}},Ic={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Lp(i,s){var o=i.image;return(!o||i.url&&i.url!==o.url)&&(o={complete:!1,width:0,height:0},s.loadImage(i.url).then(l=>{i.image=l,i.image.url=i.url})),o}function Ud(i,s){return null!=i.width?i.width:s&&s.width?!1!==i.aspect&&i.height?i.height*s.width/s.height:s.width:0}function Tm(i,s){return null!=i.height?i.height:s&&s.height?!1!==i.aspect&&i.width?i.width*s.height/s.width:s.height:0}function Hd(i,s){return"center"===i?s/2:"right"===i?s:0}function Bp(i,s){return"middle"===i?s/2:"bottom"===i?s:0}var vD={type:"image",tag:"image",nested:!1,attr:function(i,s,o){const l=Lp(s,o),c=Ud(s,l),h=Tm(s,l),g=(s.x||0)-Hd(s.align,c),y=(s.y||0)-Bp(s.baseline,h);i("href",!l.src&&l.toDataURL?l.toDataURL():l.src||"",Ic["xmlns:xlink"],"xlink:href"),i("transform",Np(g,y)),i("width",c),i("height",h),i("preserveAspectRatio",!1===s.aspect?"none":"xMidYMid")},bound:function(i,s){const o=s.image,l=Ud(s,o),c=Tm(s,o),h=(s.x||0)-Hd(s.align,l),g=(s.y||0)-Bp(s.baseline,c);return i.set(h,g,h+l,g+c)},draw:function(i,s,o){iu(s,l=>{if(o&&!o.intersects(l.bounds))return;const c=Lp(l,this);let h=Ud(l,c),g=Tm(l,c);if(0===h||0===g)return;let C,E,x,S,y=(l.x||0)-Hd(l.align,h),v=(l.y||0)-Bp(l.baseline,g);!1!==l.aspect&&(E=c.width/c.height,x=l.width/l.height,E==E&&x==x&&E!==x&&(x<E?(S=h/E,v+=(g-S)/2,g=S):(S=g*E,y+=(h-S)/2,h=S))),(c.complete||c.toDataURL)&&(Tc(i,l),i.globalAlpha=null!=(C=l.opacity)?C:1,i.imageSmoothingEnabled=!1!==l.smooth,i.drawImage(c,y,v,h,g))})},pick:t1(),isect:T.yb,get:Lp,xOffset:Hd,yOffset:Bp},_2=mD("line",function(i,s){const o=s[0];return Lr.curve($y(o.interpolate||"linear",o.orient,o.tension)).context(i)(s)},function(i,s){for(var c,h,o=Math.pow(i[0].strokeWidth||1,2),l=i.length;--l>=0;)if(!1!==i[l].defined&&(c=i[l].x-s[0])*c+(h=i[l].y-s[1])*h<o)return i[l];return null});function u1(i,s){var o=s.path;if(null==o)return!0;var l=s.x||0,c=s.y||0,h=s.scaleX||1,g=s.scaleY||1,y=(s.angle||0)*Pd,v=s.pathCache;(!v||v.path!==o)&&((s.pathCache=v=kp(o)).path=o),y&&i.rotate&&i.translate?(i.translate(l,c),i.rotate(y),bm(i,v,0,0,h,g),i.rotate(-y),i.translate(-l,-c)):bm(i,v,l,c,h,g)}var v2={type:"path",tag:"path",nested:!1,attr:function(i,s){(1!==(s.scaleX||1)||1!==(s.scaleY||1))&&i("vector-effect","non-scaling-stroke"),i("transform",function(i){return Np(i.x||0,i.y||0)+(i.angle?" "+i1(i.angle):"")+(i.scaleX||i.scaleY?" "+function(i,s){return"scale("+i+","+s+")"}(i.scaleX||1,i.scaleY||1):"")}(s)),i("d",s.path)},bound:function(i,s){return u1(Gy(i,s.angle),s)?i.set(0,0,0,0):da(i,s,!0)},draw:e1(u1),pick:n1(u1),isect:hD(u1)};function bD(i,s){i.beginPath(),yl(i,s)}var TM={type:"rect",tag:"path",nested:!1,attr:function(i,s){i("d",yl(null,s))},bound:function(i,s){var o,l;return da(i.set(o=s.x||0,l=s.y||0,o+s.width||0,l+s.height||0),s)},draw:e1(bD),pick:n1(bD),isect:mM};function kM(i,s,o){var l,c,h,g;return!(!s.stroke||!zd(i,s,o)||(l=s.x||0,c=s.y||0,h=null!=s.x2?s.x2:l,g=null!=s.y2?s.y2:c,i.beginPath(),i.moveTo(l,c),i.lineTo(h,g),0))}var km={type:"rule",tag:"line",nested:!1,attr:function(i,s){i("transform",r1(s)),i("x2",null!=s.x2?s.x2-(s.x||0):0),i("y2",null!=s.y2?s.y2-(s.y||0):0)},bound:function(i,s){var o,l;return da(i.set(o=s.x||0,l=s.y||0,null!=s.x2?s.x2:o,null!=s.y2?s.y2:l),s)},draw:function(i,s,o){iu(s,l=>{if(!o||o.intersects(l.bounds)){var c=null==l.opacity?1:l.opacity;c&&kM(i,l,c)&&(Tc(i,l),i.stroke())}})},pick:t1(function(i,s,o,l){return!!i.isPointInStroke&&kM(i,s,1)&&i.isPointInStroke(o,l)}),isect:Qb},b2=gD("shape",function(i,s){return(s.mark.shape||s.shape).context(i)(s)}),FM=gD("symbol",function(i,s){return wm.context(i)(s)},Zt);const IM=(0,T.$m)();var Rc={height:vl,measureWidth:xD,estimateWidth:DD,width:DD,canvas:Zy};function Zy(i){Rc.width=i&&$d?xD:DD}function DD(i,s){return RM(nh(i,s),vl(i))}function RM(i,s){return~~(.8*i.length*s)}function xD(i,s){return vl(i)<=0||!(s=nh(i,s))?0:f1(s,e_(i))}function f1(i,s){const o=`(${s}) ${i}`;let l=IM.get(o);return void 0===l&&($d.font=s,l=$d.measureText(i).width,IM.set(o,l)),l}function vl(i){return null!=i.fontSize?+i.fontSize||0:11}function th(i){return null!=i.lineHeight?i.lineHeight:vl(i)+2}function Fm(i){return function(i){return(0,T.kJ)(i)?i.length>1?i:i[0]:i}(i.lineBreak&&i.text&&!(0,T.kJ)(i.text)?i.text.split(i.lineBreak):i.text)}function SD(i){const s=Fm(i);return((0,T.kJ)(s)?s.length-1:0)*th(i)}function nh(i,s){const o=null==s?"":(s+"").trim();return i.limit>0&&o.length?function(i,s){var o=+i.limit,l=function(i){if(Rc.width===xD){const s=e_(i);return o=>f1(o,s)}{const s=vl(i);return o=>RM(o,s)}}(i);if(l(s)<o)return s;var v,c=i.ellipsis||"\u2026",h="rtl"===i.dir,g=0,y=s.length;if(o-=l(c),h){for(;g<y;)l(s.slice(v=g+y>>>1))>o?g=v+1:y=v;return c+s.slice(g)}for(;g<y;)l(s.slice(0,v=1+(g+y>>>1)))<o?g=v:y=v-1;return s.slice(0,g)+c}(i,o):o}function Vp(i,s){var o=i.font;return(s&&o?String(o).replace(/"/g,"'"):o)||"sans-serif"}function e_(i,s){return(i.fontStyle?i.fontStyle+" ":"")+(i.fontVariant?i.fontVariant+" ":"")+(i.fontWeight?i.fontWeight+" ":"")+vl(i)+"px "+Vp(i,s)}function t_(i){var s=i.baseline,o=vl(i);return Math.round("top"===s?.79*o:"middle"===s?.3*o:"bottom"===s?-.21*o:"line-top"===s?.29*o+.5*th(i):"line-bottom"===s?.29*o-.5*th(i):0)}Zy(!0);const E2={left:"start",center:"middle",right:"end"},n_=new $s;function Im(i){var c,s=i.x||0,o=i.y||0,l=i.radius||0;return l&&(c=(i.theta||0)-xc,s+=l*Math.cos(c),o+=l*Math.sin(c)),n_.x1=s,n_.y1=o,n_}function Yn(i,s,o){var x,l=Rc.height(s),c=s.align,h=Im(s),g=h.x1,y=h.y1,v=s.dx||0,C=(s.dy||0)+t_(s)-Math.round(.8*l),E=Fm(s);if((0,T.kJ)(E)?(l+=th(s)*(E.length-1),x=E.reduce((S,k)=>Math.max(S,Rc.width(s,k)),0)):x=Rc.width(s,E),"center"===c?v-=x/2:"right"===c&&(v-=x),i.set(v+=g,C+=y,v+x,C+l),s.angle&&!o)i.rotate(s.angle*Pd,g,y);else if(2===o)return i.rotatedPoints(s.angle*Pd,g,y);return i}var bl={arc:Qy,area:CM,group:o1,image:vD,line:_2,path:v2,rect:TM,rule:km,shape:b2,symbol:FM,text:{type:"text",tag:"text",nested:!1,attr:function(i,s){var v,o=s.dx||0,l=(s.dy||0)+t_(s),c=Im(s),h=c.x1,g=c.y1,y=s.angle||0;i("text-anchor",E2[s.align]||"start"),y?(v=Np(h,g)+" "+i1(y),(o||l)&&(v+=" "+Np(o,l))):v=Np(h+o,g+l),i("transform",v)},bound:Yn,draw:function(i,s,o){iu(s,l=>{var h,g,y,v,C,E,x,c=null==l.opacity?1:l.opacity;if(!(o&&!o.intersects(l.bounds)||0===c||l.fontSize<=0||null==l.text||0===l.text.length)){if(i.font=e_(l),i.textAlign=l.align||"left",g=(h=Im(l)).x1,y=h.y1,l.angle&&(i.save(),i.translate(g,y),i.rotate(l.angle*Pd),g=y=0),g+=l.dx||0,y+=(l.dy||0)+t_(l),E=Fm(l),Tc(i,l),(0,T.kJ)(E))for(C=th(l),v=0;v<E.length;++v)x=nh(l,E[v]),l.fill&&Jb(i,l,c)&&i.fillText(x,g,y),l.stroke&&zd(i,l,c)&&i.strokeText(x,g,y),y+=C;else x=nh(l,E),l.fill&&Jb(i,l,c)&&i.fillText(x,g,y),l.stroke&&zd(i,l,c)&&i.strokeText(x,g,y);l.angle&&i.restore()}})},pick:t1(function(i,s,o,l,c,h){if(s.fontSize<=0)return!1;if(!s.angle)return!0;var g=Im(s),y=g.x1,v=g.y1,C=Yn(n_,s,1),E=-s.angle*Pd,x=Math.cos(E),S=Math.sin(E);return C.contains(x*c-S*h+(y-x*y+S*v),S*c+x*h+(v-S*y-x*v))}),isect:function(i,s){const o=Yn(n_,i,2);return jd(s,o[0],o[1],o[2],o[3])||jd(s,o[0],o[1],o[4],o[5])||jd(s,o[4],o[5],o[6],o[7])||jd(s,o[2],o[3],o[6],o[7])}},trail:mD("trail",function(i,s){return Em.context(i)(s)},function(i,s){for(var l,c,o=i.length;--o>=0;)if(!1!==i[o].defined&&(l=i[o].x-s[0])*l+(c=i[o].y-s[1])*c<(l=i[o].size||1)*l)return i[o];return null})};function Lu(i,s,o){var l=bl[i.mark.marktype];return l.nested&&(i=i.mark),(s||l.bound)(i.bounds||(i.bounds=new $s),i,o)}var MD={mark:null};function h1(i,s,o){var y,v,C,E,l=bl[i.marktype],c=l.bound,h=i.items,g=h&&h.length;if(l.nested)return g?C=h[0]:(MD.mark=i,C=MD),E=Lu(C,c,o),s&&s.union(E)||E;if(s=s||i.bounds&&i.bounds.clear()||new $s,g)for(y=0,v=h.length;y<v;++y)s.union(Lu(h[y],c,o));return i.bounds=s}const p1=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function BM(i,s){return JSON.stringify(i,p1,s)}function $p(i){return VM("string"==typeof i?JSON.parse(i):i)}function VM(i){var l,c,h,s=i.marktype,o=i.items;if(o)for(c=0,h=o.length;c<h;++c)o[c][l=s?"mark":"group"]=i,o[c].zindex&&(o[c][l].zdirty=!0),"group"===(s||l)&&VM(o[c]);return s&&h1(i),i}function $M(i){arguments.length?this.root=$p(i):(this.root=jM({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Yb(this.root)])}function jM(i,s){const o={bounds:new $s,clip:!!i.clip,group:s,interactive:!1!==i.interactive,items:[],marktype:i.marktype,name:i.name||void 0,role:i.role||void 0,zindex:i.zindex||0};return null!=i.aria&&(o.aria=i.aria),i.description&&(o.description=i.description),o}function Mn(i,s,o){return!i&&"undefined"!=typeof document&&document.createElement&&(i=document),i?o?i.createElementNS(o,s):i.createElement(s):null}function g1(i,s){s=s.toLowerCase();for(var o=i.childNodes,l=0,c=o.length;l<c;++l)if(o[l].tagName.toLowerCase()===s)return o[l]}function Cl(i,s,o,l){var h,c=i.childNodes[s];return(!c||c.tagName.toLowerCase()!==o.toLowerCase())&&(h=c||null,c=Mn(i.ownerDocument,o,l),i.insertBefore(c,h)),c}function wo(i,s){for(var o=i.childNodes,l=o.length;l>s;)i.removeChild(o[--l]);return i}function Ra(i){return"mark-"+i.marktype+(i.role?" role-"+i.role:"")+(i.name?" "+i.name:"")}function m1(i,s){const o=s.getBoundingClientRect();return[i.clientX-o.left-(s.clientLeft||0),i.clientY-o.top-(s.clientTop||0)]}function ih(i,s){this._active=null,this._handlers={},this._loader=i||Dv(),this._tooltip=s||zM}function zM(i,s,o,l){i.element().setAttribute("title",l||"")}function Nc(i){this._el=null,this._bgcolor=null,this._loader=new lD(i)}$M.prototype={toJSON(i){return BM(this.root,i||0)},mark(i,s,o){const l=jM(i,s=s||this.root.items[0]);return s.items[o]=l,l.zindex&&(l.group.zdirty=!0),l}},ih.prototype={initialize(i,s,o){return this._el=i,this._obj=o||null,this.origin(s)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(i){return arguments.length?(this._origin=i||[0,0],this):this._origin.slice()},scene(i){return arguments.length?(this._scene=i,this):this._scene},on(){},off(){},_handlerIndex(i,s,o){for(let l=i?i.length:0;--l>=0;)if(i[l].type===s&&(!o||i[l].handler===o))return l;return-1},handlers(i){const s=this._handlers,o=[];if(i)o.push(...s[this.eventName(i)]);else for(const l in s)o.push(...s[l]);return o},eventName(i){const s=i.indexOf(".");return s<0?i:i.slice(0,s)},handleHref(i,s,o){this._loader.sanitize(o,{context:"href"}).then(l=>{const c=new MouseEvent(i.type,i),h=Mn(null,"a");for(const g in l)h.setAttribute(g,l[g]);h.dispatchEvent(c)}).catch(()=>{})},handleTooltip(i,s,o){s&&null!=s.tooltip&&(s=function(i,s,o,l){var h,g,c=i&&i.mark;if(c&&(h=bl[c.marktype]).tip){for((g=m1(s,o))[0]-=l[0],g[1]-=l[1];i=i.mark.group;)g[0]-=i.x||0,g[1]-=i.y||0;i=h.tip(c.items,g)}return i}(s,i,this.canvas(),this._origin),this._tooltip.call(this._obj,this,i,s,o&&s&&s.tooltip||null))},getItemBoundingClientRect(i){const s=this.canvas();if(!s)return;const o=s.getBoundingClientRect(),l=this._origin,c=i.bounds,h=c.width(),g=c.height();let y=c.x1+l[0]+o.left,v=c.y1+l[1]+o.top;for(;i.mark&&(i=i.mark.group);)y+=i.x||0,v+=i.y||0;return{x:y,y:v,width:h,height:g,left:y,top:v,right:y+h,bottom:v+g}}},Nc.prototype={initialize(i,s,o,l,c){return this._el=i,this.resize(s,o,l,c)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(i){return 0===arguments.length?this._bgcolor:(this._bgcolor=i,this)},resize(i,s,o,l){return this._width=i,this._height=s,this._origin=o||[0,0],this._scale=l||1,this},dirty(){},render(i){const s=this;return s._call=function(){s._render(i)},s._call(),s._call=null,s},_render(){},renderAsync(i){const s=this.render(i);return this._ready?this._ready.then(()=>s):Promise.resolve(s)},_load(i,s){var o=this,l=o._loader[i](s);if(!o._ready){const c=o._call;o._ready=o._loader.ready().then(h=>{h&&c(),o._ready=null})}return l},sanitizeURL(i){return this._load("sanitizeURL",i)},loadImage(i){return this._load("loadImage",i)}};const TD="dragenter",y1="dragleave",HM="dragover",i_="mousedown",_1="mousemove",Rm="mouseout",FD="mouseover",r_="click",v1="mousewheel",Lc="touchstart",s_="touchmove",Nm="touchend",f=_1,m=Rm,b=r_;function w(i,s){ih.call(this,i,s),this._down=null,this._touch=null,this._first=!0,this._events={}}function O(i,s){(i=>i===Lc||i===s_||i===Nm?[Lc,s_,Nm]:[i])(s).forEach(o=>function(i,s){const o=i.canvas();o&&!i._events[s]&&(i._events[s]=1,o.addEventListener(s,i[s]?l=>i[s](l):l=>i.fire(s,l)))}(i,o))}function B(i,s,o){return function(l){const c=this._active,h=this.pickEvent(l);h===c||((!c||!c.exit)&&this.fire(o,l),this._active=h,this.fire(s,l)),this.fire(i,l)}}function $(i){return function(s){this.fire(i,s),this._active=null}}(0,T.XW)(w,ih,{initialize(i,s,o){return this._canvas=i&&g1(i,"canvas"),[r_,i_,_1,Rm,y1].forEach(l=>O(this,l)),ih.prototype.initialize.call(this,i,s,o)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:["keydown","keypress","keyup",TD,y1,HM,i_,"mouseup",_1,Rm,FD,r_,"dblclick","wheel",v1,Lc,s_,Nm],DOMMouseScroll(i){this.fire(v1,i)},mousemove:B(_1,FD,Rm),dragover:B(HM,TD,y1),mouseout:$(Rm),dragleave:$(y1),mousedown(i){this._down=this._active,this.fire(i_,i)},click(i){this._down===this._active&&(this.fire(r_,i),this._down=null)},touchstart(i){this._touch=this.pickEvent(i.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Lc,i,!0)},touchmove(i){this.fire(s_,i,!0)},touchend(i){this.fire(Nm,i,!0),this._touch=null},fire(i,s,o){const l=o?this._touch:this._active,c=this._handlers[i];if(s.vegaType=i,i===b&&l&&l.href?this.handleHref(s,l,l.href):(i===f||i===m)&&this.handleTooltip(s,l,i!==m),c)for(let h=0,g=c.length;h<g;++h)c[h].handler.call(this._obj,s,l)},on(i,s){const o=this.eventName(i),l=this._handlers;return this._handlerIndex(l[o],i,s)<0&&(O(this,i),(l[o]||(l[o]=[])).push({type:i,handler:s})),this},off(i,s){const o=this.eventName(i),l=this._handlers[o],c=this._handlerIndex(l,i,s);return c>=0&&l.splice(c,1),this},pickEvent(i){const s=m1(i,this._canvas),o=this._origin;return this.pick(this._scene,s[0],s[1],s[0]-o[0],s[1]-o[1])},pick(i,s,o,l,c){const h=this.context();return bl[i.marktype].pick.call(this,h,i,s,o,l,c)}});var ee="undefined"!=typeof window&&window.devicePixelRatio||1;function Se(i){Nc.call(this,i),this._options={},this._redraw=!1,this._dirty=new $s,this._tempb=new $s}const He=Nc.prototype;function vt(i,s){ih.call(this,i,s);const o=this;o._hrefHandler=St(o,(l,c)=>{c&&c.href&&o.handleHref(l,c,c.href)}),o._tooltipHandler=St(o,(l,c)=>{o.handleTooltip(l,c,l.type!==m)})}(0,T.XW)(Se,Nc,{initialize(i,s,o,l,c,h){return this._options=h||{},this._canvas=this._options.externalContext?null:op(1,1),i&&this._canvas&&(wo(i,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),He.initialize.call(this,i,s,o,l,c)},resize(i,s,o,l){if(He.resize.call(this,i,s,o,l),this._canvas)!function(i,s,o,l,c,h){const g="undefined"!=typeof HTMLElement&&i instanceof HTMLElement&&null!=i.parentNode,y=i.getContext("2d"),v=g?ee:c;i.width=s*v,i.height=o*v;for(const C in h)y[C]=h[C];g&&1!==v&&(i.style.width=s+"px",i.style.height=o+"px"),y.pixelRatio=v,y.setTransform(v,0,0,v,v*l[0],v*l[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const c=this._options.externalContext;c||(0,T.vU)("CanvasRenderer is missing a valid canvas or context"),c.scale(this._scale,this._scale),c.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(i){const s=this._tempb.clear().union(i.bounds);let o=i.mark.group;for(;o;)s.translate(o.x||0,o.y||0),o=o.mark.group;this._dirty.union(s)},_render(i){const s=this.context(),o=this._origin,l=this._width,c=this._height,h=this._dirty,g=((i,s,o)=>(new $s).set(0,0,s,o).translate(-i[0],-i[1]))(o,l,c);s.save();const y=this._redraw||h.empty()?(this._redraw=!1,g.expand(1)):function(i,s,o){return s.expand(1).round(),i.pixelRatio%1&&s.scale(i.pixelRatio).round().scale(1/i.pixelRatio),s.translate(-o[0]%1,-o[1]%1),i.beginPath(),i.rect(s.x1,s.y1,s.width(),s.height()),i.clip(),s}(s,g.intersect(h),o);return this.clear(-o[0],-o[1],l,c),this.draw(s,i,y),s.restore(),h.clear(),this},draw(i,s,o){const l=bl[s.marktype];s.clip&&function(i,s){var o=s.clip;i.save(),(0,T.mf)(o)?(i.beginPath(),o(i),i.clip()):yD(i,s.group)}(i,s),l.draw.call(this,i,s,o),s.clip&&i.restore()},clear(i,s,o,l){const c=this._options,h=this.context();"pdf"!==c.type&&!c.externalContext&&h.clearRect(i,s,o,l),null!=this._bgcolor&&(h.fillStyle=this._bgcolor,h.fillRect(i,s,o,l))}});const St=(i,s)=>o=>{let l=o.target.__data__;l=Array.isArray(l)?l[0]:l,o.vegaType=o.type,s.call(i._obj,o,l)};(0,T.XW)(vt,ih,{initialize(i,s,o){let l=this._svg;return l&&(l.removeEventListener(b,this._hrefHandler),l.removeEventListener(f,this._tooltipHandler),l.removeEventListener(m,this._tooltipHandler)),this._svg=l=i&&g1(i,"svg"),l&&(l.addEventListener(b,this._hrefHandler),l.addEventListener(f,this._tooltipHandler),l.addEventListener(m,this._tooltipHandler)),ih.prototype.initialize.call(this,i,s,o)},canvas(){return this._svg},on(i,s){const o=this.eventName(i),l=this._handlers;if(this._handlerIndex(l[o],i,s)<0){const h={type:i,handler:s,listener:St(this,s)};(l[o]||(l[o]=[])).push(h),this._svg&&this._svg.addEventListener(o,h.listener)}return this},off(i,s){const o=this.eventName(i),l=this._handlers[o],c=this._handlerIndex(l,i,s);return c>=0&&(this._svg&&this._svg.removeEventListener(o,l[c].listener),l.splice(c,1)),this}});const Rt="aria-hidden",an="aria-label",Vt="role",kn="aria-roledescription",Bn="graphics-object",ui="graphics-symbol",Mi=(i,s,o)=>({[Vt]:i,[kn]:s,[an]:o||void 0}),Ni=(0,T.Rg)(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Ui={axis:{desc:"axis",caption:function(i){const s=i.datum,o=i.orient,l=s.title?jp(i):null,c=i.context,h=c.scales[s.scale].value,g=c.dataflow.locale(),y=h.type;return("left"===o||"right"===o?"Y":"X")+"-axis"+(l?` titled '${l}'`:"")+` for a ${dm(y)?"discrete":y} scale with ${mm(g,h,i)}`}},legend:{desc:"legend",caption:function(i){const s=i.datum,o=s.title?jp(i):null,l=`${s.type||""} legend`.trim(),c=s.scales,h=Object.keys(c),g=i.context,y=g.scales[c[h[0]]].value,v=g.dataflow.locale();return function(i){return i.length?i[0].toUpperCase()+i.slice(1):i}(l)+(o?` titled '${o}'`:"")+` for ${function(i){return(i=i.map(s=>s+("fill"===s||"stroke"===s?" color":""))).length<2?i[0]:i.slice(0,-1).join(", ")+" and "+(0,T.fj)(i)}(h)} with ${mm(v,y,i)}`}},"title-text":{desc:"title",caption:i=>`Title text '${wl(i)}'`},"title-subtitle":{desc:"subtitle",caption:i=>`Subtitle text '${wl(i)}'`}},Bc={ariaRole:Vt,ariaRoleDescription:kn,description:an};function ru(i,s){const o=!1===s.aria;if(i(Rt,o||void 0),o||null==s.description)for(const l in Bc)i(Bc[l],void 0);else{const l=s.mark.marktype;i(an,s.description),i(Vt,s.ariaRole||("group"===l?Bn:ui)),i(kn,s.ariaRoleDescription||`${l} mark`)}}function Na(i){return!1===i.aria?{[Rt]:!0}:Ni[i.role]?null:Ui[i.role]?function(i,s){try{const o=i.items[0],l=s.caption||(()=>"");return Mi(s.role||ui,s.desc,o.description||l(o))}catch(o){return null}}(i,Ui[i.role]):function(i){const s=i.marktype,o="group"===s||"text"===s||i.items.some(l=>null!=l.description&&!1!==l.aria);return Mi(o?Bn:ui,`${s} mark container`,i.description)}(i)}function wl(i){return(0,T.IX)(i.text).join(" ")}function jp(i){try{return(0,T.IX)((0,T.fj)(i.items).items[0].text).join(" ")}catch(s){return null}}const Lm=i=>(i+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");function zp(){let i="",s="",o="";const l=[],c=()=>s=o="",g=(v,C)=>(null!=C&&(s+=` ${v}="${(i=>Lm(i).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"))(C)}"`),y),y={open(v,...C){(v=>{s&&(i+=`${s}>${o}`,c()),l.push(v)})(v),s="<"+v;for(const E of C)for(const x in E)g(x,E[x]);return y},close(){const v=l.pop();return i+=s?s+(o?`>${o}</${v}>`:"/>"):`</${v}>`,c(),y},attr:g,text:v=>(o+=Lm(v),y),toString:()=>i};return y}const IL=i=>Bm(zp(),i)+"";function Bm(i,s){if(i.open(s.tagName),s.hasAttributes()){const o=s.attributes,l=o.length;for(let c=0;c<l;++c)i.attr(o[c].name,o[c].value)}if(s.hasChildNodes()){const o=s.childNodes,l=o.length;for(let c=0;c<l;c++){const h=o[c];3===h.nodeType?i.text(h.nodeValue):Bm(i,h)}}return i.close()}const ki={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},Gd={fill:"none","stroke-miterlimit":10},Up="http://www.w3.org/2000/xmlns/",Us=Ic.xmlns;function Un(i){Nc.call(this,i),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const fa=Nc.prototype;function a_(i,s){for(;i&&i.dirty!==s;i=i.mark.group){if(i.dirty=s,!i.mark||i.mark.dirty===s)return;i.mark.dirty=s}}function rh(i,s,o){let l,c,h;if("radial"===s.gradient){let g=Cl(i,o++,"pattern",Us);Wp(g,{id:"p_"+s.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),g=Cl(g,0,"rect",Us),Wp(g,{width:1,height:1,fill:`url(${qM()}#${s.id})`}),Wp(i=Cl(i,o++,"radialGradient",Us),{id:s.id,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})}else Wp(i=Cl(i,o++,"linearGradient",Us),{id:s.id,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(l=0,c=s.stops.length;l<c;++l)h=Cl(i,l,"stop",Us),h.setAttribute("offset",s.stops[l].offset),h.setAttribute("stop-color",s.stops[l].color);return wo(i,l),o}function A2(i,s,o){let l;return(i=Cl(i,o,"clipPath",Us)).setAttribute("id",s.id),s.path?(l=Cl(i,0,"path",Us),l.setAttribute("d",s.path)):(l=Cl(i,0,"rect",Us),Wp(l,{x:0,y:0,width:s.width,height:s.height})),wo(i,1),o+1}function C1(i,s,o,l,c){let g,h=i._svg;if(!h&&(g=s.ownerDocument,h=Mn(g,l,Us),i._svg=h,i.mark&&(h.__data__=i,h.__values__={fill:"default"},"g"===l))){const y=Mn(g,"path",Us);h.appendChild(y),y.__data__=i;const v=Mn(g,"g",Us);h.appendChild(v),v.__data__=i;const C=Mn(g,"path",Us);h.appendChild(C),C.__data__=i,C.__values__={fill:"default"}}return(h.ownerSVGElement!==c||function(i,s){return i.parentNode&&i.parentNode.childNodes.length>1&&i.previousSibling!=s}(h,o))&&s.insertBefore(h,o?o.nextSibling:s.firstChild),h}(0,T.XW)(Un,Nc,{initialize(i,s,o,l,c){return this._defs={},this._clearDefs(),i&&(this._svg=Cl(i,0,"svg",Us),this._svg.setAttributeNS(Up,"xmlns",Us),this._svg.setAttributeNS(Up,"xmlns:xlink",Ic["xmlns:xlink"]),this._svg.setAttribute("version",Ic.version),this._svg.setAttribute("class","marks"),wo(i,1),this._root=Cl(this._svg,0,"g",Us),Wp(this._root,Gd),wo(this._svg,1)),this.background(this._bgcolor),fa.initialize.call(this,i,s,o,l,c)},background(i){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",i),fa.background.apply(this,arguments)},resize(i,s,o,l){return fa.resize.call(this,i,s,o,l),this._svg&&(Wp(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const i=this._svg,s=this._bgcolor;if(!i)return null;let o;s&&(i.removeAttribute("style"),o=Cl(i,0,"rect",Us),Wp(o,{width:this._width,height:this._height,fill:s}));const l=IL(i);return s&&(i.removeChild(o),this._svg.style.setProperty("background-color",s)),l},_render(i){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,i),wo(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(i){i.dirty!==this._dirtyID&&(i.dirty=this._dirtyID,this._dirty.push(i))},isDirty(i){return this._dirtyAll||!i._svg||i.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const i=this._dirty;if(!i.length||!this._dirtyID)return!0;const s=++this._dirtyID;let o,l,c,h,g,y,v;for(g=0,y=i.length;g<y;++g)if(o=i[g],l=o.mark,l.marktype!==c&&(c=l.marktype,h=bl[c]),l.zdirty&&l.dirty!==s&&(this._dirtyAll=!1,a_(o,s),l.items.forEach(C=>{C.dirty=s})),!l.zdirty){if(o.exit){h.nested&&l.items.length?(v=l.items[0],v._svg&&this._update(h,v._svg,v)):o._svg&&(v=o._svg.parentNode,v&&v.removeChild(o._svg)),o._svg=null;continue}o=h.nested?l.items[0]:o,o._update!==s&&(o._svg&&o._svg.ownerSVGElement?this._update(h,o._svg,o):(this._dirtyAll=!1,a_(o,s)),o._update=s)}return!this._dirtyAll},mark(i,s,o){if(!this.isDirty(s))return s._svg;const l=this._svg,c=bl[s.marktype],h=!1===s.interactive?"none":null,g="g"===c.tag;let y=null,v=0;const C=C1(s,i,o,"g",l);C.setAttribute("class",Ra(s));const E=Na(s);for(const S in E)El(C,S,E[S]);g||El(C,"pointer-events",h),El(C,"clip-path",s.clip?aD(this,s,s.group):null);const x=S=>{const k=this.isDirty(S),R=C1(S,C,y,c.tag,l);k&&(this._update(c,R,S),g&&function(i,s,o){s=s.lastChild.previousSibling;let l,c=0;iu(o,h=>{l=i.mark(s,h,l),++c}),wo(s,1+c)}(this,R,S)),y=R,++v};return c.nested?s.items.length&&x(s.items[0]):iu(s,x),wo(C,v),C},_update(i,s,o){Hp=s,Pa=s.__values__,ru(Rr,o),i.attr(Rr,o,this);const l=$c[i.type];l&&l.call(this,i,s,o),Hp&&this.style(Hp,o)},style(i,s){if(null!=s)for(const o in ki){let l="font"===o?Vp(s):s[o];if(l===Pa[o])continue;const c=ki[o];null==l?i.removeAttribute(c):(_m(l)&&(l=dn(l,this._defs.gradient,qM())),i.setAttribute(c,l+"")),Pa[o]=l}},defs(){const i=this._svg,s=this._defs;let o=s.el,l=0;for(const c in s.gradient)o||(s.el=o=Cl(i,1,"defs",Us)),l=rh(o,s.gradient[c],l);for(const c in s.clipping)o||(s.el=o=Cl(i,1,"defs",Us)),l=A2(o,s.clipping[c],l);o&&(0===l?(i.removeChild(o),s.el=null):wo(o,l))},_clearDefs(){const i=this._defs;i.gradient={},i.clipping={}}});let Hp=null,Pa=null;const $c={group(i,s,o){const l=Hp=s.childNodes[2];Pa=l.__values__,i.foreground(Rr,o,this),Pa=s.__values__,Hp=s.childNodes[1],i.content(Rr,o,this);const c=Hp=s.childNodes[0];i.background(Rr,o,this);const h=!1===o.mark.interactive?"none":null;if(h!==Pa.events&&(El(l,"pointer-events",h),El(c,"pointer-events",h),Pa.events=h),o.strokeForeground&&o.stroke){const g=o.fill;El(l,"display",null),this.style(c,o),El(c,"stroke",null),g&&(o.fill=null),Pa=l.__values__,this.style(l,o),g&&(o.fill=g),Hp=null}else El(l,"display","none")},image(i,s,o){!1===o.smooth?(zu(s,"image-rendering","optimizeSpeed"),zu(s,"image-rendering","pixelated")):zu(s,"image-rendering",null)},text(i,s,o){const l=Fm(o);let c,h,g,y;(0,T.kJ)(l)?(h=l.map(v=>nh(o,v)),c=h.join("\n"),c!==Pa.text&&(wo(s,0),g=s.ownerDocument,y=th(o),h.forEach((v,C)=>{const E=Mn(g,"tspan",Us);E.__data__=o,E.textContent=v,C&&(E.setAttribute("x",0),E.setAttribute("dy",y)),s.appendChild(E)}),Pa.text=c)):(h=nh(o,l),h!==Pa.text&&(s.textContent=h,Pa.text=h)),El(s,"font-family",Vp(o)),El(s,"font-size",vl(o)+"px"),El(s,"font-style",o.fontStyle),El(s,"font-variant",o.fontVariant),El(s,"font-weight",o.fontWeight)}};function Rr(i,s,o){s!==Pa[i]&&(o?function(i,s,o,l){null!=o?i.setAttributeNS(l,s,o):i.removeAttributeNS(l,s)}(Hp,i,s,o):El(Hp,i,s),Pa[i]=s)}function zu(i,s,o){o!==Pa[s]&&(null==o?i.style.removeProperty(s):i.style.setProperty(s,o+""),Pa[s]=o)}function Wp(i,s){for(const o in s)El(i,o,s[o])}function El(i,s,o){null!=o?i.setAttribute(s,o):i.removeAttribute(s)}function qM(){let i;return"undefined"==typeof window?"":(i=window.location).hash?i.href.slice(0,-i.hash.length):i.href}function Vm(i){Nc.call(this,i),this._text=null,this._defs={gradient:{},clipping:{}}}(0,T.XW)(Vm,Nc,{svg(){return this._text},_render(i){const s=zp();s.open("svg",(0,T.l7)({},Ic,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const o=this._bgcolor;return o&&"transparent"!==o&&"none"!==o&&s.open("rect",{width:this._width,height:this._height,fill:o}).close(),s.open("g",Gd,{transform:"translate("+this._origin+")"}),this.mark(s,i),s.close(),this.defs(s),this._text=s.close()+"",this},mark(i,s){const o=bl[s.marktype],l=o.tag,c=[ru,o.attr];i.open("g",{class:Ra(s),"clip-path":s.clip?aD(this,s,s.group):null},Na(s),{"pointer-events":"g"!==l&&!1===s.interactive?"none":null});const h=g=>{const y=this.href(g);if(y&&i.open("a",y),i.open(l,this.attr(s,g,c,"g"!==l?l:null)),"text"===l){const v=Fm(g);if((0,T.kJ)(v)){const C={x:0,dy:th(g)};for(let E=0;E<v.length;++E)i.open("tspan",E?C:null).text(nh(g,v[E])).close()}else i.text(nh(g,v))}else if("g"===l){const v=g.strokeForeground,C=g.fill,E=g.stroke;v&&E&&(g.stroke=null),i.open("path",this.attr(s,g,o.background,"bgrect")).close(),i.open("g",this.attr(s,g,o.content)),iu(g,x=>this.mark(i,x)),i.close(),v&&E?(C&&(g.fill=null),g.stroke=E,i.open("path",this.attr(s,g,o.foreground,"bgrect")).close(),C&&(g.fill=C)):i.open("path",this.attr(s,g,o.foreground,"bgfore")).close()}i.close(),y&&i.close()};return o.nested?s.items&&s.items.length&&h(s.items[0]):iu(s,h),i.close()},href(i){const s=i.href;let o;if(s){if(o=this._hrefs&&this._hrefs[s])return o;this.sanitizeURL(s).then(l=>{l["xlink:href"]=l.href,l.href=null,(this._hrefs||(this._hrefs={}))[s]=l})}return null},attr(i,s,o,l){const c={},h=(g,y,v,C)=>{c[C||g]=y};return Array.isArray(o)?o.forEach(g=>g(h,s,this)):o(h,s,this),l&&function(i,s,o,l,c){if(null==s||("bgrect"===l&&!1===o.interactive&&(i["pointer-events"]="none"),"bgfore"===l&&(!1===o.interactive&&(i["pointer-events"]="none"),i.display="none",null!==s.fill)))return i;"image"===l&&!1===s.smooth&&(i.style="image-rendering: optimizeSpeed; image-rendering: pixelated;"),"text"===l&&(i["font-family"]=Vp(s),i["font-size"]=vl(s)+"px",i["font-style"]=s.fontStyle,i["font-variant"]=s.fontVariant,i["font-weight"]=s.fontWeight);for(const h in ki){let g=s[h];const y=ki[h];"transparent"===g&&("fill"===y||"stroke"===y)||null!=g&&(_m(g)&&(g=dn(g,c.gradient,"")),i[y]=g)}}(c,s,i,l,this._defs),c},defs(i){const s=this._defs.gradient,o=this._defs.clipping;if(Object.keys(s).length+Object.keys(o).length!==0){i.open("defs");for(const c in s){const h=s[c],g=h.stops;"radial"===h.gradient?(i.open("pattern",{id:"p_"+c,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),i.open("rect",{width:"1",height:"1",fill:"url(#"+c+")"}).close(),i.close(),i.open("radialGradient",{id:c,fx:h.x1,fy:h.y1,fr:h.r1,cx:h.x2,cy:h.y2,r:h.r2})):i.open("linearGradient",{id:c,x1:h.x1,x2:h.x2,y1:h.y1,y2:h.y2});for(let y=0;y<g.length;++y)i.open("stop",{offset:g[y].offset,"stop-color":g[y].color}).close();i.close()}for(const c in o){const h=o[c];i.open("clipPath",{id:c}),h.path?i.open("path",{d:h.path}).close():i.open("rect",{x:0,y:0,width:h.width,height:h.height}).close(),i.close()}i.close()}}});const sh={Canvas:"canvas",PNG:"png",SVG:"svg",None:"none"},oh={};function w1(i,s){return i=String(i||"").toLowerCase(),arguments.length>1?(oh[i]=s,this):oh[i]}function O2(i,s,o){const l=[],c=(new $s).union(s),h=i.marktype;return h?l_(i,c,o,l):"group"===h?ND(i,c,o,l):(0,T.vU)("Intersect scene must be mark node or group item.")}function l_(i,s,o,l){if(function(i,s,o){return i.bounds&&s.intersects(i.bounds)&&("group"===i.marktype||!1!==i.interactive&&(!o||o(i)))}(i,s,o)){const c=i.items,h=i.marktype,g=c.length;let y=0;if("group"===h)for(;y<g;++y)ND(c[y],s,o,l);else for(const v=bl[h].isect;y<g;++y){const C=c[y];T2(C,s,v)&&l.push(C)}}return l}function ND(i,s,o,l){o&&o(i.mark)&&T2(i,s,bl.group.isect)&&l.push(i);const c=i.items,h=c&&c.length;if(h){const g=i.x||0,y=i.y||0;s.translate(-g,-y);for(let v=0;v<h;++v)l_(c[v],s,o,l);s.translate(g,y)}return l}function T2(i,s,o){const l=i.bounds;return s.encloses(l)||s.intersects(l)&&o(i,s)}oh.canvas=oh.png={renderer:Se,headless:Se,handler:w},oh.svg={renderer:Un,headless:Vm,handler:vt},oh.none={};const YM=new $s;function k2(i){const s=i.clip;if((0,T.mf)(s))s(Gy(YM.clear()));else{if(!s)return;YM.set(0,0,i.group.width,i.group.height)}i.bounds.intersect(YM)}function F2(i,s,o){return i===s||("path"===o?KM(i,s):i instanceof Date&&s instanceof Date?+i==+s:(0,T.hj)(i)&&(0,T.hj)(s)?Math.abs(i-s)<=1e-9:i&&s&&((0,T.Kn)(i)||(0,T.Kn)(s))?function(i,s){var c,h,o=Object.keys(i),l=Object.keys(s);if(o.length!==l.length)return!1;for(o.sort(),l.sort(),h=o.length-1;h>=0;h--)if(o[h]!=l[h])return!1;for(h=o.length-1;h>=0;h--)if(!F2(i[c=o[h]],s[c],c))return!1;return typeof i==typeof s}(i,s):i==s)}function KM(i,s){return F2(kp(i),kp(s))}function yW(){pM(),ZE=0}const PD="top",In="left",ah="right",jc="bottom",BL="start",R2="middle",mr="end",E1="group",N2="axis",P2="title",L2="legend",VL="row-header",QM="row-footer",$L="row-title",jL="column-header",B2="column-footer",JM="column-title",V2="none",ZM="all",u_="each",$2="flush",jm="column",Gp="row";function D1(i){Ke.call(this,null,i)}function j2(i,s,o){return s(i.bounds.clear(),i,o)}(0,T.XW)(D1,Ke,{transform(i,s){const o=s.dataflow,l=i.mark,c=l.marktype,h=bl[c],g=h.bound;let v,y=l.bounds;if(h.nested)l.items.length&&o.dirty(l.items[0]),y=j2(l,g),l.items.forEach(C=>{C.bounds.clear().union(y)});else if(c===E1||i.modified())switch(s.visit(s.MOD,C=>o.dirty(C)),y.clear(),l.items.forEach(C=>y.union(j2(C,g))),l.role){case N2:case L2:case P2:s.reflow()}else v=s.changed(s.REM),s.visit(s.ADD,C=>{y.union(j2(C,g))}),s.visit(s.MOD,C=>{v=v||y.alignsWith(C.bounds),o.dirty(C),y.union(j2(C,g))}),v&&(y.clear(),l.items.forEach(C=>y.union(C.bounds)));return k2(l),s.modifies("bounds")}});const z2=":vega_identifier:";function U2(i){Ke.call(this,0,i)}function UL(i){Ke.call(this,null,i)}function HL(i){Ke.call(this,null,i)}U2.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},(0,T.XW)(U2,Ke,{transform(i,s){const o=function(i){return i._signals[z2]||(i._signals[z2]=i.add(0))}(s.dataflow),l=i.as;let c=o.value;return s.visit(s.ADD,h=>h[l]=h[l]||++c),o.set(this.value=c),s}}),(0,T.XW)(UL,Ke,{transform(i,s){let o=this.value;o||(o=s.dataflow.scenegraph().mark(i.markdef,function(i){const s=i.groups,o=i.parent;return s&&1===s.size?s.get(Object.keys(s.object)[0]):s&&o?s.lookup(o):null}(i),i.index),o.group.context=i.context,i.context.group||(i.context.group=o.group),o.source=this.source,o.clip=i.clip,o.interactive=i.interactive,this.value=o);const l=o.marktype===E1?Yb:qb;return s.visit(s.ADD,c=>l.call(c,o)),(i.modified("clip")||i.modified("interactive"))&&(o.clip=i.clip,o.interactive=!!i.interactive,o.zdirty=!0,s.reflow()),o.items=s.source,s}});const H2={parity:i=>i.filter((s,o)=>o%2?s.opacity=0:1),greedy:(i,s)=>{let o;return i.filter((l,c)=>c&&WL(o.bounds,l.bounds,s)?l.opacity=0:(o=l,1))}},WL=(i,s,o)=>o>Math.max(s.x1-i.x2,i.x1-s.x2,s.y1-i.y2,i.y1-s.y2),GL=(i,s)=>{for(var h,o=1,l=i.length,c=i[0].bounds;o<l;c=h,++o)if(WL(c,h=i[o].bounds,s))return!0},bW=i=>{const s=i.bounds;return s.width()>1&&s.height()>1},s6=i=>(i.forEach(s=>s.opacity=1),i),eO=(i,s)=>i.reflow(s.modified()).modifies("opacity");function qL(i){Ke.call(this,null,i)}(0,T.XW)(HL,Ke,{transform(i,s){const o=H2[i.method]||H2.parity,l=i.separation||0;let h,g,c=s.materialize(s.SOURCE).source;if(!c||!c.length)return;if(!i.method)return i.modified("method")&&(s6(c),s=eO(s,i)),s;if(c=c.filter(bW),!c.length)return;if(i.sort&&(c=c.slice().sort(i.sort)),h=s6(c),s=eO(s,i),h.length>=3&&GL(h,l)){do{h=o(h,l)}while(h.length>=3&&GL(h,l));h.length<3&&!(0,T.fj)(c).opacity&&(h.length>1&&((0,T.fj)(h).opacity=0),(0,T.fj)(c).opacity=1)}i.boundScale&&i.boundTolerance>=0&&(g=((i,s,o)=>{var l=i.range(),c=new $s;return s===PD||s===jc?c.set(l[0],-1/0,l[1],1/0):c.set(-1/0,l[0],1/0,l[1]),c.expand(o||1),h=>c.encloses(h.bounds)})(i.boundScale,i.boundOrient,+i.boundTolerance),c.forEach(v=>{g(v)||(v.opacity=0)}));const y=h[0].mark.bounds.clear();return c.forEach(v=>{v.opacity&&y.union(v.bounds)}),s}}),(0,T.XW)(qL,Ke,{transform(i,s){const o=s.dataflow;if(s.visit(s.ALL,l=>o.dirty(l)),s.fields&&s.fields.zindex){const l=s.source&&s.source[0];l&&(l.mark.zdirty=!0)}}});const La=new $s;function x1(i,s,o){return i[s]===o?0:(i[s]=o,1)}function o6(i){var s=i.items[0].orient;return s===In||s===ah}function l6(i,s,o,l){var J,oe,c=s.items[0],h=c.datum,g=null!=c.translate?c.translate:.5,y=c.orient,v=function(i){let s=+i.grid;return[i.ticks?s++:-1,i.labels?s++:-1,s+ +i.domain]}(h),C=c.range,E=c.offset,x=c.position,S=c.minExtent,k=c.maxExtent,R=h.title&&c.items[v[2]].items[0],N=c.titlePadding,P=c.bounds,z=R&&SD(R),H=0,X=0;switch(La.clear().union(P),P.clear(),(J=v[0])>-1&&P.union(c.items[J].bounds),(J=v[1])>-1&&P.union(c.items[J].bounds),y){case PD:H=x||0,X=-E,oe=Math.max(S,Math.min(k,-P.y1)),P.add(0,-oe).add(C,0),R&&LD(i,R,oe,N,z,0,-1,P);break;case In:H=-E,X=x||0,oe=Math.max(S,Math.min(k,-P.x1)),P.add(-oe,0).add(0,C),R&&LD(i,R,oe,N,z,1,-1,P);break;case ah:H=o+E,X=x||0,oe=Math.max(S,Math.min(k,P.x2)),P.add(0,0).add(oe,C),R&&LD(i,R,oe,N,z,1,1,P);break;case jc:H=x||0,X=l+E,oe=Math.max(S,Math.min(k,P.y2)),P.add(0,0).add(C,oe),R&&LD(i,R,oe,N,0,0,1,P);break;default:H=c.x,X=c.y}return da(P.translate(H,X),c),x1(c,"x",H+g)|x1(c,"y",X+g)&&(c.bounds=La,i.dirty(c),c.bounds=P,i.dirty(c)),c.mark.bounds.clear().union(P)}function LD(i,s,o,l,c,h,g,y){const v=s.bounds;if(s.auto){const C=g*(o+c+l);let E=0,x=0;i.dirty(s),h?E=(s.x||0)-(s.x=C):x=(s.y||0)-(s.y=C),s.mark.bounds.clear().union(v.translate(-E,-x)),i.dirty(s)}y.union(v)}const tO=(i,s)=>Math.floor(Math.min(i,s)),YL=(i,s)=>Math.ceil(Math.max(i,s));function Ba(i){return(new $s).set(0,0,i.width||0,i.height||0)}function XL(i){const s=i.bounds.clone();return s.empty()?s.set(0,0,0,0):s.translate(-(i.x||0),-(i.y||0))}function Hi(i,s,o){const l=(0,T.Kn)(i)?i[s]:i;return null!=l?l:void 0!==o?o:0}function nO(i){return i<0?Math.ceil(-i):0}function KL(i,s,o){var fe,te,Re,ze,Fe,Oe,tt,et,Ot,Xe,Tt,l=!o.nodirty,c=o.bounds===$2?Ba:XL,h=La.set(0,0,0,0),g=Hi(o.align,jm),y=Hi(o.align,Gp),v=Hi(o.padding,jm),C=Hi(o.padding,Gp),E=o.columns||s.length,x=E<=0?1:Math.ceil(s.length/E),S=s.length,k=Array(S),R=Array(E),N=0,P=Array(S),z=Array(x),H=0,X=Array(S),J=Array(S),oe=Array(S);for(te=0;te<E;++te)R[te]=0;for(te=0;te<x;++te)z[te]=0;for(te=0;te<S;++te)Fe=oe[te]=c(Oe=s[te]),Oe.x=Oe.x||0,X[te]=0,Oe.y=Oe.y||0,J[te]=0,Re=te%E,ze=~~(te/E),N=Math.max(N,tt=Math.ceil(Fe.x2)),H=Math.max(H,et=Math.ceil(Fe.y2)),R[Re]=Math.max(R[Re],tt),z[ze]=Math.max(z[ze],et),k[te]=v+nO(Fe.x1),P[te]=C+nO(Fe.y1),l&&i.dirty(s[te]);for(te=0;te<S;++te)te%E==0&&(k[te]=0),te<E&&(P[te]=0);if(g===u_)for(Re=1;Re<E;++Re){for(Tt=0,te=Re;te<S;te+=E)Tt<k[te]&&(Tt=k[te]);for(te=Re;te<S;te+=E)k[te]=Tt+R[Re-1]}else if(g===ZM){for(Tt=0,te=0;te<S;++te)te%E&&Tt<k[te]&&(Tt=k[te]);for(te=0;te<S;++te)te%E&&(k[te]=Tt+N)}else for(g=!1,Re=1;Re<E;++Re)for(te=Re;te<S;te+=E)k[te]+=R[Re-1];if(y===u_)for(ze=1;ze<x;++ze){for(Tt=0,fe=(te=ze*E)+E;te<fe;++te)Tt<P[te]&&(Tt=P[te]);for(te=ze*E;te<fe;++te)P[te]=Tt+z[ze-1]}else if(y===ZM){for(Tt=0,te=E;te<S;++te)Tt<P[te]&&(Tt=P[te]);for(te=E;te<S;++te)P[te]=Tt+H}else for(y=!1,ze=1;ze<x;++ze)for(fe=(te=ze*E)+E;te<fe;++te)P[te]+=z[ze-1];for(Ot=0,te=0;te<S;++te)X[te]+=(Ot=k[te]+(te%E?Ot:0))-s[te].x;for(Re=0;Re<E;++Re)for(Xe=0,te=Re;te<S;te+=E)J[te]+=(Xe+=P[te])-s[te].y;if(g&&Hi(o.center,jm)&&x>1)for(te=0;te<S;++te)(Ot=(Fe=g===ZM?N:R[te%E])-oe[te].x2-s[te].x-X[te])>0&&(X[te]+=Ot/2);if(y&&Hi(o.center,Gp)&&1!==E)for(te=0;te<S;++te)(Xe=(Fe=y===ZM?H:z[~~(te/E)])-oe[te].y2-s[te].y-J[te])>0&&(J[te]+=Xe/2);for(te=0;te<S;++te)h.union(oe[te].translate(X[te],J[te]));switch(Ot=Hi(o.anchor,"x"),Xe=Hi(o.anchor,"y"),Hi(o.anchor,jm)){case mr:Ot-=h.width();break;case R2:Ot-=h.width()/2}switch(Hi(o.anchor,Gp)){case mr:Xe-=h.height();break;case R2:Xe-=h.height()/2}for(Ot=Math.round(Ot),Xe=Math.round(Xe),h.clear(),te=0;te<S;++te)s[te].mark.bounds.clear();for(te=0;te<S;++te)(Oe=s[te]).x+=X[te]+=Ot,Oe.y+=J[te]+=Xe,h.union(Oe.mark.bounds.union(Oe.bounds.translate(X[te],J[te]))),l&&i.dirty(Oe);return h}function JL(i,s){return"x1"===s?i.x||0:"y1"===s?i.y||0:"x2"===s?(i.x||0)+(i.width||0):"y2"===s?(i.y||0)+(i.height||0):void 0}function ZL(i,s){return i.bounds[s]}function iO(i,s,o,l,c,h,g,y,v,C,E,x,S,k){var z,H,X,J,oe,fe,te,Re,ze,R=o.length,N=0,P=0;if(!R)return N;for(z=E;z<R;z+=x)o[z]&&(N=g(N,v(o[z],C)));if(!s.length)return N;for(s.length>c&&(i.warn("Grid headers exceed limit: "+c),s=s.slice(0,c)),N+=h,H=0,J=s.length;H<J;++H)i.dirty(s[H]),s[H].mark.bounds.clear();for(z=E,H=0,J=s.length;H<J;++H,z+=x){for(oe=(fe=s[H]).mark.bounds,X=z;X>=0&&null==(te=o[X]);X-=S);y?(Re=null==k?te.x:Math.round(te.bounds.x1+k*te.bounds.width()),ze=N):(Re=N,ze=null==k?te.y:Math.round(te.bounds.y1+k*te.bounds.height())),oe.union(fe.bounds.translate(Re-(fe.x||0),ze-(fe.y||0))),fe.x=Re,fe.y=ze,i.dirty(fe),P=g(P,oe[C])}return P}function e3(i,s,o,l,c,h){if(s){i.dirty(s);var g=o,y=o;l?g=Math.round(c.x1+h*c.width()):y=Math.round(c.y1+h*c.height()),s.bounds.translate(g-(s.x||0),y-(s.y||0)),s.mark.bounds.clear().union(s.bounds),s.x=g,s.y=y,i.dirty(s)}}function c6(i,s,o,l,c,h,g){const y=function(i,s){const o=i[s]||{};return(l,c)=>null!=o[l]?o[l]:null!=i[l]?i[l]:c}(o,s),v=function(i,s){let o=-1/0;return i.forEach(l=>{null!=l.offset&&(o=Math.max(o,l.offset))}),o>-1/0?o:s}(i,y("offset",0)),C=y("anchor",BL),E=C===mr?1:C===R2?.5:0,x={align:u_,bounds:y("bounds",$2),columns:"vertical"===y("direction")?1:i.length,padding:y("margin",8),center:y("center"),nodirty:!0};switch(s){case In:x.anchor={x:Math.floor(l.x1)-v,column:mr,y:E*(g||l.height()+2*l.y1),row:C};break;case ah:x.anchor={x:Math.ceil(l.x2)+v,y:E*(g||l.height()+2*l.y1),row:C};break;case PD:x.anchor={y:Math.floor(c.y1)-v,row:mr,x:E*(h||c.width()+2*c.x1),column:C};break;case jc:x.anchor={y:Math.ceil(c.y2)+v,x:E*(h||c.width()+2*c.x1),column:C};break;case"top-left":x.anchor={x:v,y:v};break;case"top-right":x.anchor={x:h-v,y:v,column:mr};break;case"bottom-left":x.anchor={x:v,y:g-v,row:mr};break;case"bottom-right":x.anchor={x:h-v,y:g-v,column:mr,row:mr}}return x}function wW(i,s){var v,C,o=s.items[0],l=o.datum,c=o.orient,h=o.bounds,g=o.x,y=o.y;return o._bounds?o._bounds.clear().union(h):o._bounds=h.clone(),h.clear(),function(i,s,o){var l=s.padding,c=l-o.x,h=l-o.y;if(s.datum.title){var g=s.items[1].items[0],y=g.anchor,v=s.titlePadding||0,C=l-g.x,E=l-g.y;switch(g.orient){case In:c+=Math.ceil(g.bounds.width())+v;break;case ah:case jc:break;default:h+=g.bounds.height()+v}switch((c||h)&&rO(i,o,c,h),g.orient){case In:E+=qd(s,o,g,y,1,1);break;case ah:C+=qd(s,o,g,mr,0,0)+v,E+=qd(s,o,g,y,1,1);break;case jc:C+=qd(s,o,g,y,0,0),E+=qd(s,o,g,mr,-1,0,1)+v;break;default:C+=qd(s,o,g,y,0,0)}(C||E)&&rO(i,g,C,E),(C=Math.round(g.bounds.x1-l))<0&&(rO(i,o,-C,0),rO(i,g,-C,0))}else(c||h)&&rO(i,o,c,h)}(i,o,o.items[0].items[0]),h=function(i,s){return i.items.forEach(o=>s.union(o.bounds)),s.x1=i.padding,s.y1=i.padding,s}(o,h),v=2*o.padding,C=2*o.padding,h.empty()||(v=Math.ceil(h.width()+v),C=Math.ceil(h.height()+C)),"symbol"===l.type&&function(i){const s=i.reduce((o,l)=>(o[l.column]=Math.max(l.bounds.x2-l.x,o[l.column]||0),o),{});i.forEach(o=>{o.width=s[o.column],o.height=o.bounds.y2-o.y})}(o.items[0].items[0].items[0].items),c!==V2&&(o.x=g=0,o.y=y=0),o.width=v,o.height=C,da(h.set(g,y,g+v,y+C),o),o.mark.bounds.clear().union(h),o}function qd(i,s,o,l,c,h,g){const v=o.datum.vgrad,E=("symbol"===i.datum.type||!h&&v||g?s:s.items[0]).bounds[c?"y2":"x2"]-i.padding,x=v&&h?E:0,S=v&&h?0:E,k=c<=0?0:SD(o);return Math.round(l===BL?x:l===mr?S-k:.5*(E-k))}function rO(i,s,o,l){s.x+=o,s.y+=l,s.bounds.translate(o,l),s.mark.bounds.translate(o,l),i.dirty(s)}function p6(i){Ke.call(this,null,i)}function c_(i,s){let o=0;if(void 0===s)for(let l of i)(l=+l)&&(o+=l);else{let l=-1;for(let c of i)(c=+s(c,++l,i))&&(o+=c)}return o}function G2(i){Ke.call(this,null,i)}function r3(i){Ke.call(this,null,i)}function m6(){return Ti({})}function s3(i){Ke.call(this,null,i)}function o3(i){Ke.call(this,[],i)}(0,T.XW)(p6,Ke,{transform(i,s){const o=s.dataflow;return i.mark.items.forEach(l=>{i.layout&&function(i,s,o){var E,x,S,k,R,N,P,l=function(i){var c,h,s=i.items,o=s.length,l=0;const g={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;l<o;++l)if(h=(c=s[l]).items,c.marktype===E1)switch(c.role){case N2:case L2:case P2:break;case VL:g.rowheaders.push(...h);break;case QM:g.rowfooters.push(...h);break;case jL:g.colheaders.push(...h);break;case B2:g.colfooters.push(...h);break;case $L:g.rowtitle=h[0];break;case JM:g.coltitle=h[0];break;default:g.marks.push(...h)}return g}(s),c=l.marks,h=o.bounds===$2?JL:ZL,g=o.offset,y=o.columns||c.length,v=y<=0?1:Math.ceil(c.length/y),C=v*y;const z=KL(i,c,o);z.empty()&&z.set(0,0,0,0),l.rowheaders&&(N=Hi(o.headerBand,Gp,null),E=iO(i,l.rowheaders,c,0,v,-Hi(g,"rowHeader"),tO,0,h,"x1",0,y,1,N)),l.colheaders&&(N=Hi(o.headerBand,jm,null),x=iO(i,l.colheaders,c,0,y,-Hi(g,"columnHeader"),tO,1,h,"y1",0,1,y,N)),l.rowfooters&&(N=Hi(o.footerBand,Gp,null),S=iO(i,l.rowfooters,c,0,v,Hi(g,"rowFooter"),YL,0,h,"x2",y-1,y,1,N)),l.colfooters&&(N=Hi(o.footerBand,jm,null),k=iO(i,l.colfooters,c,0,y,Hi(g,"columnFooter"),YL,1,h,"y2",C-y,1,y,N)),l.rowtitle&&(R=Hi(o.titleAnchor,Gp),P=Hi(g,"rowTitle"),P=R===mr?S+P:E-P,N=Hi(o.titleBand,Gp,.5),e3(i,l.rowtitle,P,0,z,N)),l.coltitle&&(R=Hi(o.titleAnchor,jm),P=Hi(g,"columnTitle"),P=R===mr?k+P:x-P,N=Hi(o.titleBand,jm,.5),e3(i,l.coltitle,P,1,z,N))}(o,l,i.layout),function(i,s,o){var E,x,S,R,N,l=s.items,c=Math.max(0,s.width||0),h=Math.max(0,s.height||0),g=(new $s).set(0,0,c,h),y=g.clone(),v=g.clone(),C=[];for(R=0,N=l.length;R<N;++R)switch(x=l[R],x.role){case N2:(o6(x)?y:v).union(l6(i,x,c,h));break;case P2:E=x;break;case L2:C.push(wW(i,x));break;case"frame":case"scope":case VL:case QM:case $L:case jL:case B2:case JM:y.union(x.bounds),v.union(x.bounds);break;default:g.union(x.bounds)}if(C.length){const P={};C.forEach(z=>{(S=z.orient||ah)!==V2&&(P[S]||(P[S]=[])).push(z)});for(const z in P){const H=P[z];KL(i,H,c6(H,z,o.legends,y,v,c,h))}C.forEach(z=>{const H=z.bounds;if(H.equals(z._bounds)||(z.bounds=z._bounds,i.dirty(z),z.bounds=H,i.dirty(z)),o.autosize&&"fit"===o.autosize.type)switch(z.orient){case In:case ah:g.add(H.x1,0).add(H.x2,0);break;case PD:case jc:g.add(0,H.y1).add(0,H.y2)}else g.union(H)})}g.union(y).union(v),E&&g.union(function(i,s,o,l,c){var X,h=s.items[0],y=h.orient,v=h.anchor,C=h.offset,E=h.padding,x=h.items[0].items[0],S=h.items[1]&&h.items[1].items[0],k=y===In||y===ah?l:o,R=0,N=0,P=0,z=0,H=0;if(h.frame!==E1?y===In?(R=c.y2,k=c.y1):y===ah?(R=c.y1,k=c.y2):(R=c.x1,k=c.x2):y===In&&(R=l,k=0),X=v===BL?R:v===mr?k:(R+k)/2,S&&S.text){switch(y){case PD:case jc:H=x.bounds.height()+E;break;case In:z=x.bounds.width()+E;break;case ah:z=-x.bounds.width()-E}La.clear().union(S.bounds),La.translate(z-(S.x||0),H-(S.y||0)),x1(S,"x",z)|x1(S,"y",H)&&(i.dirty(S),S.bounds.clear().union(La),S.mark.bounds.clear().union(La),i.dirty(S)),La.clear().union(S.bounds)}else La.clear();switch(La.union(x.bounds),y){case PD:N=X,P=c.y1-La.height()-C;break;case In:N=c.x1-La.width()-C,P=X;break;case ah:N=c.x2+La.width()+C,P=X;break;case jc:N=X,P=c.y2+C;break;default:N=h.x,P=h.y}return x1(h,"x",N)|x1(h,"y",P)&&(La.translate(N,P),i.dirty(h),h.bounds.clear().union(La),s.bounds.clear().union(La),i.dirty(h)),h.bounds}(i,E,c,h,g)),s.clip&&g.set(0,0,s.width||0,s.height||0),function(i,s,o,l){const c=l.autosize||{},h=c.type;if(i._autosize<1||!h)return;let g=i._width,y=i._height,v=Math.max(0,s.width||0),C=Math.max(0,Math.ceil(-o.x1)),E=Math.max(0,s.height||0),x=Math.max(0,Math.ceil(-o.y1));const S=Math.max(0,Math.ceil(o.x2-v)),k=Math.max(0,Math.ceil(o.y2-E));if("padding"===c.contains){const R=i.padding();g-=R.left+R.right,y-=R.top+R.bottom}h===V2?(C=0,x=0,v=g,E=y):"fit"===h?(v=Math.max(0,g-C-S),E=Math.max(0,y-x-k)):"fit-x"===h?(v=Math.max(0,g-C-S),y=E+x+k):"fit-y"===h?(g=v+C+S,E=Math.max(0,y-x-k)):"pad"===h&&(g=v+C+S,y=E+x+k),i._resizeView(g,y,v,E,[C,x],c.resize)}(i,s,g,o)}(o,l,i)}),function(i){return i&&"legend-entry"!==i.mark.role}(i.mark.group)?s.reflow():s}}),(0,T.XW)(G2,Ke,{transform(i,s){if(this.value&&!i.modified())return s.StopPropagation;var o=s.dataflow.locale(),l=s.fork(s.NO_SOURCE|s.NO_FIELDS),c=this.value,h=i.scale,y=Qf(h,null==i.count?i.values?i.values.length:10:i.count,i.minstep),v=i.format||Mp(o,h,y,i.formatSpecifier,i.formatType,!!i.values),C=i.values?pm(h,i.values,y):ue(h,y);return c&&(l.rem=c),c=C.map((E,x)=>Ti({index:x/(C.length-1||1),value:E,label:v(E)})),i.extra&&c.length&&c.push(Ti({index:-1,extra:{value:c[0].value},label:""})),l.source=c,l.add=c,this.value=c,l}}),(0,T.XW)(r3,Ke,{transform(i,s){var o=s.dataflow,l=s.fork(s.NO_SOURCE|s.NO_FIELDS),c=i.item||m6,h=i.key||bn,g=this.value;return(0,T.kJ)(l.encode)&&(l.encode=null),g&&(i.modified("key")||s.modified(h))&&(0,T.vU)("DataJoin does not support modified key function or fields."),g||(s=s.addAll(),this.value=g=function(i){const s=(0,T.Xr)().test(o=>o.exit);return s.lookup=o=>s.get(i(o)),s}(h)),s.visit(s.ADD,y=>{const v=h(y);let C=g.get(v);C?C.exit?(g.empty--,l.add.push(C)):l.mod.push(C):(C=c(y),g.set(v,C),l.add.push(C)),C.datum=y,C.exit=!1}),s.visit(s.MOD,y=>{const v=h(y),C=g.get(v);C&&(C.datum=y,l.mod.push(C))}),s.visit(s.REM,y=>{const v=h(y),C=g.get(v);y===C.datum&&!C.exit&&(l.rem.push(C),C.exit=!0,++g.empty)}),s.changed(s.ADD_MOD)&&l.modifies("datum"),(s.clean()||i.clean&&g.empty>o.cleanThreshold)&&o.runAfter(g.clean),l}}),(0,T.XW)(s3,Ke,{transform(i,s){var o=s.fork(s.ADD_REM),l=i.mod||!1,c=i.encoders,h=s.encode;if((0,T.kJ)(h)){if(!o.changed()&&!h.every(x=>c[x]))return s.StopPropagation;h=h[0],o.encode=null}var g="enter"===h,y=c.update||T.k,v=c.enter||T.k,C=c.exit||T.k,E=(h&&!g?c[h]:y)||T.k;if(s.changed(s.ADD)&&(s.visit(s.ADD,x=>{v(x,i),y(x,i)}),o.modifies(v.output),o.modifies(y.output),E!==T.k&&E!==y&&(s.visit(s.ADD,x=>{E(x,i)}),o.modifies(E.output))),s.changed(s.REM)&&C!==T.k&&(s.visit(s.REM,x=>{C(x,i)}),o.modifies(C.output)),g||E!==T.k){const x=s.MOD|(i.modified()?s.REFLOW:0);g?(s.visit(x,S=>{const k=v(S,i)||l;(E(S,i)||k)&&o.mod.push(S)}),o.mod.length&&o.modifies(v.output)):s.visit(x,S=>{(E(S,i)||l)&&o.mod.push(S)}),o.mod.length&&o.modifies(E.output)}return o.changed()?o:s.StopPropagation}}),(0,T.XW)(o3,Ke,{transform(i,s){if(null!=this.value&&!i.modified())return s.StopPropagation;var S,k,R,N,P,o=s.dataflow.locale(),l=s.fork(s.NO_SOURCE|s.NO_FIELDS),c=this.value,h=i.type||Lb,g=i.scale,y=+i.limit,v=Qf(g,null==i.count?5:i.count,i.minstep),E=i.format||Tp(o,g,v,h,i.formatSpecifier,i.formatType,!!i.values||h===Lb),x=i.values||we(g,v);return c&&(l.rem=c),h===Lb?(y&&x.length>y?(s.dataflow.warn("Symbol legend count exceeds limit, filtering items."),c=x.slice(0,y-1),P=!0):c=x,(0,T.mf)(R=i.size)?(!i.values&&0===g(c[0])&&(c=c.slice(1)),N=c.reduce((z,H)=>Math.max(z,R(H,i)),0)):R=(0,T.a9)(N=R||8),c=c.map((z,H)=>Ti({index:H,label:E(z,H,c),value:z,offset:N,size:R(z,i)})),P&&(P=x[c.length],c.push(Ti({index:c.length,label:"\u2026".concat(x.length-c.length," entries"),value:P,offset:N,size:R(P,i)})))):"gradient"===h?(S=g.domain(),k=Ap(g,S[0],(0,T.fj)(S)),x.length<3&&!i.values&&S[0]!==(0,T.fj)(S)&&(x=[S[0],(0,T.fj)(S)]),c=x.map((z,H)=>Ti({index:H,label:E(z,H,x),value:z,perc:k(z)}))):(R=x.length-1,k=function(i){const s=i.domain(),o=s.length-1;let l=+s[0],c=+(0,T.fj)(s),h=c-l;if(i.type===kb){const g=o?h/o:.1;l-=g,c+=g,h=c-l}return g=>(g-l)/h}(g),c=x.map((z,H)=>Ti({index:H,label:E(z,H,x),value:z,perc:H?k(z):0,perc2:H===R?1:k(x[H+1])}))),l.source=c,l.add=c,this.value=c,l}});const _6=i=>i.source.x,v6=i=>i.source.y,b6=i=>i.target.x,BD=i=>i.target.y;function sO(i){Ke.call(this,{},i)}sO.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},(0,T.XW)(sO,Ke,{transform(i,s){var o=i.sourceX||_6,l=i.sourceY||v6,c=i.targetX||b6,h=i.targetY||BD,g=i.as||"path",v=i.shape||"line",C=A1.get(v+"-"+(i.orient||"vertical"))||A1.get(v);return C||(0,T.vU)("LinkPath unsupported type: "+i.shape+(i.orient?"-"+i.orient:"")),s.visit(s.SOURCE,E=>{E[g]=C(o(E),l(E),c(E),h(E))}),s.reflow(i.modified()).modifies(g)}});const q2=(i,s,o,l)=>"M"+i+","+s+"L"+o+","+l,Y2=(i,s,o,l)=>{var c=o-i,h=l-s,g=Math.sqrt(c*c+h*h)/2;return"M"+i+","+s+"A"+g+","+g+" "+180*Math.atan2(h,c)/Math.PI+" 0 1 "+o+","+l},lh=(i,s,o,l)=>{const c=o-i,h=l-s,g=.2*(c+h),y=.2*(h-c);return"M"+i+","+s+"C"+(i+g)+","+(s+y)+" "+(o+y)+","+(l-g)+" "+o+","+l},A1=(0,T.Xr)({line:q2,"line-radial":(i,s,o,l)=>q2(s*Math.cos(i),s*Math.sin(i),l*Math.cos(o),l*Math.sin(o)),arc:Y2,"arc-radial":(i,s,o,l)=>Y2(s*Math.cos(i),s*Math.sin(i),l*Math.cos(o),l*Math.sin(o)),curve:lh,"curve-radial":(i,s,o,l)=>lh(s*Math.cos(i),s*Math.sin(i),l*Math.cos(o),l*Math.sin(o)),"orthogonal-horizontal":(i,s,o,l)=>"M"+i+","+s+"V"+l+"H"+o,"orthogonal-vertical":(i,s,o,l)=>"M"+i+","+s+"H"+o+"V"+l,"orthogonal-radial":(i,s,o,l)=>{const c=Math.cos(i),h=Math.sin(i),g=Math.cos(o),y=Math.sin(o);return"M"+s*c+","+s*h+"A"+s+","+s+" 0 0,"+((Math.abs(o-i)>Math.PI?o<=i:o>i)?1:0)+" "+s*g+","+s*y+"L"+l*g+","+l*y},"diagonal-horizontal":(i,s,o,l)=>{const c=(i+o)/2;return"M"+i+","+s+"C"+c+","+s+" "+c+","+l+" "+o+","+l},"diagonal-vertical":(i,s,o,l)=>{const c=(s+l)/2;return"M"+i+","+s+"C"+i+","+c+" "+o+","+c+" "+o+","+l},"diagonal-radial":(i,s,o,l)=>{const c=Math.cos(i),h=Math.sin(i),g=Math.cos(o),y=Math.sin(o),v=(s+l)/2;return"M"+s*c+","+s*h+"C"+v*c+","+v*h+" "+v*g+","+v*y+" "+l*g+","+l*y}});function K2(i){Ke.call(this,null,i)}function u3(i){return YE(i)&&i!==Ia}K2.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},(0,T.XW)(K2,Ke,{transform(i,s){var R,N,P,o=i.as||["startAngle","endAngle"],l=o[0],c=o[1],g=i.startAngle||0,y=null!=i.endAngle?i.endAngle:2*Math.PI,v=s.source,C=v.map(i.field||T.kX),E=C.length,x=g,S=(y-g)/c_(C),k=Aa(E);for(i.sort&&k.sort((z,H)=>C[z]-C[H]),R=0;R<E;++R)P=C[k[R]],(N=v[k[R]])[l]=x,N[c]=x+=P*S;return this.value=C,s.reflow(i.modified()).modifies(o)}});const zm=(0,T.Rg)(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function c3(i){Ke.call(this,null,i),this.modified(!0)}function oO(i,s,o){return By(i)&&Math.abs(s.reduce((c,h)=>c+(h<0?-1:h>0?1:0),0))!==s.length&&o.warn("Log scale domain includes zero: "+(0,T.m8)(s)),s}function f3(i,s,o){return(0,T.mf)(i)&&(s||o)?YA(i,aO(s||[0,1],o)):i}function aO(i,s){return s?i.slice().reverse():i}function lO(i){Ke.call(this,null,i)}(0,T.XW)(c3,Ke,{transform(i,s){var o=s.dataflow,l=this.value,c=function(i){var l,s=i.type,o="";return s===Ia?Ia+"-"+Rd:(function(i){const s=i.type;return YE(s)&&s!==Xf&&s!==hi&&(i.scheme||i.range&&i.range.length&&i.range.every(T.HD))}(i)&&(o=2===(l=i.rawDomain?i.rawDomain.length:i.domain?i.domain.length+ +(null!=i.domainMid):0)?Ia+"-":3===l?ns+"-":""),(o+s||Rd).toLowerCase())}(i);for(c in(!l||c!==l.type)&&(this.value=l=Ai(c)()),i)if(!zm[c]){if("padding"===c&&u3(l.type))continue;(0,T.mf)(l[c])?l[c](i[c]):o.warn("Unsupported scale property: "+c)}return function(i,s,o){var l=i.type,c=s.round||!1,h=s.range;if(null!=s.rangeStep)h=function(i,s,o){return"band"!==i&&i!==Fb&&(0,T.vU)("Only band and point scales support rangeStep."),[0,s.rangeStep*Yf(o,i===Fb?1:(null!=s.paddingInner?s.paddingInner:s.padding)||0,(null!=s.paddingOuter?s.paddingOuter:s.padding)||0)]}(l,s,o);else if(s.scheme&&(h=function(i,s,o){var h,l=s.schemeExtent;return(0,T.kJ)(s.scheme)?h=hm(s.scheme,s.interpolate,s.interpolateGamma):(h=Pb(s.scheme.toLowerCase()))||(0,T.vU)("Unrecognized scheme name: ".concat(s.scheme)),o=i===kb?o+1:i===HA?o-1:i===rr||i===cn?+s.schemeCount||5:o,XE(i)?f3(h,l,s.reverse):(0,T.mf)(h)?XA(f3(h,l),o):i===Kf?h:h.slice(0,o)}(l,s,o),(0,T.mf)(h))){if(i.interpolator)return i.interpolator(h);(0,T.vU)("Scale type ".concat(l," does not support interpolating color schemes."))}if(h&&XE(l))return i.interpolator(hm(aO(h,s.reverse),s.interpolate,s.interpolateGamma));h&&s.interpolate&&i.interpolate?i.interpolate(Rb(s.interpolate,s.interpolateGamma)):(0,T.mf)(i.round)?i.round(c):(0,T.mf)(i.rangeRound)&&i.interpolate(c?dp:Mu),h&&i.range(aO(h,s.reverse))}(l,i,function(i,s,o){let l=s.bins;if(l&&!(0,T.kJ)(l)){const c=i.domain(),h=c[0],g=(0,T.fj)(c),y=l.step;let v=null==l.start?h:l.start,C=null==l.stop?g:l.stop;y||(0,T.vU)("Scale bins parameter missing step property."),v<h&&(v=y*Math.ceil(h/y)),C>g&&(C=y*Math.floor(g/y)),l=Aa(v,C+y/2,y)}return l?i.bins=l:i.bins&&delete i.bins,i.type===HA&&(l?!s.domain&&!s.domainRaw&&(i.domain(l),o=l.length):i.bins=i.domain()),o}(l,i,function(i,s,o){const l=function(i,s,o){return s?(i.domain(oO(i.type,s,o)),s.length):-1}(i,s.domainRaw,o);if(l>-1)return l;var y,v,c=s.domain,h=i.type,g=s.zero||void 0===s.zero&&function(i){const s=i.type;return!i.bins&&(s===Rd||s===Dp||s===sm)}(i);if(!c)return 0;if(u3(h)&&s.padding&&c[0]!==(0,T.fj)(c)&&(c=function(i,s,o,l,c,h){var g=Math.abs((0,T.fj)(o)-o[0]),y=g/(g-2*l),v=i===Fa?(0,T.dH)(s,null,y):i===sm?(0,T.mK)(s,null,y,.5):i===Dp?(0,T.mK)(s,null,y,c||1):i===om?(0,T.bV)(s,null,y,h||1):(0,T.ay)(s,null,y);return(s=s.slice())[0]=v[0],s[s.length-1]=v[1],s}(h,c,s.range,s.padding,s.exponent,s.constant)),(g||null!=s.domainMin||null!=s.domainMax||null!=s.domainMid)&&(y=(c=c.slice()).length-1||1,g&&(c[0]>0&&(c[0]=0),c[y]<0&&(c[y]=0)),null!=s.domainMin&&(c[0]=s.domainMin),null!=s.domainMax&&(c[y]=s.domainMax),null!=s.domainMid)){const C=(v=s.domainMid)>c[y]?y+1:v<c[0]?0:y;C!==y&&o.warn("Scale domainMid exceeds domain min or max.",v),c.splice(C,0,v)}return i.domain(oO(h,c,o)),h===Kf&&i.unknown(s.domainImplicit?wA:void 0),s.nice&&i.nice&&i.nice(!0!==s.nice&&Qf(i,s.nice)||null),c.length}(l,i,o))),s.fork(s.NO_SOURCE|s.NO_FIELDS)}}),(0,T.XW)(lO,Ke,{transform(i,s){const o=i.modified("sort")||s.changed(s.ADD)||s.modified(i.sort.fields)||s.modified("datum");return o&&s.source.sort(zh(i.sort)),this.modified(o),s}});const bs="normalize",Li=["y0","y1"];function tI(i){Ke.call(this,null,i)}function h3(i,s,o,l,c){for(var v,h=(s-i.sum)/2,g=i.length,y=0;y<g;++y)(v=i[y])[l]=h,v[c]=h+=Math.abs(o(v))}function p3(i,s,o,l,c){for(var E,h=1/i.sum,g=0,y=i.length,v=0,C=0;v<y;++v)(E=i[v])[l]=g,E[c]=g=h*(C+=Math.abs(o(E)))}function O6(i,s,o,l,c){for(var C,E,h=0,g=0,y=i.length,v=0;v<y;++v)(C=+o(E=i[v]))<0?(E[l]=g,E[c]=g+=C):(E[l]=h,E[c]=h+=C)}tI.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:"zero",values:["zero","center",bs]},{name:"as",type:"string",array:!0,length:2,default:Li}]},(0,T.XW)(tI,Ke,{transform(i,s){var v,C,E,x,o=i.as||Li,l=o[0],c=o[1],h=zh(i.sort),g=i.field||T.kX,y="center"===i.offset?h3:i.offset===bs?p3:O6;for(v=function(i,s,o,l){var g,y,v,C,E,x,S,k,R,c=[],h=N=>N(E);if(null==s)c.push(i.slice());else for(g={},y=0,v=i.length;y<v;++y)E=i[y],(S=g[x=s.map(h)])||(g[x]=S=[],c.push(S)),S.push(E);for(x=0,R=0,C=c.length;x<C;++x){for(y=0,k=0,v=(S=c[x]).length;y<v;++y)k+=Math.abs(l(S[y]));S.sum=k,k>R&&(R=k),o&&S.sort(o)}return c.max=R,c}(s.source,i.groupby,h,g),C=0,E=v.length,x=v.max;C<E;++C)y(v[C],x,g,l,c);return s.reflow(i.modified()).modifies(o)}});const $D=i=>i;function nI(i,s){i&&f_.hasOwnProperty(i.type)&&f_[i.type](i,s)}var Va={Feature:function(i,s){nI(i.geometry,s)},FeatureCollection:function(i,s){for(var o=i.features,l=-1,c=o.length;++l<c;)nI(o[l].geometry,s)}},f_={Sphere:function(i,s){s.sphere()},Point:function(i,s){s.point((i=i.coordinates)[0],i[1],i[2])},MultiPoint:function(i,s){for(var o=i.coordinates,l=-1,c=o.length;++l<c;)s.point((i=o[l])[0],i[1],i[2])},LineString:function(i,s){iI(i.coordinates,s,0)},MultiLineString:function(i,s){for(var o=i.coordinates,l=-1,c=o.length;++l<c;)iI(o[l],s,0)},Polygon:function(i,s){m3(i.coordinates,s)},MultiPolygon:function(i,s){for(var o=i.coordinates,l=-1,c=o.length;++l<c;)m3(o[l],s)},GeometryCollection:function(i,s){for(var o=i.geometries,l=-1,c=o.length;++l<c;)nI(o[l],s)}};function iI(i,s,o){var h,l=-1,c=i.length-o;for(s.lineStart();++l<c;)s.point((h=i[l])[0],h[1],h[2]);s.lineEnd()}function m3(i,s){var o=-1,l=i.length;for(s.polygonStart();++o<l;)iI(i[o],s,1);s.polygonEnd()}function Um(i,s){i&&Va.hasOwnProperty(i.type)?Va[i.type](i,s):nI(i,s)}class Hs{constructor(){this._partials=new Float64Array(32),this._n=0}add(s){const o=this._partials;let l=0;for(let c=0;c<this._n&&c<32;c++){const h=o[c],g=s+h,y=Math.abs(s)<Math.abs(h)?s-(g-h):h-(g-s);y&&(o[l++]=y),s=g}return o[l]=s,this._n=l+1,this}valueOf(){const s=this._partials;let l,c,h,o=this._n,g=0;if(o>0){for(g=s[--o];o>0&&(l=g,c=s[--o],g=l+c,h=c-(g-l),!h););o>0&&(h<0&&s[o-1]<0||h>0&&s[o-1]>0)&&(c=2*h,l=g+c,c==l-g&&(g=l))}return g}}var $n=1e-6,jD=1e-12,bi=Math.PI,Cs=bi/2,M1=bi/4,$a=2*bi,ws=180/bi,ci=bi/180,Fi=Math.abs,zD=Math.atan,Uu=Math.atan2,zn=Math.cos,UD=Math.ceil,HD=Math.exp,rI=(Math,Math.hypot),O1=Math.log,WD=Math.pow,Fn=Math.sin,zc=Math.sign||function(i){return i>0?1:i<0?-1:0},ja=Math.sqrt,uO=Math.tan;function sI(i){return i>1?0:i<-1?bi:Math.acos(i)}function su(i){return i>1?Cs:i<-1?-Cs:Math.asin(i)}function Ho(){}var lI,_3,cO,dO,oI=new Hs,aI=new Hs,qp={point:Ho,lineStart:Ho,lineEnd:Ho,polygonStart:function(){qp.lineStart=v3,qp.lineEnd=I6},polygonEnd:function(){qp.lineStart=qp.lineEnd=qp.point=Ho,oI.add(Fi(aI)),aI=new Hs},result:function(){var i=oI/2;return oI=new Hs,i}};function v3(){qp.point=F6}function F6(i,s){qp.point=b3,lI=cO=i,_3=dO=s}function b3(i,s){aI.add(dO*i-cO*s),cO=i,dO=s}function I6(){b3(lI,_3)}const uI=qp;var GD=1/0,cI=GD,fO=-GD,dI=fO;const fI={point:function(i,s){i<GD&&(GD=i),i>fO&&(fO=i),s<cI&&(cI=s),s>dI&&(dI=s)},lineStart:Ho,lineEnd:Ho,polygonStart:Ho,polygonEnd:Ho,result:function(){var i=[[GD,cI],[fO,dI]];return fO=dI=-(cI=GD=1/0),i}};var R6,x3,uh,ch,C3=0,w3=0,hO=0,hI=0,pI=0,qD=0,E3=0,D3=0,pO=0,dh={point:T1,lineStart:N6,lineEnd:S3,polygonStart:function(){dh.lineStart=AW,dh.lineEnd=MW},polygonEnd:function(){dh.point=T1,dh.lineStart=N6,dh.lineEnd=S3},result:function(){var i=pO?[E3/pO,D3/pO]:qD?[hI/qD,pI/qD]:hO?[C3/hO,w3/hO]:[NaN,NaN];return C3=w3=hO=hI=pI=qD=E3=D3=pO=0,i}};function T1(i,s){C3+=i,w3+=s,++hO}function N6(){dh.point=P6}function P6(i,s){dh.point=L6,T1(uh=i,ch=s)}function L6(i,s){var o=i-uh,l=s-ch,c=ja(o*o+l*l);hI+=c*(uh+i)/2,pI+=c*(ch+s)/2,qD+=c,T1(uh=i,ch=s)}function S3(){dh.point=T1}function AW(){dh.point=OW}function MW(){B6(R6,x3)}function OW(i,s){dh.point=B6,T1(R6=uh=i,x3=ch=s)}function B6(i,s){var o=i-uh,l=s-ch,c=ja(o*o+l*l);hI+=c*(uh+i)/2,pI+=c*(ch+s)/2,qD+=c,E3+=(c=ch*i-uh*s)*(uh+i),D3+=c*(ch+s),pO+=3*c,T1(uh=i,ch=s)}const A3=dh;function V6(i){this._context=i}V6.prototype={_radius:4.5,pointRadius:function(i){return this._radius=i,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(i,s){switch(this._point){case 0:this._context.moveTo(i,s),this._point=1;break;case 1:this._context.lineTo(i,s);break;default:this._context.moveTo(i+this._radius,s),this._context.arc(i,s,this._radius,0,$a)}},result:Ho};var h_,p_,k1,YD,XD,gI=new Hs,F1={point:Ho,lineStart:function(){F1.point=M3},lineEnd:function(){h_&&Yd(p_,k1),F1.point=Ho},polygonStart:function(){h_=!0},polygonEnd:function(){h_=null},result:function(){var i=+gI;return gI=new Hs,i}};function M3(i,s){F1.point=Yd,p_=YD=i,k1=XD=s}function Yd(i,s){gI.add(ja((YD-=i)*YD+(XD-=s)*XD)),YD=i,XD=s}const KD=F1;function $6(){this._string=[]}function QD(i){return"m0,"+i+"a"+i+","+i+" 0 1,1 0,"+-2*i+"a"+i+","+i+" 0 1,1 0,"+2*i+"z"}function Xd(i,s){var l,c,o=4.5;function h(g){return g&&("function"==typeof o&&c.pointRadius(+o.apply(this,arguments)),Um(g,l(c))),c.result()}return h.area=function(g){return Um(g,l(uI)),uI.result()},h.measure=function(g){return Um(g,l(KD)),KD.result()},h.bounds=function(g){return Um(g,l(fI)),fI.result()},h.centroid=function(g){return Um(g,l(A3)),A3.result()},h.projection=function(g){return arguments.length?(l=null==g?(i=null,$D):(i=g).stream,h):i},h.context=function(g){return arguments.length?(c=null==g?(s=null,new $6):new V6(s=g),"function"!=typeof o&&c.pointRadius(o),h):s},h.pointRadius=function(g){return arguments.length?(o="function"==typeof g?g:(c.pointRadius(+g),+g),h):o},h.projection(i).context(s)}function mI(){var s,i=[];return{point:function(o,l,c){s.push([o,l,c])},lineStart:function(){i.push(s=[])},lineEnd:Ho,rejoin:function(){i.length>1&&i.push(i.pop().concat(i.shift()))},result:function(){var o=i;return i=[],s=null,o}}}function yI(i,s){return Fi(i[0]-s[0])<$n&&Fi(i[1]-s[1])<$n}function _I(i,s,o,l){this.x=i,this.z=s,this.o=o,this.e=l,this.v=!1,this.n=this.p=null}function j6(i,s,o,l,c){var y,v,h=[],g=[];if(i.forEach(function(R){if(!((N=R.length-1)<=0)){var N,H,P=R[0],z=R[N];if(yI(P,z)){if(!P[2]&&!z[2]){for(c.lineStart(),y=0;y<N;++y)c.point((P=R[y])[0],P[1]);return void c.lineEnd()}z[0]+=2*$n}h.push(H=new _I(P,R,null,!0)),g.push(H.o=new _I(P,null,H,!1)),h.push(H=new _I(z,R,null,!1)),g.push(H.o=new _I(z,null,H,!0))}}),h.length){for(g.sort(s),O3(h),O3(g),y=0,v=g.length;y<v;++y)g[y].e=o=!o;for(var E,x,C=h[0];;){for(var S=C,k=!0;S.v;)if((S=S.n)===C)return;E=S.z,c.lineStart();do{if(S.v=S.o.v=!0,S.e){if(k)for(y=0,v=E.length;y<v;++y)c.point((x=E[y])[0],x[1]);else l(S.x,S.n.x,1,c);S=S.n}else{if(k)for(y=(E=S.p.z).length-1;y>=0;--y)c.point((x=E[y])[0],x[1]);else l(S.x,S.p.x,-1,c);S=S.p}E=(S=S.o).z,k=!k}while(!S.v);c.lineEnd()}}}function O3(i){if(s=i.length){for(var s,c,o=0,l=i[0];++o<s;)l.n=c=i[o],c.p=l,l=c;l.n=c=i[0],c.p=l}}function vI(i){return[Uu(i[1],i[0]),su(i[2])]}function fh(i){var s=i[0],o=i[1],l=zn(o);return[l*zn(s),l*Fn(s),Fn(o)]}function gO(i,s){return i[0]*s[0]+i[1]*s[1]+i[2]*s[2]}function JD(i,s){return[i[1]*s[2]-i[2]*s[1],i[2]*s[0]-i[0]*s[2],i[0]*s[1]-i[1]*s[0]]}function T3(i,s){i[0]+=s[0],i[1]+=s[1],i[2]+=s[2]}function I1(i,s){return[i[0]*s,i[1]*s,i[2]*s]}function mO(i){var s=ja(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=s,i[1]/=s,i[2]/=s}function k3(i){return Fi(i[0])<=bi?i[0]:zc(i[0])*((Fi(i[0])+bi)%$a-bi)}function U6(i){return Array.from(function*(i){for(const s of i)yield*s}(i))}function bI(i,s,o,l){return function(c){var C,E,x,h=s(c),g=mI(),y=s(g),v=!1,S={point:k,lineStart:N,lineEnd:P,polygonStart:function(){S.point=z,S.lineStart=H,S.lineEnd=X,E=[],C=[]},polygonEnd:function(){S.point=k,S.lineStart=N,S.lineEnd=P,E=U6(E);var J=function(i,s){var o=k3(s),l=s[1],c=Fn(l),h=[Fn(o),-zn(o),0],g=0,y=0,v=new Hs;1===c?l=Cs+$n:-1===c&&(l=-Cs-$n);for(var C=0,E=i.length;C<E;++C)if(S=(x=i[C]).length)for(var x,S,k=x[S-1],R=k3(k),N=k[1]/2+M1,P=Fn(N),z=zn(N),H=0;H<S;++H,R=J,P=fe,z=te,k=X){var X=x[H],J=k3(X),oe=X[1]/2+M1,fe=Fn(oe),te=zn(oe),Re=J-R,ze=Re>=0?1:-1,Fe=ze*Re,Oe=Fe>bi,tt=P*fe;if(v.add(Uu(tt*ze*Fn(Fe),z*te+tt*zn(Fe))),g+=Oe?Re+ze*$a:Re,Oe^R>=o^J>=o){var et=JD(fh(k),fh(X));mO(et);var Ot=JD(h,et);mO(Ot);var Xe=(Oe^Re>=0?-1:1)*su(Ot[2]);(l>Xe||l===Xe&&(et[0]||et[1]))&&(y+=Oe^Re>=0?1:-1)}}return(g<-$n||g<$n&&v<-jD)^1&y}(C,l);E.length?(v||(c.polygonStart(),v=!0),j6(E,kW,J,o,c)):J&&(v||(c.polygonStart(),v=!0),c.lineStart(),o(null,null,1,c),c.lineEnd()),v&&(c.polygonEnd(),v=!1),E=C=null},sphere:function(){c.polygonStart(),c.lineStart(),o(null,null,1,c),c.lineEnd(),c.polygonEnd()}};function k(J,oe){i(J,oe)&&c.point(J,oe)}function R(J,oe){h.point(J,oe)}function N(){S.point=R,h.lineStart()}function P(){S.point=k,h.lineEnd()}function z(J,oe){x.push([J,oe]),y.point(J,oe)}function H(){y.lineStart(),x=[]}function X(){z(x[0][0],x[0][1]),y.lineEnd();var fe,Re,ze,Fe,J=y.clean(),oe=g.result(),te=oe.length;if(x.pop(),C.push(x),x=null,te){if(1&J){if((Re=(ze=oe[0]).length-1)>0){for(v||(c.polygonStart(),v=!0),c.lineStart(),fe=0;fe<Re;++fe)c.point((Fe=ze[fe])[0],Fe[1]);c.lineEnd()}return}te>1&&2&J&&oe.push(oe.pop().concat(oe.shift())),E.push(oe.filter(H6))}}return S}}function H6(i){return i.length>1}function kW(i,s){return((i=i.x)[0]<0?i[1]-Cs-$n:Cs-i[1])-((s=s.x)[0]<0?s[1]-Cs-$n:Cs-s[1])}$6.prototype={_radius:4.5,_circle:QD(4.5),pointRadius:function(i){return(i=+i)!==this._radius&&(this._radius=i,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(i,s){switch(this._point){case 0:this._string.push("M",i,",",s),this._point=1;break;case 1:this._string.push("L",i,",",s);break;default:null==this._circle&&(this._circle=QD(this._radius)),this._string.push("M",i,",",s,this._circle)}},result:function(){if(this._string.length){var i=this._string.join("");return this._string=[],i}return null}};const W6=bI(function(){return!0},function(i){var c,s=NaN,o=NaN,l=NaN;return{lineStart:function(){i.lineStart(),c=1},point:function(h,g){var y=h>0?bi:-bi,v=Fi(h-s);Fi(v-bi)<$n?(i.point(s,o=(o+g)/2>0?Cs:-Cs),i.point(l,o),i.lineEnd(),i.lineStart(),i.point(y,o),i.point(h,o),c=0):l!==y&&v>=bi&&(Fi(s-l)<$n&&(s-=l*$n),Fi(h-y)<$n&&(h-=y*$n),o=function(i,s,o,l){var c,h,g=Fn(i-o);return Fi(g)>$n?zD((Fn(s)*(h=zn(l))*Fn(o)-Fn(l)*(c=zn(s))*Fn(i))/(c*h*g)):(s+l)/2}(s,o,h,g),i.point(l,o),i.lineEnd(),i.lineStart(),i.point(y,o),c=0),i.point(s=h,o=g),l=y},lineEnd:function(){i.lineEnd(),s=o=NaN},clean:function(){return 2-c}}},function(i,s,o,l){var c;if(null==i)l.point(-bi,c=o*Cs),l.point(0,c),l.point(bi,c),l.point(bi,0),l.point(bi,-c),l.point(0,-c),l.point(-bi,-c),l.point(-bi,0),l.point(-bi,c);else if(Fi(i[0]-s[0])>$n){var h=i[0]<s[0]?bi:-bi;l.point(-h,c=o*h/2),l.point(0,c),l.point(h,c)}else l.point(s[0],s[1])},[-bi,-Cs]);function R3(i,s){(s=fh(s))[0]-=i,mO(s);var o=sI(-s[1]);return((-s[2]<0?-o:o)+$a-$n)%$a}function q6(i){var s=zn(i),o=6*ci,l=s>0,c=Fi(s)>$n;function g(E,x){return zn(E)*zn(x)>s}function v(E,x,S){var N=[1,0,0],P=JD(fh(E),fh(x)),z=gO(P,P),H=P[0],X=z-H*H;if(!X)return!S&&E;var J=s*z/X,oe=-s*H/X,fe=JD(N,P),te=I1(N,J);T3(te,I1(P,oe));var ze=fe,Fe=gO(te,ze),Oe=gO(ze,ze),tt=Fe*Fe-Oe*(gO(te,te)-1);if(!(tt<0)){var et=ja(tt),Ot=I1(ze,(-Fe-et)/Oe);if(T3(Ot,te),Ot=vI(Ot),!S)return Ot;var Wn,Xe=E[0],Tt=x[0],Xt=E[1],un=x[1];Tt<Xe&&(Wn=Xe,Xe=Tt,Tt=Wn);var xi=Tt-Xe,tr=Fi(xi-bi)<$n;if(!tr&&un<Xt&&(Wn=Xt,Xt=un,un=Wn),tr||xi<$n?tr?Xt+un>0^Ot[1]<(Fi(Ot[0]-Xe)<$n?Xt:un):Xt<=Ot[1]&&Ot[1]<=un:xi>bi^(Xe<=Ot[0]&&Ot[0]<=Tt)){var ao=I1(ze,(-Fe+et)/Oe);return T3(ao,te),[Ot,vI(ao)]}}}function C(E,x){var S=l?i:bi-i,k=0;return E<-S?k|=1:E>S&&(k|=2),x<-S?k|=4:x>S&&(k|=8),k}return bI(g,function(E){var x,S,k,R,N;return{lineStart:function(){R=k=!1,N=1},point:function(P,z){var X,H=[P,z],J=g(P,z),oe=l?J?0:C(P,z):J?C(P+(P<0?bi:-bi),z):0;if(!x&&(R=k=J)&&E.lineStart(),J!==k&&(!(X=v(x,H))||yI(x,X)||yI(H,X))&&(H[2]=1),J!==k)N=0,J?(E.lineStart(),X=v(H,x),E.point(X[0],X[1])):(X=v(x,H),E.point(X[0],X[1],2),E.lineEnd()),x=X;else if(c&&x&&l^J){var fe;!(oe&S)&&(fe=v(H,x,!0))&&(N=0,l?(E.lineStart(),E.point(fe[0][0],fe[0][1]),E.point(fe[1][0],fe[1][1]),E.lineEnd()):(E.point(fe[1][0],fe[1][1]),E.lineEnd(),E.lineStart(),E.point(fe[0][0],fe[0][1],3)))}J&&(!x||!yI(x,H))&&E.point(H[0],H[1]),x=H,k=J,S=oe},lineEnd:function(){k&&E.lineEnd(),x=null},clean:function(){return N|(R&&k)<<1}}},function(E,x,S,k){!function(i,s,o,l,c,h){if(o){var g=zn(s),y=Fn(s),v=l*o;null==c?(c=s+l*$a,h=s-v/2):(c=R3(g,c),h=R3(g,h),(l>0?c<h:c>h)&&(c+=l*$a));for(var C,E=c;l>0?E>h:E<h;E-=v)C=vI([g,-y*zn(E),-y*Fn(E)]),i.point(C[0],C[1])}}(k,i,o,S,E,x)},l?[0,-i]:[-bi,i-bi])}var ZD=1e9,R1=-ZD;function P3(i,s,o,l){function c(C,E){return i<=C&&C<=o&&s<=E&&E<=l}function h(C,E,x,S){var k=0,R=0;if(null==C||(k=g(C,x))!==(R=g(E,x))||v(C,E)<0^x>0)do{S.point(0===k||3===k?i:o,k>1?l:s)}while((k=(k+x+4)%4)!==R);else S.point(E[0],E[1])}function g(C,E){return Fi(C[0]-i)<$n?E>0?0:3:Fi(C[0]-o)<$n?E>0?2:1:Fi(C[1]-s)<$n?E>0?1:0:E>0?3:2}function y(C,E){return v(C.x,E.x)}function v(C,E){var x=g(C,1),S=g(E,1);return x!==S?x-S:0===x?E[1]-C[1]:1===x?C[0]-E[0]:2===x?C[1]-E[1]:E[0]-C[0]}return function(C){var S,k,R,N,P,z,H,X,J,oe,fe,E=C,x=mI(),te={point:Re,lineStart:function(){te.point=Ot,k&&k.push(R=[]),oe=!0,J=!1,H=X=NaN},lineEnd:function(){S&&(Ot(N,P),z&&J&&x.rejoin(),S.push(x.result())),te.point=Re,J&&E.lineEnd()},polygonStart:function(){E=x,S=[],k=[],fe=!0},polygonEnd:function(){var Xe=function(){for(var Xe=0,Tt=0,Xt=k.length;Tt<Xt;++Tt)for(var Sr,ao,un=k[Tt],Wn=1,xi=un.length,tr=un[0],Qo=tr[0],cu=tr[1];Wn<xi;++Wn)Sr=Qo,ao=cu,Qo=(tr=un[Wn])[0],cu=tr[1],ao<=l?cu>l&&(Qo-Sr)*(l-ao)>(cu-ao)*(i-Sr)&&++Xe:cu<=l&&(Qo-Sr)*(l-ao)<(cu-ao)*(i-Sr)&&--Xe;return Xe}(),Tt=fe&&Xe,Xt=(S=U6(S)).length;(Tt||Xt)&&(C.polygonStart(),Tt&&(C.lineStart(),h(null,null,1,C),C.lineEnd()),Xt&&j6(S,y,Xe,h,C),C.polygonEnd()),E=C,S=k=R=null}};function Re(Xe,Tt){c(Xe,Tt)&&E.point(Xe,Tt)}function Ot(Xe,Tt){var Xt=c(Xe,Tt);if(k&&R.push([Xe,Tt]),oe)N=Xe,P=Tt,z=Xt,oe=!1,Xt&&(E.lineStart(),E.point(Xe,Tt));else if(Xt&&J)E.point(Xe,Tt);else{var un=[H=Math.max(R1,Math.min(ZD,H)),X=Math.max(R1,Math.min(ZD,X))],Wn=[Xe=Math.max(R1,Math.min(ZD,Xe)),Tt=Math.max(R1,Math.min(ZD,Tt))];!function(i,s,o,l,c,h){var R,g=i[0],y=i[1],E=0,x=1,S=s[0]-g,k=s[1]-y;if(R=o-g,S||!(R>0)){if(R/=S,S<0){if(R<E)return;R<x&&(x=R)}else if(S>0){if(R>x)return;R>E&&(E=R)}if(R=c-g,S||!(R<0)){if(R/=S,S<0){if(R>x)return;R>E&&(E=R)}else if(S>0){if(R<E)return;R<x&&(x=R)}if(R=l-y,k||!(R>0)){if(R/=k,k<0){if(R<E)return;R<x&&(x=R)}else if(k>0){if(R>x)return;R>E&&(E=R)}if(R=h-y,k||!(R<0)){if(R/=k,k<0){if(R>x)return;R>E&&(E=R)}else if(k>0){if(R<E)return;R<x&&(x=R)}return E>0&&(i[0]=g+E*S,i[1]=y+E*k),x<1&&(s[0]=g+x*S,s[1]=y+x*k),!0}}}}}(un,Wn,i,s,o,l)?Xt&&(E.lineStart(),E.point(Xe,Tt),fe=!1):(J||(E.lineStart(),E.point(un[0],un[1])),E.point(Wn[0],Wn[1]),Xt||E.lineEnd(),fe=!1)}H=Xe,X=Tt,J=Xt}return te}}function CI(i,s){function o(l,c){return l=i(l,c),s(l[0],l[1])}return i.invert&&s.invert&&(o.invert=function(l,c){return(l=s.invert(l,c))&&i.invert(l[0],l[1])}),o}function ex(i,s){return[Fi(i)>bi?i+Math.round(-i/$a)*$a:i,s]}function wI(i,s,o){return(i%=$a)?s||o?CI(L3(i),yO(s,o)):L3(i):s||o?yO(s,o):ex}function EI(i){return function(s,o){return[(s+=i)>bi?s-$a:s<-bi?s+$a:s,o]}}function L3(i){var s=EI(i);return s.invert=EI(-i),s}function yO(i,s){var o=zn(i),l=Fn(i),c=zn(s),h=Fn(s);function g(y,v){var C=zn(v),E=zn(y)*C,x=Fn(y)*C,S=Fn(v),k=S*o+E*l;return[Uu(x*c-k*h,E*o-S*l),su(k*c+x*h)]}return g.invert=function(y,v){var C=zn(v),E=zn(y)*C,x=Fn(y)*C,S=Fn(v),k=S*c-x*h;return[Uu(x*c+S*h,E*o+k*l),su(k*o-E*l)]},g}function tx(i){return function(s){var o=new nx;for(var l in i)o[l]=i[l];return o.stream=s,o}}function nx(){}function _O(i,s,o){var l=i.clipExtent&&i.clipExtent();return i.scale(150).translate([0,0]),null!=l&&i.clipExtent(null),Um(o,i.stream(fI)),s(fI.result()),null!=l&&i.clipExtent(l),i}function ix(i,s,o){return _O(i,function(l){var c=s[1][0]-s[0][0],h=s[1][1]-s[0][1],g=Math.min(c/(l[1][0]-l[0][0]),h/(l[1][1]-l[0][1])),y=+s[0][0]+(c-g*(l[1][0]+l[0][0]))/2,v=+s[0][1]+(h-g*(l[1][1]+l[0][1]))/2;i.scale(150*g).translate([y,v])},o)}function Uc(i,s,o){return ix(i,[[0,0],s],o)}function DI(i,s,o){return _O(i,function(l){var c=+s,h=c/(l[1][0]-l[0][0]),g=(c-h*(l[1][0]+l[0][0]))/2,y=-h*l[0][1];i.scale(150*h).translate([g,y])},o)}function Hu(i,s,o){return _O(i,function(l){var c=+s,h=c/(l[1][1]-l[0][1]),g=-h*l[0][0],y=(c-h*(l[1][1]+l[0][1]))/2;i.scale(150*h).translate([g,y])},o)}ex.invert=ex,nx.prototype={constructor:nx,point:function(i,s){this.stream.point(i,s)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var IW=zn(30*ci);function $3(i,s){return+s?function(i,s){function o(l,c,h,g,y,v,C,E,x,S,k,R,N,P){var z=C-l,H=E-c,X=z*z+H*H;if(X>4*s&&N--){var J=g+S,oe=y+k,fe=v+R,te=ja(J*J+oe*oe+fe*fe),Re=su(fe/=te),ze=Fi(Fi(fe)-1)<$n||Fi(h-x)<$n?(h+x)/2:Uu(oe,J),Fe=i(ze,Re),Oe=Fe[0],tt=Fe[1],et=Oe-l,Ot=tt-c,Xe=H*et-z*Ot;(Xe*Xe/X>s||Fi((z*et+H*Ot)/X-.5)>.3||g*S+y*k+v*R<IW)&&(o(l,c,h,g,y,v,Oe,tt,ze,J/=te,oe/=te,fe,N,P),P.point(Oe,tt),o(Oe,tt,ze,J,oe,fe,C,E,x,S,k,R,N,P))}}return function(l){var c,h,g,y,v,C,E,x,S,k,R,N,P={point:z,lineStart:H,lineEnd:J,polygonStart:function(){l.polygonStart(),P.lineStart=oe},polygonEnd:function(){l.polygonEnd(),P.lineStart=H}};function z(Re,ze){Re=i(Re,ze),l.point(Re[0],Re[1])}function H(){x=NaN,P.point=X,l.lineStart()}function X(Re,ze){var Fe=fh([Re,ze]),Oe=i(Re,ze);o(x,S,E,k,R,N,x=Oe[0],S=Oe[1],E=Re,k=Fe[0],R=Fe[1],N=Fe[2],16,l),l.point(x,S)}function J(){P.point=z,l.lineEnd()}function oe(){H(),P.point=fe,P.lineEnd=te}function fe(Re,ze){X(c=Re,ze),h=x,g=S,y=k,v=R,C=N,P.point=X}function te(){o(x,S,E,k,R,N,h,g,c,y,v,C,16,l),P.lineEnd=J,J()}return P}}(i,s):function(i){return tx({point:function(s,o){s=i(s,o),this.stream.point(s[0],s[1])}})}(i)}var X6=tx({point:function(i,s){this.stream.point(i*ci,s*ci)}});function j3(i,s,o,l,c,h){if(!h)return function(i,s,o,l,c){function h(g,y){return[s+i*(g*=l),o-i*(y*=c)]}return h.invert=function(g,y){return[(g-s)/i*l,(o-y)/i*c]},h}(i,s,o,l,c);var g=zn(h),y=Fn(h),v=g*i,C=y*i,E=g/i,x=y/i,S=(y*o-g*s)/i,k=(y*s+g*o)/i;function R(N,P){return[v*(N*=l)-C*(P*=c)+s,o-C*N-v*P]}return R.invert=function(N,P){return[l*(E*N-x*P+S),c*(k-x*N-E*P)]},R}function Kd(i){return vO(function(){return i})()}function vO(i){var s,E,z,H,X,fe,te,Re,ze,Fe,o=150,l=480,c=250,h=0,g=0,y=0,v=0,C=0,x=0,S=1,k=1,R=null,N=W6,P=null,J=$D,oe=.5;function Oe(Xe){return Re(Xe[0]*ci,Xe[1]*ci)}function tt(Xe){return(Xe=Re.invert(Xe[0],Xe[1]))&&[Xe[0]*ws,Xe[1]*ws]}function et(){var Xe=j3(o,0,0,S,k,x).apply(null,s(h,g)),Tt=j3(o,l-Xe[0],c-Xe[1],S,k,x);return E=wI(y,v,C),te=CI(s,Tt),Re=CI(E,te),fe=$3(te,oe),Ot()}function Ot(){return ze=Fe=null,Oe}return Oe.stream=function(Xe){return ze&&Fe===Xe?ze:ze=X6(function(i){return tx({point:function(s,o){var l=i(s,o);return this.stream.point(l[0],l[1])}})}(E)(N(fe(J(Fe=Xe)))))},Oe.preclip=function(Xe){return arguments.length?(N=Xe,R=void 0,Ot()):N},Oe.postclip=function(Xe){return arguments.length?(J=Xe,P=z=H=X=null,Ot()):J},Oe.clipAngle=function(Xe){return arguments.length?(N=+Xe?q6(R=Xe*ci):(R=null,W6),Ot()):R*ws},Oe.clipExtent=function(Xe){return arguments.length?(J=null==Xe?(P=z=H=X=null,$D):P3(P=+Xe[0][0],z=+Xe[0][1],H=+Xe[1][0],X=+Xe[1][1]),Ot()):null==P?null:[[P,z],[H,X]]},Oe.scale=function(Xe){return arguments.length?(o=+Xe,et()):o},Oe.translate=function(Xe){return arguments.length?(l=+Xe[0],c=+Xe[1],et()):[l,c]},Oe.center=function(Xe){return arguments.length?(h=Xe[0]%360*ci,g=Xe[1]%360*ci,et()):[h*ws,g*ws]},Oe.rotate=function(Xe){return arguments.length?(y=Xe[0]%360*ci,v=Xe[1]%360*ci,C=Xe.length>2?Xe[2]%360*ci:0,et()):[y*ws,v*ws,C*ws]},Oe.angle=function(Xe){return arguments.length?(x=Xe%360*ci,et()):x*ws},Oe.reflectX=function(Xe){return arguments.length?(S=Xe?-1:1,et()):S<0},Oe.reflectY=function(Xe){return arguments.length?(k=Xe?-1:1,et()):k<0},Oe.precision=function(Xe){return arguments.length?(fe=$3(te,oe=Xe*Xe),Ot()):ja(oe)},Oe.fitExtent=function(Xe,Tt){return ix(Oe,Xe,Tt)},Oe.fitSize=function(Xe,Tt){return Uc(Oe,Xe,Tt)},Oe.fitWidth=function(Xe,Tt){return DI(Oe,Xe,Tt)},Oe.fitHeight=function(Xe,Tt){return Hu(Oe,Xe,Tt)},function(){return s=i.apply(this,arguments),Oe.invert=s.invert&&tt,et()}}function xI(i){var s=0,o=bi/3,l=vO(i),c=l(s,o);return c.parallels=function(h){return arguments.length?l(s=h[0]*ci,o=h[1]*ci):[s*ws,o*ws]},c}function Q6(i,s){var o=Fn(i),l=(o+Fn(s))/2;if(Fi(l)<$n)return function(i){var s=zn(i);function o(l,c){return[l*s,Fn(c)/s]}return o.invert=function(l,c){return[l/s,su(c*s)]},o}(i);var c=1+o*(2*l-o),h=ja(c)/l;function g(y,v){var C=ja(c-2*l*Fn(v))/l;return[C*Fn(y*=l),h-C*zn(y)]}return g.invert=function(y,v){var C=h-v,E=Uu(y,Fi(C))*zc(C);return C*l<0&&(E-=bi*zc(y)*zc(C)),[E/l,su((c-(y*y+C*C)*l*l)/(2*l))]},g}function SI(){return xI(Q6).scale(155.424).center([0,33.6442])}function bO(){return SI().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function H3(i){return function(s,o){var l=zn(s),c=zn(o),h=i(l*c);return h===1/0?[2,0]:[h*c*Fn(s),h*Fn(o)]}}function N1(i){return function(s,o){var l=ja(s*s+o*o),c=i(l),h=Fn(c),g=zn(c);return[Uu(s*h,l*g),su(l&&o*h/l)]}}var Hm=H3(function(i){return ja(2/(1+i))});Hm.invert=N1(function(i){return 2*su(i/2)});var MI=H3(function(i){return(i=sI(i))&&i/Fn(i)});function m_(i,s){return[i,O1(uO((Cs+s)/2))]}function e4(i){var y,v,C,s=Kd(i),o=s.center,l=s.scale,c=s.translate,h=s.clipExtent,g=null;function E(){var x=bi*l(),S=s(function(i){function s(o){return(o=i(o[0]*ci,o[1]*ci))[0]*=ws,o[1]*=ws,o}return i=wI(i[0]*ci,i[1]*ci,i.length>2?i[2]*ci:0),s.invert=function(o){return(o=i.invert(o[0]*ci,o[1]*ci))[0]*=ws,o[1]*=ws,o},s}(s.rotate()).invert([0,0]));return h(null==g?[[S[0]-x,S[1]-x],[S[0]+x,S[1]+x]]:i===m_?[[Math.max(S[0]-x,g),y],[Math.min(S[0]+x,v),C]]:[[g,Math.max(S[1]-x,y)],[v,Math.min(S[1]+x,C)]])}return s.scale=function(x){return arguments.length?(l(x),E()):l()},s.translate=function(x){return arguments.length?(c(x),E()):c()},s.center=function(x){return arguments.length?(o(x),E()):o()},s.clipExtent=function(x){return arguments.length?(null==x?g=y=v=C=null:(g=+x[0][0],y=+x[0][1],v=+x[1][0],C=+x[1][1]),E()):null==g?null:[[g,y],[v,C]]},E()}function OI(i){return uO((Cs+i)/2)}function W3(i,s){var o=zn(i),l=i===s?Fn(i):O1(o/zn(s))/O1(OI(s)/OI(i)),c=o*WD(OI(i),l)/l;if(!l)return m_;function h(g,y){c>0?y<-Cs+$n&&(y=-Cs+$n):y>Cs-$n&&(y=Cs-$n);var v=c/WD(OI(y),l);return[v*Fn(l*g),c-v*zn(l*g)]}return h.invert=function(g,y){var v=c-y,C=zc(l)*ja(g*g+v*v),E=Uu(g,Fi(v))*zc(v);return v*l<0&&(E-=bi*zc(g)*zc(v)),[E/l,2*zD(WD(c/C,1/l))-Cs]},h}function CO(i,s){return[i,s]}function n4(i,s){var o=zn(i),l=i===s?Fn(i):(o-zn(s))/(s-i),c=o/l+i;if(Fi(l)<$n)return CO;function h(g,y){var v=c-y,C=l*g;return[v*Fn(C),c-v*zn(C)]}return h.invert=function(g,y){var v=c-y,C=Uu(g,Fi(v))*zc(v);return v*l<0&&(C-=bi*zc(g)*zc(v)),[C/l,c-zc(l)*ja(g*g+v*v)]},h}MI.invert=N1(function(i){return i}),m_.invert=function(i,s){return[i,2*zD(HD(s))-Cs]},CO.invert=CO;var P1=1.340264,wO=-.081106,EO=893e-6,rx=.003796,L1=ja(3)/2;function r4(i,s){var o=su(L1*Fn(s)),l=o*o,c=l*l*l;return[i*zn(o)/(L1*(P1+3*wO*l+c*(7*EO+9*rx*l))),o*(P1+wO*l+c*(EO+rx*l))]}function TI(i,s){var o=zn(s),l=zn(i)*o;return[o*Fn(i)/l,Fn(s)/l]}function Y3(i,s){var o=s*s,l=o*o;return[i*(.8707-.131979*o+l*(l*(.003971*o-.001529*l)-.013791)),s*(1.007226+o*(.015085+l*(.028874*o-.044475-.005916*l)))]}function kI(i,s){return[zn(s)*Fn(i),Fn(s)]}function FI(i,s){var o=zn(s),l=1+zn(i)*o;return[o*Fn(i)/l,Fn(s)/l]}function xO(i,s){return[O1(uO((Cs+s)/2)),-i]}r4.invert=function(i,s){for(var g,o=s,l=o*o,c=l*l*l,h=0;h<12&&(c=(l=(o-=g=(o*(P1+wO*l+c*(EO+rx*l))-s)/(P1+3*wO*l+c*(7*EO+9*rx*l)))*o)*l*l,!(Fi(g)<jD));++h);return[L1*i*(P1+3*wO*l+c*(7*EO+9*rx*l))/zn(o),su(Fn(o)/L1)]},TI.invert=N1(zD),Y3.invert=function(i,s){var c,o=s,l=25;do{var h=o*o,g=h*h;o-=c=(o*(1.007226+h*(.015085+g*(.028874*h-.044475-.005916*g)))-s)/(1.007226+h*(.045255+g*(.259866*h-.311325-.005916*11*g)))}while(Fi(c)>$n&&--l>0);return[i/(.8707+(h=o*o)*(h*(h*h*h*(.003971-.001529*h)-.013791)-.131979)),o]},kI.invert=N1(su),FI.invert=N1(function(i){return 2*zD(i)}),xO.invert=function(i,s){return[-s,2*zD(HD(i))-Cs]};var SO=Math.abs,to=(Math,Math,Math,Math.cos),NI=(Math,Math,Math,Math,Math,Math,Math,Math,Math.sin),Wm=(Math,Math.PI),PI=Wm/2,Q3=(Math,MO(2));function J3(i){return i>1?PI:i<-1?-PI:Math.asin(i)}function MO(i){return i>0?Math.sqrt(i):0}function QW(i,s){var c,o=i*NI(s),l=30;do{s-=c=(s+NI(s)-o)/(1+to(s))}while(SO(c)>1e-6&&--l>0);return s/2}MO(Wm);var d4=function(i,s,o){function l(c,h){return[i*c*to(h=QW(o,h)),s*NI(h)]}return l.invert=function(c,h){return h=J3(h/s),[c/(i*to(h)),J3((2*h+NI(2*h))/o)]},l}(Q3/PI,Q3,Wm);const sx=Xd(),OO=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function JW(i,s){return function o(){const l=s();return l.type=i,l.path=Xd().projection(l),l.copy=l.copy||function(){const c=o();return OO.forEach(h=>{l[h]&&c[h](l[h]())}),c.path.pointRadius(l.path.pointRadius()),c},l}}function LI(i,s){if(!i||"string"!=typeof i)throw new Error("Projection type must be a name string.");return i=i.toLowerCase(),arguments.length>1?(BI[i]=JW(i,s),this):BI[i]||null}function h4(i){return i&&i.path||sx}const BI={albers:bO,albersusa:function(){var i,s,l,h,y,v,o=bO(),c=SI().rotate([154,0]).center([-2,58.5]).parallels([55,65]),g=SI().rotate([157,0]).center([-3,19.9]).parallels([8,18]),C={point:function(S,k){v=[S,k]}};function E(S){var k=S[0],R=S[1];return v=null,l.point(k,R),v||(h.point(k,R),v)||(y.point(k,R),v)}function x(){return i=s=null,E}return E.invert=function(S){var k=o.scale(),R=o.translate(),N=(S[0]-R[0])/k,P=(S[1]-R[1])/k;return(P>=.12&&P<.234&&N>=-.425&&N<-.214?c:P>=.166&&P<.234&&N>=-.214&&N<-.115?g:o).invert(S)},E.stream=function(S){return i&&s===S?i:i=function(i){var s=i.length;return{point:function(o,l){for(var c=-1;++c<s;)i[c].point(o,l)},sphere:function(){for(var o=-1;++o<s;)i[o].sphere()},lineStart:function(){for(var o=-1;++o<s;)i[o].lineStart()},lineEnd:function(){for(var o=-1;++o<s;)i[o].lineEnd()},polygonStart:function(){for(var o=-1;++o<s;)i[o].polygonStart()},polygonEnd:function(){for(var o=-1;++o<s;)i[o].polygonEnd()}}}([o.stream(s=S),c.stream(S),g.stream(S)])},E.precision=function(S){return arguments.length?(o.precision(S),c.precision(S),g.precision(S),x()):o.precision()},E.scale=function(S){return arguments.length?(o.scale(S),c.scale(.35*S),g.scale(S),E.translate(o.translate())):o.scale()},E.translate=function(S){if(!arguments.length)return o.translate();var k=o.scale(),R=+S[0],N=+S[1];return l=o.translate(S).clipExtent([[R-.455*k,N-.238*k],[R+.455*k,N+.238*k]]).stream(C),h=c.translate([R-.307*k,N+.201*k]).clipExtent([[R-.425*k+$n,N+.12*k+$n],[R-.214*k-$n,N+.234*k-$n]]).stream(C),y=g.translate([R-.205*k,N+.212*k]).clipExtent([[R-.214*k+$n,N+.166*k+$n],[R-.115*k-$n,N+.234*k-$n]]).stream(C),x()},E.fitExtent=function(S,k){return ix(E,S,k)},E.fitSize=function(S,k){return Uc(E,S,k)},E.fitWidth=function(S,k){return DI(E,S,k)},E.fitHeight=function(S,k){return Hu(E,S,k)},E.scale(1070)},azimuthalequalarea:function(){return Kd(Hm).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return Kd(MI).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return xI(W3).scale(109.5).parallels([30,30])},conicequalarea:SI,conicequidistant:function(){return xI(n4).scale(131.154).center([0,13.9389])},equalEarth:function(){return Kd(r4).scale(177.158)},equirectangular:function(){return Kd(CO).scale(152.63)},gnomonic:function(){return Kd(TI).scale(144.049).clipAngle(60)},identity:function(){var g,y,C,E,x,P,z,i=1,s=0,o=0,l=1,c=1,h=0,v=null,S=1,k=1,R=tx({point:function(J,oe){var fe=X([J,oe]);this.stream.point(fe[0],fe[1])}}),N=$D;function H(){return S=i*l,k=i*c,P=z=null,X}function X(J){var oe=J[0]*S,fe=J[1]*k;if(h){var te=fe*g-oe*y;oe=oe*g+fe*y,fe=te}return[oe+s,fe+o]}return X.invert=function(J){var oe=J[0]-s,fe=J[1]-o;if(h){var te=fe*g+oe*y;oe=oe*g-fe*y,fe=te}return[oe/S,fe/k]},X.stream=function(J){return P&&z===J?P:P=R(N(z=J))},X.postclip=function(J){return arguments.length?(N=J,v=C=E=x=null,H()):N},X.clipExtent=function(J){return arguments.length?(N=null==J?(v=C=E=x=null,$D):P3(v=+J[0][0],C=+J[0][1],E=+J[1][0],x=+J[1][1]),H()):null==v?null:[[v,C],[E,x]]},X.scale=function(J){return arguments.length?(i=+J,H()):i},X.translate=function(J){return arguments.length?(s=+J[0],o=+J[1],H()):[s,o]},X.angle=function(J){return arguments.length?(y=Fn(h=J%360*ci),g=zn(h),H()):h*ws},X.reflectX=function(J){return arguments.length?(l=J?-1:1,H()):l<0},X.reflectY=function(J){return arguments.length?(c=J?-1:1,H()):c<0},X.fitExtent=function(J,oe){return ix(X,J,oe)},X.fitSize=function(J,oe){return Uc(X,J,oe)},X.fitWidth=function(J,oe){return DI(X,J,oe)},X.fitHeight=function(J,oe){return Hu(X,J,oe)},X},mercator:function(){return e4(m_).scale(961/$a)},mollweide:function(){return Kd(d4).scale(169.529)},naturalEarth1:function(){return Kd(Y3).scale(175.295)},orthographic:function(){return Kd(kI).scale(249.5).clipAngle(90+$n)},stereographic:function(){return Kd(FI).scale(250).clipAngle(142)},transversemercator:function(){var i=e4(xO),s=i.center,o=i.rotate;return i.center=function(l){return arguments.length?s([-l[1],l[0]]):[(l=s())[1],-l[0]]},i.rotate=function(l){return arguments.length?o([l[0],l[1],l.length>2?l[2]+90:90]):[(l=o())[0],l[1],l[2]-90]},o([0,0,90]).scale(159.155)}};for(const i in BI)LI(i,BI[i]);function p4(i,s,o){var l=Aa(i,s-$n,o).concat(s);return function(c){return l.map(function(h){return[c,h]})}}function TO(i,s,o){var l=Aa(i,s-$n,o).concat(s);return function(c){return l.map(function(h){return[h,c]})}}function g4(){}const Gm=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function eB(){var i=1,s=1,o=y;function l(v,C){return C.map(E=>c(v,E))}function c(v,C){var E=[],x=[];return function(v,C,E){var k,R,P,z,H,x=new Array,S=new Array;for(k=R=-1,Gm[(P=v[0]>=C)<<1].forEach(X);++k<i-1;)Gm[P|(P=v[k+1]>=C)<<1].forEach(X);for(Gm[P<<0].forEach(X);++R<s-1;){for(k=-1,Gm[(P=v[R*i+i]>=C)<<1|(z=v[R*i]>=C)<<2].forEach(X);++k<i-1;)H=z,Gm[P|(P=v[R*i+i+k+1]>=C)<<1|(z=v[R*i+k+1]>=C)<<2|H<<3].forEach(X);Gm[P|z<<3].forEach(X)}for(k=-1,Gm[(z=v[R*i]>=C)<<2].forEach(X);++k<i-1;)H=z,Gm[(z=v[R*i+k+1]>=C)<<2|H<<3].forEach(X);function X(J){var ze,Fe,oe=[J[0][0]+k,J[0][1]+R],fe=[J[1][0]+k,J[1][1]+R],te=g(oe),Re=g(fe);(ze=S[te])?(Fe=x[Re])?(delete S[ze.end],delete x[Fe.start],ze===Fe?(ze.ring.push(fe),E(ze.ring)):x[ze.start]=S[Fe.end]={start:ze.start,end:Fe.end,ring:ze.ring.concat(Fe.ring)}):(delete S[ze.end],ze.ring.push(fe),S[ze.end=Re]=ze):(ze=x[Re])?(Fe=S[te])?(delete x[ze.start],delete S[Fe.end],ze===Fe?(ze.ring.push(fe),E(ze.ring)):x[Fe.start]=S[ze.end]={start:Fe.start,end:ze.end,ring:Fe.ring.concat(ze.ring)}):(delete x[ze.start],ze.ring.unshift(oe),x[ze.start=te]=ze):x[te]=S[Re]={start:te,end:Re,ring:[oe,fe]}}Gm[z<<3].forEach(X)}(v,C,S=>{o(S,v,C),function(i){for(var s=0,o=i.length,l=i[o-1][1]*i[0][0]-i[o-1][0]*i[0][1];++s<o;)l+=i[s-1][1]*i[s][0]-i[s-1][0]*i[s][1];return l}(S)>0?E.push([S]):x.push(S)}),x.forEach(S=>{for(var N,k=0,R=E.length;k<R;++k)if(-1!==y4((N=E[k])[0],S))return void N.push(S)}),{type:"MultiPolygon",value:C,coordinates:E}}function g(v){return 2*v[0]+v[1]*(i+1)*4}function y(v,C,E){v.forEach(x=>{var P,S=x[0],k=x[1],R=0|S,N=0|k,z=C[N*i+R];S>0&&S<i&&R===S&&(x[0]=S+(E-(P=C[N*i+R-1]))/(z-P)-.5),k>0&&k<s&&N===k&&(x[1]=k+(E-(P=C[(N-1)*i+R]))/(z-P)-.5)})}return l.contour=c,l.size=function(v){if(!arguments.length)return[i,s];var C=Math.floor(v[0]),E=Math.floor(v[1]);return C>=0&&E>=0||(0,T.vU)("invalid size"),i=C,s=E,l},l.smooth=function(v){return arguments.length?(o=v?y:g4,l):o===y},l}function y4(i,s){for(var c,o=-1,l=s.length;++o<l;)if(c=Qd(i,s[o]))return c;return 0}function Qd(i,s){for(var o=s[0],l=s[1],c=-1,h=0,g=i.length,y=g-1;h<g;y=h++){var v=i[h],C=v[0],E=v[1],x=i[y],S=x[0],k=x[1];if(eG(v,x,s))return 0;E>l!=k>l&&o<(S-C)*(l-E)/(k-E)+C&&(c=-c)}return c}function eG(i,s,o){var l;return function(i,s,o){return(s[0]-i[0])*(o[1]-i[1])==(o[0]-i[0])*(s[1]-i[1])}(i,s,o)&&function(i,s,o){return i<=s&&s<=o||o<=s&&s<=i}(i[l=+(i[0]===s[0])],o[l],s[l])}function VI(i,s,o){return function(l){var c=(0,T.We)(l),h=o?Math.min(c[0],0):c[0],g=c[1],y=g-h,v=s?At(h,g,i):y/(i+1);return Aa(h+v,g,v)}}function kO(i){Ke.call(this,null,i)}function FO(i,s,o,l,c){const h=i.x1||0,g=i.y1||0,y=s*o<0;function v(x){x.forEach(C)}function C(x){y&&x.reverse(),x.forEach(E)}function E(x){x[0]=(x[0]-h)*s+l,x[1]=(x[1]-g)*o+c}return function(x){return x.coordinates.forEach(v),x}}function IO(i,s,o){const l=i>=0?i:ZS(s,o);return Math.round((Math.sqrt(4*l*l+1)-1)/2)}function B1(i){return(0,T.mf)(i)?i:(0,T.a9)(+i)}function ox(){var i=v=>v[0],s=v=>v[1],o=T.kX,l=[-1,-1],c=960,h=500,g=2;function y(v,C){const E=IO(l[0],v,i)>>g,x=IO(l[1],v,s)>>g,S=E?E+2:0,k=x?x+2:0,R=2*S+(c>>g),N=2*k+(h>>g),P=new Float32Array(R*N),z=new Float32Array(R*N);let H=P;v.forEach(J=>{const oe=S+(+i(J)>>g),fe=k+(+s(J)>>g);oe>=0&&oe<R&&fe>=0&&fe<N&&(P[oe+fe*R]+=+o(J))}),E>0&&x>0?(__(R,N,P,z,E),v_(R,N,z,P,x),__(R,N,P,z,E),v_(R,N,z,P,x),__(R,N,P,z,E),v_(R,N,z,P,x)):E>0?(__(R,N,P,z,E),__(R,N,z,P,E),__(R,N,P,z,E),H=z):x>0&&(v_(R,N,P,z,x),v_(R,N,z,P,x),v_(R,N,P,z,x),H=z);const X=C?Math.pow(2,-2*g):1/c_(H);for(let J=0,oe=R*N;J<oe;++J)H[J]*=X;return{values:H,scale:1<<g,width:R,height:N,x1:S,y1:k,x2:S+(c>>g),y2:k+(h>>g)}}return y.x=function(v){return arguments.length?(i=B1(v),y):i},y.y=function(v){return arguments.length?(s=B1(v),y):s},y.weight=function(v){return arguments.length?(o=B1(v),y):o},y.size=function(v){if(!arguments.length)return[c,h];var C=+v[0],E=+v[1];return C>=0&&E>=0||(0,T.vU)("invalid size"),c=C,h=E,y},y.cellSize=function(v){return arguments.length?((v=+v)>=1||(0,T.vU)("invalid cell size"),g=Math.floor(Math.log(v)/Math.LN2),y):1<<g},y.bandwidth=function(v){return arguments.length?(1===(v=(0,T.IX)(v)).length&&(v=[+v[0],+v[0]]),2!==v.length&&(0,T.vU)("invalid bandwidth"),l=v,y):l},y}function __(i,s,o,l,c){const h=1+(c<<1);for(let g=0;g<s;++g)for(let y=0,v=0;y<i+c;++y)y<i&&(v+=o[y+g*i]),y>=c&&(y>=h&&(v-=o[y-h+g*i]),l[y-c+g*i]=v/Math.min(y+1,i-1+h-y,h))}function v_(i,s,o,l,c){const h=1+(c<<1);for(let g=0;g<i;++g)for(let y=0,v=0;y<s+c;++y)y<s&&(v+=o[g+y*i]),y>=c&&(y>=h&&(v-=o[g+(y-h)*i]),l[g+(y-c)*i]=v/Math.min(y+1,s-1+h-y,h))}function jI(i){Ke.call(this,null,i)}kO.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},(0,T.XW)(kO,Ke,{transform(i,s){if(this.value&&!s.changed()&&!i.modified())return s.StopPropagation;var o=s.fork(s.NO_SOURCE|s.NO_FIELDS),l=s.materialize(s.SOURCE).source,c=i.field||T.yR,h=eB().smooth(!1!==i.smooth),g=i.thresholds||function(i,s,o){const l=VI(o.levels||10,o.nice,!1!==o.zero);return"shared"!==o.resolve?l:l(i.map(c=>md(s(c).values)))}(l,c,i),y=null===i.as?null:i.as||"contour",v=[];return l.forEach(C=>{const E=c(C),x=h.size([E.width,E.height])(E.values,(0,T.kJ)(g)?g:g(E.values));(function(i,s,o,l){let c=l.scale||s.scale,h=l.translate||s.translate;if((0,T.mf)(c)&&(c=c(o,l)),(0,T.mf)(h)&&(h=h(o,l)),(1===c||null==c)&&!h)return;const g=((0,T.hj)(c)?c:c[0])||1,y=((0,T.hj)(c)?c:c[1])||1;i.forEach(FO(s,g,y,h&&h[0]||0,h&&h[1]||0))})(x,E,C,i),x.forEach(S=>{v.push($h(C,Ti(null!=y?{[y]:S}:S)))})}),this.value&&(o.rem=this.value),this.value=o.source=o.add=v,o}}),jI.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const v4=["x","y","weight","size","cellSize","bandwidth"];function zI(i,s){return v4.forEach(o=>null!=s[o]?i[o](s[o]):0),i}function UI(i){Ke.call(this,null,i)}(0,T.XW)(jI,Ke,{transform(i,s){if(this.value&&!s.changed()&&!i.modified())return s.StopPropagation;var v,o=s.fork(s.NO_SOURCE|s.NO_FIELDS),c=function(i,s){var c,h,g,y,v,C,o=[],l=E=>E(y);if(null==s)o.push(i);else for(c={},h=0,g=i.length;h<g;++h)y=i[h],(C=c[v=s.map(l)])||(c[v]=C=[],C.dims=v,o.push(C)),C.push(y);return o}(s.materialize(s.SOURCE).source,i.groupby),h=(i.groupby||[]).map(T.el),g=zI(ox(),i),y=i.as||"grid";return v=c.map(E=>Ti(function(E,x){for(let S=0;S<h.length;++S)E[h[S]]=x[S];return E}({[y]:g(E,i.counts)},E.dims))),this.value&&(o.rem=this.value),this.value=o.source=o.add=v,o}}),UI.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},(0,T.XW)(UI,Ke,{transform(i,s){if(this.value&&!s.changed()&&!i.modified())return s.StopPropagation;var y,v,o=s.fork(s.NO_SOURCE|s.NO_FIELDS),l=eB().smooth(!1!==i.smooth),c=i.values,h=i.thresholds||VI(i.count||10,i.nice,!!c),g=i.size;return c||(c=s.materialize(s.SOURCE).source,v=FO(y=zI(ox(),i)(c,!0),y.scale||1,y.scale||1,0,0),g=[y.width,y.height],c=y.values),h=(0,T.kJ)(h)?h:h(c),c=l.size(g)(c,h),v&&c.forEach(v),this.value&&(o.rem=this.value),this.value=o.source=o.add=(c||[]).map(Ti),o}});const HI="Feature",ax="FeatureCollection";function ha(i){Ke.call(this,null,i)}function b_(i){Ke.call(this,null,i)}function NO(i){Ke.call(this,null,i)}function V1(i){Ke.call(this,null,i)}function PO(i){Ke.call(this,[],i),this.generator=function(){var i,s,o,l,c,h,g,y,S,k,R,N,v=10,C=v,E=90,x=360,P=2.5;function z(){return{type:"MultiLineString",coordinates:H()}}function H(){return Aa(UD(l/E)*E,o,E).map(R).concat(Aa(UD(y/x)*x,g,x).map(N)).concat(Aa(UD(s/v)*v,i,v).filter(function(X){return Fi(X%E)>$n}).map(S)).concat(Aa(UD(h/C)*C,c,C).filter(function(X){return Fi(X%x)>$n}).map(k))}return z.lines=function(){return H().map(function(X){return{type:"LineString",coordinates:X}})},z.outline=function(){return{type:"Polygon",coordinates:[R(l).concat(N(g).slice(1),R(o).reverse().slice(1),N(y).reverse().slice(1))]}},z.extent=function(X){return arguments.length?z.extentMajor(X).extentMinor(X):z.extentMinor()},z.extentMajor=function(X){return arguments.length?(y=+X[0][1],g=+X[1][1],(l=+X[0][0])>(o=+X[1][0])&&(X=l,l=o,o=X),y>g&&(X=y,y=g,g=X),z.precision(P)):[[l,y],[o,g]]},z.extentMinor=function(X){return arguments.length?(h=+X[0][1],c=+X[1][1],(s=+X[0][0])>(i=+X[1][0])&&(X=s,s=i,i=X),h>c&&(X=h,h=c,c=X),z.precision(P)):[[s,h],[i,c]]},z.step=function(X){return arguments.length?z.stepMajor(X).stepMinor(X):z.stepMinor()},z.stepMajor=function(X){return arguments.length?(E=+X[0],x=+X[1],z):[E,x]},z.stepMinor=function(X){return arguments.length?(v=+X[0],C=+X[1],z):[v,C]},z.precision=function(X){return arguments.length?(P=+X,S=p4(h,c,90),k=TO(s,i,P),R=p4(y,g,90),N=TO(l,o,P),z):P},z.extentMajor([[-180,-90+$n],[180,90-$n]]).extentMinor([[-180,-80-$n],[180,80+$n]])}()}function $1(i){Ke.call(this,null,i)}function iB(i){if(!(0,T.mf)(i))return!1;const s=(0,T.Rg)((0,T.Oj)(i));return s.$x||s.$y||s.$value||s.$max}function GI(i){Ke.call(this,null,i),this.modified(!0)}function rB(i,s,o){(0,T.mf)(i[s])&&i[s](o)}function sB(i,s,o,l){if(isNaN(s)||isNaN(o))return i;var c,x,S,k,R,N,P,z,H,h=i._root,g={data:l},y=i._x0,v=i._y0,C=i._x1,E=i._y1;if(!h)return i._root=g,i;for(;h.length;)if((N=s>=(x=(y+C)/2))?y=x:C=x,(P=o>=(S=(v+E)/2))?v=S:E=S,c=h,!(h=h[z=P<<1|N]))return c[z]=g,i;if(k=+i._x.call(null,h.data),R=+i._y.call(null,h.data),s===k&&o===R)return g.next=h,c?c[z]=g:i._root=g,i;do{c=c?c[z]=new Array(4):i._root=new Array(4),(N=s>=(x=(y+C)/2))?y=x:C=x,(P=o>=(S=(v+E)/2))?v=S:E=S}while((z=P<<1|N)==(H=(R>=S)<<1|k>=x));return c[H]=h,c[z]=g,i}function za(i,s,o,l,c){this.node=i,this.x0=s,this.y0=o,this.x1=l,this.y1=c}function z1(i){return i[0]}function R4(i){return i[1]}function BO(i,s,o){var l=new VO(null==s?z1:s,null==o?R4:o,NaN,NaN,NaN,NaN);return null==i?l:l.addAll(i)}function VO(i,s,o,l,c,h){this._x=i,this._y=s,this._x0=o,this._y0=l,this._x1=c,this._y1=h,this._root=void 0}function XI(i){for(var s={data:i.data},o=s;i=i.next;)o=o.next={data:i.data};return s}ha.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},(0,T.XW)(ha,Ke,{transform(i,s){var C,o=this._features,l=this._points,c=i.fields,h=c&&c[0],g=c&&c[1],y=i.geojson||!c&&T.yR,v=s.ADD;C=i.modified()||s.changed(s.REM)||s.modified((0,T.Oj)(y))||h&&s.modified((0,T.Oj)(h))||g&&s.modified((0,T.Oj)(g)),(!this.value||C)&&(v=s.SOURCE,this._features=o=[],this._points=l=[]),y&&s.visit(v,E=>o.push(y(E))),h&&g&&(s.visit(v,E=>{var x=h(E),S=g(E);null!=x&&null!=S&&(x=+x)===x&&(S=+S)===S&&l.push([x,S])}),o=o.concat({type:HI,geometry:{type:"MultiPoint",coordinates:l}})),this.value={type:ax,features:o}}}),b_.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},(0,T.XW)(b_,Ke,{transform(i,s){var o=s.fork(s.ALL),l=this.value,c=i.field||T.yR,h=i.as||"path",g=o.SOURCE;!l||i.modified()?(this.value=l=h4(i.projection),o.materialize().reflow()):g=c===T.yR||s.modified(c.fields)?o.ADD_MOD:o.ADD;const y=function(i,s){const o=i.pointRadius();return i.context(null),null!=s&&i.pointRadius(s),o}(l,i.pointRadius);return o.visit(g,v=>v[h]=l(c(v))),l.pointRadius(y),o.modifies(h)}}),NO.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},(0,T.XW)(NO,Ke,{transform(i,s){var v,o=i.projection,l=i.fields[0],c=i.fields[1],h=i.as||["x","y"],g=h[0],y=h[1];function C(E){const x=o([l(E),c(E)]);x?(E[g]=x[0],E[y]=x[1]):(E[g]=void 0,E[y]=void 0)}return i.modified()?s=s.materialize().reflow(!0).visit(s.SOURCE,C):(v=s.modified(l.fields)||s.modified(c.fields),s.visit(v?s.ADD_MOD:s.ADD,C)),s.modifies(h)}}),V1.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},(0,T.XW)(V1,Ke,{transform(i,s){var o=s.fork(s.ALL),l=this.value,c=i.as||"shape",h=o.ADD;return(!l||i.modified())&&(this.value=l=function(i,s,o){const l=null==o?c=>i(s(c)):c=>{var h=i.pointRadius(),g=i.pointRadius(o)(s(c));return i.pointRadius(h),g};return l.context=c=>(i.context(c),l),l}(h4(i.projection),i.field||(0,T.EP)("datum"),i.pointRadius),o.materialize().reflow(),h=o.SOURCE),o.visit(h,g=>g[c]=l),o.modifies(c)}}),PO.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},(0,T.XW)(PO,Ke,{transform(i,s){var c,o=this.value,l=this.generator;if(!o.length||i.modified())for(const h in i)(0,T.mf)(l[h])&&l[h](i[h]);return c=l(),o.length?s.mod.push(jh(o[0],c)):s.add.push(Ti(c)),o[0]=c,s}}),$1.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},(0,T.XW)($1,Ke,{transform(i,s){if(!s.changed()&&!i.modified())return s.StopPropagation;var o=s.materialize(s.SOURCE).source,l="shared"===i.resolve,c=i.field||T.yR,h=function(i,s){let o;return(0,T.mf)(i)?(o=l=>i(l,s),o.dep=iB(i)):i?o=(0,T.a9)(i):(o=l=>l.$value/l.$max||0,o.dep=!0),o}(i.opacity,i),g=function(i,s){let o;return(0,T.mf)(i)?(o=l=>ts(i(l,s)),o.dep=iB(i)):o=(0,T.a9)(ts(i||"#888")),o}(i.color,i),y=i.as||"image",v={$x:0,$y:0,$value:0,$max:l?md(o.map(C=>md(c(C).values))):0};return o.forEach(C=>{const E=c(C),x=(0,T.l7)({},C,v);l||(x.$max=md(E.values||[])),C[y]=function(i,s,o,l){const c=i.width,g=i.x1||0,y=i.y1||0,v=i.x2||c,C=i.y2||i.height,E=i.values,x=E?P=>E[P]:T.bM,S=op(v-g,C-y),k=S.getContext("2d"),R=k.getImageData(0,0,v-g,C-y),N=R.data;for(let P=y,z=0;P<C;++P){s.$y=P-y;for(let H=g,X=P*c;H<v;++H,z+=4){s.$x=H-g,s.$value=x(H+X);const J=o(s);N[z+0]=J.r,N[z+1]=J.g,N[z+2]=J.b,N[z+3]=~~(255*l(s))}}return k.putImageData(R,0,0),S}(E,x,g.dep?g:(0,T.a9)(g(x)),h.dep?h:(0,T.a9)(h(x)))}),s.reflow(!0).modifies(y)}}),(0,T.XW)(GI,Ke,{transform(i,s){let o=this.value;return!o||i.modified("type")?(this.value=o=function(i){const s=LI((i||"mercator").toLowerCase());return s||(0,T.vU)("Unrecognized projection type: "+i),s()}(i.type),OO.forEach(l=>{null!=i[l]&&rB(o,l,i[l])})):OO.forEach(l=>{i.modified(l)&&rB(o,l,i[l])}),null!=i.pointRadius&&o.path.pointRadius(i.pointRadius),i.fit&&function(i,s){const o=function(i){return 1===(i=(0,T.IX)(i)).length?i[0]:{type:ax,features:i.reduce((s,o)=>s.concat(function(i){return i.type===ax?i.features:(0,T.IX)(i).filter(s=>null!=s).map(s=>s.type===HI?s:{type:HI,geometry:s})}(o)),[])}}(s.fit);s.extent?i.fitExtent(s.extent,o):s.size&&i.fitSize(s.size,o)}(o,i),s.fork(s.NO_SOURCE|s.NO_FIELDS)}});var Ua=BO.prototype=VO.prototype;function pa(i){return function(){return i}}function Ym(i){return 1e-6*(i()-.5)}function P4(i){return i.x+i.vx}function aB(i){return i.y+i.vy}Ua.copy=function(){var o,l,i=new VO(this._x,this._y,this._x0,this._y0,this._x1,this._y1),s=this._root;if(!s)return i;if(!s.length)return i._root=XI(s),i;for(o=[{source:s,target:i._root=new Array(4)}];s=o.pop();)for(var c=0;c<4;++c)(l=s.source[c])&&(l.length?o.push({source:l,target:s.target[c]=new Array(4)}):s.target[c]=XI(l));return i},Ua.add=function(i){const s=+this._x.call(null,i),o=+this._y.call(null,i);return sB(this.cover(s,o),s,o,i)},Ua.addAll=function(i){var s,o,c,h,l=i.length,g=new Array(l),y=new Array(l),v=1/0,C=1/0,E=-1/0,x=-1/0;for(o=0;o<l;++o)isNaN(c=+this._x.call(null,s=i[o]))||isNaN(h=+this._y.call(null,s))||(g[o]=c,y[o]=h,c<v&&(v=c),c>E&&(E=c),h<C&&(C=h),h>x&&(x=h));if(v>E||C>x)return this;for(this.cover(v,C).cover(E,x),o=0;o<l;++o)sB(this,g[o],y[o],i[o]);return this},Ua.cover=function(i,s){if(isNaN(i=+i)||isNaN(s=+s))return this;var o=this._x0,l=this._y0,c=this._x1,h=this._y1;if(isNaN(o))c=(o=Math.floor(i))+1,h=(l=Math.floor(s))+1;else{for(var v,C,g=c-o||1,y=this._root;o>i||i>=c||l>s||s>=h;)switch(C=(s<l)<<1|i<o,v=new Array(4),v[C]=y,y=v,g*=2,C){case 0:c=o+g,h=l+g;break;case 1:o=c-g,h=l+g;break;case 2:c=o+g,l=h-g;break;case 3:o=c-g,l=h-g}this._root&&this._root.length&&(this._root=y)}return this._x0=o,this._y0=l,this._x1=c,this._y1=h,this},Ua.data=function(){var i=[];return this.visit(function(s){if(!s.length)do{i.push(s.data)}while(s=s.next)}),i},Ua.extent=function(i){return arguments.length?this.cover(+i[0][0],+i[0][1]).cover(+i[1][0],+i[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ua.find=function(i,s,o){var l,g,y,v,C,R,N,c=this._x0,h=this._y0,E=this._x1,x=this._y1,S=[],k=this._root;for(k&&S.push(new za(k,c,h,E,x)),null==o?o=1/0:(c=i-o,h=s-o,E=i+o,x=s+o,o*=o);R=S.pop();)if(!(!(k=R.node)||(g=R.x0)>E||(y=R.y0)>x||(v=R.x1)<c||(C=R.y1)<h))if(k.length){var P=(g+v)/2,z=(y+C)/2;S.push(new za(k[3],P,z,v,C),new za(k[2],g,z,P,C),new za(k[1],P,y,v,z),new za(k[0],g,y,P,z)),(N=(s>=z)<<1|i>=P)&&(R=S[S.length-1],S[S.length-1]=S[S.length-1-N],S[S.length-1-N]=R)}else{var H=i-+this._x.call(null,k.data),X=s-+this._y.call(null,k.data),J=H*H+X*X;if(J<o){var oe=Math.sqrt(o=J);c=i-oe,h=s-oe,E=i+oe,x=s+oe,l=k.data}}return l},Ua.remove=function(i){if(isNaN(E=+this._x.call(null,i))||isNaN(x=+this._y.call(null,i)))return this;var s,l,c,h,E,x,S,k,R,N,P,z,o=this._root,g=this._x0,y=this._y0,v=this._x1,C=this._y1;if(!o)return this;if(o.length)for(;;){if((R=E>=(S=(g+v)/2))?g=S:v=S,(N=x>=(k=(y+C)/2))?y=k:C=k,s=o,!(o=o[P=N<<1|R]))return this;if(!o.length)break;(s[P+1&3]||s[P+2&3]||s[P+3&3])&&(l=s,z=P)}for(;o.data!==i;)if(c=o,!(o=o.next))return this;return(h=o.next)&&delete o.next,c?(h?c.next=h:delete c.next,this):s?(h?s[P]=h:delete s[P],(o=s[0]||s[1]||s[2]||s[3])&&o===(s[3]||s[2]||s[1]||s[0])&&!o.length&&(l?l[z]=o:this._root=o),this):(this._root=h,this)},Ua.removeAll=function(i){for(var s=0,o=i.length;s<o;++s)this.remove(i[s]);return this},Ua.root=function(){return this._root},Ua.size=function(){var i=0;return this.visit(function(s){if(!s.length)do{++i}while(s=s.next)}),i},Ua.visit=function(i){var o,c,h,g,y,v,s=[],l=this._root;for(l&&s.push(new za(l,this._x0,this._y0,this._x1,this._y1));o=s.pop();)if(!i(l=o.node,h=o.x0,g=o.y0,y=o.x1,v=o.y1)&&l.length){var C=(h+y)/2,E=(g+v)/2;(c=l[3])&&s.push(new za(c,C,E,y,v)),(c=l[2])&&s.push(new za(c,h,E,C,v)),(c=l[1])&&s.push(new za(c,C,g,y,E)),(c=l[0])&&s.push(new za(c,h,g,C,E))}return this},Ua.visitAfter=function(i){var l,s=[],o=[];for(this._root&&s.push(new za(this._root,this._x0,this._y0,this._x1,this._y1));l=s.pop();){var c=l.node;if(c.length){var h,g=l.x0,y=l.y0,v=l.x1,C=l.y1,E=(g+v)/2,x=(y+C)/2;(h=c[0])&&s.push(new za(h,g,y,E,x)),(h=c[1])&&s.push(new za(h,E,y,v,x)),(h=c[2])&&s.push(new za(h,g,x,E,C)),(h=c[3])&&s.push(new za(h,E,x,v,C))}o.push(l)}for(;l=o.pop();)i(l.node,l.x0,l.y0,l.x1,l.y1);return this},Ua.x=function(i){return arguments.length?(this._x=i,this):this._x},Ua.y=function(i){return arguments.length?(this._y=i,this):this._y};var KI={value:()=>{}};function lB(){for(var l,i=0,s=arguments.length,o={};i<s;++i){if(!(l=arguments[i]+"")||l in o||/[\s.]/.test(l))throw new Error("illegal type: "+l);o[l]=[]}return new $O(o)}function $O(i){this._=i}function tG(i,s){return i.trim().split(/^|\s+/).map(function(o){var l="",c=o.indexOf(".");if(c>=0&&(l=o.slice(c+1),o=o.slice(0,c)),o&&!s.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:l}})}function nG(i,s){for(var c,o=0,l=i.length;o<l;++o)if((c=i[o]).name===s)return c.value}function L4(i,s,o){for(var l=0,c=i.length;l<c;++l)if(i[l].name===s){i[l]=KI,i=i.slice(0,l).concat(i.slice(l+1));break}return null!=o&&i.push({name:s,value:o}),i}$O.prototype=lB.prototype={constructor:$O,on:function(i,s){var c,o=this._,l=tG(i+"",o),h=-1,g=l.length;if(!(arguments.length<2)){if(null!=s&&"function"!=typeof s)throw new Error("invalid callback: "+s);for(;++h<g;)if(c=(i=l[h]).type)o[c]=L4(o[c],i.name,s);else if(null==s)for(c in o)o[c]=L4(o[c],i.name,null);return this}for(;++h<g;)if((c=(i=l[h]).type)&&(c=nG(o[c],i.name)))return c},copy:function(){var i={},s=this._;for(var o in s)i[o]=s[o].slice();return new $O(i)},call:function(i,s){if((c=arguments.length-2)>0)for(var c,h,o=new Array(c),l=0;l<c;++l)o[l]=arguments[l+2];if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(l=0,c=(h=this._[i]).length;l<c;++l)h[l].value.apply(s,o)},apply:function(i,s,o){if(!this._.hasOwnProperty(i))throw new Error("unknown type: "+i);for(var l=this._[i],c=0,h=l.length;c<h;++c)l[c].value.apply(s,o)}};const iG=lB;var QI,zO,U1=0,cx=0,jO=0,UO=0,H1=0,JI=0,HO="object"==typeof performance&&performance.now?performance:Date,V4="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function W1(){return H1||(V4(ph),H1=HO.now()+JI)}function ph(){H1=0}function ZI(){this._call=this._time=this._next=null}function uB(i,s,o){var l=new ZI;return l.restart(i,s,o),l}function An(){H1=(UO=HO.now())+JI,U1=cx=0;try{!function(){W1(),++U1;for(var s,i=QI;i;)(s=H1-i._time)>=0&&i._call.call(null,s),i=i._next;--U1}()}finally{U1=0,function(){for(var i,o,s=QI,l=1/0;s;)s._call?(l>s._time&&(l=s._time),i=s,s=s._next):(o=s._next,s._next=null,s=i?i._next=o:QI=o);zO=i,eR(l)}(),H1=0}}function w_(){var i=HO.now(),s=i-UO;s>1e3&&(JI-=s,UO=i)}function eR(i){U1||(cx&&(cx=clearTimeout(cx)),i-H1>24?(i<1/0&&(cx=setTimeout(An,i-HO.now()-JI)),jO&&(jO=clearInterval(jO))):(jO||(UO=HO.now(),jO=setInterval(w_,1e3)),U1=1,V4(An)))}ZI.prototype=uB.prototype={constructor:ZI,restart:function(i,s,o){if("function"!=typeof i)throw new TypeError("callback is not a function");o=(null==o?W1():+o)+(null==s?0:+s),!this._next&&zO!==this&&(zO?zO._next=this:QI=this,zO=this),this._call=i,this._time=o,eR()},stop:function(){this._call&&(this._call=null,this._time=1/0,eR())}};const fB=4294967296;function hB(i){return i.x}function Xp(i){return i.y}var z4=Math.PI*(3-Math.sqrt(5));function U4(i){return i.index}function Jd(i,s){var o=i.get(s);if(!o)throw new Error("node not found: "+s);return o}const iR={center:function(i,s){var o,l=1;function c(){var h,y,g=o.length,v=0,C=0;for(h=0;h<g;++h)v+=(y=o[h]).x,C+=y.y;for(v=(v/g-i)*l,C=(C/g-s)*l,h=0;h<g;++h)(y=o[h]).x-=v,y.y-=C}return null==i&&(i=0),null==s&&(s=0),c.initialize=function(h){o=h},c.x=function(h){return arguments.length?(i=+h,c):i},c.y=function(h){return arguments.length?(s=+h,c):s},c.strength=function(h){return arguments.length?(l=+h,c):l},c},collide:function(i){var s,o,l,c=1,h=1;function g(){for(var C,x,S,k,R,N,P,E=s.length,z=0;z<h;++z)for(x=BO(s,P4,aB).visitAfter(y),C=0;C<E;++C)P=(N=o[(S=s[C]).index])*N,k=S.x+S.vx,R=S.y+S.vy,x.visit(H);function H(X,J,oe,fe,te){var Re=X.data,ze=X.r,Fe=N+ze;if(!Re)return J>k+Fe||fe<k-Fe||oe>R+Fe||te<R-Fe;if(Re.index>S.index){var Oe=k-Re.x-Re.vx,tt=R-Re.y-Re.vy,et=Oe*Oe+tt*tt;et<Fe*Fe&&(0===Oe&&(et+=(Oe=Ym(l))*Oe),0===tt&&(et+=(tt=Ym(l))*tt),et=(Fe-(et=Math.sqrt(et)))/et*c,S.vx+=(Oe*=et)*(Fe=(ze*=ze)/(P+ze)),S.vy+=(tt*=et)*Fe,Re.vx-=Oe*(Fe=1-Fe),Re.vy-=tt*Fe)}}}function y(C){if(C.data)return C.r=o[C.data.index];for(var E=C.r=0;E<4;++E)C[E]&&C[E].r>C.r&&(C.r=C[E].r)}function v(){if(s){var C,x,E=s.length;for(o=new Array(E),C=0;C<E;++C)o[(x=s[C]).index]=+i(x,C,s)}}return"function"!=typeof i&&(i=pa(null==i?1:+i)),g.initialize=function(C,E){s=C,l=E,v()},g.iterations=function(C){return arguments.length?(h=+C,g):h},g.strength=function(C){return arguments.length?(c=+C,g):c},g.radius=function(C){return arguments.length?(i="function"==typeof C?C:pa(+C),v(),g):i},g},nbody:function(){var i,s,o,l,h,c=pa(-30),g=1,y=1/0,v=.81;function C(k){var R,N=i.length,P=BO(i,hB,Xp).visitAfter(x);for(l=k,R=0;R<N;++R)s=i[R],P.visit(S)}function E(){if(i){var k,N,R=i.length;for(h=new Array(R),k=0;k<R;++k)h[(N=i[k]).index]=+c(N,k,i)}}function x(k){var N,P,H,X,J,R=0,z=0;if(k.length){for(H=X=J=0;J<4;++J)(N=k[J])&&(P=Math.abs(N.value))&&(R+=N.value,z+=P,H+=P*N.x,X+=P*N.y);k.x=H/z,k.y=X/z}else{(N=k).x=N.data.x,N.y=N.data.y;do{R+=h[N.data.index]}while(N=N.next)}k.value=R}function S(k,R,N,P){if(!k.value)return!0;var z=k.x-s.x,H=k.y-s.y,X=P-R,J=z*z+H*H;if(X*X/v<J)return J<y&&(0===z&&(J+=(z=Ym(o))*z),0===H&&(J+=(H=Ym(o))*H),J<g&&(J=Math.sqrt(g*J)),s.vx+=z*k.value*l/J,s.vy+=H*k.value*l/J),!0;if(!(k.length||J>=y)){(k.data!==s||k.next)&&(0===z&&(J+=(z=Ym(o))*z),0===H&&(J+=(H=Ym(o))*H),J<g&&(J=Math.sqrt(g*J)));do{k.data!==s&&(s.vx+=z*(X=h[k.data.index]*l/J),s.vy+=H*X)}while(k=k.next)}}return C.initialize=function(k,R){i=k,o=R,E()},C.strength=function(k){return arguments.length?(c="function"==typeof k?k:pa(+k),E(),C):c},C.distanceMin=function(k){return arguments.length?(g=k*k,C):Math.sqrt(g)},C.distanceMax=function(k){return arguments.length?(y=k*k,C):Math.sqrt(y)},C.theta=function(k){return arguments.length?(v=k*k,C):Math.sqrt(v)},C},link:function(i){var l,h,g,y,v,C,s=U4,o=function(P){return 1/Math.min(y[P.source.index],y[P.target.index])},c=pa(30),E=1;function S(P){for(var z=0,H=i.length;z<E;++z)for(var J,oe,fe,te,Re,ze,Fe,X=0;X<H;++X)te=(fe=(J=i[X]).target).x+fe.vx-(oe=J.source).x-oe.vx||Ym(C),Re=fe.y+fe.vy-oe.y-oe.vy||Ym(C),Re*=ze=((ze=Math.sqrt(te*te+Re*Re))-h[X])/ze*P*l[X],fe.vx-=(te*=ze)*(Fe=v[X]),fe.vy-=Re*Fe,oe.vx+=te*(Fe=1-Fe),oe.vy+=Re*Fe}function k(){if(g){var P,J,z=g.length,H=i.length,X=new Map(g.map((oe,fe)=>[s(oe,fe,g),oe]));for(P=0,y=new Array(z);P<H;++P)(J=i[P]).index=P,"object"!=typeof J.source&&(J.source=Jd(X,J.source)),"object"!=typeof J.target&&(J.target=Jd(X,J.target)),y[J.source.index]=(y[J.source.index]||0)+1,y[J.target.index]=(y[J.target.index]||0)+1;for(P=0,v=new Array(H);P<H;++P)v[P]=y[(J=i[P]).source.index]/(y[J.source.index]+y[J.target.index]);l=new Array(H),R(),h=new Array(H),N()}}function R(){if(g)for(var P=0,z=i.length;P<z;++P)l[P]=+o(i[P],P,i)}function N(){if(g)for(var P=0,z=i.length;P<z;++P)h[P]=+c(i[P],P,i)}return null==i&&(i=[]),S.initialize=function(P,z){g=P,C=z,k()},S.links=function(P){return arguments.length?(i=P,k(),S):i},S.id=function(P){return arguments.length?(s=P,S):s},S.iterations=function(P){return arguments.length?(E=+P,S):E},S.strength=function(P){return arguments.length?(o="function"==typeof P?P:pa(+P),R(),S):o},S.distance=function(P){return arguments.length?(c="function"==typeof P?P:pa(+P),N(),S):c},S},x:function(i){var o,l,c,s=pa(.1);function h(y){for(var E,v=0,C=o.length;v<C;++v)(E=o[v]).vx+=(c[v]-E.x)*l[v]*y}function g(){if(o){var y,v=o.length;for(l=new Array(v),c=new Array(v),y=0;y<v;++y)l[y]=isNaN(c[y]=+i(o[y],y,o))?0:+s(o[y],y,o)}}return"function"!=typeof i&&(i=pa(null==i?0:+i)),h.initialize=function(y){o=y,g()},h.strength=function(y){return arguments.length?(s="function"==typeof y?y:pa(+y),g(),h):s},h.x=function(y){return arguments.length?(i="function"==typeof y?y:pa(+y),g(),h):i},h},y:function(i){var o,l,c,s=pa(.1);function h(y){for(var E,v=0,C=o.length;v<C;++v)(E=o[v]).vy+=(c[v]-E.y)*l[v]*y}function g(){if(o){var y,v=o.length;for(l=new Array(v),c=new Array(v),y=0;y<v;++y)l[y]=isNaN(c[y]=+i(o[y],y,o))?0:+s(o[y],y,o)}}return"function"!=typeof i&&(i=pa(null==i?0:+i)),h.initialize=function(y){o=y,g()},h.strength=function(y){return arguments.length?(s="function"==typeof y?y:pa(+y),g(),h):s},h.y=function(y){return arguments.length?(i="function"==typeof y?y:pa(+y),g(),h):i},h}},Go="forces",Es=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Ws=["static","iterations"],Di=["x","y","vx","vy"];function Gr(i){Ke.call(this,null,i)}function mB(i,s,o,l){var h,g,y,v,c=(0,T.IX)(s.forces);for(h=0,g=Es.length;h<g;++h)(y=Es[h])!==Go&&s.modified(y)&&i[y](s[y]);for(h=0,g=c.length;h<g;++h)v=Go+h,(y=o||s.modified(Go,h)?q4(c[h]):l&&G4(c[h],l)?i.force(v):null)&&i.force(v,y);for(g=i.numForces||0;h<g;++h)i.force(Go+h,null);return i.numForces=c.length,i}function G4(i,s){var o,l;for(o in i)if((0,T.mf)(l=i[o])&&s.modified((0,T.Oj)(l)))return 1;return 0}function q4(i){var s,o;for(o in(0,T.nr)(iR,i.force)||(0,T.vU)("Unrecognized force: "+i.force),s=iR[i.force](),i)(0,T.mf)(s[o])&&Y4(s[o],i[o],i);return s}function Y4(i,s,o){i((0,T.mf)(s)?l=>s(l,o):s)}function X4(i){var s=0,o=i.children,l=o&&o.length;if(l)for(;--l>=0;)s+=o[l].value;else s=1;i.value=s}function sR(i,s){i instanceof Map?(i=[void 0,i],void 0===s&&(s=oR)):void 0===s&&(s=Wc);for(var l,h,g,y,v,o=new G1(i),c=[o];l=c.pop();)if((g=s(l.data))&&(v=(g=Array.from(g)).length))for(l.children=g,y=v-1;y>=0;--y)c.push(h=g[y]=new G1(g[y])),h.parent=l,h.depth=l.depth+1;return o.eachBefore(_B)}function Wc(i){return i.children}function oR(i){return Array.isArray(i)?i[1]:null}function Z4(i){void 0!==i.data.value&&(i.value=i.data.value),i.data=i.data.data}function _B(i){var s=0;do{i.height=s}while((i=i.parent)&&i.height<++s)}function G1(i){this.data=i,this.depth=this.height=0,this.parent=null}function Eo(i,s){var o,l;if(aR(s,i))return[s];for(o=0;o<i.length;++o)if(Hn(s,i[o])&&aR(Xm(i[o],s),i))return[i[o],s];for(o=0;o<i.length-1;++o)for(l=o+1;l<i.length;++l)if(Hn(Xm(i[o],i[l]),s)&&Hn(Xm(i[o],s),i[l])&&Hn(Xm(i[l],s),i[o])&&aR(Gc(i[o],i[l],s),i))return[i[o],i[l],s];throw new Error}function Hn(i,s){var o=i.r-s.r,l=s.x-i.x,c=s.y-i.y;return o<0||o*o<l*l+c*c}function di(i,s){var o=i.r-s.r+1e-9*Math.max(i.r,s.r,1),l=s.x-i.x,c=s.y-i.y;return o>0&&o*o>l*l+c*c}function aR(i,s){for(var o=0;o<s.length;++o)if(!di(i,s[o]))return!1;return!0}function YO(i){switch(i.length){case 1:return function(i){return{x:i.x,y:i.y,r:i.r}}(i[0]);case 2:return Xm(i[0],i[1]);case 3:return Gc(i[0],i[1],i[2])}}function Xm(i,s){var o=i.x,l=i.y,c=i.r,h=s.x,g=s.y,y=s.r,v=h-o,C=g-l,E=y-c,x=Math.sqrt(v*v+C*C);return{x:(o+h+v/x*E)/2,y:(l+g+C/x*E)/2,r:(x+c+y)/2}}function Gc(i,s,o){var l=i.x,c=i.y,h=i.r,g=s.x,y=s.y,v=s.r,C=o.x,E=o.y,x=o.r,S=l-g,k=l-C,R=c-y,N=c-E,P=v-h,z=x-h,H=l*l+c*c-h*h,X=H-g*g-y*y+v*v,J=H-C*C-E*E+x*x,oe=k*R-S*N,fe=(R*J-N*X)/(2*oe)-l,te=(N*P-R*z)/oe,Re=(k*X-S*J)/(2*oe)-c,ze=(S*z-k*P)/oe,Fe=te*te+ze*ze-1,Oe=2*(h+fe*te+Re*ze),tt=fe*fe+Re*Re-h*h,et=-(Fe?(Oe+Math.sqrt(Oe*Oe-4*Fe*tt))/(2*Fe):tt/Oe);return{x:l+fe+te*et,y:c+Re+ze*et,r:et}}function vB(i,s,o){var c,h,y,v,l=i.x-s.x,g=i.y-s.y,C=l*l+g*g;C?(h=s.r+o.r,v=i.r+o.r,(h*=h)>(v*=v)?(c=(C+v-h)/(2*C),y=Math.sqrt(Math.max(0,v/C-c*c)),o.x=i.x-c*l-y*g,o.y=i.y-c*g+y*l):(c=(C+h-v)/(2*C),y=Math.sqrt(Math.max(0,h/C-c*c)),o.x=s.x+c*l-y*g,o.y=s.y+c*g+y*l)):(o.x=s.x+o.r,o.y=s.y)}function Gs(i,s){var o=i.r+s.r-1e-6,l=s.x-i.x,c=s.y-i.y;return o>0&&o*o>l*l+c*c}function bB(i){var s=i._,o=i.next._,l=s.r+o.r,c=(s.x*o.r+o.x*s.r)/l,h=(s.y*o.r+o.y*s.r)/l;return c*c+h*h}function wr(i){this._=i,this.next=null,this.previous=null}function CB(i){if(!(c=(i=function(i){return"object"==typeof i&&"length"in i?i:Array.from(i)}(i)).length))return 0;var s,o,l,c,h,g,y,v,C,E,x;if((s=i[0]).x=0,s.y=0,!(c>1))return s.r;if(s.x=-(o=i[1]).r,o.x=s.r,o.y=0,!(c>2))return s.r+o.r;vB(o,s,l=i[2]),s=new wr(s),o=new wr(o),l=new wr(l),s.next=l.previous=o,o.next=s.previous=l,l.next=o.previous=s;e:for(y=3;y<c;++y){vB(s._,o._,l=i[y]),l=new wr(l),v=o.next,C=s.previous,E=o._.r,x=s._.r;do{if(E<=x){if(Gs(v._,l._)){s.next=o=v,o.previous=s,--y;continue e}E+=v._.r,v=v.next}else{if(Gs(C._,l._)){(s=C).next=o,o.previous=s,--y;continue e}x+=C._.r,C=C.previous}}while(v!==C.next);for(l.previous=s,l.next=o,s.next=o.previous=o=l,h=bB(s);(l=l.next)!==o;)(g=bB(l))<h&&(s=l,h=g);o=s.next}for(s=[o._],l=o;(l=l.next)!==o;)s.push(l._);for(l=function(i){for(var c,h,s=0,o=(i=function(i){for(var o,l,s=i.length;s;)l=Math.random()*s--|0,o=i[s],i[s]=i[l],i[l]=o;return i}(Array.from(i))).length,l=[];s<o;)c=i[s],h&&di(h,c)?++s:(h=YO(l=Eo(l,c)),s=0);return h}(s),y=0;y<c;++y)(s=i[y]).x-=l.x,s.y-=l.y;return l.r}function nj(i){return null==i?null:E_(i)}function E_(i){if("function"!=typeof i)throw new Error;return i}function D_(){return 0}function x_(i){return function(){return i}}function uR(i){return Math.sqrt(i.value)}function KO(i){return function(s){s.children||(s.r=Math.max(0,+i(s)||0))}}function cR(i,s){return function(o){if(l=o.children){var l,c,y,h=l.length,g=i(o)*s||0;if(g)for(c=0;c<h;++c)l[c].r+=g;if(y=CB(l),g)for(c=0;c<h;++c)l[c].r-=g;o.r=y+g}}}function dR(i){return function(s){var o=s.parent;s.r*=i,o&&(s.x=o.x+i*s.x,s.y=o.y+i*s.y)}}function wB(i){i.x0=Math.round(i.x0),i.y0=Math.round(i.y0),i.x1=Math.round(i.x1),i.y1=Math.round(i.y1)}function fx(i,s,o,l,c){for(var g,h=i.children,y=-1,v=h.length,C=i.value&&(l-s)/i.value;++y<v;)(g=h[y]).y0=o,g.y1=c,g.x0=s,g.x1=s+=g.value*C}Gr.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:Di}]},(0,T.XW)(Gr,Ke,{transform(i,s){var o=this.value,l=s.changed(s.ADD_REM),c=i.modified(Es),h=i.iterations||300;if(o?(l&&(s.modifies("index"),o.nodes(s.source)),(c||s.changed(s.MOD))&&mB(o,i,0,s)):(this.value=o=function(i,s){const o=function(i){var s,o=1,l=.001,c=1-Math.pow(l,1/300),h=0,g=.6,y=new Map,v=uB(x),C=iG("tick","end"),E=function(){let i=1;return()=>(i=(1664525*i+1013904223)%fB)/fB}();function x(){S(),C.call("tick",s),o<l&&(v.stop(),C.call("end",s))}function S(N){var P,H,z=i.length;void 0===N&&(N=1);for(var X=0;X<N;++X)for(o+=(h-o)*c,y.forEach(function(J){J(o)}),P=0;P<z;++P)null==(H=i[P]).fx?H.x+=H.vx*=g:(H.x=H.fx,H.vx=0),null==H.fy?H.y+=H.vy*=g:(H.y=H.fy,H.vy=0);return s}function k(){for(var z,N=0,P=i.length;N<P;++N){if((z=i[N]).index=N,null!=z.fx&&(z.x=z.fx),null!=z.fy&&(z.y=z.fy),isNaN(z.x)||isNaN(z.y)){var H=10*Math.sqrt(.5+N),X=N*z4;z.x=H*Math.cos(X),z.y=H*Math.sin(X)}(isNaN(z.vx)||isNaN(z.vy))&&(z.vx=z.vy=0)}}function R(N){return N.initialize&&N.initialize(i,E),N}return null==i&&(i=[]),k(),s={tick:S,restart:function(){return v.restart(x),s},stop:function(){return v.stop(),s},nodes:function(N){return arguments.length?(i=N,k(),y.forEach(R),s):i},alpha:function(N){return arguments.length?(o=+N,s):o},alphaMin:function(N){return arguments.length?(l=+N,s):l},alphaDecay:function(N){return arguments.length?(c=+N,s):+c},alphaTarget:function(N){return arguments.length?(h=+N,s):h},velocityDecay:function(N){return arguments.length?(g=1-N,s):1-g},randomSource:function(N){return arguments.length?(E=N,y.forEach(R),s):E},force:function(N,P){return arguments.length>1?(null==P?y.delete(N):y.set(N,R(P)),s):y.get(N)},find:function(N,P,z){var J,oe,fe,te,Re,H=0,X=i.length;for(null==z?z=1/0:z*=z,H=0;H<X;++H)(fe=(J=N-(te=i[H]).x)*J+(oe=P-te.y)*oe)<z&&(Re=te,z=fe);return Re},on:function(N,P){return arguments.length>1?(C.on(N,P),s):C.on(N)}}}(i),l=o.stop,c=o.restart;let h=!1;return o.stopped=()=>h,o.restart=()=>(h=!1,c()),o.stop=()=>(h=!0,l()),mB(o,s,!0).on("end",()=>h=!0)}(s.source,i),o.on("tick",function(i,s){return()=>i.touch(s).run()}(s.dataflow,this)),i.static||(l=!0,o.tick()),s.modifies("index")),c||l||i.modified(Ws)||s.changed()&&i.restart)if(o.alpha(Math.max(o.alpha(),i.alpha||1)).alphaDecay(1-Math.pow(o.alphaMin(),1/h)),i.static)for(o.stop();--h>=0;)o.tick();else if(o.stopped()&&o.restart(),!l)return s.StopPropagation;return this.finish(i,s)},finish(i,s){const o=s.dataflow;for(let E,y=this._argops,v=0,C=y.length;v<C;++v)if(E=y[v],E.name===Go&&"link"===E.op._argval.force)for(var g,l=E.op._argops,c=0,h=l.length;c<h;++c)if("links"===l[c].name&&(g=l[c].op.source)){o.pulse(g,o.changeset().reflow());break}return s.reflow(i.modified()).modifies(Di)}}),G1.prototype=sR.prototype={constructor:G1,count:function(){return this.eachAfter(X4)},each:function(i,s){let o=-1;for(const l of this)i.call(s,l,++o,this);return this},eachAfter:function(i,s){for(var h,g,y,o=this,l=[o],c=[],v=-1;o=l.pop();)if(c.push(o),h=o.children)for(g=0,y=h.length;g<y;++g)l.push(h[g]);for(;o=c.pop();)i.call(s,o,++v,this);return this},eachBefore:function(i,s){for(var c,h,o=this,l=[o],g=-1;o=l.pop();)if(i.call(s,o,++g,this),c=o.children)for(h=c.length-1;h>=0;--h)l.push(c[h]);return this},find:function(i,s){let o=-1;for(const l of this)if(i.call(s,l,++o,this))return l},sum:function(i){return this.eachAfter(function(s){for(var o=+i(s.data)||0,l=s.children,c=l&&l.length;--c>=0;)o+=l[c].value;s.value=o})},sort:function(i){return this.eachBefore(function(s){s.children&&s.children.sort(i)})},path:function(i){for(var s=this,o=function(i,s){if(i===s)return i;var o=i.ancestors(),l=s.ancestors(),c=null;for(i=o.pop(),s=l.pop();i===s;)c=i,i=o.pop(),s=l.pop();return c}(s,i),l=[s];s!==o;)l.push(s=s.parent);for(var c=l.length;i!==o;)l.splice(c,0,i),i=i.parent;return l},ancestors:function(){for(var i=this,s=[i];i=i.parent;)s.push(i);return s},descendants:function(){return Array.from(this)},leaves:function(){var i=[];return this.eachBefore(function(s){s.children||i.push(s)}),i},links:function(){var i=this,s=[];return i.each(function(o){o!==i&&s.push({source:o.parent,target:o})}),s},copy:function(){return sR(this).eachBefore(Z4)},[Symbol.iterator]:function*(){var s,l,c,h,i=this,o=[i];do{for(s=o.reverse(),o=[];i=s.pop();)if(yield i,l=i.children)for(c=0,h=l.length;c<h;++c)o.push(l[c])}while(o.length)}};var rj={depth:-1},fR={};function sj(i){return i.id}function EB(i){return i.parentId}function hx(){var i=sj,s=EB;function o(l){var g,y,v,C,E,x,S,c=Array.from(l),h=c.length,k=new Map;for(y=0;y<h;++y)E=c[y]=new G1(g=c[y]),null!=(x=i(g,y,l))&&(x+="")&&(S=E.id=x,k.set(S,k.has(S)?fR:E)),null!=(x=s(g,y,l))&&(x+="")&&(E.parent=x);for(y=0;y<h;++y)if(x=(E=c[y]).parent){if(!(C=k.get(x)))throw new Error("missing: "+x);if(C===fR)throw new Error("ambiguous: "+x);C.children?C.children.push(E):C.children=[E],E.parent=C}else{if(v)throw new Error("multiple roots");v=E}if(!v)throw new Error("no root");if(v.parent=rj,v.eachBefore(function(R){R.depth=R.parent.depth+1,--h}).eachBefore(_B),v.parent=null,h>0)throw new Error("cycle");return v}return o.id=function(l){return arguments.length?(i=E_(l),o):i},o.parentId=function(l){return arguments.length?(s=E_(l),o):s},o}function px(i,s){return i.parent===s.parent?1:2}function hR(i){var s=i.children;return s?s[0]:i.t}function pR(i){var s=i.children;return s?s[s.length-1]:i.t}function gR(i,s,o){var l=o/(s.i-i.i);s.c-=l,s.s+=o,i.c+=l,s.z+=o,s.m+=o}function oj(i,s,o){return i.a.parent===s.parent?i.a:o}function q1(i,s){this._=i,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=s}function uj(i,s){return i.parent===s.parent?1:2}function cj(i,s){return i+s.x}function fj(i,s){return Math.max(i,s.y)}function _R(i,s,o,l,c){for(var g,h=i.children,y=-1,v=h.length,C=i.value&&(c-o)/i.value;++y<v;)(g=h[y]).x0=s,g.x1=l,g.y0=o,g.y1=o+=g.value*C}q1.prototype=Object.create(G1.prototype);var JO=(1+Math.sqrt(5))/2;function AB(i,s,o,l,c,h){for(var v,C,k,R,P,z,H,X,J,oe,fe,g=[],y=s.children,E=0,x=0,S=y.length,N=s.value;E<S;){k=c-o,R=h-l;do{P=y[x++].value}while(!P&&x<S);for(z=H=P,fe=P*P*(oe=Math.max(R/k,k/R)/(N*i)),J=Math.max(H/fe,fe/z);x<S;++x){if(P+=C=y[x].value,C<z&&(z=C),C>H&&(H=C),fe=P*P*oe,(X=Math.max(H/fe,fe/z))>J){P-=C;break}J=X}g.push(v={value:P,dice:k<R,children:y.slice(E,x)}),v.dice?fx(v,o,l,c,N?l+=R*P/N:h):_R(v,o,l,N?o+=k*P/N:c,h),N-=P,E=x}return g}const MB=function i(s){function o(l,c,h,g,y){AB(s,l,c,h,g,y)}return o.ratio=function(l){return i((l=+l)>1?l:1)},o}(JO),S_=function i(s){function o(l,c,h,g,y){if((v=l._squarify)&&v.ratio===s)for(var v,C,E,x,k,S=-1,R=v.length,N=l.value;++S<R;){for(E=(C=v[S]).children,x=C.value=0,k=E.length;x<k;++x)C.value+=E[x].value;C.dice?fx(C,c,h,g,N?h+=(y-h)*C.value/N:y):_R(C,c,h,N?c+=(g-c)*C.value/N:g,y),N-=C.value}else l._squarify=v=AB(s,l,c,h,g,y),v.ratio=s}return o.ratio=function(l){return i((l=+l)>1?l:1)},o}(JO);function vR(i,s,o){const l={};return i.each(c=>{const h=c.data;o(h)&&(l[s(h)]=c)}),i.lookup=l,i}function ou(i){Ke.call(this,null,i)}ou.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const pj=i=>i.values;function TB(){const i=[],s={entries:c=>l(o(c,0),0),key:c=>(i.push(c),s)};function o(c,h){if(h>=i.length)return c;const g=c.length,y=i[h++],v={},C={};let x,S,k,E=-1;for(;++E<g;)x=y(S=c[E])+"",(k=v[x])?k.push(S):v[x]=[S];for(x in v)C[x]=o(v[x],h);return C}function l(c,h){if(++h>i.length)return c;const g=[];for(const y in c)g.push({key:y,values:l(c[y],h)});return g}return s}function Zd(i){Ke.call(this,null,i)}(0,T.XW)(ou,Ke,{transform(i,s){s.source||(0,T.vU)("Nest transform requires an upstream data source.");var o=i.generate,l=i.modified(),c=s.clone(),h=this.value;return(!h||l||s.changed())&&(h&&h.each(g=>{g.children&&Vh(g.data)&&c.rem.push(g.data)}),this.value=h=sR({values:(0,T.IX)(i.keys).reduce((g,y)=>(g.key(y),g),TB()).entries(c.source)},pj),o&&h.each(g=>{g.children&&(g=Ti(g.data),c.add.push(g),c.source.push(g))}),vR(h,bn,bn)),c.source.root=h,c}});const A_=(i,s)=>i.parent===s.parent?1:2;(0,T.XW)(Zd,Ke,{transform(i,s){(!s.source||!s.source.root)&&(0,T.vU)(this.constructor.name+" transform requires a backing tree data source.");const o=this.layout(i.method),l=this.fields,c=s.source.root,h=i.as||l;i.field?c.sum(i.field):c.count(),i.sort&&c.sort(zh(i.sort,g=>g.data)),function(i,s,o){for(let l,c=0,h=s.length;c<h;++c)l=s[c],l in o&&i[l](o[l])}(o,this.params,i),o.separation&&o.separation(!1!==i.separation?A_:T.kX);try{this.value=o(c)}catch(g){(0,T.vU)(g)}return c.each(g=>function(i,s,o){const l=i.data,c=s.length-1;for(let h=0;h<c;++h)l[o[h]]=i[s[h]];l[o[c]]=i.children?i.children.length:0}(g,l,h)),s.reflow(i.modified()).modifies(h).modifies("leaf")}});const FB=["x","y","r","depth","children"];function ZO(i){Zd.call(this,i)}ZO.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:FB.length,default:FB}]},(0,T.XW)(ZO,Zd,{layout:function(){var i=null,s=1,o=1,l=D_;function c(h){return h.x=s/2,h.y=o/2,i?h.eachBefore(KO(i)).eachAfter(cR(l,.5)).eachBefore(dR(1)):h.eachBefore(KO(uR)).eachAfter(cR(D_,1)).eachAfter(cR(l,h.r/Math.min(s,o))).eachBefore(dR(Math.min(s,o)/(2*h.r))),h}return c.radius=function(h){return arguments.length?(i=nj(h),c):i},c.size=function(h){return arguments.length?(s=+h[0],o=+h[1],c):[s,o]},c.padding=function(h){return arguments.length?(l="function"==typeof h?h:x_(+h),c):l},c},params:["radius","size","padding"],fields:FB});const bR=["x0","y0","x1","y1","depth","children"];function CR(i){Zd.call(this,i)}function wR(i){Ke.call(this,null,i)}CR.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:bR.length,default:bR}]},(0,T.XW)(CR,Zd,{layout:function(){var i=1,s=1,o=0,l=!1;function c(g){var y=g.height+1;return g.x0=g.y0=o,g.x1=i,g.y1=s/y,g.eachBefore(function(g,y){return function(v){v.children&&fx(v,v.x0,g*(v.depth+1)/y,v.x1,g*(v.depth+2)/y);var C=v.x0,E=v.y0,x=v.x1-o,S=v.y1-o;x<C&&(C=x=(C+x)/2),S<E&&(E=S=(E+S)/2),v.x0=C,v.y0=E,v.x1=x,v.y1=S}}(s,y)),l&&g.eachBefore(wB),g}return c.round=function(g){return arguments.length?(l=!!g,c):l},c.size=function(g){return arguments.length?(i=+g[0],s=+g[1],c):[i,s]},c.padding=function(g){return arguments.length?(o=+g,c):o},c},params:["size","round","padding"],fields:bR}),wR.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},(0,T.XW)(wR,Ke,{transform(i,s){s.source||(0,T.vU)("Stratify transform requires an upstream data source.");let o=this.value;const l=i.modified(),c=s.fork(s.ALL).materialize(s.SOURCE),h=!o||l||s.changed(s.ADD_REM)||s.modified(i.key.fields)||s.modified(i.parentKey.fields);return c.source=c.source.slice(),h&&(o=c.source.length?vR(hx().id(i.key).parentId(i.parentKey)(c.source),i.key,T.yb):vR(hx()([{}]),i.key,i.key)),c.source.root=this.value=o,c}});const gj={tidy:function(){var i=px,s=1,o=1,l=null;function c(C){var E=function(i){for(var o,c,h,g,y,s=new q1(i,0),l=[s];o=l.pop();)if(h=o._.children)for(o.children=new Array(y=h.length),g=y-1;g>=0;--g)l.push(c=o.children[g]=new q1(h[g],g)),c.parent=o;return(s.parent=new q1(null,0)).children=[s],s}(C);if(E.eachAfter(h),E.parent.m=-E.z,E.eachBefore(g),l)C.eachBefore(v);else{var x=C,S=C,k=C;C.eachBefore(function(H){H.x<x.x&&(x=H),H.x>S.x&&(S=H),H.depth>k.depth&&(k=H)});var R=x===S?1:i(x,S)/2,N=R-x.x,P=s/(S.x+R+N),z=o/(k.depth||1);C.eachBefore(function(H){H.x=(H.x+N)*P,H.y=H.depth*z})}return C}function h(C){var E=C.children,x=C.parent.children,S=C.i?x[C.i-1]:null;if(E){!function(i){for(var h,s=0,o=0,l=i.children,c=l.length;--c>=0;)(h=l[c]).z+=s,h.m+=s,s+=h.s+(o+=h.c)}(C);var k=(E[0].z+E[E.length-1].z)/2;S?(C.z=S.z+i(C._,S._),C.m=C.z-k):C.z=k}else S&&(C.z=S.z+i(C._,S._));C.parent.A=function(C,E,x){if(E){for(var J,S=C,k=C,R=E,N=S.parent.children[0],P=S.m,z=k.m,H=R.m,X=N.m;R=pR(R),S=hR(S),R&&S;)N=hR(N),(k=pR(k)).a=C,(J=R.z+H-S.z-P+i(R._,S._))>0&&(gR(oj(R,C,x),C,J),P+=J,z+=J),H+=R.m,P+=S.m,X+=N.m,z+=k.m;R&&!pR(k)&&(k.t=R,k.m+=H-z),S&&!hR(N)&&(N.t=S,N.m+=P-X,x=C)}return x}(C,S,C.parent.A||x[0])}function g(C){C._.x=C.z+C.parent.m,C.m+=C.parent.m}function v(C){C.x*=s,C.y=C.depth*o}return c.separation=function(C){return arguments.length?(i=C,c):i},c.size=function(C){return arguments.length?(l=!1,s=+C[0],o=+C[1],c):l?null:[s,o]},c.nodeSize=function(C){return arguments.length?(l=!0,s=+C[0],o=+C[1],c):l?[s,o]:null},c},cluster:function(){var i=uj,s=1,o=1,l=!1;function c(h){var g,y=0;h.eachAfter(function(S){var k=S.children;k?(S.x=function(i){return i.reduce(cj,0)/i.length}(k),S.y=function(i){return 1+i.reduce(fj,0)}(k)):(S.x=g?y+=i(S,g):0,S.y=0,g=S)});var v=function(i){for(var s;s=i.children;)i=s[0];return i}(h),C=function(i){for(var s;s=i.children;)i=s[s.length-1];return i}(h),E=v.x-i(v,C)/2,x=C.x+i(C,v)/2;return h.eachAfter(l?function(S){S.x=(S.x-h.x)*s,S.y=(h.y-S.y)*o}:function(S){S.x=(S.x-E)/(x-E)*s,S.y=(1-(h.y?S.y/h.y:1))*o})}return c.separation=function(h){return arguments.length?(i=h,c):i},c.size=function(h){return arguments.length?(l=!1,s=+h[0],o=+h[1],c):l?null:[s,o]},c.nodeSize=function(h){return arguments.length?(l=!0,s=+h[0],o=+h[1],c):l?[s,o]:null},c}},Wu=["x","y","depth","children"];function ER(i){Zd.call(this,i)}function DR(i){Ke.call(this,[],i)}ER.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:Wu.length,default:Wu}]},(0,T.XW)(ER,Zd,{layout(i){const s=i||"tidy";if((0,T.nr)(gj,s))return gj[s]();(0,T.vU)("Unrecognized Tree layout method: "+s)},params:["size","nodeSize"],fields:Wu}),DR.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},(0,T.XW)(DR,Ke,{transform(i,s){const o=this.value,l=s.source&&s.source.root,c=s.fork(s.NO_SOURCE),h={};return l||(0,T.vU)("TreeLinks transform requires a tree data source."),s.changed(s.ADD_REM)?(c.rem=o,s.visit(s.SOURCE,g=>h[bn(g)]=1),l.each(g=>{const y=g.data,v=g.parent&&g.parent.data;v&&h[bn(y)]&&h[bn(v)]&&c.add.push(Ti({source:v,target:y}))}),this.value=c.add):s.changed(s.MOD)&&(s.visit(s.MOD,g=>h[bn(g)]=1),o.forEach(g=>{(h[bn(g.source)]||h[bn(g.target)])&&c.mod.push(g)})),c}});const IB={binary:function(i,s,o,l,c){var g,v,h=i.children,y=h.length,C=new Array(y+1);for(C[0]=v=g=0;g<y;++g)C[g+1]=v+=h[g].value;!function E(x,S,k,R,N,P,z){if(x>=S-1){var H=h[x];return H.x0=R,H.y0=N,H.x1=P,void(H.y1=z)}for(var X=C[x],J=k/2+X,oe=x+1,fe=S-1;oe<fe;){var te=oe+fe>>>1;C[te]<J?oe=te+1:fe=te}J-C[oe-1]<C[oe]-J&&x+1<oe&&--oe;var Re=C[oe]-X,ze=k-Re;if(P-R>z-N){var Fe=k?(R*ze+P*Re)/k:P;E(x,oe,Re,R,N,Fe,z),E(oe,S,ze,Fe,N,P,z)}else{var Oe=k?(N*ze+z*Re)/k:z;E(x,oe,Re,R,N,P,Oe),E(oe,S,ze,R,Oe,P,z)}}(0,y,i.value,s,o,l,c)},dice:fx,slice:_R,slicedice:function(i,s,o,l,c){(1&i.depth?_R:fx)(i,s,o,l,c)},squarify:MB,resquarify:S_},xR=["x0","y0","x1","y1","depth","children"];function mx(i){Zd.call(this,i)}function NB(i,s,o,l){const c=i.width,h=i.height,g=o||l,y=op(c,h).getContext("2d");s.forEach(P=>PB(y,P,g));const v=new Uint32Array(y.getImageData(0,0,c,h).data.buffer),C=i.bitmap(),E=g&&i.bitmap();let x,S,k,R,N;for(S=0;S<h;++S)for(x=0;x<c;++x)N=4278190080&v[S*c+x],N&&(k=i(x),R=i(S),l||C.set(k,R),g&&268435456^N&&E.set(k,R));return[C,E]}function PB(i,s,o){if(!s.length)return;const l=s[0].mark.marktype;"group"===l?s.forEach(c=>{c.items.forEach(h=>PB(i,h.items,o))}):bl[l].draw(i,{items:o?s.map(vj):s})}function vj(i){const s=$h(i,{});return s.stroke&&(s.strokeOpacity=1),s.fill&&(s.fillOpacity=.0625,s.stroke="#000",s.strokeOpacity=1,s.strokeWidth=2),s}mx.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:xR.length,default:xR}]},(0,T.XW)(mx,Zd,{layout(){const i=function(){var i=MB,s=!1,o=1,l=1,c=[0],h=D_,g=D_,y=D_,v=D_,C=D_;function E(S){return S.x0=S.y0=0,S.x1=o,S.y1=l,S.eachBefore(x),c=[0],s&&S.eachBefore(wB),S}function x(S){var k=c[S.depth],R=S.x0+k,N=S.y0+k,P=S.x1-k,z=S.y1-k;P<R&&(R=P=(R+P)/2),z<N&&(N=z=(N+z)/2),S.x0=R,S.y0=N,S.x1=P,S.y1=z,S.children&&(k=c[S.depth+1]=h(S)/2,R+=C(S)-k,N+=g(S)-k,(P-=y(S)-k)<R&&(R=P=(R+P)/2),(z-=v(S)-k)<N&&(N=z=(N+z)/2),i(S,R,N,P,z))}return E.round=function(S){return arguments.length?(s=!!S,E):s},E.size=function(S){return arguments.length?(o=+S[0],l=+S[1],E):[o,l]},E.tile=function(S){return arguments.length?(i=E_(S),E):i},E.padding=function(S){return arguments.length?E.paddingInner(S).paddingOuter(S):E.paddingInner()},E.paddingInner=function(S){return arguments.length?(h="function"==typeof S?S:x_(+S),E):h},E.paddingOuter=function(S){return arguments.length?E.paddingTop(S).paddingRight(S).paddingBottom(S).paddingLeft(S):E.paddingTop()},E.paddingTop=function(S){return arguments.length?(g="function"==typeof S?S:x_(+S),E):g},E.paddingRight=function(S){return arguments.length?(y="function"==typeof S?S:x_(+S),E):y},E.paddingBottom=function(S){return arguments.length?(v="function"==typeof S?S:x_(+S),E):v},E.paddingLeft=function(S){return arguments.length?(C="function"==typeof S?S:x_(+S),E):C},E}();return i.ratio=s=>{const o=i.tile();o.ratio&&i.tile(o.ratio(s))},i.method=s=>{(0,T.nr)(IB,s)?i.tile(IB[s]):(0,T.vU)("Unrecognized Treemap layout method: "+s)},i},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:xR});const Km=new Uint32Array(33),qc=new Uint32Array(33);qc[0]=0,Km[0]=~qc[0];for(let i=1;i<=32;++i)qc[i]=qc[i-1]<<1|1,Km[i]=~qc[i];function SR(i,s,o,l,c,h){let g=o/2;return i-g<0||i+g>c||s-(g=l/2)<0||s+g>h}function AR(){return!1}function Ej(i,s,o,l,c,h,g,y){const v=c*h/(2*l),C=i(s-v),E=i(s+v),x=i(o-(h/=2)),S=i(o+h);return g.outOfBounds(C,x,E,S)||g.getRange(C,x,E,S)||y&&y.getRange(C,x,E,S)}function dG(i,s,o,l,c,h,g,y){const v=c*h/(2*l);let C=i(s-v),E=i(s+v),x=i(o-(h/=2)),S=i(o+h);return C=C>0?C:0,x=x>0?x:0,E=E<i.width?E:i.width-1,S=S<i.height?S:i.height-1,g.getRange(C,x,E,S)||y&&y.getRange(C,x,E,S)}function Er(i){return i?[dG,AR]:[Ej,SR]}const Dj=[-1,-1,1,1],xj=[-1,1,-1,1],_x=["right","center","left"],MR=["bottom","middle","top"];function Aj(i,s,o,l,c,h,g,y,v,C,E,x){return!(c.outOfBounds(i,o,s,l)||(x&&h?h.getRange(i,o,s,l)||!function(i,s,o,l,c){return c[0]<=i&&o<=c[2]&&c[3]<=s&&l<=c[5]}(g,v,y,C,E):c.getRange(i,o,s,l)))}const Mj={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},kR={naive:function(i,s,o,l){const c=i.width,h=i.height;return function(g){const y=g.datum.datum.items[l].items,v=y.length,C=g.datum.fontSize,E=Rc.width(g.datum,g.datum.text);let S,k,R,N,P,z,H,x=0;for(let X=0;X<v;++X)S=y[X].x,R=y[X].y,k=void 0===y[X].x2?S:y[X].x2,N=void 0===y[X].y2?R:y[X].y2,P=(S+k)/2,z=(R+N)/2,H=Math.abs(k-S+N-R),H>=x&&(x=H,g.x=P,g.y=z);return P=E/2,z=C/2,S=g.x-P,k=g.x+P,R=g.y-z,N=g.y+z,g.align="center",S<0&&k<=c?g.align="left":0<=S&&c<k&&(g.align="right"),g.baseline="middle",R<0&&N<=h?g.baseline="top":0<=R&&h<N&&(g.baseline="bottom"),!0}},"reduced-search":function(i,s,o,l,c){const h=i.width,g=i.height,[y,v]=Er(c),C=s[0],E=s[1];function x(S,k,R,N,P){const z=i.invert(S),H=i.invert(k);let oe,X=R,J=g;if(!v(z,H,N,P,h,g)&&!y(i,z,H,P,N,X,C,E)&&!y(i,z,H,P,N,P,C,null)){for(;J-X>=1;)oe=(X+J)/2,y(i,z,H,P,N,oe,C,E)?J=oe:X=oe;if(X>R)return[z,H,X,!0]}}return function(S){const k=S.datum.datum.items[l].items,R=k.length,N=S.datum.fontSize,P=Rc.width(S.datum,S.datum.text);let oe,fe,te,Re,ze,Fe,Oe,tt,et,Ot,Xe,Tt,Xt,un,Wn,xi,tr,z=o?N:0,H=!1,X=!1,J=0;for(let Sr=0;Sr<R;++Sr){for(oe=k[Sr].x,te=k[Sr].y,fe=void 0===k[Sr].x2?oe:k[Sr].x2,Re=void 0===k[Sr].y2?te:k[Sr].y2,oe>fe&&(tr=oe,oe=fe,fe=tr),te>Re&&(tr=te,te=Re,Re=tr),et=i(oe),Xe=i(fe),Ot=~~((et+Xe)/2),Tt=i(te),un=i(Re),Xt=~~((Tt+un)/2),Oe=Ot;Oe>=et;--Oe)for(tt=Xt;tt>=Tt;--tt)xi=x(Oe,tt,z,P,N),xi&&([S.x,S.y,z,H]=xi);for(Oe=Ot;Oe<=Xe;++Oe)for(tt=Xt;tt<=un;++tt)xi=x(Oe,tt,z,P,N),xi&&([S.x,S.y,z,H]=xi);!H&&!o&&(Wn=Math.abs(fe-oe+Re-te),ze=(oe+fe)/2,Fe=(te+Re)/2,Wn>=J&&!v(ze,Fe,P,N,h,g)&&!y(i,ze,Fe,N,P,N,C,null)&&(J=Wn,S.x=ze,S.y=Fe,X=!0))}return!(!H&&!X||(ze=P/2,Fe=N/2,C.setRange(i(S.x-ze),i(S.y-Fe),i(S.x+ze),i(S.y+Fe)),S.align="center",S.baseline="middle",0))}},floodfill:function(i,s,o,l,c){const h=i.width,g=i.height,[y,v]=Er(c),C=s[0],E=s[1],x=i.bitmap();return function(S){const k=S.datum.datum.items[l].items,R=k.length,N=S.datum.fontSize,P=Rc.width(S.datum,S.datum.text),z=[];let fe,te,Re,ze,Fe,Oe,tt,et,Ot,Xe,Tt,Xt,H=o?N:0,X=!1,J=!1,oe=0;for(let un=0;un<R;++un){for(fe=k[un].x,Re=k[un].y,te=void 0===k[un].x2?fe:k[un].x2,ze=void 0===k[un].y2?Re:k[un].y2,z.push([i((fe+te)/2),i((Re+ze)/2)]);z.length;)if([tt,et]=z.pop(),!(C.get(tt,et)||E.get(tt,et)||x.get(tt,et))){x.set(tt,et);for(let Wn=0;Wn<4;++Wn)Fe=tt+Dj[Wn],Oe=et+xj[Wn],x.outOfBounds(Fe,Oe,Fe,Oe)||z.push([Fe,Oe]);if(Fe=i.invert(tt),Oe=i.invert(et),Ot=H,Xe=g,!v(Fe,Oe,P,N,h,g)&&!y(i,Fe,Oe,N,P,Ot,C,E)&&!y(i,Fe,Oe,N,P,N,C,null)){for(;Xe-Ot>=1;)Tt=(Ot+Xe)/2,y(i,Fe,Oe,N,P,Tt,C,E)?Xe=Tt:Ot=Tt;Ot>H&&(S.x=Fe,S.y=Oe,H=Ot,X=!0)}}!X&&!o&&(Xt=Math.abs(te-fe+ze-Re),Fe=(fe+te)/2,Oe=(Re+ze)/2,Xt>=oe&&!v(Fe,Oe,P,N,h,g)&&!y(i,Fe,Oe,N,P,N,C,null)&&(oe=Xt,S.x=Fe,S.y=Oe,J=!0))}return!(!X&&!J||(Fe=P/2,Oe=N/2,C.setRange(i(S.x-Fe),i(S.y-Oe),i(S.x+Fe),i(S.y+Oe)),S.align="center",S.baseline="middle",0))}}};function vx(i,s,o,l,c,h,g,y,v,C,E){if(!i.length)return i;const x=Math.max(l.length,c.length),S=function(i,s){const o=new Float64Array(s),l=i.length;for(let c=0;c<l;++c)o[c]=i[c]||0;for(let c=l;c<s;++c)o[c]=o[l-1];return o}(l,x),k=function(i,s){const o=new Int8Array(s),l=i.length;for(let c=0;c<l;++c)o[c]|=Mj[i[c]];for(let c=l;c<s;++c)o[c]=o[l-1];return o}(c,x),R=function(i){return i&&i.mark&&i.mark.marktype}(i[0].datum),N="group"===R&&i[0].datum.items[v].marktype,P="area"===N,z=function(i,s,o,l){const c=h=>[h.x,h.x,h.x,h.y,h.y,h.y];return i?"line"===i||"area"===i?h=>c(h.datum):"line"===s?h=>{const g=h.datum.items[l].items;return c(g.length?g["start"===o?0:g.length-1]:{x:NaN,y:NaN})}:h=>{const g=h.datum.bounds;return[g.x1,(g.x1+g.x2)/2,g.x2,g.y1,(g.y1+g.y2)/2,g.y2]}:c}(R,N,y,v),H=null===C||C===1/0,X=function(i,s,o){const l=Math.max(1,Math.sqrt(i*s/1e6)),c=~~((i+2*o+l)/l),h=~~((s+2*o+l)/l),g=y=>~~((y+o)/l);return g.invert=y=>y*l-o,g.bitmap=()=>function(i,s){const o=new Uint32Array(~~((i*s+32)/32));function l(h,g){o[h]|=g}function c(h,g){o[h]&=g}return{array:o,get:(h,g)=>{const y=g*i+h;return o[y>>>5]&1<<(31&y)},set:(h,g)=>{const y=g*i+h;l(y>>>5,1<<(31&y))},clear:(h,g)=>{const y=g*i+h;c(y>>>5,~(1<<(31&y)))},getRange:(h,g,y,v)=>{let E,x,S,k,C=v;for(;C>=g;--C)if(E=C*i+h,x=C*i+y,S=E>>>5,k=x>>>5,S===k){if(o[S]&Km[31&E]&qc[1+(31&x)])return!0}else{if(o[S]&Km[31&E]||o[k]&qc[1+(31&x)])return!0;for(let R=S+1;R<k;++R)if(o[R])return!0}return!1},setRange:(h,g,y,v)=>{let C,E,x,S,k;for(;g<=v;++g)if(C=g*i+h,E=g*i+y,x=C>>>5,S=E>>>5,x===S)l(x,Km[31&C]&qc[1+(31&E)]);else for(l(x,Km[31&C]),l(S,qc[1+(31&E)]),k=x+1;k<S;++k)l(k,4294967295)},clearRange:(h,g,y,v)=>{let C,E,x,S,k;for(;g<=v;++g)if(C=g*i+h,E=g*i+y,x=C>>>5,S=E>>>5,x===S)c(x,qc[31&C]|Km[1+(31&E)]);else for(c(x,qc[31&C]),c(S,Km[1+(31&E)]),k=x+1;k<S;++k)c(k,0)},outOfBounds:(h,g,y,v)=>h<0||g<0||v>=s||y>=i}}(c,h),g.ratio=l,g.padding=o,g.width=i,g.height=s,g}(s[0],s[1],H?0:C),J=P&&"naive"===E,oe=i.map(Re=>({datum:Re,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:z(Re)}));let fe;if(!J){o&&oe.sort((ze,Fe)=>o(ze.datum,Fe.datum));let Re=!1;for(let ze=0;ze<k.length&&!Re;++ze)Re=5===k[ze]||S[ze]<0;R&&(g||P)&&(h=[i.map(ze=>ze.datum)].concat(h)),fe=h.length?NB(X,h,Re,P):function(i,s){const o=i.bitmap();return(s||[]).forEach(l=>o.set(i(l.boundary[0]),i(l.boundary[3]))),[o,void 0]}(X,g&&oe)}const te=P?kR[E](X,fe,g,v,H):function(i,s,o,l,c){const h=i.width,g=i.height,y=s[0],v=s[1],C=l.length;return function(E){const x=E.boundary,S=E.datum.fontSize;if(!c&&(x[2]<0||x[5]<0||x[0]>h||x[3]>g))return!1;let R,N,P,z,H,X,J,oe,fe,te,Re,ze,Fe,Oe,tt,k=0;for(let et=0;et<C;++et){if(R=(3&o[et])-1,N=(o[et]>>>2&3)-1,P=0===R&&0===N||l[et]<0,z=R&&N?Math.SQRT1_2:1,H=l[et]<0?-1:1,X=x[1+R]+l[et]*R*z,Re=x[4+N]+H*S*N/2+l[et]*N*z,oe=Re-S/2,fe=Re+S/2,ze=i(X),Oe=i(oe),tt=i(fe),c&&(ze=ze<0?0:ze,Oe=Oe<0?0:Oe,tt=tt>=i.height?i.height-1:tt),!k){if(!Aj(ze,ze,Oe,tt,y,v,X,X,oe,fe,x,P))continue;k=Rc.width(E.datum,E.datum.text)}if(te=X+H*k*R/2,X=te-k/2,J=te+k/2,ze=i(X),Fe=i(J),c&&(ze=ze<0?0:ze,Fe=Fe>=i.width?i.width-1:Fe),Aj(ze,Fe,Oe,tt,y,v,X,J,oe,fe,x,P))return E.x=R?R*H<0?J:X:te,E.y=N?N*H<0?fe:oe:Re,E.align=_x[R*H+1],E.baseline=MR[N*H+1],y.setRange(ze,Oe,Fe,tt),!0}return!1}}(X,fe,k,S,H);return oe.forEach(Re=>Re.opacity=+te(Re)),oe}const FR=["x","y","opacity","align","baseline"],$B=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function bx(i){Ke.call(this,null,i)}function jB(i,s){var c,h,g,y,v,C,o=[],l=function(E){return E(y)};if(null==s)o.push(i);else for(c={},h=0,g=i.length;h<g;++h)y=i[h],(C=c[v=s.map(l)])||(c[v]=C=[],C.dims=v,o.push(C)),C.push(y);return o}function IR(i){Ke.call(this,null,i)}bx.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:$B},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:FR.length,default:FR}]},(0,T.XW)(bx,Ke,{transform(i,s){const l=i.modified();if(!(l||s.changed(s.ADD_REM)||function(h){const g=i.sort;return(0,T.mf)(g)&&s.modified(g.fields)}()))return;(!i.size||2!==i.size.length)&&(0,T.vU)("Size parameter should be specified as a [width, height] array.");const c=i.as||FR;return vx(s.materialize(s.SOURCE).source||[],i.size,i.sort,(0,T.IX)(null==i.offset?1:i.offset),(0,T.IX)(i.anchor||$B),i.avoidMarks||[],!1!==i.avoidBaseMark,i.lineAnchor||"end",i.markIndex||0,void 0===i.padding?0:i.padding,i.method||"naive").forEach(h=>{const g=h.datum;g[c[0]]=h.x,g[c[1]]=h.y,g[c[2]]=h.opacity,g[c[3]]=h.align,g[c[4]]=h.baseline}),s.reflow(l).modifies(c)}}),IR.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},(0,T.XW)(IR,Ke,{transform(i,s){const o=s.fork(s.NO_SOURCE|s.NO_FIELDS);if(!this.value||s.changed()||i.modified()){const c=jB(s.materialize(s.SOURCE).source,i.groupby),h=(i.groupby||[]).map(T.el),g=h.length,y=i.as||[(0,T.el)(i.x),(0,T.el)(i.y)],v=[];c.forEach(C=>{eA(C,i.x,i.y,i.bandwidth||.3).forEach(E=>{const x={};for(let S=0;S<g;++S)x[h[S]]=C.dims[S];x[y[0]]=E[0],x[y[1]]=E[1],v.push(Ti(x))})}),this.value&&(o.rem=this.value),this.value=o.add=o.source=v}return o}});const RR={linear:hc,log:Du,exp:Lv,pow:si,quad:Sa,poly:Pr};function zB(i){Ke.call(this,null,i)}zB.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(RR)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},(0,T.XW)(zB,Ke,{transform(i,s){const o=s.fork(s.NO_SOURCE|s.NO_FIELDS);if(!this.value||s.changed()||i.modified()){const c=jB(s.materialize(s.SOURCE).source,i.groupby),h=(i.groupby||[]).map(T.el),g=i.method||"linear",y=i.order||3,v=((i,s)=>"poly"===i?s:"quad"===i?2:1)(g,y),C=i.as||[(0,T.el)(i.x),(0,T.el)(i.y)],E=RR[g],x=[];let S=i.extent;(0,T.nr)(RR,g)||(0,T.vU)("Invalid regression method: "+g),null!=S&&"log"===g&&S[0]<=0&&(s.dataflow.warn("Ignoring extent with values <= 0 for log regression."),S=null),c.forEach(k=>{if(k.length<=v)return void s.dataflow.warn("Skipping regression with more parameters than data points.");const N=E(k,i.x,i.y,y);if(i.params)return void x.push(Ti({keys:k.dims,coef:N.coef,rSquared:N.rSquared}));const P=S||(0,T.We)(k,i.x),z=H=>{const X={};for(let J=0;J<h.length;++J)X[h[J]]=k.dims[J];X[C[0]]=H[0],X[C[1]]=H[1],x.push(Ti(X))};"linear"===g?P.forEach(H=>z([H,N.predict(H)])):Vv(N.predict,P,25,200).forEach(z)}),this.value&&(o.rem=this.value),this.value=o.add=o.source=x}return o}});const Cx=Math.pow(2,-52),NR=new Uint32Array(512);class rT{static from(s,o=aT,l=LR){const c=s.length,h=new Float64Array(2*c);for(let g=0;g<c;g++){const y=s[g];h[2*g]=o(y),h[2*g+1]=l(y)}return new rT(h)}constructor(s){const o=s.length>>1;if(o>0&&"number"!=typeof s[0])throw new Error("Expected coords to contain numbers.");this.coords=s;const l=Math.max(2*o-5,0);this._triangles=new Uint32Array(3*l),this._halfedges=new Int32Array(3*l),this._hashSize=Math.ceil(Math.sqrt(o)),this._hullPrev=new Uint32Array(o),this._hullNext=new Uint32Array(o),this._hullTri=new Uint32Array(o),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(o),this._dists=new Float64Array(o),this.update()}update(){const{coords:s,_hullPrev:o,_hullNext:l,_hullTri:c,_hullHash:h}=this,g=s.length>>1;let y=1/0,v=1/0,C=-1/0,E=-1/0;for(let Fe=0;Fe<g;Fe++){const Oe=s[2*Fe],tt=s[2*Fe+1];Oe<y&&(y=Oe),tt<v&&(v=tt),Oe>C&&(C=Oe),tt>E&&(E=tt),this._ids[Fe]=Fe}const x=(y+C)/2,S=(v+E)/2;let R,N,P,k=1/0;for(let Fe=0;Fe<g;Fe++){const Oe=PR(x,S,s[2*Fe],s[2*Fe+1]);Oe<k&&(R=Fe,k=Oe)}const z=s[2*R],H=s[2*R+1];k=1/0;for(let Fe=0;Fe<g;Fe++){if(Fe===R)continue;const Oe=PR(z,H,s[2*Fe],s[2*Fe+1]);Oe<k&&Oe>0&&(N=Fe,k=Oe)}let X=s[2*N],J=s[2*N+1],oe=1/0;for(let Fe=0;Fe<g;Fe++){if(Fe===R||Fe===N)continue;const Oe=Ij(z,H,X,J,s[2*Fe],s[2*Fe+1]);Oe<oe&&(P=Fe,oe=Oe)}let fe=s[2*P],te=s[2*P+1];if(oe===1/0){for(let tt=0;tt<g;tt++)this._dists[tt]=s[2*tt]-s[0]||s[2*tt+1]-s[1];Y1(this._ids,this._dists,0,g-1);const Fe=new Uint32Array(g);let Oe=0;for(let tt=0,et=-1/0;tt<g;tt++){const Ot=this._ids[tt];this._dists[Ot]>et&&(Fe[Oe++]=Ot,et=this._dists[Ot])}return this.hull=Fe.subarray(0,Oe),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(oT(z,H,X,J,fe,te)){const Fe=N,Oe=X,tt=J;N=P,X=fe,J=te,P=Fe,fe=Oe,te=tt}const Re=function(i,s,o,l,c,h){const g=o-i,y=l-s,v=c-i,C=h-s,E=g*g+y*y,x=v*v+C*C,S=.5/(g*C-y*v);return{x:i+(C*E-y*x)*S,y:s+(g*x-v*E)*S}}(z,H,X,J,fe,te);this._cx=Re.x,this._cy=Re.y;for(let Fe=0;Fe<g;Fe++)this._dists[Fe]=PR(s[2*Fe],s[2*Fe+1],Re.x,Re.y);Y1(this._ids,this._dists,0,g-1),this._hullStart=R;let ze=3;l[R]=o[P]=N,l[N]=o[R]=P,l[P]=o[N]=R,c[R]=0,c[N]=1,c[P]=2,h.fill(-1),h[this._hashKey(z,H)]=R,h[this._hashKey(X,J)]=N,h[this._hashKey(fe,te)]=P,this.trianglesLen=0,this._addTriangle(R,N,P,-1,-1,-1);for(let Oe,tt,Fe=0;Fe<this._ids.length;Fe++){const et=this._ids[Fe],Ot=s[2*et],Xe=s[2*et+1];if(Fe>0&&Math.abs(Ot-Oe)<=Cx&&Math.abs(Xe-tt)<=Cx||(Oe=Ot,tt=Xe,et===R||et===N||et===P))continue;let Tt=0;for(let tr=0,Sr=this._hashKey(Ot,Xe);tr<this._hashSize&&(Tt=h[(Sr+tr)%this._hashSize],-1===Tt||Tt===l[Tt]);tr++);Tt=o[Tt];let un,Xt=Tt;for(;un=l[Xt],!oT(Ot,Xe,s[2*Xt],s[2*Xt+1],s[2*un],s[2*un+1]);)if(Xt=un,Xt===Tt){Xt=-1;break}if(-1===Xt)continue;let Wn=this._addTriangle(Xt,et,l[Xt],-1,-1,c[Xt]);c[et]=this._legalize(Wn+2),c[Xt]=Wn,ze++;let xi=l[Xt];for(;un=l[xi],oT(Ot,Xe,s[2*xi],s[2*xi+1],s[2*un],s[2*un+1]);)Wn=this._addTriangle(xi,et,un,c[et],-1,c[xi]),c[et]=this._legalize(Wn+2),l[xi]=xi,ze--,xi=un;if(Xt===Tt)for(;un=o[Xt],oT(Ot,Xe,s[2*un],s[2*un+1],s[2*Xt],s[2*Xt+1]);)Wn=this._addTriangle(un,et,Xt,-1,c[Xt],c[un]),this._legalize(Wn+2),c[un]=Wn,l[Xt]=Xt,ze--,Xt=un;this._hullStart=o[et]=Xt,l[Xt]=o[xi]=et,l[et]=xi,h[this._hashKey(Ot,Xe)]=et,h[this._hashKey(s[2*Xt],s[2*Xt+1])]=Xt}this.hull=new Uint32Array(ze);for(let Fe=0,Oe=this._hullStart;Fe<ze;Fe++)this.hull[Fe]=Oe,Oe=l[Oe];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(s,o){return Math.floor(function(i,s){const o=i/(Math.abs(i)+Math.abs(s));return(s>0?3-o:1+o)/4}(s-this._cx,o-this._cy)*this._hashSize)%this._hashSize}_legalize(s){const{_triangles:o,_halfedges:l,coords:c}=this;let h=0,g=0;for(;;){const y=l[s],v=s-s%3;if(g=v+(s+2)%3,-1===y){if(0===h)break;s=NR[--h];continue}const C=y-y%3,x=C+(y+2)%3,S=o[g],k=o[s],R=o[v+(s+1)%3],N=o[x];if(Fj(c[2*S],c[2*S+1],c[2*k],c[2*k+1],c[2*R],c[2*R+1],c[2*N],c[2*N+1])){o[s]=N,o[y]=S;const z=l[x];if(-1===z){let X=this._hullStart;do{if(this._hullTri[X]===x){this._hullTri[X]=s;break}X=this._hullPrev[X]}while(X!==this._hullStart)}this._link(s,z),this._link(y,l[g]),this._link(g,x);const H=C+(y+1)%3;h<NR.length&&(NR[h++]=H)}else{if(0===h)break;s=NR[--h]}}return g}_link(s,o){this._halfedges[s]=o,-1!==o&&(this._halfedges[o]=s)}_addTriangle(s,o,l,c,h,g){const y=this.trianglesLen;return this._triangles[y]=s,this._triangles[y+1]=o,this._triangles[y+2]=l,this._link(y,c),this._link(y+1,h),this._link(y+2,g),this.trianglesLen+=3,y}}function PR(i,s,o,l){const c=i-o,h=s-l;return c*c+h*h}function sT(i,s,o,l,c,h){const g=(l-s)*(c-i),y=(o-i)*(h-s);return Math.abs(g-y)>=33306690738754716e-32*Math.abs(g+y)?g-y:0}function oT(i,s,o,l,c,h){return(sT(c,h,i,s,o,l)||sT(i,s,o,l,c,h)||sT(o,l,c,h,i,s))<0}function Fj(i,s,o,l,c,h,g,y){const v=i-g,C=s-y,E=o-g,x=l-y,S=c-g,k=h-y,N=E*E+x*x,P=S*S+k*k;return v*(x*P-N*k)-C*(E*P-N*S)+(v*v+C*C)*(E*k-x*S)<0}function Ij(i,s,o,l,c,h){const g=o-i,y=l-s,v=c-i,C=h-s,E=g*g+y*y,x=v*v+C*C,S=.5/(g*C-y*v),k=(C*E-y*x)*S,R=(g*x-v*E)*S;return k*k+R*R}function Y1(i,s,o,l){if(l-o<=20)for(let c=o+1;c<=l;c++){const h=i[c],g=s[h];let y=c-1;for(;y>=o&&s[i[y]]>g;)i[y+1]=i[y--];i[y+1]=h}else{let h=o+1,g=l;Jp(i,o+l>>1,h),s[i[o]]>s[i[l]]&&Jp(i,o,l),s[i[h]]>s[i[l]]&&Jp(i,h,l),s[i[o]]>s[i[h]]&&Jp(i,o,h);const y=i[h],v=s[y];for(;;){do{h++}while(s[i[h]]<v);do{g--}while(s[i[g]]>v);if(g<h)break;Jp(i,h,g)}i[o+1]=i[g],i[g]=y,l-h+1>=g-o?(Y1(i,s,h,l),Y1(i,s,o,g-1)):(Y1(i,s,o,g-1),Y1(i,s,h,l))}}function Jp(i,s,o){const l=i[s];i[s]=i[o],i[o]=l}function aT(i){return i[0]}function LR(i){return i[1]}class ef{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(s,o){this._+=`M${this._x0=this._x1=+s},${this._y0=this._y1=+o}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(s,o){this._+=`L${this._x1=+s},${this._y1=+o}`}arc(s,o,l){const c=(s=+s)+(l=+l),h=o=+o;if(l<0)throw new Error("negative radius");null===this._x1?this._+=`M${c},${h}`:(Math.abs(this._x1-c)>1e-6||Math.abs(this._y1-h)>1e-6)&&(this._+="L"+c+","+h),l&&(this._+=`A${l},${l},0,1,1,${s-l},${o}A${l},${l},0,1,1,${this._x1=c},${this._y1=h}`)}rect(s,o,l,c){this._+=`M${this._x0=this._x1=+s},${this._y0=this._y1=+o}h${+l}v${+c}h${-l}Z`}value(){return this._||null}}class lT{constructor(){this._=[]}moveTo(s,o){this._.push([s,o])}closePath(){this._.push(this._[0].slice())}lineTo(s,o){this._.push([s,o])}value(){return this._.length?this._:null}}class VR{constructor(s,[o,l,c,h]=[0,0,960,500]){if(!((c=+c)>=(o=+o)&&(h=+h)>=(l=+l)))throw new Error("invalid bounds");this.delaunay=s,this._circumcenters=new Float64Array(2*s.points.length),this.vectors=new Float64Array(2*s.points.length),this.xmax=c,this.xmin=o,this.ymax=h,this.ymin=l,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:s,hull:o,triangles:l},vectors:c}=this,h=this.circumcenters=this._circumcenters.subarray(0,l.length/3*2);for(let P,z,k=0,R=0,N=l.length;k<N;k+=3,R+=2){const H=2*l[k],X=2*l[k+1],J=2*l[k+2],oe=s[H],fe=s[H+1],ze=s[J],Fe=s[J+1],Oe=s[X]-oe,tt=s[X+1]-fe,et=ze-oe,Ot=Fe-fe,Xe=Oe*Oe+tt*tt,Tt=et*et+Ot*Ot,Xt=2*(Oe*Ot-tt*et);if(Xt)if(Math.abs(Xt)<1e-8)P=(oe+ze)/2,z=(fe+Fe)/2;else{const un=1/Xt;P=oe+(Ot*Xe-tt*Tt)*un,z=fe+(Oe*Tt-et*Xe)*un}else P=(oe+ze)/2-1e8*Ot,z=(fe+Fe)/2+1e8*et;h[R]=P,h[R+1]=z}let y,C,x,g=o[o.length-1],v=4*g,E=s[2*g],S=s[2*g+1];c.fill(0);for(let k=0;k<o.length;++k)g=o[k],y=v,C=E,x=S,v=4*g,E=s[2*g],S=s[2*g+1],c[y+2]=c[v]=x-S,c[y+3]=c[v+1]=E-C}render(s){const o=null==s?s=new ef:void 0,{delaunay:{halfedges:l,inedges:c,hull:h},circumcenters:g,vectors:y}=this;if(h.length<=1)return null;for(let E=0,x=l.length;E<x;++E){const S=l[E];if(S<E)continue;const k=2*Math.floor(E/3),R=2*Math.floor(S/3);this._renderSegment(g[k],g[k+1],g[R],g[R+1],s)}let v,C=h[h.length-1];for(let E=0;E<h.length;++E){v=C,C=h[E];const x=2*Math.floor(c[C]/3),S=g[x],k=g[x+1],R=4*v,N=this._project(S,k,y[R+2],y[R+3]);N&&this._renderSegment(S,k,N[0],N[1],s)}return o&&o.value()}renderBounds(s){const o=null==s?s=new ef:void 0;return s.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),o&&o.value()}renderCell(s,o){const l=null==o?o=new ef:void 0,c=this._clip(s);if(null===c||!c.length)return;o.moveTo(c[0],c[1]);let h=c.length;for(;c[0]===c[h-2]&&c[1]===c[h-1]&&h>1;)h-=2;for(let g=2;g<h;g+=2)(c[g]!==c[g-2]||c[g+1]!==c[g-1])&&o.lineTo(c[g],c[g+1]);return o.closePath(),l&&l.value()}*cellPolygons(){const{delaunay:{points:s}}=this;for(let o=0,l=s.length/2;o<l;++o){const c=this.cellPolygon(o);c&&(c.index=o,yield c)}}cellPolygon(s){const o=new lT;return this.renderCell(s,o),o.value()}_renderSegment(s,o,l,c,h){let g;const y=this._regioncode(s,o),v=this._regioncode(l,c);0===y&&0===v?(h.moveTo(s,o),h.lineTo(l,c)):(g=this._clipSegment(s,o,l,c,y,v))&&(h.moveTo(g[0],g[1]),h.lineTo(g[2],g[3]))}contains(s,o,l){return(o=+o)==o&&(l=+l)==l&&this.delaunay._step(s,o,l)===s}*neighbors(s){const o=this._clip(s);if(o)for(const l of this.delaunay.neighbors(s)){const c=this._clip(l);if(c)e:for(let h=0,g=o.length;h<g;h+=2)for(let y=0,v=c.length;y<v;y+=2)if(o[h]==c[y]&&o[h+1]==c[y+1]&&o[(h+2)%g]==c[(y+v-2)%v]&&o[(h+3)%g]==c[(y+v-1)%v]){yield l;break e}}}_cell(s){const{circumcenters:o,delaunay:{inedges:l,halfedges:c,triangles:h}}=this,g=l[s];if(-1===g)return null;const y=[];let v=g;do{const C=Math.floor(v/3);if(y.push(o[2*C],o[2*C+1]),v=v%3==2?v-2:v+1,h[v]!==s)break;v=c[v]}while(v!==g&&-1!==v);return y}_clip(s){if(0===s&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const o=this._cell(s);if(null===o)return null;const{vectors:l}=this,c=4*s;return l[c]||l[c+1]?this._clipInfinite(s,o,l[c],l[c+1],l[c+2],l[c+3]):this._clipFinite(s,o)}_clipFinite(s,o){const l=o.length;let h,g,C,x,S,c=null,y=o[l-2],v=o[l-1],E=this._regioncode(y,v);for(let k=0;k<l;k+=2)if(h=y,g=v,y=o[k],v=o[k+1],C=E,E=this._regioncode(y,v),0===C&&0===E)x=S,S=0,c?c.push(y,v):c=[y,v];else{let R,N,P,z,H;if(0===C){if(null===(R=this._clipSegment(h,g,y,v,C,E)))continue;[N,P,z,H]=R}else{if(null===(R=this._clipSegment(y,v,h,g,E,C)))continue;[z,H,N,P]=R,x=S,S=this._edgecode(N,P),x&&S&&this._edge(s,x,S,c,c.length),c?c.push(N,P):c=[N,P]}x=S,S=this._edgecode(z,H),x&&S&&this._edge(s,x,S,c,c.length),c?c.push(z,H):c=[z,H]}if(c)x=S,S=this._edgecode(c[0],c[1]),x&&S&&this._edge(s,x,S,c,c.length);else if(this.contains(s,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return c}_clipSegment(s,o,l,c,h,g){for(;;){if(0===h&&0===g)return[s,o,l,c];if(h&g)return null;let y,v,C=h||g;8&C?(y=s+(l-s)*(this.ymax-o)/(c-o),v=this.ymax):4&C?(y=s+(l-s)*(this.ymin-o)/(c-o),v=this.ymin):2&C?(v=o+(c-o)*(this.xmax-s)/(l-s),y=this.xmax):(v=o+(c-o)*(this.xmin-s)/(l-s),y=this.xmin),h?h=this._regioncode(s=y,o=v):g=this._regioncode(l=y,c=v)}}_clipInfinite(s,o,l,c,h,g){let v,y=Array.from(o);if((v=this._project(y[0],y[1],l,c))&&y.unshift(v[0],v[1]),(v=this._project(y[y.length-2],y[y.length-1],h,g))&&y.push(v[0],v[1]),y=this._clipFinite(s,y))for(let x,C=0,E=y.length,S=this._edgecode(y[E-2],y[E-1]);C<E;C+=2)x=S,S=this._edgecode(y[C],y[C+1]),x&&S&&(C=this._edge(s,x,S,y,C),E=y.length);else this.contains(s,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(y=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return y}_edge(s,o,l,c,h){for(;o!==l;){let g,y;switch(o){case 5:o=4;continue;case 4:o=6,g=this.xmax,y=this.ymin;break;case 6:o=2;continue;case 2:o=10,g=this.xmax,y=this.ymax;break;case 10:o=8;continue;case 8:o=9,g=this.xmin,y=this.ymax;break;case 9:o=1;continue;case 1:o=5,g=this.xmin,y=this.ymin}(c[h]!==g||c[h+1]!==y)&&this.contains(s,g,y)&&(c.splice(h,0,g,y),h+=2)}if(c.length>4)for(let g=0;g<c.length;g+=2){const y=(g+2)%c.length,v=(g+4)%c.length;(c[g]===c[y]&&c[y]===c[v]||c[g+1]===c[y+1]&&c[y+1]===c[v+1])&&(c.splice(y,2),g-=2)}return h}_project(s,o,l,c){let g,y,v,h=1/0;if(c<0){if(o<=this.ymin)return null;(g=(this.ymin-o)/c)<h&&(v=this.ymin,y=s+(h=g)*l)}else if(c>0){if(o>=this.ymax)return null;(g=(this.ymax-o)/c)<h&&(v=this.ymax,y=s+(h=g)*l)}if(l>0){if(s>=this.xmax)return null;(g=(this.xmax-s)/l)<h&&(y=this.xmax,v=o+(h=g)*c)}else if(l<0){if(s<=this.xmin)return null;(g=(this.xmin-s)/l)<h&&(y=this.xmin,v=o+(h=g)*c)}return[y,v]}_edgecode(s,o){return(s===this.xmin?1:s===this.xmax?2:0)|(o===this.ymin?4:o===this.ymax?8:0)}_regioncode(s,o){return(s<this.xmin?1:s>this.xmax?2:0)|(o<this.ymin?4:o>this.ymax?8:0)}}const $R=2*Math.PI,M_=Math.pow;function UB(i){return i[0]}function Rj(i){return i[1]}function Pj(i,s,o){return[i+Math.sin(i+s)*o,s+Math.cos(i-s)*o]}class jR{static from(s,o=UB,l=Rj,c){return new jR("length"in s?function(i,s,o,l){const c=i.length,h=new Float64Array(2*c);for(let g=0;g<c;++g){const y=i[g];h[2*g]=s.call(l,y,g,i),h[2*g+1]=o.call(l,y,g,i)}return h}(s,o,l,c):Float64Array.from(function*(i,s,o,l){let c=0;for(const h of i)yield s.call(l,h,c,i),yield o.call(l,h,c,i),++c}(s,o,l,c)))}constructor(s){this._delaunator=new rT(s),this.inedges=new Int32Array(s.length/2),this._hullIndex=new Int32Array(s.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const s=this._delaunator,o=this.points;if(s.hull&&s.hull.length>2&&function(i){const{triangles:s,coords:o}=i;for(let l=0;l<s.length;l+=3){const c=2*s[l],h=2*s[l+1],g=2*s[l+2];if((o[g]-o[c])*(o[h+1]-o[c+1])-(o[h]-o[c])*(o[g+1]-o[c+1])>1e-10)return!1}return!0}(s)){this.collinear=Int32Array.from({length:o.length/2},(S,k)=>k).sort((S,k)=>o[2*S]-o[2*k]||o[2*S+1]-o[2*k+1]);const v=this.collinear[0],C=this.collinear[this.collinear.length-1],E=[o[2*v],o[2*v+1],o[2*C],o[2*C+1]],x=1e-8*Math.hypot(E[3]-E[1],E[2]-E[0]);for(let S=0,k=o.length/2;S<k;++S){const R=Pj(o[2*S],o[2*S+1],x);o[2*S]=R[0],o[2*S+1]=R[1]}this._delaunator=new rT(o)}else delete this.collinear;const l=this.halfedges=this._delaunator.halfedges,c=this.hull=this._delaunator.hull,h=this.triangles=this._delaunator.triangles,g=this.inedges.fill(-1),y=this._hullIndex.fill(-1);for(let v=0,C=l.length;v<C;++v){const E=h[v%3==2?v-2:v+1];(-1===l[v]||-1===g[E])&&(g[E]=v)}for(let v=0,C=c.length;v<C;++v)y[c[v]]=v;c.length<=2&&c.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=c[0],this.triangles[1]=c[1],this.triangles[2]=c[1],g[c[0]]=1,2===c.length&&(g[c[1]]=0))}voronoi(s){return new VR(this,s)}*neighbors(s){const{inedges:o,hull:l,_hullIndex:c,halfedges:h,triangles:g,collinear:y}=this;if(y){const x=y.indexOf(s);return x>0&&(yield y[x-1]),void(x<y.length-1&&(yield y[x+1]))}const v=o[s];if(-1===v)return;let C=v,E=-1;do{if(yield E=g[C],C=C%3==2?C-2:C+1,g[C]!==s)return;if(C=h[C],-1===C){const x=l[(c[s]+1)%l.length];return void(x!==E&&(yield x))}}while(C!==v)}find(s,o,l=0){if((s=+s)!=s||(o=+o)!=o)return-1;const c=l;let h;for(;(h=this._step(l,s,o))>=0&&h!==l&&h!==c;)l=h;return h}_step(s,o,l){const{inedges:c,hull:h,_hullIndex:g,halfedges:y,triangles:v,points:C}=this;if(-1===c[s]||!C.length)return(s+1)%(C.length>>1);let E=s,x=M_(o-C[2*s],2)+M_(l-C[2*s+1],2);const S=c[s];let k=S;do{let R=v[k];const N=M_(o-C[2*R],2)+M_(l-C[2*R+1],2);if(N<x&&(x=N,E=R),k=k%3==2?k-2:k+1,v[k]!==s)break;if(k=y[k],-1===k){if(k=h[(g[s]+1)%h.length],k!==R&&M_(o-C[2*k],2)+M_(l-C[2*k+1],2)<x)return k;break}}while(k!==S);return E}render(s){const o=null==s?s=new ef:void 0,{points:l,halfedges:c,triangles:h}=this;for(let g=0,y=c.length;g<y;++g){const v=c[g];if(v<g)continue;const C=2*h[g],E=2*h[v];s.moveTo(l[C],l[C+1]),s.lineTo(l[E],l[E+1])}return this.renderHull(s),o&&o.value()}renderPoints(s,o=2){const l=null==s?s=new ef:void 0,{points:c}=this;for(let h=0,g=c.length;h<g;h+=2){const y=c[h],v=c[h+1];s.moveTo(y+o,v),s.arc(y,v,o,0,$R)}return l&&l.value()}renderHull(s){const o=null==s?s=new ef:void 0,{hull:l,points:c}=this,h=2*l[0],g=l.length;s.moveTo(c[h],c[h+1]);for(let y=1;y<g;++y){const v=2*l[y];s.lineTo(c[v],c[v+1])}return s.closePath(),o&&o.value()}hullPolygon(){const s=new lT;return this.renderHull(s),s.value()}renderTriangle(s,o){const l=null==o?o=new ef:void 0,{points:c,triangles:h}=this,g=2*h[s*=3],y=2*h[s+1],v=2*h[s+2];return o.moveTo(c[g],c[g+1]),o.lineTo(c[y],c[y+1]),o.lineTo(c[v],c[v+1]),o.closePath(),l&&l.value()}*trianglePolygons(){const{triangles:s}=this;for(let o=0,l=s.length/3;o<l;++o)yield this.trianglePolygon(o)}trianglePolygon(s){const o=new lT;return this.renderTriangle(s,o),o.value()}}function WB(i){Ke.call(this,null,i)}WB.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const cT=[-1e5,-1e5,1e5,1e5];function zR(i){const s=i[0][0],o=i[0][1];let l=i.length-1;for(;i[l][0]===s&&i[l][1]===o;--l);return"M"+i.slice(0,l+1).join("L")+"Z"}(0,T.XW)(WB,Ke,{transform(i,s){const o=i.as||"path",l=s.source;if(!l||!l.length)return s;let c=i.size;c=c?[0,0,c[0],c[1]]:(c=i.extent)?[c[0][0],c[0][1],c[1][0],c[1][1]]:cT;const h=this.value=jR.from(l,i.x,i.y).voronoi(c);for(let g=0,y=l.length;g<y;++g){const v=h.cellPolygon(g);l[g][o]=v?zR(v):null}return s.reflow(i.modified()).modifies(o)}});var GB=Math.PI/180;function Bj(i,s,o,l){if(!s.sprite){var c=i.context,h=i.ratio;c.clearRect(0,0,2048/h,2048/h);var E,x,S,k,R,g=0,y=0,v=0,C=o.length;for(--l;++l<C;){if(s=o[l],c.save(),c.font=s.style+" "+s.weight+" "+~~((s.size+1)/h)+"px "+s.font,E=c.measureText(s.text+"m").width*h,S=s.size<<1,s.rotate){var N=Math.sin(s.rotate*GB),P=Math.cos(s.rotate*GB),z=E*P,H=E*N,X=S*P,J=S*N;E=Math.max(Math.abs(z+J),Math.abs(z-J))+31>>5<<5,S=~~Math.max(Math.abs(H+X),Math.abs(H-X))}else E=E+31>>5<<5;if(S>v&&(v=S),g+E>=2048&&(g=0,y+=v,v=0),y+S>=2048)break;c.translate((g+(E>>1))/h,(y+(S>>1))/h),s.rotate&&c.rotate(s.rotate*GB),c.fillText(s.text,0,0),s.padding&&(c.lineWidth=2*s.padding,c.strokeText(s.text,0,0)),c.restore(),s.width=E,s.height=S,s.xoff=g,s.yoff=y,s.x1=E>>1,s.y1=S>>1,s.x0=-s.x1,s.y0=-s.y1,s.hasText=!0,g+=E}for(var oe=c.getImageData(0,0,2048/h,2048/h).data,fe=[];--l>=0;)if((s=o[l]).hasText){for(x=(E=s.width)>>5,S=s.y1-s.y0,k=0;k<S*x;k++)fe[k]=0;if(null==(g=s.xoff))return;y=s.yoff;var te=0,Re=-1;for(R=0;R<S;R++){for(k=0;k<E;k++){var Fe=oe[2048*(y+R)+(g+k)<<2]?1<<31-k%32:0;fe[x*R+(k>>5)]|=Fe,te|=Fe}te?Re=R:(s.y0++,S--,R--,y++)}s.y1=s.y0+Re,s.sprite=fe.slice(0,(s.y1-s.y0)*x)}}}function Vj(i,s,o){for(var E,l=i.sprite,c=i.width>>5,h=i.x-(c<<4),g=127&h,y=32-g,v=i.y1-i.y0,C=(i.y+i.y0)*(o>>=5)+(h>>5),x=0;x<v;x++){E=0;for(var S=0;S<=c;S++)if((E<<y|(S<c?(E=l[x*c+S])>>>g:0))&s[C+S])return!0;C+=o}return!1}function $j(i,s){var o=i[0],l=i[1];s.x+s.x0<o.x&&(o.x=s.x+s.x0),s.y+s.y0<o.y&&(o.y=s.y+s.y0),s.x+s.x1>l.x&&(l.x=s.x+s.x1),s.y+s.y1>l.y&&(l.y=s.y+s.y1)}function UR(i,s){return i.x+i.x1>s[0].x&&i.x+i.x0<s[1].x&&i.y+i.y1>s[0].y&&i.y+i.y0<s[1].y}function HR(i){var s=i[0]/i[1];return function(o){return[s*(o*=.1)*Math.cos(o),o*Math.sin(o)]}}function O_(i){return"function"==typeof i?i:function(){return i}}var mG={archimedean:HR,rectangular:function(i){var o=4*i[0]/i[1],l=0,c=0;return function(h){var g=h<0?-1:1;switch(Math.sqrt(1+4*g*h)-g&3){case 0:l+=o;break;case 1:c+=4;break;case 2:l-=o;break;default:c-=4}return[l,c]}}};const qB=["x","y","font","fontSize","fontStyle","fontWeight","angle"],yG=["text","font","rotate","fontSize","fontStyle","fontWeight"];function dT(i){Ke.call(this,function(){var s,o,l,c,h,g,y,i=[256,256],v=HR,C=[],E=Math.random,x={};function k(R,N,P){for(var te,Re,ze,z=N.x,H=N.y,X=Math.sqrt(i[0]*i[0]+i[1]*i[1]),J=v(i),oe=E()<.5?1:-1,fe=-oe;(te=J(fe+=oe))&&(Re=~~te[0],ze=~~te[1],!(Math.min(Math.abs(Re),Math.abs(ze))>=X));)if(N.x=z+Re,N.y=H+ze,!(N.x+N.x0<0||N.y+N.y0<0||N.x+N.x1>i[0]||N.y+N.y1>i[1])&&(!P||!Vj(N,R,i[0]))&&(!P||UR(N,P))){for(var un,Fe=N.sprite,Oe=N.width>>5,tt=i[0]>>5,et=N.x-(Oe<<4),Ot=127&et,Xe=32-Ot,Tt=N.y1-N.y0,Xt=(N.y+N.y0)*tt+(et>>5),Wn=0;Wn<Tt;Wn++){un=0;for(var xi=0;xi<=Oe;xi++)R[Xt+xi]|=un<<Xe|(xi<Oe?(un=Fe[Wn*Oe+xi])>>>Ot:0);Xt+=tt}return N.sprite=null,!0}return!1}return x.layout=function(){for(var R=function(R){R.width=R.height=1;var N=Math.sqrt(R.getContext("2d").getImageData(0,0,1,1).data.length>>2);R.width=2048/N,R.height=2048/N;var P=R.getContext("2d");return P.fillStyle=P.strokeStyle="red",P.textAlign="center",{context:P,ratio:N}}(op()),N=function(i){for(var s=[],o=-1;++o<i;)s[o]=0;return s}((i[0]>>5)*i[1]),P=null,z=C.length,H=-1,X=[],J=C.map(fe=>({text:s(fe),font:o(fe),style:c(fe),weight:h(fe),rotate:g(fe),size:~~(l(fe)+1e-14),padding:y(fe),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:fe})).sort((fe,te)=>te.size-fe.size);++H<z;){var oe=J[H];oe.x=i[0]*(E()+.5)>>1,oe.y=i[1]*(E()+.5)>>1,Bj(R,oe,J,H),oe.hasText&&k(N,oe,P)&&(X.push(oe),P?$j(P,oe):P=[{x:oe.x+oe.x0,y:oe.y+oe.y0},{x:oe.x+oe.x1,y:oe.y+oe.y1}],oe.x-=i[0]>>1,oe.y-=i[1]>>1)}return X},x.words=function(R){return arguments.length?(C=R,x):C},x.size=function(R){return arguments.length?(i=[+R[0],+R[1]],x):i},x.font=function(R){return arguments.length?(o=O_(R),x):o},x.fontStyle=function(R){return arguments.length?(c=O_(R),x):c},x.fontWeight=function(R){return arguments.length?(h=O_(R),x):h},x.rotate=function(R){return arguments.length?(g=O_(R),x):g},x.text=function(R){return arguments.length?(s=O_(R),x):s},x.spiral=function(R){return arguments.length?(v=mG[R]||R,x):v},x.fontSize=function(R){return arguments.length?(l=O_(R),x):l},x.padding=function(R){return arguments.length?(y=O_(R),x):y},x.random=function(R){return arguments.length?(E=R,x):E},x}(),i)}dT.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:qB}]},(0,T.XW)(dT,Ke,{transform(i,s){i.size&&(!i.size[0]||!i.size[1])&&(0,T.vU)("Wordcloud size dimensions must be non-zero.");const l=i.modified();if(!(l||s.changed(s.ADD_REM)||yG.some(function(R){const N=i[R];return(0,T.mf)(N)&&s.modified(N.fields)})))return;const c=s.materialize(s.SOURCE).source,h=this.value,g=i.as||qB;let v,y=i.fontSize||14;if((0,T.mf)(y)?v=i.fontSizeRange:y=(0,T.a9)(y),v){const R=y,N=Ai("sqrt")().domain((0,T.We)(c,R)).range(v);y=P=>N(R(P))}c.forEach(R=>{R[g[0]]=NaN,R[g[1]]=NaN,R[g[3]]=0});const C=h.words(c).text(i.text).size(i.size||[500,500]).padding(i.padding||1).spiral(i.spiral||"archimedean").rotate(i.rotate||0).font(i.font||"sans-serif").fontStyle(i.fontStyle||"normal").fontWeight(i.fontWeight||"normal").fontSize(y).random(lr).layout(),E=h.size(),x=E[0]>>1,S=E[1]>>1,k=C.length;for(let N,P,R=0;R<k;++R)N=C[R],P=N.datum,P[g[0]]=N.x+x,P[g[1]]=N.y+S,P[g[2]]=N.font,P[g[3]]=N.size,P[g[4]]=N.style,P[g[5]]=N.weight,P[g[6]]=N.rotate;return s.reflow(l).modifies(g)}});const Hj=i=>new Uint8Array(i),YB=i=>new Uint16Array(i),fT=i=>new Uint32Array(i);function WR(i,s,o){const l=(s<257?Hj:s<65537?YB:fT)(i);return o&&l.set(o),l}function XB(i,s,o){const l=1<<s;return{one:l,zero:~l,range:o.slice(),bisect:i.bisect,index:i.index,size:i.size,onAdd(c,h){const g=this,y=g.bisect(g.range,c.value),v=c.index,C=y[0],E=y[1],x=v.length;let S;for(S=0;S<C;++S)h[v[S]]|=l;for(S=E;S<x;++S)h[v[S]]|=l;return g}}}function KB(){let i=fT(0),s=[],o=0;return{insert:function(y,v,C){if(!v.length)return[];const E=o,x=v.length,S=fT(x);let R,N,P,k=Array(x);for(P=0;P<x;++P)k[P]=y(v[P]),S[P]=P;if(k=function(i,s){return i.sort.call(s,(o,l)=>{const c=i[o],h=i[l];return c<h?-1:c>h?1:0}),function(i,s){return Array.from(s,o=>i[o])}(i,s)}(k,S),E)R=s,N=i,s=Array(E+x),i=fT(E+x),function(i,s,o,l,c,h,g,y,v){let x,C=0,E=0;for(x=0;C<l&&E<g;++x)s[C]<c[E]?(y[x]=s[C],v[x]=o[C++]):(y[x]=c[E],v[x]=h[E++]+i);for(;C<l;++C,++x)y[x]=s[C],v[x]=o[C];for(;E<g;++E,++x)y[x]=c[E],v[x]=h[E]+i}(C,R,N,E,k,S,x,s,i);else{if(C>0)for(P=0;P<x;++P)S[P]+=C;s=k,i=S}return o=E+x,{index:S,value:k}},remove:function(y,v){const C=o;let E,x,S;for(x=0;!v[i[x]]&&x<C;++x);for(S=x;x<C;++x)v[E=i[x]]||(i[S]=E,s[S]=s[x],++S);o=C-y},bisect:function(y,v){let C;return v?C=v.length:(v=s,C=o),[yE(v,y[0],0,C),ir(v,y[1],0,C)]},reindex:function(y){for(let v=0,C=o;v<C;++v)i[v]=y[i[v]]},index:()=>i,size:()=>o}}function GR(i){Ke.call(this,function(){let i=8,s=[],o=fT(0),l=WR(0,i),c=WR(0,i);return{data:()=>s,seen:()=>o=function(i,s,o){return i.length>=s?i:((o=o||new i.constructor(s)).set(i),o)}(o,s.length),add(h){for(let C,g=0,y=s.length,v=h.length;g<v;++g)C=h[g],C._index=y++,s.push(C)},remove(h,g){const y=s.length,v=Array(y-h),C=s;let E,x,S;for(x=0;!g[x]&&x<y;++x)v[x]=s[x],C[x]=x;for(S=x;x<y;++x)E=s[x],g[x]?C[x]=-1:(C[x]=S,l[S]=l[x],c[S]=c[x],v[S]=E,E._index=S++),l[x]=0;return s=v,C},size:()=>s.length,curr:()=>l,prev:()=>c,reset:h=>c[h]=l[h],all:()=>i<257?255:i<65537?65535:4294967295,set(h,g){l[h]|=g},clear(h,g){l[h]&=~g},resize(h,g){(h>l.length||g>i)&&(i=Math.max(g,i),l=WR(h,i,l),c=WR(h,i))}}}(),i),this._indices=null,this._dims=null}function Dx(i){Ke.call(this,null,i)}GR.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},(0,T.XW)(GR,Ke,{transform(i,s){return this._dims?i.modified("fields")||i.fields.some(l=>s.modified(l.fields))?this.reinit(i,s):this.eval(i,s):this.init(i,s)},init(i,s){const o=i.fields,l=i.query,c=this._indices={},h=this._dims=[],g=l.length;let v,C,y=0;for(;y<g;++y)v=o[y].fname,C=c[v]||(c[v]=KB()),h.push(XB(C,y,l[y]));return this.eval(i,s)},reinit(i,s){const o=s.materialize().fork(),l=i.fields,c=i.query,h=this._indices,g=this._dims,y=this.value,v=y.curr(),C=y.prev(),E=y.all(),x=o.rem=o.add,S=o.mod,k=c.length,R={};let N,P,z,H,X,J,oe,fe,te;if(C.set(v),s.rem.length&&(X=this.remove(i,s,o)),s.add.length&&y.add(s.add),s.mod.length)for(J={},H=s.mod,oe=0,fe=H.length;oe<fe;++oe)J[H[oe]._index]=1;for(oe=0;oe<k;++oe)te=l[oe],(!g[oe]||i.modified("fields",oe)||s.modified(te.fields))&&(z=te.fname,(N=R[z])||(h[z]=P=KB(),R[z]=N=P.insert(te,s.source,0)),g[oe]=XB(P,oe,c[oe]).onAdd(N,v));for(oe=0,fe=y.data().length;oe<fe;++oe)X[oe]||(C[oe]!==v[oe]?x.push(oe):J[oe]&&v[oe]!==E&&S.push(oe));return y.mask=(1<<k)-1,o},eval(i,s){const o=s.materialize().fork(),l=this._dims.length;let c=0;return s.rem.length&&(this.remove(i,s,o),c|=(1<<l)-1),i.modified("query")&&!i.modified("fields")&&(c|=this.update(i,s,o)),s.add.length&&(this.insert(i,s,o),c|=(1<<l)-1),s.mod.length&&(this.modify(s,o),c|=(1<<l)-1),this.value.mask=c,o},insert(i,s,o){const l=s.add,c=this.value,h=this._dims,g=this._indices,y=i.fields,v={},C=o.add,E=c.size()+l.length,x=h.length;let k,R,N,S=c.size();c.resize(E,x),c.add(l);const P=c.curr(),z=c.prev(),H=c.all();for(k=0;k<x;++k)R=y[k].fname,N=v[R]||(v[R]=g[R].insert(y[k],l,S)),h[k].onAdd(N,P);for(;S<E;++S)z[S]=H,P[S]!==H&&C.push(S)},modify(i,s){const o=s.mod,l=this.value,c=l.curr(),h=l.all(),g=i.mod;let y,v,C;for(y=0,v=g.length;y<v;++y)C=g[y]._index,c[C]!==h&&o.push(C)},remove(i,s,o){const l=this._indices,c=this.value,h=c.curr(),g=c.prev(),y=c.all(),v={},C=o.rem,E=s.rem;let x,S,k,R;for(x=0,S=E.length;x<S;++x)k=E[x]._index,v[k]=1,g[k]=R=h[k],h[k]=y,R!==y&&C.push(k);for(k in l)l[k].remove(S,v);return this.reindex(s,S,v),v},reindex(i,s,o){const l=this._indices,c=this.value;i.runAfter(()=>{const h=c.remove(s,o);for(const g in l)l[g].reindex(h)})},update(i,s,o){const l=this._dims,c=i.query,h=s.stamp,g=l.length;let v,C,y=0;for(o.filters=0,C=0;C<g;++C)i.modified("query",C)&&(v=C,++y);if(1===y)y=l[v].one,this.incrementOne(l[v],c[v],o.add,o.rem);else for(C=0,y=0;C<g;++C)!i.modified("query",C)||(y|=l[C].one,this.incrementAll(l[C],c[C],h,o.add),o.rem=o.add);return y},incrementAll(i,s,o,l){const c=this.value,h=c.seen(),g=c.curr(),y=c.prev(),v=i.index(),C=i.bisect(i.range),E=i.bisect(s),x=E[0],S=E[1],k=C[0],R=C[1],N=i.one;let P,z,H;if(x<k)for(P=x,z=Math.min(k,S);P<z;++P)H=v[P],h[H]!==o&&(y[H]=g[H],h[H]=o,l.push(H)),g[H]^=N;else if(x>k)for(P=k,z=Math.min(x,R);P<z;++P)H=v[P],h[H]!==o&&(y[H]=g[H],h[H]=o,l.push(H)),g[H]^=N;if(S>R)for(P=Math.max(x,R),z=S;P<z;++P)H=v[P],h[H]!==o&&(y[H]=g[H],h[H]=o,l.push(H)),g[H]^=N;else if(S<R)for(P=Math.max(k,S),z=R;P<z;++P)H=v[P],h[H]!==o&&(y[H]=g[H],h[H]=o,l.push(H)),g[H]^=N;i.range=s.slice()},incrementOne(i,s,o,l){const h=this.value.curr(),g=i.index(),y=i.bisect(i.range),v=i.bisect(s),C=v[0],E=v[1],x=y[0],S=y[1],k=i.one;let R,N,P;if(C<x)for(R=C,N=Math.min(x,E);R<N;++R)P=g[R],h[P]^=k,o.push(P);else if(C>x)for(R=x,N=Math.min(C,S);R<N;++R)P=g[R],h[P]^=k,l.push(P);if(E>S)for(R=Math.max(C,S),N=E;R<N;++R)P=g[R],h[P]^=k,o.push(P);else if(E<S)for(R=Math.max(x,E),N=S;R<N;++R)P=g[R],h[P]^=k,l.push(P);i.range=s.slice()}}),Dx.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},(0,T.XW)(Dx,Ke,{transform(i,s){const o=~(i.ignore||0),l=i.filter,c=l.mask;if(0==(c&o))return s.StopPropagation;const h=s.fork(s.ALL),g=l.data(),y=l.curr(),v=l.prev(),C=E=>y[E]&o?null:g[E];return h.filter(h.MOD,C),c&c-1?(h.filter(h.ADD,E=>{const x=y[E]&o;return!x&&x^v[E]&o?g[E]:null}),h.filter(h.REM,E=>{const x=y[E]&o;return!x||x^x^v[E]&o?null:g[E]})):(h.filter(h.ADD,C),h.filter(h.REM,E=>(y[E]&o)===c?g[E]:null)),h.filter(h.SOURCE,E=>C(E._index))}});const T_="Literal",Xj="CallExpression";function tf(i){this.type=i}var Zp,wn,rt,Ha,Dr;tf.prototype.visit=function(i){let s,o,l;if(i(this))return 1;for(s=function(i){switch(i.type){case"ArrayExpression":return i.elements;case"BinaryExpression":case"LogicalExpression":return[i.left,i.right];case Xj:return[i.callee].concat(i.arguments);case"ConditionalExpression":return[i.test,i.consequent,i.alternate];case"MemberExpression":return[i.object,i.property];case"ObjectExpression":return i.properties;case"Property":return[i.key,i.value];case"UnaryExpression":return[i.argument];case"Identifier":case T_:case"RawCode":default:return[]}}(this),o=0,l=s.length;o<l;++o)if(s[o].visit(i))return 1},(Zp={})[1]="Boolean",Zp[2]="<end>",Zp[3]="Identifier",Zp[4]="Keyword",Zp[5]="Null",Zp[6]="Numeric",Zp[7]="Punctuator",Zp[8]="String",Zp[9]="RegularExpression";var _n="Identifier",Br="Unexpected token %0",hT="Invalid regular expression",mh="Invalid regular expression: missing /",oz="Octal literals are not allowed in strict mode.",ga="ILLEGAL",Z1="Disabled.",e5=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),t5=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function pT(i,s){if(!i)throw new Error("ASSERT: "+s)}function qu(i){return i>=48&&i<=57}function Ds(i){return"0123456789abcdefABCDEF".indexOf(i)>=0}function I_(i){return"01234567".indexOf(i)>=0}function XR(i){return 32===i||9===i||11===i||12===i||160===i||i>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(i)>=0}function Jm(i){return 10===i||13===i||8232===i||8233===i}function eC(i){return 36===i||95===i||i>=65&&i<=90||i>=97&&i<=122||92===i||i>=128&&e5.test(String.fromCharCode(i))}function tC(i){return 36===i||95===i||i>=65&&i<=90||i>=97&&i<=122||i>=48&&i<=57||92===i||i>=128&&t5.test(String.fromCharCode(i))}const Zm={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function KR(){for(;rt<Ha;){const i=wn.charCodeAt(rt);if(!XR(i)&&!Jm(i))break;++rt}}function gT(i){var s,o,l,c=0;for(o="u"===i?4:2,s=0;s<o;++s)rt<Ha&&Ds(wn[rt])?(l=wn[rt++],c=16*c+"0123456789abcdef".indexOf(l.toLowerCase())):er({},Br,ga);return String.fromCharCode(c)}function lz(){var i,s;for(s=0,"}"===(i=wn[rt])&&er({},Br,ga);rt<Ha&&Ds(i=wn[rt++]);)s=16*s+"0123456789abcdef".indexOf(i.toLowerCase());return(s>1114111||"}"!==i)&&er({},Br,ga),s<=65535?String.fromCharCode(s):String.fromCharCode(55296+(s-65536>>10),56320+(s-65536&1023))}function uz(){var i,s;for(i=wn.charCodeAt(rt++),s=String.fromCharCode(i),92===i&&(117!==wn.charCodeAt(rt)&&er({},Br,ga),++rt,(!(i=gT("u"))||"\\"===i||!eC(i.charCodeAt(0)))&&er({},Br,ga),s=i);rt<Ha&&tC(i=wn.charCodeAt(rt));)++rt,s+=String.fromCharCode(i),92===i&&(s=s.substr(0,s.length-1),117!==wn.charCodeAt(rt)&&er({},Br,ga),++rt,(!(i=gT("u"))||"\\"===i||!tC(i.charCodeAt(0)))&&er({},Br,ga),s+=i);return s}function n5(){var o,c,h,g,i=rt,s=wn.charCodeAt(rt),l=wn[rt];switch(s){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++rt,{type:7,value:String.fromCharCode(s),start:i,end:rt};default:if(61===(o=wn.charCodeAt(rt+1)))switch(s){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return rt+=2,{type:7,value:String.fromCharCode(s)+String.fromCharCode(o),start:i,end:rt};case 33:case 61:return 61===wn.charCodeAt(rt+=2)&&++rt,{type:7,value:wn.slice(i,rt),start:i,end:rt}}}return">>>="===(g=wn.substr(rt,4))?{type:7,value:g,start:i,end:rt+=4}:">>>"===(h=g.substr(0,3))||"<<="===h||">>="===h?{type:7,value:h,start:i,end:rt+=3}:l===(c=h.substr(0,2))[1]&&"+-<>&|".indexOf(l)>=0||"=>"===c?{type:7,value:c,start:i,end:rt+=2}:("//"===c&&er({},Br,ga),"<>=!+-*%&|^/".indexOf(l)>=0?{type:7,value:l,start:i,end:++rt}:void er({},Br,ga))}function cz(){var i,s,o;if(pT(qu((o=wn[rt]).charCodeAt(0))||"."===o,"Numeric literal must start with a decimal digit or a decimal point"),s=rt,i="","."!==o){if(i=wn[rt++],o=wn[rt],"0"===i){if("x"===o||"X"===o)return++rt,function(i){let s="";for(;rt<Ha&&Ds(wn[rt]);)s+=wn[rt++];return 0===s.length&&er({},Br,ga),eC(wn.charCodeAt(rt))&&er({},Br,ga),{type:6,value:parseInt("0x"+s,16),start:i,end:rt}}(s);if(I_(o))return function(i){let s="0"+wn[rt++];for(;rt<Ha&&I_(wn[rt]);)s+=wn[rt++];return(eC(wn.charCodeAt(rt))||qu(wn.charCodeAt(rt)))&&er({},Br,ga),{type:6,value:parseInt(s,8),octal:!0,start:i,end:rt}}(s);o&&qu(o.charCodeAt(0))&&er({},Br,ga)}for(;qu(wn.charCodeAt(rt));)i+=wn[rt++];o=wn[rt]}if("."===o){for(i+=wn[rt++];qu(wn.charCodeAt(rt));)i+=wn[rt++];o=wn[rt]}if("e"===o||"E"===o)if(i+=wn[rt++],("+"===(o=wn[rt])||"-"===o)&&(i+=wn[rt++]),qu(wn.charCodeAt(rt)))for(;qu(wn.charCodeAt(rt));)i+=wn[rt++];else er({},Br,ga);return eC(wn.charCodeAt(rt))&&er({},Br,ga),{type:6,value:parseFloat(i),start:s,end:rt}}function s5(){if(KR(),rt>=Ha)return{type:2,start:rt,end:rt};const i=wn.charCodeAt(rt);return eC(i)?function(){var i,s;return i=rt,{type:1===(s=92===wn.charCodeAt(rt)?uz():function(){var i,s;for(i=rt++;rt<Ha;){if(92===(s=wn.charCodeAt(rt)))return rt=i,uz();if(!tC(s))break;++rt}return wn.slice(i,rt)}()).length?3:Zm.hasOwnProperty(s)?4:"null"===s?5:"true"===s||"false"===s?1:3,value:s,start:i,end:rt}}():40===i||41===i||59===i?n5():39===i||34===i?function(){var s,o,l,c,i="",h=!1;for(pT("'"===(s=wn[rt])||'"'===s,"String literal must starts with a quote"),o=rt,++rt;rt<Ha;){if((l=wn[rt++])===s){s="";break}if("\\"===l)if((l=wn[rt++])&&Jm(l.charCodeAt(0)))"\r"===l&&"\n"===wn[rt]&&++rt;else switch(l){case"u":case"x":"{"===wn[rt]?(++rt,i+=lz()):i+=gT(l);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:I_(l)?(0!==(c="01234567".indexOf(l))&&(h=!0),rt<Ha&&I_(wn[rt])&&(h=!0,c=8*c+"01234567".indexOf(wn[rt++]),"0123".indexOf(l)>=0&&rt<Ha&&I_(wn[rt])&&(c=8*c+"01234567".indexOf(wn[rt++]))),i+=String.fromCharCode(c)):i+=l}else{if(Jm(l.charCodeAt(0)))break;i+=l}}return""!==s&&er({},Br,ga),{type:8,value:i,octal:h,start:o,end:rt}}():46===i?qu(wn.charCodeAt(rt+1))?cz():n5():qu(i)?cz():n5()}function Wa(){const i=Dr;return rt=i.end,Dr=s5(),rt=i.end,i}function o5(){const i=rt;Dr=s5(),rt=i}function hz(i,s,o){const l=new tf("||"===i||"&&"===i?"LogicalExpression":"BinaryExpression");return l.operator=i,l.left=s,l.right=o,l}function pz(i,s){const o=new tf("CallExpression");return o.callee=i,o.arguments=s,o}function a5(i){const s=new tf(_n);return s.name=i,s}function mT(i){const s=new tf("Literal");return s.value=i.value,s.raw=wn.slice(i.start,i.end),i.regex&&("//"===s.raw&&(s.raw="/(?:)/"),s.regex=i.regex),s}function yT(i,s,o){const l=new tf("MemberExpression");return l.computed="["===i,l.object=s,l.property=o,l.computed||(o.member=!0),l}function nC(i,s,o){const l=new tf("Property");return l.key=s,l.value=o,l.kind=i,l}function er(i,s){var o,l=Array.prototype.slice.call(arguments,2),c=s.replace(/%(\d)/g,(h,g)=>(pT(g<l.length,"Message reference must be in range"),l[g]));throw(o=new Error(c)).index=rt,o.description=c,o}function ZR(i){2===i.type&&er(i,"Unexpected end of input"),6===i.type&&er(i,"Unexpected number"),8===i.type&&er(i,"Unexpected string"),3===i.type&&er(i,"Unexpected identifier"),4===i.type&&er(i,"Unexpected reserved word"),er(i,Br,i.value)}function no(i){const s=Wa();(7!==s.type||s.value!==i)&&ZR(s)}function qr(i){return 7===Dr.type&&Dr.value===i}function Sx(i){return 4===Dr.type&&Dr.value===i}function e0(){rt=Dr.start;const i=Wa();return 8===i.type||6===i.type?(i.octal&&er(i,oz),mT(i)):a5(i.value)}function l5(){var i,s,o;return rt=Dr.start,3===(i=Dr).type?(o=e0(),no(":"),nC("init",o,Xu())):2!==i.type&&7!==i.type?(s=e0(),no(":"),nC("init",s,Xu())):void ZR(i)}const mz={if:1};function u5(){var i,s,o;if(qr("("))return function(){no("(");const i=c5();return no(")"),i}();if(qr("["))return function(){const i=[];for(rt=Dr.start,no("[");!qr("]");)qr(",")?(Wa(),i.push(null)):(i.push(Xu()),qr("]")||no(","));return Wa(),function(i){const s=new tf("ArrayExpression");return s.elements=i,s}(i)}();if(qr("{"))return function(){var s,l,i=[],c={},h=String;for(rt=Dr.start,no("{");!qr("}");)l="$"+((s=l5()).key.type===_n?s.key.name:h(s.key.value)),Object.prototype.hasOwnProperty.call(c,l)?er({},"Duplicate data property in object literal not allowed in strict mode"):c[l]=!0,i.push(s),qr("}")||no(",");return no("}"),function(i){const s=new tf("ObjectExpression");return s.properties=i,s}(i)}();if(rt=Dr.start,3===(i=Dr.type)||mz[Dr.value])o=a5(Wa().value);else if(8===i||6===i)Dr.octal&&er(Dr,oz),o=mT(Wa());else{if(4===i)throw new Error(Z1);1===i?((s=Wa()).value="true"===s.value,o=mT(s)):5===i?((s=Wa()).value=null,o=mT(s)):qr("/")||qr("/=")?(o=mT(function(){var i,s,o,l;return Dr=null,KR(),i=rt,s=function(){var i,s,o,l;for(pT("/"===(i=wn[rt]),"Regular expression literal must start with a slash"),s=wn[rt++],o=!1,l=!1;rt<Ha;)if(s+=i=wn[rt++],"\\"===i)Jm((i=wn[rt++]).charCodeAt(0))&&er({},mh),s+=i;else if(Jm(i.charCodeAt(0)))er({},mh);else if(o)"]"===i&&(o=!1);else{if("/"===i){l=!0;break}"["===i&&(o=!0)}return l||er({},mh),{value:s.substr(1,s.length-2),literal:s}}(),o=function(){var i,s,o;for(s="",o="";rt<Ha&&tC((i=wn[rt]).charCodeAt(0));)++rt,"\\"===i&&rt<Ha?er({},Br,ga):(o+=i,s+=i);return o.search(/[^gimuy]/g)>=0&&er({},hT,o),{value:o,literal:s}}(),l=function(i,s){let o=i;s.indexOf("u")>=0&&(o=o.replace(/\\u\{([0-9a-fA-F]+)\}/g,(l,c)=>{if(parseInt(c,16)<=1114111)return"x";er({},hT)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(o)}catch(l){er({},hT)}try{return new RegExp(i,s)}catch(l){return null}}(s.value,o.value),{literal:s.literal+o.literal,value:l,regex:{pattern:s.value,flags:o.value},start:i,end:rt}}()),o5()):ZR(Wa())}return o}function vT(){const i=[];if(no("("),!qr(")"))for(;rt<Ha&&(i.push(Xu()),!qr(")"));)no(",");return no(")"),i}function tN(){no("[");const i=c5();return no("]"),i}function Yu(){const i=function(){var i;for(i=u5();;)if(qr("."))i=yT(".",i,(no("."),function(){rt=Dr.start;const i=Wa();return function(i){return 3===i.type||4===i.type||1===i.type||5===i.type}(i)||ZR(i),a5(i.value)}()));else if(qr("("))i=pz(i,vT());else{if(!qr("["))break;i=yT("[",i,tN())}return i}();if(7===Dr.type&&(qr("++")||qr("--")))throw new Error(Z1);return i}function bT(){var i,s;if(7!==Dr.type&&4!==Dr.type)s=Yu();else{if(qr("++")||qr("--"))throw new Error(Z1);if(qr("+")||qr("-")||qr("~")||qr("!"))i=Wa(),s=bT(),s=function(i,s){const o=new tf("UnaryExpression");return o.operator=i,o.argument=s,o.prefix=!0,o}(i.value,s);else{if(Sx("delete")||Sx("void")||Sx("typeof"))throw new Error(Z1);s=Yu()}}return s}function nN(i){let s=0;if(7!==i.type&&4!==i.type)return 0;switch(i.value){case"||":s=1;break;case"&&":s=2;break;case"|":s=3;break;case"^":s=4;break;case"&":s=5;break;case"==":case"!=":case"===":case"!==":s=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":s=7;break;case"<<":case">>":case">>>":s=8;break;case"+":case"-":s=9;break;case"*":case"/":case"%":s=11}return s}function Xu(){var i,s;return i=function(){var i,s,o,l,c,h,g,y,v,C;if(i=Dr,v=bT(),0===(c=nN(l=Dr)))return v;for(l.prec=c,Wa(),s=[i,Dr],h=[v,l,g=bT()];(c=nN(Dr))>0;){for(;h.length>2&&c<=h[h.length-2].prec;)g=h.pop(),y=h.pop().value,v=h.pop(),s.pop(),o=hz(y,v,g),h.push(o);(l=Wa()).prec=c,h.push(l),s.push(Dr),o=bT(),h.push(o)}for(o=h[C=h.length-1],s.pop();C>1;)s.pop(),o=hz(h[C-1].value,h[C-2],o),C-=2;return o}(),qr("?")&&(Wa(),s=Xu(),no(":"),i=function(i,s,o){const l=new tf("ConditionalExpression");return l.test=i,l.consequent=s,l.alternate=o,l}(i,s,Xu())),i}function c5(){const i=Xu();if(qr(","))throw new Error(Z1);return i}function yz(i){rt=0,Ha=(wn=i).length,Dr=null,o5();const s=c5();if(2!==Dr.type)throw new Error("Unexpect token after expression.");return s}var sC={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function iN(i){function o(g,y,v){return C=>function(g,y,v,C){let E=i(y[0]);return v&&(E=v+"("+E+")",0===v.lastIndexOf("new ",0)&&(E="("+E+")")),E+"."+g+(C<0?"":0===C?"()":"("+y.slice(1).map(i).join(",")+")")}(g,C,y,v)}const l="new Date",c="String",h="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(g){g.length<3&&(0,T.vU)("Missing arguments to clamp function."),g.length>3&&(0,T.vU)("Too many arguments to clamp function.");const y=g.map(i);return"Math.max("+y[1]+", Math.min("+y[2]+","+y[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:l,date:o("getDate",l,0),day:o("getDay",l,0),year:o("getFullYear",l,0),month:o("getMonth",l,0),hours:o("getHours",l,0),minutes:o("getMinutes",l,0),seconds:o("getSeconds",l,0),milliseconds:o("getMilliseconds",l,0),time:o("getTime",l,0),timezoneoffset:o("getTimezoneOffset",l,0),utcdate:o("getUTCDate",l,0),utcday:o("getUTCDay",l,0),utcyear:o("getUTCFullYear",l,0),utcmonth:o("getUTCMonth",l,0),utchours:o("getUTCHours",l,0),utcminutes:o("getUTCMinutes",l,0),utcseconds:o("getUTCSeconds",l,0),utcmilliseconds:o("getUTCMilliseconds",l,0),length:o("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:o("toUpperCase",c,0),lower:o("toLowerCase",c,0),substring:o("substring",c),split:o("split",c),trim:o("trim",c,0),regexp:h,test:o("test",h),if:function(g){g.length<3&&(0,T.vU)("Missing arguments to if function."),g.length>3&&(0,T.vU)("Too many arguments to if function.");const y=g.map(i);return"("+y[0]+"?"+y[1]+":"+y[2]+")"}}}function d5(i){const s=(i=i||{}).allowed?(0,T.Rg)(i.allowed):{},o=i.forbidden?(0,T.Rg)(i.forbidden):{},l=i.constants||sC,c=(i.functions||iN)(x),h=i.globalvar,g=i.fieldvar,y=(0,T.mf)(h)?h:R=>`${h}["${R}"]`;let v={},C={},E=0;function x(R){if((0,T.HD)(R))return R;const N=S[R.type];return null==N&&(0,T.vU)("Unsupported type: "+R.type),N(R)}const S={Literal:R=>R.raw,Identifier:R=>{const N=R.name;return E>0?N:(0,T.nr)(o,N)?(0,T.vU)("Illegal identifier: "+N):(0,T.nr)(l,N)?l[N]:(0,T.nr)(s,N)?N:(v[N]=1,y(N))},MemberExpression:R=>{const N=!R.computed,P=x(R.object);N&&(E+=1);const z=x(R.property);return P===g&&(C[function(i){const s=i&&i.length-1;return s&&('"'===i[0]&&'"'===i[s]||"'"===i[0]&&"'"===i[s])?i.slice(1,-1):i}(z)]=1),N&&(E-=1),P+(N?"."+z:"["+z+"]")},CallExpression:R=>{"Identifier"!==R.callee.type&&(0,T.vU)("Illegal callee type: "+R.callee.type);const N=R.callee.name,P=R.arguments,z=(0,T.nr)(c,N)&&c[N];return z||(0,T.vU)("Unrecognized function: "+N),(0,T.mf)(z)?z(P):z+"("+P.map(x).join(",")+")"},ArrayExpression:R=>"["+R.elements.map(x).join(",")+"]",BinaryExpression:R=>"("+x(R.left)+" "+R.operator+" "+x(R.right)+")",UnaryExpression:R=>"("+R.operator+x(R.argument)+")",ConditionalExpression:R=>"("+x(R.test)+"?"+x(R.consequent)+":"+x(R.alternate)+")",LogicalExpression:R=>"("+x(R.left)+R.operator+x(R.right)+")",ObjectExpression:R=>"{"+R.properties.map(x).join(",")+"}",Property:R=>{E+=1;const N=x(R.key);return E-=1,N+":"+x(R.value)}};function k(R){const N={code:x(R),globals:Object.keys(v),fields:Object.keys(C)};return v={},C={},N}return k.functions=c,k.constants=l,k}var Mx,f5,ET,Ku,rN,CT=new Hs,wT=new Hs,yh={point:Ho,lineStart:Ho,lineEnd:Ho,polygonStart:function(){CT=new Hs,yh.lineStart=IG,yh.lineEnd=vz},polygonEnd:function(){var i=+CT;wT.add(i<0?$a+i:i),this.lineStart=this.lineEnd=this.point=Ho},sphere:function(){wT.add($a)}};function IG(){yh.point=bz}function vz(){Ox(Mx,f5)}function bz(i,s){yh.point=Ox,Mx=i,f5=s,ET=i*=ci,Ku=zn(s=(s*=ci)/2+M1),rN=Fn(s)}function Ox(i,s){var o=(i*=ci)-ET,l=o>=0?1:-1,c=l*o,h=zn(s=(s*=ci)/2+M1),g=Fn(s),y=rN*g,v=Ku*h+y*zn(c),C=y*l*Fn(c);CT.add(Uu(C,v)),ET=i,Ku=h,rN=g}var ss,Qu,xs,Ju,R_,Cz,oC,Sl,Tx,t0,n0,Yc={point:sN,lineStart:g5,lineEnd:oN,polygonStart:function(){Yc.point=m5,Yc.lineStart=wz,Yc.lineEnd=aN,Tx=new Hs,yh.polygonStart()},polygonEnd:function(){yh.polygonEnd(),Yc.point=sN,Yc.lineStart=g5,Yc.lineEnd=oN,CT<0?(ss=-(xs=180),Qu=-(Ju=90)):Tx>$n?Ju=90:Tx<-$n&&(Qu=-90),n0[0]=ss,n0[1]=xs},sphere:function(){ss=-(xs=180),Qu=-(Ju=90)}};function sN(i,s){t0.push(n0=[ss=i,xs=i]),s<Qu&&(Qu=s),s>Ju&&(Ju=s)}function p5(i,s){var o=fh([i*ci,s*ci]);if(Sl){var l=JD(Sl,o),h=JD([l[1],-l[0],0],l);mO(h),h=vI(h);var C,g=i-R_,y=g>0?1:-1,v=h[0]*ws*y,E=Fi(g)>180;E^(y*R_<v&&v<y*i)?(C=h[1]*ws)>Ju&&(Ju=C):E^(y*R_<(v=(v+360)%360-180)&&v<y*i)?(C=-h[1]*ws)<Qu&&(Qu=C):(s<Qu&&(Qu=s),s>Ju&&(Ju=s)),E?i<R_?yi(ss,i)>yi(ss,xs)&&(xs=i):yi(i,xs)>yi(ss,xs)&&(ss=i):xs>=ss?(i<ss&&(ss=i),i>xs&&(xs=i)):i>R_?yi(ss,i)>yi(ss,xs)&&(xs=i):yi(i,xs)>yi(ss,xs)&&(ss=i)}else t0.push(n0=[ss=i,xs=i]);s<Qu&&(Qu=s),s>Ju&&(Ju=s),Sl=o,R_=i}function g5(){Yc.point=p5}function oN(){n0[0]=ss,n0[1]=xs,Yc.point=sN,Sl=null}function m5(i,s){if(Sl){var o=i-R_;Tx.add(Fi(o)>180?o+(o>0?360:-360):o)}else Cz=i,oC=s;yh.point(i,s),p5(i,s)}function wz(){yh.lineStart()}function aN(){m5(Cz,oC),yh.lineEnd(),Fi(Tx)>$n&&(ss=-(xs=180)),n0[0]=ss,n0[1]=xs,Sl=null}function yi(i,s){return(s-=i)<0?s+360:s}function Ez(i,s){return i[0]-s[0]}function y5(i,s){return i[0]<=i[1]?i[0]<=s&&s<=i[1]:s<i[0]||i[1]<s}var N_,qo,DT,xT,ST,Ga,AT,MT,lN,uN,_5,v5,rf,Yo,Al,ro,sf={sphere:Ho,point:b5,lineStart:xz,lineEnd:C5,polygonStart:function(){sf.lineStart=_h,sf.lineEnd=Az},polygonEnd:function(){sf.lineStart=xz,sf.lineEnd=C5}};function b5(i,s){i*=ci;var o=zn(s*=ci);qa(o*zn(i),o*Fn(i),Fn(s))}function qa(i,s,o){++N_,DT+=(i-DT)/N_,xT+=(s-xT)/N_,ST+=(o-ST)/N_}function xz(){sf.point=Sz}function Sz(i,s){i*=ci;var o=zn(s*=ci);Yo=o*zn(i),Al=o*Fn(i),ro=Fn(s),sf.point=OT,qa(Yo,Al,ro)}function OT(i,s){i*=ci;var o=zn(s*=ci),l=o*zn(i),c=o*Fn(i),h=Fn(s),g=Uu(ja((g=Al*h-ro*c)*g+(g=ro*l-Yo*h)*g+(g=Yo*c-Al*l)*g),Yo*l+Al*c+ro*h);qo+=g,Ga+=g*(Yo+(Yo=l)),AT+=g*(Al+(Al=c)),MT+=g*(ro+(ro=h)),qa(Yo,Al,ro)}function C5(){sf.point=b5}function _h(){sf.point=r0}function Az(){w5(v5,rf),sf.point=b5}function r0(i,s){v5=i,rf=s,i*=ci,s*=ci,sf.point=w5;var o=zn(s);Yo=o*zn(i),Al=o*Fn(i),ro=Fn(s),qa(Yo,Al,ro)}function w5(i,s){i*=ci;var o=zn(s*=ci),l=o*zn(i),c=o*Fn(i),h=Fn(s),g=Al*h-ro*c,y=ro*l-Yo*h,v=Yo*c-Al*l,C=rI(g,y,v),E=su(C),x=C&&-E/C;lN.add(x*g),uN.add(x*y),_5.add(x*v),qo+=E,Ga+=E*(Yo+(Yo=l)),AT+=E*(Al+(Al=c)),MT+=E*(ro+(ro=h)),qa(Yo,Al,ro)}const P_="intersect",kx="index:unit";function A5(i,s){for(var g,y,o=s.fields,l=s.values,c=o.length,h=0;h<c;++h)if((y=o[h]).getter=T.EP.getter||(0,T.EP)(y.field),g=y.getter(i),(0,T.J_)(g)&&(g=(0,T.He)(g)),(0,T.J_)(l[h])&&(l[h]=(0,T.He)(l[h])),(0,T.J_)(l[h][0])&&(l[h]=l[h].map(T.He)),"E"===y.type){if((0,T.kJ)(l[h])?l[h].indexOf(g)<0:g!==l[h])return!1}else if("R"===y.type){if(!(0,T.u5)(g,l[h]))return!1}else if("R-RE"===y.type){if(!(0,T.u5)(g,l[h],!0,!1))return!1}else if("R-E"===y.type){if(!(0,T.u5)(g,l[h],!1,!1))return!1}else if("R-LE"===y.type&&!(0,T.u5)(g,l[h],!1,!0))return!1;return!0}const M5=(0,T.EP)("_vgsid_"),O5=function(i){let s=i,o=i;function l(g,y,v,C){for(null==v&&(v=0),null==C&&(C=g.length);v<C;){const E=v+C>>>1;o(g[E],y)<0?v=E+1:C=E}return v}return 1===i.length&&(s=(g,y)=>i(g)-y,o=function(i){return(s,o)=>function(i,s){return i<s?-1:i>s?1:i>=s?0:NaN}(i(s),o)}(i)),{left:l,center:function(g,y,v,C){null==v&&(v=0),null==C&&(C=g.length);const E=l(g,y,v,C-1);return E>v&&s(g[E-1],y)>-s(g[E],y)?E-1:E},right:function(g,y,v,C){for(null==v&&(v=0),null==C&&(C=g.length);v<C;){const E=v+C>>>1;o(g[E],y)>0?C=E:v=E+1}return v}}}(M5),aC=O5.left,lC=O5.right;var T5={E_union:function(i,s){if(!i.length)return s;for(var o=0,l=s.length;o<l;++o)i.indexOf(s[o])<0&&i.push(s[o]);return i},E_intersect:function(i,s){return i.length?i.filter(o=>s.indexOf(o)>=0):s},R_union:function(i,s){var o=(0,T.He)(s[0]),l=(0,T.He)(s[1]);return o>l&&(o=s[1],l=s[0]),i.length?(i[0]>o&&(i[0]=o),i[1]<l&&(i[1]=l),i):[o,l]},R_intersect:function(i,s){var o=(0,T.He)(s[0]),l=(0,T.He)(s[1]);return o>l&&(o=s[1],l=s[0]),i.length?l<i[0]||i[1]<o?[]:(i[0]<o&&(i[0]=o),i[1]>l&&(i[1]=l),i):[o,l]}};function F5(i,s,o,l){s[0].type!==T_&&(0,T.vU)("First argument to selection functions must be a string literal.");const c=s[0].value,g="unit",y="@"+g,v=":"+c;(s.length>=2&&(0,T.fj)(s).value)===P_&&!(0,T.nr)(l,y)&&(l[y]=o.getData(c).indataRef(o,g)),(0,T.nr)(l,v)||(l[v]=o.getData(c).tuplesRef())}function uC(i){const s=this.context.data[i];return s?s.values.value:[]}const TT=i=>function(s,o){return this.context.dataflow.locale()[i](o)(s)},$z=TT("format"),jz=TT("timeFormat"),kT=TT("utcFormat"),zz=TT("timeParse"),Uz=TT("utcParse"),FT=new Date(2e3,0,1);function cN(i,s,o){return Number.isInteger(i)&&Number.isInteger(s)?(FT.setYear(2e3),FT.setMonth(i),FT.setDate(s),jz.call(this,FT,o)):""}function Fx(i,s,o,l){s[0].type!==T_&&(0,T.vU)("First argument to data functions must be a string literal.");const c=s[0].value,h=":"+c;if(!(0,T.nr)(h,l))try{l[h]=o.getData(c).tuplesRef()}catch(g){}}function Ya(i,s,o,l){if(s[0].type===T_)Wz(o,l,s[0].value);else for(i in o.scales)Wz(o,l,i)}function Wz(i,s,o){const l="%"+o;if(!(0,T.nr)(s,l))try{s[l]=i.scaleRef(o)}catch(c){}}function s0(i,s){let o;return(0,T.mf)(i)?i:(0,T.HD)(i)?(o=s.scales[i])&&o.value:void 0}function N5(i,s){return function(o,l,c){if(o){const h=s0(o,(c||this).context);return h&&h.path[i](l)}return s(l)}}const Gz=N5("area",function(i){return wT=new Hs,Um(i,yh),2*wT}),jG=N5("bounds",function(i){var s,o,l,c,h,g,y;if(Ju=xs=-(ss=Qu=1/0),t0=[],Um(i,Yc),o=t0.length){for(t0.sort(Ez),s=1,h=[l=t0[0]];s<o;++s)y5(l,(c=t0[s])[0])||y5(l,c[1])?(yi(l[0],c[1])>yi(l[0],l[1])&&(l[1]=c[1]),yi(c[0],l[1])>yi(l[0],l[1])&&(l[0]=c[0])):h.push(l=c);for(g=-1/0,s=0,l=h[o=h.length-1];s<=o;l=c,++s)(y=yi(l[1],(c=h[s])[0]))>g&&(g=y,ss=c[0],xs=l[1])}return t0=n0=null,ss===1/0||Qu===1/0?[[NaN,NaN],[NaN,NaN]]:[[ss,Qu],[xs,Ju]]}),zG=N5("centroid",function(i){N_=qo=DT=xT=ST=Ga=AT=MT=0,lN=new Hs,uN=new Hs,_5=new Hs,Um(i,sf);var s=+lN,o=+uN,l=+_5,c=rI(s,o,l);return c<jD&&(s=Ga,o=AT,l=MT,qo<$n&&(s=DT,o=xT,l=ST),(c=rI(s,o,l))<jD)?[NaN,NaN]:[Uu(o,s)*ws,su(l/c)*ws]});function P5(i,s,o){try{i[s].apply(i,["EXPRESSION"].concat([].slice.call(o)))}catch(l){i.warn(l)}return o[o.length-1]}function L5(i){const s=i/255;return s<=.03928?s/12.92:Math.pow((s+.055)/1.055,2.4)}function pN(i){const s=ts(i);return.2126*L5(s.r)+.7152*L5(s.g)+.0722*L5(s.b)}function qz(i,s){return i===s||i!=i&&s!=s||((0,T.kJ)(i)?!(!(0,T.kJ)(s)||i.length!==s.length)&&function(i,s){for(let o=0,l=i.length;o<l;++o)if(!qz(i[o],s[o]))return!1;return!0}(i,s):!(!(0,T.Kn)(i)||!(0,T.Kn)(s))&&gN(i,s))}function gN(i,s){for(const o in i)if(!qz(i[o],s[o]))return!1;return!0}function Yz(i){return s=>gN(i,s)}const Xz={};function B5(i){return(0,T.kJ)(i)||ArrayBuffer.isView(i)?i:null}function V5(i){return B5(i)||((0,T.HD)(i)?i:null)}const $5=i=>i.data;function j5(i,s){const o=uC.call(s,i);return o.root&&o.root.lookup||{}}const Kz=()=>"undefined"!=typeof window&&window||null,RT={random:()=>lr(),cumulativeNormal:ty,cumulativeLogNormal:xw,cumulativeUniform:Sw,densityNormal:Kh,densityLogNormal:Mg,densityUniform:Pv,quantileNormal:Iv,quantileLogNormal:Og,quantileUniform:bd,sampleNormal:jl,sampleLogNormal:ny,sampleUniform:Nv,isArray:T.kJ,isBoolean:T.jn,isDate:T.J_,isDefined:i=>void 0!==i,isNumber:T.hj,isObject:T.Kn,isRegExp:T.Kj,isString:T.HD,isTuple:Vh,isValid:i=>null!=i&&i==i,toBoolean:T.sw,toDate:T.ZU,toNumber:T.He,toString:T.BB,indexof:function(i,...s){return V5(i).indexOf(...s)},join:function(i,...s){return B5(i).join(...s)},lastindexof:function(i,...s){return V5(i).lastIndexOf(...s)},replace:function(i,s,o){return(0,T.mf)(o)&&(0,T.vU)("Function argument passed to replace."),String(i).replace(s,o)},reverse:function(i){return B5(i).slice().reverse()},slice:function(i,...s){return V5(i).slice(...s)},flush:T.yl,lerp:T.t7,merge:function(){const i=[].slice.call(arguments);return i.unshift({}),(0,T.l7)(...i)},pad:T.vk,peek:T.fj,pluck:function(i,s){const o=Xz[s]||(Xz[s]=(0,T.EP)(s));return(0,T.kJ)(i)?i.map(o):o(i)},span:T.yP,inrange:T.u5,truncate:T.$G,rgb:ts,lab:mp,hcl:vp,hsl:Yg,luminance:pN,contrast:function(i,s){const o=pN(i),l=pN(s);return(Math.max(o,l)+.05)/(Math.min(o,l)+.05)},sequence:Aa,format:$z,utcFormat:kT,utcParse:Uz,utcOffset:IS,utcSequence:Ji,timeFormat:jz,timeParse:zz,timeOffset:FS,timeSequence:A0,timeUnitSpecifier:TS,monthFormat:function(i){return cN.call(this,i,1,"%B")},monthAbbrevFormat:function(i){return cN.call(this,i,1,"%b")},dayFormat:function(i){return cN.call(this,0,2+i,"%A")},dayAbbrevFormat:function(i){return cN.call(this,0,2+i,"%a")},quarter:T.mS,utcquarter:T.N3,week:bf,utcweek:fi,dayofyear:sa,utcdayofyear:nn,warn:function(){return P5(this.context.dataflow,"warn",arguments)},info:function(){return P5(this.context.dataflow,"info",arguments)},debug:function(){return P5(this.context.dataflow,"debug",arguments)},extent:T.We,inScope:function(i){const s=this.context.group;let o=!1;if(s)for(;i;){if(i===s){o=!0;break}i=i.mark.group}return o},intersect:function(i,s,o){if(!i)return[];const[l,c]=i,h=(new $s).set(l[0],l[1],c[0],c[1]);return O2(o||this.context.dataflow.scenegraph().root,h,function(i){let s=null;if(i){const o=(0,T.IX)(i.marktype),l=(0,T.IX)(i.markname);s=c=>(!o.length||o.some(h=>c.marktype===h))&&(!l.length||l.some(h=>c.name===h))}return s}(s))},clampRange:T.l$,pinchDistance:function(i){const s=i.touches,o=s[0].clientX-s[1].clientX,l=s[0].clientY-s[1].clientY;return Math.sqrt(o*o+l*l)},pinchAngle:function(i){const s=i.touches;return Math.atan2(s[0].clientY-s[1].clientY,s[0].clientX-s[1].clientX)},screen:function(){const i=Kz();return i?i.screen:{}},containerSize:function(){const i=this.context.dataflow,s=i.container&&i.container();return s?[s.clientWidth,s.clientHeight]:[void 0,void 0]},windowSize:function(){const i=Kz();return i?[i.innerWidth,i.innerHeight]:[void 0,void 0]},bandspace:function(i,s,o){return Yf(i||0,s||0,o||0)},setdata:function(i,s){const o=this.context.dataflow;return o.pulse(this.context.data[i].input,o.changeset().remove(T.yb).insert(s)),1},pathShape:function(i){let s=null;return function(o){return o?bm(o,s=s||kp(i)):i}},panLinear:T.Dw,panLog:T.mJ,panPow:T.QA,panSymlog:T.Zw,zoomLinear:T.ay,zoomLog:T.dH,zoomPow:T.mK,zoomSymlog:T.bV,encode:function(i,s,o){if(i){const l=this.context.dataflow;l.pulse(i.mark.source,l.changeset().encode(i,s))}return void 0!==o?o:i},modify:function(i,s,o,l,c,h){const g=this.context.dataflow,y=this.context.data[i],v=y.input,C=g.stamp();let x,S,E=y.changes;if(!1===g._trigger||!(v.value.length||s||l))return 0;if((!E||E.stamp<C)&&(y.changes=E=g.changeset(),E.stamp=C,g.runAfter(()=>{y.modified=!0,g.pulse(v,E).run()},!0,1)),o&&(x=!0===o?T.yb:(0,T.kJ)(o)||Vh(o)?o:Yz(o),E.remove(x)),s&&E.insert(s),l&&(x=Yz(l),v.value.some(x)?E.remove(x):E.insert(l)),c)for(S in h)E.modify(c,S,h[S]);return 1}},Eq=["view","item","group","xy","x","y"],Qz="this.",z5={},Jz={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:i=>`_[${(0,T.m8)("$"+i)}]`,functions:function(i){const s=iN(i);Eq.forEach(o=>s[o]="event.vega."+o);for(const o in RT)s[o]=Qz+o;return(0,T.l7)(s,function(i,s,o){s.__bandwidth=c=>c&&c.bandwidth?c.bandwidth():0,o._bandwidth=Ya,o._range=Ya,o._scale=Ya;const l=c=>"_["+(c.type===T_?(0,T.m8)("%"+c.value):(0,T.m8)("%")+"+"+i(c))+"]";return{_bandwidth:c=>`this.__bandwidth(${l(c[0])})`,_range:c=>`${l(c[0])}.range()`,_scale:c=>`${l(c[0])}(${i(c[1])})`}}(i,RT,z5)),s},constants:sC,visitors:z5},U5=d5(Jz);function Do(i,s,o){return 1===arguments.length?RT[i]:(RT[i]=s,o&&(z5[i]=o),U5&&(U5.functions[i]=Qz+i),this)}function eg(i,s){const o={};let l;try{l=yz(i=(0,T.HD)(i)?i:(0,T.m8)(i)+"")}catch(h){(0,T.vU)("Expression parse error: "+i)}l.visit(h=>{if(h.type!==Xj)return;const g=h.callee.name,y=Jz.visitors[g];y&&y(g,h.arguments,s,o)});const c=U5(l);return c.globals.forEach(h=>{const g="$"+h;!(0,T.nr)(o,g)&&s.getSignal(h)&&(o[g]=s.signalRef(h))}),{$expr:(0,T.l7)({code:c.code},s.options.ast?{ast:l}:null),$fields:c.fields,$params:o}}Do("bandwidth",function(i,s){const o=s0(i,(s||this).context);return o&&o.bandwidth?o.bandwidth():0},Ya),Do("copy",function(i,s){const o=s0(i,(s||this).context);return o?o.copy():void 0},Ya),Do("domain",function(i,s){const o=s0(i,(s||this).context);return o?o.domain():[]},Ya),Do("range",function(i,s){const o=s0(i,(s||this).context);return o&&o.range?o.range():[]},Ya),Do("invert",function(i,s,o){const l=s0(i,(o||this).context);return l?(0,T.kJ)(s)?(l.invertRange||l.invert)(s):(l.invert||l.invertExtent)(s):void 0},Ya),Do("scale",function(i,s,o){const l=s0(i,(o||this).context);return l?l(s):void 0},Ya),Do("gradient",function(i,s,o,l,c){i=s0(i,(c||this).context);const h=vs(s,o);let g=i.domain(),y=g[0],v=(0,T.fj)(g),C=T.yR;return v-y?C=Ap(i,y,v):i=(i.interpolator?Ai("sequential")().interpolator(i.interpolator()):Ai("linear")().interpolate(i.interpolate()).range(i.range())).domain([y=0,v=1]),i.ticks&&(g=i.ticks(+l||15),y!==g[0]&&g.unshift(y),v!==(0,T.fj)(g)&&g.push(v)),g.forEach(E=>h.stop(C(E),i(E))),h},Ya),Do("geoArea",Gz,Ya),Do("geoBounds",jG,Ya),Do("geoCentroid",zG,Ya),Do("geoShape",function(i,s,o){const l=s0(i,(o||this).context);return function(c){return l?l.path.context(c)(s):""}},Ya),Do("indata",function(i,s,o){const l=this.context.data[i]["index:"+s],c=l?l.value.get(o):void 0;return c&&c.count},function(i,s,o,l){s[0].type!==T_&&(0,T.vU)("First argument to indata must be a string literal."),s[1].type!==T_&&(0,T.vU)("Second argument to indata must be a string literal.");const c=s[0].value,h=s[1].value,g="@"+h;(0,T.nr)(g,l)||(l[g]=o.getData(c).indataRef(o,h))}),Do("data",uC,Fx),Do("treePath",function(i,s,o){const l=j5(i,this),c=l[s],h=l[o];return c&&h?c.path(h).map($5):void 0},Fx),Do("treeAncestors",function(i,s){const o=j5(i,this)[s];return o?o.ancestors().map($5):void 0},Fx),Do("vlSelectionTest",function(i,s,o){for(var C,E,x,S,k,l=this.context.data[i],c=l?l.values.value:[],h=l?l[kx]&&l[kx].value:void 0,g=o===P_,y=c.length,v=0;v<y;++v)if(C=c[v],h&&g){if(-1===(x=(E=E||{})[S=C.unit]||0))continue;if(k=A5(s,C),E[S]=k?-1:++x,k&&1===h.size)return!0;if(!k&&x===h.get(S).count)return!1}else if(g^(k=A5(s,C)))return k;return y&&g},F5),Do("vlSelectionIdTest",function(i,s,o){const l=this.context.data[i],c=l?l.values.value:[],h=l?l[kx]&&l[kx].value:void 0,g=o===P_,y=M5(s),v=aC(c,y);if(v===c.length||M5(c[v])!==y)return!1;if(h&&g){if(1===h.size)return!0;if(lC(c,y)-v<h.size)return!1}return!0},F5),Do("vlSelectionResolve",function(i,s,o,l){for(var C,E,x,S,k,R,N,P,J,oe,c=this.context.data[i],h=c?c.values.value:[],g={},y={},v={},H=h.length,X=0;X<H;++X){for(S=(C=h[X]).unit,x=C.values,J=0,oe=(E=C.fields).length;J<oe;++J)N=(R=g[(k=E[J]).field]||(g[k.field]={}))[S]||(R[S]=[]),v[k.field]=P=k.type.charAt(0),R[S]=(0,T5[P+"_union"])(N,(0,T.IX)(x[J]));o&&(N=y[S]||(y[S]=[])).push((0,T.IX)(x).reduce((fe,te,Re)=>(fe[E[Re].field]=te,fe),{}))}return s=s||"union",Object.keys(g).forEach(fe=>{g[fe]=Object.keys(g[fe]).map(te=>g[fe][te]).reduce((te,Re)=>void 0===te?Re:T5[v[fe]+"_"+s](te,Re))}),h=Object.keys(y),o&&h.length&&(g[l?"vlPoint":"vlMulti"]="union"===s?{or:h.reduce((te,Re)=>(te.push(...y[Re]),te),[])}:{and:h.map(te=>({or:y[te]}))}),g},F5),Do("vlSelectionTuples",function(i,s){return i.map(o=>(0,T.l7)({values:s.fields.map(l=>(l.getter||(l.getter=(0,T.EP)(l.field)))(o.datum))},s))});const Aq=(0,T.Rg)(["rule"]),Zz=(0,T.Rg)(["group","image","rect"]);function H5(i){return(i+"").toLowerCase()}function NT(i,s,o){";"!==o[o.length-1]&&(o="return("+o+");");const l=Function(...s.concat(o));return i&&i.functions?l.bind(i.functions):l}var Fq={operator:(i,s)=>NT(i,["_"],s.code),parameter:(i,s)=>NT(i,["datum","_"],s.code),event:(i,s)=>NT(i,["event"],s.code),handler:(i,s)=>NT(i,["_","event"],"var datum=event.item&&event.item.datum;return ".concat(s.code,";")),encode:(i,s)=>{const{marktype:o,channels:l}=s;let c="var o=item,datum=o.datum,m=0,$;";for(const h in l){const g="o["+(0,T.m8)(h)+"]";c+="$=".concat(l[h].code,";if(").concat(g,"!==$)").concat(g,"=$,m=1;")}return c+=function(i,s){let o="";return Aq[s]||(i.x2&&(i.x?(Zz[s]&&(o+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),o+="o.width=o.x2-o.x;"):o+="o.x=o.x2-(o.width||0);"),i.xc&&(o+="o.x=o.xc-(o.width||0)/2;"),i.y2&&(i.y?(Zz[s]&&(o+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),o+="o.height=o.y2-o.y;"):o+="o.y=o.y2-(o.height||0);"),i.yc&&(o+="o.y=o.yc-(o.height||0)/2;")),o}(l,o),c+="return m;",NT(i,["item","_"],c)},codegen:{get(i){const s="[".concat(i.map(T.m8).join("]["),"]"),o=Function("_","return _".concat(s,";"));return o.path=s,o},comparator(i,s){let o;const c=Function("a","b","var u, v; return "+i.map((h,g)=>{const y=s[g];let v,C;return h.path?(v="a".concat(h.path),C="b".concat(h.path)):((o=o||{})["f"+g]=h,v="this.f".concat(g,"(a)"),C="this.f".concat(g,"(b)")),function(i,s,o,l){return"((u = ".concat(i,") < (v = ").concat(s,") || u == null) && v != null ? ").concat(o,"\n  : (u > v || v == null) && u != null ? ").concat(l,"\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ").concat(o,"\n  : v !== v && u === u ? ").concat(l," : ")}(v,C,-y,y)}).join("")+"0;");return o?c.bind(o):c}}};function e7(i,s,o){if(!i||!(0,T.Kn)(i))return i;for(let h,l=0,c=t7.length;l<c;++l)if(h=t7[l],(0,T.nr)(i,h.key))return h.parse(i,s,o);return i}var t7=[{key:"$ref",parse:function(i,s){return s.get(i.$ref)||(0,T.vU)("Operator not defined: "+i.$ref)}},{key:"$key",parse:function(i,s){const o="k:"+i.$key+"_"+!!i.$flat;return s.fn[o]||(s.fn[o]=(0,T.Jy)(i.$key,i.$flat,s.expr.codegen))}},{key:"$expr",parse:function(i,s,o){i.$params&&s.parseParameters(i.$params,o);const l="e:"+i.$expr.code+"_"+i.$name;return s.fn[l]||(s.fn[l]=(0,T.ZE)(s.parameterExpression(i.$expr),i.$fields,i.$name))}},{key:"$field",parse:function(i,s){if(!i.$field)return null;const o="f:"+i.$field+"_"+i.$name;return s.fn[o]||(s.fn[o]=(0,T.EP)(i.$field,i.$name,s.expr.codegen))}},{key:"$encode",parse:function(i,s){const o=i.$encode,l={};for(const c in o){const h=o[c];l[c]=(0,T.ZE)(s.encodeExpression(h.$expr),h.$fields),l[c].output=h.$output}return l}},{key:"$compare",parse:function(i,s){const o="c:"+i.$compare+"_"+i.$order,l=(0,T.IX)(i.$compare).map(c=>c&&c.$tupleid?bn:c);return s.fn[o]||(s.fn[o]=(0,T.qu)(l,i.$order,s.expr.codegen))}},{key:"$context",parse:function(i,s){return s}},{key:"$subflow",parse:function(i,s){const o=i.$subflow;return function(l,c,h){const g=s.fork().parse(o),y=g.get(o.operators[0].id),v=g.signals.parent;return v&&v.set(h),y.detachSubflow=()=>s.detach(g),y}}},{key:"$tupleid",parse:function(){return bn}}];const qq={skip:!0};function n7(i,s,o,l){return new i7(i,s,o,l)}function i7(i,s,o,l){this.dataflow=i,this.transforms=s,this.events=i.events.bind(i),this.expr=l||Fq,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},o&&(this.functions=Object.create(o),this.functions.context=this)}function r7(i){this.dataflow=i.dataflow,this.transforms=i.transforms,this.events=i.events,this.expr=i.expr,this.signals=Object.create(i.signals),this.scales=Object.create(i.scales),this.nodes=Object.create(i.nodes),this.data=Object.create(i.data),this.fn=Object.create(i.fn),i.functions&&(this.functions=Object.create(i.functions),this.functions.context=this)}function s7(i,s){i&&(null==s?i.removeAttribute("aria-label"):i.setAttribute("aria-label",s))}i7.prototype=r7.prototype={fork(){const i=new r7(this);return(this.subcontext||(this.subcontext=[])).push(i),i},detach(i){this.subcontext=this.subcontext.filter(o=>o!==i);const s=Object.keys(i.nodes);for(const o of s)i.nodes[o]._targets=null;for(const o of s)i.nodes[o].detach();i.nodes=null},get(i){return this.nodes[i]},set(i,s){return this.nodes[i]=s},add(i,s){const o=this,l=o.dataflow,c=i.value;if(o.set(i.id,s),function(i){return"collect"===H5(i)}(i.type)&&c&&(c.$ingest?l.ingest(s,c.$ingest,c.$format):c.$request?l.preload(s,c.$request,c.$format):l.pulse(s,l.changeset().insert(c))),i.root&&(o.root=s),i.parent){let h=o.get(i.parent.$ref);h?(l.connect(h,[s]),s.targets().add(h)):(o.unresolved=o.unresolved||[]).push(()=>{h=o.get(i.parent.$ref),l.connect(h,[s]),s.targets().add(h)})}if(i.signal&&(o.signals[i.signal]=s),i.scale&&(o.scales[i.scale]=s),i.data)for(const h in i.data){const g=o.data[h]||(o.data[h]={});i.data[h].forEach(y=>g[y]=s)}},resolve(){return(this.unresolved||[]).forEach(i=>i()),delete this.unresolved,this},operator(i,s){this.add(i,this.dataflow.add(i.value,s))},transform(i,s){this.add(i,this.dataflow.add(this.transforms[H5(s)]))},stream(i,s){this.set(i.id,s)},update(i,s,o,l,c){this.dataflow.on(s,o,l,c,i.options)},operatorExpression(i){return this.expr.operator(this,i)},parameterExpression(i){return this.expr.parameter(this,i)},eventExpression(i){return this.expr.event(this,i)},handlerExpression(i){return this.expr.handler(this,i)},encodeExpression(i){return this.expr.encode(this,i)},parse:function(i){const s=this,o=i.operators||[];return i.background&&(s.background=i.background),i.eventConfig&&(s.eventConfig=i.eventConfig),i.locale&&(s.locale=i.locale),o.forEach(l=>s.parseOperator(l)),o.forEach(l=>s.parseOperatorParameters(l)),(i.streams||[]).forEach(l=>s.parseStream(l)),(i.updates||[]).forEach(l=>s.parseUpdate(l)),s.resolve()},parseOperator:function(i){const s=this;!function(i){return"operator"===H5(i)}(i.type)&&i.type?s.transform(i,i.type):s.operator(i,i.update?s.operatorExpression(i.update):null)},parseOperatorParameters:function(i){const s=this;if(i.params){const o=s.get(i.id);o||(0,T.vU)("Invalid operator id: "+i.id),s.dataflow.connect(o,o.parameters(s.parseParameters(i.params),i.react,i.initonly))}},parseParameters:function(i,s){s=s||{};const o=this;for(const l in i){const c=i[l];s[l]=(0,T.kJ)(c)?c.map(h=>e7(h,o,s)):e7(c,o,s)}return s},parseStream:function(i){var c,s=this,o=null!=i.filter?s.eventExpression(i.filter):void 0,l=null!=i.stream?s.get(i.stream):void 0;i.source?l=s.events(i.source,i.type,o):i.merge&&(l=(c=i.merge.map(h=>s.get(h)))[0].merge.apply(c[0],c.slice(1))),i.between&&(c=i.between.map(h=>s.get(h)),l=l.between(c[0],c[1])),i.filter&&(l=l.filter(o)),null!=i.throttle&&(l=l.throttle(+i.throttle)),null!=i.debounce&&(l=l.debounce(+i.debounce)),null==l&&(0,T.vU)("Invalid stream definition: "+JSON.stringify(i)),i.consume&&l.consume(!0),s.stream(i,l)},parseUpdate:function(i){var c,s=this,o=(0,T.Kn)(o=i.source)?o.$ref:o,l=s.get(o),h=i.update,g=void 0;l||(0,T.vU)("Source not defined: "+i.source),c=i.target&&i.target.$expr?s.eventExpression(i.target.$expr):s.get(i.target),h&&h.$expr&&(h.$params&&(g=s.parseParameters(h.$params)),h=s.handlerExpression(h.$expr)),s.update(i,l,c,h,g)},getState:function(i){var s=this,o={};if(i.signals){var l=o.signals={};Object.keys(s.signals).forEach(h=>{const g=s.signals[h];i.signals(h,g)&&(l[h]=g.value)})}if(i.data){var c=o.data={};Object.keys(s.data).forEach(h=>{const g=s.data[h];i.data(h,g)&&(c[h]=g.input.value)})}return s.subcontext&&!1!==i.recurse&&(o.subcontext=s.subcontext.map(h=>h.getState(i))),o},setState:function(i){var s=this,o=s.dataflow,l=i.data,c=i.signals;Object.keys(c||{}).forEach(h=>{o.update(s.signals[h],c[h],qq)}),Object.keys(l||{}).forEach(h=>{o.pulse(s.data[h].input,o.changeset().remove(T.yb).insert(l[h]))}),(i.subcontext||[]).forEach((h,g)=>{const y=s.subcontext[g];y&&y.setState(h)})}};const bh="default";function Ss(i,s){const o=i.globalCursor()?"undefined"!=typeof document&&document.body:i.container();if(o)return null==s?o.style.removeProperty("cursor"):o.style.cursor=s}function PT(i,s){var o=i._runtime.data;return(0,T.nr)(o,s)||(0,T.vU)("Unrecognized data set: "+s),o[s]}function cC(i,s){zr(s)||(0,T.vU)("Second argument to changes must be a changeset.");const o=PT(this,i);return o.modified=!0,this.pulse(o.input,s)}function W5(i){var s=i.padding();return Math.max(0,i._viewWidth+s.left+s.right)}function c7(i){var s=i.padding();return Math.max(0,i._viewHeight+s.top+s.bottom)}function Ix(i){var s=i.padding(),o=i._origin;return[s.left+o[0],s.top+o[1]]}const mN={trap:!1};function Y5(i,s,o,l){i._eventListeners.push({type:o,sources:(0,T.IX)(s),handler:l})}function Rx(i,s,o){const l=i._eventConfig&&i._eventConfig[s];return!(!1===l||(0,T.Kn)(l)&&!l[o])||(i.warn(`Blocked ${s} ${o} event listener.`),!1)}function g7(i){return i.item}function yN(i){return i.item.mark.source}function m7(i){return function(s,o){return o.vega.view().changeset().encode(o.item,i)}}function Zu(i,s,o){const l=document.createElement(i);for(const c in s)l.setAttribute(c,s[c]);return null!=o&&(l.textContent=o),l}function iY(i,s,o){if(!s)return;const l=o.param;let c=o.state;return c||(c=o.state={elements:null,active:!1,set:null,update:g=>{g!=i.signal(l.signal)&&i.runAsync(null,()=>{c.source=!0,i.signal(l.signal,g)})}},l.debounce&&(c.update=(0,T.Ds)(l.debounce,c.update))),(null==l.input&&l.element?rY:_7)(c,s,l,i),c.active||(i.on(i._signals[l.signal],null,()=>{c.source?c.source=!1:c.set(i.signal(l.signal))}),c.active=!0),c}function rY(i,s,o,l){const c=o.event||"input",h=()=>i.update(s.value);l.signal(o.signal,s.value),s.addEventListener(c,h),Y5(l,s,c,h),i.set=g=>{s.value=g,s.dispatchEvent(function(i){return"undefined"!=typeof Event?new Event(i):{type:i}}(c))}}function _7(i,s,o,l){const c=l.signal(o.signal),h=Zu("div",{class:"vega-bind"}),g="radio"===o.input?h:h.appendChild(Zu("label"));g.appendChild(Zu("span",{class:"vega-bind-name"},o.name||o.signal)),s.appendChild(h);let y=v7;switch(o.input){case"checkbox":y=sY;break;case"select":y=Q5;break;case"radio":y=b7;break;case"range":y=C7}y(i,g,o,c)}function v7(i,s,o,l){const c=Zu("input");for(const h in o)"signal"!==h&&"element"!==h&&c.setAttribute("input"===h?"type":h,o[h]);c.setAttribute("name",o.signal),c.value=l,s.appendChild(c),c.addEventListener("input",()=>i.update(c.value)),i.elements=[c],i.set=h=>c.value=h}function sY(i,s,o,l){const c={type:"checkbox",name:o.signal};l&&(c.checked=!0);const h=Zu("input",c);s.appendChild(h),h.addEventListener("change",()=>i.update(h.checked)),i.elements=[h],i.set=g=>h.checked=!!g||null}function Q5(i,s,o,l){const c=Zu("select",{name:o.signal}),h=o.labels||[];o.options.forEach((g,y)=>{const v={value:g};LT(g,l)&&(v.selected=!0),c.appendChild(Zu("option",v,(h[y]||g)+""))}),s.appendChild(c),c.addEventListener("change",()=>{i.update(o.options[c.selectedIndex])}),i.elements=[c],i.set=g=>{for(let y=0,v=o.options.length;y<v;++y)if(LT(o.options[y],g))return void(c.selectedIndex=y)}}function b7(i,s,o,l){const c=Zu("span",{class:"vega-bind-radio"}),h=o.labels||[];s.appendChild(c),i.elements=o.options.map((g,y)=>{const v={type:"radio",name:o.signal,value:g};LT(g,l)&&(v.checked=!0);const C=Zu("input",v);C.addEventListener("change",()=>i.update(g));const E=Zu("label",{},(h[y]||g)+"");return E.prepend(C),c.appendChild(E),C}),i.set=g=>{const y=i.elements,v=y.length;for(let C=0;C<v;++C)LT(y[C].value,g)&&(y[C].checked=!0)}}function C7(i,s,o,l){l=void 0!==l?l:(+o.max+ +o.min)/2;const c=null!=o.max?o.max:Math.max(100,+l)||100,h=o.min||Math.min(0,c,+l)||0,g=o.step||At(h,c,100),y=Zu("input",{type:"range",name:o.signal,min:h,max:c,step:g});y.value=l;const v=Zu("span",{},+l);s.appendChild(y),s.appendChild(v);const C=()=>{v.textContent=y.value,i.update(+y.value)};y.addEventListener("input",C),y.addEventListener("change",C),i.elements=[y],i.set=E=>{y.value=E,v.textContent=E}}function LT(i,s){return i===s||i+""==s+""}function J5(i,s,o,l,c,h){return(s=s||new l(i.loader())).initialize(o,W5(i),c7(i),Ix(i),c,h).background(i.background())}function _N(i,s){return s?function(){try{s.apply(this,arguments)}catch(o){i.error(o)}}:null}function BT(i,s,o){if("string"==typeof s){if("undefined"==typeof document)return i.error("DOM document instance not found."),null;if(!(s=document.querySelector(s)))return i.error("Signal bind element not found: "+s),null}if(s&&o)try{s.innerHTML=""}catch(l){s=null,i.error(l)}return s}const dC=i=>+i||0;function Z5(i){return(0,T.Kn)(i)?{top:dC(i.top),bottom:dC(i.bottom),left:dC(i.left),right:dC(i.right)}:(i=>({top:i,bottom:i,left:i,right:i}))(dC(i))}function vN(i,s,o,l){return bN.apply(this,arguments)}function bN(){return(bN=Kt(function*(i,s,o,l){const c=w1(s),h=c&&c.headless;return h||(0,T.vU)("Unrecognized renderer type: "+s),yield i.runAsync(),J5(i,null,null,h,o,l).renderAsync(i._scenegraph.root)})).apply(this,arguments)}function e8(){return(e8=Kt(function*(i,s){i!==sh.Canvas&&i!==sh.SVG&&i!==sh.PNG&&(0,T.vU)("Unrecognized image type: "+i);const o=yield vN(this,i,s);return i===sh.SVG?oY(o.svg(),"image/svg+xml"):o.canvas().toDataURL("image/png")})).apply(this,arguments)}function oY(i,s){const o=new Blob([i],{type:s});return window.URL.createObjectURL(o)}function wN(){return(wN=Kt(function*(i,s){return(yield vN(this,sh.Canvas,i,s)).canvas()})).apply(this,arguments)}function EN(){return(EN=Kt(function*(i){return(yield vN(this,sh.SVG,i)).svg()})).apply(this,arguments)}var VT="padding",DN={skip:!0};function xN(i,s){var o=i.autosize(),l=i.padding();return s-(o&&o.contains===VT?l.left+l.right:0)}function t8(i,s){var o=i.autosize(),l=i.padding();return s-(o&&o.contains===VT?l.top+l.bottom:0)}function r8(i,s){return s.modified&&(0,T.kJ)(s.input.value)&&i.indexOf("_:vega:_")}function O7(i,s){return!("parent"===i||s instanceof Dg.proxy)}function uY(i,s,o,l){const c=i.element();c&&c.setAttribute("title",function(i){return null==i?"":(0,T.kJ)(i)?B_(i):(0,T.Kn)(i)&&!(0,T.J_)(i)?function(i){return Object.keys(i).map(s=>{const o=i[s];return s+": "+((0,T.kJ)(o)?B_(o):T7(o))}).join("\n")}(i):i+""}(l))}function B_(i){return"["+i.map(T7).join(", ")+"]"}function T7(i){return(0,T.kJ)(i)?"[\u2026]":(0,T.Kn)(i)&&!(0,T.J_)(i)?"{\u2026}":i}function SN(i,s){const o=this;if(s=s||{},gd.call(o),s.loader&&o.loader(s.loader),s.logger&&o.logger(s.logger),null!=s.logLevel&&o.logLevel(s.logLevel),s.locale||i.locale){const h=(0,T.l7)({},i.locale,s.locale);o.locale(US(h.number,h.time))}o._el=null,o._elBind=null,o._renderType=s.renderer||sh.Canvas,o._scenegraph=new $M;const l=o._scenegraph.root;o._renderer=null,o._tooltip=s.tooltip||uY,o._redraw=!0,o._handler=(new w).scene(l),o._globalCursor=!1,o._preventDefault=!1,o._timers=[],o._eventListeners=[],o._resizeListeners=[],o._eventConfig=function(i){const s=(0,T.l7)({defaults:{}},i),o=(l,c)=>{c.forEach(h=>{(0,T.kJ)(l[h])&&(l[h]=(0,T.Rg)(l[h]))})};return o(s.defaults,["prevent","allow"]),o(s,["view","window","selector"]),s}(i.eventConfig),o.globalCursor(o._eventConfig.globalCursor);const c=function(i,s,o){return n7(i,Dg,RT,o).parse(s)}(o,i,s.expr);o._runtime=c,o._signals=c.signals,o._bind=(i.bindings||[]).map(h=>({state:null,param:(0,T.l7)({},h)})),c.root&&c.root.set(l),l.source=c.data.root.input,o.pulse(c.data.root.input,o.changeset().insert(l.items)),o._width=o.width(),o._height=o.height(),o._viewWidth=xN(o,o._width),o._viewHeight=t8(o,o._height),o._origin=[0,0],o._resize=0,o._autosize=1,function(i){var s=i._signals,o=s.width,l=s.height,c=s[VT];function h(){i._autosize=i._resize=1}i._resizeWidth=i.add(null,y=>{i._width=y.size,i._viewWidth=xN(i,y.size),h()},{size:o}),i._resizeHeight=i.add(null,y=>{i._height=y.size,i._viewHeight=t8(i,y.size),h()},{size:l});const g=i.add(null,h,{pad:c});i._resizeWidth.rank=o.rank+1,i._resizeHeight.rank=l.rank+1,g.rank=c.rank+1}(o),function(i){i.add(null,s=>(i._background=s.bg,i._resize=1,s.bg),{bg:i._signals.background})}(o),function(i){const s=i._signals.cursor||(i._signals.cursor=i.add({user:bh,item:null}));i.on(i.events("view","mousemove"),s,(o,l)=>{const c=s.value,h=c?(0,T.HD)(c)?c:c.user:bh,g=l.item&&l.item.cursor||null;return c&&h===c.user&&g==c.item?c:{user:h,item:g}}),i.add(null,function(o){let l=o.cursor,c=this.value;return(0,T.HD)(l)||(c=l.item,l=l.user),Ss(i,l&&l!==bh?l:c||l),c},{cursor:s})}(o),o.description(i.description),s.hover&&o.hover(),s.container&&o.initialize(s.container,s.bind)}function Nx(i,s){return(0,T.nr)(i._signals,s)?i._signals[s]:(0,T.vU)("Unrecognized signal name: "+(0,T.m8)(s))}function jT(i,s){const o=(i._targets||[]).filter(l=>l._update&&l._update.handler===s);return o.length?o[0]:null}function AN(i,s,o,l){let c=jT(o,l);return c||(c=_N(i,()=>l(s,o.value)),c.handler=l,i.on(o,null,c)),i}function k7(i,s,o){const l=jT(s,o);return l&&s._targets.remove(l),i}(0,T.XW)(SN,gd,{evaluate(i,s,o){var l=this;return Kt(function*(){if(yield gd.prototype.evaluate.call(l,i,s),l._redraw||l._resize)try{l._renderer&&(l._resize&&(l._resize=0,function(i){var s=Ix(i),o=W5(i),l=c7(i);i._renderer.background(i.background()),i._renderer.resize(o,l,s),i._handler.origin(s),i._resizeListeners.forEach(c=>{try{c(o,l)}catch(h){i.error(h)}})}(l)),yield l._renderer.renderAsync(l._scenegraph.root)),l._redraw=!1}catch(c){l.error(c)}return o&&go(l,o),l})()},dirty(i){this._redraw=!0,this._renderer&&this._renderer.dirty(i)},description(i){if(arguments.length){const s=null!=i?i+"":null;return s!==this._desc&&s7(this._el,this._desc=s),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(i,s,o){const l=Nx(this,i);return 1===arguments.length?l.value:this.update(l,s,o)},width(i){return arguments.length?this.signal("width",i):this.signal("width")},height(i){return arguments.length?this.signal("height",i):this.signal("height")},padding(i){return arguments.length?this.signal("padding",Z5(i)):Z5(this.signal("padding"))},autosize(i){return arguments.length?this.signal("autosize",i):this.signal("autosize")},background(i){return arguments.length?this.signal("background",i):this.signal("background")},renderer(i){return arguments.length?(w1(i)||(0,T.vU)("Unrecognized renderer type: "+i),i!==this._renderType&&(this._renderType=i,this._resetRenderer()),this):this._renderType},tooltip(i){return arguments.length?(i!==this._tooltip&&(this._tooltip=i,this._resetRenderer()),this):this._tooltip},loader(i){return arguments.length?(i!==this._loader&&(gd.prototype.loader.call(this,i),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(Nx(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function(i,s,o,l,c,h){this.runAfter(g=>{let y=0;g._autosize=0,g.width()!==o&&(y=1,g.signal("width",o,DN),g._resizeWidth.skip(!0)),g.height()!==l&&(y=1,g.signal("height",l,DN),g._resizeHeight.skip(!0)),g._viewWidth!==i&&(g._resize=1,g._viewWidth=i),g._viewHeight!==s&&(g._resize=1,g._viewHeight=s),(g._origin[0]!==c[0]||g._origin[1]!==c[1])&&(g._resize=1,g._origin=c),y&&g.run("enter"),h&&g.runAfter(v=>v.resize())},!1,1)},addEventListener(i,s,o){let l=s;return o&&!1===o.trap||(l=_N(this,s),l.raw=s),this._handler.on(i,l),this},removeEventListener(i,s){for(var c,h,o=this._handler.handlers(i),l=o.length;--l>=0;)if(c=o[l].handler,i===(h=o[l].type)&&(s===c||s===c.raw)){this._handler.off(h,c);break}return this},addResizeListener(i){const s=this._resizeListeners;return s.indexOf(i)<0&&s.push(i),this},removeResizeListener(i){var s=this._resizeListeners,o=s.indexOf(i);return o>=0&&s.splice(o,1),this},addSignalListener(i,s){return AN(this,i,Nx(this,i),s)},removeSignalListener(i,s){return k7(this,Nx(this,i),s)},addDataListener(i,s){return AN(this,i,PT(this,i).values,s)},removeDataListener(i,s){return k7(this,PT(this,i).values,s)},globalCursor(i){if(arguments.length){if(this._globalCursor!==!!i){const s=Ss(this,null);this._globalCursor=!!i,s&&Ss(this,s)}return this}return this._globalCursor},preventDefault(i){return arguments.length?(this._preventDefault=i,this):this._preventDefault},timer:function(i,s){this._timers.push(function(i,s,o){var l=new ZI,c=s;return null==s?(l.restart(i,s,o),l):(l._restart=l.restart,l.restart=function(h,g,y){g=+g,y=null==y?W1():+y,l._restart(function v(C){C+=c,l._restart(v,c+=g,y),h(C)},g,y)},l.restart(i,s,o),l)}(function(l){i({timestamp:Date.now(),elapsed:l})},s))},events:function(i,s,o){var g,l=this,c=new lc(o),h=function(C,E){l.runAsync(null,()=>{"view"===i&&function(i,s){var o=i._eventConfig.defaults,l=o.prevent,c=o.allow;return!1!==l&&!0!==c&&(!0===l||!1===c||(l?l[s]:c?!c[s]:i.preventDefault()))}(l,s)&&C.preventDefault(),c.receive(function(i,s,o){var h,y,l=i._renderer,c=l&&l.canvas();return c&&(y=Ix(i),(h=m1(s.changedTouches?s.changedTouches[0]:s,c))[0]-=y[0],h[1]-=y[1]),s.dataflow=i,s.item=o,s.vega=function(i,s,o){const l=s?"group"===s.mark.marktype?s:s.mark.group:null;function c(g){var v,y=l;if(g)for(v=s;v;v=v.mark.group)if(v.mark.name===g){y=v;break}return y&&y.mark&&y.mark.interactive?y:{}}function h(g){if(!g)return o;(0,T.HD)(g)&&(g=c(g));const y=o.slice();for(;g;)y[0]-=g.x||0,y[1]-=g.y||0,g=g.mark&&g.mark.group;return y}return{view:(0,T.a9)(i),item:(0,T.a9)(s||{}),group:c,xy:h,x:g=>h(g)[0],y:g=>h(g)[1]}}(i,o,h),s}(l,C,E))})};if("timer"===i)Rx(l,"timer",s)&&l.timer(h,s);else if("view"===i)Rx(l,"view",s)&&l.addEventListener(s,h,mN);else if("window"===i?Rx(l,"window",s)&&"undefined"!=typeof window&&(g=[window]):"undefined"!=typeof document&&Rx(l,"selector",s)&&(g=document.querySelectorAll(i)),g){for(var y=0,v=g.length;y<v;++y)g[y].addEventListener(s,h);Y5(l,g,s,h)}else l.warn("Can not resolve event source: "+i);return c},finalize:function(){var l,c,h,i=this._tooltip,s=this._timers,o=this._eventListeners;for(l=s.length;--l>=0;)s[l].stop();for(l=o.length;--l>=0;)for(c=(h=o[l]).sources.length;--c>=0;)h.sources[c].removeEventListener(h.type,h.handler);return i&&i.call(this,this._handler,null,null,null),this},hover:function(i,s){return s=[s||"update",(i=[i||"hover"])[0]],this.on(this.events("view","mouseover",g7),yN,m7(i)),this.on(this.events("view","mouseout",g7),yN,m7(s)),this},data:function(i,s){return arguments.length<2?PT(this,i).values.value:cC.call(this,i,sl().remove(T.yb).insert(s))},change:cC,insert:function(i,s){return cC.call(this,i,sl().insert(s))},remove:function(i,s){return cC.call(this,i,sl().remove(s))},scale:function(i){var s=this._runtime.scales;return(0,T.nr)(s,i)||(0,T.vU)("Unrecognized scale or projection: "+i),s[i].value},initialize:function(i,s){const o=this,l=o._renderType,c=o._eventConfig.bind,h=w1(l);i=o._el=i?BT(o,i,!0):null,function(i){const s=i.container();s&&(s.setAttribute("role","graphics-document"),s.setAttribute("aria-roleDescription","visualization"),s7(s,i.description()))}(o),h||o.error("Unrecognized renderer type: "+l);const g=h.handler||w,y=i?h.renderer:h.headless;return o._renderer=y?J5(o,o._renderer,i,y):null,o._handler=function(i,s,o,l){const c=new l(i.loader(),_N(i,i.tooltip())).scene(i.scenegraph().root).initialize(o,Ix(i),i);return s&&s.handlers().forEach(h=>{c.on(h.type,h.handler)}),c}(o,o._handler,i,g),o._redraw=!0,i&&"none"!==c&&(s=s?o._elBind=BT(o,s,!0):i.appendChild(Zu("form",{class:"vega-bindings"})),o._bind.forEach(v=>{v.param.element&&"container"!==c&&(v.element=BT(o,v.param.element,!!v.param.input))}),o._bind.forEach(v=>{iY(o,v.element||s,v)})),o},toImageURL:function(i,s){return e8.apply(this,arguments)},toCanvas:function(i,s){return wN.apply(this,arguments)},toSVG:function(i){return EN.apply(this,arguments)},getState:function(i){return this._runtime.getState(i||{data:r8,signals:O7,recurse:!0})},setState:function(i){return this.runAsync(null,s=>{s._trigger=!1,s._runtime.setState(i)},s=>{s._trigger=!0}),this}});const Xc=/[[\]{}]/,cY={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let of,I7;function c8(i,s,o){return of=s||"view",I7=o||cY,R7(i.trim()).map(UT)}function Lx(i,s,o,l,c){const h=i.length;let y,g=0;for(;s<h;++s){if(y=i[s],!g&&y===o)return s;c&&c.indexOf(y)>=0?--g:l&&l.indexOf(y)>=0&&++g}return s}function R7(i){const s=[],o=i.length;let l=0,c=0;for(;c<o;)c=Lx(i,c,",","[{","]}"),s.push(i.substring(l,c).trim()),l=++c;if(0===s.length)throw"Empty event selector: "+i;return s}function UT(i){return"["===i[0]?function(i){const s=i.length;let l,o=1;if(o=Lx(i,o,"]","[","]"),o===s)throw"Empty between selector: "+i;if(l=R7(i.substring(1,o)),2!==l.length)throw"Between selector must have two elements: "+i;if(">"!==(i=i.slice(o+1).trim())[0])throw"Expected '>' after between selector: "+i;l=l.map(UT);const c=UT(i.slice(1).trim());return c.between?{between:l,stream:c}:(c.between=l,c)}(i):function(i){const s={source:of},o=[];let v,C,l=[0,0],c=0,h=0,g=i.length,y=0;if("}"===i[g-1]){if(y=i.lastIndexOf("{"),!(y>=0))throw"Unmatched right brace: "+i;try{l=function(i){const s=i.split(",");if(!i.length||s.length>2)throw i;return s.map(o=>{const l=+o;if(l!=l)throw i;return l})}(i.substring(y+1,g-1))}catch(E){throw"Invalid throttle specification: "+i}g=(i=i.slice(0,y).trim()).length,y=0}if(!g)throw i;if("@"===i[0]&&(c=++y),v=Lx(i,y,":"),v<g&&(o.push(i.substring(h,v).trim()),h=y=++v),y=Lx(i,y,"["),y===g)o.push(i.substring(h,g).trim());else if(o.push(i.substring(h,y).trim()),C=[],h=++y,h===g)throw"Unmatched left bracket: "+i;for(;y<g;){if(y=Lx(i,y,"]"),y===g)throw"Unmatched left bracket: "+i;if(C.push(i.substring(h,y).trim()),y<g-1&&"["!==i[++y])throw"Expected left bracket: "+i;h=++y}if(!(g=o.length)||Xc.test(o[g-1]))throw"Invalid event selector: "+i;return g>1?(s.type=o[1],c?s.markname=o[0].slice(1):function(i){return I7[i]}(o[0])?s.marktype=o[0]:s.source=o[0]):s.type=o[0],"!"===s.type.slice(-1)&&(s.consume=!0,s.type=s.type.slice(0,-1)),null!=C&&(s.filter=C),l[0]&&(s.throttle=l[0]),l[1]&&(s.debounce=l[1]),s}(i)}function f8(i){return(0,T.Kn)(i)?i:{type:i||"pad"}}const V_=i=>+i||0;function h8(i){return(0,T.Kn)(i)?i.signal?i:{top:V_(i.top),bottom:V_(i.bottom),left:V_(i.left),right:V_(i.right)}:(i=>({top:i,bottom:i,left:i,right:i}))(V_(i))}const oo=i=>(0,T.Kn)(i)&&!(0,T.kJ)(i)?(0,T.l7)({},i):{value:i};function HT(i,s,o,l){return null!=o?((0,T.Kn)(o)&&!(0,T.kJ)(o)||(0,T.kJ)(o)&&o.length&&(0,T.Kn)(o[0])?i.update[s]=o:i[l||"enter"][s]={value:o},1):0}function xo(i,s,o){for(const l in s)HT(i,l,s[l]);for(const l in o)HT(i,l,o[l],"update")}function Ko(i,s,o){for(const l in s)o&&(0,T.nr)(o,l)||(i[l]=(0,T.l7)(i[l]||{},s[l]));return i}function $_(i,s){return s&&(s.enter&&s.enter[i]||s.update&&s.update[i])}const Bx="mark",p8="frame",Vx="scope",WT="legend-label";function IN(i,s,o){i[s]=o&&o.signal?{signal:o.signal}:{value:o}}const GT=i=>(0,T.HD)(i)?(0,T.m8)(i):i.signal?`(${i.signal})`:NN(i);function z_(i){if(null!=i.gradient)return function(i){const s=[i.start,i.stop,i.count].map(o=>null==o?null:(0,T.m8)(o));for(;s.length&&null==(0,T.fj)(s);)s.pop();return s.unshift(GT(i.gradient)),`gradient(${s.join(",")})`}(i);let s=i.signal?`(${i.signal})`:i.color?function(i){return i.c?RN("hcl",i.h,i.c,i.l):i.h||i.s?RN("hsl",i.h,i.s,i.l):i.l||i.a?RN("lab",i.l,i.a,i.b):i.r||i.g||i.b?RN("rgb",i.r,i.g,i.b):null}(i.color):null!=i.field?NN(i.field):void 0!==i.value?(0,T.m8)(i.value):void 0;return null!=i.scale&&(s=function(i,s){const o=GT(i.scale);return null!=i.range?s=`lerp(_range(${o}), ${+i.range})`:(void 0!==s&&(s=`_scale(${o}, ${s})`),i.band&&(s=(s?s+"+":"")+`_bandwidth(${o})`+(1==+i.band?"":"*"+U_(i.band)),i.extra&&(s=`(datum.extra ? _scale(${o}, datum.extra.value) : ${s})`)),null==s&&(s="0")),s}(i,s)),void 0===s&&(s=null),null!=i.exponent&&(s=`pow(${s},${U_(i.exponent)})`),null!=i.mult&&(s+=`*${U_(i.mult)}`),null!=i.offset&&(s+=`+${U_(i.offset)}`),i.round&&(s=`round(${s})`),s}const RN=(i,s,o,l)=>`(${i}(${[s,o,l].map(z_).join(",")})+'')`;function U_(i){return(0,T.Kn)(i)?"("+z_(i)+")":i}function NN(i){return YT((0,T.Kn)(i)?i:{datum:i})}function YT(i){let s,o,l;if(i.signal)s="datum",l=i.signal;else if(i.group||i.parent){for(o=Math.max(1,i.level||1),s="item";o-- >0;)s+=".mark.group";i.parent?(l=i.parent,s+=".datum"):l=i.group}else i.datum?(s="datum",l=i.datum):(0,T.vU)("Invalid field reference: "+(0,T.m8)(i));return i.signal||(l=(0,T.HD)(l)?(0,T._k)(l).map(T.m8).join("]["):YT(l)),s+"["+l+"]"}function $x(i,s,o,l,c,h){const g={};(h=h||{}).encoders={$encode:g},i=function(i,s,o,l,c){const h={},g={};let y,v,C,E;for(v in v="lineBreak","text"===s&&null!=c[v]&&!$_(v,i)&&IN(h,v,c[v]),("legend"==o||String(o).startsWith("axis"))&&(o=null),E=o===p8?c.group:o===Bx?(0,T.l7)({},c.mark,c[s]):null,E)C=$_(v,i)||("fill"===v||"stroke"===v)&&($_("fill",i)||$_("stroke",i)),C||IN(h,v,E[v]);for(v in(0,T.IX)(l).forEach(x=>{const S=c.style&&c.style[x];for(const k in S)$_(k,i)||IN(h,k,S[k])}),i=(0,T.l7)({},i),h)E=h[v],E.signal?(y=y||{})[v]=E:g[v]=E;return i.enter=(0,T.l7)(g,i.enter),y&&(i.update=(0,T.l7)(y,i.update)),i}(i,s,o,l,c.config);for(const y in i)g[y]=B7(i[y],s,h,c);return h}function B7(i,s,o,l){const c={},h={};for(const g in i)null!=i[g]&&(c[g]=C8(pC(i[g]),l,o,h));return{$expr:{marktype:s,channels:c},$fields:Object.keys(h),$output:Object.keys(i)}}function pC(i){return(0,T.kJ)(i)?function(i){let s="";return i.forEach(o=>{const l=z_(o);s+=o.test?`(${o.test})?${l}:`:l}),":"===(0,T.fj)(s)&&(s+="null"),s}(i):z_(i)}function C8(i,s,o,l){const c=eg(i,s);return c.$fields.forEach(h=>l[h]=1),(0,T.l7)(o,c.$params),c.$expr}const w8=["value","update","init","react","bind"];function LN(i,s){(0,T.vU)(i+' for "outer" push: '+(0,T.m8)(s))}function af(i,s){const o=i.name;if("outer"===i.push)s.signals[o]||LN("No prior signal definition",o),w8.forEach(l=>{void 0!==i[l]&&LN("Invalid property ",l)});else{const l=s.addSignal(o,i.value);!1===i.react&&(l.react=!1),i.bind&&s.addBinding(o,i.bind)}}function ng(i,s,o,l){this.id=-1,this.type=i,this.value=s,this.params=o,l&&(this.parent=l)}function c0(i,s,o,l){return new ng(i,s,o,l)}function XT(i,s){return c0("operator",i,s)}function Tn(i){const s={$ref:i.id};return i.id<0&&(i.refs=i.refs||[]).push(s),s}function gC(i,s){return s?{$field:i,$name:s}:{$field:i}}const mC=gC("key");function jx(i,s){return{$compare:i,$order:s}}function zx(i,s){return(i&&i.signal?"$"+i.signal:i||"")+(i&&s?"_":"")+(s&&s.signal?"$"+s.signal:s||"")}const Ml="scope",Ux="view";function As(i){return i&&i.signal}function KT(i){if(As(i))return!0;if((0,T.Kn)(i))for(const s in i)if(KT(i[s]))return!0;return!1}function lf(i,s){return null!=i?i:s}function wh(i){return i&&i.signal||i}function yC(i,s){return(i.merge?z7:i.stream?VN:i.type?x8:(0,T.vU)("Invalid stream specification: "+(0,T.m8)(i)))(i,s)}function z7(i,s){const l=$N({merge:i.merge.map(c=>yC(c,s))},i,s);return s.addStream(l).id}function VN(i,s){const l=$N({stream:yC(i.stream,s)},i,s);return s.addStream(l).id}function x8(i,s){let o;"timer"===i.type?(o=s.event("timer",i.throttle),i={between:i.between,filter:i.filter}):o=s.event(function(i){return i===Ml?Ux:i||Ux}(i.source),i.type);const l=$N({stream:o},i,s);return 1===Object.keys(l).length?o:s.addStream(l).id}function $N(i,s,o){let l=s.between;return l&&(2!==l.length&&(0,T.vU)('Stream "between" parameter must have 2 entries: '+(0,T.m8)(s)),i.between=[yC(l[0],o),yC(l[1],o)]),l=s.filter?[].concat(s.filter):[],(s.marktype||s.markname||s.markrole)&&l.push(function(i,s,o){const l="event.item";return l+(i&&"*"!==i?"&&"+l+".mark.marktype==='"+i+"'":"")+(o?"&&"+l+".mark.role==='"+o+"'":"")+(s?"&&"+l+".mark.name==='"+s+"'":"")}(s.marktype,s.markname,s.markrole)),s.source===Ml&&l.push("inScope(event.item)"),l.length&&(i.filter=eg("("+l.join(")&&(")+")",o).$expr),null!=(l=s.throttle)&&(i.throttle=+l),null!=(l=s.debounce)&&(i.debounce=+l),s.consume&&(i.consume=!0),i}const H7={code:"_.$value",ast:{type:"Identifier",value:"value"}};function QT(i){return{signal:"["+i.map(s=>s.scale?'scale("'+s.scale+'")':s.signal)+"]"}}const Gi=i=>(s,o,l)=>c0(i,o,s||void 0,l),JT=Gi("aggregate"),jN=Gi("axisticks"),Wx=Gi("bound"),uf=Gi("collect"),S8=Gi("compare"),Y7=Gi("datajoin"),A8=Gi("encode"),X7=Gi("expression"),zN=Gi("facet"),K7=Gi("field"),ZT=Gi("key"),UN=Gi("legendentries"),ek=Gi("load"),Q7=Gi("mark"),M8=Gi("multiextent"),J7=Gi("multivalues"),gY=Gi("overlap"),HN=Gi("params"),Z7=Gi("prefacet"),e9=Gi("projection"),mY=Gi("proxy"),t9=Gi("relay"),O8=Gi("render"),T8=Gi("scale"),ig=Gi("sieve"),k8=Gi("sortitems"),F8=Gi("viewlayout"),n9=Gi("values");let i9=0;const I8={min:"min",max:"max",count:"sum"};function R8(i,s){const o=s.getScale(i.name).params;let l;for(l in o.domain=N8(i.domain,i,s),null!=i.range&&(o.range=B8(i,s,o)),null!=i.interpolate&&function(i,s){s.interpolate=Kc(i.type||i),null!=i.gamma&&(s.interpolateGamma=Kc(i.gamma))}(i.interpolate,o),null!=i.nice&&(o.nice=function(i){return(0,T.Kn)(i)?{interval:Kc(i.interval),step:Kc(i.step)}:Kc(i)}(i.nice)),null!=i.bins&&(o.bins=function(i,s){return i.signal||(0,T.kJ)(i)?tk(i,s):s.objectProperty(i)}(i.bins,s)),i)(0,T.nr)(o,l)||"name"===l||(o[l]=Kc(i[l],s))}function Kc(i,s){return(0,T.Kn)(i)?i.signal?s.signalRef(i.signal):(0,T.vU)("Unsupported object: "+(0,T.m8)(i)):i}function tk(i,s){return i.signal?s.signalRef(i.signal):i.map(o=>Kc(o,s))}function Gx(i){(0,T.vU)("Can not find data set: "+(0,T.m8)(i))}function N8(i,s,o){if(i)return i.signal?o.signalRef(i.signal):((0,T.kJ)(i)?P8:i.fields?s9:L8)(i,s,o);(null!=s.domainMin||null!=s.domainMax)&&(0,T.vU)("No scale domain defined for domainMin/domainMax to override.")}function P8(i,s,o){return i.map(l=>Kc(l,o))}function L8(i,s,o){const l=o.getData(i.data);return l||Gx(i.data),dm(s.type)?l.valuesRef(o,i.field,WN(i.sort,!1)):fm(s.type)?l.domainRef(o,i.field):l.extentRef(o,i.field)}function s9(i,s,o){const l=i.data,c=i.fields.reduce((h,g)=>(g=(0,T.HD)(g)?{data:l,field:g}:(0,T.kJ)(g)||g.signal?function(i,s){const o="_:vega:_"+i9++,l=uf({});if((0,T.kJ)(i))l.value={$ingest:i};else if(i.signal){const c="setdata("+(0,T.m8)(o)+","+i.signal+")";l.params.input=s.signalRef(c)}return s.addDataPipeline(o,[l,ig({})]),{data:o,field:"data"}}(g,o):g,h.push(g),h),[]);return(dm(s.type)?a9:fm(s.type)?l9:Qc)(i,o,c)}function a9(i,s,o){const l=WN(i.sort,!0);let c,h;const g=o.map(C=>{const E=s.getData(C.data);return E||Gx(C.data),E.countsRef(s,C.field,l)}),y={groupby:mC,pulse:g};l&&(c=l.op||"count",h=l.field?zx(c,l.field):"count",y.ops=[I8[c]],y.fields=[s.fieldRef(h)],y.as=[h]),c=s.add(JT(y));const v=s.add(uf({pulse:Tn(c)}));return h=s.add(n9({field:mC,sort:s.sortRef(l),pulse:Tn(v)})),Tn(h)}function WN(i,s){return i&&(i.field||i.op?i.field||"count"===i.op?s&&i.field&&i.op&&!I8[i.op]&&(0,T.vU)("Multiple domain scales can not be sorted using "+i.op):(0,T.vU)("No field provided for sort aggregate op: "+i.op):(0,T.Kn)(i)?i.field="key":i={field:"key"}),i}function l9(i,s,o){const l=o.map(c=>{const h=s.getData(c.data);return h||Gx(c.data),h.domainRef(s,c.field)});return Tn(s.add(J7({values:l})))}function Qc(i,s,o){const l=o.map(c=>{const h=s.getData(c.data);return h||Gx(c.data),h.extentRef(s,c.field)});return Tn(s.add(M8({extents:l})))}function B8(i,s,o){const l=s.config.range;let c=i.range;if(c.signal)return s.signalRef(c.signal);if((0,T.HD)(c)){if(l&&(0,T.nr)(l,c))return B8(i=(0,T.l7)({},i,{range:l[c]}),s,o);"width"===c?c=[0,{signal:"width"}]:"height"===c?c=dm(i.type)?[0,{signal:"height"}]:[{signal:"height"},0]:(0,T.vU)("Unrecognized scale range value: "+(0,T.m8)(c))}else{if(c.scheme)return o.scheme=(0,T.kJ)(c.scheme)?tk(c.scheme,s):Kc(c.scheme,s),c.extent&&(o.schemeExtent=tk(c.extent,s)),void(c.count&&(o.schemeCount=Kc(c.count,s)));if(c.step)return void(o.rangeStep=Kc(c.step,s));if(dm(i.type)&&!(0,T.kJ)(c))return N8(c,i,s);(0,T.kJ)(c)||(0,T.vU)("Unsupported range type: "+(0,T.m8)(c))}return c.map(h=>((0,T.kJ)(h)?tk:Kc)(h,s))}function Yx(i,s,o){return(0,T.kJ)(i)?i.map(l=>Yx(l,s,o)):(0,T.Kn)(i)?i.signal?o.signalRef(i.signal):"fit"===s?i:(0,T.vU)("Unsupported parameter object: "+(0,T.m8)(i)):i}const cf="top",d0="bottom",f0="label",Jc="value",bC="guide-label",CC="guide-title",rk="gradient",XN="discrete",ok=["size","shape","fill","stroke","strokeWidth","strokeDash","opacity"],W_={name:1,style:1,interactive:1},Bi={value:0},Ol={value:1},wC="group",KN="rule",h0="text";function Xx(i){return i.type=wC,i.interactive=i.interactive||!1,i}function uu(i,s){const o=(l,c)=>lf(i[l],lf(s[l],c));return o.isVertical=l=>"vertical"===lf(i.direction,s.direction||(l?s.symbolDirection:s.gradientDirection)),o.gradientLength=()=>lf(i.gradientLength,s.gradientLength||s.gradientWidth),o.gradientThickness=()=>lf(i.gradientThickness,s.gradientThickness||s.gradientHeight),o.entryColumns=()=>lf(i.columns,lf(s.columns,+o.isVertical(!0))),o}function QN(i,s){const o=s&&(s.update&&s.update[i]||s.enter&&s.enter[i]);return o&&o.signal?o:o?o.value:null}function ak(i,s,o){return`item.anchor === 'start' ? ${i} : item.anchor === 'end' ? ${s} : ${o}`}const JN=ak((0,T.m8)("left"),(0,T.m8)("right"),(0,T.m8)("center"));function ZN(i,s){return s?i?(0,T.Kn)(i)?Object.assign({},i,{offset:ZN(i.offset,s)}):{value:i,offset:s}:s:i}function Zc(i,s){return s?(i.name=s.name,i.style=s.style||i.style,i.interactive=!!s.interactive,i.encode=Ko(i.encode,s,W_)):i.interactive=!1,i}function W8(i,s,o,l){const c=uu(i,o),h=c.isVertical(),g=c.gradientThickness(),y=c.gradientLength();let v,C,E,x,S;h?(C=[0,1],E=[0,0],x=g,S=y):(C=[0,0],E=[1,0],x=y,S=g);const k={enter:v={opacity:Bi,x:Bi,y:Bi,width:oo(x),height:oo(S)},update:(0,T.l7)({},v,{opacity:Ol,fill:{gradient:s,start:C,stop:E}}),exit:{opacity:Bi}};return xo(k,{stroke:c("gradientStrokeColor"),strokeWidth:c("gradientStrokeWidth")},{opacity:c("gradientOpacity")}),Zc({type:"rect",role:"legend-gradient",encode:k},l)}function m9(i,s,o,l,c){const h=uu(i,o),g=h.isVertical(),y=h.gradientThickness(),v=h.gradientLength();let C,E,x,S,k="";g?(C="y",x="y2",E="x",S="width",k="1-"):(C="x",x="x2",E="y",S="height");const R={opacity:Bi,fill:{scale:s,field:Jc}};R[C]={signal:k+"datum.perc",mult:v},R[E]=Bi,R[x]={signal:k+"datum.perc2",mult:v},R[S]=oo(y);const N={enter:R,update:(0,T.l7)({},R,{opacity:Ol}),exit:{opacity:Bi}};return xo(N,{stroke:h("gradientStrokeColor"),strokeWidth:h("gradientStrokeWidth")},{opacity:h("gradientOpacity")}),Zc({type:"rect",role:"legend-band",key:Jc,from:c,encode:N},l)}const G8=`datum.perc<=0?"${d0}":datum.perc>=1?"top":"middle"`;function q8(i,s,o,l){const c=uu(i,s),h=c.isVertical(),g=oo(c.gradientThickness()),y=c.gradientLength();let C,E,x,S,v=c("labelOverlap"),k="";const R={enter:C={opacity:Bi},update:E={opacity:Ol,text:{field:f0}},exit:{opacity:Bi}};return xo(R,{fill:c("labelColor"),fillOpacity:c("labelOpacity"),font:c("labelFont"),fontSize:c("labelFontSize"),fontStyle:c("labelFontStyle"),fontWeight:c("labelFontWeight"),limit:lf(i.labelLimit,s.gradientLabelLimit)}),h?(C.align={value:"left"},C.baseline=E.baseline={signal:G8},x="y",S="x",k="1-"):(C.align=E.align={signal:'datum.perc<=0?"left":datum.perc>=1?"right":"center"'},C.baseline={value:"top"},x="x",S="y"),C[x]=E[x]={signal:k+"datum.perc",mult:y},C[S]=E[S]=g,g.offset=lf(i.labelOffset,s.gradientLabelOffset)||0,v=v?{separation:c("labelSeparation"),method:v,order:"datum.index"}:void 0,Zc({type:h0,role:WT,style:bC,key:Jc,from:l,encode:R,overlap:v},o)}function _9(i,s,o,l,c){const h=uu(i,s),g=o.entries,y=!(!g||!g.interactive),v=g?g.name:void 0,C=h("clipHeight"),E=h("symbolOffset"),x={data:"value"},S=`(${c}) ? datum.offset : datum.size`,k=C?oo(C):{field:"size"},R="datum.index",N=`max(1, ${c})`;let P,z,H,X,J;k.mult=.5,P={enter:z={opacity:Bi,x:{signal:S,mult:.5,offset:E},y:k},update:H={opacity:Ol,x:z.x,y:z.y},exit:{opacity:Bi}};let oe=null,fe=null;i.fill||(oe=s.symbolBaseFillColor,fe=s.symbolBaseStrokeColor),xo(P,{fill:h("symbolFillColor",oe),shape:h("symbolType"),size:h("symbolSize"),stroke:h("symbolStrokeColor",fe),strokeDash:h("symbolDash"),strokeDashOffset:h("symbolDashOffset"),strokeWidth:h("symbolStrokeWidth")},{opacity:h("symbolOpacity")}),ok.forEach(Fe=>{i[Fe]&&(H[Fe]=z[Fe]={scale:i[Fe],field:Jc})});const te=Zc({type:"symbol",role:"legend-symbol",key:Jc,from:x,clip:!!C||void 0,encode:P},o.symbols),Re=oo(E);Re.offset=h("labelOffset"),P={enter:z={opacity:Bi,x:{signal:S,offset:Re},y:k},update:H={opacity:Ol,text:{field:f0},x:z.x,y:z.y},exit:{opacity:Bi}},xo(P,{align:h("labelAlign"),baseline:h("labelBaseline"),fill:h("labelColor"),fillOpacity:h("labelOpacity"),font:h("labelFont"),fontSize:h("labelFontSize"),fontStyle:h("labelFontStyle"),fontWeight:h("labelFontWeight"),limit:h("labelLimit")});const ze=Zc({type:h0,role:WT,style:bC,key:Jc,from:x,encode:P},o.labels);return P={enter:{noBound:{value:!C},width:Bi,height:C?oo(C):Bi,opacity:Bi},exit:{opacity:Bi},update:H={opacity:Ol,row:{signal:null},column:{signal:null}}},h.isVertical(!0)?(X=`ceil(item.mark.items.length / ${N})`,H.row.signal=`${R}%${X}`,H.column.signal=`floor(${R} / ${X})`,J={field:["row",R]}):(H.row.signal=`floor(${R} / ${N})`,H.column.signal=`${R} % ${N}`,J={field:R}),H.column.signal=`(${c})?${H.column.signal}:${R}`,Xx({role:Vx,from:l={facet:{data:l,name:"value",groupby:"index"}},encode:Ko(P,g,W_),marks:[te,ze],name:v,interactive:y,sort:J})}const lk='item.orient === "left"',EC='item.orient === "right"',Kx=`(${lk} || ${EC})`,b9=`datum.vgrad && ${Kx}`,Y8=ak('"top"','"bottom"','"middle"'),w9=`datum.vgrad && ${EC} ? (${ak('"right"','"left"','"center"')}) : (${Kx} && !(datum.vgrad && ${lk})) ? "left" : ${JN}`,E9=`item._anchor || (${Kx} ? "middle" : "start")`,D9=`${b9} ? (${lk} ? -90 : 90) : 0`,x9=`${Kx} ? (datum.vgrad ? (${EC} ? "bottom" : "top") : ${Y8}) : "top"`;function A9(i,s){let o;return(0,T.Kn)(i)&&(i.signal?o=i.signal:i.path?o="pathShape("+ec(i.path)+")":i.sphere&&(o="geoShape("+ec(i.sphere)+', {type: "Sphere"})')),o?s.signalRef(o):!!i}function ec(i){return(0,T.Kn)(i)&&i.signal?i.signal:(0,T.m8)(i)}function eP(i){const s=i.role||"";return s.indexOf("axis")&&s.indexOf("legend")&&s.indexOf("title")?i.type===wC?Vx:s||Bx:s}function X8(i){return{marktype:i.type,name:i.name||void 0,role:i.role||eP(i),zindex:+i.zindex||void 0,aria:i.aria,description:i.description}}function K8(i,s){return i&&i.signal?s.signalRef(i.signal):!1!==i}function tP(i,s){const o=bw(i.type);o||(0,T.vU)("Unrecognized transform type: "+(0,T.m8)(i.type));const l=c0(o.type.toLowerCase(),null,M9(o,i,s));return i.signal&&s.addSignal(i.signal,s.proxy(l)),l.metadata=o.metadata||{},l}function M9(i,s,o){const l={},c=i.params.length;for(let h=0;h<c;++h){const g=i.params[h];l[g.name]=O9(g,s,o)}return l}function O9(i,s,o){const l=i.type,c=s[i.name];return"index"===l?function(i,s,o){return(0,T.HD)(s.from)||(0,T.vU)('Lookup "from" parameter must be a string literal.'),o.getData(s.from).lookupRef(o,s.key)}(0,s,o):void 0!==c?"param"===l?function(i,s,o){const l=s[i.name];return i.array?((0,T.kJ)(l)||(0,T.vU)("Expected an array of sub-parameters. Instead: "+(0,T.m8)(l)),l.map(c=>J8(i,c,o))):J8(i,l,o)}(i,s,o):"projection"===l?o.projectionRef(s[i.name]):i.array&&!As(c)?c.map(h=>Q8(i,h,o)):Q8(i,c,o):void(i.required&&(0,T.vU)("Missing required "+(0,T.m8)(s.type)+" parameter: "+(0,T.m8)(i.name)))}function Q8(i,s,o){const l=i.type;if(As(s))return nP(l)?(0,T.vU)("Expression references can not be signals."):iP(l)?o.fieldRef(s):Z8(l)?o.compareRef(s):o.signalRef(s.signal);{const c=i.expr||iP(l);return c&&wY(s)?o.exprRef(s.expr,s.as):c&&EY(s)?gC(s.field,s.as):nP(l)?eg(s,o):DY(l)?Tn(o.getData(s).values):iP(l)?gC(s):Z8(l)?o.compareRef(s):s}}function J8(i,s,o){const l=i.params.length;let c;for(let g=0;g<l;++g){c=i.params[g];for(const y in c.key)if(c.key[y]!==s[y]){c=null;break}if(c)break}c||(0,T.vU)("Unsupported parameter: "+(0,T.m8)(s));const h=(0,T.l7)(M9(c,s,o),c.key);return Tn(o.add(HN(h)))}const wY=i=>i&&i.expr,EY=i=>i&&i.field,DY=i=>"data"===i,nP=i=>"expr"===i,iP=i=>"field"===i,Z8=i=>"compare"===i;function DC(i,s){return i.$ref?i:i.data&&i.data.$ref?i.data:Tn(s.getData(i.data).output)}function Eh(i,s,o,l,c){this.scope=i,this.input=s,this.output=o,this.values=l,this.aggregate=c,this.index={}}function rP(i){return(0,T.HD)(i)?i:null}function sP(i,s,o){const l=zx(o.op,o.field);let c;if(s.ops){for(let h=0,g=s.as.length;h<g;++h)if(s.as[h]===l)return}else s.ops=["count"],s.fields=[null],s.as=["count"];o.op&&(s.ops.push((c=o.op.signal)?i.signalRef(c):o.op),s.fields.push(i.fieldRef(o.field)),s.as.push(l))}function Qx(i,s,o,l,c,h,g){const y=s[o]||(s[o]={}),v=function(i){return(0,T.Kn)(i)?("descending"===i.order?"-":"+")+zx(i.op,i.field):""}(h);let E,x,C=rP(c);if(null!=C&&(i=s.scope,C+=v?"|"+v:"",E=y[C]),!E){const S=h?{field:mC,pulse:s.countsRef(i,c,h)}:{field:i.fieldRef(c),pulse:Tn(s.output)};v&&(S.sort=i.sortRef(h)),x=i.add(c0(l,void 0,S)),g&&(s.index[c]=x),E=Tn(x),null!=C&&(y[C]=E)}return E}function eV(i,s,o){const l=i.remove,c=i.insert,h=i.toggle,g=i.modify,y=i.values,v=s.add(XT()),E=eg("if("+i.trigger+',modify("'+o+'",'+[c,l,h,g,y].map(x=>null==x?"null":x).join(",")+"),0)",s);v.update=E.$expr,v.params=E.$params}function Jx(i,s){const o=eP(i),l=i.type===wC,c=i.from&&i.from.facet,h=i.overlap;let y,v,C,E,x,S,k,g=i.layout||o===Vx||o===p8;const R=o===Bx||g||c,N=function(i,s,o){let l,c,h,g,y;return i?(l=i.facet)&&(s||(0,T.vU)("Only group marks can be faceted."),null!=l.field?g=y=DC(l,o):(i.data?y=Tn(o.getData(i.data).aggregate):(h=tP((0,T.l7)({type:"aggregate",groupby:(0,T.IX)(l.groupby)},l.aggregate),o),h.params.key=o.keyRef(l.groupby),h.params.pulse=DC(l,o),g=y=Tn(o.add(h))),c=o.keyRef(l.groupby,!0))):g=Tn(o.add(uf(null,[{}]))),g||(g=DC(i,o)),{key:c,pulse:g,parent:y}}(i.from,l,s);v=s.add(Y7({key:N.key||(i.key?gC(i.key):void 0),pulse:N.pulse,clean:!l}));const P=Tn(v);v=C=s.add(uf({pulse:P})),v=s.add(Q7({markdef:X8(i),interactive:K8(i.interactive,s),clip:A9(i.clip,s),context:{$context:!0},groups:s.lookup(),parent:s.signals.parent?s.signalRef("parent"):null,index:s.markpath(),pulse:Tn(v)}));const z=Tn(v);v=E=s.add(A8($x(i.encode,i.type,o,i.style,s,{mod:!1,pulse:z}))),v.params.parent=s.encode(),i.transform&&i.transform.forEach(fe=>{const te=tP(fe,s),Re=te.metadata;(Re.generates||Re.changes)&&(0,T.vU)("Mark transforms should not generate new data."),Re.nomod||(E.params.mod=!0),te.params.pulse=Tn(v),s.add(v=te)}),i.sort&&(v=s.add(k8({sort:s.compareRef(i.sort),pulse:Tn(v)})));const H=Tn(v);(c||g)&&(g=s.add(F8({layout:s.objectProperty(i.layout),legends:s.legends,mark:z,pulse:H})),S=Tn(g));const X=s.add(Wx({mark:z,pulse:S||H}));k=Tn(X),l&&(R&&(y=s.operators,y.pop(),g&&y.pop()),s.pushState(H,S||k,P),c?function(i,s,o){const l=i.from.facet,c=l.name,h=DC(l,s);let g;l.name||(0,T.vU)("Facet must have a name: "+(0,T.m8)(l)),l.data||(0,T.vU)("Facet must reference a data set: "+(0,T.m8)(l)),l.field?g=s.add(Z7({field:s.fieldRef(l.field),pulse:h})):l.groupby?g=s.add(zN({key:s.keyRef(l.groupby),group:Tn(s.proxy(o.parent)),pulse:h})):(0,T.vU)("Facet must specify groupby or field: "+(0,T.m8)(l));const y=s.fork(),v=y.add(uf()),C=y.add(ig({pulse:Tn(v)}));y.addData(c,new Eh(y,v,v,C)),y.addSignal("parent",null),g.params.subflow={$subflow:y.parse(i).toRuntime()}}(i,s,N):R?function(i,s,o){const l=s.add(Z7({pulse:o.pulse})),c=s.fork();c.add(ig()),c.addSignal("parent",null),l.params.subflow={$subflow:c.parse(i).toRuntime()}}(i,s,N):s.parse(i),s.popState(),R&&(g&&y.push(g),y.push(X))),h&&(k=function(i,s,o){const l=i.method,c=i.bound,h=i.separation,g={separation:As(h)?o.signalRef(h.signal):h,method:As(l)?o.signalRef(l.signal):l,pulse:s};if(i.order&&(g.sort=o.compareRef({field:i.order})),c){const y=c.tolerance;g.boundTolerance=As(y)?o.signalRef(y.signal):+y,g.boundScale=o.scaleRef(c.scale),g.boundOrient=c.orient}return Tn(o.add(gY(g)))}(h,k,s));const J=s.add(O8({pulse:k})),oe=s.add(ig({pulse:Tn(J)},void 0,s.parent()));null!=i.name&&(x=i.name,s.addData(x,new Eh(s,C,J,oe)),i.on&&i.on.forEach(fe=>{(fe.insert||fe.remove||fe.toggle)&&(0,T.vU)("Marks only support modify triggers."),eV(fe,s,x)}))}function N9(i,s,o){const l={enter:{},update:{}};return xo(l,{orient:i("orient"),offset:i("offset"),padding:i("padding"),titlePadding:i("titlePadding"),cornerRadius:i("cornerRadius"),fill:i("fillColor"),stroke:i("strokeColor"),strokeWidth:o.strokeWidth,strokeDash:o.strokeDash,x:i("legendX"),y:i("legendY"),format:s.format,formatType:s.formatType}),l}function tV(i,s,o){return s[i]?`scale("${s[i]}",datum)`:QN(i,o[0].encode)}function $9(i,s){const o={enter:{},update:{}};return xo(o,{orient:i("orient"),anchor:i("anchor"),align:{signal:JN},angle:{signal:'item.orient==="left"?-90:item.orient==="right"?90:0'},limit:i("limit"),frame:i("frame"),offset:i("offset")||0,padding:i("subtitlePadding")}),Ko(o,s,W_)}function xC(i){const s=uf({},i);return s.metadata={source:!0},s}function SC(i,s){return ek({url:s.url?i.property(s.url):void 0,async:s.async?i.property(s.async):void 0,values:s.values?i.property(s.values):void 0,format:i.objectProperty(s.format)})}Eh.fromEntries=function(i,s){const o=s.length,l=s[o-1],c=s[o-2];let h=s[0],g=null,y=1;for(h&&"load"===h.type&&(h=s[1]),i.add(s[0]);y<o;++y)s[y].params.pulse=Tn(s[y-1]),i.add(s[y]),"aggregate"===s[y].type&&(g=s[y]);return new Eh(i,h,c,l,g)},Eh.prototype={countsRef(i,s,o){const l=this,c=l.counts||(l.counts={}),h=rP(s);let g,y,v;return null!=h&&(i=l.scope,g=c[h]),g?o&&o.field&&sP(i,g.agg.params,o):(v={groupby:i.fieldRef(s,"key"),pulse:Tn(l.output)},o&&o.field&&sP(i,v,o),y=i.add(JT(v)),g=i.add(uf({pulse:Tn(y)})),g={agg:y,ref:Tn(g)},null!=h&&(c[h]=g)),g.ref},tuplesRef(){return Tn(this.values)},extentRef(i,s){return Qx(i,this,"extent","extent",s,!1)},domainRef(i,s){return Qx(i,this,"domain","values",s,!1)},valuesRef(i,s,o){return Qx(i,this,"vals","values",s,o||!0)},lookupRef(i,s){return Qx(i,this,"lookup","tupleindex",s,!1)},indataRef(i,s){return Qx(i,this,"indata","tupleindex",s,!0,!0)}};const z9=i=>i===d0||i===cf,ck=(i,s,o)=>As(i)?H9(i.signal,s,o):"left"===i||i===cf?s:o,So=(i,s,o)=>As(i)?iV(i.signal,s,o):z9(i)?s:o,df=(i,s,o)=>As(i)?U9(i.signal,s,o):z9(i)?o:s,dk=(i,s,o)=>As(i)?W9(i.signal,s,o):i===cf?{value:s}:{value:o},iV=(i,s,o)=>Zx(`${i} === 'top' || ${i} === '${d0}'`,s,o),U9=(i,s,o)=>Zx(`${i} !== 'top' && ${i} !== '${d0}'`,s,o),H9=(i,s,o)=>aP(`${i} === 'left' || ${i} === 'top'`,s,o),W9=(i,s,o)=>aP(`${i} === 'top'`,s,o),Zx=(i,s,o)=>(s=null!=s?oo(s):s,o=null!=o?oo(o):o,oP(s)&&oP(o)?{signal:`${i} ? (${s=s?s.signal||(0,T.m8)(s.value):null}) : (${o=o?o.signal||(0,T.m8)(o.value):null})`}:[(0,T.l7)({test:i},s)].concat(o||[])),oP=i=>null==i||1===Object.keys(i).length,aP=(i,s,o)=>({signal:`${i} ? (${p0(s)}) : (${p0(o)})`}),q9=(i,s,o,l,c)=>({signal:(null!=l?`${i} === 'left' ? (${p0(l)}) : `:"")+(null!=o?`${i} === '${d0}' ? (${p0(o)}) : `:"")+(null!=c?`${i} === 'right' ? (${p0(c)}) : `:"")+(null!=s?`${i} === 'top' ? (${p0(s)}) : `:"")+"(null)"}),p0=i=>As(i)?i.signal:null==i?null:(0,T.m8)(i),AC=(i,s)=>{const o=i.signal;return o&&o.endsWith("(null)")?{signal:o.slice(0,-6)+s.signal}:i};function q_(i,s,o,l){let c;if(s&&(0,T.nr)(s,i))return s[i];if((0,T.nr)(o,i))return o[i];if(i.startsWith("title")){switch(i){case"titleColor":c="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":c=i[5].toLowerCase()+i.slice(6)}return l[CC][c]}if(i.startsWith("label")){switch(i){case"labelColor":c="fill";break;case"labelFont":case"labelFontSize":c=i[5].toLowerCase()+i.slice(6)}return l[bC][c]}return null}function fk(i){const s={};for(const o of i)if(o)for(const l in o)s[l]=1;return Object.keys(s)}function rV(i,s){return{scale:i.scale,range:s}}function uP(i,s,o,l,c){return{signal:'flush(range("'+i+'"), scale("'+i+'", datum.value), '+s+","+o+","+l+","+c+")"}}function oV(i,s,o,l,c,h){const g=uu(i,s),y=i.orient,v=i.scale,C=ck(y,-1,1),E=wh(g("labelFlush")),x=wh(g("labelFlushOffset")),S=g("labelAlign"),k=g("labelBaseline");let N,R=0===E||!!E;const P=oo(c);P.mult=C,P.offset=oo(g("labelPadding")||0),P.offset.mult=C;const z={scale:v,field:Jc,band:.5,offset:ZN(h.offset,g("labelOffset"))},H=So(y,R?uP(v,E,'"left"','"right"','"center"'):{value:"center"},((i,s,o)=>As(i)?((i,s,o)=>aP(`${i} === 'right'`,s,o))(i.signal,s,o):"right"===i?{value:s}:{value:o})(y,"left","right")),X=So(y,dk(y,"bottom","top"),R?uP(v,E,'"top"','"bottom"','"middle"'):{value:"middle"}),J=uP(v,E,`-(${x})`,x,0);R=R&&x;const oe={opacity:Bi,x:So(y,z,P),y:df(y,z,P)},fe={enter:oe,update:N={opacity:Ol,text:{field:f0},x:oe.x,y:oe.y,align:H,baseline:X},exit:{opacity:Bi,x:oe.x,y:oe.y}};xo(fe,{dx:!S&&R?So(y,J):null,dy:!k&&R?df(y,J):null}),xo(fe,{angle:g("labelAngle"),fill:g("labelColor"),fillOpacity:g("labelOpacity"),font:g("labelFont"),fontSize:g("labelFontSize"),fontWeight:g("labelFontWeight"),fontStyle:g("labelFontStyle"),limit:g("labelLimit"),lineHeight:g("labelLineHeight")},{align:S,baseline:k});const te=g("labelBound");let Re=g("labelOverlap");return Re=Re||te?{separation:g("labelSeparation"),method:Re,order:"datum.index",bound:te?{scale:v,orient:y,tolerance:te}:null}:void 0,N.align!==H&&(N.align=AC(N.align,H)),N.baseline!==X&&(N.baseline=AC(N.baseline,X)),Zc({type:h0,role:"axis-label",style:bC,key:Jc,from:l,encode:fe,overlap:Re},o)}function J9(i,s){const o=function(i,s){var y,v,C,o=s.config,l=o.style,c=o.axis,h="band"===s.scaleType(i.scale)&&o.axisBand,g=i.orient;if(As(g)){const x=fk([o.axisX,o.axisY]),S=fk([o.axisTop,o.axisBottom,o.axisLeft,o.axisRight]);for(C of(y={},x))y[C]=So(g,q_(C,o.axisX,c,l),q_(C,o.axisY,c,l));for(C of(v={},S))v[C]=q9(g.signal,q_(C,o.axisTop,c,l),q_(C,o.axisBottom,c,l),q_(C,o.axisLeft,c,l),q_(C,o.axisRight,c,l))}else y=g===cf||g===d0?o.axisX:o.axisY,v=o["axis"+g[0].toUpperCase()+g.slice(1)];return y||v||h?(0,T.l7)({},c,y,v,h):c}(i,s),l=i.encode||{},c=l.axis||{},h=c.name||void 0,g=c.interactive,y=c.style,v=uu(i,o),C=function(i){const s=i("tickBand");let l,c,o=i("tickOffset");return s?s.signal?(l={signal:`(${s.signal}) === 'extent' ? 1 : 0.5`},c={signal:`(${s.signal}) === 'extent'`},(0,T.Kn)(o)||(o={signal:`(${s.signal}) === 'extent' ? 0 : ${o}`})):"extent"===s?(l=1,c=!0,o=0):(l=.5,c=!1):(l=i("bandPosition"),c=i("tickExtra")),{extra:c,band:l,offset:o}}(v),E={scale:i.scale,ticks:!!v("ticks"),labels:!!v("labels"),grid:!!v("grid"),domain:!!v("domain"),title:null!=i.title},x=Tn(s.add(uf({},[E]))),S=Tn(s.add(jN({scale:s.scaleRef(i.scale),extra:s.property(C.extra),count:s.objectProperty(i.tickCount),values:s.objectProperty(i.values),minstep:s.property(i.tickMinStep),formatType:s.property(i.formatType),formatSpecifier:s.property(i.format)}))),k=[];let R;return E.grid&&k.push(function(i,s,o,l,c){const h=uu(i,s),g=i.orient,y=i.gridScale,v=ck(g,1,-1),C=function(i,s){if(1!==s)if((0,T.Kn)(i)){let o=i=(0,T.l7)({},i);for(;null!=o.mult;){if(!(0,T.Kn)(o.mult))return o.mult=As(s)?{signal:`(${o.mult}) * (${s.signal})`}:o.mult*s,i;o=o.mult=(0,T.l7)({},o.mult)}o.mult=s}else i=As(s)?{signal:`(${s.signal}) * (${i||0})`}:s*(i||0);return i}(i.offset,v);let E,x,S;const k={enter:E={opacity:Bi},update:S={opacity:Ol},exit:x={opacity:Bi}};xo(k,{stroke:h("gridColor"),strokeCap:h("gridCap"),strokeDash:h("gridDash"),strokeDashOffset:h("gridDashOffset"),strokeOpacity:h("gridOpacity"),strokeWidth:h("gridWidth")});const R={scale:i.scale,field:Jc,band:c.band,extra:c.extra,offset:c.offset,round:h("tickRound")},N=So(g,{signal:"height"},{signal:"width"}),P=y?{scale:y,range:0,mult:v,offset:C}:{value:0,offset:C},z=y?{scale:y,range:1,mult:v,offset:C}:(0,T.l7)(N,{mult:v,offset:C});return E.x=S.x=So(g,R,P),E.y=S.y=df(g,R,P),E.x2=S.x2=df(g,z),E.y2=S.y2=So(g,z),x.x=So(g,R),x.y=df(g,R),Zc({type:KN,role:"axis-grid",key:Jc,from:l,encode:k},o)}(i,o,l.grid,S,C)),E.ticks&&(R=v("tickSize"),k.push(function(i,s,o,l,c,h){const g=uu(i,s),y=i.orient,v=ck(y,-1,1);let C,E,x;const S={enter:C={opacity:Bi},update:x={opacity:Ol},exit:E={opacity:Bi}};xo(S,{stroke:g("tickColor"),strokeCap:g("tickCap"),strokeDash:g("tickDash"),strokeDashOffset:g("tickDashOffset"),strokeOpacity:g("tickOpacity"),strokeWidth:g("tickWidth")});const k=oo(c);k.mult=v;const R={scale:i.scale,field:Jc,band:h.band,extra:h.extra,offset:h.offset,round:g("tickRound")};return x.y=C.y=So(y,Bi,R),x.y2=C.y2=So(y,k),E.x=So(y,R),x.x=C.x=df(y,Bi,R),x.x2=C.x2=df(y,k),E.y=df(y,R),Zc({type:KN,role:"axis-tick",key:Jc,from:l,encode:S},o)}(i,o,l.ticks,S,R,C))),E.labels&&(R=E.ticks?R:0,k.push(oV(i,o,l.labels,S,R,C))),E.domain&&k.push(function(i,s,o,l){const c=uu(i,s),h=i.orient;let g,y;const v={enter:g={opacity:Bi},update:y={opacity:Ol},exit:{opacity:Bi}};xo(v,{stroke:c("domainColor"),strokeCap:c("domainCap"),strokeDash:c("domainDash"),strokeDashOffset:c("domainDashOffset"),strokeWidth:c("domainWidth"),strokeOpacity:c("domainOpacity")});const C=rV(i,0),E=rV(i,1);return g.x=y.x=So(h,C,Bi),g.x2=y.x2=So(h,E),g.y=y.y=df(h,C,Bi),g.y2=y.y2=df(h,E),Zc({type:KN,role:"axis-domain",from:l,encode:v},o)}(i,o,l.domain,x)),E.title&&k.push(function(i,s,o,l){const c=uu(i,s),h=i.orient,g=ck(h,-1,1);let y,v;const C={enter:y={opacity:Bi,anchor:oo(c("titleAnchor",null)),align:{signal:JN}},update:v=(0,T.l7)({},y,{opacity:Ol,text:oo(i.title)}),exit:{opacity:Bi}},E={signal:`lerp(range("${i.scale}"), ${ak(0,1,.5)})`};return v.x=So(h,E),v.y=df(h,E),y.angle=So(h,Bi,((i,s)=>As(i)?{signal:`(${i.signal}) * 90`}:{value:90*i})(g)),y.baseline=So(h,dk(h,d0,cf),{value:d0}),v.angle=y.angle,v.baseline=y.baseline,xo(C,{fill:c("titleColor"),fillOpacity:c("titleOpacity"),font:c("titleFont"),fontSize:c("titleFontSize"),fontStyle:c("titleFontStyle"),fontWeight:c("titleFontWeight"),limit:c("titleLimit"),lineHeight:c("titleLineHeight")},{align:c("titleAlign"),angle:c("titleAngle"),baseline:c("titleBaseline")}),function(i,s,o,l){const c=(y,v)=>null!=y?(o.update[v]=AC(oo(y),o.update[v]),!1):!$_(v,l),h=c(i("titleX"),"x"),g=c(i("titleY"),"y");o.enter.auto=g===h?oo(g):So(s,oo(g),oo(h))}(c,h,C,o),C.update.align=AC(C.update.align,y.align),C.update.angle=AC(C.update.angle,y.angle),C.update.baseline=AC(C.update.baseline,y.baseline),Zc({type:h0,role:"axis-title",style:CC,from:l,encode:C},o)}(i,o,l.title,x)),Jx(Xx({role:"axis",from:x,encode:Ko(hk(v,i),c,W_),marks:k,aria:v("aria"),description:v("description"),zindex:v("zindex"),name:h,interactive:g,style:y}),s)}function hk(i,s){const o={enter:{},update:{}};return xo(o,{orient:i("orient"),offset:i("offset")||0,position:lf(s.position,0),titlePadding:i("titlePadding"),minExtent:i("minExtent"),maxExtent:i("maxExtent"),range:{signal:`abs(span(range("${s.scale}")))`},translate:i("translate"),format:s.format,formatType:s.formatType}),o}function lV(i,s,o){const l=(0,T.IX)(i.signals),c=(0,T.IX)(i.scales);return o||l.forEach(h=>af(h,s)),(0,T.IX)(i.projections).forEach(h=>function(i,s){const o=s.config.projection||{},l={};for(const c in i)"name"!==c&&(l[c]=Yx(i[c],c,s));for(const c in o)null==l[c]&&(l[c]=Yx(o[c],c,s));s.addProjection(i.name,l)}(h,s)),c.forEach(h=>function(i,s){const o=i.type||"linear";Nd(o)||(0,T.vU)("Unrecognized scale type: "+(0,T.m8)(o)),s.addScale(i.name,{type:o,domain:void 0})}(h,s)),(0,T.IX)(i.data).forEach(h=>function(i,s){const o=[];i.transform&&i.transform.forEach(l=>{o.push(tP(l,s))}),i.on&&i.on.forEach(l=>{eV(l,s,i.name)}),s.addDataPipeline(i.name,function(i,s,o){const l=[];let y,v,C,E,x,c=null,h=!1,g=!1;for(i.values?As(i.values)||KT(i.format)?(l.push(SC(s,i)),l.push(c=xC())):l.push(c=xC({$ingest:i.values,$format:i.format})):i.url?KT(i.url)||KT(i.format)?(l.push(SC(s,i)),l.push(c=xC())):l.push(c=xC({$request:i.url,$format:i.format})):i.source&&(c=y=(0,T.IX)(i.source).map(S=>Tn(s.getData(S).output)),l.push(null)),v=0,C=o.length;v<C;++v)E=o[v],x=E.metadata,!c&&!x.source&&l.push(c=xC()),l.push(E),x.generates&&(g=!0),x.modifies&&!g&&(h=!0),x.source?c=E:x.changes&&(c=null);return y&&(C=y.length-1,l[0]=t9({derive:h,pulse:C?y:y[0]}),(h||C)&&l.splice(1,0,xC())),c||l.push(xC()),l.push(ig({})),l}(i,s,o))}(h,s)),c.forEach(h=>R8(h,s)),(o||l).forEach(h=>function(i,s){const o=s.getSignal(i.name);let l=i.update;i.init&&(l?(0,T.vU)("Signals can not include both init and update expressions."):(l=i.init,o.initonly=!0)),l&&(l=eg(l,s),o.update=l.$expr,o.params=l.$params),i.on&&i.on.forEach(c=>function(i,s,o){const l=i.encode,c={target:o};let h=i.events,g=i.update,y=[];h||(0,T.vU)("Signal update missing events specification."),(0,T.HD)(h)&&(h=c8(h,s.isSubscope()?Ml:Ux)),h=(0,T.IX)(h).filter(v=>v.signal||v.scale?(y.push(v),0):1),y.length>1&&(y=[QT(y)]),h.length&&y.push(h.length>1?{merge:h}:h[0]),null!=l&&(g&&(0,T.vU)("Signal encode and update are mutually exclusive."),g="encode(item(),"+(0,T.m8)(l)+")"),c.update=(0,T.HD)(g)?eg(g,s):null!=g.expr?eg(g.expr,s):null!=g.value?g.value:null!=g.signal?{$expr:H7,$params:{$value:s.signalRef(g.signal)}}:(0,T.vU)("Invalid signal update specification."),i.force&&(c.options={force:!0}),y.forEach(v=>s.addUpdate((0,T.l7)(function(i,s){return{source:i.signal?s.signalRef(i.signal):i.scale?s.scaleRef(i.scale):yC(i,s)}}(v,s),c)))}(c,s,o.id))}(h,s)),(0,T.IX)(i.axes).forEach(h=>J9(h,s)),(0,T.IX)(i.marks).forEach(h=>Jx(h,s)),(0,T.IX)(i.legends).forEach(h=>function(i,s){const o=s.config.legend,l=i.encode||{},c=uu(i,o),h=l.legend||{},g=h.name||void 0,y=h.interactive,v=h.style,C={};let x,S,k,E=0;ok.forEach(X=>i[X]?(C[X]=i[X],E=E||i[X]):0),E||(0,T.vU)("Missing valid scale for legend.");const R=function(i,s){let o=i.type||"symbol";return!i.type&&1===function(i){return ok.reduce((s,o)=>s+(i[o]?1:0),0)}(i)&&(i.fill||i.stroke)&&(o=YE(s)?rk:GA(s)?XN:"symbol"),o!==rk?o:GA(s)?XN:rk}(i,s.scaleType(E)),N={title:null!=i.title,scales:C,type:R,vgrad:"symbol"!==R&&c.isVertical()},P=Tn(s.add(uf(null,[N]))),H=Tn(s.add(UN(S={type:R,scale:s.scaleRef(E),count:s.objectProperty(c("tickCount")),limit:s.property(c("symbolLimit")),values:s.objectProperty(i.values),minstep:s.property(i.tickMinStep),formatType:s.property(i.formatType),formatSpecifier:s.property(i.format)})));return R===rk?(k=[W8(i,E,o,l.gradient),q8(i,o,l.labels,H)],S.count=S.count||s.signalRef(`max(2,2*floor((${wh(c.gradientLength())})/100))`)):R===XN?k=[m9(i,E,o,l.gradient,H),q8(i,o,l.labels,H)]:(x=function(i,s){const o=uu(i,s);return{align:o("gridAlign"),columns:o.entryColumns(),center:{row:!0,column:!1},padding:{row:o("rowPadding"),column:o("columnPadding")}}}(i,o),k=[_9(i,o,l,H,wh(x.columns))],S.size=function(i,s,o){return eg(`max(ceil(sqrt(${wh(tV("size",i,o))})+${wh(tV("strokeWidth",i,o))}),${wh(function(i,s,o){return QN("fontSize",i)||function(i,s,o){const l=s.config.style["guide-label"];return l&&l.fontSize}(0,s)}(o[1].encode,s))})`,s)}(i,s,k[0].marks)),k=[Xx({role:"legend-entry",from:P,encode:{enter:{x:{value:0},y:{value:0}}},marks:k,layout:x,interactive:y})],N.title&&k.push(function(i,s,o,l){const c=uu(i,s),h={enter:{opacity:Bi},update:{opacity:Ol,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Bi}};return xo(h,{orient:c("titleOrient"),_anchor:c("titleAnchor"),anchor:{signal:E9},angle:{signal:D9},align:{signal:w9},baseline:{signal:x9},text:i.title,fill:c("titleColor"),fillOpacity:c("titleOpacity"),font:c("titleFont"),fontSize:c("titleFontSize"),fontStyle:c("titleFontStyle"),fontWeight:c("titleFontWeight"),limit:c("titleLimit"),lineHeight:c("titleLineHeight")},{align:c("titleAlign"),baseline:c("titleBaseline")}),Zc({type:h0,role:"legend-title",style:CC,from:l,encode:h},o)}(i,o,l.title,P)),Jx(Xx({role:"legend",from:P,encode:Ko(N9(c,i,o),h,W_),marks:k,aria:c("aria"),description:c("description"),zindex:c("zindex"),name:g,interactive:y,style:v}),s)}(h,s)),i.title&&function(i,s){const o=uu(i=(0,T.HD)(i)?{text:i}:i,s.config.title),l=i.encode||{},c=l.group||{},h=c.name||void 0,g=c.interactive,y=c.style,v=[],E=Tn(s.add(uf(null,[{}])));v.push(function(i,s,o,l){const c={value:0},g={enter:{opacity:c},update:{opacity:{value:1}},exit:{opacity:c}};return xo(g,{text:i.text,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:s("dx"),dy:s("dy"),fill:s("color"),font:s("font"),fontSize:s("fontSize"),fontStyle:s("fontStyle"),fontWeight:s("fontWeight"),lineHeight:s("lineHeight")},{align:s("align"),angle:s("angle"),baseline:s("baseline")}),Zc({type:h0,role:"title-text",style:"group-title",from:l,encode:g},o)}(i,o,function(i){const s=i.encode;return s&&s.title||(0,T.l7)({name:i.name,interactive:i.interactive,style:i.style},s)}(i),E)),i.subtitle&&v.push(function(i,s,o,l){const c={value:0},g={enter:{opacity:c},update:{opacity:{value:1}},exit:{opacity:c}};return xo(g,{text:i.subtitle,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:s("dx"),dy:s("dy"),fill:s("subtitleColor"),font:s("subtitleFont"),fontSize:s("subtitleFontSize"),fontStyle:s("subtitleFontStyle"),fontWeight:s("subtitleFontWeight"),lineHeight:s("subtitleLineHeight")},{align:s("align"),angle:s("angle"),baseline:s("baseline")}),Zc({type:h0,role:"title-subtitle",style:"group-subtitle",from:l,encode:g},o)}(i,o,l.subtitle,E)),Jx(Xx({role:"title",from:E,encode:$9(o,c),marks:v,aria:o("aria"),description:o("description"),zindex:o("zindex"),name:h,interactive:g,style:y}),s)}(i.title,s),s.parseLambdas(),s}function eS(i,s){return s&&s.signal?{name:i,update:s.signal}:{name:i,value:s}}function uV(i,s){this.config=i||{},this.options=s||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function cV(i){this.config=i.config,this.options=i.options,this.legends=i.legends,this.field=Object.create(i.field),this.signals=Object.create(i.signals),this.lambdas=Object.create(i.lambdas),this.scales=Object.create(i.scales),this.events=Object.create(i.events),this.data=Object.create(i.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++i._nextsub[0],this._nextsub=i._nextsub,this._parent=i._parent.slice(),this._encode=i._encode.slice(),this._lookup=i._lookup.slice(),this._markpath=i._markpath}function cP(i){return((0,T.kJ)(i)?dV:fV)(i)}function dV(i){const s=i.length;let o="[";for(let l=0;l<s;++l){const c=i[l];o+=(l>0?",":"")+((0,T.Kn)(c)?c.signal||cP(c):(0,T.m8)(c))}return o+"]"}function fV(i){let l,c,s="{",o=0;for(l in i)c=i[l],s+=(++o>1?",":"")+(0,T.m8)(l)+":"+((0,T.Kn)(c)?c.signal||cP(c):(0,T.m8)(c));return s+"}"}function nU(i,s,o){return(0,T.Kn)(i)||(0,T.vU)("Input Vega specification must be an object."),function(i,s){const o=s.config,l=Tn(s.root=s.add(XT())),c=function(i,s){const o=g=>lf(i[g],s[g]),l=[eS("background",o("background")),eS("autosize",f8(o("autosize"))),eS("padding",h8(o("padding"))),eS("width",o("width")||0),eS("height",o("height")||0)],c=l.reduce((g,y)=>(g[y.name]=y,g),{}),h={};return(0,T.IX)(i.signals).forEach(g=>{(0,T.nr)(c,g.name)?g=(0,T.l7)(c[g.name],g):l.push(g),h[g.name]=g}),(0,T.IX)(s.signals).forEach(g=>{!(0,T.nr)(h,g.name)&&!(0,T.nr)(c,g.name)&&l.push(g)}),l}(i,o);c.forEach(C=>af(C,s)),s.description=i.description||o.description,s.eventConfig=o.events,s.legends=s.objectProperty(o.legend&&o.legend.layout),s.locale=o.locale;const h=s.add(uf()),g=s.add(A8($x((i=>Ko({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},i))(i.encode),wC,p8,i.style,s,{pulse:Tn(h)}))),y=s.add(F8({layout:s.objectProperty(i.layout),legends:s.legends,autosize:s.signalRef("autosize"),mark:l,pulse:Tn(g)}));s.operators.pop(),s.pushState(Tn(g),Tn(y),null),lV(i,s,c),s.operators.push(y);let v=s.add(Wx({mark:l,pulse:Tn(y)}));return v=s.add(O8({pulse:Tn(v)})),v=s.add(ig({pulse:Tn(v)})),s.addData("root",new Eh(s,h,h,v)),s}(i,new uV(s=(0,T.fE)(function(){const i="sans-serif",l="#4c78a8",c="#000",h="#888",g="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:l},area:{fill:l},image:null,line:{stroke:l,strokeWidth:2},path:{stroke:l},rect:{fill:l},rule:{stroke:c},shape:{stroke:l},symbol:{fill:l,size:64},text:{fill:c,font:i,fontSize:11},trail:{fill:l,size:2},style:{"guide-label":{fill:c,font:i,fontSize:10},"guide-title":{fill:c,font:i,fontSize:11,fontWeight:"bold"},"group-title":{fill:c,font:i,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:c,font:i,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:g}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:h,grid:!1,gridWidth:1,gridColor:g,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:h,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:g,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:h,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}(),s,i.config),o)).toRuntime()}uV.prototype=cV.prototype={parse(i){return lV(i,this)},fork(){return new cV(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(i){return this.operators.push(i),i.id=this.id(),i.refs&&(i.refs.forEach(s=>{s.$ref=i.id}),i.refs=null),i},proxy(i){const s=i instanceof ng?Tn(i):i;return this.add(mY({value:s}))},addStream(i){return this.streams.push(i),i.id=this.id(),i},addUpdate(i){return this.updates.push(i),i},finish(){let i,s;for(i in this.root&&(this.root.root=!0),this.signals)this.signals[i].signal=i;for(i in this.scales)this.scales[i].scale=i;function o(l,c,h){let g,y;l&&(g=l.data||(l.data={}),y=g[c]||(g[c]=[]),y.push(h))}for(i in this.data){s=this.data[i],o(s.input,i,"input"),o(s.output,i,"output"),o(s.values,i,"values");for(const l in s.index)o(s.index[l],i,"index:"+l)}return this},pushState(i,s,o){this._encode.push(Tn(this.add(ig({pulse:i})))),this._parent.push(s),this._lookup.push(o?Tn(this.proxy(o)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return(0,T.fj)(this._parent)},encode(){return(0,T.fj)(this._encode)},lookup(){return(0,T.fj)(this._lookup)},markpath(){const i=this._markpath;return++i[i.length-1]},fieldRef(i,s){if((0,T.HD)(i))return gC(i,s);i.signal||(0,T.vU)("Unsupported field reference: "+(0,T.m8)(i));const o=i.signal;let l=this.field[o];if(!l){const c={name:this.signalRef(o)};s&&(c.as=s),this.field[o]=l=Tn(this.add(K7(c)))}return l},compareRef(i){let s=!1;const o=h=>As(h)?(s=!0,this.signalRef(h.signal)):function(i){return i&&i.expr}(h)?(s=!0,this.exprRef(h.expr)):h,l=(0,T.IX)(i.field).map(o),c=(0,T.IX)(i.order).map(o);return s?Tn(this.add(S8({fields:l,orders:c}))):jx(l,c)},keyRef(i,s){let o=!1;const c=this.signals;return i=(0,T.IX)(i).map(h=>As(h)?(o=!0,Tn(c[h.signal])):h),o?Tn(this.add(ZT({fields:i,flat:s}))):function(i,s){const o={$key:i};return s&&(o.$flat=!0),o}(i,s)},sortRef(i){if(!i)return i;const s=zx(i.op,i.field),o=i.order||"ascending";return o.signal?Tn(this.add(S8({fields:s,orders:this.signalRef(o.signal)}))):jx(s,o)},event(i,s){const o=i+":"+s;if(!this.events[o]){const l=this.id();this.streams.push({id:l,source:i,type:s}),this.events[o]=l}return this.events[o]},hasOwnSignal(i){return(0,T.nr)(this.signals,i)},addSignal(i,s){this.hasOwnSignal(i)&&(0,T.vU)("Duplicate signal name: "+(0,T.m8)(i));const o=s instanceof ng?s:this.add(XT(s));return this.signals[i]=o},getSignal(i){return this.signals[i]||(0,T.vU)("Unrecognized signal name: "+(0,T.m8)(i)),this.signals[i]},signalRef(i){return this.signals[i]?Tn(this.signals[i]):((0,T.nr)(this.lambdas,i)||(this.lambdas[i]=this.add(XT(null))),Tn(this.lambdas[i]))},parseLambdas(){const i=Object.keys(this.lambdas);for(let s=0,o=i.length;s<o;++s){const l=i[s],c=eg(l,this),h=this.lambdas[l];h.params=c.$params,h.update=c.$expr}},property(i){return i&&i.signal?this.signalRef(i.signal):i},objectProperty(i){return i&&(0,T.Kn)(i)?this.signalRef(i.signal||cP(i)):i},exprRef(i,s){const o={expr:eg(i,this)};return s&&(o.expr.$name=s),Tn(this.add(X7(o)))},addBinding(i,s){this.bindings||(0,T.vU)("Nested signals do not support binding: "+(0,T.m8)(i)),this.bindings.push((0,T.l7)({signal:i},s))},addScaleProj(i,s){(0,T.nr)(this.scales,i)&&(0,T.vU)("Duplicate scale or projection name: "+(0,T.m8)(i)),this.scales[i]=this.add(s)},addScale(i,s){this.addScaleProj(i,T8(s))},addProjection(i,s){this.addScaleProj(i,e9(s))},getScale(i){return this.scales[i]||(0,T.vU)("Unrecognized scale name: "+(0,T.m8)(i)),this.scales[i]},scaleRef(i){return Tn(this.getScale(i))},scaleType(i){return this.getScale(i).params.type},projectionRef(i){return this.scaleRef(i)},projectionType(i){return this.scaleType(i)},addData(i,s){return(0,T.nr)(this.data,i)&&(0,T.vU)("Duplicate data set name: "+(0,T.m8)(i)),this.data[i]=s},getData(i){return this.data[i]||(0,T.vU)("Undefined data set name: "+(0,T.m8)(i)),this.data[i]},addDataPipeline(i,s){return(0,T.nr)(this.data,i)&&(0,T.vU)("Duplicate data set name: "+(0,T.m8)(i)),this.addData(i,Eh.fromEntries(this,s))}};(0,T.l7)(Dg,_e,qe,Ce,xe,ve,De,de,Ae,Ie,ke,nt);const lU="5.21.0"},2316:it=>{"use strict";it.exports=function(bt){bt.prototype[Symbol.iterator]=function*(){for(let pe=this.head;pe;pe=pe.next)yield pe.value}}},9377:(it,bt,pe)=>{"use strict";function _e(ve){var de=this;if(de instanceof _e||(de=new _e),de.tail=null,de.head=null,de.length=0,ve&&"function"==typeof ve.forEach)ve.forEach(function(Ie){de.push(Ie)});else if(arguments.length>0)for(var De=0,Ae=arguments.length;De<Ae;De++)de.push(arguments[De]);return de}function K(ve,de,De){var Ae=de===ve.head?new xe(De,null,de,ve):new xe(De,de,de.next,ve);return null===Ae.next&&(ve.tail=Ae),null===Ae.prev&&(ve.head=Ae),ve.length++,Ae}function qe(ve,de){ve.tail=new xe(de,ve.tail,null,ve),ve.head||(ve.head=ve.tail),ve.length++}function Ce(ve,de){ve.head=new xe(de,null,ve.head,ve),ve.tail||(ve.tail=ve.head),ve.length++}function xe(ve,de,De,Ae){if(!(this instanceof xe))return new xe(ve,de,De,Ae);this.list=Ae,this.value=ve,de?(de.next=this,this.prev=de):this.prev=null,De?(De.prev=this,this.next=De):this.next=null}it.exports=_e,_e.Node=xe,_e.create=_e,_e.prototype.removeNode=function(ve){if(ve.list!==this)throw new Error("removing node which does not belong to this list");var de=ve.next,De=ve.prev;return de&&(de.prev=De),De&&(De.next=de),ve===this.head&&(this.head=de),ve===this.tail&&(this.tail=De),ve.list.length--,ve.next=null,ve.prev=null,ve.list=null,de},_e.prototype.unshiftNode=function(ve){if(ve!==this.head){ve.list&&ve.list.removeNode(ve);var de=this.head;ve.list=this,ve.next=de,de&&(de.prev=ve),this.head=ve,this.tail||(this.tail=ve),this.length++}},_e.prototype.pushNode=function(ve){if(ve!==this.tail){ve.list&&ve.list.removeNode(ve);var de=this.tail;ve.list=this,ve.prev=de,de&&(de.next=ve),this.tail=ve,this.head||(this.head=ve),this.length++}},_e.prototype.push=function(){for(var ve=0,de=arguments.length;ve<de;ve++)qe(this,arguments[ve]);return this.length},_e.prototype.unshift=function(){for(var ve=0,de=arguments.length;ve<de;ve++)Ce(this,arguments[ve]);return this.length},_e.prototype.pop=function(){if(this.tail){var ve=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,ve}},_e.prototype.shift=function(){if(this.head){var ve=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,ve}},_e.prototype.forEach=function(ve,de){de=de||this;for(var De=this.head,Ae=0;null!==De;Ae++)ve.call(de,De.value,Ae,this),De=De.next},_e.prototype.forEachReverse=function(ve,de){de=de||this;for(var De=this.tail,Ae=this.length-1;null!==De;Ae--)ve.call(de,De.value,Ae,this),De=De.prev},_e.prototype.get=function(ve){for(var de=0,De=this.head;null!==De&&de<ve;de++)De=De.next;if(de===ve&&null!==De)return De.value},_e.prototype.getReverse=function(ve){for(var de=0,De=this.tail;null!==De&&de<ve;de++)De=De.prev;if(de===ve&&null!==De)return De.value},_e.prototype.map=function(ve,de){de=de||this;for(var De=new _e,Ae=this.head;null!==Ae;)De.push(ve.call(de,Ae.value,this)),Ae=Ae.next;return De},_e.prototype.mapReverse=function(ve,de){de=de||this;for(var De=new _e,Ae=this.tail;null!==Ae;)De.push(ve.call(de,Ae.value,this)),Ae=Ae.prev;return De},_e.prototype.reduce=function(ve,de){var De,Ae=this.head;if(arguments.length>1)De=de;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");Ae=this.head.next,De=this.head.value}for(var Ie=0;null!==Ae;Ie++)De=ve(De,Ae.value,Ie),Ae=Ae.next;return De},_e.prototype.reduceReverse=function(ve,de){var De,Ae=this.tail;if(arguments.length>1)De=de;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");Ae=this.tail.prev,De=this.tail.value}for(var Ie=this.length-1;null!==Ae;Ie--)De=ve(De,Ae.value,Ie),Ae=Ae.prev;return De},_e.prototype.toArray=function(){for(var ve=new Array(this.length),de=0,De=this.head;null!==De;de++)ve[de]=De.value,De=De.next;return ve},_e.prototype.toArrayReverse=function(){for(var ve=new Array(this.length),de=0,De=this.tail;null!==De;de++)ve[de]=De.value,De=De.prev;return ve},_e.prototype.slice=function(ve,de){(de=de||this.length)<0&&(de+=this.length),(ve=ve||0)<0&&(ve+=this.length);var De=new _e;if(de<ve||de<0)return De;ve<0&&(ve=0),de>this.length&&(de=this.length);for(var Ae=0,Ie=this.head;null!==Ie&&Ae<ve;Ae++)Ie=Ie.next;for(;null!==Ie&&Ae<de;Ae++,Ie=Ie.next)De.push(Ie.value);return De},_e.prototype.sliceReverse=function(ve,de){(de=de||this.length)<0&&(de+=this.length),(ve=ve||0)<0&&(ve+=this.length);var De=new _e;if(de<ve||de<0)return De;ve<0&&(ve=0),de>this.length&&(de=this.length);for(var Ae=this.length,Ie=this.tail;null!==Ie&&Ae>de;Ae--)Ie=Ie.prev;for(;null!==Ie&&Ae>ve;Ae--,Ie=Ie.prev)De.push(Ie.value);return De},_e.prototype.splice=function(ve,de,...De){ve>this.length&&(ve=this.length-1),ve<0&&(ve=this.length+ve);for(var Ae=0,Ie=this.head;null!==Ie&&Ae<ve;Ae++)Ie=Ie.next;var ke=[];for(Ae=0;Ie&&Ae<de;Ae++)ke.push(Ie.value),Ie=this.removeNode(Ie);for(null===Ie&&(Ie=this.tail),Ie!==this.head&&Ie!==this.tail&&(Ie=Ie.prev),Ae=0;Ae<De.length;Ae++)Ie=K(this,Ie,De[Ae]);return ke},_e.prototype.reverse=function(){for(var ve=this.head,de=this.tail,De=ve;null!==De;De=De.prev){var Ae=De.prev;De.prev=De.next,De.next=Ae}return this.head=de,this.tail=ve,this};try{pe(2316)(_e)}catch(ve){}},7853:(it,bt,pe)=>{"use strict";var _e={};pe.r(_e),pe.d(_e,{JsonPatchError:()=>lo,_areEquals:()=>VP,applyOperation:()=>mS,applyPatch:()=>n$,applyReducer:()=>ise,deepClone:()=>tse,getValueByPointer:()=>t$,validate:()=>iQ,validator:()=>i$});var K={};pe.r(K),pe.d(K,{compare:()=>dse,generate:()=>_H,observe:()=>cse,unobserve:()=>use});var qe={};function Ce(n){return"function"==typeof n}pe.r(qe),pe.d(qe,{dark:()=>Use,excel:()=>Hse,fivethirtyeight:()=>qse,ggplot2:()=>Yse,googlecharts:()=>ooe,latimes:()=>Jse,quartz:()=>Zse,urbaninstitute:()=>soe,version:()=>aoe,vox:()=>eoe});let xe=!1;const ve={Promise:void 0,set useDeprecatedSynchronousErrorHandling(n){if(n){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else xe&&console.log("RxJS: Back to a better error behavior. Thank you. <3");xe=n},get useDeprecatedSynchronousErrorHandling(){return xe}};function de(n){setTimeout(()=>{throw n},0)}const De={closed:!0,next(n){},error(n){if(ve.useDeprecatedSynchronousErrorHandling)throw n;de(n)},complete(){}},Ae=Array.isArray||(n=>n&&"number"==typeof n.length);function Ie(n){return null!==n&&"object"==typeof n}const nt=(()=>{function n(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((e,r)=>`${r+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return n.prototype=Object.create(Error.prototype),n})();class T{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:r,_unsubscribe:a,_subscriptions:u}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof T)e.remove(this);else if(null!==e)for(let p=0;p<e.length;++p)e[p].remove(this);if(Ce(a)){r&&(this._unsubscribe=void 0);try{a.call(this)}catch(p){t=p instanceof nt?Yt(p.errors):[p]}}if(Ae(u)){let p=-1,_=u.length;for(;++p<_;){const D=u[p];if(Ie(D))try{D.unsubscribe()}catch(M){t=t||[],M instanceof nt?t=t.concat(Yt(M.errors)):t.push(M)}}}if(t)throw new nt(t)}add(t){let e=t;if(!t)return T.EMPTY;switch(typeof t){case"function":e=new T(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof T)){const u=e;e=new T,e._subscriptions=[u]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:r}=e;if(null===r)e._parentOrParents=this;else if(r instanceof T){if(r===this)return e;e._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return e;r.push(this)}const a=this._subscriptions;return null===a?this._subscriptions=[e]:a.push(e),e}remove(t){const e=this._subscriptions;if(e){const r=e.indexOf(t);-1!==r&&e.splice(r,1)}}}var n;function Yt(n){return n.reduce((t,e)=>t.concat(e instanceof nt?e.errors:e),[])}T.EMPTY=((n=new T).closed=!0,n);const Kt="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class Dt extends T{constructor(t,e,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=De;break;case 1:if(!t){this.destination=De;break}if("object"==typeof t){t instanceof Dt?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new ti(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new ti(this,t,e,r)}}[Kt](){return this}static create(t,e,r){const a=new Dt(t,e,r);return a.syncErrorThrowable=!1,a}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class ti extends Dt{constructor(t,e,r,a){super(),this._parentSubscriber=t;let u,p=this;Ce(e)?u=e:e&&(u=e.next,r=e.error,a=e.complete,e!==De&&(p=Object.create(e),Ce(p.unsubscribe)&&this.add(p.unsubscribe.bind(p)),p.unsubscribe=this.unsubscribe.bind(this))),this._context=p,this._next=u,this._error=r,this._complete=a}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;ve.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:r}=ve;if(this._error)r&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):de(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;de(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);ve.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(r){if(this.unsubscribe(),ve.useDeprecatedSynchronousErrorHandling)throw r;de(r)}}__tryOrSetError(t,e,r){if(!ve.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,r)}catch(a){return ve.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=a,t.syncErrorThrown=!0,!0):(de(a),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const Qe="function"==typeof Symbol&&Symbol.observable||"@@observable";function Lt(n){return n}let ae=(()=>{class n{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(e){const r=new n;return r.source=this,r.operator=e,r}subscribe(e,r,a){const{operator:u}=this,p=function(n,t,e){if(n){if(n instanceof Dt)return n;if(n[Kt])return n[Kt]()}return n||t||e?new Dt(n,t,e):new Dt(De)}(e,r,a);if(p.add(u?u.call(p,this.source):this.source||ve.useDeprecatedSynchronousErrorHandling&&!p.syncErrorThrowable?this._subscribe(p):this._trySubscribe(p)),ve.useDeprecatedSynchronousErrorHandling&&p.syncErrorThrowable&&(p.syncErrorThrowable=!1,p.syncErrorThrown))throw p.syncErrorValue;return p}_trySubscribe(e){try{return this._subscribe(e)}catch(r){ve.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=r),function(n){for(;n;){const{closed:t,destination:e,isStopped:r}=n;if(t||r)return!1;n=e&&e instanceof Dt?e:null}return!0}(e)?e.error(r):console.warn(r)}}forEach(e,r){return new(r=me(r))((a,u)=>{let p;p=this.subscribe(_=>{try{e(_)}catch(D){u(D),p&&p.unsubscribe()}},u,a)})}_subscribe(e){const{source:r}=this;return r&&r.subscribe(e)}[Qe](){return this}pipe(...e){return 0===e.length?this:function(n){return 0===n.length?Lt:1===n.length?n[0]:function(e){return n.reduce((r,a)=>a(r),e)}}(e)(this)}toPromise(e){return new(e=me(e))((r,a)=>{let u;this.subscribe(p=>u=p,p=>a(p),()=>r(u))})}}return n.create=t=>new n(t),n})();function me(n){if(n||(n=ve.Promise||Promise),!n)throw new Error("no Promise impl found");return n}const Ve=(()=>{function n(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return n.prototype=Object.create(Error.prototype),n})();class $e extends T{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}class lt extends Dt{constructor(t){super(t),this.destination=t}}let We=(()=>{class n extends ae{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Kt](){return new lt(this)}lift(e){const r=new wt(this,this);return r.operator=e,r}next(e){if(this.closed)throw new Ve;if(!this.isStopped){const{observers:r}=this,a=r.length,u=r.slice();for(let p=0;p<a;p++)u[p].next(e)}}error(e){if(this.closed)throw new Ve;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:r}=this,a=r.length,u=r.slice();for(let p=0;p<a;p++)u[p].error(e);this.observers.length=0}complete(){if(this.closed)throw new Ve;this.isStopped=!0;const{observers:e}=this,r=e.length,a=e.slice();for(let u=0;u<r;u++)a[u].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new Ve;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new Ve;return this.hasError?(e.error(this.thrownError),T.EMPTY):this.isStopped?(e.complete(),T.EMPTY):(this.observers.push(e),new $e(this,e))}asObservable(){const e=new ae;return e.source=this,e}}return n.create=(t,e)=>new wt(t,e),n})();class wt extends We{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):T.EMPTY}}function at(n){return n&&"function"==typeof n.schedule}function Pe(n,t){return function(r){if("function"!=typeof n)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new Gt(n,t))}}class Gt{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new gt(t,this.project,this.thisArg))}}class gt extends Dt{constructor(t,e,r){super(t),this.project=e,this.count=0,this.thisArg=r||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}const ft=n=>t=>{for(let e=0,r=n.length;e<r&&!t.closed;e++)t.next(n[e]);t.complete()},qt="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",pi=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function $t(n){return!!n&&"function"!=typeof n.subscribe&&"function"==typeof n.then}const ht=n=>{if(n&&"function"==typeof n[Qe])return(n=>t=>{const e=n[Qe]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)})(n);if(pi(n))return ft(n);if($t(n))return(n=>t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,de),t))(n);if(n&&"function"==typeof n[qt])return(n=>t=>{const e=n[qt]();for(;;){let r;try{r=e.next()}catch(a){return t.error(a),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof e.return&&t.add(()=>{e.return&&e.return()}),t})(n);{const e=`You provided ${Ie(n)?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(e)}};function gi(n,t){return new ae(e=>{const r=new T;let a=0;return r.add(t.schedule(function(){a!==n.length?(e.next(n[a++]),e.closed||r.add(this.schedule())):e.complete()})),r})}function rn(n,t){return t?function(n,t){if(null!=n){if(function(n){return n&&"function"==typeof n[Qe]}(n))return function(n,t){return new ae(e=>{const r=new T;return r.add(t.schedule(()=>{const a=n[Qe]();r.add(a.subscribe({next(u){r.add(t.schedule(()=>e.next(u)))},error(u){r.add(t.schedule(()=>e.error(u)))},complete(){r.add(t.schedule(()=>e.complete()))}}))})),r})}(n,t);if($t(n))return function(n,t){return new ae(e=>{const r=new T;return r.add(t.schedule(()=>n.then(a=>{r.add(t.schedule(()=>{e.next(a),r.add(t.schedule(()=>e.complete()))}))},a=>{r.add(t.schedule(()=>e.error(a)))}))),r})}(n,t);if(pi(n))return gi(n,t);if(function(n){return n&&"function"==typeof n[qt]}(n)||"string"==typeof n)return function(n,t){if(!n)throw new Error("Iterable cannot be null");return new ae(e=>{const r=new T;let a;return r.add(()=>{a&&"function"==typeof a.return&&a.return()}),r.add(t.schedule(()=>{a=n[qt](),r.add(t.schedule(function(){if(e.closed)return;let u,p;try{const _=a.next();u=_.value,p=_.done}catch(_){return void e.error(_)}p?e.complete():(e.next(u),this.schedule())}))})),r})}(n,t)}throw new TypeError((null!==n&&typeof n||n)+" is not observable")}(n,t):n instanceof ae?n:new ae(ht(n))}class ut extends Dt{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class sr extends Dt{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function Pn(n,t){if(t.closed)return;if(n instanceof ae)return n.subscribe(t);let e;try{e=ht(n)(t)}catch(r){t.error(r)}return e}function Kn(n,t,e=Number.POSITIVE_INFINITY){return"function"==typeof t?r=>r.pipe(Kn((a,u)=>rn(n(a,u)).pipe(Pe((p,_)=>t(a,p,u,_))),e)):("number"==typeof t&&(e=t),r=>r.lift(new as(n,e)))}class as{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new hr(t,this.project,this.concurrent))}}class hr extends sr{constructor(t,e,r=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const r=this.index++;try{e=this.project(t,r)}catch(a){return void this.destination.error(a)}this.active++,this._innerSub(e)}_innerSub(t){const e=new ut(this),r=this.destination;r.add(e);const a=Pn(t,e);a!==e&&r.add(a)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Ki(n=Number.POSITIVE_INFINITY){return Kn(Lt,n)}function ea(n,t){return t?gi(n,t):new ae(ft(n))}function Ii(...n){let t=Number.POSITIVE_INFINITY,e=null,r=n[n.length-1];return at(r)?(e=n.pop(),n.length>1&&"number"==typeof n[n.length-1]&&(t=n.pop())):"number"==typeof r&&(t=n.pop()),null===e&&1===n.length&&n[0]instanceof ae?n[0]:Ki(t)(ea(n,e))}function gs(){return function(t){return t.lift(new ls(t))}}class ls{constructor(t){this.connectable=t}call(t,e){const{connectable:r}=this;r._refCount++;const a=new qs(t,r),u=e.subscribe(a);return a.closed||(a.connection=r.connect()),u}}class qs extends Dt{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:r}=this,a=t._connection;this.connection=null,a&&(!r||a===r)&&a.unsubscribe()}}class Zn extends ae{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new T,t.add(this.source.subscribe(new us(this.getSubject(),this))),t.closed&&(this._connection=null,t=T.EMPTY)),t}refCount(){return gs()(this)}}const uo=(()=>{const n=Zn.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:n._subscribe},_isComplete:{value:n._isComplete,writable:!0},getSubject:{value:n.getSubject},connect:{value:n.connect},refCount:{value:n.refCount}}})();class us extends lt{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function Fl(){return new We}function co(){return n=>gs()(function(n,t){return function(r){let a;a="function"==typeof n?n:function(){return n};const u=Object.create(r,uo);return u.source=r,u.subjectFactory=a,u}}(Fl)(n))}function Ln(n){for(let t in n)if(n[t]===Ln)return t;throw Error("Could not find renamed property on target object.")}function Dn(n,t){for(const e in t)t.hasOwnProperty(e)&&!n.hasOwnProperty(e)&&(n[e]=t[e])}function tn(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(tn).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const t=n.toString();if(null==t)return""+t;const e=t.indexOf("\n");return-1===e?t:t.substring(0,e)}function Ue(n,t){return null==n||""===n?null===t?"":t:null==t||""===t?n:n+" "+t}const Ne=Ln({__forward_ref__:Ln});function Me(n){return n.__forward_ref__=Me,n.toString=function(){return tn(this())},n}function Y(n){return ie(n)?n():n}function ie(n){return"function"==typeof n&&n.hasOwnProperty(Ne)&&n.__forward_ref__===Me}class Le extends Error{constructor(t,e){super(function(n,t){return`${n?`NG0${n}: `:""}${t}`}(t,e)),this.code=t}}function L(n){return"string"==typeof n?n:null==n?"":String(n)}function q(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():L(n)}function re(n,t){const e=t?` in ${t}`:"";throw new Le("201",`No provider for ${q(n)} found${e}`)}function ta(n,t){null==n&&function(n,t,e,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${e} ${r} ${t} <=Actual]`))}(t,n,null,"!=")}function ot(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function zt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Rl(n){return MS(n,Mh)||MS(n,sL)}function MS(n,t){return n.hasOwnProperty(t)?n[t]:null}function Nl(n){return n&&(n.hasOwnProperty(x0)||n.hasOwnProperty(Lk))?n[x0]:null}const Mh=Ln({\u0275prov:Ln}),x0=Ln({\u0275inj:Ln}),sL=Ln({ngInjectableDef:Ln}),Lk=Ln({ngInjectorDef:Ln});var xn=(()=>((xn=xn||{})[xn.Default=0]="Default",xn[xn.Host=1]="Host",xn[xn.Self=2]="Self",xn[xn.SkipSelf=4]="SkipSelf",xn[xn.Optional=8]="Optional",xn))();let Bk;function sd(n){const t=Bk;return Bk=n,t}function oL(n,t,e){const r=Rl(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:e&xn.Optional?null:void 0!==t?t:void re(tn(n),"Injector")}function na(n){return{toString:n}.toString()}var Pl=(()=>((Pl=Pl||{})[Pl.OnPush=0]="OnPush",Pl[Pl.Default=1]="Default",Pl))(),Or=(()=>((Or=Or||{})[Or.Emulated=0]="Emulated",Or[Or.None=2]="None",Or[Or.ShadowDom=3]="ShadowDom",Or))();const od="undefined"!=typeof globalThis&&globalThis,yu="undefined"!=typeof window&&window,_u="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Qi=od||"undefined"!=typeof global&&global||yu||_u,ad={},vr=[],Ts=Ln({\u0275cmp:Ln}),ia=Ln({\u0275dir:Ln}),fo=Ln({\u0275pipe:Ln}),ks=Ln({\u0275mod:Ln}),Ja=Ln({\u0275loc:Ln}),$r=Ln({\u0275fac:Ln}),Za=Ln({__NG_ELEMENT_ID__:Ln});let ra=0;function Sn(n){return na(()=>{const e={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Pl.OnPush,directiveDefs:null,pipeDefs:null,selectors:n.selectors||vr,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Or.Emulated,id:"c",styles:n.styles||vr,_:null,setInput:null,schemas:n.schemas||null,tView:null},a=n.directives,u=n.features,p=n.pipes;return r.id+=ra++,r.inputs=TS(n.inputs,e),r.outputs=TS(n.outputs),u&&u.forEach(_=>_(r)),r.directiveDefs=a?()=>("function"==typeof a?a():a).map(cs):null,r.pipeDefs=p?()=>("function"==typeof p?p():p).map(el):null,r})}function cs(n){return sa(n)||function(n){return n[ia]||null}(n)}function el(n){return function(n){return n[fo]||null}(n)}const ug={};function Ht(n){return na(()=>{const t={type:n.type,bootstrap:n.bootstrap||vr,declarations:n.declarations||vr,imports:n.imports||vr,exports:n.exports||vr,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null};return null!=n.id&&(ug[n.id]=n.type),t})}function TS(n,t){if(null==n)return ad;const e={};for(const r in n)if(n.hasOwnProperty(r)){let a=n[r],u=a;Array.isArray(a)&&(u=a[1],a=a[0]),e[a]=r,t&&(t[a]=u)}return e}const kt=Sn;function Ys(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,onDestroy:n.type.prototype.ngOnDestroy||null}}function sa(n){return n[Ts]||null}function tl(n,t){const e=n[ks]||null;if(!e&&!0===t)throw new Error(`Type ${tn(n)} does not have '\u0275mod' property.`);return e}function va(n){return Array.isArray(n)&&"object"==typeof n[1]}function Fr(n){return Array.isArray(n)&&!0===n[1]}function fg(n){return 0!=(8&n.flags)}function Bl(n){return 2==(2&n.flags)}function mn(n){return 1==(1&n.flags)}function Qr(n){return null!==n.template}function O0(n){return 0!=(512&n[2])}function hn(n,t){return n.hasOwnProperty($r)?n[$r]:null}class UC{constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}isFirstChange(){return this.firstChange}}function or(){return HC}function HC(n){return n.type.prototype.ngOnChanges&&(n.setInput=Yk),qk}function qk(){const n=NS(this),t=null==n?void 0:n.current;if(t){const e=n.previous;if(e===ad)n.previous=t;else for(let r in t)e[r]=t[r];n.current=null,this.ngOnChanges(t)}}function Yk(n,t,e,r){const a=NS(n)||function(n,t){return n[k0]=t}(n,{previous:ad,current:null}),u=a.current||(a.current={}),p=a.previous,_=this.declaredInputs[e],D=p[_];u[_]=new UC(D&&D.currentValue,t,p===ad),n[r]=t}or.ngInherit=!0;const k0="__ngSimpleChanges__";function NS(n){return n[k0]||null}const GC="http://www.w3.org/2000/svg";let qC;function Jr(n){return!!n.listen}const YC={createRenderer:(n,t)=>void 0!==qC?qC:"undefined"!=typeof document?document:void 0};function ms(n){for(;Array.isArray(n);)n=n[0];return n}function dv(n,t){return ms(t[n])}function Vl(n,t){return ms(t[n.index])}function KC(n,t){return n.data[t]}function pg(n,t){return n[t]}function il(n,t){const e=t[n];return va(e)?e:e[0]}function QC(n){return 4==(4&n[2])}function JC(n){return 128==(128&n[2])}function wf(n,t){return null==t?null:n[t]}function ZC(n){n[18]=0}function fv(n,t){n[5]+=t;let e=n,r=n[3];for(;null!==r&&(1===t&&1===e[5]||-1===t&&0===e[5]);)r[5]+=t,e=r,r=r[3]}const ii={lFrame:yv(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function F0(){return ii.bindingsEnabled}function Ct(){return ii.lFrame.lView}function Oi(){return ii.lFrame.tView}function Zr(n){return ii.lFrame.contextLView=n,n[8]}function Is(){let n=VS();for(;null!==n&&64===n.type;)n=n.parent;return n}function VS(){return ii.lFrame.currentTNode}function ac(n,t){const e=ii.lFrame;e.currentTNode=n,e.isParent=t}function ew(){return ii.lFrame.isParent}function tw(){ii.lFrame.isParent=!1}function R0(){return ii.isInCheckNoChangesMode}function N0(n){ii.isInCheckNoChangesMode=n}function To(){const n=ii.lFrame;let t=n.bindingRootIndex;return-1===t&&(t=n.bindingRootIndex=n.tView.bindingStartIndex),t}function Rh(){return ii.lFrame.bindingIndex++}function bu(n){const t=ii.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+n,e}function gg(n,t){const e=ii.lFrame;e.bindingIndex=e.bindingRootIndex=n,nw(t)}function nw(n){ii.lFrame.currentDirectiveIndex=n}function pv(n){const t=ii.lFrame.currentDirectiveIndex;return-1===t?null:n[t]}function gv(){return ii.lFrame.currentQueryIndex}function mv(n){ii.lFrame.currentQueryIndex=n}function zS(n){const t=n[1];return 2===t.type?t.declTNode:1===t.type?n[6]:null}function Ef(n,t,e){if(e&xn.SkipSelf){let a=t,u=n;for(;!(a=a.parent,null!==a||e&xn.Host||(a=zS(u),null===a||(u=u[15],10&a.type))););if(null===a)return!1;t=a,n=u}const r=ii.lFrame=iw();return r.currentTNode=t,r.lView=n,!0}function L0(n){const t=iw(),e=n[1];ii.lFrame=t,t.currentTNode=e.firstChild,t.lView=n,t.tView=e,t.contextLView=n,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function iw(){const n=ii.lFrame,t=null===n?null:n.child;return null===t?yv(n):t}function yv(n){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=t),t}function rw(){const n=ii.lFrame;return ii.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const _v=rw;function cd(){const n=rw();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Xs(){return ii.lFrame.selectedIndex}function rl(n){ii.lFrame.selectedIndex=n}function es(){const n=ii.lFrame;return KC(n.tView,n.selectedIndex)}function Nh(){ii.lFrame.currentNamespace=GC}function B0(n,t){for(let e=t.directiveStart,r=t.directiveEnd;e<r;e++){const u=n.data[e].type.prototype,{ngAfterContentInit:p,ngAfterContentChecked:_,ngAfterViewInit:D,ngAfterViewChecked:M,ngOnDestroy:I}=u;p&&(n.contentHooks||(n.contentHooks=[])).push(-e,p),_&&((n.contentHooks||(n.contentHooks=[])).push(e,_),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(e,_)),D&&(n.viewHooks||(n.viewHooks=[])).push(-e,D),M&&((n.viewHooks||(n.viewHooks=[])).push(e,M),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(e,M)),null!=I&&(n.destroyHooks||(n.destroyHooks=[])).push(e,I)}}function mg(n,t,e){bv(n,t,3,e)}function vv(n,t,e,r){(3&n[2])===e&&bv(n,t,e,r)}function aw(n,t){let e=n[2];(3&e)===t&&(e&=2047,e+=1,n[2]=e)}function bv(n,t,e,r){const u=null!=r?r:-1,p=t.length-1;let _=0;for(let D=void 0!==r?65535&n[18]:0;D<p;D++)if("number"==typeof t[D+1]){if(_=t[D],null!=r&&_>=r)break}else t[D]<0&&(n[18]+=65536),(_<u||-1==u)&&(lw(n,e,t,D),n[18]=(4294901760&n[18])+D+2),D++}function lw(n,t,e,r){const a=e[r]<0,u=e[r+1],_=n[a?-e[r]:e[r]];if(a){if(n[2]>>11<n[18]>>16&&(3&n[2])===t){n[2]+=2048;try{u.call(_)}finally{}}}else try{u.call(_)}finally{}}class Lh{constructor(t,e,r){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=r}}function yg(n,t,e){const r=Jr(n);let a=0;for(;a<e.length;){const u=e[a];if("number"==typeof u){if(0!==u)break;a++;const p=e[a++],_=e[a++],D=e[a++];r?n.setAttribute(t,_,D,p):t.setAttributeNS(p,_,D)}else{const p=u,_=e[++a];V0(p)?r&&n.setProperty(t,p,_):r?n.setAttribute(t,p,_):t.setAttribute(p,_),a++}}return a}function fw(n){return 3===n||4===n||6===n}function V0(n){return 64===n.charCodeAt(0)}function _g(n,t){if(null!==t&&0!==t.length)if(null===n||0===n.length)n=t.slice();else{let e=-1;for(let r=0;r<t.length;r++){const a=t[r];"number"==typeof a?e=a:0===e||Fo(n,e,a,null,-1===e||2===e?t[++r]:null)}}return n}function Fo(n,t,e,r,a){let u=0,p=n.length;if(-1===t)p=-1;else for(;u<n.length;){const _=n[u++];if("number"==typeof _){if(_===t){p=-1;break}if(_>t){p=u-1;break}}}for(;u<n.length;){const _=n[u];if("number"==typeof _)break;if(_===e){if(null===r)return void(null!==a&&(n[u+1]=a));if(r===n[u+1])return void(n[u+2]=a)}u++,null!==r&&u++,null!==a&&u++}-1!==p&&(n.splice(p,0,t),u=p+1),n.splice(u++,0,e),null!==r&&n.splice(u++,0,r),null!==a&&n.splice(u++,0,a)}function wv(n){return-1!==n}function vg(n){return 32767&n}function dd(n,t){let e=function(n){return n>>16}(n),r=t;for(;e>0;)r=r[15],e--;return r}let Df=!0;function xf(n){const t=Df;return Df=n,t}let Dv=0;function go(n,t){const e=U0(n,t);if(-1!==e)return e;const r=t[1];r.firstCreatePass&&(n.injectorIndex=t.length,z0(r.data,n),z0(t,null),z0(r.blueprint,null));const a=bg(n,t),u=n.injectorIndex;if(wv(a)){const p=vg(a),_=dd(a,t),D=_[1].data;for(let M=0;M<8;M++)t[u+M]=_[p+M]|D[p+M]}return t[u+8]=a,u}function z0(n,t){n.push(0,0,0,0,0,0,0,0,t)}function U0(n,t){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===t[n.injectorIndex+8]?-1:n.injectorIndex}function bg(n,t){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let e=0,r=null,a=t;for(;null!==a;){const u=a[1],p=u.type;if(r=2===p?u.declTNode:1===p?a[6]:null,null===r)return-1;if(e++,a=a[15],-1!==r.injectorIndex)return r.injectorIndex|e<<16}return-1}function Vh(n,t,e){!function(n,t,e){let r;"string"==typeof e?r=e.charCodeAt(0)||0:e.hasOwnProperty(Za)&&(r=e[Za]),null==r&&(r=e[Za]=Dv++);const a=255&r;t.data[n+(a>>5)]|=1<<a}(n,t,e)}function fd(n,t,e){if(e&xn.Optional)return n;re(t,"NodeInjector")}function Ti(n,t,e,r){if(e&xn.Optional&&void 0===r&&(r=null),0==(e&(xn.Self|xn.Host))){const a=n[9],u=sd(void 0);try{return a?a.get(t,r,e&xn.Optional):oL(t,r,e&xn.Optional)}finally{sd(u)}}return fd(r,t,e)}function hd(n,t,e,r=xn.Default,a){if(null!==n){const u=function(n){if("string"==typeof n)return n.charCodeAt(0)||0;const t=n.hasOwnProperty(Za)?n[Za]:void 0;return"number"==typeof t?t>=0?255&t:jh:t}(e);if("function"==typeof u){if(!Ef(t,n,r))return r&xn.Host?fd(a,e,r):Ti(t,e,r,a);try{const p=u(r);if(null!=p||r&xn.Optional)return p;re(e)}finally{_v()}}else if("number"==typeof u){let p=null,_=U0(n,t),D=-1,M=r&xn.Host?t[16][6]:null;for((-1===_||r&xn.SkipSelf)&&(D=-1===_?bg(n,t):t[_+8],-1!==D&&gw(r,!1)?(p=t[1],_=vg(D),t=dd(D,t)):_=-1);-1!==_;){const I=t[1];if(H0(u,_,I.data)){const V=zh(_,t,e,p,r,M);if(V!==$h)return V}D=t[_+8],-1!==D&&gw(r,t[1].data[_+8]===M)&&H0(u,_,t)?(p=I,_=vg(D),t=dd(D,t)):_=-1}}}return Ti(t,e,r,a)}const $h={};function jh(){return new Uh(Is(),Ct())}function zh(n,t,e,r,a,u){const p=t[1],_=p.data[n+8],I=zr(_,p,e,null==r?Bl(_)&&Df:r!=p&&0!=(3&_.type),a&xn.Host&&u===_);return null!==I?sl(t,p,I,_):$h}function zr(n,t,e,r,a){const u=n.providerIndexes,p=t.data,_=1048575&u,D=n.directiveStart,I=u>>20,j=a?_+I:n.directiveEnd;for(let G=r?_:_+I;G<j;G++){const Z=p[G];if(G<D&&e===Z||G>=D&&Z.type===e)return G}if(a){const G=p[D];if(G&&Qr(G)&&G.type===e)return D}return null}function sl(n,t,e,r){let a=n[e];const u=t.data;if(function(n){return n instanceof Lh}(a)){const p=a;p.resolving&&function(n,t){throw new Le("200",`Circular dependency in DI detected for ${n}`)}(q(u[e]));const _=xf(p.canSeeViewProviders);p.resolving=!0;const D=p.injectImpl?sd(p.injectImpl):null;Ef(n,r,xn.Default);try{a=n[e]=p.factory(void 0,u,n,r),t.firstCreatePass&&e>=r.directiveStart&&function(n,t,e){const{ngOnChanges:r,ngOnInit:a,ngDoCheck:u}=t.type.prototype;if(r){const p=HC(t);(e.preOrderHooks||(e.preOrderHooks=[])).push(n,p),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,p)}a&&(e.preOrderHooks||(e.preOrderHooks=[])).push(0-n,a),u&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n,u),(e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n,u))}(e,u[e],t)}finally{null!==D&&sd(D),xf(_),p.resolving=!1,_v()}}return a}function H0(n,t,e){return!!(e[t+(n>>5)]&1<<n)}function gw(n,t){return!(n&xn.Self||n&xn.Host&&t)}class Uh{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return hd(this._tNode,this._lView,t,void 0,e)}}function Cr(n){return na(()=>{const t=n.prototype.constructor,e=t[$r]||mw(t),r=Object.prototype;let a=Object.getPrototypeOf(n.prototype).constructor;for(;a&&a!==r;){const u=a[$r]||mw(a);if(u&&u!==e)return u;a=Object.getPrototypeOf(a)}return u=>new u})}function mw(n){return ie(n)?()=>{const t=mw(Y(n));return t&&t()}:hn(n)}function pd(n){return function(n,t){if("class"===t)return n.classes;if("style"===t)return n.styles;const e=n.attrs;if(e){const r=e.length;let a=0;for(;a<r;){const u=e[a];if(fw(u))break;if(0===u)a+=2;else if("number"==typeof u)for(a++;a<r&&"string"==typeof e[a];)a++;else{if(u===t)return e[a+1];a+=2}}}return null}(Is(),n)}const Hh="__parameters__";function lc(n,t,e){return na(()=>{const r=function(n){return function(...e){if(n){const r=n(...e);for(const a in r)this[a]=r[a]}}}(t);function a(...u){if(this instanceof a)return r.apply(this,u),this;const p=new a(...u);return _.annotation=p,_;function _(D,M,I){const V=D.hasOwnProperty(Hh)?D[Hh]:Object.defineProperty(D,Hh,{value:[]})[Hh];for(;V.length<=I;)V.push(null);return(V[I]=V[I]||[]).push(p),D}}return e&&(a.prototype=Object.create(e.prototype)),a.prototype.ngMetadataName=n,a.annotationCls=a,a})}class Ft{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=ot({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const aF=new Ft("AnalyzeForEntryComponents"),qh=Function;function mo(n,t){void 0===t&&(t=n);for(let e=0;e<n.length;e++){let r=n[e];Array.isArray(r)?(t===n&&(t=n.slice(0,e)),mo(r,t)):t!==n&&t.push(r)}return t}function Ea(n,t){n.forEach(e=>Array.isArray(e)?Ea(e,t):t(e))}function Sf(n,t,e){t>=n.length?n.push(e):n.splice(t,0,e)}function Da(n,t){return t>=n.length-1?n.pop():n.splice(t,1)[0]}function al(n,t){const e=[];for(let r=0;r<n;r++)e.push(t);return e}function yo(n,t,e){let r=Yh(n,t);return r>=0?n[1|r]=e:(r=~r,function(n,t,e,r){let a=n.length;if(a==t)n.push(e,r);else if(1===a)n.push(r,n[0]),n[0]=e;else{for(a--,n.push(n[a-1],n[a]);a>t;)n[a]=n[a-2],a--;n[t]=e,n[t+1]=r}}(n,r,t,e)),r}function K0(n,t){const e=Yh(n,t);if(e>=0)return n[1|e]}function Yh(n,t){return function(n,t,e){let r=0,a=n.length>>e;for(;a!==r;){const u=r+(a-r>>1),p=n[u<<e];if(t===p)return u<<e;p>t?a=u:r=u+1}return~(a<<e)}(n,t,1)}const gd={},Mf="__NG_DI_FLAG__",Ke="ngTempTokenPath",bw=/\n/gm,md="__source",Tv=Ln({provide:String,useValue:Ln});let Cu;function Of(n){const t=Cu;return Cu=n,t}function dF(n,t=xn.Default){if(void 0===Cu)throw new Error("inject() must be called from an injection context");return null===Cu?oL(n,void 0,t):Cu.get(n,t&xn.Optional?null:void 0,t)}function se(n,t=xn.Default){return(Bk||dF)(Y(n),t)}const yd=se;function dc(n){const t=[];for(let e=0;e<n.length;e++){const r=Y(n[e]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let a,u=xn.Default;for(let p=0;p<r.length;p++){const _=r[p],D=xg(_);"number"==typeof D?-1===D?a=_.token:u|=D:a=_}t.push(se(a,u))}else t.push(se(r))}return t}function Xh(n,t){return n[Mf]=t,n.prototype[Mf]=t,n}function xg(n){return n[Mf]}function fc(n,t,e,r){const a=n[Ke];throw t[md]&&a.unshift(t[md]),n.message=function(n,t,e,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.substr(2):n;let a=tn(t);if(Array.isArray(t))a=t.map(tn).join(" -> ");else if("object"==typeof t){let u=[];for(let p in t)if(t.hasOwnProperty(p)){let _=t[p];u.push(p+":"+("string"==typeof _?JSON.stringify(_):tn(_)))}a=`{${u.join(", ")}}`}return`${e}${r?"("+r+")":""}[${a}]: ${n.replace(bw,"\n  ")}`}("\n"+n.message,a,e,r),n.ngTokenPath=a,n[Ke]=null,n}const _d=Xh(lc("Inject",n=>({token:n})),-1),lr=Xh(lc("Optional"),8),wu=Xh(lc("SkipSelf"),4);let Og;function vd(n){var t;return(null===(t=function(){if(void 0===Og&&(Og=null,Qi.trustedTypes))try{Og=Qi.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch(n){}return Og}())||void 0===t?void 0:t.createHTML(n))||n}class xa{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class hc extends xa{getTypeName(){return"HTML"}}class Du extends xa{getTypeName(){return"Style"}}class Lv extends xa{getTypeName(){return"Script"}}class si extends xa{getTypeName(){return"URL"}}class Sa extends xa{getTypeName(){return"ResourceURL"}}function Pr(n){return n instanceof xa?n.changingThisBreaksApplicationSecurity:n}function Ro(n,t){const e=Bv(n);if(null!=e&&e!==t){if("ResourceURL"===e&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${e} (see https://g.co/ng/security#xss)`)}return e===t}function Bv(n){return n instanceof xa&&n.getTypeName()||null}class hF{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(vd(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Vv{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const r=this.inertDocument.createElement("body");e.appendChild(r)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=vd(t),e;const r=this.inertDocument.createElement("body");return r.innerHTML=vd(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(r),r}stripCustomNsAttrs(t){const e=t.attributes;for(let a=e.length-1;0<a;a--){const p=e.item(a).name;("xmlns:ns1"===p||0===p.indexOf("ns1:"))&&t.removeAttribute(p)}let r=t.firstChild;for(;r;)r.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(r),r=r.nextSibling}}const gF=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Aa=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Tg(n){return(n=String(n)).match(gF)||n.match(Aa)?n:"unsafe:"+n}function $v(n){return(n=String(n)).split(",").map(t=>Tg(t.trim())).join(", ")}function No(n){const t={};for(const e of n.split(","))t[e]=!0;return t}function wd(...n){const t={};for(const e of n)for(const r in e)e.hasOwnProperty(r)&&(t[r]=!0);return t}const jv=No("area,br,col,hr,img,wbr"),Ed=No("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),kg=No("rp,rt"),Fg=wd(jv,wd(Ed,No("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),wd(kg,No("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),wd(kg,Ed)),Ow=No("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),oy=No("srcset"),kw=wd(Ow,oy,No("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),No("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Tf=No("script,style,template");class _o{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,r=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?r=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,r&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let a=this.checkClobberedElement(e,e.nextSibling);if(a){e=a;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Fg.hasOwnProperty(e))return this.sanitizedSomething=!0,!Tf.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const r=t.attributes;for(let a=0;a<r.length;a++){const u=r.item(a),p=u.name,_=p.toLowerCase();if(!kw.hasOwnProperty(_)){this.sanitizedSomething=!0;continue}let D=u.value;Ow[_]&&(D=Tg(D)),oy[_]&&(D=$v(D)),this.buf.push(" ",p,'="',kf(D),'"')}return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Fg.hasOwnProperty(e)&&!jv.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(kf(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const xu=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,nA=/([^\#-~ |!])/g;function kf(n){return n.replace(/&/g,"&amp;").replace(xu,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(nA,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ig;function Ff(n,t){let e=null;try{Ig=Ig||function(n){const t=new Vv(n);return function(){try{return!!(new window.DOMParser).parseFromString(vd(""),"text/html")}catch(n){return!1}}()?new hF(t):t}(n);let r=t?String(t):"";e=Ig.getInertBodyElement(r);let a=5,u=r;do{if(0===a)throw new Error("Failed to sanitize html because the input is unstable");a--,r=u,u=e.innerHTML,e=Ig.getInertBodyElement(r)}while(r!==u);return vd((new _o).sanitizeChildren(ly(e)||e))}finally{if(e){const r=ly(e)||e;for(;r.firstChild;)r.removeChild(r.firstChild)}}}function ly(n){return"content"in n&&function(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var wi=(()=>((wi=wi||{})[wi.NONE=0]="NONE",wi[wi.HTML=1]="HTML",wi[wi.STYLE=2]="STYLE",wi[wi.SCRIPT=3]="SCRIPT",wi[wi.URL=4]="URL",wi[wi.RESOURCE_URL=5]="RESOURCE_URL",wi))();function Rg(n){const t=function(){const n=Ct();return n&&n[12]}();return t?t.sanitize(wi.URL,n)||"":Ro(n,"URL")?Pr(n):Tg(L(n))}const cy="__ngContext__";function Lo(n,t){n[cy]=t}function dy(n){const t=function(n){return n[cy]||null}(n);return t?Array.isArray(t)?t:t.lView:null}function Vg(n){return n.ngOriginalError}function iA(n,...t){n.error(...t)}class zl{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),r=this._findContext(t),a=function(n){return n&&n.ngErrorLogger||iA}(t);a(this._console,"ERROR",t),e&&a(this._console,"ORIGINAL ERROR",e),r&&a(this._console,"ERROR CONTEXT",r)}_findContext(t){return t?function(n){return n.ngDebugContext}(t)||this._findContext(Vg(t)):null}_findOriginalError(t){let e=t&&Vg(t);for(;e&&Vg(e);)e=Vg(e);return e||null}}const zw=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Qi))();function ll(n){return n instanceof Function?n():n}var Bo=(()=>((Bo=Bo||{})[Bo.Important=1]="Important",Bo[Bo.DashCase=2]="DashCase",Bo))();function $g(n,t){return undefined(n,t)}function tp(n){const t=n[3];return Fr(t)?t[3]:t}function Gw(n){return qw(n[13])}function Zv(n){return qw(n[4])}function qw(n){for(;null!==n&&!Fr(n);)n=n[4];return n}function vo(n,t,e,r,a){if(null!=r){let u,p=!1;Fr(r)?u=r:va(r)&&(p=!0,r=r[0]);const _=ms(r);0===n&&null!==e?null==a?cA(t,e,_):Ad(t,e,_,a||null,!0):1===n&&null!==e?Ad(t,e,_,a||null,!0):2===n?function(n,t,e){const r=pc(n,t);r&&function(n,t,e,r){Jr(n)?n.removeChild(t,e,r):t.removeChild(e)}(n,r,t,e)}(t,_,p):3===n&&t.destroyNode(_),null!=u&&function(n,t,e,r,a){const u=e[7];u!==ms(e)&&vo(t,n,r,u,a);for(let _=10;_<e.length;_++){const D=e[_];mc(D[1],D,n,t,r,u)}}(t,n,u,e,a)}}function jg(n,t,e){return Jr(n)?n.createElement(t,e):null===e?n.createElement(t):n.createElementNS(e,t)}function uA(n,t){const e=n[9],r=e.indexOf(t),a=t[3];1024&t[2]&&(t[2]&=-1025,fv(a,-1)),e.splice(r,1)}function Ul(n,t){if(n.length<=10)return;const e=10+t,r=n[e];if(r){const a=r[17];null!==a&&a!==n&&uA(a,r),t>0&&(n[e-1][4]=r[4]);const u=Da(n,10+t);!function(n,t){mc(n,t,t[11],2,null,null),t[0]=null,t[6]=null}(r[1],r);const p=u[19];null!==p&&p.detachView(u[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Kw(n,t){if(!(256&t[2])){const e=t[11];Jr(e)&&e.destroyNode&&mc(n,t,e,3,null,null),function(n){let t=n[13];if(!t)return np(n[1],n);for(;t;){let e=null;if(va(t))e=t[13];else{const r=t[10];r&&(e=r)}if(!e){for(;t&&!t[4]&&t!==n;)va(t)&&np(t[1],t),t=t[3];null===t&&(t=n),va(t)&&np(t[1],t),e=t&&t[4]}t=e}}(t)}}function np(n,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(n,t){let e;if(null!=n&&null!=(e=n.destroyHooks))for(let r=0;r<e.length;r+=2){const a=t[e[r]];if(!(a instanceof Lh)){const u=e[r+1];if(Array.isArray(u))for(let p=0;p<u.length;p+=2){const _=a[u[p]],D=u[p+1];try{D.call(_)}finally{}}else try{u.call(a)}finally{}}}}(n,t),function(n,t){const e=n.cleanup,r=t[7];let a=-1;if(null!==e)for(let u=0;u<e.length-1;u+=2)if("string"==typeof e[u]){const p=e[u+1],_="function"==typeof p?p(t):ms(t[p]),D=r[a=e[u+2]],M=e[u+3];"boolean"==typeof M?_.removeEventListener(e[u],D,M):M>=0?r[a=M]():r[a=-M].unsubscribe(),u+=2}else{const p=r[a=e[u+1]];e[u].call(p)}if(null!==r){for(let u=a+1;u<r.length;u++)r[u]();t[7]=null}}(n,t),1===t[1].type&&Jr(t[11])&&t[11].destroy();const e=t[17];if(null!==e&&Fr(t[3])){e!==t[3]&&uA(e,t);const r=t[19];null!==r&&r.detachView(n)}}}function nb(n,t,e){return function(n,t,e){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return e[0];if(2&r.flags){const a=n.data[r.directiveStart].encapsulation;if(a===Or.None||a===Or.Emulated)return null}return Vl(r,e)}(n,t.parent,e)}function Ad(n,t,e,r,a){Jr(n)?n.insertBefore(t,e,r,a):t.insertBefore(e,r,a)}function cA(n,t,e){Jr(n)?n.appendChild(t,e):t.appendChild(e)}function ib(n,t,e,r,a){null!==r?Ad(n,t,e,r,a):cA(n,t,e)}function pc(n,t){return Jr(n)?n.parentNode(t):t.parentNode}function rb(n,t,e){return ip(n,t,e)}let ip=function(n,t,e){return 40&n.type?Vl(n,e):null};function rp(n,t,e,r){const a=nb(n,r,t),u=t[11],_=rb(r.parent||t[6],r,t);if(null!=a)if(Array.isArray(e))for(let D=0;D<e.length;D++)ib(u,a,e[D],_,!1);else ib(u,a,e,_,!1)}function gc(n,t){if(null!==t){const e=t.type;if(3&e)return Vl(t,n);if(4&e)return sb(-1,n[t.index]);if(8&e){const r=t.child;if(null!==r)return gc(n,r);{const a=n[t.index];return Fr(a)?sb(-1,a):ms(a)}}if(32&e)return $g(t,n)()||ms(n[t.index]);{const r=dA(n,t);return null!==r?Array.isArray(r)?r[0]:gc(tp(n[16]),r):gc(n,t.next)}}return null}function dA(n,t){return null!==t?n[16][6].projection[t.projection]:null}function sb(n,t){const e=10+n+1;if(e<t.length){const r=t[e],a=r[1].firstChild;if(null!==a)return gc(r,a)}return t[7]}function ab(n,t,e,r,a,u,p){for(;null!=e;){const _=r[e.index],D=e.type;if(p&&0===t&&(_&&Lo(ms(_),r),e.flags|=4),64!=(64&e.flags))if(8&D)ab(n,t,e.child,r,a,u,!1),vo(t,n,a,_,u);else if(32&D){const M=$g(e,r);let I;for(;I=M();)vo(t,n,a,I,u);vo(t,n,a,_,u)}else 16&D?fA(n,t,r,e,a,u):vo(t,n,a,_,u);e=p?e.projectionNext:e.next}}function mc(n,t,e,r,a,u){ab(e,r,n.firstChild,t,a,u,!1)}function fA(n,t,e,r,a,u){const p=e[16],D=p[6].projection[r.projection];if(Array.isArray(D))for(let M=0;M<D.length;M++)vo(t,n,a,D[M],u);else ab(n,t,D,p[3],a,u,!0)}function tE(n,t,e){Jr(n)?n.setAttribute(t,"style",e):t.style.cssText=e}function sp(n,t,e){Jr(n)?""===e?n.removeAttribute(t,"class"):n.setAttribute(t,"class",e):t.className=e}function lb(n,t,e){let r=n.length;for(;;){const a=n.indexOf(t,e);if(-1===a)return a;if(0===a||n.charCodeAt(a-1)<=32){const u=t.length;if(a+u===r||n.charCodeAt(a+u)<=32)return a}e=a+1}}const nE="ng-template";function ub(n,t,e){let r=0;for(;r<n.length;){let a=n[r++];if(e&&"class"===a){if(a=n[r],-1!==lb(a.toLowerCase(),t,0))return!0}else if(1===a){for(;r<n.length&&"string"==typeof(a=n[r++]);)if(a.toLowerCase()===t)return!0;return!1}}return!1}function gy(n){return 4===n.type&&n.value!==nE}function cb(n,t,e){return t===(4!==n.type||e?n.value:nE)}function my(n,t,e){let r=4;const a=n.attrs||[],u=function(n){for(let t=0;t<n.length;t++)if(fw(n[t]))return t;return n.length}(a);let p=!1;for(let _=0;_<t.length;_++){const D=t[_];if("number"!=typeof D){if(!p)if(4&r){if(r=2|1&r,""!==D&&!cb(n,D,e)||""===D&&1===t.length){if(ul(r))return!1;p=!0}}else{const M=8&r?D:t[++_];if(8&r&&null!==n.attrs){if(!ub(n.attrs,M,e)){if(ul(r))return!1;p=!0}continue}const V=iE(8&r?"class":D,a,gy(n),e);if(-1===V){if(ul(r))return!1;p=!0;continue}if(""!==M){let j;j=V>u?"":a[V+1].toLowerCase();const G=8&r?j:null;if(G&&-1!==lb(G,M,0)||2&r&&M!==j){if(ul(r))return!1;p=!0}}}}else{if(!p&&!ul(r)&&!ul(D))return!1;if(p&&ul(D))continue;p=!1,r=D|1&r}}return ul(r)||p}function ul(n){return 0==(1&n)}function iE(n,t,e,r){if(null===t)return-1;let a=0;if(r||!e){let u=!1;for(;a<t.length;){const p=t[a];if(p===n)return a;if(3===p||6===p)u=!0;else{if(1===p||2===p){let _=t[++a];for(;"string"==typeof _;)_=t[++a];continue}if(4===p)break;if(0===p){a+=4;continue}}a+=u?1:2}return-1}return function(n,t){let e=n.indexOf(4);if(e>-1)for(e++;e<n.length;){const r=n[e];if("number"==typeof r)return-1;if(r===t)return e;e++}return-1}(t,n)}function hA(n,t,e=!1){for(let r=0;r<t.length;r++)if(my(n,t[r],e))return!0;return!1}function oE(n,t){e:for(let e=0;e<t.length;e++){const r=t[e];if(n.length===r.length){for(let a=0;a<n.length;a++)if(n[a]!==r[a])continue e;return!0}}return!1}function yy(n,t){return n?":not("+t.trim()+")":t}function pA(n){let t=n[0],e=1,r=2,a="",u=!1;for(;e<n.length;){let p=n[e];if("string"==typeof p)if(2&r){const _=n[++e];a+="["+p+(_.length>0?'="'+_+'"':"")+"]"}else 8&r?a+="."+p:4&r&&(a+=" "+p);else""!==a&&!ul(p)&&(t+=yy(u,a),a=""),r=p,u=u||!ul(r);e++}return""!==a&&(t+=yy(u,a)),t}const ei={};function mt(n){Lf(Oi(),Ct(),Xs()+n,R0())}function Lf(n,t,e,r){if(!r)if(3==(3&t[2])){const u=n.preOrderCheckHooks;null!==u&&mg(t,u,e)}else{const u=n.preOrderHooks;null!==u&&vv(t,u,0,e)}rl(e)}function db(n,t){return n<<17|t<<2}function cl(n){return n>>17&32767}function zi(n){return 2|n}function Od(n){return(131068&n)>>2}function lE(n,t){return-131069&n|t<<2}function cE(n){return 1|n}function ap(n,t){const e=n.contentQueries;if(null!==e)for(let r=0;r<e.length;r+=2){const a=e[r],u=e[r+1];if(-1!==u){const p=n.data[u];mv(a),p.contentQueries(2,t[u],u)}}}function Wl(n,t,e,r,a,u,p,_,D,M){const I=t.blueprint.slice();return I[0]=a,I[2]=140|r,ZC(I),I[3]=I[15]=n,I[8]=e,I[10]=p||n&&n[10],I[11]=_||n&&n[11],I[12]=D||n&&n[12]||null,I[9]=M||n&&n[9]||null,I[6]=u,I[16]=2==t.type?n[16]:I,I}function Gl(n,t,e,r,a){let u=n.data[t];if(null===u)u=function(n,t,e,r,a){const u=VS(),p=ew(),D=n.data[t]=function(n,t,e,r,a,u){return{type:e,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:a,attrs:u,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,p?u:u&&u.parent,e,t,r,a);return null===n.firstChild&&(n.firstChild=D),null!==u&&(p?null==u.child&&null!==D.parent&&(u.child=D):null===u.next&&(u.next=D)),D}(n,t,e,r,a),ii.lFrame.inI18n&&(u.flags|=64);else if(64&u.type){u.type=e,u.value=r,u.attrs=a;const p=function(){const n=ii.lFrame,t=n.currentTNode;return n.isParent?t:t.parent}();u.injectorIndex=null===p?-1:p.injectorIndex}return ac(u,!0),u}function _c(n,t,e,r){if(0===e)return-1;const a=t.length;for(let u=0;u<e;u++)t.push(r),n.blueprint.push(r),n.data.push(null);return a}function Qs(n,t,e){L0(t);try{const r=n.viewQuery;null!==r&&wb(1,r,e);const a=n.template;null!==a&&DA(n,t,a,1,e),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&ap(n,t),n.staticViewQueries&&wb(2,n.viewQuery,e);const u=n.components;null!==u&&function(n,t){for(let e=0;e<t.length;e++)vb(n,t[e])}(t,u)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{t[2]&=-5,cd()}}function lp(n,t,e,r){const a=t[2];if(256==(256&a))return;L0(t);const u=R0();try{ZC(t),function(n){ii.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==e&&DA(n,t,e,2,r);const p=3==(3&a);if(!u)if(p){const M=n.preOrderCheckHooks;null!==M&&mg(t,M,null)}else{const M=n.preOrderHooks;null!==M&&vv(t,M,0,null),aw(t,0)}if(function(n){for(let t=Gw(n);null!==t;t=Zv(t)){if(!t[2])continue;const e=t[9];for(let r=0;r<e.length;r++){const a=e[r],u=a[3];0==(1024&a[2])&&fv(u,1),a[2]|=1024}}}(t),function(n){for(let t=Gw(n);null!==t;t=Zv(t))for(let e=10;e<t.length;e++){const r=t[e],a=r[1];JC(r)&&lp(a,r,a.template,r[8])}}(t),null!==n.contentQueries&&ap(n,t),!u)if(p){const M=n.contentCheckHooks;null!==M&&mg(t,M)}else{const M=n.contentHooks;null!==M&&vv(t,M,1),aw(t,1)}!function(n,t){const e=n.hostBindingOpCodes;if(null!==e)try{for(let r=0;r<e.length;r++){const a=e[r];if(a<0)rl(~a);else{const u=a,p=e[++r],_=e[++r];gg(p,u),_(2,t[u])}}}finally{rl(-1)}}(n,t);const _=n.components;null!==_&&function(n,t){for(let e=0;e<t.length;e++)OE(n,t[e])}(t,_);const D=n.viewQuery;if(null!==D&&wb(2,D,r),!u)if(p){const M=n.viewCheckHooks;null!==M&&mg(t,M)}else{const M=n.viewHooks;null!==M&&vv(t,M,2),aw(t,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),u||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,fv(t[3],-1))}finally{cd()}}function vE(n,t,e,r){const a=t[10],u=!R0(),p=QC(t);try{u&&!p&&a.begin&&a.begin(),p&&Qs(n,t,r),lp(n,t,e,r)}finally{u&&!p&&a.end&&a.end()}}function DA(n,t,e,r,a){const u=Xs(),p=2&r;try{rl(-1),p&&t.length>20&&Lf(n,t,20,R0()),e(r,a)}finally{rl(u)}}function xA(n,t,e){if(fg(t)){const a=t.directiveEnd;for(let u=t.directiveStart;u<a;u++){const p=n.data[u];p.contentQueries&&p.contentQueries(1,e[u],u)}}}function bE(n,t,e){!F0()||(function(n,t,e,r){const a=e.directiveStart,u=e.directiveEnd;n.firstCreatePass||go(e,t),Lo(r,t);const p=e.initialInputs;for(let _=a;_<u;_++){const D=n.data[_],M=Qr(D);M&&NF(t,e,D);const I=sl(t,n,_,e);Lo(I,t),null!==p&&PF(0,_-a,I,D,0,p),M&&(il(e.index,t)[8]=I)}}(n,t,e,Vl(e,t)),128==(128&e.flags)&&function(n,t,e){const r=e.directiveStart,a=e.directiveEnd,p=e.index,_=ii.lFrame.currentDirectiveIndex;try{rl(p);for(let D=r;D<a;D++){const M=n.data[D],I=t[D];nw(D),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&gb(M,I)}}finally{rl(-1),nw(_)}}(n,t,e))}function zf(n,t,e=Vl){const r=t.localNames;if(null!==r){let a=t.index+1;for(let u=0;u<r.length;u+=2){const p=r[u+1],_=-1===p?e(t,n):n[p];n[a++]=_}}}function SA(n){const t=n.tView;return null===t||t.incompleteFirstPass?n.tView=Ey(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):t}function Ey(n,t,e,r,a,u,p,_,D,M){const I=20+r,V=I+a,j=function(n,t){const e=[];for(let r=0;r<t;r++)e.push(r<n?null:ei);return e}(I,V),G="function"==typeof M?M():M;return j[1]={type:n,blueprint:j,template:e,queries:null,viewQuery:_,declTNode:t,data:j.slice().fill(null,I),bindingStartIndex:I,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof u?u():u,pipeRegistry:"function"==typeof p?p():p,firstChild:null,schemas:D,consts:G,incompleteFirstPass:!1}}function CE(n,t,e,r){const a=Kg(t);null===e?a.push(r):(a.push(e),n.firstCreatePass&&kE(n).push(r,a.length-1))}function Zi(n,t,e){for(let r in n)if(n.hasOwnProperty(r)){const a=n[r];(e=null===e?{}:e).hasOwnProperty(r)?e[r].push(t,a):e[r]=[t,a]}return e}function Js(n,t,e,r,a,u,p,_){const D=Vl(t,e);let I,M=t.inputs;!_&&null!=M&&(I=M[r])?(FE(n,e,I,r,a),Bl(t)&&function(n,t){const e=il(t,n);16&e[2]||(e[2]|=64)}(e,t.index)):3&t.type&&(r=function(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),a=null!=p?p(a,t.value||"",r):a,Jr(u)?u.setProperty(D,r,a):V0(r)||(D.setProperty?D.setProperty(r,a):D[r]=a))}function hb(n,t,e,r){let a=!1;if(F0()){const u=function(n,t,e){const r=n.directiveRegistry;let a=null;if(r)for(let u=0;u<r.length;u++){const p=r[u];hA(e,p.selectors,!1)&&(a||(a=[]),Vh(go(e,t),n,p.type),Qr(p)?(SE(n,e),a.unshift(p)):a.push(p))}return a}(n,t,e),p=null===r?null:{"":-1};if(null!==u){a=!0,AE(e,n.data.length,u.length);for(let I=0;I<u.length;I++){const V=u[I];V.providersResolver&&V.providersResolver(V)}let _=!1,D=!1,M=_c(n,t,u.length,null);for(let I=0;I<u.length;I++){const V=u[I];e.mergedAttrs=_g(e.mergedAttrs,V.hostAttrs),kA(n,e,t,M,V),mb(M,V,p),null!==V.contentQueries&&(e.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(e.flags|=128);const j=V.type.prototype;!_&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e.index),_=!0),!D&&(j.ngOnChanges||j.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e.index),D=!0),M++}!function(n,t){const r=t.directiveEnd,a=n.data,u=t.attrs,p=[];let _=null,D=null;for(let M=t.directiveStart;M<r;M++){const I=a[M],V=I.inputs,j=null===u||gy(t)?null:Xg(V,u);p.push(j),_=Zi(V,M,_),D=Zi(I.outputs,M,D)}null!==_&&(_.hasOwnProperty("class")&&(t.flags|=16),_.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=p,t.inputs=_,t.outputs=D}(n,e)}p&&function(n,t,e){if(t){const r=n.localNames=[];for(let a=0;a<t.length;a+=2){const u=e[t[a+1]];if(null==u)throw new Le("301",`Export of name '${t[a+1]}' not found!`);r.push(t[a],u)}}}(e,r,p)}return e.mergedAttrs=_g(e.mergedAttrs,e.attrs),a}function DE(n,t,e,r,a,u){const p=u.hostBindings;if(p){let _=n.hostBindingOpCodes;null===_&&(_=n.hostBindingOpCodes=[]);const D=~t.index;(function(n){let t=n.length;for(;t>0;){const e=n[--t];if("number"==typeof e&&e<0)return e}return 0})(_)!=D&&_.push(D),_.push(r,a,p)}}function gb(n,t){null!==n.hostBindings&&n.hostBindings(1,t)}function SE(n,t){t.flags|=2,(n.components||(n.components=[])).push(t.index)}function mb(n,t,e){if(e){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)e[t.exportAs[r]]=n;Qr(t)&&(e[""]=n)}}function AE(n,t,e){n.flags|=1,n.directiveStart=t,n.directiveEnd=t+e,n.providerIndexes=t}function kA(n,t,e,r,a){n.data[r]=a;const u=a.factory||(a.factory=hn(a.type)),p=new Lh(u,Qr(a),null);n.blueprint[r]=p,e[r]=p,DE(n,t,0,r,_c(n,e,a.hostVars,ei),a)}function NF(n,t,e){const r=Vl(t,n),a=SA(e),u=n[10],p=Mu(n,Wl(n,a,null,e.onPush?64:16,r,t,u,u.createRenderer(r,e),null,null));n[t.index]=p}function ur(n,t,e,r,a,u){const p=Vl(n,t);!function(n,t,e,r,a,u,p){if(null==u)Jr(n)?n.removeAttribute(t,a,e):t.removeAttribute(a);else{const _=null==p?L(u):p(u,r||"",a);Jr(n)?n.setAttribute(t,a,_,e):e?t.setAttributeNS(e,a,_):t.setAttribute(a,_)}}(t[11],p,u,n.value,e,r,a)}function PF(n,t,e,r,a,u){const p=u[t];if(null!==p){const _=r.setInput;for(let D=0;D<p.length;){const M=p[D++],I=p[D++],V=p[D++];null!==_?r.setInput(e,V,M,I):e[I]=V}}}function Xg(n,t){let e=null,r=0;for(;r<t.length;){const a=t[r];if(0!==a)if(5!==a){if("number"==typeof a)break;n.hasOwnProperty(a)&&(null===e&&(e=[]),e.push(a,n[a],t[r+1])),r+=2}else r+=2;else r+=4}return e}function ql(n,t,e,r){return new Array(n,!0,!1,t,null,0,r,e,null,null)}function OE(n,t){const e=il(t,n);if(JC(e)){const r=e[1];80&e[2]?lp(r,e,r.template,e[8]):e[5]>0&&_b(e)}}function _b(n){for(let r=Gw(n);null!==r;r=Zv(r))for(let a=10;a<r.length;a++){const u=r[a];if(1024&u[2]){const p=u[1];lp(p,u,p.template,u[8])}else u[5]>0&&_b(u)}const e=n[1].components;if(null!==e)for(let r=0;r<e.length;r++){const a=il(e[r],n);JC(a)&&a[5]>0&&_b(a)}}function vb(n,t){const e=il(t,n),r=e[1];(function(n,t){for(let e=t.length;e<n.blueprint.length;e++)t.push(n.blueprint[e])})(r,e),Qs(r,e,e[8])}function Mu(n,t){return n[13]?n[14][4]=t:n[13]=t,n[14]=t,t}function dp(n){for(;n;){n[2]|=64;const t=tp(n);if(O0(n)&&!t)return n;n=t}return null}function Cb(n,t,e){const r=t[10];r.begin&&r.begin();try{lp(n,t,n.template,e)}catch(a){throw Sy(t,a),a}finally{r.end&&r.end()}}function ua(n){!function(n){for(let t=0;t<n.components.length;t++){const e=n.components[t],r=dy(e),a=r[1];vE(a,r,a.template,e)}}(n[8])}function wb(n,t,e){mv(0),t(n,e)}const jo=(()=>Promise.resolve(null))();function Kg(n){return n[7]||(n[7]=[])}function kE(n){return n.cleanup||(n.cleanup=[])}function Hf(n,t,e){return(null===n||Qr(n))&&(e=function(n){for(;Array.isArray(n);){if("object"==typeof n[1])return n;n=n[0]}return null}(e[t.index])),e[11]}function Sy(n,t){const e=n[9],r=e?e.get(zl,null):null;r&&r.handleError(t)}function FE(n,t,e,r,a){for(let u=0;u<e.length;){const p=e[u++],_=e[u++],D=t[p],M=n.data[p];null!==M.setInput?M.setInput(D,a,r,_):D[_]=a}}function Ou(n,t,e){const r=dv(t,n);!function(n,t,e){Jr(n)?n.setValue(t,e):t.textContent=e}(n[11],r,e)}function hp(n,t,e){let r=e?n.styles:null,a=e?n.classes:null,u=0;if(null!==t)for(let p=0;p<t.length;p++){const _=t[p];"number"==typeof _?u=_:1==u?a=Ue(a,_):2==u&&(r=Ue(r,_+": "+t[++p]+";"))}e?n.styles=r:n.stylesWithoutHost=r,e?n.classes=a:n.classesWithoutHost=a}const pp=new Ft("INJECTOR",-1);class IA{get(t,e=gd){if(e===gd){const r=new Error(`NullInjectorError: No provider for ${tn(t)}!`);throw r.name="NullInjectorError",r}return e}}const Qg=new Ft("Set Injector scope."),Jg={},Eb={};let Ay;function NE(){return void 0===Ay&&(Ay=new IA),Ay}function PE(n,t=null,e=null,r){return new Db(n,e,t||NE(),r)}class Db{constructor(t,e,r,a=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const u=[];e&&Ea(e,_=>this.processProvider(_,t,e)),Ea([t],_=>this.processInjectorType(_,[],u)),this.records.set(pp,Gf(void 0,this));const p=this.records.get(Qg);this.scope=null!=p?p.value:null,this.source=a||("object"==typeof t?null:tn(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=gd,r=xn.Default){this.assertNotDestroyed();const a=Of(this),u=sd(void 0);try{if(!(r&xn.SkipSelf)){let _=this.records.get(t);if(void 0===_){const D=function(n){return"function"==typeof n||"object"==typeof n&&n instanceof Ft}(t)&&Rl(t);_=D&&this.injectableDefInScope(D)?Gf(My(t),Jg):null,this.records.set(t,_)}if(null!=_)return this.hydrate(t,_)}return(r&xn.Self?NE():this.parent).get(t,e=r&xn.Optional&&e===gd?null:e)}catch(p){if("NullInjectorError"===p.name){if((p[Ke]=p[Ke]||[]).unshift(tn(t)),a)throw p;return fc(p,t,"R3InjectorError",this.source)}throw p}finally{sd(u),Of(a)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((r,a)=>t.push(tn(a))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,r){if(!(t=Y(t)))return!1;let a=Nl(t);const u=null==a&&t.ngModule||void 0,p=void 0===u?t:u,_=-1!==r.indexOf(p);if(void 0!==u&&(a=Nl(u)),null==a)return!1;if(null!=a.imports&&!_){let I;r.push(p);try{Ea(a.imports,V=>{this.processInjectorType(V,e,r)&&(void 0===I&&(I=[]),I.push(V))})}finally{}if(void 0!==I)for(let V=0;V<I.length;V++){const{ngModule:j,providers:G}=I[V];Ea(G,Z=>this.processProvider(Z,j,G||vr))}}this.injectorDefTypes.add(p);const D=hn(p)||(()=>new p);this.records.set(p,Gf(D,Jg));const M=a.providers;if(null!=M&&!_){const I=t;Ea(M,V=>this.processProvider(V,I,M))}return void 0!==u&&void 0!==t.providers}processProvider(t,e,r){let a=Tu(t=Y(t))?t:Y(t&&t.provide);const u=function(n,t,e){return xb(n)?Gf(void 0,n.useValue):Gf(vc(n),Jg)}(t);if(Tu(t)||!0!==t.multi)this.records.get(a);else{let p=this.records.get(a);p||(p=Gf(void 0,Jg,!0),p.factory=()=>dc(p.multi),this.records.set(a,p)),a=t,p.multi.push(t)}this.records.set(a,u)}hydrate(t,e){return e.value===Jg&&(e.value=Eb,e.value=e.factory()),"object"==typeof e.value&&e.value&&function(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(e.value)&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=Y(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function My(n){const t=Rl(n),e=null!==t?t.factory:hn(n);if(null!==e)return e;if(n instanceof Ft)throw new Error(`Token ${tn(n)} is missing a \u0275prov definition.`);if(n instanceof Function)return function(n){const t=n.length;if(t>0){const r=al(t,"?");throw new Error(`Can't resolve all parameters for ${tn(n)}: (${r.join(", ")}).`)}const e=function(n){const t=n&&(n[Mh]||n[sL]);if(t){const e=function(n){if(n.hasOwnProperty("name"))return n.name;const t=(""+n).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${e}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${e}" class.`),t}return null}(n);return null!==e?()=>e.factory(n):()=>new n}(n);throw new Error("unreachable")}function vc(n,t,e){let r;if(Tu(n)){const a=Y(n);return hn(a)||My(a)}if(xb(n))r=()=>Y(n.useValue);else if(function(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...dc(n.deps||[]));else if(function(n){return!(!n||!n.useExisting)}(n))r=()=>se(Y(n.useExisting));else{const a=Y(n&&(n.useClass||n.provide));if(!function(n){return!!n.deps}(n))return hn(a)||My(a);r=()=>new a(...dc(n.deps))}return r}function Gf(n,t,e=!1){return{factory:n,value:t,multi:e?[]:void 0}}function xb(n){return null!==n&&"object"==typeof n&&Tv in n}function Tu(n){return"function"==typeof n}const BA=function(n,t,e){return function(n,t=null,e=null,r){const a=PE(n,t,e,r);return a._resolveInjectorDefTypes(),a}({name:e},t,n,e)};let ai=(()=>{class n{static create(e,r){return Array.isArray(e)?BA(e,r,""):BA(e.providers,e.parent,e.name||"")}}return n.THROW_IF_NOT_FOUND=gd,n.NULL=new IA,n.\u0275prov=ot({token:n,providedIn:"any",factory:()=>se(pp)}),n.__NG_ELEMENT_ID__=-1,n})();function Zs(n,t){B0(dy(n)[1],Is())}function qn(n){let t=function(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),e=!0;const r=[n];for(;t;){let a;if(Qr(n))a=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");a=t.\u0275dir}if(a){if(e){r.push(a);const p=n;p.inputs=hs(n.inputs),p.declaredInputs=hs(n.declaredInputs),p.outputs=hs(n.outputs);const _=a.hostBindings;_&&HE(n,_);const D=a.viewQuery,M=a.contentQueries;if(D&&Ry(n,D),M&&yp(n,M),Dn(n.inputs,a.inputs),Dn(n.declaredInputs,a.declaredInputs),Dn(n.outputs,a.outputs),Qr(a)&&a.data.animation){const I=n.data;I.animation=(I.animation||[]).concat(a.data.animation)}}const u=a.features;if(u)for(let p=0;p<u.length;p++){const _=u[p];_&&_.ngInherit&&_(n),_===qn&&(e=!1)}}t=Object.getPrototypeOf(t)}!function(n){let t=0,e=null;for(let r=n.length-1;r>=0;r--){const a=n[r];a.hostVars=t+=a.hostVars,a.hostAttrs=_g(a.hostAttrs,e=_g(e,a.hostAttrs))}}(r)}function hs(n){return n===ad?{}:n===vr?[]:n}function Ry(n,t){const e=n.viewQuery;n.viewQuery=e?(r,a)=>{t(r,a),e(r,a)}:t}function yp(n,t){const e=n.contentQueries;n.contentQueries=e?(r,a,u)=>{t(r,a,u),e(r,a,u)}:t}function HE(n,t){const e=n.hostBindings;n.hostBindings=e?(r,a)=>{t(r,a),e(r,a)}:t}let vp=null;function zo(){if(!vp){const n=Qi.Symbol;if(n&&n.iterator)vp=n.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const r=t[e];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(vp=r)}}}return vp}class ku{constructor(t){this.wrapped=t}static wrap(t){return new ku(t)}static unwrap(t){return ku.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof ku}}function bp(n){return!!tm(n)&&(Array.isArray(n)||!(n instanceof Map)&&zo()in n)}function tm(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ql(n,t,e){return n[t]=e}function ys(n,t,e){return!Object.is(n[t],e)&&(n[t]=e,!0)}function mi(n,t,e,r){const a=Ct();return ys(a,Rh(),t)&&(Oi(),ur(es(),a,n,t,e,r)),mi}function qf(n,t,e,r){return ys(n,Rh(),e)?t+L(e)+r:ei}function cn(n,t,e,r,a,u,p,_){const D=Ct(),M=Oi(),I=n+20,V=M.firstCreatePass?function(n,t,e,r,a,u,p,_,D){const M=t.consts,I=Gl(t,n,4,p||null,wf(M,_));hb(t,e,I,wf(M,D)),B0(t,I);const V=I.tViews=Ey(2,I,r,a,u,t.directiveRegistry,t.pipeRegistry,null,t.schemas,M);return null!==t.queries&&(t.queries.template(t,I),V.queries=t.queries.embeddedTView(I)),I}(I,M,D,t,e,r,a,u,p):M.data[I];ac(V,!1);const j=D[11].createComment("");rp(M,D,j,V),Lo(j,D),Mu(D,D[I]=ql(j,D,j,V)),mn(V)&&bE(M,D,V),null!=p&&zf(D,V,_)}function Kf(n){return pg(ii.lFrame.contextLView,20+n)}function ue(n,t=xn.Default){const e=Ct();return null===e?se(n,t):hd(Is(),e,Y(n),t)}function yt(n,t,e){const r=Ct();return ys(r,Rh(),t)&&Js(Oi(),es(),r,n,t,r[11],e,!1),yt}function Op(n,t,e,r,a){const p=a?"class":"style";FE(n,e,t.inputs[p],p,r)}function we(n,t,e,r){const a=Ct(),u=Oi(),p=20+n,_=a[11],D=a[p]=jg(_,t,ii.lFrame.currentNamespace),M=u.firstCreatePass?function(n,t,e,r,a,u,p){const _=t.consts,M=Gl(t,n,2,a,wf(_,u));return hb(t,e,M,wf(_,p)),null!==M.attrs&&hp(M,M.attrs,!1),null!==M.mergedAttrs&&hp(M,M.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,M),M}(p,u,a,0,t,e,r):u.data[p];ac(M,!0);const I=M.mergedAttrs;null!==I&&yg(_,D,I);const V=M.classes;null!==V&&sp(_,D,V);const j=M.styles;null!==j&&tE(_,D,j),64!=(64&M.flags)&&rp(u,a,D,M),0===ii.lFrame.elementDepthCount&&Lo(D,a),ii.lFrame.elementDepthCount++,mn(M)&&(bE(u,a,M),xA(u,M,a)),null!==r&&zf(a,M)}function Ee(){let n=Is();ew()?tw():(n=n.parent,ac(n,!1));const t=n;ii.lFrame.elementDepthCount--;const e=Oi();e.firstCreatePass&&(B0(e,n),fg(n)&&e.queries.elementEnd(n)),null!=t.classesWithoutHost&&function(n){return 0!=(16&n.flags)}(t)&&Op(e,t,Ct(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(n){return 0!=(32&n.flags)}(t)&&Op(e,t,Ct(),t.stylesWithoutHost,!1)}function on(n,t,e,r){we(n,t,e,r),Ee()}function Tp(n,t,e){const r=Ct(),a=Oi(),u=n+20,p=a.firstCreatePass?function(n,t,e,r,a){const u=t.consts,p=wf(u,r),_=Gl(t,n,8,"ng-container",p);return null!==p&&hp(_,p,!0),hb(t,e,_,wf(u,a)),null!==t.queries&&t.queries.elementStart(t,_),_}(u,a,r,t,e):a.data[u];ac(p,!0);const _=r[u]=r[11].createComment("");rp(a,r,_,p),Lo(_,r),mn(p)&&(bE(a,r,p),xA(a,p,r)),null!=e&&zf(r,p)}function $b(){let n=Is();const t=Oi();ew()?tw():(n=n.parent,ac(n,!1)),t.firstCreatePass&&(B0(t,n),fg(n)&&t.queries.elementEnd(n))}function eo(){return Ct()}function Vy(n){return!!n&&"function"==typeof n.then}function jb(n){return!!n&&"function"==typeof n.subscribe}const gm=jb;function Cn(n,t,e,r){const a=Ct(),u=Oi(),p=Is();return eD(u,a,a[11],p,n,t,!!e,r),Cn}function mm(n,t){const e=Is(),r=Ct(),a=Oi();return eD(a,r,Hf(pv(a.data),e,r),e,n,t,!1),mm}function eD(n,t,e,r,a,u,p,_){const D=mn(r),I=n.firstCreatePass&&kE(n),V=t[8],j=Kg(t);let G=!0;if(3&r.type||_){const be=Vl(r,t),Ye=_?_(be):be,je=j.length,Et=_?Wt=>_(ms(Wt[r.index])):r.index;if(Jr(e)){let Wt=null;if(!_&&D&&(Wt=function(n,t,e,r){const a=n.cleanup;if(null!=a)for(let u=0;u<a.length-1;u+=2){const p=a[u];if(p===e&&a[u+1]===r){const _=t[7],D=a[u+2];return _.length>D?_[D]:null}"string"==typeof p&&(u+=2)}return null}(n,t,a,r.index)),null!==Wt)(Wt.__ngLastListenerFn__||Wt).__ngNextListenerFn__=u,Wt.__ngLastListenerFn__=u,G=!1;else{u=_m(r,t,V,u,!1);const ri=e.listen(Ye,a,u);j.push(u,ri),I&&I.push(a,Et,je,je+1)}}else u=_m(r,t,V,u,!0),Ye.addEventListener(a,u,p),j.push(u),I&&I.push(a,Et,je,p)}else u=_m(r,t,V,u,!1);const Z=r.outputs;let ye;if(G&&null!==Z&&(ye=Z[a])){const be=ye.length;if(be)for(let Ye=0;Ye<be;Ye+=2){const dr=t[ye[Ye]][ye[Ye+1]].subscribe(u),fr=j.length;j.push(u,dr),I&&I.push(a,r.index,fr,-(fr+1))}}}function ym(n,t,e,r){try{return!1!==e(r)}catch(a){return Sy(n,a),!1}}function _m(n,t,e,r,a){return function u(p){if(p===Function)return r;const _=2&n.flags?il(n.index,t):t;0==(32&t[2])&&dp(_);let D=ym(t,0,r,p),M=u.__ngNextListenerFn__;for(;M;)D=ym(t,0,M,p)&&D,M=M.__ngNextListenerFn__;return a&&!1===D&&(p.preventDefault(),p.returnValue=!1),D}}function dn(n=1){return function(n){return(ii.lFrame.contextLView=function(n,t){for(;n>0;)t=t[15],n--;return t}(n,ii.lFrame.contextLView))[8]}(n)}function Dc(n,t){let e=null;const r=function(n){const t=n.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(n);for(let a=0;a<t.length;a++){const u=t[a];if("*"!==u){if(null===r?hA(n,u,!0):oE(r,u))return a}else e=a}return e}function vs(n){const t=Ct()[16][6];if(!t.projection){const r=t.projection=al(n?n.length:1,null),a=r.slice();let u=t.child;for(;null!==u;){const p=n?Dc(u,n):0;null!==p&&(a[p]?a[p].projectionNext=u:r[p]=u,a[p]=u),u=u.next}}}function Ei(n,t=0,e){const r=Ct(),a=Oi(),u=Gl(a,20+n,16,null,e||null);null===u.projection&&(u.projection=t),tw(),64!=(64&u.flags)&&function(n,t,e){fA(t[11],0,t,e,nb(n,e,t),rb(e.parent||t[6],e,t))}(a,r,u)}function nM(n,t,e,r,a){const u=n[e+1],p=null===t;let _=r?cl(u):Od(u),D=!1;for(;0!==_&&(!1===D||p);){const I=n[_+1];Zl(n[_],t)&&(D=!0,n[_+1]=r?cE(I):zi(I)),_=r?cl(I):Od(I)}D&&(n[e+1]=r?zi(u):cE(u))}function Zl(n,t){return null===n||null==t||(Array.isArray(n)?n[1]:n)===t||!(!Array.isArray(n)||"string"!=typeof t)&&Yh(n,t)>=0}const Vs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function bm(n){return n.substring(Vs.key,Vs.keyEnd)}function zb(n,t){const e=Vs.textEnd;return e===t?-1:(t=Vs.keyEnd=function(n,t,e){for(;t<e&&n.charCodeAt(t)>32;)t++;return t}(n,Vs.key=t,e),ml(n,t,e))}function ml(n,t,e){for(;t<e&&n.charCodeAt(t)<=32;)t++;return t}function Co(n,t,e){return Nu(n,t,e,!1),Co}function Qn(n,t){return Nu(n,t,null,!0),Qn}function is(n){Pu(yo,Ru,n,!0)}function Ru(n,t){for(let e=function(n){return function(n){Vs.key=0,Vs.keyEnd=0,Vs.value=0,Vs.valueEnd=0,Vs.textEnd=n.length}(n),zb(n,ml(n,0,Vs.textEnd))}(t);e>=0;e=zb(t,e))yo(n,bm(t),!0)}function Nu(n,t,e,r){const a=Ct(),u=Oi(),p=bu(2);u.firstUpdatePass&&uM(u,n,p,r),t!==ei&&ys(a,p,t)&&eu(u,u.data[Xs()],a,a[11],n,a[p+1]=function(n,t){return null==n||("string"==typeof t?n+=t:"object"==typeof n&&(n=tn(Pr(n)))),n}(t,e),r,p)}function Pu(n,t,e,r){const a=Oi(),u=bu(2);a.firstUpdatePass&&uM(a,null,u,r);const p=Ct();if(e!==ei&&ys(p,u,e)){const _=a.data[Xs()];if(fM(_,r)&&!lM(a,u)){let D=r?_.classesWithoutHost:_.stylesWithoutHost;null!==D&&(e=Ue(D,e||"")),Op(a,_,p,e,r)}else!function(n,t,e,r,a,u,p,_){a===ei&&(a=vr);let D=0,M=0,I=0<a.length?a[0]:null,V=0<u.length?u[0]:null;for(;null!==I||null!==V;){const j=D<a.length?a[D+1]:void 0,G=M<u.length?u[M+1]:void 0;let ye,Z=null;I===V?(D+=2,M+=2,j!==G&&(Z=V,ye=G)):null===V||null!==I&&I<V?(D+=2,Z=I):(M+=2,Z=V,ye=G),null!==Z&&eu(n,t,e,r,Z,ye,p,_),I=D<a.length?a[D]:null,V=M<u.length?u[M]:null}}(a,_,p,p[11],p[u+1],p[u+1]=function(n,t,e){if(null==e||""===e)return vr;const r=[],a=Pr(e);if(Array.isArray(a))for(let u=0;u<a.length;u++)n(r,a[u],!0);else if("object"==typeof a)for(const u in a)a.hasOwnProperty(u)&&n(r,u,a[u]);else"string"==typeof a&&t(r,a);return r}(n,t,e),r,u)}}function lM(n,t){return t>=n.expandoStartIndex}function uM(n,t,e,r){const a=n.data;if(null===a[e+1]){const u=a[Xs()],p=lM(n,e);fM(u,r)&&null===t&&!p&&(t=!1),t=function(n,t,e,r){const a=pv(n);let u=r?t.residualClasses:t.residualStyles;if(null===a)0===(r?t.classBindings:t.styleBindings)&&(e=Cm(e=oD(null,n,t,e,r),t.attrs,r),u=null);else{const p=t.directiveStylingLast;if(-1===p||n[p]!==a)if(e=oD(a,n,t,e,r),null===u){let D=function(n,t,e){const r=e?t.classBindings:t.styleBindings;if(0!==Od(r))return n[cl(r)]}(n,t,r);void 0!==D&&Array.isArray(D)&&(D=oD(null,n,t,D[1],r),D=Cm(D,t.attrs,r),function(n,t,e,r){n[cl(e?t.classBindings:t.styleBindings)]=r}(n,t,r,D))}else u=function(n,t,e){let r;const a=t.directiveEnd;for(let u=1+t.directiveStylingLast;u<a;u++)r=Cm(r,n[u].hostAttrs,e);return Cm(r,t.attrs,e)}(n,t,r)}return void 0!==u&&(r?t.residualClasses=u:t.residualStyles=u),e}(a,u,t,r),function(n,t,e,r,a,u){let p=u?t.classBindings:t.styleBindings,_=cl(p),D=Od(p);n[r]=e;let I,M=!1;if(Array.isArray(e)){const V=e;I=V[1],(null===I||Yh(V,I)>0)&&(M=!0)}else I=e;if(a)if(0!==D){const j=cl(n[_+1]);n[r+1]=db(j,_),0!==j&&(n[j+1]=lE(n[j+1],r)),n[_+1]=function(n,t){return 131071&n|t<<17}(n[_+1],r)}else n[r+1]=db(_,0),0!==_&&(n[_+1]=lE(n[_+1],r)),_=r;else n[r+1]=db(D,0),0===_?_=r:n[D+1]=lE(n[D+1],r),D=r;M&&(n[r+1]=zi(n[r+1])),nM(n,I,r,!0),nM(n,I,r,!1),function(n,t,e,r,a){const u=a?n.residualClasses:n.residualStyles;null!=u&&"string"==typeof t&&Yh(u,t)>=0&&(e[r+1]=cE(e[r+1]))}(t,I,n,r,u),p=db(_,D),u?t.classBindings=p:t.styleBindings=p}(a,u,t,e,p,r)}}function oD(n,t,e,r,a){let u=null;const p=e.directiveEnd;let _=e.directiveStylingLast;for(-1===_?_=e.directiveStart:_++;_<p&&(u=t[_],r=Cm(r,u.hostAttrs,a),u!==n);)_++;return null!==n&&(e.directiveStylingLast=_),r}function Cm(n,t,e){const r=e?1:2;let a=-1;if(null!==t)for(let u=0;u<t.length;u++){const p=t[u];"number"==typeof p?a=p:a===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),yo(n,p,!!e||t[++u]))}return void 0===n?null:n}function eu(n,t,e,r,a,u,p,_){if(!(3&t.type))return;const D=n.data,M=D[_+1];Zf(function(n){return 1==(1&n)}(M)?Fp(D,t,e,a,Od(M),p):void 0)||(Zf(u)||function(n){return 2==(2&n)}(M)&&(u=Fp(D,null,e,a,_,p)),function(n,t,e,r,a){const u=Jr(n);if(t)a?u?n.addClass(e,r):e.classList.add(r):u?n.removeClass(e,r):e.classList.remove(r);else{let p=-1===r.indexOf("-")?void 0:Bo.DashCase;if(null==a)u?n.removeStyle(e,r,p):e.style.removeProperty(r);else{const _="string"==typeof a&&a.endsWith("!important");_&&(a=a.slice(0,-10),p|=Bo.Important),u?n.setStyle(e,r,a,p):e.style.setProperty(r,a,_?"important":"")}}}(r,p,dv(Xs(),e),a,u))}function Fp(n,t,e,r,a,u){const p=null===t;let _;for(;a>0;){const D=n[a],M=Array.isArray(D),I=M?D[1]:D,V=null===I;let j=e[a+1];j===ei&&(j=V?vr:void 0);let G=V?K0(j,r):I===r?j:void 0;if(M&&!Zf(G)&&(G=K0(D,r)),Zf(G)&&(_=G,p))return _;const Z=n[a+1];a=p?cl(Z):Od(Z)}if(null!==t){let D=u?t.residualClasses:t.residualStyles;null!=D&&(_=K0(D,r))}return _}function Zf(n){return void 0!==n}function fM(n,t){return 0!=(n.flags&(t?16:32))}function jt(n,t=""){const e=Ct(),r=Oi(),a=n+20,u=r.firstCreatePass?Gl(r,a,1,t,null):r.data[a],p=e[a]=function(n,t){return Jr(n)?n.createText(t):n.createTextNode(t)}(e[11],t);rp(r,e,p,u),ac(u,!1)}function Ur(n){return Lr("",n,""),Ur}function Lr(n,t,e){const r=Ct(),a=qf(r,n,t,e);return a!==ei&&Ou(r,Xs(),a),Lr}function _l(n,t,e){const r=Ct();return ys(r,Rh(),t)&&Js(Oi(),es(),r,n,t,r[11],e,!0),_l}function Oc(n,t,e){const r=Ct();if(ys(r,Rh(),t)){const u=Oi(),p=es();Js(u,p,r,n,t,Hf(pv(u.data),p,r),e,!0)}return Oc}const Vd=void 0;var Gy=["en",[["a","p"],["AM","PM"],Vd],[["AM","PM"],Vd,Vd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Vd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Vd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Vd,"{1} 'at' {0}",Vd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(n){const t=Math.floor(Math.abs(n)),e=n.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===e?1:5}];let Sm={};function Hr(n){const t=function(n){return n.toLowerCase().replace(/_/g,"-")}(n);let e=Kb(t);if(e)return e;const r=t.split("-")[0];if(e=Kb(r),e)return e;if("en"===r)return Gy;throw new Error(`Missing locale data for the locale "${n}".`)}function Kb(n){return n in Sm||(Sm[n]=Qi.ng&&Qi.ng.common&&Qi.ng.common.locales&&Qi.ng.common.locales[n]),Sm[n]}var Zt=(()=>((Zt=Zt||{})[Zt.LocaleId=0]="LocaleId",Zt[Zt.DayPeriodsFormat=1]="DayPeriodsFormat",Zt[Zt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Zt[Zt.DaysFormat=3]="DaysFormat",Zt[Zt.DaysStandalone=4]="DaysStandalone",Zt[Zt.MonthsFormat=5]="MonthsFormat",Zt[Zt.MonthsStandalone=6]="MonthsStandalone",Zt[Zt.Eras=7]="Eras",Zt[Zt.FirstDayOfWeek=8]="FirstDayOfWeek",Zt[Zt.WeekendRange=9]="WeekendRange",Zt[Zt.DateFormat=10]="DateFormat",Zt[Zt.TimeFormat=11]="TimeFormat",Zt[Zt.DateTimeFormat=12]="DateTimeFormat",Zt[Zt.NumberSymbols=13]="NumberSymbols",Zt[Zt.NumberFormats=14]="NumberFormats",Zt[Zt.CurrencyCode=15]="CurrencyCode",Zt[Zt.CurrencySymbol=16]="CurrencySymbol",Zt[Zt.CurrencyName=17]="CurrencyName",Zt[Zt.Currencies=18]="Currencies",Zt[Zt.Directionality=19]="Directionality",Zt[Zt.PluralCase=20]="PluralCase",Zt[Zt.ExtraData=21]="ExtraData",Zt))();const Tc="en-US";let yM=Tc;function zd(n){ta(n,"Expected localeId to be defined"),"string"==typeof n&&(yM=n.toLowerCase().replace(/_/g,"-"))}function AD(n,t,e,r,a){if(n=Y(n),Array.isArray(n))for(let u=0;u<n.length;u++)AD(n[u],t,e,r,a);else{const u=Oi(),p=Ct();let _=Tu(n)?n:Y(n.provide),D=vc(n);const M=Is(),I=1048575&M.providerIndexes,V=M.directiveStart,j=M.providerIndexes>>20;if(Tu(n)||!n.multi){const G=new Lh(D,a,ue),Z=t_(_,t,a?I:I+j,V);-1===Z?(Vh(go(M,p),u,_),Vp(u,n,t.length),t.push(_),M.directiveStart++,M.directiveEnd++,a&&(M.providerIndexes+=1048576),e.push(G),p.push(G)):(e[Z]=G,p[Z]=G)}else{const G=t_(_,t,I+j,V),Z=t_(_,t,I,I+j),ye=G>=0&&e[G],be=Z>=0&&e[Z];if(a&&!be||!a&&!ye){Vh(go(M,p),u,_);const Ye=function(n,t,e,r,a){const u=new Lh(n,e,ue);return u.multi=[],u.index=t,u.componentProviders=0,e_(u,a,r&&!e),u}(a?n_:E2,e.length,a,r,D);!a&&be&&(e[Z].providerFactory=Ye),Vp(u,n,t.length,0),t.push(_),M.directiveStart++,M.directiveEnd++,a&&(M.providerIndexes+=1048576),e.push(Ye),p.push(Ye)}else Vp(u,n,G>-1?G:Z,e_(e[a?Z:G],D,!a&&r));!a&&r&&be&&e[Z].componentProviders++}}}function Vp(n,t,e,r){const a=Tu(t);if(a||function(n){return!!n.useClass}(t)){const p=(t.useClass||t).prototype.ngOnDestroy;if(p){const _=n.destroyHooks||(n.destroyHooks=[]);if(!a&&t.multi){const D=_.indexOf(e);-1===D?_.push(e,[r,p]):_[D+1].push(r,p)}else _.push(e,p)}}}function e_(n,t,e){return e&&n.componentProviders++,n.multi.push(t)-1}function t_(n,t,e,r){for(let a=e;a<r;a++)if(t[a]===n)return a;return-1}function E2(n,t,e,r){return Im(this.multi,[])}function n_(n,t,e,r){const a=this.multi;let u;if(this.providerFactory){const p=this.providerFactory.componentProviders,_=sl(e,e[1],this.providerFactory.index,r);u=_.slice(0,p),Im(a,u);for(let D=p;D<_.length;D++)u.push(_[D])}else u=[],Im(a,u);return u}function Im(n,t){for(let e=0;e<n.length;e++)t.push((0,n[e])());return t}function Yn(n,t=[]){return e=>{e.providersResolver=(r,a)=>function(n,t,e){const r=Oi();if(r.firstCreatePass){const a=Qr(n);AD(e,r.data,r.blueprint,a,!0),AD(t,r.data,r.blueprint,a,!1)}}(r,a?a(n):n,t)}}class NM{}const LM="ngComponent";class bl{resolveComponentFactory(t){throw function(n){const t=Error(`No component factory found for ${tn(n)}. Did you add it to @NgModule.entryComponents?`);return t[LM]=n,t}(t)}}let Lu=(()=>{class n{}return n.NULL=new bl,n})();function p1(...n){}function $p(n,t){return new Mn(Vl(n,t))}const jM=function(){return $p(Is(),Ct())};let Mn=(()=>{class n{constructor(e){this.nativeElement=e}}return n.__NG_ELEMENT_ID__=jM,n})();function g1(n){return n instanceof Mn?n.nativeElement:n}class wo{}let Ra=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>ih(),n})();const ih=function(){const n=Ct(),e=il(Is().index,n);return function(n){return n[11]}(va(e)?e:n)};let OD=(()=>{class n{}return n.\u0275prov=ot({token:n,providedIn:"root",factory:()=>null}),n})();class Pc{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const UM=new Pc("12.2.10");class TD{constructor(){}supports(t){return bp(t)}create(t){return new i_(t)}}const y1=(n,t)=>t;class i_{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||y1}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,r=this._removalsHead,a=0,u=null;for(;e||r;){const p=!r||e&&e.currentIndex<FD(r,a,u)?e:r,_=FD(p,a,u),D=p.currentIndex;if(p===r)a--,r=r._nextRemoved;else if(e=e._next,null==p.previousIndex)a++;else{u||(u=[]);const M=_-a,I=D-a;if(M!=I){for(let j=0;j<M;j++){const G=j<u.length?u[j]:u[j]=0,Z=G+j;I<=Z&&Z<M&&(u[j]=G+1)}u[p.previousIndex]=I-M}}_!==D&&t(p,_,D)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!bp(t))throw new Error(`Error trying to diff '${tn(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let a,u,p,e=this._itHead,r=!1;if(Array.isArray(t)){this.length=t.length;for(let _=0;_<this.length;_++)u=t[_],p=this._trackByFn(_,u),null!==e&&Object.is(e.trackById,p)?(r&&(e=this._verifyReinsertion(e,u,p,_)),Object.is(e.item,u)||this._addIdentityChange(e,u)):(e=this._mismatch(e,u,p,_),r=!0),e=e._next}else a=0,function(n,t){if(Array.isArray(n))for(let e=0;e<n.length;e++)t(n[e]);else{const e=n[zo()]();let r;for(;!(r=e.next()).done;)t(r.value)}}(t,_=>{p=this._trackByFn(a,_),null!==e&&Object.is(e.trackById,p)?(r&&(e=this._verifyReinsertion(e,_,p,a)),Object.is(e.item,_)||this._addIdentityChange(e,_)):(e=this._mismatch(e,_,p,a),r=!0),e=e._next,a++}),this.length=a;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,r,a){let u;return null===t?u=this._itTail:(u=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,u,a)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(r,a))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,u,a)):t=this._addAfter(new kD(e,r),u,a),t}_verifyReinsertion(t,e,r,a){let u=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==u?t=this._reinsertAfter(u,t._prev,a):t.currentIndex!=a&&(t.currentIndex=a,this._addToMoves(t,a)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const a=t._prevRemoved,u=t._nextRemoved;return null===a?this._removalsHead=u:a._nextRemoved=u,null===u?this._removalsTail=a:u._prevRemoved=a,this._insertAfter(t,e,r),this._addToMoves(t,r),t}_moveAfter(t,e,r){return this._unlink(t),this._insertAfter(t,e,r),this._addToMoves(t,r),t}_addAfter(t,e,r){return this._insertAfter(t,e,r),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,r){const a=null===e?this._itHead:e._next;return t._next=a,t._prev=e,null===a?this._itTail=t:a._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Rm),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,r=t._next;return null===e?this._itHead=r:e._next=r,null===r?this._itTail=e:r._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Rm),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class kD{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class _1{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===e||e<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const e=t._prevDup,r=t._nextDup;return null===e?this._head=r:e._nextDup=r,null===r?this._tail=e:r._prevDup=e,null===this._head}}class Rm{constructor(){this.map=new Map}put(t){const e=t.trackById;let r=this.map.get(e);r||(r=new _1,this.map.set(e,r)),r.add(t)}get(t,e){const a=this.map.get(t);return a?a.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function FD(n,t,e){const r=n.previousIndex;if(null===r)return r;let a=0;return e&&r<e.length&&(a=e[r]),r+t+a}class r_{constructor(){}supports(t){return t instanceof Map||tm(t)}create(){return new WM}}class WM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||tm(t)))throw new Error(`Error trying to diff '${tn(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(r,a)=>{if(e&&e.key===a)this._maybeAddToChanges(e,r),this._appendAfter=e,e=e._next;else{const u=this._getOrCreateRecordForKey(a,r);e=this._insertBeforeOrAppend(e,u)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let r=e;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const r=t._prev;return e._next=t,e._prev=r,t._prev=e,r&&(r._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const a=this._records.get(t);this._maybeAddToChanges(a,e);const u=a._prev,p=a._next;return u&&(u._next=p),p&&(p._prev=u),a._next=null,a._prev=null,a}const r=new GM(t);return this._records.set(t,r),r.currentValue=e,this._addToAdditions(r),r}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(r=>e(t[r],r))}}class GM{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function v1(){return new Lc([new TD])}let Lc=(()=>{class n{constructor(e){this.factories=e}static create(e,r){if(null!=r){const a=r.factories.slice();e=e.concat(a)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||v1()),deps:[[n,new wu,new lr]]}}find(e){const r=this.factories.find(a=>a.supports(e));if(null!=r)return r;throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(n){return n.name||typeof n}(e)}'`)}}return n.\u0275prov=ot({token:n,providedIn:"root",factory:v1}),n})();function Nm(){return new d([new r_])}let d=(()=>{class n{constructor(e){this.factories=e}static create(e,r){if(r){const a=r.factories.slice();e=e.concat(a)}return new n(e)}static extend(e){return{provide:n,useFactory:r=>n.create(e,r||Nm()),deps:[[n,new wu,new lr]]}}find(e){const r=this.factories.find(a=>a.supports(e));if(r)return r;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return n.\u0275prov=ot({token:n,providedIn:"root",factory:Nm}),n})();function f(n,t,e,r,a=!1){for(;null!==e;){const u=t[e.index];if(null!==u&&r.push(ms(u)),Fr(u))for(let _=10;_<u.length;_++){const D=u[_],M=D[1].firstChild;null!==M&&f(D[1],D,M,r)}const p=e.type;if(8&p)f(n,t,e.child,r);else if(32&p){const _=$g(e,t);let D;for(;D=_();)r.push(D)}else if(16&p){const _=dA(t,e);if(Array.isArray(_))r.push(..._);else{const D=tp(t[16]);f(D[1],D,_,r,!0)}}e=a?e.projectionNext:e.next}return r}class m{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return f(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(Fr(t)){const e=t[8],r=e?e.indexOf(this):-1;r>-1&&(Ul(t,r),Da(e,r))}this._attachedToViewContainer=!1}Kw(this._lView[1],this._lView)}onDestroy(t){CE(this._lView[1],this._lView,null,t)}markForCheck(){dp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Cb(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(n,t,e){N0(!0);try{Cb(n,t,e)}finally{N0(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(n,t){mc(n,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class b extends m{constructor(t){super(t),this._view=t}detectChanges(){ua(this._view)}checkNoChanges(){!function(n){N0(!0);try{ua(n)}finally{N0(!1)}}(this._view)}get context(){return null}}const O=function(n){return function(n,t,e){if(Bl(n)&&!e){const r=il(n.index,t);return new m(r,r)}return 47&n.type?new m(t[16],t):null}(Is(),Ct(),16==(16&n))};let F=(()=>{class n{}return n.__NG_ELEMENT_ID__=O,n})();const U=[new r_],ce=new Lc([new TD]),Se=new d(U),dt=function(){return Vt(Is(),Ct())};let vt=(()=>{class n{}return n.__NG_ELEMENT_ID__=dt,n})();const St=vt,Rt=class extends St{constructor(t,e,r){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=r}createEmbeddedView(t){const e=this._declarationTContainer.tViews,r=Wl(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const u=this._declarationLView[19];return null!==u&&(r[19]=u.createEmbeddedView(e)),Qs(e,r,t),new m(r)}};function Vt(n,t){return 4&n.type?new Rt(t,n,$p(n,t)):null}class kn{}class Bn{}const Ni=function(){return wl(Is(),Ct())};let Ui=(()=>{class n{}return n.__NG_ELEMENT_ID__=Ni,n})();const ru=Ui,Na=class extends ru{constructor(t,e,r){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=r}get element(){return $p(this._hostTNode,this._hostLView)}get injector(){return new Uh(this._hostTNode,this._hostLView)}get parentInjector(){const t=bg(this._hostTNode,this._hostLView);if(wv(t)){const e=dd(t,this._hostLView),r=vg(t);return new Uh(e[1].data[r+8],e)}return new Uh(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Bu(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,r){const a=t.createEmbeddedView(e||{});return this.insert(a,r),a}createComponent(t,e,r,a,u){const p=r||this.parentInjector;if(!u&&null==t.ngModule&&p){const D=p.get(kn,null);D&&(u=D)}const _=t.create(p,a,void 0,u);return this.insert(_.hostView,e),_}insert(t,e){const r=t._lView,a=r[1];if(function(n){return Fr(n[3])}(r)){const I=this.indexOf(t);if(-1!==I)this.detach(I);else{const V=r[3],j=new Na(V,V[6],V[3]);j.detach(j.indexOf(t))}}const u=this._adjustIndex(e),p=this._lContainer;!function(n,t,e,r){const a=10+r,u=e.length;r>0&&(e[a-1][4]=t),r<u-10?(t[4]=e[a],Sf(e,10+r,t)):(e.push(t),t[4]=null),t[3]=e;const p=t[17];null!==p&&e!==p&&function(n,t){const e=n[9];t[16]!==t[3][3][16]&&(n[2]=!0),null===e?n[9]=[t]:e.push(t)}(p,t);const _=t[19];null!==_&&_.insertView(n),t[2]|=128}(a,r,p,u);const _=sb(u,p),D=r[11],M=pc(D,p[7]);return null!==M&&function(n,t,e,r,a,u){r[0]=a,r[6]=t,mc(n,r,e,1,a,u)}(a,p[6],D,r,M,_),t.attachToViewContainerRef(),Sf(Vu(p),u,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Bu(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),r=Ul(this._lContainer,e);r&&(Da(Vu(this._lContainer),e),Kw(r[1],r))}detach(t){const e=this._adjustIndex(t,-1),r=Ul(this._lContainer,e);return r&&null!=Da(Vu(this._lContainer),e)?new m(r):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Bu(n){return n[8]}function Vu(n){return n[8]||(n[8]=[])}function wl(n,t){let e;const r=t[n.index];if(Fr(r))e=r;else{let a;if(8&n.type)a=ms(r);else{const u=t[11];a=u.createComment("");const p=Vl(n,t);Ad(u,pc(u,p),a,function(n,t){return Jr(n)?n.nextSibling(t):t.nextSibling}(u,p),!1)}t[n.index]=e=ql(r,t,a,n),Mu(t,e)}return new Na(e,n,t)}const S1={};class JL extends Lu{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=sa(t);return new t3(e,this.ngModule)}}function ZL(n){const t=[];for(let e in n)n.hasOwnProperty(e)&&t.push({propName:n[e],templateName:e});return t}const e3=new Ft("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>zw});class t3 extends NM{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=function(n){return n.map(pA).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return ZL(this.componentDef.inputs)}get outputs(){return ZL(this.componentDef.outputs)}create(t,e,r,a){const u=(a=a||this.ngModule)?function(n,t){return{get:(e,r,a)=>{const u=n.get(e,S1,a);return u!==S1||r===S1?u:t.get(e,r,a)}}}(t,a.injector):t,p=u.get(wo,YC),_=u.get(OD,null),D=p.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",I=r?function(n,t,e){if(Jr(n))return n.selectRootElement(t,e===Or.ShadowDom);let r="string"==typeof t?n.querySelector(t):t;return r.textContent="",r}(D,r,this.componentDef.encapsulation):jg(p.createRenderer(null,this.componentDef),M,function(n){const t=n.toLowerCase();return"svg"===t?GC:"math"===t?"http://www.w3.org/1998/MathML/":null}(M)),V=this.componentDef.onPush?576:528,j=function(n,t){return{components:[],scheduler:n||zw,clean:jo,playerHandler:t||null,flags:0}}(),G=Ey(0,null,null,1,0,null,null,null,null,null),Z=Wl(null,G,j,V,null,null,p,D,_,u);let ye,be;L0(Z);try{const Ye=function(n,t,e,r,a,u){const p=e[1];e[20]=n;const D=Gl(p,20,2,"#host",null),M=D.mergedAttrs=t.hostAttrs;null!==M&&(hp(D,M,!0),null!==n&&(yg(a,n,M),null!==D.classes&&sp(a,n,D.classes),null!==D.styles&&tE(a,n,D.styles)));const I=r.createRenderer(n,t),V=Wl(e,SA(t),null,t.onPush?64:16,e[20],D,r,I,u||null,null);return p.firstCreatePass&&(Vh(go(D,e),p,t.type),SE(p,D),AE(D,e.length,1)),Mu(e,V),e[20]=V}(I,this.componentDef,Z,p,D);if(I)if(r)yg(D,I,["ng-version",UM.full]);else{const{attrs:je,classes:Et}=function(n){const t=[],e=[];let r=1,a=2;for(;r<n.length;){let u=n[r];if("string"==typeof u)2===a?""!==u&&t.push(u,n[++r]):8===a&&e.push(u);else{if(!ul(a))break;a=u}r++}return{attrs:t,classes:e}}(this.componentDef.selectors[0]);je&&yg(D,I,je),Et&&Et.length>0&&sp(D,I,Et.join(" "))}if(be=KC(G,20),void 0!==e){const je=be.projection=[];for(let Et=0;Et<this.ngContentSelectors.length;Et++){const Wt=e[Et];je.push(null!=Wt?Array.from(Wt):null)}}ye=function(n,t,e,r,a){const u=e[1],p=function(n,t,e){const r=Is();n.firstCreatePass&&(e.providersResolver&&e.providersResolver(e),kA(n,r,t,_c(n,t,1,null),e));const a=sl(t,n,r.directiveStart,r);Lo(a,t);const u=Vl(r,t);return u&&Lo(u,t),a}(u,e,t);if(r.components.push(p),n[8]=p,a&&a.forEach(D=>D(p,t)),t.contentQueries){const D=Is();t.contentQueries(1,p,D.directiveStart)}const _=Is();return!u.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(rl(_.index),DE(e[1],_,0,_.directiveStart,_.directiveEnd,t),gb(t,p)),p}(Ye,this.componentDef,Z,j,[Zs]),Qs(G,Z,null)}finally{cd()}return new d6(this.componentType,ye,$p(be,Z),Z,be)}}class d6 extends class{}{constructor(t,e,r,a,u){super(),this.location=r,this._rootLView=a,this._tNode=u,this.instance=e,this.hostView=this.changeDetectorRef=new b(a),this.componentType=t}get injector(){return new Uh(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const qd=new Map;class g6 extends kn{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new JL(this);const r=tl(t),a=function(n){return n[Ja]||null}(t);a&&zd(a),this._bootstrapComponents=ll(r.bootstrap),this._r3Injector=PE(t,e,[{provide:kn,useValue:this},{provide:Lu,useValue:this.componentFactoryResolver}],tn(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=ai.THROW_IF_NOT_FOUND,r=xn.Default){return t===ai||t===kn||t===pp?this:this._r3Injector.get(t,e,r)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class W2 extends Bn{constructor(t){super(),this.moduleType=t,null!==tl(t)&&function(n){const t=new Set;!function e(r){const a=tl(r,!0),u=a.id;null!==u&&(function(n,t,e){if(t&&t!==e)throw new Error(`Duplicate module registered for ${n} - ${tn(t)} vs ${tn(t.name)}`)}(u,qd.get(u),r),qd.set(u,r));const p=ll(a.imports);for(const _ of p)t.has(_)||(t.add(_),e(_))}(n)}(t)}create(t){return new g6(this.moduleType,t)}}function c_(n,t,e){const r=To()+n,a=Ct();return a[r]===ei?Ql(a,r,e?t.call(e):t()):function(n,t){return n[t]}(a,r)}function BD(n,t){const e=n[t];return e===ei?void 0:e}function sO(n,t,e,r,a,u){const p=t+e;return ys(n,p,a)?Ql(n,p+1,u?r.call(u,a):r(a)):BD(n,p+1)}function q2(n,t,e,r,a,u,p){const _=t+e;return function(n,t,e,r){const a=ys(n,t,e);return ys(n,t+1,r)||a}(n,_,a,u)?Ql(n,_+2,p?r.call(p,a,u):r(a,u)):BD(n,_+2)}function lh(n,t){const e=Oi();let r;const a=n+20;e.firstCreatePass?(r=function(n,t){if(t)for(let e=t.length-1;e>=0;e--){const r=t[e];if(n===r.name)return r}throw new Le("302",`The pipe '${n}' could not be found!`)}(t,e.pipeRegistry),e.data[a]=r,r.onDestroy&&(e.destroyHooks||(e.destroyHooks=[])).push(a,r.onDestroy)):r=e.data[a];const u=r.factory||(r.factory=hn(r.type)),p=sd(ue);try{const _=xf(!1),D=u();return xf(_),function(n,t,e,r){e>=n.data.length&&(n.data[e]=null,n.blueprint[e]=null),t[e]=r}(e,Ct(),a,D),D}finally{sd(p)}}function d_(n,t,e){const r=n+20,a=Ct(),u=pg(a,r);return A1(a,VD(a,r)?sO(a,To(),t,u.transform,e,u):u.transform(e))}function X2(n,t,e,r){const a=n+20,u=Ct(),p=pg(u,a);return A1(u,VD(u,a)?q2(u,To(),t,p.transform,e,r,p):p.transform(e,r))}function VD(n,t){return n[1].data[t].pure}function A1(n,t){return ku.isWrapped(t)&&(t=ku.unwrap(t),n[ii.lFrame.bindingIndex]=ei),t}function Q2(n){return t=>{setTimeout(n,void 0,t)}}const Vn=class extends We{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,r){var a,u,p;let _=t,D=e||(()=>null),M=r;if(t&&"object"==typeof t){const V=t;_=null===(a=V.next)||void 0===a?void 0:a.bind(V),D=null===(u=V.error)||void 0===u?void 0:u.bind(V),M=null===(p=V.complete)||void 0===p?void 0:p.bind(V)}this.__isAsync&&(D=Q2(D),_&&(_=Q2(_)),M&&(M=Q2(M)));const I=super.subscribe({next:_,error:D,complete:M});return t instanceof T&&t.add(I),I}};function u3(){return this._results[zo()]()}class zm{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=zo(),r=zm.prototype;r[e]||(r[e]=u3)}get changes(){return this._changes||(this._changes=new Vn)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const r=this;r.dirty=!1;const a=mo(t);(this._changesDetected=!function(n,t,e){if(n.length!==t.length)return!1;for(let r=0;r<n.length;r++){let a=n[r],u=t[r];if(e&&(a=e(a),u=e(u)),u!==a)return!1}return!0}(r._results,a,e))&&(r._results=a,r.length=a.length,r.last=a[this.length-1],r.first=a[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class J2{constructor(t){this.queryList=t,this.matches=null}clone(){return new J2(this.queryList)}setDirty(){this.queryList.setDirty()}}class Z2{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const r=null!==t.contentQueries?t.contentQueries[0]:e.length,a=[];for(let u=0;u<r;u++){const p=e.getByIndex(u);a.push(this.queries[p.indexInDeclarationView].clone())}return new Z2(a)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==g3(t,e).matches&&this.queries[e].setDirty()}}class d3{constructor(t,e,r=null){this.predicate=t,this.flags=e,this.read=r}}class oO{constructor(t=[]){this.queries=t}elementStart(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let r=0;r<this.length;r++){const a=null!==e?e.length:0,u=this.getByIndex(r).embeddedTView(t,a);u&&(u.indexInDeclarationView=r,null!==e?e.push(u):e=[u])}return null!==e?new oO(e):null}template(t,e){for(let r=0;r<this.queries.length;r++)this.queries[r].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class eI{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new eI(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let r=t.parent;for(;null!==r&&8&r.type&&r.index!==e;)r=r.parent;return e===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const r=this.metadata.predicate;if(Array.isArray(r))for(let a=0;a<r.length;a++){const u=r[a];this.matchTNodeWithReadOption(t,e,S6(e,u)),this.matchTNodeWithReadOption(t,e,zr(e,t,u,!1,!1))}else r===vt?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,zr(e,t,r,!1,!1))}matchTNodeWithReadOption(t,e,r){if(null!==r){const a=this.metadata.read;if(null!==a)if(a===Mn||a===Ui||a===vt&&4&e.type)this.addMatch(e.index,-2);else{const u=zr(e,t,a,!1,!1);null!==u&&this.addMatch(e.index,u)}else this.addMatch(e.index,r)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function S6(n,t){const e=n.localNames;if(null!==e)for(let r=0;r<e.length;r+=2)if(e[r]===t)return e[r+1];return null}function M6(n,t,e,r){return-1===e?function(n,t){return 11&n.type?$p(n,t):4&n.type?Vt(n,t):null}(t,n):-2===e?function(n,t,e){return e===Mn?$p(t,n):e===vt?Vt(t,n):e===Ui?wl(t,n):void 0}(n,t,r):sl(n,n[1],e,t)}function aO(n,t,e,r){const a=t[19].queries[r];if(null===a.matches){const u=n.data,p=e.matches,_=[];for(let D=0;D<p.length;D+=2){const M=p[D];_.push(M<0?null:M6(t,u[M],p[D+1],e.metadata.read))}a.matches=_}return a.matches}function lO(n,t,e,r){const a=n.queries.getByIndex(e),u=a.matches;if(null!==u){const p=aO(n,t,a,e);for(let _=0;_<u.length;_+=2){const D=u[_];if(D>0)r.push(p[_/2]);else{const M=u[_+1],I=t[-D];for(let V=10;V<I.length;V++){const j=I[V];j[17]===j[3]&&lO(j[1],j,M,r)}if(null!==I[9]){const V=I[9];for(let j=0;j<V.length;j++){const G=V[j];lO(G[1],G,M,r)}}}}}return r}function Pi(n){const t=Ct(),e=Oi(),r=gv();mv(r+1);const a=g3(e,r);if(n.dirty&&QC(t)===(2==(2&a.metadata.flags))){if(null===a.matches)n.reset([]);else{const u=a.crossesNgTemplate?lO(e,t,r,[]):aO(e,t,a,r);n.reset(u,g1),n.notifyOnChanges()}return!0}return!1}function Dl(n,t,e){const r=Oi();r.firstCreatePass&&(p3(r,new d3(n,t,e),-1),2==(2&t)&&(r.staticViewQueries=!0)),h3(r,Ct(),t)}function bs(n,t,e,r){const a=Oi();if(a.firstCreatePass){const u=Is();p3(a,new d3(t,e,r),u.index),function(n,t){const e=n.contentQueries||(n.contentQueries=[]);t!==(e.length?e[e.length-1]:-1)&&e.push(n.queries.length-1,t)}(a,n),2==(2&e)&&(a.staticContentQueries=!0)}h3(a,Ct(),e)}function Li(){return function(n,t){return n[19].queries[t].queryList}(Ct(),gv())}function h3(n,t,e){const r=new zm(4==(4&e));CE(n,t,r,r.destroy),null===t[19]&&(t[19]=new Z2),t[19].queries.push(new J2(r))}function p3(n,t,e){null===n.queries&&(n.queries=new oO),n.queries.track(new eI(t,e))}function g3(n,t){return n.queries.getByIndex(t)}const h_=new Ft("Application Initializer");let p_=(()=>{class n{constructor(e){this.appInits=e,this.resolve=p1,this.reject=p1,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,a)=>{this.resolve=r,this.reject=a})}runInitializers(){if(this.initialized)return;const e=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let a=0;a<this.appInits.length;a++){const u=this.appInits[a]();if(Vy(u))e.push(u);else if(gm(u)){const p=new Promise((_,D)=>{u.subscribe({complete:_,error:D})});e.push(p)}}Promise.all(e).then(()=>{r()}).catch(a=>{this.reject(a)}),0===e.length&&r(),this.initialized=!0}}return n.\u0275fac=function(e){return new(e||n)(se(h_,8))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();const k1=new Ft("AppId"),XD={provide:k1,useFactory:function(){return`${F1()}${F1()}${F1()}`},deps:[]};function F1(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const M3=new Ft("Platform Initializer"),Yd=new Ft("Platform ID"),KD=new Ft("appBootstrapListener");let QD=(()=>{class n{log(e){console.log(e)}warn(e){console.warn(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();const Xd=new Ft("LocaleId"),mI=new Ft("DefaultCurrencyCode");class gO{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const I1=function(n){return new W2(n)},mO=I1,z6=function(n){return Promise.resolve(I1(n))},bI=function(n){const t=I1(n),r=ll(tl(n).declarations).reduce((a,u)=>{const p=sa(u);return p&&a.push(new t3(p)),a},[]);return new gO(t,r)},H6=bI,G6=function(n){return Promise.resolve(bI(n))};let g_=(()=>{class n{constructor(){this.compileModuleSync=mO,this.compileModuleAsync=z6,this.compileModuleAndAllComponentsSync=H6,this.compileModuleAndAllComponentsAsync=G6}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();const F3=new Ft("compilerOptions"),R3=(()=>Promise.resolve(0))();function N3(n){"undefined"==typeof Zone?R3.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class On{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Vn(!1),this.onMicrotaskEmpty=new Vn(!1),this.onStable=new Vn(!1),this.onError=new Vn(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const a=this;a._nesting=0,a._outer=a._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(a._inner=a._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(a._inner=a._inner.fork(Zone.longStackTraceZoneSpec)),a.shouldCoalesceEventChangeDetection=!r&&e,a.shouldCoalesceRunChangeDetection=r,a.lastRequestAnimationFrameId=-1,a.nativeRequestAnimationFrame=function(){let n=Qi.requestAnimationFrame,t=Qi.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&t){const e=n[Zone.__symbol__("OriginalDelegate")];e&&(n=e);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(n){const t=()=>{!function(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Qi,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,ex(n),n.isCheckStableRunning=!0,R1(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),ex(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,r,a,u,p,_)=>{try{return wI(n),e.invokeTask(a,u,p,_)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===u.type||n.shouldCoalesceRunChangeDetection)&&t(),EI(n)}},onInvoke:(e,r,a,u,p,_,D)=>{try{return wI(n),e.invoke(a,u,p,_,D)}finally{n.shouldCoalesceRunChangeDetection&&t(),EI(n)}},onHasTask:(e,r,a,u)=>{e.hasTask(a,u),r===a&&("microTask"==u.change?(n._hasPendingMicrotasks=u.microTask,ex(n),R1(n)):"macroTask"==u.change&&(n.hasPendingMacrotasks=u.macroTask))},onHandleError:(e,r,a,u)=>(e.handleError(a,u),n.runOutsideAngular(()=>n.onError.emit(u)),!1)})}(a)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!On.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(On.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,r){return this._inner.run(t,e,r)}runTask(t,e,r,a){const u=this._inner,p=u.scheduleEventTask("NgZoneEvent: "+a,t,ZD,p1,p1);try{return u.runTask(p,e,r)}finally{u.cancelTask(p)}}runGuarded(t,e,r){return this._inner.runGuarded(t,e,r)}runOutsideAngular(t){return this._outer.run(t)}}const ZD={};function R1(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function ex(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function wI(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function EI(n){n._nesting--,R1(n)}class L3{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Vn,this.onMicrotaskEmpty=new Vn,this.onStable=new Vn,this.onError=new Vn}run(t,e,r){return t.apply(e,r)}runGuarded(t,e,r){return t.apply(e,r)}runOutsideAngular(t){return t()}runTask(t,e,r,a){return t.apply(e,r)}}let yO=(()=>{class n{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{On.assertNotInAngularZone(),N3(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())N3(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(e)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,r,a){let u=-1;r&&r>0&&(u=setTimeout(()=>{this._callbacks=this._callbacks.filter(p=>p.timeoutId!==u),e(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:e,timeoutId:u,updateCb:a})}whenStable(e,r,a){if(a&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,r,a),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,r,a){return[]}}return n.\u0275fac=function(e){return new(e||n)(se(On))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})(),B3=(()=>{class n{constructor(){this._applications=new Map,nx.addToWindow(this)}registerApplication(e,r){this._applications.set(e,r)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,r=!0){return nx.findTestabilityInTree(this,e,r)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();class FW{addToWindow(t){}findTestabilityInTree(t,e,r){return null}}let nx=new FW,_O=!0,ix=!1;function Uc(){return ix=!0,_O}let Hu;const Kd=new Ft("AllowMultipleToken");class vO{constructor(t,e){this.name=t,this.token=e}}function z3(n,t,e=[]){const r=`Platform: ${t}`,a=new Ft(r);return(u=[])=>{let p=bO();if(!p||p.injector.get(Kd,!1))if(n)n(e.concat(u).concat({provide:a,useValue:!0}));else{const _=e.concat(u).concat({provide:a,useValue:!0},{provide:Qg,useValue:"platform"});!function(n){if(Hu&&!Hu.destroyed&&!Hu.injector.get(Kd,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Hu=n.get(U3);const t=n.get(M3,null);t&&t.forEach(e=>e())}(ai.create({providers:_,name:r}))}return function(n){const t=bO();if(!t)throw new Error("No platform exists!");if(!t.injector.get(n,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(a)}}function bO(){return Hu&&!Hu.destroyed?Hu:null}let U3=(()=>{class n{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,r){const _=function(n,t){let e;return e="noop"===n?new L3:("zone.js"===n?void 0:n)||new On({enableLongStackTrace:Uc(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),e}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),D=[{provide:On,useValue:_}];return _.run(()=>{const M=ai.create({providers:D,parent:this.injector,name:e.moduleType.name}),I=e.create(M),V=I.injector.get(zl,null);if(!V)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return _.runOutsideAngular(()=>{const j=_.onError.subscribe({next:G=>{V.handleError(G)}});I.onDestroy(()=>{AI(this._modules,I),j.unsubscribe()})}),function(n,t,e){try{const r=e();return Vy(r)?r.catch(a=>{throw t.runOutsideAngular(()=>n.handleError(a)),a}):r}catch(r){throw t.runOutsideAngular(()=>n.handleError(r)),r}}(V,_,()=>{const j=I.injector.get(p_);return j.runInitializers(),j.donePromise.then(()=>(zd(I.injector.get(Xd,Tc)||Tc),this._moduleDoBootstrap(I),I))})})}bootstrapModule(e,r=[]){const a=N1({},r);return function(n,t,e){const r=new W2(e);return Promise.resolve(r)}(0,0,e).then(u=>this.bootstrapModuleFactory(u,a))}_moduleDoBootstrap(e){const r=e.injector.get(Hm);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(a=>r.bootstrap(a));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${tn(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(r)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(e){return new(e||n)(se(ai))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();function N1(n,t){return Array.isArray(t)?t.reduce(N1,n):Object.assign(Object.assign({},n),t)}let Hm=(()=>{class n{constructor(e,r,a,u,p){this._zone=e,this._injector=r,this._exceptionHandler=a,this._componentFactoryResolver=u,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new ae(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),D=new ae(M=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{On.assertNotInAngularZone(),N3(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{On.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{I.unsubscribe(),V.unsubscribe()}});this.isStable=Ii(_,D.pipe(co()))}bootstrap(e,r){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let a;a=e instanceof NM?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(a.componentType);const u=function(n){return n.isBoundToModule}(a)?void 0:this._injector.get(kn),_=a.create(ai.NULL,[],r||a.selector,u),D=_.location.nativeElement,M=_.injector.get(yO,null),I=M&&_.injector.get(B3);return M&&I&&I.registerApplication(D,M),_.onDestroy(()=>{this.detachView(_.hostView),AI(this.components,_),I&&I.unregisterApplication(D)}),this._loadComponent(_),_}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const r=e;this._views.push(r),r.attachToAppRef(this)}detachView(e){const r=e;AI(this._views,r),r.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(KD,[]).concat(this._bootstrapListeners).forEach(a=>a(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return n.\u0275fac=function(e){return new(e||n)(se(On),se(ai),se(zl),se(Lu),se(p_))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();function AI(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}class m_{}class t4{}const n4={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let i4=(()=>{class n{constructor(e,r){this._compiler=e,this._config=r||n4}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[r,a]=e.split("#");return void 0===a&&(a="default"),pe(8255)(r).then(u=>u[a]).then(u=>P1(u,r,a)).then(u=>this._compiler.compileModuleAsync(u))}loadFactory(e){let[r,a]=e.split("#"),u="NgFactory";return void 0===a&&(a="default",u=""),pe(8255)(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then(p=>p[a+u]).then(p=>P1(p,r,a))}}return n.\u0275fac=function(e){return new(e||n)(se(g_),se(t4,8))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();function P1(n,t,e){if(!n)throw new Error(`Cannot find '${e}' in '${t}'`);return n}const $W=z3(null,"core",[{provide:Yd,useValue:"unknown"},{provide:U3,deps:[ai]},{provide:B3,deps:[]},{provide:QD,deps:[]}]),zW=[{provide:Hm,useClass:Hm,deps:[On,ai,zl,Lu,p_]},{provide:e3,deps:[On],useFactory:function(n){let t=[];return n.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:p_,useClass:p_,deps:[[new lr,h_]]},{provide:g_,useClass:g_,deps:[]},XD,{provide:Lc,useFactory:function(){return ce},deps:[]},{provide:d,useFactory:function(){return Se},deps:[]},{provide:Xd,useFactory:function(n){return zd(n=n||"undefined"!=typeof $localize&&$localize.locale||Tc),n},deps:[[new _d(Xd),new lr,new wu]]},{provide:mI,useValue:"USD"}];let UW=(()=>{class n{constructor(e){}}return n.\u0275fac=function(e){return new(e||n)(se(Hm))},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({providers:zW}),n})(),W1=null;function ph(){return W1}const An=new Ft("DocumentToken");let w_=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ot({factory:j4,token:n,providedIn:"platform"}),n})();function j4(){return se(cB)}const eR=new Ft("Location Initialized");let cB=(()=>{class n extends w_{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ph().getBaseHref(this._doc)}onPopState(e){const r=ph().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",e,!1),()=>r.removeEventListener("popstate",e)}onHashChange(e){const r=ph().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",e,!1),()=>r.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,r,a){dB()?this._history.pushState(e,r,a):this.location.hash=a}replaceState(e,r,a){dB()?this._history.replaceState(e,r,a):this.location.hash=a}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(se(An))},n.\u0275prov=ot({factory:fB,token:n,providedIn:"platform"}),n})();function dB(){return!!window.history.pushState}function fB(){return new cB(se(An))}function tR(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function hB(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function Xp(n){return n&&"?"!==n[0]?"?"+n:n}let gh=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ot({factory:z4,token:n,providedIn:"root"}),n})();function z4(n){const t=se(An).location;return new pB(se(w_),t&&t.origin||"")}const nR=new Ft("appBaseHref");let pB=(()=>{class n extends gh{constructor(e,r){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return tR(this._baseHref,e)}path(e=!1){const r=this._platformLocation.pathname+Xp(this._platformLocation.search),a=this._platformLocation.hash;return a&&e?`${r}${a}`:r}pushState(e,r,a,u){const p=this.prepareExternalUrl(a+Xp(u));this._platformLocation.pushState(e,r,p)}replaceState(e,r,a,u){const p=this.prepareExternalUrl(a+Xp(u));this._platformLocation.replaceState(e,r,p)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,a;null===(a=(r=this._platformLocation).historyGo)||void 0===a||a.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(se(w_),se(nR,8))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})(),U4=(()=>{class n extends gh{constructor(e,r){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(e){const r=tR(this._baseHref,e);return r.length>0?"#"+r:r}pushState(e,r,a,u){let p=this.prepareExternalUrl(a+Xp(u));0==p.length&&(p=this._platformLocation.pathname),this._platformLocation.pushState(e,r,p)}replaceState(e,r,a,u){let p=this.prepareExternalUrl(a+Xp(u));0==p.length&&(p=this._platformLocation.pathname),this._platformLocation.replaceState(e,r,p)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var r,a;null===(a=(r=this._platformLocation).historyGo)||void 0===a||a.call(r,e)}}return n.\u0275fac=function(e){return new(e||n)(se(w_),se(nR,8))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})(),Jd=(()=>{class n{constructor(e,r){this._subject=new Vn,this._urlChangeListeners=[],this._platformStrategy=e;const a=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=hB(gB(a)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,r=""){return this.path()==this.normalize(e+Xp(r))}normalize(e){return n.stripTrailingSlash(function(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,gB(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,r="",a=null){this._platformStrategy.pushState(a,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Xp(r)),a)}replaceState(e,r="",a=null){this._platformStrategy.replaceState(a,"",e,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+Xp(r)),a)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var r,a;null===(a=(r=this._platformStrategy).historyGo)||void 0===a||a.call(r,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(e="",r){this._urlChangeListeners.forEach(a=>a(e,r))}subscribe(e,r,a){return this._subject.subscribe({next:e,error:r,complete:a})}}return n.\u0275fac=function(e){return new(e||n)(se(gh),se(w_))},n.normalizeQueryParams=Xp,n.joinWithSlash=tR,n.stripTrailingSlash=hB,n.\u0275prov=ot({factory:H4,token:n,providedIn:"root"}),n})();function H4(){return new Jd(se(gh),se(w_))}function gB(n){return n.replace(/\/index.html$/,"")}var Es=(()=>((Es=Es||{})[Es.Zero=0]="Zero",Es[Es.One=1]="One",Es[Es.Two=2]="Two",Es[Es.Few=3]="Few",Es[Es.Many=4]="Many",Es[Es.Other=5]="Other",Es))(),Ws=(()=>((Ws=Ws||{})[Ws.Format=0]="Format",Ws[Ws.Standalone=1]="Standalone",Ws))(),Di=(()=>((Di=Di||{})[Di.Narrow=0]="Narrow",Di[Di.Abbreviated=1]="Abbreviated",Di[Di.Wide=2]="Wide",Di[Di.Short=3]="Short",Di))(),Gr=(()=>((Gr=Gr||{})[Gr.Short=0]="Short",Gr[Gr.Medium=1]="Medium",Gr[Gr.Long=2]="Long",Gr[Gr.Full=3]="Full",Gr))(),Xn=(()=>((Xn=Xn||{})[Xn.Decimal=0]="Decimal",Xn[Xn.Group=1]="Group",Xn[Xn.List=2]="List",Xn[Xn.PercentSign=3]="PercentSign",Xn[Xn.PlusSign=4]="PlusSign",Xn[Xn.MinusSign=5]="MinusSign",Xn[Xn.Exponential=6]="Exponential",Xn[Xn.SuperscriptingExponent=7]="SuperscriptingExponent",Xn[Xn.PerMille=8]="PerMille",Xn[Xn.Infinity=9]="Infinity",Xn[Xn.NaN=10]="NaN",Xn[Xn.TimeSeparator=11]="TimeSeparator",Xn[Xn.CurrencyDecimal=12]="CurrencyDecimal",Xn[Xn.CurrencyGroup=13]="CurrencyGroup",Xn))();function WO(n,t){return Wc(Hr(n)[Zt.DateFormat],t)}function GO(n,t){return Wc(Hr(n)[Zt.TimeFormat],t)}function qO(n,t){return Wc(Hr(n)[Zt.DateTimeFormat],t)}function Hc(n,t){const e=Hr(n),r=e[Zt.NumberSymbols][t];if(void 0===r){if(t===Xn.CurrencyDecimal)return e[Zt.NumberSymbols][Xn.Decimal];if(t===Xn.CurrencyGroup)return e[Zt.NumberSymbols][Xn.Group]}return r}const Q4=function(n){return Hr(n)[Zt.PluralCase]};function yB(n){if(!n[Zt.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[Zt.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Wc(n,t){for(let e=t;e>-1;e--)if(void 0!==n[e])return n[e];throw new Error("Locale data API: locale data undefined")}function oR(n){const[t,e]=n.split(":");return{hours:+t,minutes:+e}}const ej=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,dx={},tj=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Eo=(()=>((Eo=Eo||{})[Eo.Short=0]="Short",Eo[Eo.ShortGMT=1]="ShortGMT",Eo[Eo.Long=2]="Long",Eo[Eo.Extended=3]="Extended",Eo))(),Hn=(()=>((Hn=Hn||{})[Hn.FullYear=0]="FullYear",Hn[Hn.Month=1]="Month",Hn[Hn.Date=2]="Date",Hn[Hn.Hours=3]="Hours",Hn[Hn.Minutes=4]="Minutes",Hn[Hn.Seconds=5]="Seconds",Hn[Hn.FractionalSeconds=6]="FractionalSeconds",Hn[Hn.Day=7]="Day",Hn))(),di=(()=>((di=di||{})[di.DayPeriods=0]="DayPeriods",di[di.Days=1]="Days",di[di.Months=2]="Months",di[di.Eras=3]="Eras",di))();function aR(n,t,e,r){let a=function(n){if(fR(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[a,u=1,p=1]=n.split("-").map(_=>+_);return YO(a,u-1,p)}const e=parseFloat(n);if(!isNaN(n-e))return new Date(e);let r;if(r=n.match(ej))return function(n){const t=new Date(0);let e=0,r=0;const a=n[8]?t.setUTCFullYear:t.setFullYear,u=n[8]?t.setUTCHours:t.setHours;n[9]&&(e=Number(n[9]+n[10]),r=Number(n[9]+n[11])),a.call(t,Number(n[1]),Number(n[2])-1,Number(n[3]));const p=Number(n[4]||0)-e,_=Number(n[5]||0)-r,D=Number(n[6]||0),M=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return u.call(t,p,_,D,M),t}(r)}const t=new Date(n);if(!fR(t))throw new Error(`Unable to convert "${n}" into a date`);return t}(n);t=Kp(e,t)||t;let _,p=[];for(;t;){if(_=tj.exec(t),!_){p.push(t);break}{p=p.concat(_.slice(1));const I=p.pop();if(!I)break;t=I}}let D=a.getTimezoneOffset();r&&(D=dR(r,D),a=function(n,t,e){const a=n.getTimezoneOffset();return function(n,t){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+t),n}(n,-1*(dR(t,a)-a))}(a,r));let M="";return p.forEach(I=>{const V=function(n){if(KO[n])return KO[n];let t;switch(n){case"G":case"GG":case"GGG":t=wr(di.Eras,Di.Abbreviated);break;case"GGGG":t=wr(di.Eras,Di.Wide);break;case"GGGGG":t=wr(di.Eras,Di.Narrow);break;case"y":t=Gs(Hn.FullYear,1,0,!1,!0);break;case"yy":t=Gs(Hn.FullYear,2,0,!0,!0);break;case"yyy":t=Gs(Hn.FullYear,3,0,!1,!0);break;case"yyyy":t=Gs(Hn.FullYear,4,0,!1,!0);break;case"Y":t=XO(1);break;case"YY":t=XO(2,!0);break;case"YYY":t=XO(3);break;case"YYYY":t=XO(4);break;case"M":case"L":t=Gs(Hn.Month,1,1);break;case"MM":case"LL":t=Gs(Hn.Month,2,1);break;case"MMM":t=wr(di.Months,Di.Abbreviated);break;case"MMMM":t=wr(di.Months,Di.Wide);break;case"MMMMM":t=wr(di.Months,Di.Narrow);break;case"LLL":t=wr(di.Months,Di.Abbreviated,Ws.Standalone);break;case"LLLL":t=wr(di.Months,Di.Wide,Ws.Standalone);break;case"LLLLL":t=wr(di.Months,Di.Narrow,Ws.Standalone);break;case"w":t=uR(1);break;case"ww":t=uR(2);break;case"W":t=uR(1,!0);break;case"d":t=Gs(Hn.Date,1);break;case"dd":t=Gs(Hn.Date,2);break;case"c":case"cc":t=Gs(Hn.Day,1);break;case"ccc":t=wr(di.Days,Di.Abbreviated,Ws.Standalone);break;case"cccc":t=wr(di.Days,Di.Wide,Ws.Standalone);break;case"ccccc":t=wr(di.Days,Di.Narrow,Ws.Standalone);break;case"cccccc":t=wr(di.Days,Di.Short,Ws.Standalone);break;case"E":case"EE":case"EEE":t=wr(di.Days,Di.Abbreviated);break;case"EEEE":t=wr(di.Days,Di.Wide);break;case"EEEEE":t=wr(di.Days,Di.Narrow);break;case"EEEEEE":t=wr(di.Days,Di.Short);break;case"a":case"aa":case"aaa":t=wr(di.DayPeriods,Di.Abbreviated);break;case"aaaa":t=wr(di.DayPeriods,Di.Wide);break;case"aaaaa":t=wr(di.DayPeriods,Di.Narrow);break;case"b":case"bb":case"bbb":t=wr(di.DayPeriods,Di.Abbreviated,Ws.Standalone,!0);break;case"bbbb":t=wr(di.DayPeriods,Di.Wide,Ws.Standalone,!0);break;case"bbbbb":t=wr(di.DayPeriods,Di.Narrow,Ws.Standalone,!0);break;case"B":case"BB":case"BBB":t=wr(di.DayPeriods,Di.Abbreviated,Ws.Format,!0);break;case"BBBB":t=wr(di.DayPeriods,Di.Wide,Ws.Format,!0);break;case"BBBBB":t=wr(di.DayPeriods,Di.Narrow,Ws.Format,!0);break;case"h":t=Gs(Hn.Hours,1,-12);break;case"hh":t=Gs(Hn.Hours,2,-12);break;case"H":t=Gs(Hn.Hours,1);break;case"HH":t=Gs(Hn.Hours,2);break;case"m":t=Gs(Hn.Minutes,1);break;case"mm":t=Gs(Hn.Minutes,2);break;case"s":t=Gs(Hn.Seconds,1);break;case"ss":t=Gs(Hn.Seconds,2);break;case"S":t=Gs(Hn.FractionalSeconds,1);break;case"SS":t=Gs(Hn.FractionalSeconds,2);break;case"SSS":t=Gs(Hn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=lR(Eo.Short);break;case"ZZZZZ":t=lR(Eo.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=lR(Eo.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=lR(Eo.Long);break;default:return null}return KO[n]=t,t}(I);M+=V?V(a,e,D):"''"===I?"'":I.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),M}function YO(n,t,e){const r=new Date(0);return r.setFullYear(n,t,e),r.setHours(0,0,0),r}function Kp(n,t){const e=function(n){return Hr(n)[Zt.LocaleId]}(n);if(dx[e]=dx[e]||{},dx[e][t])return dx[e][t];let r="";switch(t){case"shortDate":r=WO(n,Gr.Short);break;case"mediumDate":r=WO(n,Gr.Medium);break;case"longDate":r=WO(n,Gr.Long);break;case"fullDate":r=WO(n,Gr.Full);break;case"shortTime":r=GO(n,Gr.Short);break;case"mediumTime":r=GO(n,Gr.Medium);break;case"longTime":r=GO(n,Gr.Long);break;case"fullTime":r=GO(n,Gr.Full);break;case"short":const a=Kp(n,"shortTime"),u=Kp(n,"shortDate");r=Xm(qO(n,Gr.Short),[a,u]);break;case"medium":const p=Kp(n,"mediumTime"),_=Kp(n,"mediumDate");r=Xm(qO(n,Gr.Medium),[p,_]);break;case"long":const D=Kp(n,"longTime"),M=Kp(n,"longDate");r=Xm(qO(n,Gr.Long),[D,M]);break;case"full":const I=Kp(n,"fullTime"),V=Kp(n,"fullDate");r=Xm(qO(n,Gr.Full),[I,V])}return r&&(dx[e][t]=r),r}function Xm(n,t){return t&&(n=n.replace(/\{([^}]+)}/g,function(e,r){return null!=t&&r in t?t[r]:e})),n}function Gc(n,t,e="-",r,a){let u="";(n<0||a&&n<=0)&&(a?n=1-n:(n=-n,u=e));let p=String(n);for(;p.length<t;)p="0"+p;return r&&(p=p.substr(p.length-t)),u+p}function Gs(n,t,e=0,r=!1,a=!1){return function(u,p){let _=function(n,t){switch(n){case Hn.FullYear:return t.getFullYear();case Hn.Month:return t.getMonth();case Hn.Date:return t.getDate();case Hn.Hours:return t.getHours();case Hn.Minutes:return t.getMinutes();case Hn.Seconds:return t.getSeconds();case Hn.FractionalSeconds:return t.getMilliseconds();case Hn.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,u);if((e>0||_>-e)&&(_+=e),n===Hn.Hours)0===_&&-12===e&&(_=12);else if(n===Hn.FractionalSeconds)return function(n,t){return Gc(n,3).substr(0,t)}(_,t);const D=Hc(p,Xn.MinusSign);return Gc(_,t,D,r,a)}}function wr(n,t,e=Ws.Format,r=!1){return function(a,u){return function(n,t,e,r,a,u){switch(e){case di.Months:return function(n,t,e){const r=Hr(n),u=Wc([r[Zt.MonthsFormat],r[Zt.MonthsStandalone]],t);return Wc(u,e)}(t,a,r)[n.getMonth()];case di.Days:return function(n,t,e){const r=Hr(n),u=Wc([r[Zt.DaysFormat],r[Zt.DaysStandalone]],t);return Wc(u,e)}(t,a,r)[n.getDay()];case di.DayPeriods:const p=n.getHours(),_=n.getMinutes();if(u){const M=function(n){const t=Hr(n);return yB(t),(t[Zt.ExtraData][2]||[]).map(r=>"string"==typeof r?oR(r):[oR(r[0]),oR(r[1])])}(t),I=function(n,t,e){const r=Hr(n);yB(r);const u=Wc([r[Zt.ExtraData][0],r[Zt.ExtraData][1]],t)||[];return Wc(u,e)||[]}(t,a,r),V=M.findIndex(j=>{if(Array.isArray(j)){const[G,Z]=j,ye=p>=G.hours&&_>=G.minutes,be=p<Z.hours||p===Z.hours&&_<Z.minutes;if(G.hours<Z.hours){if(ye&&be)return!0}else if(ye||be)return!0}else if(j.hours===p&&j.minutes===_)return!0;return!1});if(-1!==V)return I[V]}return function(n,t,e){const r=Hr(n),u=Wc([r[Zt.DayPeriodsFormat],r[Zt.DayPeriodsStandalone]],t);return Wc(u,e)}(t,a,r)[p<12?0:1];case di.Eras:return function(n,t){return Wc(Hr(n)[Zt.Eras],t)}(t,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${e}`)}}(a,u,n,t,e,r)}}function lR(n){return function(t,e,r){const a=-1*r,u=Hc(e,Xn.MinusSign),p=a>0?Math.floor(a/60):Math.ceil(a/60);switch(n){case Eo.Short:return(a>=0?"+":"")+Gc(p,2,u)+Gc(Math.abs(a%60),2,u);case Eo.ShortGMT:return"GMT"+(a>=0?"+":"")+Gc(p,1,u);case Eo.Long:return"GMT"+(a>=0?"+":"")+Gc(p,2,u)+":"+Gc(Math.abs(a%60),2,u);case Eo.Extended:return 0===r?"Z":(a>=0?"+":"")+Gc(p,2,u)+":"+Gc(Math.abs(a%60),2,u);default:throw new Error(`Unknown zone width "${n}"`)}}}function x_(n){return YO(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function uR(n,t=!1){return function(e,r){let a;if(t){const u=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,p=e.getDate();a=1+Math.floor((p+u)/7)}else{const u=x_(e),p=function(n){const t=YO(n,0,1).getDay();return YO(n,0,1+(t<=4?4:11)-t)}(u.getFullYear()),_=u.getTime()-p.getTime();a=1+Math.round(_/6048e5)}return Gc(a,n,Hc(r,Xn.MinusSign))}}function XO(n,t=!1){return function(e,r){return Gc(x_(e).getFullYear(),n,Hc(r,Xn.MinusSign),t)}}const KO={};function dR(n,t){n=n.replace(/:/g,"");const e=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(e)?t:e}function fR(n){return n instanceof Date&&!isNaN(n.valueOf())}class QO{}let hj=(()=>{class n extends QO{constructor(e){super(),this.locale=e}getPluralCategory(e,r){switch(Q4(r||this.locale)(e)){case Es.Zero:return"zero";case Es.One:return"one";case Es.Two:return"two";case Es.Few:return"few";case Es.Many:return"many";default:return"other"}}}return n.\u0275fac=function(e){return new(e||n)(se(Xd))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();function SB(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const r=e.indexOf("="),[a,u]=-1==r?[e,""]:[e.slice(0,r),e.slice(r+1)];if(a.trim()===t)return decodeURIComponent(u)}return null}let JO=(()=>{class n{constructor(e,r,a,u){this._iterableDiffers=e,this._keyValueDiffers=r,this._ngEl=a,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&(bp(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),e.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),e.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${tn(r.item)}`);this._toggleClass(r.item,!0)}),e.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(r=>this._toggleClass(r,!0)):Object.keys(e).forEach(r=>this._toggleClass(r,!!e[r])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(r=>this._toggleClass(r,!1)):Object.keys(e).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(e,r){(e=e.trim())&&e.split(/\s+/g).forEach(a=>{r?this._renderer.addClass(this._ngEl.nativeElement,a):this._renderer.removeClass(this._ngEl.nativeElement,a)})}}return n.\u0275fac=function(e){return new(e||n)(ue(Lc),ue(d),ue(Mn),ue(Ra))},n.\u0275dir=kt({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class MB{constructor(t,e,r,a){this.$implicit=t,this.ngForOf=e,this.index=r,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let S_=(()=>{class n{constructor(e,r,a){this._viewContainer=e,this._template=r,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;if(!this._differ&&e)try{this._differ=this._differs.find(e).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(n){return n.name||typeof n}(e)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const r=[];e.forEachOperation((a,u,p)=>{if(null==a.previousIndex){const _=this._viewContainer.createEmbeddedView(this._template,new MB(null,this._ngForOf,-1,-1),null===p?void 0:p),D=new OB(a,_);r.push(D)}else if(null==p)this._viewContainer.remove(null===u?void 0:u);else if(null!==u){const _=this._viewContainer.get(u);this._viewContainer.move(_,p);const D=new OB(a,_);r.push(D)}});for(let a=0;a<r.length;a++)this._perViewChange(r[a].view,r[a].record);for(let a=0,u=this._viewContainer.length;a<u;a++){const p=this._viewContainer.get(a);p.context.index=a,p.context.count=u,p.context.ngForOf=this._ngForOf}e.forEachIdentityChange(a=>{this._viewContainer.get(a.currentIndex).context.$implicit=a.item})}_perViewChange(e,r){e.context.$implicit=r.item}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(ue(Ui),ue(vt),ue(Lc))},n.\u0275dir=kt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class OB{constructor(t,e){this.record=t,this.view=e}}let ou=(()=>{class n{constructor(e,r){this._viewContainer=e,this._context=new pj,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){TB("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){TB("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,r){return!0}}return n.\u0275fac=function(e){return new(e||n)(ue(Ui),ue(vt))},n.\u0275dir=kt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class pj{constructor(){this.$implicit=null,this.ngIf=null}}function TB(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${tn(t)}'.`)}class Zd{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let A_=(()=>{class n{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(e){this._ngSwitch=e,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(e){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(e)}_matchCase(e){const r=e==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(e){if(this._defaultViews&&e!==this._defaultUsed){this._defaultUsed=e;for(let r=0;r<this._defaultViews.length;r++)this._defaultViews[r].enforceState(e)}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=kt({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),n})(),gx=(()=>{class n{constructor(e,r,a){this.ngSwitch=a,a._addCase(),this._view=new Zd(e,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(e){return new(e||n)(ue(Ui),ue(vt),ue(A_,9))},n.\u0275dir=kt({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),n})(),kB=(()=>{class n{constructor(e,r,a){a._addDefault(new Zd(e,r))}}return n.\u0275fac=function(e){return new(e||n)(ue(Ui),ue(vt),ue(A_,9))},n.\u0275dir=kt({type:n,selectors:[["","ngSwitchDefault",""]]}),n})();function Wu(n,t){return Error(`InvalidPipeArgument: '${t}' for pipe '${tn(n)}'`)}class ER{createSubscription(t,e){return t.subscribe({next:e,error:r=>{throw r}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class DR{createSubscription(t,e){return t.then(e,r=>{throw r})}dispose(t){}onDestroy(t){}}const IB=new DR,xR=new ER;let mx=(()=>{class n{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,r=>this._updateLatestValue(e,r))}_selectStrategy(e){if(Vy(e))return IB;if(jb(e))return xR;throw Wu(n,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,r){e===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(e){return new(e||n)(ue(F,16))},n.\u0275pipe=Ys({name:"async",type:n,pure:!1}),n})(),RB=(()=>{class n{transform(e){if(null==e)return null;if("string"!=typeof e)throw Wu(n,e);return e.toUpperCase()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=Ys({name:"uppercase",type:n,pure:!0}),n})(),NB=(()=>{class n{constructor(e){this.locale=e}transform(e,r="mediumDate",a,u){if(null==e||""===e||e!=e)return null;try{return aR(e,r,u||this.locale,a)}catch(p){throw Wu(n,p.message)}}}return n.\u0275fac=function(e){return new(e||n)(ue(Xd,16))},n.\u0275pipe=Ys({name:"date",type:n,pure:!0}),n})(),Er=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({providers:[{provide:QO,useClass:hj}]}),n})();const LB="browser";function _x(n){return n===LB}function MR(n){return"server"===n}let eT=(()=>{class n{}return n.\u0275prov=ot({token:n,providedIn:"root",factory:()=>new OR(se(An),window)}),n})();class OR{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let a=r.currentNode;for(;a;){const u=a.shadowRoot;if(u){const p=u.getElementById(t)||u.querySelector(`[name="${t}"]`);if(p)return p}a=r.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),r=e.left+this.window.pageXOffset,a=e.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],a-u[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=tT(this.window.history)||tT(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function tT(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class nT{}class kR extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(n){W1||(W1=n)}(new kR)}onAndCancel(t,e,r){return t.addEventListener(e,r,!1),()=>{t.removeEventListener(e,r,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(vx=vx||document.querySelector("base"),vx?vx.getAttribute("href"):null);return null==e?null:function(n){iT=iT||document.createElement("a"),iT.setAttribute("href",n);const t=iT.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){vx=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return SB(document.cookie,t)}}let iT,vx=null;const VB=new Ft("TRANSITION_ID"),$B=[{provide:h_,useFactory:function(n,t,e){return()=>{e.get(p_).donePromise.then(()=>{const r=ph(),a=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<a.length;u++)r.remove(a[u])})}},deps:[VB,An,ai],multi:!0}];class bx{static init(){!function(n){nx=n}(new bx)}addToWindow(t){Qi.getAngularTestability=(r,a=!0)=>{const u=t.findTestabilityInTree(r,a);if(null==u)throw new Error("Could not find testability for element.");return u},Qi.getAllAngularTestabilities=()=>t.getAllTestabilities(),Qi.getAllAngularRootElements=()=>t.getAllRootElements(),Qi.frameworkStabilizers||(Qi.frameworkStabilizers=[]),Qi.frameworkStabilizers.push(r=>{const a=Qi.getAllAngularTestabilities();let u=a.length,p=!1;const _=function(D){p=p||D,u--,0==u&&r(p)};a.forEach(function(D){D.whenStable(_)})})}findTestabilityInTree(t,e,r){if(null==e)return null;const a=t.getTestability(e);return null!=a?a:r?ph().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let jB=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();const Jp=new Ft("EventManagerPlugins");let aT=(()=>{class n{constructor(e,r){this._zone=r,this._eventNameToPlugin=new Map,e.forEach(a=>a.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,r,a){return this._findPluginFor(r).addEventListener(e,r,a)}addGlobalEventListener(e,r,a){return this._findPluginFor(r).addGlobalEventListener(e,r,a)}getZone(){return this._zone}_findPluginFor(e){const r=this._eventNameToPlugin.get(e);if(r)return r;const a=this._plugins;for(let u=0;u<a.length;u++){const p=a[u];if(p.supports(e))return this._eventNameToPlugin.set(e,p),p}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(se(Jp),se(On))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();class LR{constructor(t){this._doc=t}addGlobalEventListener(t,e,r){const a=ph().getGlobalEventTarget(this._doc,t);if(!a)throw new Error(`Unsupported event target ${a} for event ${e}`);return this.addEventListener(a,e,r)}}let BR=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const r=new Set;e.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),r.add(a))}),this.onStylesAdded(r)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})(),ef=(()=>{class n extends BR{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,r,a){e.forEach(u=>{const p=this._doc.createElement("style");p.textContent=u,a.push(r.appendChild(p))})}addHost(e){const r=[];this._addStylesToHost(this._stylesSet,e,r),this._hostNodes.set(e,r)}removeHost(e){const r=this._hostNodes.get(e);r&&r.forEach(lT),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((r,a)=>{this._addStylesToHost(e,a,r)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(lT))}}return n.\u0275fac=function(e){return new(e||n)(se(An))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();function lT(n){ph().remove(n)}const VR={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},$R=/%COMP%/g;function uT(n,t,e){for(let r=0;r<t.length;r++){let a=t[r];Array.isArray(a)?uT(n,a,e):(a=a.replace($R,n),e.push(a))}return e}function HB(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let cT=(()=>{class n{constructor(e,r,a){this.eventManager=e,this.sharedStylesHost=r,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new zR(e)}createRenderer(e,r){if(!e||!r)return this.defaultRenderer;switch(r.encapsulation){case Or.Emulated:{let a=this.rendererByCompId.get(r.id);return a||(a=new Lj(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,a)),a.applyToHost(e),a}case 1:case Or.ShadowDom:return new Bj(this.eventManager,this.sharedStylesHost,e,r);default:if(!this.rendererByCompId.has(r.id)){const a=uT(r.id,r.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(se(aT),se(ef),se(k1))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();class zR{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(VR[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,r){t&&t.insertBefore(e,r)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let r="string"==typeof t?document.querySelector(t):t;if(!r)throw new Error(`The selector "${t}" did not match any elements`);return e||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,r,a){if(a){e=a+":"+e;const u=VR[a];u?t.setAttributeNS(u,e,r):t.setAttribute(e,r)}else t.setAttribute(e,r)}removeAttribute(t,e,r){if(r){const a=VR[r];a?t.removeAttributeNS(a,e):t.removeAttribute(`${r}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,r,a){a&(Bo.DashCase|Bo.Important)?t.style.setProperty(e,r,a&Bo.Important?"important":""):t.style[e]=r}removeStyle(t,e,r){r&Bo.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,r){t[e]=r}setValue(t,e){t.nodeValue=e}listen(t,e,r){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,HB(r)):this.eventManager.addEventListener(t,e,HB(r))}}class Lj extends zR{constructor(t,e,r,a){super(t),this.component=r;const u=uT(a+"-"+r.id,r.styles,[]);e.addStyles(u),this.contentAttr=function(n){return"_ngcontent-%COMP%".replace($R,n)}(a+"-"+r.id),this.hostAttr=function(n){return"_nghost-%COMP%".replace($R,n)}(a+"-"+r.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const r=super.createElement(t,e);return super.setAttribute(r,this.contentAttr,""),r}}class Bj extends zR{constructor(t,e,r,a){super(t),this.sharedStylesHost=e,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=uT(a.id,a.styles,[]);for(let p=0;p<u.length;p++){const _=document.createElement("style");_.textContent=u[p],this.shadowRoot.appendChild(_)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,r){return super.insertBefore(this.nodeOrShadowRoot(t),e,r)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Vj=(()=>{class n extends LR{constructor(e){super(e)}supports(e){return!0}addEventListener(e,r,a){return e.addEventListener(r,a,!1),()=>this.removeEventListener(e,r,a)}removeEventListener(e,r,a){return e.removeEventListener(r,a)}}return n.\u0275fac=function(e){return new(e||n)(se(An))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();const dT=["alt","control","meta","shift"],Hj={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},YB={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},XB={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let KB=(()=>{class n extends LR{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,r,a){const u=n.parseEventName(r),p=n.eventCallback(u.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ph().onAndCancel(e,u.domEventName,p))}static parseEventName(e){const r=e.toLowerCase().split("."),a=r.shift();if(0===r.length||"keydown"!==a&&"keyup"!==a)return null;const u=n._normalizeKey(r.pop());let p="";if(dT.forEach(D=>{const M=r.indexOf(D);M>-1&&(r.splice(M,1),p+=D+".")}),p+=u,0!=r.length||0===u.length)return null;const _={};return _.domEventName=a,_.fullKey=p,_}static getEventFullKey(e){let r="",a=function(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&YB.hasOwnProperty(t)&&(t=YB[t]))}return Hj[t]||t}(e);return a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),dT.forEach(u=>{u!=a&&XB[u](e)&&(r+=u+".")}),r+=a,r}static eventCallback(e,r,a){return u=>{n.getEventFullKey(u)===e&&a.runGuarded(()=>r(u))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return n.\u0275fac=function(e){return new(e||n)(se(An))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})(),Qm=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ot({factory:function(){return se(Dx)},token:n,providedIn:"root"}),n})(),Dx=(()=>{class n extends Qm{constructor(e){super(),this._doc=e}sanitize(e,r){if(null==r)return null;switch(e){case wi.NONE:return r;case wi.HTML:return Ro(r,"HTML")?Pr(r):Ff(this._doc,String(r)).toString();case wi.STYLE:return Ro(r,"Style")?Pr(r):r;case wi.SCRIPT:if(Ro(r,"Script"))return Pr(r);throw new Error("unsafe value used in a script context");case wi.URL:return Bv(r),Ro(r,"URL")?Pr(r):Tg(String(r));case wi.RESOURCE_URL:if(Ro(r,"ResourceURL"))return Pr(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return function(n){return new hc(n)}(e)}bypassSecurityTrustStyle(e){return function(n){return new Du(n)}(e)}bypassSecurityTrustScript(e){return function(n){return new Lv(n)}(e)}bypassSecurityTrustUrl(e){return function(n){return new si(n)}(e)}bypassSecurityTrustResourceUrl(e){return function(n){return new Sa(n)}(e)}}return n.\u0275fac=function(e){return new(e||n)(se(An))},n.\u0275prov=ot({factory:function(){return function(n){return new Dx(n.get(An))}(se(pp))},token:n,providedIn:"root"}),n})();const Qj=z3($W,"browser",[{provide:Yd,useValue:LB},{provide:M3,useValue:function(){kR.makeCurrent(),bx.init()},multi:!0},{provide:An,useFactory:function(){return function(n){qC=n}(document),document},deps:[]}]),Jj=[[],{provide:Qg,useValue:"root"},{provide:zl,useFactory:function(){return new zl},deps:[]},{provide:Jp,useClass:Vj,multi:!0,deps:[An,On,Yd]},{provide:Jp,useClass:KB,multi:!0,deps:[An]},[],{provide:cT,useClass:cT,deps:[aT,ef,k1]},{provide:wo,useExisting:cT},{provide:BR,useExisting:ef},{provide:ef,useClass:ef,deps:[An]},{provide:yO,useClass:yO,deps:[On]},{provide:aT,useClass:aT,deps:[Jp,On]},{provide:nT,useClass:jB,deps:[]},[]];let qR=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:k1,useValue:e.appId},{provide:VB,useExisting:k1},$B]}}}return n.\u0275fac=function(e){return new(e||n)(se(n,12))},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({providers:Jj,imports:[Er,UW]}),n})();function _n(...n){let t=n[n.length-1];return at(t)?(n.pop(),gi(n,t)):ea(n)}function J1(n,t){return Kn(n,t,1)}function Wi(n,t){return function(r){return r.lift(new ez(n,t))}}"undefined"!=typeof window&&window;class ez{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new tz(t,this.predicate,this.thisArg))}}class tz extends Dt{constructor(t,e,r){super(t),this.predicate=e,this.thisArg=r,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(r){return void this.destination.error(r)}e&&this.destination.next(t)}}class QB{}class JB{}class Br{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const r=e.indexOf(":");if(r>0){const a=e.slice(0,r),u=a.toLowerCase(),p=e.slice(r+1).trim();this.maybeSetNormalizedName(a,u),this.headers.has(u)?this.headers.get(u).push(p):this.headers.set(u,[p])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let r=t[e];const a=e.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(a,r),this.maybeSetNormalizedName(e,a))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Br?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Br;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Br?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(t.name,e);const a=("a"===t.op?this.headers.get(e):void 0)||[];a.push(...r),this.headers.set(e,a);break;case"d":const u=t.value;if(u){let p=this.headers.get(e);if(!p)return;p=p.filter(_=>-1===u.indexOf(_)),0===p.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,p)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class nz{encodeKey(t){return ZB(t)}encodeValue(t){return ZB(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const rz=/%(\d[a-f0-9])/gi,sz={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function ZB(n){return encodeURIComponent(n).replace(rz,(t,e)=>{var r;return null!==(r=sz[e])&&void 0!==r?r:t})}function hT(n){return`${n}`}class mh{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new nz,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(a=>{const u=a.indexOf("="),[p,_]=-1==u?[t.decodeKey(a),""]:[t.decodeKey(a.slice(0,u)),t.decodeValue(a.slice(u+1))],D=e.get(p)||[];D.push(_),e.set(p,D)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const r=t.fromObject[e];this.map.set(e,Array.isArray(r)?r:[r])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(r=>{const a=t[r];Array.isArray(a)?a.forEach(u=>{e.push({param:r,value:u,op:"a"})}):e.push({param:r,value:a,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(r=>e+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new mh({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(hT(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let r=this.map.get(t.param)||[];const a=r.indexOf(hT(t.value));-1!==a&&r.splice(a,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class az{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function Z1(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function e5(n){return"undefined"!=typeof Blob&&n instanceof Blob}function t5(n){return"undefined"!=typeof FormData&&n instanceof FormData}class qu{constructor(t,e,r,a){let u;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||a?(this.body=void 0!==r?r:null,u=a):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Br),this.context||(this.context=new az),this.params){const p=this.params.toString();if(0===p.length)this.urlWithParams=e;else{const _=e.indexOf("?");this.urlWithParams=e+(-1===_?"?":_<e.length-1?"&":"")+p}}else this.params=new mh,this.urlWithParams=e}serializeBody(){return null===this.body?null:Z1(this.body)||e5(this.body)||t5(this.body)||function(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof mh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||t5(this.body)?null:e5(this.body)?this.body.type||null:Z1(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof mh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const r=t.method||this.method,a=t.url||this.url,u=t.responseType||this.responseType,p=void 0!==t.body?t.body:this.body,_=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,D=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let M=t.headers||this.headers,I=t.params||this.params;const V=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(M=Object.keys(t.setHeaders).reduce((j,G)=>j.set(G,t.setHeaders[G]),M)),t.setParams&&(I=Object.keys(t.setParams).reduce((j,G)=>j.set(G,t.setParams[G]),I)),new qu(r,a,p,{params:I,headers:M,context:V,reportProgress:D,responseType:u,withCredentials:_})}}var Ds=(()=>((Ds=Ds||{})[Ds.Sent=0]="Sent",Ds[Ds.UploadProgress=1]="UploadProgress",Ds[Ds.ResponseHeader=2]="ResponseHeader",Ds[Ds.DownloadProgress=3]="DownloadProgress",Ds[Ds.Response=4]="Response",Ds[Ds.User=5]="User",Ds))();class I_{constructor(t,e=200,r="OK"){this.headers=t.headers||new Br,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||r,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class XR extends I_{constructor(t={}){super(t),this.type=Ds.ResponseHeader}clone(t={}){return new XR({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Jm extends I_{constructor(t={}){super(t),this.type=Ds.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Jm({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class eC extends I_{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function tC(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Zm=(()=>{class n{constructor(e){this.handler=e}request(e,r,a={}){let u;if(e instanceof qu)u=e;else{let D,M;D=a.headers instanceof Br?a.headers:new Br(a.headers),a.params&&(M=a.params instanceof mh?a.params:new mh({fromObject:a.params})),u=new qu(e,r,void 0!==a.body?a.body:null,{headers:D,context:a.context,params:M,reportProgress:a.reportProgress,responseType:a.responseType||"json",withCredentials:a.withCredentials})}const p=_n(u).pipe(J1(D=>this.handler.handle(D)));if(e instanceof qu||"events"===a.observe)return p;const _=p.pipe(Wi(D=>D instanceof Jm));switch(a.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return _.pipe(Pe(D=>{if(null!==D.body&&!(D.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return D.body}));case"blob":return _.pipe(Pe(D=>{if(null!==D.body&&!(D.body instanceof Blob))throw new Error("Response is not a Blob.");return D.body}));case"text":return _.pipe(Pe(D=>{if(null!==D.body&&"string"!=typeof D.body)throw new Error("Response is not a string.");return D.body}));case"json":default:return _.pipe(Pe(D=>D.body))}case"response":return _;default:throw new Error(`Unreachable: unhandled observe type ${a.observe}}`)}}delete(e,r={}){return this.request("DELETE",e,r)}get(e,r={}){return this.request("GET",e,r)}head(e,r={}){return this.request("HEAD",e,r)}jsonp(e,r){return this.request("JSONP",e,{params:(new mh).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,r={}){return this.request("OPTIONS",e,r)}patch(e,r,a={}){return this.request("PATCH",e,tC(a,r))}post(e,r,a={}){return this.request("POST",e,tC(a,r))}put(e,r,a={}){return this.request("PUT",e,tC(a,r))}}return n.\u0275fac=function(e){return new(e||n)(se(QB))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();class KR{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const gT=new Ft("HTTP_INTERCEPTORS");let lz=(()=>{class n{intercept(e,r){return r.handle(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();const dz=/^\)\]\}',?\n/;let i5=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ae(r=>{const a=this.xhrFactory.build();if(a.open(e.method,e.urlWithParams),e.withCredentials&&(a.withCredentials=!0),e.headers.forEach((G,Z)=>a.setRequestHeader(G,Z.join(","))),e.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const G=e.detectContentTypeHeader();null!==G&&a.setRequestHeader("Content-Type",G)}if(e.responseType){const G=e.responseType.toLowerCase();a.responseType="json"!==G?G:"text"}const u=e.serializeBody();let p=null;const _=()=>{if(null!==p)return p;const G=1223===a.status?204:a.status,Z=a.statusText||"OK",ye=new Br(a.getAllResponseHeaders()),be=function(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(a)||e.url;return p=new XR({headers:ye,status:G,statusText:Z,url:be}),p},D=()=>{let{headers:G,status:Z,statusText:ye,url:be}=_(),Ye=null;204!==Z&&(Ye=void 0===a.response?a.responseText:a.response),0===Z&&(Z=Ye?200:0);let je=Z>=200&&Z<300;if("json"===e.responseType&&"string"==typeof Ye){const Et=Ye;Ye=Ye.replace(dz,"");try{Ye=""!==Ye?JSON.parse(Ye):null}catch(Wt){Ye=Et,je&&(je=!1,Ye={error:Wt,text:Ye})}}je?(r.next(new Jm({body:Ye,headers:G,status:Z,statusText:ye,url:be||void 0})),r.complete()):r.error(new eC({error:Ye,headers:G,status:Z,statusText:ye,url:be||void 0}))},M=G=>{const{url:Z}=_(),ye=new eC({error:G,status:a.status||0,statusText:a.statusText||"Unknown Error",url:Z||void 0});r.error(ye)};let I=!1;const V=G=>{I||(r.next(_()),I=!0);let Z={type:Ds.DownloadProgress,loaded:G.loaded};G.lengthComputable&&(Z.total=G.total),"text"===e.responseType&&!!a.responseText&&(Z.partialText=a.responseText),r.next(Z)},j=G=>{let Z={type:Ds.UploadProgress,loaded:G.loaded};G.lengthComputable&&(Z.total=G.total),r.next(Z)};return a.addEventListener("load",D),a.addEventListener("error",M),a.addEventListener("timeout",M),a.addEventListener("abort",M),e.reportProgress&&(a.addEventListener("progress",V),null!==u&&a.upload&&a.upload.addEventListener("progress",j)),a.send(u),r.next({type:Ds.Sent}),()=>{a.removeEventListener("error",M),a.removeEventListener("abort",M),a.removeEventListener("load",D),a.removeEventListener("timeout",M),e.reportProgress&&(a.removeEventListener("progress",V),null!==u&&a.upload&&a.upload.removeEventListener("progress",j)),a.readyState!==a.DONE&&a.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(se(nT))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();const QR=new Ft("XSRF_COOKIE_NAME"),JR=new Ft("XSRF_HEADER_NAME");class r5{}let yT,s5=(()=>{class n{constructor(e,r,a){this.doc=e,this.platform=r,this.cookieName=a,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=SB(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(se(An),se(Yd),se(QR))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})(),Wa=(()=>{class n{constructor(e,r){this.tokenService=e,this.headerName=r}intercept(e,r){const a=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||a.startsWith("http://")||a.startsWith("https://"))return r.handle(e);const u=this.tokenService.getToken();return null!==u&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,u)})),r.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(se(r5),se(JR))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})(),o5=(()=>{class n{constructor(e,r){this.backend=e,this.injector=r,this.chain=null}handle(e){if(null===this.chain){const r=this.injector.get(gT,[]);this.chain=r.reduceRight((a,u)=>new KR(a,u),this.backend)}return this.chain.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(se(JB),se(ai))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})(),pz=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Wa,useClass:lz}]}}static withOptions(e={}){return{ngModule:n,providers:[e.cookieName?{provide:QR,useValue:e.cookieName}:[],e.headerName?{provide:JR,useValue:e.headerName}:[]]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({providers:[Wa,{provide:gT,useExisting:Wa,multi:!0},{provide:r5,useClass:s5},{provide:QR,useValue:"XSRF-TOKEN"},{provide:JR,useValue:"X-XSRF-TOKEN"}]}),n})(),gz=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({providers:[Zm,{provide:QB,useClass:o5},i5,{provide:JB,useExisting:i5}],imports:[[pz.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();try{yT="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){yT=!1}let no,_T,e0,eN,nf,rs=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?_x(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!yT)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(se(Yd))},n.\u0275prov=ot({factory:function(){return new n(se(Yd))},token:n,providedIn:"root"}),n})(),nC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({}),n})();function Sx(n){return function(){if(null==no&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>no=!0}))}finally{no=no||!1}return no}()?n:!!n.capture}function l5(){if(null==e0){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return e0=!1,e0;if("scrollBehavior"in document.documentElement.style)e0=!0;else{const n=Element.prototype.scrollTo;e0=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return e0}function Ax(){if("object"!=typeof document||!document)return 0;if(null==_T){const n=document.createElement("div"),t=n.style;n.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";const e=document.createElement("div"),r=e.style;r.width="2px",r.height="1px",n.appendChild(e),document.body.appendChild(n),_T=0,0===n.scrollLeft&&(n.scrollLeft=1,_T=0===n.scrollLeft?1:2),n.parentNode.removeChild(n)}return _T}function u5(n){if(function(){if(null==eN){const n="undefined"!=typeof document?document.head:null;eN=!(!n||!n.createShadowRoot&&!n.attachShadow)}return eN}()){const t=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function vT(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function rC(n){return n.composedPath?n.composedPath()[0]:n.target}function tN(){return void 0!==nf.__karma__&&!!nf.__karma__||void 0!==nf.jasmine&&!!nf.jasmine||void 0!==nf.jest&&!!nf.jest||void 0!==nf.Mocha&&!!nf.Mocha}function yr(n){return null!=n&&"false"!=`${n}`}function Yu(n,t=0){return function(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(n)?Number(n):t}function nN(n){return Array.isArray(n)?n:[n]}function io(n){return null==n?"":"string"==typeof n?n:`${n}px`}function Xu(n){return n instanceof Mn?n.nativeElement:n}function sC(n,t,e,r){return Ce(e)&&(r=e,e=void 0),r?sC(n,t,e).pipe(Pe(a=>Ae(a)?r(...a):r(a))):new ae(a=>{iN(n,t,function(p){a.next(arguments.length>1?Array.prototype.slice.call(arguments):p)},a,e)})}function iN(n,t,e,r,a){let u;if(function(n){return n&&"function"==typeof n.addEventListener&&"function"==typeof n.removeEventListener}(n)){const p=n;n.addEventListener(t,e,a),u=()=>p.removeEventListener(t,e,a)}else if(function(n){return n&&"function"==typeof n.on&&"function"==typeof n.off}(n)){const p=n;n.on(t,e),u=()=>p.off(t,e)}else if(function(n){return n&&"function"==typeof n.addListener&&"function"==typeof n.removeListener}(n)){const p=n;n.addListener(t,e),u=()=>p.removeListener(t,e)}else{if(!n||!n.length)throw new TypeError("Invalid event target");for(let p=0,_=n.length;p<_;p++)iN(n[p],t,e,r,a)}r.add(u)}nf="undefined"!=typeof global?global:"undefined"!=typeof window?window:{};class wT extends T{constructor(t,e){super()}schedule(t,e=0){return this}}class Mx extends wT{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const r=this.id,a=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(a,r,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(a,this.id,e),this}requestAsyncId(t,e,r=0){return setInterval(t.flush.bind(t,this),r)}recycleAsyncId(t,e,r=0){if(null!==r&&this.delay===r&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let a,r=!1;try{this.work(t)}catch(u){r=!0,a=!!u&&u||new Error(u)}if(r)return this.unsubscribe(),a}_unsubscribe(){const t=this.id,e=this.scheduler,r=e.actions,a=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==a&&r.splice(a,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let ET=(()=>{class n{constructor(e,r=n.now){this.SchedulerAction=e,this.now=r}schedule(e,r=0,a){return new this.SchedulerAction(this,e).schedule(a,r)}}return n.now=()=>Date.now(),n})();class Ku extends ET{constructor(t,e=ET.now){super(t,()=>Ku.delegate&&Ku.delegate!==this?Ku.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,r){return Ku.delegate&&Ku.delegate!==this?Ku.delegate.schedule(t,e,r):super.schedule(t,e,r)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}}new class extends Ku{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let r,a=-1,u=e.length;t=t||e.shift();do{if(r=t.execute(t.state,t.delay))break}while(++a<u&&(t=e.shift()));if(this.active=!1,r){for(;++a<u&&(t=e.shift());)t.unsubscribe();throw r}}}(class extends Mx{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,r=0){return null!==r&&r>0?super.requestAsyncId(t,e,r):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(()=>t.flush(null))))}recycleAsyncId(t,e,r=0){if(null!==r&&r>0||null===r&&this.delay>0)return super.recycleAsyncId(t,e,r);0===t.actions.length&&(cancelAnimationFrame(e),t.scheduled=void 0)}});let vz=1;const bz=Promise.resolve(),Ox={};function h5(n){return n in Ox&&(delete Ox[n],!0)}const ss={setImmediate(n){const t=vz++;return Ox[t]=!0,bz.then(()=>h5(t)&&n()),t},clearImmediate(n){h5(n)}};new class extends Ku{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let r,a=-1,u=e.length;t=t||e.shift();do{if(r=t.execute(t.state,t.delay))break}while(++a<u&&(t=e.shift()));if(this.active=!1,r){for(;++a<u&&(t=e.shift());)t.unsubscribe();throw r}}}(class extends Mx{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,r=0){return null!==r&&r>0?super.requestAsyncId(t,e,r):(t.actions.push(this),t.scheduled||(t.scheduled=ss.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,r=0){if(null!==r&&r>0||null===r&&this.delay>0)return super.recycleAsyncId(t,e,r);0===t.actions.length&&(ss.clearImmediate(e),t.scheduled=void 0)}});function oC(n){return!!n&&(n instanceof ae||"function"==typeof n.lift&&"function"==typeof n.subscribe)}function Sl(n,t){return e=>e.lift(new Tx(n,t))}class Tx{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new t0(t,this.compare,this.keySelector))}}class t0 extends Dt{constructor(t,e,r){super(t),this.keySelector=r,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:a}=this;e=a?a(t):t}catch(a){return this.destination.error(a)}let r=!1;if(this.hasKey)try{const{compare:a}=this;r=a(this.key,e)}catch(a){return this.destination.error(a)}else this.hasKey=!0;r||(this.key=e,this.destination.next(t))}}const Yc=new Ku(Mx);class p5{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new g5(t,this.durationSelector))}}class g5 extends sr{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let e;try{const{durationSelector:a}=this;e=a(t)}catch(a){return this.destination.error(a)}const r=Pn(e,new ut(this));!r||r.closed?this.clearThrottle():this.add(this.throttled=r)}}clearThrottle(){const{value:t,hasValue:e,throttled:r}=this;r&&(this.remove(r),this.throttled=void 0,r.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function oN(n){return!Ae(n)&&n-parseFloat(n)+1>=0}function wz(n){const{index:t,period:e,subscriber:r}=n;if(r.next(t),!r.closed){if(-1===e)return r.complete();n.index=t+1,this.schedule(n,e)}}function aN(n,t=Yc){return function(n){return function(e){return e.lift(new p5(n))}}(()=>function(n=0,t,e){let r=-1;return oN(t)?r=Number(t)<1?1:Number(t):at(t)&&(e=t),at(e)||(e=Yc),new ae(a=>{const u=oN(n)?n:+n-e.now();return e.schedule(wz,u,{index:0,period:r,subscriber:a})})}(n,t))}function yi(n){return t=>t.lift(new Ez(n))}class Ez{constructor(t){this.notifier=t}call(t,e){const r=new y5(t),a=Pn(this.notifier,new ut(r));return a&&!r.seenValue?(r.add(a),e.subscribe(r)):r}}class y5 extends sr{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function N_(...n){return Ki(1)(_n(...n))}function qo(...n){const t=n[n.length-1];return at(t)?(n.pop(),e=>N_(n,e,t)):e=>N_(n,e)}function Ga(n,t){return"function"==typeof t?e=>e.pipe(Ga((r,a)=>rn(n(r,a)).pipe(Pe((u,p)=>t(r,u,a,p))))):e=>e.lift(new AT(n))}class AT{constructor(t){this.project=t}call(t,e){return e.subscribe(new MT(t,this.project))}}class MT extends sr{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const r=this.index++;try{e=this.project(t,r)}catch(a){return void this.destination.error(a)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const r=new ut(this),a=this.destination;a.add(r),this.innerSubscription=Pn(t,r),this.innerSubscription!==r&&a.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;(!t||t.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const v5=new class extends Ku{}(class extends Mx{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,r=0){return null!==r&&r>0||null===r&&this.delay>0?super.requestAsyncId(t,e,r):t.flush(this)}}),rf=new ae(n=>n.complete());function Yo(n){return n?function(n){return new ae(t=>n.schedule(()=>t.complete()))}(n):rf}function ro(n,t){return new ae(t?e=>t.schedule(sf,0,{error:n,subscriber:e}):e=>e.error(n))}function sf({error:n,subscriber:t}){t.error(n)}class qa{constructor(t,e,r){this.kind=t,this.value=e,this.error=r,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,r){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return r&&r()}}accept(t,e,r){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,r)}toObservable(){switch(this.kind){case"N":return _n(this.value);case"E":return ro(this.error);case"C":return Yo()}throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new qa("N",t):qa.undefinedValueNotification}static createError(t){return new qa("E",void 0,t)}static createComplete(){return qa.completeNotification}}qa.completeNotification=new qa("C"),qa.undefinedValueNotification=new qa("N",void 0);class OT extends Dt{constructor(t,e,r=0){super(t),this.scheduler=e,this.delay=r}static dispatch(t){const{notification:e,destination:r}=t;e.observe(r),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(OT.dispatch,this.delay,new C5(t,this.destination)))}_next(t){this.scheduleMessage(qa.createNext(t))}_error(t){this.scheduleMessage(qa.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(qa.createComplete()),this.unsubscribe()}}class C5{constructor(t,e){this.notification=t,this.destination=e}}class _h extends We{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Az(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,r=e?this._events:this._trimBufferThenGetEvents(),a=this.scheduler,u=r.length;let p;if(this.closed)throw new Ve;if(this.isStopped||this.hasError?p=T.EMPTY:(this.observers.push(t),p=new $e(this,t)),a&&t.add(t=new OT(t,a)),e)for(let _=0;_<u&&!t.closed;_++)t.next(r[_]);else for(let _=0;_<u&&!t.closed;_++)t.next(r[_].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),p}_getNow(){return(this.scheduler||v5).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,r=this._windowTime,a=this._events,u=a.length;let p=0;for(;p<u&&!(t-a[p].time<r);)p++;return u>e&&(p=Math.max(p,u-e)),p>0&&a.splice(0,p),a}}class Az{constructor(t,e){this.time=t,this.value=e}}function r0(n,t,e){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:t,refCount:!1,scheduler:e},a=>a.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:e,scheduler:r}){let a,p,u=0,_=!1,D=!1;return function(I){let V;u++,!a||_?(_=!1,a=new _h(n,t,r),V=a.subscribe(this),p=I.subscribe({next(j){a.next(j)},error(j){_=!0,a.error(j)},complete(){D=!0,p=void 0,a.complete()}}),D&&(p=void 0)):V=a.subscribe(this),this.add(()=>{u--,V.unsubscribe(),V=void 0,p&&!D&&e&&0===u&&(p.unsubscribe(),p=void 0,a=void 0)})}}(r))}const E5=new Ft("cdk-dir-doc",{providedIn:"root",factory:function(){return yd(An)}});let vh=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new Vn,e){const a=e.documentElement?e.documentElement.dir:null,u=(e.body?e.body.dir:null)||a;this.value="ltr"===u||"rtl"===u?u:"ltr"}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(se(E5,8))},n.\u0275prov=ot({factory:function(){return new n(se(E5,8))},token:n,providedIn:"root"}),n})(),P_=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({}),n})();class Iz{constructor(t=!1,e,r=!0){this._multiple=t,this._emitChanges=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new We,e&&e.length&&(t?e.forEach(a=>this._markSelected(a)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(e=>this._markSelected(e)),this._emitChangeEvent()}deselect(...t){this._verifyValueAssignment(t),t.forEach(e=>this._unmarkSelected(e)),this._emitChangeEvent()}toggle(t){this.isSelected(t)?this.deselect(t):this.select(t)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(t){return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}}let x5=(()=>{class n{constructor(){this._listeners=[]}notify(e,r){for(let a of this._listeners)a(e,r)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(r=>e!==r)}}ngOnDestroy(){this._listeners=[]}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ot({factory:function(){return new n},token:n,providedIn:"root"}),n})(),aC=(()=>{class n{constructor(e,r,a){this._ngZone=e,this._platform=r,this._scrolled=new We,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=a}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const r=this.scrollContainers.get(e);r&&(r.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new ae(r=>{this._globalSubscription||this._addGlobalListener();const a=e>0?this._scrolled.pipe(aN(e)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{a.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):_n()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(e,r){const a=this.getAncestorScrollContainers(e);return this.scrolled(r).pipe(Wi(u=>!u||a.indexOf(u)>-1))}getAncestorScrollContainers(e){const r=[];return this.scrollContainers.forEach((a,u)=>{this._scrollableContainsElement(u,e)&&r.push(u)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,r){let a=Xu(r),u=e.getElementRef().nativeElement;do{if(a==u)return!0}while(a=a.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>sC(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(se(On),se(rs),se(An,8))},n.\u0275prov=ot({factory:function(){return new n(se(On),se(rs),se(An,8))},token:n,providedIn:"root"}),n})(),lC=(()=>{class n{constructor(e,r,a,u){this.elementRef=e,this.scrollDispatcher=r,this.ngZone=a,this.dir=u,this._destroyed=new We,this._elementScrolled=new ae(p=>this.ngZone.runOutsideAngular(()=>sC(this.elementRef.nativeElement,"scroll").pipe(yi(this._destroyed)).subscribe(p)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){const r=this.elementRef.nativeElement,a=this.dir&&"rtl"==this.dir.value;null==e.left&&(e.left=a?e.end:e.start),null==e.right&&(e.right=a?e.start:e.end),null!=e.bottom&&(e.top=r.scrollHeight-r.clientHeight-e.bottom),a&&0!=Ax()?(null!=e.left&&(e.right=r.scrollWidth-r.clientWidth-e.left),2==Ax()?e.left=e.right:1==Ax()&&(e.left=e.right?-e.right:e.right)):null!=e.right&&(e.left=r.scrollWidth-r.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){const r=this.elementRef.nativeElement;l5()?r.scrollTo(e):(null!=e.top&&(r.scrollTop=e.top),null!=e.left&&(r.scrollLeft=e.left))}measureScrollOffset(e){const r="left",a="right",u=this.elementRef.nativeElement;if("top"==e)return u.scrollTop;if("bottom"==e)return u.scrollHeight-u.clientHeight-u.scrollTop;const p=this.dir&&"rtl"==this.dir.value;return"start"==e?e=p?a:r:"end"==e&&(e=p?r:a),p&&2==Ax()?e==r?u.scrollWidth-u.clientWidth-u.scrollLeft:u.scrollLeft:p&&1==Ax()?e==r?u.scrollLeft+u.scrollWidth-u.clientWidth:-u.scrollLeft:e==r?u.scrollLeft:u.scrollWidth-u.clientWidth-u.scrollLeft}}return n.\u0275fac=function(e){return new(e||n)(ue(Mn),ue(aC),ue(On),ue(vh,8))},n.\u0275dir=kt({type:n,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),n})(),L_=(()=>{class n{constructor(e,r,a){this._platform=e,this._change=new We,this._changeListener=u=>{this._change.next(u)},this._document=a,r.runOutsideAngular(()=>{if(e.isBrowser){const u=this._getWindow();u.addEventListener("resize",this._changeListener),u.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:r,height:a}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+a,right:e.left+r,height:a,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,r=this._getWindow(),a=e.documentElement,u=a.getBoundingClientRect();return{top:-u.top||e.body.scrollTop||r.scrollY||a.scrollTop||0,left:-u.left||e.body.scrollLeft||r.scrollX||a.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(aN(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(se(rs),se(On),se(An,8))},n.\u0275prov=ot({factory:function(){return new n(se(rs),se(On),se(An,8))},token:n,providedIn:"root"}),n})(),uC=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({}),n})(),I5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[P_,nC,uC],P_,uC]}),n})();class au extends We{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Ve;return this._value}next(t){super.next(this._value=t)}}function bh(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}function o0(){}function Ss(n,t,e){return function(a){return a.lift(new PT(n,t,e))}}class PT{constructor(t,e,r){this.nextOrObserver=t,this.error=e,this.complete=r}call(t,e){return e.subscribe(new a7(t,this.nextOrObserver,this.error,this.complete))}}class a7 extends Dt{constructor(t,e,r,a){super(t),this._tapNext=o0,this._tapError=o0,this._tapComplete=o0,this._tapError=r||o0,this._tapComplete=a||o0,Ce(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||o0,this._tapError=e.error||o0,this._tapComplete=e.complete||o0)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}function cC(n,t=Yc){return e=>e.lift(new l7(n,t))}class l7{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new u7(t,this.dueTime,this.scheduler))}}class u7 extends Dt{constructor(t,e,r){super(t),this.dueTime=e,this.scheduler=r,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(W5,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function W5(n){n.debouncedNext()}const Ix=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function so(n){return t=>0===n?Yo():t.lift(new d7(n))}class d7{constructor(t){if(this.total=t,this.total<0)throw new Ix}call(t,e){return e.subscribe(new f7(t,this.total))}}class f7 extends Dt{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,r=++this.count;r<=e&&(this.destination.next(t),r===e&&(this.destination.complete(),this.unsubscribe()))}}class h7{constructor(t){this.total=t}call(t,e){return e.subscribe(new p7(t,this.total))}}class p7 extends Dt{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}let mN=(()=>{class n{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ot({factory:function(){return new n},token:n,providedIn:"root"}),n})(),q5=(()=>{class n{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,r)=>this._cleanupObserver(r))}observe(e){const r=Xu(e);return new ae(a=>{const p=this._observeElement(r).subscribe(a);return()=>{p.unsubscribe(),this._unobserveElement(r)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const r=new We,a=this._mutationObserverFactory.create(u=>r.next(u));a&&a.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:a,stream:r,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:r,stream:a}=this._observedElements.get(e);r&&r.disconnect(),a.complete(),this._observedElements.delete(e)}}}return n.\u0275fac=function(e){return new(e||n)(se(mN))},n.\u0275prov=ot({factory:function(){return new n(se(mN))},token:n,providedIn:"root"}),n})(),Y5=(()=>{class n{constructor(e,r,a){this._contentObserver=e,this._elementRef=r,this._ngZone=a,this.event=new Vn,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=yr(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=Yu(e),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(cC(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){var e;null===(e=this._currentSubscription)||void 0===e||e.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(ue(q5),ue(Mn),ue(On))},n.\u0275dir=kt({type:n,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),n})(),X5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({providers:[mN]}),n})();class K5{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new We,this._typeaheadSubscription=T.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=e=>e.disabled,this._pressedLetters=[],this.tabOut=new We,this.change=new We,t instanceof zm&&t.changes.subscribe(e=>{if(this._activeItem){const a=e.toArray().indexOf(this._activeItem);a>-1&&a!==this._activeItemIndex&&(this._activeItemIndex=a)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Ss(e=>this._pressedLetters.push(e)),cC(t),Wi(()=>this._pressedLetters.length>0),Pe(()=>this._pressedLetters.join(""))).subscribe(e=>{const r=this._getItemsArray();for(let a=1;a<r.length+1;a++){const u=(this._activeItemIndex+a)%r.length,p=r[u];if(!this._skipPredicateFn(p)&&0===p.getLabel().toUpperCase().trim().indexOf(e)){this.setActiveItem(u);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,a=["altKey","ctrlKey","metaKey","shiftKey"].every(u=>!t[u]||this._allowedModifierKeys.indexOf(u)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&a){this.setNextItemActive();break}return;case 38:if(this._vertical&&a){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&a){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&a){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&a){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&a){this.setLastItemActive();break}return;default:return void((a||bh(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),r="number"==typeof t?t:e.indexOf(t),a=e[r];this._activeItem=null==a?null:a,this._activeItemIndex=r}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let r=1;r<=e.length;r++){const a=(this._activeItemIndex+t*r+e.length)%e.length;if(!this._skipPredicateFn(e[a]))return void this.setActiveItem(a)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const r=this._getItemsArray();if(r[t]){for(;this._skipPredicateFn(r[t]);)if(!r[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof zm?this._items.toArray():this._items}}class _7 extends K5{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class v7 extends K5{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let Q5=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const r=function(n){try{return n.frameElement}catch(t){return null}}(function(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(r&&(-1===dC(r)||!this.isVisible(r)))return!1;let a=e.nodeName.toLowerCase(),u=dC(e);return e.hasAttribute("contenteditable")?-1!==u:!("iframe"===a||"object"===a||this._platform.WEBKIT&&this._platform.IOS&&!function(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===a?!!e.hasAttribute("controls")&&-1!==u:"video"===a?-1!==u&&(null!==u||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,r){return function(n){return!function(n){return function(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function(n){return function(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||BT(n))}(e)&&!this.isDisabled(e)&&((null==r?void 0:r.ignoreVisibility)||this.isVisible(e))}}return n.\u0275fac=function(e){return new(e||n)(se(rs))},n.\u0275prov=ot({factory:function(){return new n(se(rs))},token:n,providedIn:"root"}),n})();function BT(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return"-32768"!=t&&!(!t||isNaN(parseInt(t,10)))}function dC(n){if(!BT(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class bN{constructor(t,e,r,a,u=!1){this._element=t,this._checker=e,this._ngZone=r,this._document=a,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,u||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);for(let r=0;r<e.length;r++)e[r].hasAttribute(`cdk-focus-${t}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[r]):e[r].hasAttribute(`cdk-focus-region-${t}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[r]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const r=this._getFirstTabbableElement(e);return null==r||r.focus(t),!!r}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let r=0;r<e.length;r++){let a=e[r].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[r]):null;if(a)return a}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let r=e.length-1;r>=0;r--){let a=e[r].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[r]):null;if(a)return a}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(so(1)).subscribe(t)}}let CN=(()=>{class n{constructor(e,r,a){this._checker=e,this._ngZone=r,this._document=a}create(e,r=!1){return new bN(e,this._checker,this._ngZone,this._document,r)}}return n.\u0275fac=function(e){return new(e||n)(se(Q5),se(On),se(An))},n.\u0275prov=ot({factory:function(){return new n(se(Q5),se(On),se(An))},token:n,providedIn:"root"}),n})();function VT(n){return 0===n.offsetX&&0===n.offsetY}function DN(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}"undefined"!=typeof Element&&Element;const xN=new Ft("cdk-input-modality-detector-options"),t8={ignoreKeys:[18,17,224,91,16]},fC=Sx({passive:!0,capture:!0});let i8=(()=>{class n{constructor(e,r,a,u){this._platform=e,this._mostRecentTarget=null,this._modality=new au(null),this._lastTouchMs=0,this._onKeydown=p=>{var _,D;(null===(D=null===(_=this._options)||void 0===_?void 0:_.ignoreKeys)||void 0===D?void 0:D.some(M=>M===p.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=rC(p))},this._onMousedown=p=>{Date.now()-this._lastTouchMs<650||(this._modality.next(VT(p)?"keyboard":"mouse"),this._mostRecentTarget=rC(p))},this._onTouchstart=p=>{DN(p)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=rC(p))},this._options=Object.assign(Object.assign({},t8),u),this.modalityDetected=this._modality.pipe(t=>t.lift(new h7(1))),this.modalityChanged=this.modalityDetected.pipe(Sl()),e.isBrowser&&r.runOutsideAngular(()=>{a.addEventListener("keydown",this._onKeydown,fC),a.addEventListener("mousedown",this._onMousedown,fC),a.addEventListener("touchstart",this._onTouchstart,fC)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,fC),document.removeEventListener("mousedown",this._onMousedown,fC),document.removeEventListener("touchstart",this._onTouchstart,fC))}}return n.\u0275fac=function(e){return new(e||n)(se(rs),se(On),se(An),se(xN,8))},n.\u0275prov=ot({factory:function(){return new n(se(rs),se(On),se(An),se(xN,8))},token:n,providedIn:"root"}),n})();const r8=new Ft("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),s8=new Ft("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let o8=(()=>{class n{constructor(e,r,a,u){this._ngZone=r,this._defaultOptions=u,this._document=a,this._liveElement=e||this._createLiveElement()}announce(e,...r){const a=this._defaultOptions;let u,p;return 1===r.length&&"number"==typeof r[0]?p=r[0]:[u,p]=r,this.clear(),clearTimeout(this._previousTimeout),u||(u=a&&a.politeness?a.politeness:"polite"),null==p&&a&&(p=a.duration),this._liveElement.setAttribute("aria-live",u),this._ngZone.runOutsideAngular(()=>new Promise(_=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,_(),"number"==typeof p&&(this._previousTimeout=setTimeout(()=>this.clear(),p))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const e="cdk-live-announcer-element",r=this._document.getElementsByClassName(e),a=this._document.createElement("div");for(let u=0;u<r.length;u++)r[u].parentNode.removeChild(r[u]);return a.classList.add(e),a.classList.add("cdk-visually-hidden"),a.setAttribute("aria-atomic","true"),a.setAttribute("aria-live","polite"),this._document.body.appendChild(a),a}}return n.\u0275fac=function(e){return new(e||n)(se(r8,8),se(On),se(An),se(s8,8))},n.\u0275prov=ot({factory:function(){return new n(se(r8,8),se(On),se(An),se(s8,8))},token:n,providedIn:"root"}),n})();const a8=new Ft("cdk-focus-monitor-default-options"),$T=Sx({passive:!0,capture:!0});let B_=(()=>{class n{constructor(e,r,a,u,p){this._ngZone=e,this._platform=r,this._inputModalityDetector=a,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new We,this._rootNodeFocusAndBlurListener=_=>{const D=rC(_),M="focus"===_.type?this._onFocus:this._onBlur;for(let I=D;I;I=I.parentElement)M.call(this,_,I)},this._document=u,this._detectionMode=(null==p?void 0:p.detectionMode)||0}monitor(e,r=!1){const a=Xu(e);if(!this._platform.isBrowser||1!==a.nodeType)return _n(null);const u=u5(a)||this._getDocument(),p=this._elementInfo.get(a);if(p)return r&&(p.checkChildren=!0),p.subject;const _={checkChildren:r,subject:new We,rootNode:u};return this._elementInfo.set(a,_),this._registerGlobalListeners(_),_.subject}stopMonitoring(e){const r=Xu(e),a=this._elementInfo.get(r);a&&(a.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(a))}focusVia(e,r,a){const u=Xu(e);u===this._getDocument().activeElement?this._getClosestElementsInfo(u).forEach(([_,D])=>this._originChanged(_,r,D)):(this._setOrigin(r),"function"==typeof u.focus&&u.focus(a))}ngOnDestroy(){this._elementInfo.forEach((e,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(e,r,a){a?e.classList.add(r):e.classList.remove(r)}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,r){this._toggleClass(e,"cdk-focused",!!r),this._toggleClass(e,"cdk-touch-focused","touch"===r),this._toggleClass(e,"cdk-keyboard-focused","keyboard"===r),this._toggleClass(e,"cdk-mouse-focused","mouse"===r),this._toggleClass(e,"cdk-program-focused","program"===r)}_setOrigin(e,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,r){const a=this._elementInfo.get(r),u=rC(e);!a||!a.checkChildren&&r!==u||this._originChanged(r,this._getFocusOrigin(u),a)}_onBlur(e,r){const a=this._elementInfo.get(r);!a||a.checkChildren&&e.relatedTarget instanceof Node&&r.contains(e.relatedTarget)||(this._setClasses(r),this._emitOrigin(a.subject,null))}_emitOrigin(e,r){this._ngZone.run(()=>e.next(r))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const r=e.rootNode,a=this._rootNodeFocusListenerCount.get(r)||0;a||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,$T),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,$T)}),this._rootNodeFocusListenerCount.set(r,a+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(yi(this._stopInputModalityDetector)).subscribe(u=>{this._setOrigin(u,!0)}))}_removeGlobalListeners(e){const r=e.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const a=this._rootNodeFocusListenerCount.get(r);a>1?this._rootNodeFocusListenerCount.set(r,a-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,$T),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,$T),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,r,a){this._setClasses(e,r),this._emitOrigin(a.subject,r),this._lastFocusOrigin=r}_getClosestElementsInfo(e){const r=[];return this._elementInfo.forEach((a,u)=>{(u===e||a.checkChildren&&u.contains(e))&&r.push([u,a])}),r}}return n.\u0275fac=function(e){return new(e||n)(se(On),se(rs),se(i8),se(An,8),se(a8,8))},n.\u0275prov=ot({factory:function(){return new n(se(On),se(rs),se(i8),se(An,8),se(a8,8))},token:n,providedIn:"root"}),n})();const SN="cdk-high-contrast-black-on-white",Nx="cdk-high-contrast-white-on-black",jT="cdk-high-contrast-active";let AN=(()=>{class n{constructor(e,r){this._platform=e,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const r=this._document.defaultView||window,a=r&&r.getComputedStyle?r.getComputedStyle(e):null,u=(a&&a.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(e),u){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(jT),e.remove(SN),e.remove(Nx),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(e.add(jT),e.add(SN)):2===r&&(e.add(jT),e.add(Nx))}}}return n.\u0275fac=function(e){return new(e||n)(se(rs),se(An))},n.\u0275prov=ot({factory:function(){return new n(se(rs),se(An))},token:n,providedIn:"root"}),n})();const l8=new Pc("12.2.10");class Px{}const Ch="*";function a0(n,t){return{type:7,name:n,definitions:t,options:{}}}function tg(n,t=null){return{type:4,styles:t,timings:n}}function u8(n,t=null){return{type:2,steps:n,options:t}}function Xo(n){return{type:6,styles:n,offset:null}}function Xc(n,t,e){return{type:0,name:n,styles:t,options:e}}function of(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function c8(n=null){return{type:9,options:n}}function Lx(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function UT(n){Promise.resolve(null).then(n)}class hC{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){UT(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class d8{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,r=0,a=0;const u=this.players.length;0==u?UT(()=>this._onFinish()):this.players.forEach(p=>{p.onDone(()=>{++e==u&&this._onFinish()}),p.onDestroy(()=>{++r==u&&this._onDestroy()}),p.onStart(()=>{++a==u&&this._onStart()})}),this.totalTime=this.players.reduce((p,_)=>Math.max(p,_.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(r=>{const a=r.totalTime?Math.min(1,e/r.totalTime):1;r.setPosition(a)})}getPosition(){const t=this.players.reduce((e,r)=>null===e||r.totalTime>e.totalTime?r:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}function f8(){return"undefined"!=typeof window&&void 0!==window.document}function V_(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function l0(n){switch(n.length){case 0:return new hC;case 1:return n[0];default:return new d8(n)}}function h8(n,t,e,r,a={},u={}){const p=[],_=[];let D=-1,M=null;if(r.forEach(I=>{const V=I.offset,j=V==D,G=j&&M||{};Object.keys(I).forEach(Z=>{let ye=Z,be=I[Z];if("offset"!==Z)switch(ye=t.normalizePropertyName(ye,p),be){case"!":be=a[Z];break;case Ch:be=u[Z];break;default:be=t.normalizeStyleValue(Z,ye,be,p)}G[ye]=be}),j||_.push(G),M=G,D=V}),p.length){const I="\n - ";throw new Error(`Unable to animate due to the following errors:${I}${p.join(I)}`)}return _}function oo(n,t,e,r){switch(t){case"start":n.onStart(()=>r(e&&HT(e,"start",n)));break;case"done":n.onDone(()=>r(e&&HT(e,"done",n)));break;case"destroy":n.onDestroy(()=>r(e&&HT(e,"destroy",n)))}}function HT(n,t,e){const r=e.totalTime,u=xo(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,null==r?n.totalTime:r,!!e.disabled),p=n._data;return null!=p&&(u._data=p),u}function xo(n,t,e,r,a="",u=0,p){return{element:n,triggerName:t,fromState:e,toState:r,phaseName:a,totalTime:u,disabled:!!p}}function Ko(n,t,e){let r;return n instanceof Map?(r=n.get(t),r||n.set(t,r=e)):(r=n[t],r||(r=n[t]=e)),r}function $_(n){const t=n.indexOf(":");return[n.substring(1,t),n.substr(t+1)]}let Bx=(n,t)=>!1,Vx=(n,t)=>!1,g8=(n,t,e)=>[];const m8=V_();(m8||"undefined"!=typeof Element)&&(Bx=f8()?(n,t)=>{for(;t&&t!==document.documentElement;){if(t===n)return!0;t=t.parentNode||t.host}return!1}:(n,t)=>n.contains(t),Vx=(()=>{if(m8||Element.prototype.matches)return(n,t)=>n.matches(t);{const n=Element.prototype,t=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector;return t?(e,r)=>t.apply(e,[r]):Vx}})(),g8=(n,t,e)=>{let r=[];if(e){const a=n.querySelectorAll(t);for(let u=0;u<a.length;u++)r.push(a[u])}else{const a=n.querySelector(t);a&&r.push(a)}return r});let j_=null,y8=!1;function ON(n){j_||(j_=("undefined"!=typeof document?document.body:null)||{},y8=!!j_.style&&"WebkitAppearance"in j_.style);let t=!0;return j_.style&&!function(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in j_.style,!t&&y8&&(t="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in j_.style)),t}const TN=Vx,WT=Bx,kN=g8;function _8(n){const t={};return Object.keys(n).forEach(e=>{const r=e.replace(/([a-z])([A-Z])/g,"$1-$2");t[r]=n[e]}),t}let v8=(()=>{class n{validateStyleProperty(e){return ON(e)}matchesElement(e,r){return TN(e,r)}containsElement(e,r){return WT(e,r)}query(e,r,a){return kN(e,r,a)}computeStyle(e,r,a){return a||""}animate(e,r,a,u,p,_=[],D){return new hC(a,u)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})(),FN=(()=>{class n{}return n.NOOP=new v8,n})();const GT="ng-enter",z_="ng-leave",qT="ng-trigger",U_=".ng-trigger",NN="ng-animating",YT=".ng-animating";function H_(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:PN(parseFloat(t[1]),t[2])}function PN(n,t){switch(t){case"s":return 1e3*n;default:return n}}function $x(n,t,e){return n.hasOwnProperty("duration")?n:function(n,t,e){let a,u=0,p="";if("string"==typeof n){const _=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===_)return t.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};a=PN(parseFloat(_[1]),_[2]);const D=_[3];null!=D&&(u=PN(parseFloat(D),_[4]));const M=_[5];M&&(p=M)}else a=n;if(!e){let _=!1,D=t.length;a<0&&(t.push("Duration values below 0 are not allowed for this animation step."),_=!0),u<0&&(t.push("Delay values below 0 are not allowed for this animation step."),_=!0),_&&t.splice(D,0,`The provided timing value "${n}" is invalid.`)}return{duration:a,delay:u,easing:p}}(n,t,e)}function pC(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function u0(n,t,e={}){if(t)for(let r in n)e[r]=n[r];else pC(n,e);return e}function w8(n,t,e){return e?t+":"+e+";":""}function LN(n){let t="";for(let e=0;e<n.style.length;e++){const r=n.style.item(e);t+=w8(0,r,n.style.getPropertyValue(r))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=w8(0,$7(e),n.style[e]));n.setAttribute("style",t)}function af(n,t,e){n.style&&(Object.keys(t).forEach(r=>{const a=BN(r);e&&!e.hasOwnProperty(r)&&(e[r]=n.style[a]),n.style[a]=t[r]}),V_()&&LN(n))}function ng(n,t){n.style&&(Object.keys(t).forEach(e=>{const r=BN(e);n.style[r]=""}),V_()&&LN(n))}function c0(n){return Array.isArray(n)?1==n.length?n[0]:u8(n):n}const Tn=new RegExp("{{\\s*(.+?)\\s*}}","g");function gC(n){let t=[];if("string"==typeof n){let e;for(;e=Tn.exec(n);)t.push(e[1]);Tn.lastIndex=0}return t}function mC(n,t,e){const r=n.toString(),a=r.replace(Tn,(u,p)=>{let _=t[p];return t.hasOwnProperty(p)||(e.push(`Please provide a value for the animation param ${p}`),_=""),_.toString()});return a==r?n:a}function jx(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const V7=/-+([a-z0-9])/g;function BN(n){return n.replace(V7,(...t)=>t[1].toUpperCase())}function $7(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function E8(n,t){return 0===n||0===t}function zx(n,t,e){const r=Object.keys(e);if(r.length&&t.length){let u=t[0],p=[];if(r.forEach(_=>{u.hasOwnProperty(_)||p.push(_),u[_]=e[_]}),p.length)for(var a=1;a<t.length;a++){let _=t[a];p.forEach(function(D){_[D]=Ux(n,D)})}}return t}function Ml(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw new Error(`Unable to resolve animation metadata node #${t.type}`)}}function Ux(n,t){return window.getComputedStyle(n)[t]}function j7(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function(n,t,e){if(":"==n[0]){const D=function(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,r)=>parseFloat(r)>parseFloat(e);case":decrement":return(e,r)=>parseFloat(r)<parseFloat(e);default:return t.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,e);if("function"==typeof D)return void t.push(D);n=D}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return e.push(`The provided transition expression "${n}" is not supported`),t;const a=r[1],u=r[2],p=r[3];t.push(yC(a,p));"<"==u[0]&&!("*"==a&&"*"==p)&&t.push(yC(p,a))}(r,e,t)):e.push(n),e}const wh=new Set(["true","1"]),Hx=new Set(["false","0"]);function yC(n,t){const e=wh.has(n)||Hx.has(n),r=wh.has(t)||Hx.has(t);return(a,u)=>{let p="*"==n||n==a,_="*"==t||t==u;return!p&&e&&"boolean"==typeof a&&(p=a?wh.has(n):Hx.has(n)),!_&&r&&"boolean"==typeof u&&(_=u?wh.has(t):Hx.has(t)),p&&_}}const z7=new RegExp("s*:selfs*,?","g");function VN(n,t,e){return new $N(n).build(t,e)}class $N{constructor(t){this._driver=t}build(t,e){const r=new W7(e);return this._resetContextStyleTimingState(r),Ml(this,c0(t),r)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let r=e.queryCount=0,a=e.depCount=0;const u=[],p=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(_=>{if(this._resetContextStyleTimingState(e),0==_.type){const D=_,M=D.name;M.toString().split(/\s*,\s*/).forEach(I=>{D.name=I,u.push(this.visitState(D,e))}),D.name=M}else if(1==_.type){const D=this.visitTransition(_,e);r+=D.queryCount,a+=D.depCount,p.push(D)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:u,transitions:p,queryCount:r,depCount:a,options:null}}visitState(t,e){const r=this.visitStyle(t.styles,e),a=t.options&&t.options.params||null;if(r.containsDynamicStyles){const u=new Set,p=a||{};if(r.styles.forEach(_=>{if(QT(_)){const D=_;Object.keys(D).forEach(M=>{gC(D[M]).forEach(I=>{p.hasOwnProperty(I)||u.add(I)})})}}),u.size){const _=jx(u.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${_.join(", ")}`)}}return{type:0,name:t.name,style:r,options:a?{params:a}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const r=Ml(this,c0(t.animation),e);return{type:1,matchers:j7(t.expr,e.errors),animation:r,queryCount:e.queryCount,depCount:e.depCount,options:Gi(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(r=>Ml(this,r,e)),options:Gi(t.options)}}visitGroup(t,e){const r=e.currentTime;let a=0;const u=t.steps.map(p=>{e.currentTime=r;const _=Ml(this,p,e);return a=Math.max(a,e.currentTime),_});return e.currentTime=a,{type:3,steps:u,options:Gi(t.options)}}visitAnimate(t,e){const r=function(n,t){let e=null;if(n.hasOwnProperty("duration"))e=n;else if("number"==typeof n)return JT($x(n,t).duration,0,"");const r=n;if(r.split(/\s+/).some(u=>"{"==u.charAt(0)&&"{"==u.charAt(1))){const u=JT(0,0,"");return u.dynamic=!0,u.strValue=r,u}return e=e||$x(r,t),JT(e.duration,e.delay,e.easing)}(t.timings,e.errors);e.currentAnimateTimings=r;let a,u=t.styles?t.styles:Xo({});if(5==u.type)a=this.visitKeyframes(u,e);else{let p=t.styles,_=!1;if(!p){_=!0;const M={};r.easing&&(M.easing=r.easing),p=Xo(M)}e.currentTime+=r.duration+r.delay;const D=this.visitStyle(p,e);D.isEmptyStep=_,a=D}return e.currentAnimateTimings=null,{type:4,timings:r,style:a,options:null}}visitStyle(t,e){const r=this._makeStyleAst(t,e);return this._validateStyleAst(r,e),r}_makeStyleAst(t,e){const r=[];Array.isArray(t.styles)?t.styles.forEach(p=>{"string"==typeof p?p==Ch?r.push(p):e.errors.push(`The provided style string value ${p} is not allowed.`):r.push(p)}):r.push(t.styles);let a=!1,u=null;return r.forEach(p=>{if(QT(p)){const _=p,D=_.easing;if(D&&(u=D,delete _.easing),!a)for(let M in _)if(_[M].toString().indexOf("{{")>=0){a=!0;break}}}),{type:6,styles:r,easing:u,offset:t.offset,containsDynamicStyles:a,options:null}}_validateStyleAst(t,e){const r=e.currentAnimateTimings;let a=e.currentTime,u=e.currentTime;r&&u>0&&(u-=r.duration+r.delay),t.styles.forEach(p=>{"string"!=typeof p&&Object.keys(p).forEach(_=>{if(!this._driver.validateStyleProperty(_))return void e.errors.push(`The provided animation property "${_}" is not a supported CSS property for animations`);const D=e.collectedStyles[e.currentQuerySelector],M=D[_];let I=!0;M&&(u!=a&&u>=M.startTime&&a<=M.endTime&&(e.errors.push(`The CSS property "${_}" that exists between the times of "${M.startTime}ms" and "${M.endTime}ms" is also being animated in a parallel animation between the times of "${u}ms" and "${a}ms"`),I=!1),u=M.startTime),I&&(D[_]={startTime:u,endTime:a}),e.options&&function(n,t,e){const r=t.params||{},a=gC(n);a.length&&a.forEach(u=>{r.hasOwnProperty(u)||e.push(`Unable to resolve the local animation param ${u} in the given list of values`)})}(p[_],e.options,e.errors)})})}visitKeyframes(t,e){const r={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),r;let u=0;const p=[];let _=!1,D=!1,M=0;const I=t.steps.map(Ye=>{const je=this._makeStyleAst(Ye,e);let Et=null!=je.offset?je.offset:function(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(QT(e)&&e.hasOwnProperty("offset")){const r=e;t=parseFloat(r.offset),delete r.offset}});else if(QT(n)&&n.hasOwnProperty("offset")){const e=n;t=parseFloat(e.offset),delete e.offset}return t}(je.styles),Wt=0;return null!=Et&&(u++,Wt=je.offset=Et),D=D||Wt<0||Wt>1,_=_||Wt<M,M=Wt,p.push(Wt),je});D&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),_&&e.errors.push("Please ensure that all keyframe offsets are in order");const V=t.steps.length;let j=0;u>0&&u<V?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==u&&(j=1/(V-1));const G=V-1,Z=e.currentTime,ye=e.currentAnimateTimings,be=ye.duration;return I.forEach((Ye,je)=>{const Et=j>0?je==G?1:j*je:p[je],Wt=Et*be;e.currentTime=Z+ye.delay+Wt,ye.duration=Wt,this._validateStyleAst(Ye,e),Ye.offset=Et,r.styles.push(Ye)}),r}visitReference(t,e){return{type:8,animation:Ml(this,c0(t.animation),e),options:Gi(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:Gi(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:Gi(t.options)}}visitQuery(t,e){const r=e.currentQuerySelector,a=t.options||{};e.queryCount++,e.currentQuery=t;const[u,p]=function(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(z7,"")),[n=n.replace(/@\*/g,U_).replace(/@\w+/g,e=>U_+"-"+e.substr(1)).replace(/:animating/g,YT),t]}(t.selector);e.currentQuerySelector=r.length?r+" "+u:u,Ko(e.collectedStyles,e.currentQuerySelector,{});const _=Ml(this,c0(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=r,{type:11,selector:u,limit:a.limit||0,optional:!!a.optional,includeSelf:p,animation:_,originalSelector:t.selector,options:Gi(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const r="full"===t.timings?{duration:0,delay:0,easing:"full"}:$x(t.timings,e.errors,!0);return{type:12,animation:Ml(this,c0(t.animation),e),timings:r,options:null}}}class W7{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function QT(n){return!Array.isArray(n)&&"object"==typeof n}function Gi(n){return n?(n=pC(n)).params&&(n.params=function(n){return n?pC(n):null}(n.params)):n={},n}function JT(n,t,e){return{duration:n,delay:t,easing:e}}function jN(n,t,e,r,a,u,p=null,_=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:r,duration:a,delay:u,totalTime:a+u,easing:p,subTimeline:_}}class Wx{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let r=this._map.get(t);r||this._map.set(t,r=[]),r.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Y7=new RegExp(":enter","g"),X7=new RegExp(":leave","g");function zN(n,t,e,r,a,u={},p={},_,D,M=[]){return(new K7).buildKeyframes(n,t,e,r,a,u,p,_,D,M)}class K7{buildKeyframes(t,e,r,a,u,p,_,D,M,I=[]){M=M||new Wx;const V=new UN(t,e,M,a,u,I,[]);V.options=D,V.currentTimeline.setStyles([p],null,V.errors,D),Ml(this,r,V);const j=V.timelines.filter(G=>G.containsAnimation());if(j.length&&Object.keys(_).length){const G=j[j.length-1];G.allowOnlyTimelineStyles()||G.setStyles([_],null,V.errors,D)}return j.length?j.map(G=>G.buildKeyframes()):[jN(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const r=e.subInstructions.consume(e.element);if(r){const a=e.createSubContext(t.options),u=e.currentTimeline.currentTime,p=this._visitSubInstructions(r,a,a.options);u!=p&&e.transformIntoNewTimeline(p)}e.previousNode=t}visitAnimateRef(t,e){const r=e.createSubContext(t.options);r.transformIntoNewTimeline(),this.visitReference(t.animation,r),e.transformIntoNewTimeline(r.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,r){let u=e.currentTimeline.currentTime;const p=null!=r.duration?H_(r.duration):null,_=null!=r.delay?H_(r.delay):null;return 0!==p&&t.forEach(D=>{const M=e.appendInstructionToTimeline(D,p,_);u=Math.max(u,M.duration+M.delay)}),u}visitReference(t,e){e.updateOptions(t.options,!0),Ml(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const r=e.subContextCount;let a=e;const u=t.options;if(u&&(u.params||u.delay)&&(a=e.createSubContext(u),a.transformIntoNewTimeline(),null!=u.delay)){6==a.previousNode.type&&(a.currentTimeline.snapshotCurrentStyles(),a.previousNode=ZT);const p=H_(u.delay);a.delayNextStep(p)}t.steps.length&&(t.steps.forEach(p=>Ml(this,p,a)),a.currentTimeline.applyStylesToKeyframe(),a.subContextCount>r&&a.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const r=[];let a=e.currentTimeline.currentTime;const u=t.options&&t.options.delay?H_(t.options.delay):0;t.steps.forEach(p=>{const _=e.createSubContext(t.options);u&&_.delayNextStep(u),Ml(this,p,_),a=Math.max(a,_.currentTimeline.currentTime),r.push(_.currentTimeline)}),r.forEach(p=>e.currentTimeline.mergeTimelineCollectedStyles(p)),e.transformIntoNewTimeline(a),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const r=t.strValue;return $x(e.params?mC(r,e.params,e.errors):r,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const r=e.currentAnimateTimings=this._visitTiming(t.timings,e),a=e.currentTimeline;r.delay&&(e.incrementTime(r.delay),a.snapshotCurrentStyles());const u=t.style;5==u.type?this.visitKeyframes(u,e):(e.incrementTime(r.duration),this.visitStyle(u,e),a.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const r=e.currentTimeline,a=e.currentAnimateTimings;!a&&r.getCurrentStyleProperties().length&&r.forwardFrame();const u=a&&a.easing||t.easing;t.isEmptyStep?r.applyEmptyStep(u):r.setStyles(t.styles,u,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const r=e.currentAnimateTimings,a=e.currentTimeline.duration,u=r.duration,_=e.createSubContext().currentTimeline;_.easing=r.easing,t.styles.forEach(D=>{_.forwardTime((D.offset||0)*u),_.setStyles(D.styles,D.easing,e.errors,e.options),_.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(_),e.transformIntoNewTimeline(a+u),e.previousNode=t}visitQuery(t,e){const r=e.currentTimeline.currentTime,a=t.options||{},u=a.delay?H_(a.delay):0;u&&(6===e.previousNode.type||0==r&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=ZT);let p=r;const _=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!a.optional,e.errors);e.currentQueryTotal=_.length;let D=null;_.forEach((M,I)=>{e.currentQueryIndex=I;const V=e.createSubContext(t.options,M);u&&V.delayNextStep(u),M===e.element&&(D=V.currentTimeline),Ml(this,t.animation,V),V.currentTimeline.applyStylesToKeyframe(),p=Math.max(p,V.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(p),D&&(e.currentTimeline.mergeTimelineCollectedStyles(D),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const r=e.parentContext,a=e.currentTimeline,u=t.timings,p=Math.abs(u.duration),_=p*(e.currentQueryTotal-1);let D=p*e.currentQueryIndex;switch(u.duration<0?"reverse":u.easing){case"reverse":D=_-D;break;case"full":D=r.currentStaggerTime}const I=e.currentTimeline;D&&I.delayNextStep(D);const V=I.currentTime;Ml(this,t.animation,e),e.previousNode=t,r.currentStaggerTime=a.currentTime-V+(a.startTime-r.currentTimeline.startTime)}}const ZT={};class UN{constructor(t,e,r,a,u,p,_,D){this._driver=t,this.element=e,this.subInstructions=r,this._enterClassName=a,this._leaveClassName=u,this.errors=p,this.timelines=_,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ZT,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=D||new ek(this._driver,e,0),_.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const r=t;let a=this.options;null!=r.duration&&(a.duration=H_(r.duration)),null!=r.delay&&(a.delay=H_(r.delay));const u=r.params;if(u){let p=a.params;p||(p=this.options.params={}),Object.keys(u).forEach(_=>{(!e||!p.hasOwnProperty(_))&&(p[_]=mC(u[_],p,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const r=t.params={};Object.keys(e).forEach(a=>{r[a]=e[a]})}}return t}createSubContext(t=null,e,r){const a=e||this.element,u=new UN(this._driver,a,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(a,r||0));return u.previousNode=this.previousNode,u.currentAnimateTimings=this.currentAnimateTimings,u.options=this._copyOptions(),u.updateOptions(t),u.currentQueryIndex=this.currentQueryIndex,u.currentQueryTotal=this.currentQueryTotal,u.parentContext=this,this.subContextCount++,u}transformIntoNewTimeline(t){return this.previousNode=ZT,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,r){const a={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+t.delay,easing:""},u=new Q7(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,a,t.stretchStartingKeyframe);return this.timelines.push(u),a}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,r,a,u,p){let _=[];if(a&&_.push(this.element),t.length>0){t=(t=t.replace(Y7,"."+this._enterClassName)).replace(X7,"."+this._leaveClassName);let M=this._driver.query(this.element,t,1!=r);0!==r&&(M=r<0?M.slice(M.length+r,M.length):M.slice(0,r)),_.push(...M)}return!u&&0==_.length&&p.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),_}}class ek{constructor(t,e,r,a){this._driver=t,this.element=e,this.startTime=r,this._elementTimelineStylesLookup=a,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new ek(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||Ch,this._currentKeyframe[e]=Ch}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,r,a){e&&(this._previousKeyframe.easing=e);const u=a&&a.params||{},p=function(n,t){const e={};let r;return n.forEach(a=>{"*"===a?(r=r||Object.keys(t),r.forEach(u=>{e[u]=Ch})):u0(a,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(p).forEach(_=>{const D=mC(p[_],u,r);this._pendingStyles[_]=D,this._localTimelineStyles.hasOwnProperty(_)||(this._backFill[_]=this._globalTimelineStyles.hasOwnProperty(_)?this._globalTimelineStyles[_]:Ch),this._updateStyle(_,D)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(r=>{this._currentKeyframe[r]=t[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const r=this._styleSummary[e],a=t._styleSummary[e];(!r||a.time>r.time)&&this._updateStyle(e,a.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,r=1===this._keyframes.size&&0===this.duration;let a=[];this._keyframes.forEach((_,D)=>{const M=u0(_,!0);Object.keys(M).forEach(I=>{const V=M[I];"!"==V?t.add(I):V==Ch&&e.add(I)}),r||(M.offset=D/this.duration),a.push(M)});const u=t.size?jx(t.values()):[],p=e.size?jx(e.values()):[];if(r){const _=a[0],D=pC(_);_.offset=0,D.offset=1,a=[_,D]}return jN(this.element,a,u,p,this.duration,this.startTime,this.easing,!1)}}class Q7 extends ek{constructor(t,e,r,a,u,p,_=!1){super(t,e,p.delay),this.keyframes=r,this.preStyleProps=a,this.postStyleProps=u,this._stretchStartingKeyframe=_,this.timings={duration:p.duration,delay:p.delay,easing:p.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:r,easing:a}=this.timings;if(this._stretchStartingKeyframe&&e){const u=[],p=r+e,_=e/p,D=u0(t[0],!1);D.offset=0,u.push(D);const M=u0(t[0],!1);M.offset=M8(_),u.push(M);const I=t.length-1;for(let V=1;V<=I;V++){let j=u0(t[V],!1);j.offset=M8((e+j.offset*r)/p),u.push(j)}r=p,e=0,a="",t=u}return jN(this.element,t,this.preStyleProps,this.postStyleProps,r,e,a,!0)}}function M8(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class HN{}class e9 extends HN{normalizePropertyName(t,e){return BN(t)}normalizeStyleValue(t,e,r,a){let u="";const p=r.toString().trim();if(t9[e]&&0!==r&&"0"!==r)if("number"==typeof r)u="px";else{const _=r.match(/^[+-]?[\d\.]+([a-z]*)$/);_&&0==_[1].length&&a.push(`Please provide a CSS unit value for ${t}:${r}`)}return p+u}}const t9=(()=>function(n){const t={};return n.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function T8(n,t,e,r,a,u,p,_,D,M,I,V,j){return{type:0,element:n,triggerName:t,isRemovalTransition:a,fromState:e,fromStyles:u,toState:r,toStyles:p,timelines:_,queriedElements:D,preStyleProps:M,postStyleProps:I,totalTime:V,errors:j}}const ig={};class k8{constructor(t,e,r){this._triggerName=t,this.ast=e,this._stateStyles=r}match(t,e,r,a){return function(n,t,e,r,a){return n.some(u=>u(t,e,r,a))}(this.ast.matchers,t,e,r,a)}buildStyles(t,e,r){const a=this._stateStyles["*"],u=this._stateStyles[t],p=a?a.buildStyles(e,r):{};return u?u.buildStyles(e,r):p}build(t,e,r,a,u,p,_,D,M,I){const V=[],j=this.ast.options&&this.ast.options.params||ig,Z=this.buildStyles(r,_&&_.params||ig,V),ye=D&&D.params||ig,be=this.buildStyles(a,ye,V),Ye=new Set,je=new Map,Et=new Map,Wt="void"===a,ri={params:Object.assign(Object.assign({},j),ye)},dr=I?[]:zN(t,e,this.ast.animation,u,p,Z,be,ri,M,V);let fr=0;if(dr.forEach(Yr=>{fr=Math.max(Yr.duration+Yr.delay,fr)}),V.length)return T8(e,this._triggerName,r,a,Wt,Z,be,[],[],je,Et,fr,V);dr.forEach(Yr=>{const Zo=Yr.element,ya=Ko(je,Zo,{});Yr.preStyleProps.forEach(kl=>ya[kl]=!0);const td=Ko(Et,Zo,{});Yr.postStyleProps.forEach(kl=>td[kl]=!0),Zo!==e&&Ye.add(Zo)});const Ms=jx(Ye.values());return T8(e,this._triggerName,r,a,Wt,Z,be,dr,Ms,je,Et,fr)}}class n9{constructor(t,e,r){this.styles=t,this.defaultParams=e,this.normalizer=r}buildStyles(t,e){const r={},a=pC(this.defaultParams);return Object.keys(t).forEach(u=>{const p=t[u];null!=p&&(a[u]=p)}),this.styles.styles.forEach(u=>{if("string"!=typeof u){const p=u;Object.keys(p).forEach(_=>{let D=p[_];D.length>1&&(D=mC(D,a,e));const M=this.normalizer.normalizePropertyName(_,e);D=this.normalizer.normalizeStyleValue(_,M,D,e),r[M]=D})}}),r}}class I8{constructor(t,e,r){this.name=t,this.ast=e,this._normalizer=r,this.transitionFactories=[],this.states={},e.states.forEach(a=>{this.states[a.name]=new n9(a.style,a.options&&a.options.params||{},r)}),R8(this.states,"true","1"),R8(this.states,"false","0"),e.transitions.forEach(a=>{this.transitionFactories.push(new k8(t,a,this.states))}),this.fallbackTransition=function(n,t,e){return new k8(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(p,_)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,r,a){return this.transitionFactories.find(p=>p.match(t,e,r,a))||null}matchStyles(t,e,r){return this.fallbackTransition.buildStyles(t,e,r)}}function R8(n,t,e){n.hasOwnProperty(t)?n.hasOwnProperty(e)||(n[e]=n[t]):n.hasOwnProperty(e)&&(n[t]=n[e])}const Kc=new Wx;class tk{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(t,e){const r=[],a=VN(this._driver,e,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[t]=a}_buildPlayer(t,e,r){const a=t.element,u=h8(0,this._normalizer,0,t.keyframes,e,r);return this._driver.animate(a,u,t.duration,t.delay,t.easing,[],!0)}create(t,e,r={}){const a=[],u=this._animations[t];let p;const _=new Map;if(u?(p=zN(this._driver,e,u,GT,z_,{},{},r,Kc,a),p.forEach(I=>{const V=Ko(_,I.element,{});I.postStyleProps.forEach(j=>V[j]=null)})):(a.push("The requested animation doesn't exist or has already been destroyed"),p=[]),a.length)throw new Error(`Unable to create the animation due to the following errors: ${a.join("\n")}`);_.forEach((I,V)=>{Object.keys(I).forEach(j=>{I[j]=this._driver.computeStyle(V,j,Ch)})});const M=l0(p.map(I=>{const V=_.get(I.element);return this._buildPlayer(I,{},V)}));return this._playersById[t]=M,M.onDestroy(()=>this.destroy(t)),this.players.push(M),M}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const r=this.players.indexOf(e);r>=0&&this.players.splice(r,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,r,a){const u=xo(e,"","","");return oo(this._getPlayer(t),r,u,a),()=>{}}command(t,e,r,a){if("register"==r)return void this.register(t,a[0]);if("create"==r)return void this.create(t,e,a[0]||{});const u=this._getPlayer(t);switch(r){case"play":u.play();break;case"pause":u.pause();break;case"reset":u.reset();break;case"restart":u.restart();break;case"finish":u.finish();break;case"init":u.init();break;case"setPosition":u.setPosition(parseFloat(a[0]));break;case"destroy":this.destroy(t)}}}const Gx="ng-animate-queued",P8="ng-animate-disabled",L8=".ng-animate-disabled",a9=[],WN={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},l9={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Qc="__ng_removed";class GN{constructor(t,e=""){this.namespaceId=e;const r=t&&t.hasOwnProperty("value");if(this.value=function(n){return null!=n?n:null}(r?t.value:t),r){const u=pC(t);delete u.value,this.options=u}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const r=this.options.params;Object.keys(e).forEach(a=>{null==r[a]&&(r[a]=e[a])})}}}const qx="void",qN=new GN(qx);class B8{constructor(t,e,r){this.id=t,this.hostElement=e,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,lu(e,this._hostClassName)}listen(t,e,r,a){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${e}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if(!function(n){return"start"==n||"done"==n}(r))throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${e}" is not supported!`);const u=Ko(this._elementListeners,t,[]),p={name:e,phase:r,callback:a};u.push(p);const _=Ko(this._engine.statesByElement,t,{});return _.hasOwnProperty(e)||(lu(t,qT),lu(t,qT+"-"+e),_[e]=qN),()=>{this._engine.afterFlush(()=>{const D=u.indexOf(p);D>=0&&u.splice(D,1),this._triggers[e]||delete _[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,r,a=!0){const u=this._getTrigger(e),p=new Yx(this.id,e,t);let _=this._engine.statesByElement.get(t);_||(lu(t,qT),lu(t,qT+"-"+e),this._engine.statesByElement.set(t,_={}));let D=_[e];const M=new GN(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&D&&M.absorbOptions(D.options),_[e]=M,D||(D=qN),M.value!==qx&&D.value===M.value){if(!function(n,t){const e=Object.keys(n),r=Object.keys(t);if(e.length!=r.length)return!1;for(let a=0;a<e.length;a++){const u=e[a];if(!t.hasOwnProperty(u)||n[u]!==t[u])return!1}return!0}(D.params,M.params)){const ye=[],be=u.matchStyles(D.value,D.params,ye),Ye=u.matchStyles(M.value,M.params,ye);ye.length?this._engine.reportError(ye):this._engine.afterFlush(()=>{ng(t,be),af(t,Ye)})}return}const j=Ko(this._engine.playersByElement,t,[]);j.forEach(ye=>{ye.namespaceId==this.id&&ye.triggerName==e&&ye.queued&&ye.destroy()});let G=u.matchTransition(D.value,M.value,t,M.params),Z=!1;if(!G){if(!a)return;G=u.fallbackTransition,Z=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:G,fromState:D,toState:M,player:p,isFallbackTransition:Z}),Z||(lu(t,Gx),p.onStart(()=>{f0(t,Gx)})),p.onDone(()=>{let ye=this.players.indexOf(p);ye>=0&&this.players.splice(ye,1);const be=this._engine.playersByElement.get(t);if(be){let Ye=be.indexOf(p);Ye>=0&&be.splice(Ye,1)}}),this.players.push(p),j.push(p),p}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,r)=>{delete e[t]}),this._elementListeners.forEach((e,r)=>{this._elementListeners.set(r,e.filter(a=>a.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(r=>r.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const r=this._engine.driver.query(t,U_,!0);r.forEach(a=>{if(a[Qc])return;const u=this._engine.fetchNamespacesByElement(a);u.size?u.forEach(p=>p.triggerLeaveAnimation(a,e,!1,!0)):this.clearElementCache(a)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(a=>this.clearElementCache(a)))}triggerLeaveAnimation(t,e,r,a){const u=this._engine.statesByElement.get(t);if(u){const p=[];if(Object.keys(u).forEach(_=>{if(this._triggers[_]){const D=this.trigger(t,_,qx,a);D&&p.push(D)}}),p.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),r&&l0(p).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),r=this._engine.statesByElement.get(t);if(e&&r){const a=new Set;e.forEach(u=>{const p=u.name;if(a.has(p))return;a.add(p);const D=this._triggers[p].fallbackTransition,M=r[p]||qN,I=new GN(qx),V=new Yx(this.id,p,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:p,transition:D,fromState:M,toState:I,player:V,isFallbackTransition:!0})})}}removeNode(t,e){const r=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let a=!1;if(r.totalAnimations){const u=r.players.length?r.playersByQueriedElement.get(t):[];if(u&&u.length)a=!0;else{let p=t;for(;p=p.parentNode;)if(r.statesByElement.get(p)){a=!0;break}}}if(this.prepareLeaveAnimationListeners(t),a)r.markElementAsRemoved(this.id,t,!1,e);else{const u=t[Qc];(!u||u===WN)&&(r.afterFlush(()=>this.clearElementCache(t)),r.destroyInnerAnimations(t),r._onRemovalComplete(t,e))}}insertNode(t,e){lu(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(r=>{const a=r.player;if(a.destroyed)return;const u=r.element,p=this._elementListeners.get(u);p&&p.forEach(_=>{if(_.name==r.triggerName){const D=xo(u,r.triggerName,r.fromState.value,r.toState.value);D._data=t,oo(r.player,_.phase,D,_.callback)}}),a.markedForDestroy?this._engine.afterFlush(()=>{a.destroy()}):e.push(r)}),this._queue=[],e.sort((r,a)=>{const u=r.transition.ast.depCount,p=a.transition.ast.depCount;return 0==u||0==p?u-p:this._engine.driver.containsElement(r.element,a.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(r=>r.element===t)||e,e}}class u9{constructor(t,e,r){this.bodyNode=t,this.driver=e,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(a,u)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(r=>{r.queued&&t.push(r)})}),t}createNamespace(t,e){const r=new B8(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(r,e):(this.newHostElements.set(e,r),this.collectEnterElement(e)),this._namespaceLookup[t]=r}_balanceNamespaceList(t,e){const r=this._namespaceList.length-1;if(r>=0){let a=!1;for(let u=r;u>=0;u--)if(this.driver.containsElement(this._namespaceList[u].hostElement,e)){this._namespaceList.splice(u+1,0,t),a=!0;break}a||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let r=this._namespaceLookup[t];return r||(r=this.createNamespace(t,e)),r}registerTrigger(t,e,r){let a=this._namespaceLookup[t];a&&a.register(e,r)&&this.totalAnimations++}destroy(t,e){if(!t)return;const r=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[t];const a=this._namespaceList.indexOf(r);a>=0&&this._namespaceList.splice(a,1)}),this.afterFlushAnimationsDone(()=>r.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,r=this.statesByElement.get(t);if(r){const a=Object.keys(r);for(let u=0;u<a.length;u++){const p=r[a[u]].namespaceId;if(p){const _=this._fetchNamespace(p);_&&e.add(_)}}}return e}trigger(t,e,r,a){if(rg(e)){const u=this._fetchNamespace(t);if(u)return u.trigger(e,r,a),!0}return!1}insertNode(t,e,r,a){if(!rg(e))return;const u=e[Qc];if(u&&u.setForRemoval){u.setForRemoval=!1,u.setForMove=!0;const p=this.collectedLeaveElements.indexOf(e);p>=0&&this.collectedLeaveElements.splice(p,1)}if(t){const p=this._fetchNamespace(t);p&&p.insertNode(e,r)}a&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),lu(t,P8)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),f0(t,P8))}removeNode(t,e,r,a){if(rg(e)){const u=t?this._fetchNamespace(t):null;if(u?u.removeNode(e,a):this.markElementAsRemoved(t,e,!1,a),r){const p=this.namespacesByHostElement.get(e);p&&p.id!==t&&p.removeNode(e,a)}}else this._onRemovalComplete(e,a)}markElementAsRemoved(t,e,r,a){this.collectedLeaveElements.push(e),e[Qc]={namespaceId:t,setForRemoval:a,hasAnimation:r,removedBeforeQueried:!1}}listen(t,e,r,a,u){return rg(e)?this._fetchNamespace(t).listen(e,r,a,u):()=>{}}_buildInstruction(t,e,r,a,u){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,r,a,t.fromState.options,t.toState.options,e,u)}destroyInnerAnimations(t){let e=this.driver.query(t,U_,!0);e.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,YT,!0),e.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return l0(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t[Qc];if(e&&e.setForRemoval){if(t[Qc]=WN,e.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(e.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,L8)&&this.markElementAsDisabled(t,!1),this.driver.query(t,L8,!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,a)=>this._balanceNamespaceList(r,a)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)lu(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{e=this._flushAnimations(r,t)}finally{for(let a=0;a<r.length;a++)r[a]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],e.length?l0(e).onDone(()=>{r.forEach(a=>a())}):r.forEach(a=>a())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const r=new Wx,a=[],u=new Map,p=[],_=new Map,D=new Map,M=new Map,I=new Set;this.disabledNodes.forEach(en=>{I.add(en);const Rn=this.driver.query(en,".ng-animate-queued",!0);for(let Jn=0;Jn<Rn.length;Jn++)I.add(Rn[Jn])});const V=this.bodyNode,j=Array.from(this.statesByElement.keys()),G=$8(j,this.collectedEnterElements),Z=new Map;let ye=0;G.forEach((en,Rn)=>{const Jn=GT+ye++;Z.set(Rn,Jn),en.forEach($i=>lu($i,Jn))});const be=[],Ye=new Set,je=new Set;for(let en=0;en<this.collectedLeaveElements.length;en++){const Rn=this.collectedLeaveElements[en],Jn=Rn[Qc];Jn&&Jn.setForRemoval&&(be.push(Rn),Ye.add(Rn),Jn.hasAnimation?this.driver.query(Rn,".ng-star-inserted",!0).forEach($i=>Ye.add($i)):je.add(Rn))}const Et=new Map,Wt=$8(j,Array.from(Ye));Wt.forEach((en,Rn)=>{const Jn=z_+ye++;Et.set(Rn,Jn),en.forEach($i=>lu($i,Jn))}),t.push(()=>{G.forEach((en,Rn)=>{const Jn=Z.get(Rn);en.forEach($i=>f0($i,Jn))}),Wt.forEach((en,Rn)=>{const Jn=Et.get(Rn);en.forEach($i=>f0($i,Jn))}),be.forEach(en=>{this.processLeaveNode(en)})});const ri=[],dr=[];for(let en=this._namespaceList.length-1;en>=0;en--)this._namespaceList[en].drainQueuedTransitions(e).forEach(Jn=>{const $i=Jn.player,Mo=Jn.element;if(ri.push($i),this.collectedEnterElements.length){const Ka=Mo[Qc];if(Ka&&Ka.setForMove)return void $i.destroy()}const _f=!V||!this.driver.containsElement(V,Mo),Xa=Et.get(Mo),Sh=Z.get(Mo),Ar=this._buildInstruction(Jn,r,Sh,Xa,_f);if(Ar.errors&&Ar.errors.length)dr.push(Ar);else{if(_f)return $i.onStart(()=>ng(Mo,Ar.fromStyles)),$i.onDestroy(()=>af(Mo,Ar.toStyles)),void a.push($i);if(Jn.isFallbackTransition)return $i.onStart(()=>ng(Mo,Ar.fromStyles)),$i.onDestroy(()=>af(Mo,Ar.toStyles)),void a.push($i);Ar.timelines.forEach(Ka=>Ka.stretchStartingKeyframe=!0),r.append(Mo,Ar.timelines),p.push({instruction:Ar,player:$i,element:Mo}),Ar.queriedElements.forEach(Ka=>Ko(_,Ka,[]).push($i)),Ar.preStyleProps.forEach((Ka,LC)=>{const tv=Object.keys(Ka);if(tv.length){let lg=D.get(LC);lg||D.set(LC,lg=new Set),tv.forEach(nv=>lg.add(nv))}}),Ar.postStyleProps.forEach((Ka,LC)=>{const tv=Object.keys(Ka);let lg=M.get(LC);lg||M.set(LC,lg=new Set),tv.forEach(nv=>lg.add(nv))})}});if(dr.length){const en=[];dr.forEach(Rn=>{en.push(`@${Rn.triggerName} has failed due to:\n`),Rn.errors.forEach(Jn=>en.push(`- ${Jn}\n`))}),ri.forEach(Rn=>Rn.destroy()),this.reportError(en)}const fr=new Map,Ms=new Map;p.forEach(en=>{const Rn=en.element;r.has(Rn)&&(Ms.set(Rn,Rn),this._beforeAnimationBuild(en.player.namespaceId,en.instruction,fr))}),a.forEach(en=>{const Rn=en.element;this._getPreviousPlayers(Rn,!1,en.namespaceId,en.triggerName,null).forEach($i=>{Ko(fr,Rn,[]).push($i),$i.destroy()})});const Yr=be.filter(en=>bC(en,D,M)),Zo=new Map;V8(Zo,this.driver,je,M,Ch).forEach(en=>{bC(en,D,M)&&Yr.push(en)});const td=new Map;G.forEach((en,Rn)=>{V8(td,this.driver,new Set(en),D,"!")}),Yr.forEach(en=>{const Rn=Zo.get(en),Jn=td.get(en);Zo.set(en,Object.assign(Object.assign({},Rn),Jn))});const kl=[],w0=[],ev={};p.forEach(en=>{const{element:Rn,player:Jn,instruction:$i}=en;if(r.has(Rn)){if(I.has(Rn))return Jn.onDestroy(()=>af(Rn,$i.toStyles)),Jn.disabled=!0,Jn.overrideTotalTime($i.totalTime),void a.push(Jn);let Mo=ev;if(Ms.size>1){let Xa=Rn;const Sh=[];for(;Xa=Xa.parentNode;){const Ar=Ms.get(Xa);if(Ar){Mo=Ar;break}Sh.push(Xa)}Sh.forEach(Ar=>Ms.set(Ar,Mo))}const _f=this._buildAnimation(Jn.namespaceId,$i,fr,u,td,Zo);if(Jn.setRealPlayer(_f),Mo===ev)kl.push(Jn);else{const Xa=this.playersByElement.get(Mo);Xa&&Xa.length&&(Jn.parentPlayer=l0(Xa)),a.push(Jn)}}else ng(Rn,$i.fromStyles),Jn.onDestroy(()=>af(Rn,$i.toStyles)),w0.push(Jn),I.has(Rn)&&a.push(Jn)}),w0.forEach(en=>{const Rn=u.get(en.element);if(Rn&&Rn.length){const Jn=l0(Rn);en.setRealPlayer(Jn)}}),a.forEach(en=>{en.parentPlayer?en.syncPlayerEvents(en.parentPlayer):en.destroy()});for(let en=0;en<be.length;en++){const Rn=be[en],Jn=Rn[Qc];if(f0(Rn,z_),Jn&&Jn.hasAnimation)continue;let $i=[];if(_.size){let _f=_.get(Rn);_f&&_f.length&&$i.push(..._f);let Xa=this.driver.query(Rn,YT,!0);for(let Sh=0;Sh<Xa.length;Sh++){let Ar=_.get(Xa[Sh]);Ar&&Ar.length&&$i.push(...Ar)}}const Mo=$i.filter(_f=>!_f.destroyed);Mo.length?c9(this,Rn,Mo):this.processLeaveNode(Rn)}return be.length=0,kl.forEach(en=>{this.players.push(en),en.onDone(()=>{en.destroy();const Rn=this.players.indexOf(en);this.players.splice(Rn,1)}),en.play()}),kl}elementContainsData(t,e){let r=!1;const a=e[Qc];return a&&a.setForRemoval&&(r=!0),this.playersByElement.has(e)&&(r=!0),this.playersByQueriedElement.has(e)&&(r=!0),this.statesByElement.has(e)&&(r=!0),this._fetchNamespace(t).elementContainsData(e)||r}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,r,a,u){let p=[];if(e){const _=this.playersByQueriedElement.get(t);_&&(p=_)}else{const _=this.playersByElement.get(t);if(_){const D=!u||u==qx;_.forEach(M=>{M.queued||!D&&M.triggerName!=a||p.push(M)})}}return(r||a)&&(p=p.filter(_=>!(r&&r!=_.namespaceId||a&&a!=_.triggerName))),p}_beforeAnimationBuild(t,e,r){const u=e.element,p=e.isRemovalTransition?void 0:t,_=e.isRemovalTransition?void 0:e.triggerName;for(const D of e.timelines){const M=D.element,I=M!==u,V=Ko(r,M,[]);this._getPreviousPlayers(M,I,p,_,e.toState).forEach(G=>{const Z=G.getRealPlayer();Z.beforeDestroy&&Z.beforeDestroy(),G.destroy(),V.push(G)})}ng(u,e.fromStyles)}_buildAnimation(t,e,r,a,u,p){const _=e.triggerName,D=e.element,M=[],I=new Set,V=new Set,j=e.timelines.map(Z=>{const ye=Z.element;I.add(ye);const be=ye[Qc];if(be&&be.removedBeforeQueried)return new hC(Z.duration,Z.delay);const Ye=ye!==D,je=function(n){const t=[];return j8(n,t),t}((r.get(ye)||a9).map(fr=>fr.getRealPlayer())).filter(fr=>!!fr.element&&fr.element===ye),Et=u.get(ye),Wt=p.get(ye),ri=h8(0,this._normalizer,0,Z.keyframes,Et,Wt),dr=this._buildPlayer(Z,ri,je);if(Z.subTimeline&&a&&V.add(ye),Ye){const fr=new Yx(t,_,ye);fr.setRealPlayer(dr),M.push(fr)}return dr});M.forEach(Z=>{Ko(this.playersByQueriedElement,Z.element,[]).push(Z),Z.onDone(()=>function(n,t,e){let r;if(n instanceof Map){if(r=n.get(t),r){if(r.length){const a=r.indexOf(e);r.splice(a,1)}0==r.length&&n.delete(t)}}else if(r=n[t],r){if(r.length){const a=r.indexOf(e);r.splice(a,1)}0==r.length&&delete n[t]}return r}(this.playersByQueriedElement,Z.element,Z))}),I.forEach(Z=>lu(Z,NN));const G=l0(j);return G.onDestroy(()=>{I.forEach(Z=>f0(Z,NN)),af(D,e.toStyles)}),V.forEach(Z=>{Ko(a,Z,[]).push(G)}),G}_buildPlayer(t,e,r){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,r):new hC(t.duration,t.delay)}}class Yx{constructor(t,e,r){this.namespaceId=t,this.triggerName=e,this.element=r,this._player=new hC,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(r=>oo(t,e,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Ko(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function rg(n){return n&&1===n.nodeType}function YN(n,t){const e=n.style.display;return n.style.display=null!=t?t:"none",e}function V8(n,t,e,r,a){const u=[];e.forEach(D=>u.push(YN(D)));const p=[];r.forEach((D,M)=>{const I={};D.forEach(V=>{const j=I[V]=t.computeStyle(M,V,a);(!j||0==j.length)&&(M[Qc]=l9,p.push(M))}),n.set(M,I)});let _=0;return e.forEach(D=>YN(D,u[_++])),p}function $8(n,t){const e=new Map;if(n.forEach(_=>e.set(_,[])),0==t.length)return e;const a=new Set(t),u=new Map;function p(_){if(!_)return 1;let D=u.get(_);if(D)return D;const M=_.parentNode;return D=e.has(M)?M:a.has(M)?1:p(M),u.set(_,D),D}return t.forEach(_=>{const D=p(_);1!==D&&e.get(D).push(_)}),e}const nk="$$classes";function lu(n,t){if(n.classList)n.classList.add(t);else{let e=n[nk];e||(e=n[nk]={}),e[t]=!0}}function f0(n,t){if(n.classList)n.classList.remove(t);else{let e=n[nk];e&&delete e[t]}}function c9(n,t,e){l0(e).onDone(()=>n.processLeaveNode(t))}function j8(n,t){for(let e=0;e<n.length;e++){const r=n[e];r instanceof d8?j8(r.players,t):t.push(r)}}function bC(n,t,e){const r=e.get(n);if(!r)return!1;let a=t.get(n);return a?r.forEach(u=>a.add(u)):t.set(n,r),e.delete(n),!0}class CC{constructor(t,e,r){this.bodyNode=t,this._driver=e,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(a,u)=>{},this._transitionEngine=new u9(t,e,r),this._timelineEngine=new tk(t,e,r),this._transitionEngine.onRemovalComplete=(a,u)=>this.onRemovalComplete(a,u)}registerTrigger(t,e,r,a,u){const p=t+"-"+a;let _=this._triggerCache[p];if(!_){const D=[],M=VN(this._driver,u,D);if(D.length)throw new Error(`The animation trigger "${a}" has failed to build due to the following errors:\n - ${D.join("\n - ")}`);_=function(n,t,e){return new I8(n,t,e)}(a,M,this._normalizer),this._triggerCache[p]=_}this._transitionEngine.registerTrigger(e,a,_)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,r,a){this._transitionEngine.insertNode(t,e,r,a)}onRemove(t,e,r,a){this._transitionEngine.removeNode(t,e,a||!1,r)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,r,a){if("@"==r.charAt(0)){const[u,p]=$_(r);this._timelineEngine.command(u,e,p,a)}else this._transitionEngine.trigger(t,e,r,a)}listen(t,e,r,a,u){if("@"==r.charAt(0)){const[p,_]=$_(r);return this._timelineEngine.listen(p,e,_,u)}return this._transitionEngine.listen(t,e,r,a,u)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function z8(n,t){let e=null,r=null;return Array.isArray(t)&&t.length?(e=ik(t[0]),t.length>1&&(r=ik(t[t.length-1]))):t&&(e=ik(t)),e||r?new d9(n,e,r):null}let d9=(()=>{class n{constructor(e,r,a){this._element=e,this._startStyles=r,this._endStyles=a,this._state=0;let u=n.initialStylesByElement.get(e);u||n.initialStylesByElement.set(e,u={}),this._initialStyles=u}start(){this._state<1&&(this._startStyles&&af(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(af(this._element,this._initialStyles),this._endStyles&&(af(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(ng(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ng(this._element,this._endStyles),this._endStyles=null),af(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function ik(n){let t=null;const e=Object.keys(n);for(let r=0;r<e.length;r++){const a=e[r];rk(a)&&(t=t||{},t[a]=n[a])}return t}function rk(n){return"display"===n||"position"===n}const sk="animation",f9="animationend";class vY{constructor(t,e,r,a,u,p,_){this._element=t,this._name=e,this._duration=r,this._delay=a,this._easing=u,this._fillMode=p,this._onDoneFn=_,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=D=>this._handleCallback(D)}apply(){(function(n,t){const e=wC(n,"").trim();let r=0;e.length&&(function(n,t){let e=0;for(let r=0;r<n.length;r++)","===n.charAt(r)&&e++;return e}(e)+1,t=`${e}, ${t}`),Ol(n,"",t)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Bi(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){h9(this._element,this._name,"paused")}resume(){h9(this._element,this._name,"running")}setPosition(t){const e=ok(this._element,this._name);this._position=t*this._duration,Ol(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),r=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&r>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Bi(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(n,t){const r=wC(n,"").split(","),a=W_(r,t);a>=0&&(r.splice(a,1),Ol(n,"",r.join(",")))}(this._element,this._name))}}function h9(n,t,e){Ol(n,"PlayState",e,ok(n,t))}function ok(n,t){const e=wC(n,"");return e.indexOf(",")>0?W_(e.split(","),t):W_([e],t)}function W_(n,t){for(let e=0;e<n.length;e++)if(n[e].indexOf(t)>=0)return e;return-1}function Bi(n,t,e){e?n.removeEventListener(f9,t):n.addEventListener(f9,t)}function Ol(n,t,e,r){const a=sk+t;if(null!=r){const u=n.style[a];if(u.length){const p=u.split(",");p[r]=e,e=p.join(",")}}n.style[a]=e}function wC(n,t){return n.style[sk+t]||""}class h0{constructor(t,e,r,a,u,p,_,D){this.element=t,this.keyframes=e,this.animationName=r,this._duration=a,this._delay=u,this._finalStyles=_,this._specialStyles=D,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=p||"linear",this.totalTime=a+u,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new vY(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(r=>{"offset"!=r&&(t[r]=e?this._finalStyles[r]:Ux(this.element,r))})}this.currentSnapshot=t}}class Xx extends hC{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=_8(e)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class H8{constructor(){this._count=0}validateStyleProperty(t){return ON(t)}matchesElement(t,e){return TN(t,e)}containsElement(t,e){return WT(t,e)}query(t,e,r){return kN(t,e,r)}computeStyle(t,e,r){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,r){r=r.map(_=>_8(_));let a=`@keyframes ${e} {\n`,u="";r.forEach(_=>{u=" ";const D=parseFloat(_.offset);a+=`${u}${100*D}% {\n`,u+=" ",Object.keys(_).forEach(M=>{const I=_[M];switch(M){case"offset":return;case"easing":return void(I&&(a+=`${u}animation-timing-function: ${I};\n`));default:return void(a+=`${u}${M}: ${I};\n`)}}),a+=`${u}}\n`}),a+="}\n";const p=document.createElement("style");return p.textContent=a,p}animate(t,e,r,a,u,p=[],_){const D=p.filter(be=>be instanceof h0),M={};E8(r,a)&&D.forEach(be=>{let Ye=be.currentSnapshot;Object.keys(Ye).forEach(je=>M[je]=Ye[je])});const I=function(n){let t={};return n&&(Array.isArray(n)?n:[n]).forEach(r=>{Object.keys(r).forEach(a=>{"offset"==a||"easing"==a||(t[a]=r[a])})}),t}(e=zx(t,e,M));if(0==r)return new Xx(t,I);const V="gen_css_kf_"+this._count++,j=this.buildKeyframeElement(t,V,e);(function(n){var t;const e=null===(t=n.getRootNode)||void 0===t?void 0:t.call(n);return"undefined"!=typeof ShadowRoot&&e instanceof ShadowRoot?e:document.head})(t).appendChild(j);const Z=z8(t,e),ye=new h0(t,e,V,r,a,u,I,Z);return ye.onDestroy(()=>function(n){n.parentNode.removeChild(n)}(j)),ye}}class W8{constructor(t,e,r,a){this.element=t,this.keyframes=e,this.options=r,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,r){return t.animate(e,r)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:Ux(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(r=>r()),e.length=0}}class m9{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(G8().toString()),this._cssKeyframesDriver=new H8}validateStyleProperty(t){return ON(t)}matchesElement(t,e){return TN(t,e)}containsElement(t,e){return WT(t,e)}query(t,e,r){return kN(t,e,r)}computeStyle(t,e,r){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,r,a,u,p=[],_){if(!_&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,r,a,u,p);const I={duration:r,delay:a,fill:0==a?"both":"forwards"};u&&(I.easing=u);const V={},j=p.filter(Z=>Z instanceof W8);E8(r,a)&&j.forEach(Z=>{let ye=Z.currentSnapshot;Object.keys(ye).forEach(be=>V[be]=ye[be])});const G=z8(t,e=zx(t,e=e.map(Z=>u0(Z,!1)),V));return new W8(t,e,I,G)}}function G8(){return f8()&&Element.prototype.animate||{}}let q8=(()=>{class n extends Px{constructor(e,r){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(r.body,{id:"0",encapsulation:Or.None,styles:[],data:{animation:[]}})}build(e){const r=this._nextAnimationId.toString();this._nextAnimationId++;const a=Array.isArray(e)?u8(e):e;return lk(this._renderer,null,r,"register",[a]),new _9(r,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(se(wo),se(An))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();class _9 extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new v9(this._id,t,e||{},this._renderer)}}class v9{constructor(t,e,r,a){this.id=t,this.element=e,this._renderer=a,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return lk(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function lk(n,t,e,r,a){return n.setProperty(t,`@@${e}:${r}`,a)}const Kx="@.disabled";let b9=(()=>{class n{constructor(e,r,a){this.delegate=e,this.engine=r,this._zone=a,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(u,p)=>{p&&p.parentNode(u)&&p.removeChild(u.parentNode,u)}}createRenderer(e,r){const u=this.delegate.createRenderer(e,r);if(!(e&&r&&r.data&&r.data.animation)){let I=this._rendererCache.get(u);return I||(I=new Y8("",u,this.engine),this._rendererCache.set(u,I)),I}const p=r.id,_=r.id+"-"+this._currentId;this._currentId++,this.engine.register(_,e);const D=I=>{Array.isArray(I)?I.forEach(D):this.engine.registerTrigger(p,_,e,I.name,I)};return r.data.animation.forEach(D),new C9(this,_,u,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,r,a){e>=0&&e<this._microtaskId?this._zone.run(()=>r(a)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(u=>{const[p,_]=u;p(_)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,a]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(se(wo),se(CC),se(On))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();class Y8{constructor(t,e,r){this.namespaceId=t,this.delegate=e,this.engine=r,this.destroyNode=this.delegate.destroyNode?a=>e.destroyNode(a):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,r,a=!0){this.delegate.insertBefore(t,e,r),this.engine.onInsert(this.namespaceId,e,t,a)}removeChild(t,e,r){this.engine.onRemove(this.namespaceId,e,this.delegate,r)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,r,a){this.delegate.setAttribute(t,e,r,a)}removeAttribute(t,e,r){this.delegate.removeAttribute(t,e,r)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,r,a){this.delegate.setStyle(t,e,r,a)}removeStyle(t,e,r){this.delegate.removeStyle(t,e,r)}setProperty(t,e,r){"@"==e.charAt(0)&&e==Kx?this.disableAnimations(t,!!r):this.delegate.setProperty(t,e,r)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,r){return this.delegate.listen(t,e,r)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class C9 extends Y8{constructor(t,e,r,a){super(e,r,a),this.factory=t,this.namespaceId=e}setProperty(t,e,r){"@"==e.charAt(0)?"."==e.charAt(1)&&e==Kx?this.disableAnimations(t,r=void 0===r||!!r):this.engine.process(this.namespaceId,t,e.substr(1),r):this.delegate.setProperty(t,e,r)}listen(t,e,r){if("@"==e.charAt(0)){const a=function(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let u=e.substr(1),p="";return"@"!=u.charAt(0)&&([u,p]=function(n){const t=n.indexOf(".");return[n.substring(0,t),n.substr(t+1)]}(u)),this.engine.listen(this.namespaceId,a,u,p,_=>{this.factory.scheduleListenerCallback(_._data||-1,r,_)})}return this.delegate.listen(t,e,r)}}let D9=(()=>{class n extends CC{constructor(e,r,a){super(e.body,r,a)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(se(An),se(FN),se(HN))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();const ec=new Ft("AnimationModuleType"),eP=[{provide:Px,useClass:q8},{provide:HN,useFactory:function(){return new e9}},{provide:CC,useClass:D9},{provide:wo,useFactory:function(n,t,e){return new b9(n,t,e)},deps:[cT,CC,On]}],X8=[{provide:FN,useFactory:function(){return"function"==typeof G8()?new m9:new H8}},{provide:ec,useValue:"BrowserAnimations"},...eP],K8=[{provide:FN,useClass:v8},{provide:ec,useValue:"NoopAnimations"},...eP];let tP=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?K8:X8}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({providers:X8,imports:[qR]}),n})();function T9(n,t){if(1&n&&on(0,"mat-pseudo-checkbox",4),2&n){const e=dn();yt("state",e.selected?"checked":"unchecked")("disabled",e.disabled)}}function k9(n,t){if(1&n&&(we(0,"span",5),jt(1),Ee()),2&n){const e=dn();mt(1),Lr("(",e.group.label,")")}}const J8=["*"],nP=new Pc("12.2.10"),Z8=new Ft("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let G_,ps=(()=>{class n{constructor(e,r,a){this._hasDoneGlobalChecks=!1,this._document=a,e._applyBodyHighContrastModeCssClasses(),this._sanityChecks=r,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!(!Uc()||tN())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const e=this._document.createElement("div");e.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(e);const r=getComputedStyle(e);r&&"none"!==r.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(e)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&nP.full!==l8.full&&console.warn("The Angular Material version ("+nP.full+") does not match the Angular CDK version ("+l8.full+").\nPlease ensure the versions of these two packages exactly match.")}}return n.\u0275fac=function(e){return new(e||n)(se(AN),se(Z8,8),se(An))},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[P_],P_]}),n})();function DC(n){return class extends n{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=yr(t)}}}function Eh(n,t){return class extends n{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const r=e||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}function rP(n){return class extends n{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=yr(t)}}}function sP(n,t=0){return class extends n{constructor(...e){super(...e),this._tabIndex=t,this.defaultTabIndex=t}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(e){this._tabIndex=null!=e?Yu(e):this.defaultTabIndex}}}function Qx(n){return class extends n{constructor(...t){super(...t),this.stateChanges=new We,this.errorState=!1}updateErrorState(){const t=this.errorState,u=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);u!==t&&(this.errorState=u,this.stateChanges.next())}}}try{G_="undefined"!=typeof Intl}catch(n){G_=!1}let j9=(()=>{class n{isErrorState(e,r){return!!(e&&e.invalid&&(e.touched||r&&r.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ot({factory:function(){return new n},token:n,providedIn:"root"}),n})();class ck{constructor(t,e,r){this._renderer=t,this.element=e,this.config=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const So={enterDuration:225,exitDuration:150},dk=Sx({passive:!0}),nV=["mousedown","touchstart"],iV=["mouseup","mouseleave","touchend","touchcancel"];class U9{constructor(t,e,r,a){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,a.isBrowser&&(this._containerElement=Xu(r))}fadeInRipple(t,e,r={}){const a=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),u=Object.assign(Object.assign({},So),r.animation);r.centered&&(t=a.left+a.width/2,e=a.top+a.height/2);const p=r.radius||function(n,t,e){const r=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),a=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(r*r+a*a)}(t,e,a),_=t-a.left,D=e-a.top,M=u.enterDuration,I=document.createElement("div");I.classList.add("mat-ripple-element"),I.style.left=_-p+"px",I.style.top=D-p+"px",I.style.height=2*p+"px",I.style.width=2*p+"px",null!=r.color&&(I.style.backgroundColor=r.color),I.style.transitionDuration=`${M}ms`,this._containerElement.appendChild(I),function(n){window.getComputedStyle(n).getPropertyValue("opacity")}(I),I.style.transform="scale(1)";const V=new ck(this,I,r);return V.state=0,this._activeRipples.add(V),r.persistent||(this._mostRecentTransientRipple=V),this._runTimeoutOutsideZone(()=>{const j=V===this._mostRecentTransientRipple;V.state=1,!r.persistent&&(!j||!this._isPointerDown)&&V.fadeOut()},M),V}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const r=t.element,a=Object.assign(Object.assign({},So),t.config.animation);r.style.transitionDuration=`${a.exitDuration}ms`,r.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,r.parentNode.removeChild(r)},a.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=Xu(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(nV))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(iV),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=VT(t),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!r&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!DN(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let r=0;r<e.length;r++)this.fadeInRipple(e[r].clientX,e[r].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,dk)})})}_removeTriggerEvents(){this._triggerElement&&(nV.forEach(t=>{this._triggerElement.removeEventListener(t,this,dk)}),this._pointerUpEventsRegistered&&iV.forEach(t=>{this._triggerElement.removeEventListener(t,this,dk)}))}}const G9=new Ft("mat-ripple-global-options");let Zx=(()=>{class n{constructor(e,r,a,u,p){this._elementRef=e,this._animationMode=p,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=u||{},this._rippleRenderer=new U9(this,r,e,a)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,r=0,a){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,r,Object.assign(Object.assign({},this.rippleConfig),a)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return n.\u0275fac=function(e){return new(e||n)(ue(Mn),ue(On),ue(rs),ue(G9,8),ue(ec,8))},n.\u0275dir=kt({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,r){2&e&&Qn("mat-ripple-unbounded",r.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),n})(),oP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[ps,nC],ps]}),n})(),aP=(()=>{class n{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1}}return n.\u0275fac=function(e){return new(e||n)(ue(ec,8))},n.\u0275cmp=Sn({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(e,r){2&e&&Qn("mat-pseudo-checkbox-indeterminate","indeterminate"===r.state)("mat-pseudo-checkbox-checked","checked"===r.state)("mat-pseudo-checkbox-disabled",r.disabled)("_mat-animation-noopable","NoopAnimations"===r._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(e,r){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),n})(),q9=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[ps]]}),n})();const p0=new Ft("MAT_OPTION_PARENT_COMPONENT"),Y9=DC(class{});let AC=0,q_=(()=>{class n extends Y9{constructor(e){var r;super(),this._labelId="mat-optgroup-label-"+AC++,this._inert=null!==(r=null==e?void 0:e.inertGroups)&&void 0!==r&&r}}return n.\u0275fac=function(e){return new(e||n)(ue(p0,8))},n.\u0275dir=kt({type:n,inputs:{label:"label"},features:[qn]}),n})();const fk=new Ft("MatOptgroup");let X9=0;class rV{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let K9=(()=>{class n{constructor(e,r,a,u){this._element=e,this._changeDetectorRef=r,this._parent=a,this.group=u,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+X9++,this.onSelectionChange=new Vn,this._stateChanges=new We}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=yr(e)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(e,r){const a=this._getHostElement();"function"==typeof a.focus&&a.focus(r)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(13===e.keyCode||32===e.keyCode)&&!bh(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue=e,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new rV(this,e))}}return n.\u0275fac=function(e){return new(e||n)(ue(Mn),ue(F),ue(void 0),ue(q_))},n.\u0275dir=kt({type:n,inputs:{id:"id",disabled:"disabled",value:"value"},outputs:{onSelectionChange:"onSelectionChange"}}),n})(),lP=(()=>{class n extends K9{constructor(e,r,a,u){super(e,r,a,u)}}return n.\u0275fac=function(e){return new(e||n)(ue(Mn),ue(F),ue(p0,8),ue(fk,8))},n.\u0275cmp=Sn({type:n,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(e,r){1&e&&Cn("click",function(){return r._selectViaInteraction()})("keydown",function(u){return r._handleKeydown(u)}),2&e&&(_l("id",r.id),mi("tabindex",r._getTabIndex())("aria-selected",r._getAriaSelected())("aria-disabled",r.disabled.toString()),Qn("mat-selected",r.selected)("mat-option-multiple",r.multiple)("mat-active",r.active)("mat-option-disabled",r.disabled))},exportAs:["matOption"],features:[qn],ngContentSelectors:J8,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(e,r){1&e&&(vs(),cn(0,T9,1,2,"mat-pseudo-checkbox",0),we(1,"span",1),Ei(2),Ee(),cn(3,k9,2,1,"span",2),on(4,"div",3)),2&e&&(yt("ngIf",r.multiple),mt(3),yt("ngIf",r.group&&r.group._inert),mt(1),yt("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},directives:[ou,Zx,aP],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),n})();function sV(n,t,e){if(e.length){let r=t.toArray(),a=e.toArray(),u=0;for(let p=0;p<n+1;p++)r[p].group&&r[p].group===a[u]&&u++;return u}return 0}let oV=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[oP,Er,ps,q9]]}),n})();function aV(n){return t=>t.lift(new Q9(n))}class Q9{constructor(t){this.value=t}call(t,e){return e.subscribe(new J9(t,this.value))}}class J9 extends Dt{constructor(t,e){super(t),this.value=e}_next(t){this.destination.next(this.value)}}const hk=["*"];function lV(n,t){if(1&n){const e=eo();we(0,"div",2),Cn("click",function(){return Zr(e),dn()._onBackdropClicked()}),Ee()}2&n&&Qn("mat-drawer-shown",dn()._isShowingBackdrop())}function Z9(n,t){1&n&&(we(0,"mat-drawer-content"),Ei(1,2),Ee())}const eU=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],eS=["mat-drawer","mat-drawer-content","*"];function tU(n,t){if(1&n){const e=eo();we(0,"div",2),Cn("click",function(){return Zr(e),dn()._onBackdropClicked()}),Ee()}2&n&&Qn("mat-drawer-shown",dn()._isShowingBackdrop())}function uV(n,t){1&n&&(we(0,"mat-sidenav-content",3),Ei(1,2),Ee())}const cV=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],cP=["mat-sidenav","mat-sidenav-content","*"],dV=".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n",fV={transformDrawer:a0("transform",[Xc("open, open-instant",Xo({transform:"none",visibility:"visible"})),Xc("void",Xo({"box-shadow":"none",visibility:"hidden"})),of("void => open-instant",tg("0ms")),of("void <=> open, open-instant => void",tg("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},nU=new Ft("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),dP=new Ft("MAT_DRAWER_CONTAINER");let pk=(()=>{class n extends lC{constructor(e,r,a,u,p){super(a,u,p),this._changeDetectorRef=e,this._container=r}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(e){return new(e||n)(ue(F),ue(Me(()=>pV)),ue(Mn),ue(aC),ue(On))},n.\u0275cmp=Sn({type:n,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(e,r){2&e&&Co("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},features:[qn],ngContentSelectors:hk,decls:1,vars:0,template:function(e,r){1&e&&(vs(),Ei(0))},encapsulation:2,changeDetection:0}),n})(),hV=(()=>{class n{constructor(e,r,a,u,p,_,D){this._elementRef=e,this._focusTrapFactory=r,this._focusMonitor=a,this._platform=u,this._ngZone=p,this._doc=_,this._container=D,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new We,this._animationEnd=new We,this._animationState="void",this.openedChange=new Vn(!0),this._openedStream=this.openedChange.pipe(Wi(M=>M),Pe(()=>{})),this.openedStart=this._animationStarted.pipe(Wi(M=>M.fromState!==M.toState&&0===M.toState.indexOf("open")),aV(void 0)),this._closedStream=this.openedChange.pipe(Wi(M=>!M),Pe(()=>{})),this.closedStart=this._animationStarted.pipe(Wi(M=>M.fromState!==M.toState&&"void"===M.toState),aV(void 0)),this._destroyed=new We,this.onPositionChanged=new Vn,this._modeChanged=new We,this.openedChange.subscribe(M=>{M?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus()}),this._ngZone.runOutsideAngular(()=>{sC(this._elementRef.nativeElement,"keydown").pipe(Wi(M=>27===M.keyCode&&!this.disableClose&&!bh(M)),yi(this._destroyed)).subscribe(M=>this._ngZone.run(()=>{this.close(),M.stopPropagation(),M.preventDefault()}))}),this._animationEnd.pipe(Sl((M,I)=>M.fromState===I.fromState&&M.toState===I.toState)).subscribe(M=>{const{fromState:I,toState:V}=M;(0===V.indexOf("open")&&"void"===I||"void"===V&&0===I.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(e){(e="end"===e?"end":"start")!=this._position&&(this._position=e,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(e){this._mode=e,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(e){this._disableClose=yr(e)}get autoFocus(){const e=this._autoFocus;return null==e?"side"!==this.mode:e}set autoFocus(e){this._autoFocus=yr(e)}get opened(){return this._opened}set opened(e){this.toggle(yr(e))}_takeFocus(){!this.autoFocus||!this._focusTrap||this._focusTrap.focusInitialElementWhenReady().then(e=>{!e&&"function"==typeof this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()})}_restoreFocus(){!this.autoFocus||(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,this._openedVia):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null,this._openedVia=null)}_isFocusWithinDrawer(){var e;const r=null===(e=this._doc)||void 0===e?void 0:e.activeElement;return!!r&&this._elementRef.nativeElement.contains(r)}ngAfterContentInit(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(e){return this.toggle(!0,e)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0)}toggle(e=!this.opened,r){return this._setOpen(e,!e&&this._isFocusWithinDrawer(),r)}_setOpen(e,r,a="program"){return this._opened=e,e?(this._animationState=this._enableAnimations?"open":"open-instant",this._openedVia=a):(this._animationState="void",r&&this._restoreFocus()),this._updateFocusTrapState(),new Promise(u=>{this.openedChange.pipe(so(1)).subscribe(p=>u(p?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_animationStartListener(e){this._animationStarted.next(e)}_animationDoneListener(e){this._animationEnd.next(e)}}return n.\u0275fac=function(e){return new(e||n)(ue(Mn),ue(CN),ue(B_),ue(rs),ue(On),ue(An,8),ue(dP,8))},n.\u0275cmp=Sn({type:n,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(e,r){1&e&&mm("@transform.start",function(u){return r._animationStartListener(u)})("@transform.done",function(u){return r._animationDoneListener(u)}),2&e&&(mi("align",null),Oc("@transform",r._animationState),Qn("mat-drawer-end","end"===r.position)("mat-drawer-over","over"===r.mode)("mat-drawer-push","push"===r.mode)("mat-drawer-side","side"===r.mode)("mat-drawer-opened",r.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:hk,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(e,r){1&e&&(vs(),we(0,"div",0),Ei(1),Ee())},directives:[lC],encapsulation:2,data:{animation:[fV.transformDrawer]},changeDetection:0}),n})(),pV=(()=>{class n{constructor(e,r,a,u,p,_=!1,D){this._dir=e,this._element=r,this._ngZone=a,this._changeDetectorRef=u,this._animationMode=D,this._drawers=new zm,this.backdropClick=new Vn,this._destroyed=new We,this._doCheckSubject=new We,this._contentMargins={left:null,right:null},this._contentMarginChanges=new We,e&&e.change.pipe(yi(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),p.change().pipe(yi(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=_}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(e){this._autosize=yr(e)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(e){this._backdropOverride=null==e?null:yr(e)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(qo(this._allDrawers),yi(this._destroyed)).subscribe(e=>{this._drawers.reset(e.filter(r=>!r._container||r._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(qo(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(e=>{this._watchDrawerToggle(e),this._watchDrawerPosition(e),this._watchDrawerMode(e)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(cC(10),yi(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(e=>e.open())}close(){this._drawers.forEach(e=>e.close())}updateContentMargins(){let e=0,r=0;if(this._left&&this._left.opened)if("side"==this._left.mode)e+=this._left._getWidth();else if("push"==this._left.mode){const a=this._left._getWidth();e+=a,r-=a}if(this._right&&this._right.opened)if("side"==this._right.mode)r+=this._right._getWidth();else if("push"==this._right.mode){const a=this._right._getWidth();r+=a,e-=a}e=e||null,r=r||null,(e!==this._contentMargins.left||r!==this._contentMargins.right)&&(this._contentMargins={left:e,right:r},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(e){e._animationStarted.pipe(Wi(r=>r.fromState!==r.toState),yi(this._drawers.changes)).subscribe(r=>{"open-instant"!==r.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==e.mode&&e.openedChange.pipe(yi(this._drawers.changes)).subscribe(()=>this._setContainerClass(e.opened))}_watchDrawerPosition(e){!e||e.onPositionChanged.pipe(yi(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(so(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(e){e&&e._modeChanged.pipe(yi(Ii(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(e){const r=this._element.nativeElement.classList,a="mat-drawer-container-has-open";e?r.add(a):r.remove(a)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(e=>{"end"==e.position?this._end=e:this._start=e}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(e=>e&&!e.disableClose&&this._canHaveBackdrop(e)).forEach(e=>e._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(e){return"side"!==e.mode||!!this._backdropOverride}_isDrawerOpen(e){return null!=e&&e.opened}}return n.\u0275fac=function(e){return new(e||n)(ue(vh,8),ue(Mn),ue(On),ue(F),ue(L_),ue(nU),ue(ec,8))},n.\u0275cmp=Sn({type:n,selectors:[["mat-drawer-container"]],contentQueries:function(e,r,a){if(1&e&&(bs(a,pk,5),bs(a,hV,5)),2&e){let u;Pi(u=Li())&&(r._content=u.first),Pi(u=Li())&&(r._allDrawers=u)}},viewQuery:function(e,r){if(1&e&&Dl(pk,5),2&e){let a;Pi(a=Li())&&(r._userContent=a.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(e,r){2&e&&Qn("mat-drawer-container-explicit-backdrop",r._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[Yn([{provide:dP,useExisting:n}])],ngContentSelectors:eS,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(e,r){1&e&&(vs(eU),cn(0,lV,1,2,"div",0),Ei(1),Ei(2,1),cn(3,Z9,2,0,"mat-drawer-content",1)),2&e&&(yt("ngIf",r.hasBackdrop),mt(3),yt("ngIf",!r._content))},directives:[ou,pk],styles:[dV],encapsulation:2,changeDetection:0}),n})(),fP=(()=>{class n extends pk{constructor(e,r,a,u,p){super(e,r,a,u,p)}}return n.\u0275fac=function(e){return new(e||n)(ue(F),ue(Me(()=>hP)),ue(Mn),ue(aC),ue(On))},n.\u0275cmp=Sn({type:n,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(e,r){2&e&&Co("margin-left",r._container._contentMargins.left,"px")("margin-right",r._container._contentMargins.right,"px")},features:[qn],ngContentSelectors:hk,decls:1,vars:0,template:function(e,r){1&e&&(vs(),Ei(0))},encapsulation:2,changeDetection:0}),n})(),gV=(()=>{class n extends hV{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(e){this._fixedInViewport=yr(e)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(e){this._fixedTopGap=Yu(e)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(e){this._fixedBottomGap=Yu(e)}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Cr(n)))(r||n)}}(),n.\u0275cmp=Sn({type:n,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(e,r){2&e&&(mi("align",null),Co("top",r.fixedInViewport?r.fixedTopGap:null,"px")("bottom",r.fixedInViewport?r.fixedBottomGap:null,"px"),Qn("mat-drawer-end","end"===r.position)("mat-drawer-over","over"===r.mode)("mat-drawer-push","push"===r.mode)("mat-drawer-side","side"===r.mode)("mat-drawer-opened",r.opened)("mat-sidenav-fixed",r.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[qn],ngContentSelectors:hk,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(e,r){1&e&&(vs(),we(0,"div",0),Ei(1),Ee())},directives:[lC],encapsulation:2,data:{animation:[fV.transformDrawer]},changeDetection:0}),n})(),hP=(()=>{class n extends pV{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Cr(n)))(r||n)}}(),n.\u0275cmp=Sn({type:n,selectors:[["mat-sidenav-container"]],contentQueries:function(e,r,a){if(1&e&&(bs(a,fP,5),bs(a,gV,5)),2&e){let u;Pi(u=Li())&&(r._content=u.first),Pi(u=Li())&&(r._allDrawers=u)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(e,r){2&e&&Qn("mat-drawer-container-explicit-backdrop",r._backdropOverride)},exportAs:["matSidenavContainer"],features:[Yn([{provide:dP,useExisting:n}]),qn],ngContentSelectors:cP,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],["cdkScrollable","",4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"],["cdkScrollable",""]],template:function(e,r){1&e&&(vs(cV),cn(0,tU,1,2,"div",0),Ei(1),Ei(2,1),cn(3,uV,2,0,"mat-sidenav-content",1)),2&e&&(yt("ngIf",r.hasBackdrop),mt(3),yt("ngIf",!r._content))},directives:[ou,fP,lC],styles:[dV],encapsulation:2,changeDetection:0}),n})(),rU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[Er,ps,nC,uC],uC,ps]}),n})();var mV=pe(5478);const gk=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();function mk(n=null){return t=>t.lift(new sU(n))}class sU{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new oU(t,this.defaultValue))}}class oU extends Dt{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function yV(n=i){return t=>t.lift(new aU(n))}class aU{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new lU(t,this.errorFactory))}}class lU extends Dt{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function i(){return new gk}function s(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Wi((a,u)=>n(a,u,r)):Lt,so(1),e?mk(t):yV(()=>new gk))}const o=["*"];var h=(()=>(function(n){n.LineHighlight="line-highlight",n.LineNumbers="line-numbers"}(h||(h={})),h))();class g{}const E=new Ft("SECURITY_CONTEXT");let x=(()=>{class n{constructor(e,r,a,u,p){this.platform=e,this.securityContext=r,this.http=a,this.sanitizer=p,this.initialMarkedOptions={renderer:new mV.Renderer},this.options=u}get options(){return this._options}set options(e){this._options=Object.assign(Object.assign({},this.initialMarkedOptions),e)}get renderer(){return this.options.renderer}set renderer(e){this.options.renderer=e}compile(e,r=!1,a=!1,u=this.options){const p=this.trimIndentation(e),_=r?this.decodeHtml(p):p,D=a?this.renderEmoji(_):_,M=mV.parse(D,u);return this.sanitizer.sanitize(this.securityContext,M)||""}getSource(e){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(e,{responseType:"text"}).pipe(Pe(r=>this.handleExtension(e,r)))}highlight(e){if(_x(this.platform)&&"undefined"!=typeof Prism){e||(e=document);const r=e.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(r,a=>a.classList.add("language-none")),Prism.highlightAllUnder(e)}}renderKatex(e,r){if(!_x(this.platform))return e;if("undefined"==typeof katex||void 0===katex.renderToString)throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");return e.replace(/\$([^\s][^$]*?[^\s])\$/gm,(a,u)=>katex.renderToString(u,r))}decodeHtml(e){if(!_x(this.platform))return e;const r=document.createElement("textarea");return r.innerHTML=e,r.value}handleExtension(e,r){const a=e?e.split("?")[0].split(".").splice(-1).join():"";return"md"!==a?"```"+a+"\n"+r+"\n```":r}renderEmoji(e){if(!_x(this.platform))return e;if("undefined"==typeof joypixels||void 0===joypixels.shortnameToUnicode)throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(e)}trimIndentation(e){if(!e)return"";let r;return e.split("\n").map(a=>{let u=r;return a.length>0&&(u=isNaN(u)?a.search(/\S|$/):Math.min(a.search(/\S|$/),u)),isNaN(r)&&(r=u),u?a.substring(u):a}).join("\n")}}return n.\u0275fac=function(e){return new(e||n)(se(Yd),se(E),se(Zm,8),se(g,8),se(Qm))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})(),S=(()=>{class n{constructor(e,r){this.element=e,this.markdownService=r,this.error=new Vn,this.load=new Vn,this.ready=new Vn,this._emoji=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1}get emoji(){return this._emoji}set emoji(e){this._emoji=this.coerceBooleanProperty(e)}get katex(){return this._katex}set katex(e){this._katex=this.coerceBooleanProperty(e)}get lineHighlight(){return this._lineHighlight}set lineHighlight(e){this._lineHighlight=this.coerceBooleanProperty(e)}get lineNumbers(){return this._lineNumbers}set lineNumbers(e){this._lineNumbers=this.coerceBooleanProperty(e)}ngOnChanges(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){!this.data&&!this.src&&this.handleTransclusion()}render(e,r=!1){let a=this.markdownService.compile(e,r,this.emoji);a=this.katex?this.markdownService.renderKatex(a,this.katexOptions):a,this.element.nativeElement.innerHTML=a,this.handlePlugins(),this.markdownService.highlight(this.element.nativeElement),this.ready.emit()}coerceBooleanProperty(e){return null!=e&&"false"!=`${String(e)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe(e=>{this.render(e),this.load.emit(e)},e=>this.error.emit(e))}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,h.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(e,r){const a=e.querySelectorAll("pre");for(let u=0;u<a.length;u++){const p=r instanceof Array?r:[r];a.item(u).classList.add(...p)}}setPluginOptions(e,r){const a=e.querySelectorAll("pre");for(let u=0;u<a.length;u++)Object.keys(r).forEach(p=>{const _=r[p];if(_){const D=this.toLispCase(p);a.item(u).setAttribute(D,_.toString())}})}toLispCase(e){const r=e.match(/([A-Z])/g);if(!r)return e;let a=e.toString();for(let u=0,p=r.length;u<p;u++)a=a.replace(new RegExp(r[u]),"-"+r[u].toLowerCase());return"-"===a.slice(0,1)&&(a=a.slice(1)),a}}return n.\u0275fac=function(e){return new(e||n)(ue(Mn),ue(x))},n.\u0275cmp=Sn({type:n,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start"},outputs:{error:"error",load:"load",ready:"ready"},features:[or],ngContentSelectors:o,decls:1,vars:0,template:function(e,r){1&e&&(vs(),Ei(0))},encapsulation:2}),n})(),N=(()=>{class n{static forRoot(e){return{ngModule:n,providers:[x,e&&e.loader||[],e&&e.markedOptions||[],{provide:E,useValue:e&&null!=e.sanitize?e.sanitize:wi.HTML}]}}static forChild(){return{ngModule:n}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({}),n})();class P extends Dt{notifyNext(t,e,r,a,u){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class z extends Dt{constructor(t,e,r){super(),this.parent=t,this.outerValue=e,this.outerIndex=r,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function H(n,t,e,r,a=new z(n,e,r)){if(!a.closed)return t instanceof ae?t.subscribe(a):ht(t)(a)}const X={};function J(...n){let t,e;return at(n[n.length-1])&&(e=n.pop()),"function"==typeof n[n.length-1]&&(t=n.pop()),1===n.length&&Ae(n[0])&&(n=n[0]),ea(n,e).lift(new oe(t))}class oe{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new fe(t,this.resultSelector))}}class fe extends P{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(X),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let r=0;r<e;r++)this.add(H(this,t[r],void 0,r))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,r){const a=this.values,p=this.toRespond?a[r]===X?--this.toRespond:this.toRespond:0;a[r]=e,0===p&&(this.resultSelector?this._tryResultSelector(a):this.destination.next(a.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(r){return void this.destination.error(r)}this.destination.next(e)}}function te(n){return new ae(t=>{let e;try{e=n()}catch(a){return void t.error(a)}return(e?rn(e):Yo()).subscribe(t)})}function Re(n,t){let e=!1;return arguments.length>=2&&(e=!0),function(a){return a.lift(new ze(n,t,e))}}class ze{constructor(t,e,r=!1){this.accumulator=t,this.seed=e,this.hasSeed=r}call(t,e){return e.subscribe(new Fe(t,this.accumulator,this.seed,this.hasSeed))}}class Fe extends Dt{constructor(t,e,r,a){super(t),this.accumulator=e,this._seed=r,this.hasSeed=a,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let r;try{r=this.accumulator(this.seed,t,e)}catch(a){this.destination.error(a)}this.seed=r,this.destination.next(r)}}function Oe(n){return function(e){const r=new tt(n),a=e.lift(r);return r.caught=a}}class tt{constructor(t){this.selector=t}call(t,e){return e.subscribe(new et(t,this.selector,this.caught))}}class et extends sr{constructor(t,e,r){super(t),this.selector=e,this.caught=r}error(t){if(!this.isStopped){let e;try{e=this.selector(t,this.caught)}catch(u){return void super.error(u)}this._unsubscribeAndRecycle();const r=new ut(this);this.add(r);const a=Pn(e,r);a!==r&&this.add(a)}}}function Ot(n){return function(e){return 0===n?Yo():e.lift(new Xe(n))}}class Xe{constructor(t){if(this.total=t,this.total<0)throw new Ix}call(t,e){return e.subscribe(new Tt(t,this.total))}}class Tt extends Dt{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,r=this.total,a=this.count++;e.length<r?e.push(t):e[a%r]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const r=this.count>=this.total?this.total:this.count,a=this.ring;for(let u=0;u<r;u++){const p=e++%r;t.next(a[p])}}t.complete()}}function un(n){return t=>t.lift(new Wn(n))}class Wn{constructor(t){this.callback=t}call(t,e){return e.subscribe(new xi(t,this.callback))}}class xi extends Dt{constructor(t,e){super(t),this.add(new T(e))}}class tr{constructor(t,e){this.id=t,this.url=e}}class Sr extends tr{constructor(t,e,r="imperative",a=null){super(t,e),this.navigationTrigger=r,this.restoredState=a}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ao extends tr{constructor(t,e,r){super(t,e),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qo extends tr{constructor(t,e,r){super(t,e),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class cu extends tr{constructor(t,e,r){super(t,e),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class g0 extends tr{constructor(t,e,r,a){super(t,e),this.urlAfterRedirects=r,this.state=a}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tS extends tr{constructor(t,e,r,a){super(t,e),this.urlAfterRedirects=r,this.state=a}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nS extends tr{constructor(t,e,r,a,u){super(t,e),this.urlAfterRedirects=r,this.state=a,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class pn extends tr{constructor(t,e,r,a){super(t,e),this.urlAfterRedirects=r,this.state=a}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _i extends tr{constructor(t,e,r,a){super(t,e),this.urlAfterRedirects=r,this.state=a}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class nr{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Pt{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class du{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vr{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tc{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class nc{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class m0{constructor(t,e,r){this.routerEvent=t,this.position=e,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ci="primary";class $Z{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function yk(n){return new $Z(n)}const IY="ngNavigationCancelingError";function uU(n){const t=Error("NavigationCancelingError: "+n);return t[IY]=!0,t}function zZ(n,t,e){const r=e.path.split("/");if(r.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||r.length<n.length))return null;const a={};for(let u=0;u<r.length;u++){const p=r[u],_=n[u];if(p.startsWith(":"))a[p.substring(1)]=_;else if(p!==_.path)return null}return{consumed:n.slice(0,r.length),posParams:a}}function y0(n,t){const e=n?Object.keys(n):void 0,r=t?Object.keys(t):void 0;if(!e||!r||e.length!=r.length)return!1;let a;for(let u=0;u<e.length;u++)if(a=e[u],!RY(n[a],t[a]))return!1;return!0}function RY(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),r=[...t].sort();return e.every((a,u)=>r[u]===a)}return n===t}function NY(n){return Array.prototype.concat.apply([],n)}function PY(n){return n.length>0?n[n.length-1]:null}function Tl(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function _0(n){return gm(n)?n:Vy(n)?rn(Promise.resolve(n)):_n(n)}const WZ={exact:function VY(n,t,e){if(!rS(n.segments,t.segments)||!_V(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const r in t.children)if(!n.children[r]||!VY(n.children[r],t.children[r],e))return!1;return!0},subset:$Y},LY={exact:function(n,t){return y0(n,t)},subset:function(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>RY(n[e],t[e]))},ignored:()=>!0};function BY(n,t,e){return WZ[e.paths](n.root,t.root,e.matrixParams)&&LY[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function $Y(n,t,e){return jY(n,t,t.segments,e)}function jY(n,t,e,r){if(n.segments.length>e.length){const a=n.segments.slice(0,e.length);return!(!rS(a,e)||t.hasChildren()||!_V(a,e,r))}if(n.segments.length===e.length){if(!rS(n.segments,e)||!_V(n.segments,e,r))return!1;for(const a in t.children)if(!n.children[a]||!$Y(n.children[a],t.children[a],r))return!1;return!0}{const a=e.slice(0,n.segments.length),u=e.slice(n.segments.length);return!!(rS(n.segments,a)&&_V(n.segments,a,r)&&n.children[Ci])&&jY(n.children[Ci],t,u,r)}}function _V(n,t,e){return t.every((r,a)=>LY[e](n[a].parameters,r.parameters))}class iS{constructor(t,e,r){this.root=t,this.queryParams=e,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yk(this.queryParams)),this._queryParamMap}toString(){return KZ.serialize(this)}}class qi{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Tl(e,(r,a)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vV(this)}}class pP{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=yk(this.parameters)),this._parameterMap}toString(){return WY(this)}}function rS(n,t){return n.length===t.length&&n.every((e,r)=>e.path===t[r].path)}class sS{}class zY{parse(t){const e=new see(t);return new iS(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${`/${gP(t.root,!0)}`}${function(n){const t=Object.keys(n).map(e=>{const r=n[e];return Array.isArray(r)?r.map(a=>`${bV(e)}=${bV(a)}`).join("&"):`${bV(e)}=${bV(r)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${function(n){return encodeURI(n)}(t.fragment)}`:""}`}}const KZ=new zY;function vV(n){return n.segments.map(t=>WY(t)).join("/")}function gP(n,t){if(!n.hasChildren())return vV(n);if(t){const e=n.children[Ci]?gP(n.children[Ci],!1):"",r=[];return Tl(n.children,(a,u)=>{u!==Ci&&r.push(`${u}:${gP(a,!1)}`)}),r.length>0?`${e}(${r.join("//")})`:e}{const e=function(n,t){let e=[];return Tl(n.children,(r,a)=>{a===Ci&&(e=e.concat(t(r,a)))}),Tl(n.children,(r,a)=>{a!==Ci&&(e=e.concat(t(r,a)))}),e}(n,(r,a)=>a===Ci?[gP(n.children[Ci],!1)]:[`${a}:${gP(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ci]?`${vV(n)}/${e[0]}`:`${vV(n)}/(${e.join("//")})`}}function UY(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bV(n){return UY(n).replace(/%3B/gi,";")}function cU(n){return UY(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function CV(n){return decodeURIComponent(n)}function HY(n){return CV(n.replace(/\+/g,"%20"))}function WY(n){return`${cU(n.path)}${function(n){return Object.keys(n).map(t=>`;${cU(t)}=${cU(n[t])}`).join("")}(n.parameters)}`}const eee=/^[^\/()?;=#]+/;function wV(n){const t=n.match(eee);return t?t[0]:""}const tee=/^[^=?&#]+/,iee=/^[^?&#]+/;class see{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new qi([],{}):new qi([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(r[Ci]=new qi(t,e)),r}parseSegment(){const t=wV(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new pP(CV(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=wV(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const a=wV(this.remaining);a&&(r=a,this.capture(r))}t[CV(e)]=CV(r)}parseQueryParam(t){const e=function(n){const t=n.match(tee);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let r="";if(this.consumeOptional("=")){const p=function(n){const t=n.match(iee);return t?t[0]:""}(this.remaining);p&&(r=p,this.capture(r))}const a=HY(e),u=HY(r);if(t.hasOwnProperty(a)){let p=t[a];Array.isArray(p)||(p=[p],t[a]=p),p.push(u)}else t[a]=u}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=wV(this.remaining),a=this.remaining[r.length];if("/"!==a&&")"!==a&&";"!==a)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):t&&(u=Ci);const p=this.parseChildren();e[u]=1===Object.keys(p).length?p[Ci]:new qi([],p),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class GY{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=dU(t,this._root);return e?e.children.map(r=>r.value):[]}firstChild(t){const e=dU(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=fU(t,this._root);return e.length<2?[]:e[e.length-2].children.map(a=>a.value).filter(a=>a!==t)}pathFromRoot(t){return fU(t,this._root).map(e=>e.value)}}function dU(n,t){if(n===t.value)return t;for(const e of t.children){const r=dU(n,e);if(r)return r}return null}function fU(n,t){if(n===t.value)return[t];for(const e of t.children){const r=fU(n,e);if(r.length)return r.unshift(t),r}return[]}class Y_{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function mP(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class qY extends GY{constructor(t,e){super(t),this.snapshot=e,hU(this,t)}toString(){return this.snapshot.toString()}}function YY(n,t){const e=function(n,t){const p=new EV([],{},{},"",{},Ci,t,null,n.root,-1,{});return new KY("",new Y_(p,[]))}(n,t),r=new au([new pP("",{})]),a=new au({}),u=new au({}),p=new au({}),_=new au(""),D=new oS(r,a,p,_,u,Ci,t,e.root);return D.snapshot=e.root,new qY(new Y_(D,[]),e)}class oS{constructor(t,e,r,a,u,p,_,D){this.url=t,this.params=e,this.queryParams=r,this.fragment=a,this.data=u,this.outlet=p,this.component=_,this._futureSnapshot=D}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Pe(t=>yk(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Pe(t=>yk(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function XY(n,t="emptyOnly"){const e=n.pathFromRoot;let r=0;if("always"!==t)for(r=e.length-1;r>=1;){const a=e[r],u=e[r-1];if(a.routeConfig&&""===a.routeConfig.path)r--;else{if(u.component)break;r--}}return function(n){return n.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(r))}class EV{constructor(t,e,r,a,u,p,_,D,M,I,V){this.url=t,this.params=e,this.queryParams=r,this.fragment=a,this.data=u,this.outlet=p,this.component=_,this.routeConfig=D,this._urlSegment=M,this._lastPathIndex=I,this._resolve=V}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=yk(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yk(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class KY extends GY{constructor(t,e){super(e),this.url=t,hU(this,e)}toString(){return QY(this._root)}}function hU(n,t){t.value._routerState=n,t.children.forEach(e=>hU(n,e))}function QY(n){const t=n.children.length>0?` { ${n.children.map(QY).join(", ")} } `:"";return`${n.value}${t}`}function pU(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,y0(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),y0(t.params,e.params)||n.params.next(e.params),function(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!y0(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),y0(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function gU(n,t){return y0(n.params,t.params)&&function(n,t){return rS(n,t)&&n.every((e,r)=>y0(e.parameters,t[r].parameters))}(n.url,t.url)&&!(!n.parent!=!t.parent)&&(!n.parent||gU(n.parent,t.parent))}function DV(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const r=e.value;r._futureSnapshot=t.value;const a=function(n,t,e){return t.children.map(r=>{for(const a of e.children)if(n.shouldReuseRoute(r.value,a.value.snapshot))return DV(n,r,a);return DV(n,r)})}(n,t,e);return new Y_(r,a)}{if(n.shouldAttach(t.value)){const u=n.retrieve(t.value);if(null!==u){const p=u.route;return JY(t,p),p}}const r=function(n){return new oS(new au(n.url),new au(n.params),new au(n.queryParams),new au(n.fragment),new au(n.data),n.outlet,n.component,n)}(t.value),a=t.children.map(u=>DV(n,u));return new Y_(r,a)}}function JY(n,t){if(n.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=n.value;for(let e=0;e<n.children.length;++e)JY(n.children[e],t.children[e])}function xV(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function yP(n){return"object"==typeof n&&null!=n&&n.outlets}function mU(n,t,e,r,a){let u={};return r&&Tl(r,(p,_)=>{u[_]=Array.isArray(p)?p.map(D=>`${D}`):`${p}`}),new iS(e.root===n?t:ZY(e.root,n,t),u,a)}function ZY(n,t,e){const r={};return Tl(n.children,(a,u)=>{r[u]=a===t?e:ZY(a,t,e)}),new qi(n.segments,r)}class eX{constructor(t,e,r){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=r,t&&r.length>0&&xV(r[0]))throw new Error("Root segment cannot have matrix parameters");const a=r.find(yP);if(a&&a!==PY(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class yU{constructor(t,e,r){this.segmentGroup=t,this.processChildren=e,this.index=r}}function tX(n,t,e){if(n||(n=new qi([],{})),0===n.segments.length&&n.hasChildren())return SV(n,t,e);const r=function(n,t,e){let r=0,a=t;const u={match:!1,pathIndex:0,commandIndex:0};for(;a<n.segments.length;){if(r>=e.length)return u;const p=n.segments[a],_=e[r];if(yP(_))break;const D=`${_}`,M=r<e.length-1?e[r+1]:null;if(a>0&&void 0===D)break;if(D&&M&&"object"==typeof M&&void 0===M.outlets){if(!iX(D,M,p))return u;r+=2}else{if(!iX(D,{},p))return u;r++}a++}return{match:!0,pathIndex:a,commandIndex:r}}(n,t,e),a=e.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new qi(n.segments.slice(0,r.pathIndex),{});return u.children[Ci]=new qi(n.segments.slice(r.pathIndex),n.children),SV(u,0,a)}return r.match&&0===a.length?new qi(n.segments,{}):r.match&&!n.hasChildren()?_U(n,t,e):r.match?SV(n,0,a):_U(n,t,e)}function SV(n,t,e){if(0===e.length)return new qi(n.segments,{});{const r=function(n){return yP(n[0])?n[0].outlets:{[Ci]:n}}(e),a={};return Tl(r,(u,p)=>{"string"==typeof u&&(u=[u]),null!==u&&(a[p]=tX(n.children[p],t,u))}),Tl(n.children,(u,p)=>{void 0===r[p]&&(a[p]=u)}),new qi(n.segments,a)}}function _U(n,t,e){const r=n.segments.slice(0,t);let a=0;for(;a<e.length;){const u=e[a];if(yP(u)){const D=yee(u.outlets);return new qi(r,D)}if(0===a&&xV(e[0])){r.push(new pP(n.segments[t].path,nX(e[0]))),a++;continue}const p=yP(u)?u.outlets[Ci]:`${u}`,_=a<e.length-1?e[a+1]:null;p&&_&&xV(_)?(r.push(new pP(p,nX(_))),a+=2):(r.push(new pP(p,{})),a++)}return new qi(r,{})}function yee(n){const t={};return Tl(n,(e,r)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[r]=_U(new qi([],{}),0,e))}),t}function nX(n){const t={};return Tl(n,(e,r)=>t[r]=`${e}`),t}function iX(n,t,e){return n==e.path&&y0(t,e.parameters)}class vee{constructor(t,e,r,a){this.routeReuseStrategy=t,this.futureState=e,this.currState=r,this.forwardEvent=a}activate(t){const e=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,r,t),pU(this.futureState.root),this.activateChildRoutes(e,r,t)}deactivateChildRoutes(t,e,r){const a=mP(e);t.children.forEach(u=>{const p=u.value.outlet;this.deactivateRoutes(u,a[p],r),delete a[p]}),Tl(a,(u,p)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(t,e,r){const a=t.value,u=e?e.value:null;if(a===u)if(a.component){const p=r.getContext(a.outlet);p&&this.deactivateChildRoutes(t,e,p.children)}else this.deactivateChildRoutes(t,e,r);else u&&this.deactivateRouteAndItsChildren(e,r)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const r=e.getContext(t.value.outlet);if(r&&r.outlet){const a=r.outlet.detach(),u=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:a,route:t,contexts:u})}}deactivateRouteAndOutlet(t,e){const r=e.getContext(t.value.outlet),a=r&&t.value.component?r.children:e,u=mP(t);for(const p of Object.keys(u))this.deactivateRouteAndItsChildren(u[p],a);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(t,e,r){const a=mP(e);t.children.forEach(u=>{this.activateRoutes(u,a[u.value.outlet],r),this.forwardEvent(new nc(u.value.snapshot))}),t.children.length&&this.forwardEvent(new Vr(t.value.snapshot))}activateRoutes(t,e,r){const a=t.value,u=e?e.value:null;if(pU(a),a===u)if(a.component){const p=r.getOrCreateContext(a.outlet);this.activateChildRoutes(t,e,p.children)}else this.activateChildRoutes(t,e,r);else if(a.component){const p=r.getOrCreateContext(a.outlet);if(this.routeReuseStrategy.shouldAttach(a.snapshot)){const _=this.routeReuseStrategy.retrieve(a.snapshot);this.routeReuseStrategy.store(a.snapshot,null),p.children.onOutletReAttached(_.contexts),p.attachRef=_.componentRef,p.route=_.route.value,p.outlet&&p.outlet.attach(_.componentRef,_.route.value),rX(_.route)}else{const _=function(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(a.snapshot),D=_?_.module.componentFactoryResolver:null;p.attachRef=null,p.route=a,p.resolver=D,p.outlet&&p.outlet.activateWith(a,D),this.activateChildRoutes(t,null,p.children)}}else this.activateChildRoutes(t,null,r)}}function rX(n){pU(n.value),n.children.forEach(rX)}class vU{constructor(t,e){this.routes=t,this.module=e}}function MC(n){return"function"==typeof n}function aS(n){return n instanceof iS}const _P=Symbol("INITIAL_VALUE");function vP(){return Ga(n=>J(n.map(t=>t.pipe(so(1),qo(_P)))).pipe(Re((t,e)=>{let r=!1;return e.reduce((a,u,p)=>a!==_P?a:(u===_P&&(r=!0),r||!1!==u&&p!==e.length-1&&!aS(u)?a:u),t)},_P),Wi(t=>t!==_P),Pe(t=>aS(t)?t:!0===t),so(1)))}let sX=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Sn({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,r){1&e&&on(0,"router-outlet")},directives:function(){return[xU]},encapsulation:2}),n})();function oX(n,t=""){for(let e=0;e<n.length;e++){const r=n[e];See(r,Aee(t,r))}}function See(n,t){n.children&&oX(n.children,t)}function Aee(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function bU(n){const t=n.children&&n.children.map(bU),e=t?Object.assign(Object.assign({},n),{children:t}):Object.assign({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==Ci&&(e.component=sX),e}function Dh(n){return n.outlet||Ci}function aX(n,t){const e=n.filter(r=>Dh(r)===t);return e.push(...n.filter(r=>Dh(r)!==t)),e}const lX={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function AV(n,t,e){var r;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},lX):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const u=(t.matcher||zZ)(e,n,t);if(!u)return Object.assign({},lX);const p={};Tl(u.posParams,(D,M)=>{p[M]=D.path});const _=u.consumed.length>0?Object.assign(Object.assign({},p),u.consumed[u.consumed.length-1].parameters):p;return{matched:!0,consumedSegments:u.consumed,lastChild:u.consumed.length,parameters:_,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function MV(n,t,e,r,a="corrected"){if(e.length>0&&function(n,t,e){return e.some(r=>OV(n,t,r)&&Dh(r)!==Ci)}(n,e,r)){const p=new qi(t,function(n,t,e,r){const a={};a[Ci]=r,r._sourceSegment=n,r._segmentIndexShift=t.length;for(const u of e)if(""===u.path&&Dh(u)!==Ci){const p=new qi([],{});p._sourceSegment=n,p._segmentIndexShift=t.length,a[Dh(u)]=p}return a}(n,t,r,new qi(e,n.children)));return p._sourceSegment=n,p._segmentIndexShift=t.length,{segmentGroup:p,slicedSegments:[]}}if(0===e.length&&function(n,t,e){return e.some(r=>OV(n,t,r))}(n,e,r)){const p=new qi(n.segments,function(n,t,e,r,a,u){const p={};for(const _ of r)if(OV(n,e,_)&&!a[Dh(_)]){const D=new qi([],{});D._sourceSegment=n,D._segmentIndexShift="legacy"===u?n.segments.length:t.length,p[Dh(_)]=D}return Object.assign(Object.assign({},a),p)}(n,t,e,r,n.children,a));return p._sourceSegment=n,p._segmentIndexShift=t.length,{segmentGroup:p,slicedSegments:e}}const u=new qi(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=t.length,{segmentGroup:u,slicedSegments:e}}function OV(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function uX(n,t,e,r){return!!(Dh(n)===r||r!==Ci&&OV(t,e,n))&&("**"===n.path||AV(t,n,e).matched)}function cX(n,t,e){return 0===t.length&&!n.children[e]}class bP{constructor(t){this.segmentGroup=t||null}}class dX{constructor(t){this.urlTree=t}}function TV(n){return new ae(t=>t.error(new bP(n)))}function fX(n){return new ae(t=>t.error(new dX(n)))}function Fee(n){return new ae(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class Nee{constructor(t,e,r,a,u){this.configLoader=e,this.urlSerializer=r,this.urlTree=a,this.config=u,this.allowRedirects=!0,this.ngModule=t.get(kn)}apply(){const t=MV(this.urlTree.root,[],[],this.config).segmentGroup,e=new qi(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Ci).pipe(Pe(u=>this.createUrlTree(CU(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Oe(u=>{if(u instanceof dX)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof bP?this.noMatchError(u):u}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Ci).pipe(Pe(a=>this.createUrlTree(CU(a),t.queryParams,t.fragment))).pipe(Oe(a=>{throw a instanceof bP?this.noMatchError(a):a}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,r){const a=t.segments.length>0?new qi([],{[Ci]:t}):t;return new iS(a,e,r)}expandSegmentGroup(t,e,r,a){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(t,e,r).pipe(Pe(u=>new qi([],u))):this.expandSegment(t,r,e,r.segments,a,!0)}expandChildren(t,e,r){const a=[];for(const u of Object.keys(r.children))"primary"===u?a.unshift(u):a.push(u);return rn(a).pipe(J1(u=>{const p=r.children[u],_=aX(e,u);return this.expandSegmentGroup(t,_,p,u).pipe(Pe(D=>({segment:D,outlet:u})))}),Re((u,p)=>(u[p.outlet]=p.segment,u),{}),function(n,t){const e=arguments.length>=2;return r=>r.pipe(n?Wi((a,u)=>n(a,u,r)):Lt,Ot(1),e?mk(t):yV(()=>new gk))}())}expandSegment(t,e,r,a,u,p){return rn(r).pipe(J1(_=>this.expandSegmentAgainstRoute(t,e,r,_,a,u,p).pipe(Oe(M=>{if(M instanceof bP)return _n(null);throw M}))),s(_=>!!_),Oe((_,D)=>{if(_ instanceof gk||"EmptyError"===_.name){if(cX(e,a,u))return _n(new qi([],{}));throw new bP(e)}throw _}))}expandSegmentAgainstRoute(t,e,r,a,u,p,_){return uX(a,e,u,p)?void 0===a.redirectTo?this.matchSegmentAgainstRoute(t,e,a,u,p):_&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,r,a,u,p):TV(e):TV(e)}expandSegmentAgainstRouteUsingRedirect(t,e,r,a,u,p){return"**"===a.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,r,a,p):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,a,u,p)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,r,a){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?fX(u):this.lineralizeSegments(r,u).pipe(Kn(p=>{const _=new qi(p,{});return this.expandSegment(t,_,e,p,a,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,r,a,u,p){const{matched:_,consumedSegments:D,lastChild:M,positionalParamSegments:I}=AV(e,a,u);if(!_)return TV(e);const V=this.applyRedirectCommands(D,a.redirectTo,I);return a.redirectTo.startsWith("/")?fX(V):this.lineralizeSegments(a,V).pipe(Kn(j=>this.expandSegment(t,e,r,j.concat(u.slice(M)),p,!1)))}matchSegmentAgainstRoute(t,e,r,a,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?_n(r._loadedConfig):this.configLoader.load(t.injector,r)).pipe(Pe(j=>(r._loadedConfig=j,new qi(a,{})))):_n(new qi(a,{}));const{matched:p,consumedSegments:_,lastChild:D}=AV(e,r,a);if(!p)return TV(e);const M=a.slice(D);return this.getChildConfig(t,r,a).pipe(Kn(V=>{const j=V.module,G=V.routes,{segmentGroup:Z,slicedSegments:ye}=MV(e,_,M,G),be=new qi(Z.segments,Z.children);if(0===ye.length&&be.hasChildren())return this.expandChildren(j,G,be).pipe(Pe(Wt=>new qi(_,Wt)));if(0===G.length&&0===ye.length)return _n(new qi(_,{}));const Ye=Dh(r)===u;return this.expandSegment(j,be,G,ye,Ye?Ci:u,!0).pipe(Pe(Et=>new qi(_.concat(Et.segments),Et.children)))}))}getChildConfig(t,e,r){return e.children?_n(new vU(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?_n(e._loadedConfig):this.runCanLoadGuards(t.injector,e,r).pipe(Kn(a=>a?this.configLoader.load(t.injector,e).pipe(Pe(u=>(e._loadedConfig=u,u))):function(n){return new ae(t=>t.error(uU(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(e))):_n(new vU([],t))}runCanLoadGuards(t,e,r){const a=e.canLoad;return a&&0!==a.length?_n(a.map(p=>{const _=t.get(p);let D;if(function(n){return n&&MC(n.canLoad)}(_))D=_.canLoad(e,r);else{if(!MC(_))throw new Error("Invalid CanLoad guard");D=_(e,r)}return _0(D)})).pipe(vP(),Ss(p=>{if(!aS(p))return;const _=uU(`Redirecting to "${this.urlSerializer.serialize(p)}"`);throw _.url=p,_}),Pe(p=>!0===p)):_n(!0)}lineralizeSegments(t,e){let r=[],a=e.root;for(;;){if(r=r.concat(a.segments),0===a.numberOfChildren)return _n(r);if(a.numberOfChildren>1||!a.children[Ci])return Fee(t.redirectTo);a=a.children[Ci]}}applyRedirectCommands(t,e,r){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,r)}applyRedirectCreatreUrlTree(t,e,r,a){const u=this.createSegmentGroup(t,e.root,r,a);return new iS(u,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const r={};return Tl(t,(a,u)=>{if("string"==typeof a&&a.startsWith(":")){const _=a.substring(1);r[u]=e[_]}else r[u]=a}),r}createSegmentGroup(t,e,r,a){const u=this.createSegments(t,e.segments,r,a);let p={};return Tl(e.children,(_,D)=>{p[D]=this.createSegmentGroup(t,_,r,a)}),new qi(u,p)}createSegments(t,e,r,a){return e.map(u=>u.path.startsWith(":")?this.findPosParam(t,u,a):this.findOrReturn(u,r))}findPosParam(t,e,r){const a=r[e.path.substring(1)];if(!a)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return a}findOrReturn(t,e){let r=0;for(const a of e){if(a.path===t.path)return e.splice(r),a;r++}return t}}function CU(n){const t={};for(const r of Object.keys(n.children)){const u=CU(n.children[r]);(u.segments.length>0||u.hasChildren())&&(t[r]=u)}return function(n){if(1===n.numberOfChildren&&n.children[Ci]){const t=n.children[Ci];return new qi(n.segments.concat(t.segments),t.children)}return n}(new qi(n.segments,t))}class hX{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class kV{constructor(t,e){this.component=t,this.route=e}}function Bee(n,t,e){const r=n._root;return CP(r,t?t._root:null,e,[r.value])}function FV(n,t,e){const r=function(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:e).get(n)}function CP(n,t,e,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const u=mP(t);return n.children.forEach(p=>{(function(n,t,e,r,a={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,p=t?t.value:null,_=e?e.getContext(n.value.outlet):null;if(p&&u.routeConfig===p.routeConfig){const D=function(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!rS(n.url,t.url);case"pathParamsOrQueryParamsChange":return!rS(n.url,t.url)||!y0(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!gU(n,t)||!y0(n.queryParams,t.queryParams);case"paramsChange":default:return!gU(n,t)}}(p,u,u.routeConfig.runGuardsAndResolvers);D?a.canActivateChecks.push(new hX(r)):(u.data=p.data,u._resolvedData=p._resolvedData),CP(n,t,u.component?_?_.children:null:e,r,a),D&&_&&_.outlet&&_.outlet.isActivated&&a.canDeactivateChecks.push(new kV(_.outlet.component,p))}else p&&wP(t,_,a),a.canActivateChecks.push(new hX(r)),CP(n,null,u.component?_?_.children:null:e,r,a)})(p,u[p.value.outlet],e,r.concat([p.value]),a),delete u[p.value.outlet]}),Tl(u,(p,_)=>wP(p,e.getContext(_),a)),a}function wP(n,t,e){const r=mP(n),a=n.value;Tl(r,(u,p)=>{wP(u,a.component?t?t.children.getContext(p):null:t,e)}),e.canDeactivateChecks.push(new kV(a.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,a))}class Qee{}function pX(n){return new ae(t=>t.error(n))}class Zee{constructor(t,e,r,a,u,p){this.rootComponentType=t,this.config=e,this.urlTree=r,this.url=a,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=p}recognize(){const t=MV(this.urlTree.root,[],[],this.config.filter(p=>void 0===p.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Ci);if(null===e)return null;const r=new EV([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ci,this.rootComponentType,null,this.urlTree.root,-1,{}),a=new Y_(r,e),u=new KY(this.url,a);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(t){const e=t.value,r=XY(e,this.paramsInheritanceStrategy);e.params=Object.freeze(r.params),e.data=Object.freeze(r.data),t.children.forEach(a=>this.inheritParamsAndData(a))}processSegmentGroup(t,e,r){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,r)}processChildren(t,e){const r=[];for(const u of Object.keys(e.children)){const p=e.children[u],_=aX(t,u),D=this.processSegmentGroup(_,p,u);if(null===D)return null;r.push(...D)}const a=gX(r);return function(n){n.sort((t,e)=>t.value.outlet===Ci?-1:e.value.outlet===Ci?1:t.value.outlet.localeCompare(e.value.outlet))}(a),a}processSegment(t,e,r,a){for(const u of t){const p=this.processSegmentAgainstRoute(u,e,r,a);if(null!==p)return p}return cX(e,r,a)?[]:null}processSegmentAgainstRoute(t,e,r,a){if(t.redirectTo||!uX(t,e,r,a))return null;let u,p=[],_=[];if("**"===t.path){const G=r.length>0?PY(r).parameters:{};u=new EV(r,G,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,_X(t),Dh(t),t.component,t,mX(e),yX(e)+r.length,vX(t))}else{const G=AV(e,t,r);if(!G.matched)return null;p=G.consumedSegments,_=r.slice(G.lastChild),u=new EV(p,G.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,_X(t),Dh(t),t.component,t,mX(e),yX(e)+p.length,vX(t))}const D=function(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(t),{segmentGroup:M,slicedSegments:I}=MV(e,p,_,D.filter(G=>void 0===G.redirectTo),this.relativeLinkResolution);if(0===I.length&&M.hasChildren()){const G=this.processChildren(D,M);return null===G?null:[new Y_(u,G)]}if(0===D.length&&0===I.length)return[new Y_(u,[])];const V=Dh(t)===a,j=this.processSegment(D,M,I,V?Ci:a);return null===j?null:[new Y_(u,j)]}}function nte(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function gX(n){const t=[],e=new Set;for(const r of n){if(!nte(r)){t.push(r);continue}const a=t.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==a?(a.children.push(...r.children),e.add(a)):t.push(r)}for(const r of e){const a=gX(r.children);t.push(new Y_(r.value,a))}return t.filter(r=>!e.has(r))}function mX(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function yX(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function _X(n){return n.data||{}}function vX(n){return n.resolve||{}}function wU(n){return Ga(t=>{const e=n(t);return e?rn(e).pipe(Pe(()=>t)):_n(t)})}class cte extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const EU=new Ft("ROUTES");class bX{constructor(t,e,r,a){this.loader=t,this.compiler=e,this.onLoadStartListener=r,this.onLoadEndListener=a}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const a=this.loadModuleFactory(e.loadChildren).pipe(Pe(u=>{this.onLoadEndListener&&this.onLoadEndListener(e);const p=u.create(t);return new vU(NY(p.injector.get(EU,void 0,xn.Self|xn.Optional)).map(bU),p)}),Oe(u=>{throw e._loader$=void 0,u}));return e._loader$=new Zn(a,()=>new We).pipe(gs()),e._loader$}loadModuleFactory(t){return"string"==typeof t?rn(this.loader.load(t)):_0(t()).pipe(Kn(e=>e instanceof Bn?_n(e):rn(this.compiler.compileModuleAsync(e))))}}class dte{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new _k,this.attachRef=null}}class _k{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const r=this.getOrCreateContext(t);r.outlet=e,this.contexts.set(t,r)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new dte,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class hte{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function pte(n){throw n}function gte(n,t,e){return t.parse("/")}function CX(n,t){return _n(null)}const mte={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},yte={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ma=(()=>{class n{constructor(e,r,a,u,p,_,D,M){this.rootComponentType=e,this.urlSerializer=r,this.rootContexts=a,this.location=u,this.config=M,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new We,this.errorHandler=pte,this.malformedUriErrorHandler=gte,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:CX,afterPreactivation:CX},this.urlHandlingStrategy=new hte,this.routeReuseStrategy=new cte,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=p.get(kn),this.console=p.get(QD);const j=p.get(On);this.isNgZoneEnabled=j instanceof On&&On.isInAngularZone(),this.resetConfig(M),this.currentUrlTree=new iS(new qi([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new bX(_,D,G=>this.triggerEvent(new nr(G)),G=>this.triggerEvent(new Pt(G))),this.routerState=YY(this.currentUrlTree,this.rootComponentType),this.transitions=new au({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const r=this.events;return e.pipe(Wi(a=>0!==a.id),Pe(a=>Object.assign(Object.assign({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),Ga(a=>{let u=!1,p=!1;return _n(a).pipe(Ss(_=>{this.currentNavigation={id:_.id,initialUrl:_.currentRawUrl,extractedUrl:_.extractedUrl,trigger:_.source,extras:_.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Ga(_=>{const D=this.browserUrlTree.toString(),M=!this.navigated||_.extractedUrl.toString()!==D||D!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||M)&&this.urlHandlingStrategy.shouldProcessUrl(_.rawUrl))return IV(_.source)&&(this.browserUrlTree=_.extractedUrl),_n(_).pipe(Ga(V=>{const j=this.transitions.getValue();return r.next(new Sr(V.id,this.serializeUrl(V.extractedUrl),V.source,V.restoredState)),j!==this.transitions.getValue()?rf:Promise.resolve(V)}),function(n,t,e,r){return Ga(a=>function(n,t,e,r,a){return new Nee(n,t,e,r,a).apply()}(n,t,e,a.extractedUrl,r).pipe(Pe(u=>Object.assign(Object.assign({},a),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Ss(V=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:V.urlAfterRedirects})}),function(n,t,e,r,a){return Kn(u=>function(n,t,e,r,a="emptyOnly",u="legacy"){try{const p=new Zee(n,t,e,r,a,u).recognize();return null===p?pX(new Qee):_n(p)}catch(p){return pX(p)}}(n,t,u.urlAfterRedirects,e(u.urlAfterRedirects),r,a).pipe(Pe(p=>Object.assign(Object.assign({},u),{targetSnapshot:p}))))}(this.rootComponentType,this.config,V=>this.serializeUrl(V),this.paramsInheritanceStrategy,this.relativeLinkResolution),Ss(V=>{"eager"===this.urlUpdateStrategy&&(V.extras.skipLocationChange||this.setBrowserUrl(V.urlAfterRedirects,V),this.browserUrlTree=V.urlAfterRedirects);const j=new g0(V.id,this.serializeUrl(V.extractedUrl),this.serializeUrl(V.urlAfterRedirects),V.targetSnapshot);r.next(j)}));if(M&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:j,extractedUrl:G,source:Z,restoredState:ye,extras:be}=_,Ye=new Sr(j,this.serializeUrl(G),Z,ye);r.next(Ye);const je=YY(G,this.rootComponentType).snapshot;return _n(Object.assign(Object.assign({},_),{targetSnapshot:je,urlAfterRedirects:G,extras:Object.assign(Object.assign({},be),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=_.rawUrl,this.browserUrlTree=_.urlAfterRedirects,_.resolve(null),rf}),wU(_=>{const{targetSnapshot:D,id:M,extractedUrl:I,rawUrl:V,extras:{skipLocationChange:j,replaceUrl:G}}=_;return this.hooks.beforePreactivation(D,{navigationId:M,appliedUrlTree:I,rawUrlTree:V,skipLocationChange:!!j,replaceUrl:!!G})}),Ss(_=>{const D=new tS(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(D)}),Pe(_=>Object.assign(Object.assign({},_),{guards:Bee(_.targetSnapshot,_.currentSnapshot,this.rootContexts)})),function(n,t){return Kn(e=>{const{targetSnapshot:r,currentSnapshot:a,guards:{canActivateChecks:u,canDeactivateChecks:p}}=e;return 0===p.length&&0===u.length?_n(Object.assign(Object.assign({},e),{guardsResult:!0})):function(n,t,e,r){return rn(n).pipe(Kn(a=>function(n,t,e,r,a){const u=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return u&&0!==u.length?_n(u.map(_=>{const D=FV(_,t,a);let M;if(function(n){return n&&MC(n.canDeactivate)}(D))M=_0(D.canDeactivate(n,t,e,r));else{if(!MC(D))throw new Error("Invalid CanDeactivate guard");M=_0(D(n,t,e,r))}return M.pipe(s())})).pipe(vP()):_n(!0)}(a.component,a.route,e,t,r)),s(a=>!0!==a,!0))}(p,r,a,n).pipe(Kn(_=>_&&function(n){return"boolean"==typeof n}(_)?function(n,t,e,r){return rn(t).pipe(J1(a=>N_(function(n,t){return null!==n&&t&&t(new du(n)),_n(!0)}(a.route.parent,r),function(n,t){return null!==n&&t&&t(new tc(n)),_n(!0)}(a.route,r),function(n,t,e){const r=t[t.length-1],u=t.slice(0,t.length-1).reverse().map(p=>function(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(p)).filter(p=>null!==p).map(p=>te(()=>_n(p.guards.map(D=>{const M=FV(D,p.node,e);let I;if(function(n){return n&&MC(n.canActivateChild)}(M))I=_0(M.canActivateChild(r,n));else{if(!MC(M))throw new Error("Invalid CanActivateChild guard");I=_0(M(r,n))}return I.pipe(s())})).pipe(vP())));return _n(u).pipe(vP())}(n,a.path,e),function(n,t,e){const r=t.routeConfig?t.routeConfig.canActivate:null;return r&&0!==r.length?_n(r.map(u=>te(()=>{const p=FV(u,t,e);let _;if(function(n){return n&&MC(n.canActivate)}(p))_=_0(p.canActivate(t,n));else{if(!MC(p))throw new Error("Invalid CanActivate guard");_=_0(p(t,n))}return _.pipe(s())}))).pipe(vP()):_n(!0)}(n,a.route,e))),s(a=>!0!==a,!0))}(r,u,n,t):_n(_)),Pe(_=>Object.assign(Object.assign({},e),{guardsResult:_})))})}(this.ngModule.injector,_=>this.triggerEvent(_)),Ss(_=>{if(aS(_.guardsResult)){const M=uU(`Redirecting to "${this.serializeUrl(_.guardsResult)}"`);throw M.url=_.guardsResult,M}const D=new nS(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot,!!_.guardsResult);this.triggerEvent(D)}),Wi(_=>!!_.guardsResult||(this.restoreHistory(_),this.cancelNavigationTransition(_,""),!1)),wU(_=>{if(_.guards.canActivateChecks.length)return _n(_).pipe(Ss(D=>{const M=new pn(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);this.triggerEvent(M)}),Ga(D=>{let M=!1;return _n(D).pipe(function(n,t){return Kn(e=>{const{targetSnapshot:r,guards:{canActivateChecks:a}}=e;if(!a.length)return _n(e);let u=0;return rn(a).pipe(J1(p=>function(n,t,e,r){return function(n,t,e,r){const a=Object.keys(n);if(0===a.length)return _n({});const u={};return rn(a).pipe(Kn(p=>function(n,t,e,r){const a=FV(n,t,r);return _0(a.resolve?a.resolve(t,e):a(t,e))}(n[p],t,e,r).pipe(Ss(_=>{u[p]=_}))),Ot(1),Kn(()=>Object.keys(u).length===a.length?_n(u):rf))}(n._resolve,n,t,r).pipe(Pe(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),XY(n,e).resolve),null)))}(p.route,r,n,t)),Ss(()=>u++),Ot(1),Kn(p=>u===a.length?_n(e):rf))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Ss({next:()=>M=!0,complete:()=>{M||(this.restoreHistory(D),this.cancelNavigationTransition(D,"At least one route resolver didn't emit any value."))}}))}),Ss(D=>{const M=new _i(D.id,this.serializeUrl(D.extractedUrl),this.serializeUrl(D.urlAfterRedirects),D.targetSnapshot);this.triggerEvent(M)}))}),wU(_=>{const{targetSnapshot:D,id:M,extractedUrl:I,rawUrl:V,extras:{skipLocationChange:j,replaceUrl:G}}=_;return this.hooks.afterPreactivation(D,{navigationId:M,appliedUrlTree:I,rawUrlTree:V,skipLocationChange:!!j,replaceUrl:!!G})}),Pe(_=>{const D=function(n,t,e){const r=DV(n,t._root,e?e._root:void 0);return new qY(r,t)}(this.routeReuseStrategy,_.targetSnapshot,_.currentRouterState);return Object.assign(Object.assign({},_),{targetRouterState:D})}),Ss(_=>{this.currentUrlTree=_.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(_.urlAfterRedirects,_.rawUrl),this.routerState=_.targetRouterState,"deferred"===this.urlUpdateStrategy&&(_.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,_),this.browserUrlTree=_.urlAfterRedirects)}),((n,t,e)=>Pe(r=>(new vee(t,r.targetRouterState,r.currentRouterState,e).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,_=>this.triggerEvent(_)),Ss({next(){u=!0},complete(){u=!0}}),un(()=>{if(!u&&!p){const _=`Navigation ID ${a.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(a),this.cancelNavigationTransition(a,_)):this.cancelNavigationTransition(a,_)}this.currentNavigation=null}),Oe(_=>{if(p=!0,function(n){return n&&n[IY]}(_)){const D=aS(_.url);D||(this.navigated=!0,this.restoreHistory(a,!0));const M=new Qo(a.id,this.serializeUrl(a.extractedUrl),_.message);r.next(M),D?setTimeout(()=>{const I=this.urlHandlingStrategy.merge(_.url,this.rawUrlTree),V={skipLocationChange:a.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||IV(a.source)};this.scheduleNavigation(I,"imperative",null,V,{resolve:a.resolve,reject:a.reject,promise:a.promise})},0):a.resolve(!1)}else{this.restoreHistory(a,!0);const D=new cu(a.id,this.serializeUrl(a.extractedUrl),_);r.next(D);try{a.resolve(this.errorHandler(_))}catch(M){a.reject(M)}}return rf}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const r=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:a,state:u,urlTree:p}=r,_={replaceUrl:!0};if(u){const D=Object.assign({},u);delete D.navigationId,delete D.\u0275routerPageId,0!==Object.keys(D).length&&(_.state=D)}this.scheduleNavigation(p,a,u,_)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(e){var r;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,r){if(!e)return!0;const a=r.urlTree.toString()===e.urlTree.toString();return r.transitionId!==e.transitionId||!a||!("hashchange"===r.source&&"popstate"===e.source||"popstate"===r.source&&"hashchange"===e.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){oX(e),this.config=e.map(bU),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,r={}){const{relativeTo:a,queryParams:u,fragment:p,queryParamsHandling:_,preserveFragment:D}=r,M=a||this.routerState.root,I=D?this.currentUrlTree.fragment:p;let V=null;switch(_){case"merge":V=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":V=this.currentUrlTree.queryParams;break;default:V=u||null}return null!==V&&(V=this.removeEmptyProps(V)),function(n,t,e,r,a){if(0===e.length)return mU(t.root,t.root,t,r,a);const u=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new eX(!0,0,n);let t=0,e=!1;const r=n.reduce((a,u,p)=>{if("object"==typeof u&&null!=u){if(u.outlets){const _={};return Tl(u.outlets,(D,M)=>{_[M]="string"==typeof D?D.split("/"):D}),[...a,{outlets:_}]}if(u.segmentPath)return[...a,u.segmentPath]}return"string"!=typeof u?[...a,u]:0===p?(u.split("/").forEach((_,D)=>{0==D&&"."===_||(0==D&&""===_?e=!0:".."===_?t++:""!=_&&a.push(_))}),a):[...a,u]},[]);return new eX(e,t,r)}(e);if(u.toRoot())return mU(t.root,new qi([],{}),t,r,a);const p=function(n,t,e){if(n.isAbsolute)return new yU(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const u=e.snapshot._urlSegment;return new yU(u,u===t.root,0)}const r=xV(n.commands[0])?0:1;return function(n,t,e){let r=n,a=t,u=e;for(;u>a;){if(u-=a,r=r.parent,!r)throw new Error("Invalid number of '../'");a=r.segments.length}return new yU(r,!1,a-u)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,t,n),_=p.processChildren?SV(p.segmentGroup,p.index,u.commands):tX(p.segmentGroup,p.index,u.commands);return mU(p.segmentGroup,_,t,r,a)}(M,this.currentUrlTree,e,V,null!=I?I:null)}navigateByUrl(e,r={skipLocationChange:!1}){const a=aS(e)?e:this.parseUrl(e),u=this.urlHandlingStrategy.merge(a,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(e,r={skipLocationChange:!1}){return function(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,r),r)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let r;try{r=this.urlSerializer.parse(e)}catch(a){r=this.malformedUriErrorHandler(a,this.urlSerializer,e)}return r}isActive(e,r){let a;if(a=!0===r?Object.assign({},mte):!1===r?Object.assign({},yte):r,aS(e))return BY(this.currentUrlTree,e,a);const u=this.parseUrl(e);return BY(this.currentUrlTree,u,a)}removeEmptyProps(e){return Object.keys(e).reduce((r,a)=>{const u=e[a];return null!=u&&(r[a]=u),r},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new ao(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,r,a,u,p){var _,D;if(this.disposed)return Promise.resolve(!1);const M=this.getTransition(),I=IV(r)&&M&&!IV(M.source),G=(this.lastSuccessfulId===M.id||this.currentNavigation?M.rawUrl:M.urlAfterRedirects).toString()===e.toString();if(I&&G)return Promise.resolve(!0);let Z,ye,be;p?(Z=p.resolve,ye=p.reject,be=p.promise):be=new Promise((Et,Wt)=>{Z=Et,ye=Wt});const Ye=++this.navigationId;let je;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(a=this.location.getState()),je=a&&a.\u0275routerPageId?a.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(_=this.browserPageId)&&void 0!==_?_:0:(null!==(D=this.browserPageId)&&void 0!==D?D:0)+1):je=0,this.setTransition({id:Ye,targetPageId:je,source:r,restoredState:a,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:u,resolve:Z,reject:ye,promise:be,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),be.catch(Et=>Promise.reject(Et))}setBrowserUrl(e,r){const a=this.urlSerializer.serialize(e),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(a)||r.extras.replaceUrl?this.location.replaceState(a,"",u):this.location.go(a,"",u)}restoreHistory(e,r=!1){var a,u;if("computed"===this.canceledNavigationResolution){const p=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)||0===p?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===p&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(p)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,r){const a=new Qo(e.id,this.serializeUrl(e.extractedUrl),r);this.triggerEvent(a),e.resolve(!1)}generateNgRouterState(e,r){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:r}:{navigationId:e}}}return n.\u0275fac=function(e){return new(e||n)(se(qh),se(sS),se(_k),se(Jd),se(ai),se(m_),se(g_),se(void 0))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();function IV(n){return"imperative"!==n}let DU=(()=>{class n{constructor(e,r,a,u,p){this.router=e,this.route=r,this.commands=[],this.onChanges=new We,null==a&&u.setAttribute(p.nativeElement,"tabindex","0")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}onClick(){const e={skipLocationChange:vk(this.skipLocationChange),replaceUrl:vk(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:vk(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(ue(ma),ue(oS),pd("tabindex"),ue(Ra),ue(Mn))},n.\u0275dir=kt({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,r){1&e&&Cn("click",function(){return r.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[or]}),n})(),RV=(()=>{class n{constructor(e,r,a){this.router=e,this.route=r,this.locationStrategy=a,this.commands=[],this.onChanges=new We,this.subscription=e.events.subscribe(u=>{u instanceof ao&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,r,a,u,p){if(0!==e||r||a||u||p||"string"==typeof this.target&&"_self"!=this.target)return!0;const _={skipLocationChange:vk(this.skipLocationChange),replaceUrl:vk(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,_),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:vk(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(ue(ma),ue(oS),ue(gh))},n.\u0275dir=kt({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,r){1&e&&Cn("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&e&&(_l("href",r.href,Rg),mi("target",r.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[or]}),n})();function vk(n){return""===n||!!n}let wX=(()=>{class n{constructor(e,r,a,u,p,_){this.router=e,this.element=r,this.renderer=a,this.cdr=u,this.link=p,this.linkWithHref=_,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=e.events.subscribe(D=>{D instanceof ao&&this.update()})}ngAfterContentInit(){_n(this.links.changes,this.linksWithHrefs.changes,_n(null)).pipe(Ki()).subscribe(e=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var e;null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(a=>!!a).map(a=>a.onChanges);this.linkInputChangesSubscription=rn(r).pipe(Ki()).subscribe(a=>{this.isActive!==this.isLinkActive(this.router)(a)&&this.update()})}set routerLinkActive(e){const r=Array.isArray(e)?e:e.split(" ");this.classes=r.filter(a=>!!a)}ngOnChanges(e){this.update()}ngOnDestroy(){var e;this.routerEventsSubscription.unsubscribe(),null===(e=this.linkInputChangesSubscription)||void 0===e||e.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const e=this.hasActiveLinks();this.isActive!==e&&(this.isActive=e,this.cdr.markForCheck(),this.classes.forEach(r=>{e?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}))})}isLinkActive(e){const r=function(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return a=>e.isActive(a.urlTree,r)}hasActiveLinks(){const e=this.isLinkActive(this.router);return this.link&&e(this.link)||this.linkWithHref&&e(this.linkWithHref)||this.links.some(e)||this.linksWithHrefs.some(e)}}return n.\u0275fac=function(e){return new(e||n)(ue(ma),ue(Mn),ue(Ra),ue(F),ue(DU,8),ue(RV,8))},n.\u0275dir=kt({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(e,r,a){if(1&e&&(bs(a,DU,5),bs(a,RV,5)),2&e){let u;Pi(u=Li())&&(r.links=u),Pi(u=Li())&&(r.linksWithHrefs=u)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[or]}),n})(),xU=(()=>{class n{constructor(e,r,a,u,p){this.parentContexts=e,this.location=r,this.resolver=a,this.changeDetector=p,this.activated=null,this._activatedRoute=null,this.activateEvents=new Vn,this.deactivateEvents=new Vn,this.name=u||Ci,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,r){this.activated=e,this._activatedRoute=r,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const p=(r=r||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),_=this.parentContexts.getOrCreateContext(this.name).children,D=new bte(e,_,this.location.injector);this.activated=this.location.createComponent(p,this.location.length,D),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(ue(_k),ue(Ui),ue(Lu),pd("name"),ue(F))},n.\u0275dir=kt({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class bte{constructor(t,e,r){this.route=t,this.childContexts=e,this.parent=r}get(t,e){return t===oS?this.route:t===_k?this.childContexts:this.parent.get(t,e)}}class EX{}class DX{preload(t,e){return _n(null)}}let xX=(()=>{class n{constructor(e,r,a,u,p){this.router=e,this.injector=u,this.preloadingStrategy=p,this.loader=new bX(r,a,M=>e.triggerEvent(new nr(M)),M=>e.triggerEvent(new Pt(M)))}setUpPreloading(){this.subscription=this.router.events.pipe(Wi(e=>e instanceof ao),J1(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(kn);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,r){const a=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const p=u._loadedConfig;a.push(this.processRoutes(p.module,p.routes))}else u.loadChildren&&!u.canLoad?a.push(this.preloadConfig(e,u)):u.children&&a.push(this.processRoutes(e,u.children));return rn(a).pipe(Ki(),Pe(u=>{}))}preloadConfig(e,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?_n(r._loadedConfig):this.loader.load(e.injector,r)).pipe(Kn(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(se(ma),se(m_),se(g_),se(ai),se(EX))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})(),SU=(()=>{class n{constructor(e,r,a={}){this.router=e,this.viewportScroller=r,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Sr?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof ao&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof m0&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,r){this.router.triggerEvent(new m0(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(se(ma),se(eT),se(void 0))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();const lS=new Ft("ROUTER_CONFIGURATION"),SX=new Ft("ROUTER_FORROOT_GUARD"),wte=[Jd,{provide:sS,useClass:zY},{provide:ma,useFactory:function(n,t,e,r,a,u,p,_={},D,M){const I=new ma(null,n,t,e,r,a,u,NY(p));return D&&(I.urlHandlingStrategy=D),M&&(I.routeReuseStrategy=M),function(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy)}(_,I),_.enableTracing&&I.events.subscribe(V=>{var j,G;null===(j=console.group)||void 0===j||j.call(console,`Router Event: ${V.constructor.name}`),console.log(V.toString()),console.log(V),null===(G=console.groupEnd)||void 0===G||G.call(console)}),I},deps:[sS,_k,Jd,ai,m_,g_,EU,lS,[class{},new lr],[class{},new lr]]},_k,{provide:oS,useFactory:function(n){return n.routerState.root},deps:[ma]},{provide:m_,useClass:i4},xX,DX,class{preload(t,e){return e().pipe(Oe(()=>_n(null)))}},{provide:lS,useValue:{enableTracing:!1}}];function Ete(){return new vO("Router",ma)}let ic=(()=>{class n{constructor(e,r){}static forRoot(e,r){return{ngModule:n,providers:[wte,AX(e),{provide:SX,useFactory:Ste,deps:[[ma,new lr,new wu]]},{provide:lS,useValue:r||{}},{provide:gh,useFactory:xte,deps:[w_,[new _d(nR),new lr],lS]},{provide:SU,useFactory:Dte,deps:[ma,eT,lS]},{provide:EX,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:DX},{provide:vO,multi:!0,useFactory:Ete},[AU,{provide:h_,multi:!0,useFactory:Tte,deps:[AU]},{provide:MX,useFactory:kte,deps:[AU]},{provide:KD,multi:!0,useExisting:MX}]]}}static forChild(e){return{ngModule:n,providers:[AX(e)]}}}return n.\u0275fac=function(e){return new(e||n)(se(SX,8),se(ma,8))},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({}),n})();function Dte(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new SU(n,t,e)}function xte(n,t,e={}){return e.useHash?new U4(n,t):new pB(n,t)}function Ste(n){return"guarded"}function AX(n){return[{provide:aF,multi:!0,useValue:n},{provide:EU,multi:!0,useValue:n}]}let AU=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new We}appInitializer(){return this.injector.get(eR,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const a=new Promise(_=>r=_),u=this.injector.get(ma),p=this.injector.get(lS);return"disabled"===p.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===p.initialNavigation||"enabledBlocking"===p.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?_n(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),a})}bootstrapListener(e){const r=this.injector.get(lS),a=this.injector.get(xX),u=this.injector.get(SU),p=this.injector.get(ma),_=this.injector.get(Hm);e===_.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&p.initialNavigation(),a.setUpPreloading(),u.init(),p.resetRootComponentType(_.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(se(ai))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();function Tte(n){return n.appInitializer.bind(n)}function kte(n){return n.bootstrapListener.bind(n)}const MX=new Ft("Router Initializer");let Ite=0;const MU=new Ft("CdkAccordion");let Rte=(()=>{class n{constructor(){this._stateChanges=new We,this._openCloseAllActions=new We,this.id="cdk-accordion-"+Ite++,this._multi=!1}get multi(){return this._multi}set multi(e){this._multi=yr(e)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(e){this._stateChanges.next(e)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=kt({type:n,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[Yn([{provide:MU,useExisting:n}]),or]}),n})(),Nte=0,Lte=(()=>{class n{constructor(e,r,a){this.accordion=e,this._changeDetectorRef=r,this._expansionDispatcher=a,this._openCloseAllSubscription=T.EMPTY,this.closed=new Vn,this.opened=new Vn,this.destroyed=new Vn,this.expandedChange=new Vn,this.id="cdk-accordion-child-"+Nte++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=a.listen((u,p)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===p&&this.id!==u&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(e){e=yr(e),this._expanded!==e&&(this._expanded=e,this.expandedChange.emit(e),e?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){this._disabled=yr(e)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}}return n.\u0275fac=function(e){return new(e||n)(ue(MU,12),ue(F),ue(x5))},n.\u0275dir=kt({type:n,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[Yn([{provide:MU,useValue:void 0}])]}),n})(),Bte=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({}),n})();class OU{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class TU extends OU{constructor(t,e,r,a){super(),this.component=t,this.viewContainerRef=e,this.injector=r,this.componentFactoryResolver=a}}class EP extends OU{constructor(t,e,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class Vte extends OU{constructor(t){super(),this.element=t instanceof Mn?t.nativeElement:t}}class kU{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof TU?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof EP?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof Vte?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class $te extends kU{constructor(t,e,r,a,u){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=r,this._defaultInjector=a,this.attachDomPortal=p=>{const _=p.element,D=this._document.createComment("dom-portal");_.parentNode.insertBefore(D,_),this.outletElement.appendChild(_),this._attachedPortal=p,super.setDisposeFn(()=>{D.parentNode&&D.parentNode.replaceChild(_,D)})},this._document=u}attachComponentPortal(t){const r=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let a;return t.viewContainerRef?(a=t.viewContainerRef.createComponent(r,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>a.destroy())):(a=r.create(t.injector||this._defaultInjector),this._appRef.attachView(a.hostView),this.setDisposeFn(()=>{this._appRef.detachView(a.hostView),a.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(a)),this._attachedPortal=t,a}attachTemplatePortal(t){let e=t.viewContainerRef,r=e.createEmbeddedView(t.templateRef,t.context);return r.rootNodes.forEach(a=>this.outletElement.appendChild(a)),r.detectChanges(),this.setDisposeFn(()=>{let a=e.indexOf(r);-1!==a&&e.remove(a)}),this._attachedPortal=t,r}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let DP=(()=>{class n extends kU{constructor(e,r,a){super(),this._componentFactoryResolver=e,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new Vn,this.attachDomPortal=u=>{const p=u.element,_=this._document.createComment("dom-portal");u.setAttachedHost(this),p.parentNode.insertBefore(_,p),this._getRootNode().appendChild(p),this._attachedPortal=u,super.setDisposeFn(()=>{_.parentNode&&_.parentNode.replaceChild(p,_)})},this._document=a}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const r=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,u=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),p=r.createComponent(u,r.length,e.injector||r.injector);return r!==this._viewContainerRef&&this._getRootNode().appendChild(p.hostView.rootNodes[0]),super.setDisposeFn(()=>p.destroy()),this._attachedPortal=e,this._attachedRef=p,this.attached.emit(p),p}attachTemplatePortal(e){e.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(ue(Lu),ue(Ui),ue(An))},n.\u0275dir=kt({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[qn]}),n})(),FU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({}),n})();const jte=["body"];function zte(n,t){}const Ute=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],Hte=["mat-expansion-panel-header","*","mat-action-row"];function Wte(n,t){1&n&&on(0,"span",2),2&n&&yt("@indicatorRotate",dn()._getExpandedState())}const Gte=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],qte=["mat-panel-title","mat-panel-description","*"],IU=new Ft("MAT_ACCORDION"),TX="225ms cubic-bezier(0.4,0.0,0.2,1)",kX={indicatorRotate:a0("indicatorRotate",[Xc("collapsed, void",Xo({transform:"rotate(0deg)"})),Xc("expanded",Xo({transform:"rotate(180deg)"})),of("expanded <=> collapsed, void => collapsed",tg(TX))]),bodyExpansion:a0("bodyExpansion",[Xc("collapsed, void",Xo({height:"0px",visibility:"hidden"})),Xc("expanded",Xo({height:"*",visibility:"visible"})),of("expanded <=> collapsed, void => collapsed",tg(TX))])};let Yte=(()=>{class n{constructor(e){this._template=e}}return n.\u0275fac=function(e){return new(e||n)(ue(vt))},n.\u0275dir=kt({type:n,selectors:[["ng-template","matExpansionPanelContent",""]]}),n})(),Xte=0;const FX=new Ft("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let NV=(()=>{class n extends Lte{constructor(e,r,a,u,p,_,D){super(e,r,a),this._viewContainerRef=u,this._animationMode=_,this._hideToggle=!1,this.afterExpand=new Vn,this.afterCollapse=new Vn,this._inputChanges=new We,this._headerId="mat-expansion-panel-header-"+Xte++,this._bodyAnimationDone=new We,this.accordion=e,this._document=p,this._bodyAnimationDone.pipe(Sl((M,I)=>M.fromState===I.fromState&&M.toState===I.toState)).subscribe(M=>{"void"!==M.fromState&&("expanded"===M.toState?this.afterExpand.emit():"collapsed"===M.toState&&this.afterCollapse.emit())}),D&&(this.hideToggle=D.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=yr(e)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(qo(null),Wi(()=>this.expanded&&!this._portal),so(1)).subscribe(()=>{this._portal=new EP(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const e=this._document.activeElement,r=this._body.nativeElement;return e===r||r.contains(e)}return!1}}return n.\u0275fac=function(e){return new(e||n)(ue(IU,12),ue(F),ue(x5),ue(Ui),ue(An),ue(ec,8),ue(FX,8))},n.\u0275cmp=Sn({type:n,selectors:[["mat-expansion-panel"]],contentQueries:function(e,r,a){if(1&e&&bs(a,Yte,5),2&e){let u;Pi(u=Li())&&(r._lazyContent=u.first)}},viewQuery:function(e,r){if(1&e&&Dl(jte,5),2&e){let a;Pi(a=Li())&&(r._body=a.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(e,r){2&e&&Qn("mat-expanded",r.expanded)("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[Yn([{provide:IU,useValue:void 0}]),qn,or],ngContentSelectors:Hte,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(e,r){1&e&&(vs(Ute),Ei(0),we(1,"div",0,1),Cn("@bodyExpansion.done",function(u){return r._bodyAnimationDone.next(u)}),we(3,"div",2),Ei(4,1),cn(5,zte,0,0,"ng-template",3),Ee(),Ei(6,2),Ee()),2&e&&(mt(1),yt("@bodyExpansion",r._getExpandedState())("id",r.id),mi("aria-labelledby",r._headerId),mt(4),yt("cdkPortalOutlet",r._portal))},directives:[DP],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[kX.bodyExpansion]},changeDetection:0}),n})();class Qte{}const Jte=sP(Qte);let PV=(()=>{class n extends Jte{constructor(e,r,a,u,p,_,D){super(),this.panel=e,this._element=r,this._focusMonitor=a,this._changeDetectorRef=u,this._animationMode=_,this._parentChangeSubscription=T.EMPTY;const M=e.accordion?e.accordion._stateChanges.pipe(Wi(I=>!(!I.hideToggle&&!I.togglePosition))):rf;this.tabIndex=parseInt(D||"")||0,this._parentChangeSubscription=Ii(e.opened,e.closed,M,e._inputChanges.pipe(Wi(I=>!!(I.hideToggle||I.disabled||I.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(Wi(()=>e._containsFocus())).subscribe(()=>a.focusVia(r,"program")),p&&(this.expandedHeight=p.expandedHeight,this.collapsedHeight=p.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:bh(e)||(e.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e))}}focus(e,r){e?this._focusMonitor.focusVia(this._element,e,r):this._element.nativeElement.focus(r)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return n.\u0275fac=function(e){return new(e||n)(ue(NV,1),ue(Mn),ue(B_),ue(F),ue(FX,8),ue(ec,8),pd("tabindex"))},n.\u0275cmp=Sn({type:n,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(e,r){1&e&&Cn("click",function(){return r._toggle()})("keydown",function(u){return r._keydown(u)}),2&e&&(mi("id",r.panel._headerId)("tabindex",r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),Co("height",r._getHeaderHeight()),Qn("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after","after"===r._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===r._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===r._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[qn],ngContentSelectors:qte,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(e,r){1&e&&(vs(Gte),we(0,"span",0),Ei(1),Ei(2,1),Ei(3,2),Ee(),cn(4,Wte,1,1,"span",1)),2&e&&(mt(4),yt("ngIf",r._showToggle()))},directives:[ou],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}\n'],encapsulation:2,data:{animation:[kX.indicatorRotate]},changeDetection:0}),n})(),RU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=kt({type:n,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),n})(),NU=(()=>{class n extends Rte{constructor(){super(...arguments),this._ownHeaders=new zm,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(e){this._hideToggle=yr(e)}ngAfterContentInit(){this._headers.changes.pipe(qo(this._headers)).subscribe(e=>{this._ownHeaders.reset(e.filter(r=>r.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new v7(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(e){this._keyManager.onKeydown(e)}_handleHeaderFocus(e){this._keyManager.updateActiveItem(e)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Cr(n)))(r||n)}}(),n.\u0275dir=kt({type:n,selectors:[["mat-accordion"]],contentQueries:function(e,r,a){if(1&e&&bs(a,PV,5),2&e){let u;Pi(u=Li())&&(r._headers=u)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(e,r){2&e&&Qn("mat-accordion-multi",r.multi)},inputs:{multi:"multi",displayMode:"displayMode",togglePosition:"togglePosition",hideToggle:"hideToggle"},exportAs:["matAccordion"],features:[Yn([{provide:IU,useExisting:n}]),qn]}),n})(),PU=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[Er,ps,Bte,FU]]}),n})();const Zte=[{path:"",component:(()=>{class n{constructor(){this.clsName="agc-about"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Sn({type:n,selectors:[["agc-about"]],hostVars:2,hostBindings:function(e,r){2&e&&is(r.clsName)},decls:25,vars:0,consts:[[1,"header"],[1,"content"],["src","assets/pages/about/index.md",1,"index"],["multi","",1,"panels"],["src","assets/pages/about/helping.md"],["src","assets/pages/about/data.md"],["src","assets/pages/about/connect.md"],["src","assets/pages/about/credits.md"]],template:function(e,r){1&e&&(we(0,"div",0),jt(1,"ADDICTIONS DATA ANALYSES AND VISUALIZATIONS"),Ee(),we(2,"div",1),on(3,"markdown",2),we(4,"mat-accordion",3),we(5,"mat-expansion-panel"),we(6,"mat-expansion-panel-header"),we(7,"mat-panel-title"),jt(8,"HOW WE'RE HELPING"),Ee(),Ee(),on(9,"markdown",4),Ee(),we(10,"mat-expansion-panel"),we(11,"mat-expansion-panel-header"),we(12,"mat-panel-title"),jt(13,"THE DATA"),Ee(),Ee(),on(14,"markdown",5),Ee(),we(15,"mat-expansion-panel"),we(16,"mat-expansion-panel-header"),we(17,"mat-panel-title"),jt(18,"CONNECT WITH US"),Ee(),Ee(),on(19,"markdown",6),Ee(),we(20,"mat-expansion-panel"),we(21,"mat-expansion-panel-header"),we(22,"mat-panel-title"),jt(23,"CREDITS"),Ee(),Ee(),on(24,"markdown",7),Ee(),Ee(),Ee())},directives:[S,NU,NV,PV,RU],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   markdown[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;height:4rem;margin-bottom:4.5rem;padding:0 1rem;align-items:center}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .index[_ngcontent-%COMP%]{padding-bottom:2rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{font-weight:bold}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]{padding:1rem .5rem 0}"],changeDetection:0}),n})()}];let ene=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[ic.forChild(Zte)],ic]}),n})(),tne=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[Er,PU,N,ene]]}),n})();const nne=[{path:"",component:(()=>{class n{constructor(){this.clsName="change-log"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Sn({type:n,selectors:[["agc-change-log"]],hostVars:2,hostBindings:function(e,r){2&e&&is(r.clsName)},decls:4,vars:0,consts:[[1,"header"],[1,"content"],["src","assets/generated/CHANGELOG.md"]],template:function(e,r){1&e&&(we(0,"div",0),jt(1,"Marion County Opioid Addiction Report"),Ee(),we(2,"div",1),on(3,"markdown",2),Ee())},directives:[S],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;height:4rem;margin-bottom:4.5rem;padding:0 1rem;align-items:center}"],changeDetection:0}),n})()}];let ine=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[ic.forChild(nne)],ic]}),n})(),rne=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[Er,ine,N.forChild()]]}),n})();const sne=[{path:"",component:(()=>{class n{constructor(){this.clsName="data-er-diagram"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Sn({type:n,selectors:[["agc-data-er-diagram"]],hostVars:2,hostBindings:function(e,r){2&e&&is(r.clsName)},decls:7,vars:0,consts:[[1,"header"],[1,"title"],[1,"description"],["title","Data ER Diagram","src","assets/schema/relationships.html",1,"schema-frame"]],template:function(e,r){1&e&&(we(0,"div",0),jt(1,"Marion County Opioid Addiction Report"),Ee(),we(2,"div",1),jt(3,"Data ER Diagram"),Ee(),we(4,"div",2),jt(5,"Entity-relationship diagram of all data tables and columns in the database"),Ee(),on(6,"iframe",3))},styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;height:4rem;margin-bottom:4.5rem;padding:0 1rem;align-items:center}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:bold;font-size:1.25rem}[_nghost-%COMP%]   .description[_ngcontent-%COMP%]{font-size:1.25rem}[_nghost-%COMP%]   .schema-frame[_ngcontent-%COMP%]{margin-top:2rem;width:100%;height:calc(100vh)}"],changeDetection:0}),n})()}];let one=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[ic.forChild(sne)],ic]}),n})(),ane=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[Er,one]]}),n})();const lne=[{path:"",component:(()=>{class n{constructor(){this.clsName="data-schema-browser"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Sn({type:n,selectors:[["agc-data-schema-browser"]],hostVars:2,hostBindings:function(e,r){2&e&&is(r.clsName)},decls:7,vars:0,consts:[[1,"header"],[1,"title"],[1,"description"],["title","A2AGC Database Schema","src","assets/schema/index.html",1,"schema-frame"]],template:function(e,r){1&e&&(we(0,"div",0),jt(1,"Marion County Opioid Addiction Report"),Ee(),we(2,"div",1),jt(3,"Data Schema Browser"),Ee(),we(4,"div",2),jt(5,"Browse the A2AGC Database Schema"),Ee(),on(6,"iframe",3))},styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;height:4rem;margin-bottom:4.5rem;padding:0 1rem;align-items:center}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:bold;font-size:1.25rem}[_nghost-%COMP%]   .description[_ngcontent-%COMP%]{font-size:1.25rem}[_nghost-%COMP%]   .schema-frame[_ngcontent-%COMP%]{margin-top:2rem;width:100%;height:calc(100vh)}"],changeDetection:0}),n})()}];let une=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[ic.forChild(lne)],ic]}),n})(),cne=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[Er,une]]}),n})();function uS(...n){const t=n.length;if(0===t)throw new Error("list of properties cannot be empty.");return e=>Pe(function(n,t){return r=>{let a=r;for(let u=0;u<t;u++){const p=null!=a?a[n[u]]:void 0;if(void 0===p)return;a=p}return a}}(n,t))(e)}function Vi(n,t,e,r){var p,a=arguments.length,u=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,e,r);else for(var _=n.length-1;_>=0;_--)(p=n[_])&&(u=(a<3?p(u):a>3?p(t,e,u):p(t,e))||u);return a>3&&u&&Object.defineProperty(t,e,u),u}function fu(n,t){return function(e,r){t(e,r,n)}}function ln(n,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,t)}function LV(n,t,e,r){return new(e||(e=Promise))(function(u,p){function _(I){try{M(r.next(I))}catch(V){p(V)}}function D(I){try{M(r.throw(I))}catch(V){p(V)}}function M(I){I.done?u(I.value):function(u){return u instanceof e?u:new e(function(p){p(u)})}(I.value).then(_,D)}M((r=r.apply(n,t||[])).next())})}function SP(n){return!0===n}function hu(n){return null==n}function ff(n){return!hu(n)}function BU(n){return Boolean(n)}function BX(n){return hu(n)?n:JSON.parse(JSON.stringify(n))}const $V=n=>{const e=n instanceof Date;if("object"!=typeof n||null===n||e)return n;Object.freeze(n);const a="function"==typeof n,u=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(n).forEach(p=>{u.call(n,p)&&(!a||"caller"!==p&&"callee"!==p&&"arguments"!==p)&&null!==n[p]&&("object"==typeof n[p]||"function"==typeof n[p])&&!Object.isFrozen(n[p])&&$V(n[p])}),n};function VX(n){return ff(n)&&"object"==typeof n&&function(n){return"[object Object]"===Object.prototype.toString.call(n)}(n)}function kne(n,t){return n===t}function Fne(n,t,e){if(null===t||null===e||t.length!==e.length)return!1;const r=t.length;for(let a=0;a<r;a++)if(!n(t[a],e[a]))return!1;return!0}function zV(n,t=kne){let e=null,r=null;function a(){return Fne(t,e,arguments)||(r=n.apply(null,arguments)),e=arguments,r}return a.reset=function(){e=null,r=null},a}const zX=zV(function(){const n=bO();if(!n)return!1;const t=n.injector.get(F3,null);return!!t&&t.some(r=>(r&&r.providers||[]).some(u=>u&&u.provide&&"MockNgModuleResolver"===u.provide.name||!1))});let $U=(()=>{class n{constructor(){this.bootstrap$=new _h(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();const jU=new Ft("INITIAL_STATE_TOKEN");let Rne=(()=>{class n{static set(e){this.value=e}static pop(){const e=this.value;return this.value={},e}}return n.value={},n})();const UX=new Ft("Internals.StateContextFactory"),HX=new Ft("Internals.StateFactory");function AP(...n){if(1===n.length){const t=n[0];if(Ae(t))return UV(t,null);if(Ie(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return UV(e.map(r=>t[r]),e)}}if("function"==typeof n[n.length-1]){const t=n.pop();return UV(n=1===n.length&&Ae(n[0])?n[0]:n,null).pipe(Pe(e=>t(...e)))}return UV(n,null)}function UV(n,t){return new ae(e=>{const r=n.length;if(0===r)return void e.complete();const a=new Array(r);let u=0,p=0;for(let _=0;_<r;_++){const D=rn(n[_]);let M=!1;e.add(D.subscribe({next:I=>{M||(M=!0,p++),a[_]=I},error:I=>e.error(I),complete:()=>{u++,(u===r||!M)&&(p===r&&e.next(t?t.reduce((I,V,j)=>(I[V]=a[j],I),{}):a),e.complete())}}))}})}function WX(n,t){return t?e=>e.pipe(WX((r,a)=>rn(n(r,a)).pipe(Pe((u,p)=>t(r,u,a,p))))):e=>e.lift(new Nne(n))}class Nne{constructor(t){this.project=t}call(t,e){return e.subscribe(new Pne(t,this.project))}}class Pne extends sr{constructor(t,e){super(t),this.project=e,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}_next(t){this.hasSubscription||this.tryNext(t)}tryNext(t){let e;const r=this.index++;try{e=this.project(t,r)}catch(a){return void this.destination.error(a)}this.hasSubscription=!0,this._innerSub(e)}_innerSub(t){const e=new ut(this),r=this.destination;r.add(e);const a=Pn(t,e);a!==e&&r.add(a)}_complete(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}const hf={STATE_NAME:n=>`${n} is not a valid state name. It needs to be a valid object property name.`,STATE_NAME_PROPERTY:()=>"States must register a 'name' property",STATE_UNIQUE:(n,t,e)=>`State name '${n}' from ${t} already exists in ${e}`,STATE_DECORATOR:()=>"States must be decorated with @State() decorator",INCORRECT_PRODUCTION:()=>"Angular is running in production mode but NGXS is still running in the development mode!\nPlease set developmentMode to false on the NgxsModule options when in production mode.\nNgxsModule.forRoot(states, { developmentMode: !environment.production })",INCORRECT_DEVELOPMENT:()=>"RECOMMENDATION: Set developmentMode to true on the NgxsModule when Angular is running in development mode.\nNgxsModule.forRoot(states, { developmentMode: !environment.production })",SELECT_FACTORY_NOT_CONNECTED:()=>"You have forgotten to import the NGXS module!",ACTION_DECORATOR:()=>"@Action() decorator cannot be used with static methods",SELECTOR_DECORATOR:()=>"Selectors only work on methods",ZONE_WARNING:()=>"Your application was bootstrapped with nooped zone and your execution strategy requires an actual NgZone!\nPlease set the value of the executionStrategy property to NoopNgxsExecutionStrategy.\nNgxsModule.forRoot(states, { executionStrategy: NoopNgxsExecutionStrategy })",PATCHING_ARRAY:()=>"Patching arrays is not supported.",PATCHING_PRIMITIVE:()=>"Patching primitives is not supported.",UNDECORATED_STATE_IN_IVY:n=>`'${n}' class should be decorated with @Injectable() right after the @State() decorator`};let GX=(()=>{class n{constructor(e,r){this._ngZone=e,this._platformId=r,this.verifyZoneIsNotNooped(this._ngZone)}enter(e){return MR(this._platformId)?this.runInsideAngular(e):this.runOutsideAngular(e)}leave(e){return this.runInsideAngular(e)}runInsideAngular(e){return On.isInAngularZone()?e():this._ngZone.run(e)}runOutsideAngular(e){return On.isInAngularZone()?this._ngZone.runOutsideAngular(e):e()}verifyZoneIsNotNooped(e){e instanceof On||console.warn(hf.ZONE_WARNING())}}return n.\u0275fac=function(e){return new(e||n)(se(On),se(Yd))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();const qX=new Ft("ROOT_STATE_TOKEN"),YX=new Ft("FEATURE_STATE_TOKEN"),zU=new Ft("NGXS_PLUGINS"),XX=new Ft("NG_TEST_MODE"),KX=new Ft("NG_DEV_MODE"),X_="NGXS_META",QX="NGXS_OPTIONS_META",UU="NGXS_SELECTOR_META";let cS=(()=>{class n{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=GX}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();class Lne{constructor(t,e,r){this.previousValue=t,this.currentValue=e,this.firstChange=r}}const JX=new Ft("NGXS_EXECUTION_STRATEGY");function dS(n){return n.constructor&&n.constructor.type?n.constructor.type:n.type}const HU=(n,t,e)=>{n=Object.assign({},n);const r=t.split("."),a=r.length-1;return r.reduce((u,p,_)=>(u[p]=_===a?e:Array.isArray(u[p])?u[p].slice():Object.assign({},u[p]),u&&u[p]),n),n},bk=(n,t)=>t.split(".").reduce((e,r)=>e&&e[r],n),WU=n=>n&&"object"==typeof n&&!Array.isArray(n),GU=(n,...t)=>{if(!t.length)return n;const e=t.shift();if(WU(n)&&WU(e))for(const r in e)WU(e[r])?(n[r]||Object.assign(n,{[r]:{}}),GU(n[r],e[r])):Object.assign(n,{[r]:e[r]});return GU(n,...t)};function qU(n){if(!n.hasOwnProperty(X_)){const t={name:null,actions:{},defaults:{},path:null,makeRootSelector:e=>e.getStateGetter(t.name),children:[]};Object.defineProperty(n,X_,{value:t})}return MP(n)}function MP(n){return n[X_]}function YU(n){return n.hasOwnProperty(UU)||Object.defineProperty(n,UU,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),XU(n)}function XU(n){return n[UU]}function eK(n,t){const e=bk(t.currentAppState,n.path),r=bk(t.newAppState,n.path);return new Lne(e,r,!n.isInitialised)}function Gne(...n){return Ck(n,["DISPATCHED"])}function Ck(n,t,e=Kne){const r=function(n){return n.reduce((t,e)=>(t[dS(e)]=!0,t),{})}(n),a=t&&function(n){return n.reduce((t,e)=>(t[e]=!0,t),{})}(t);return function(u){return u.pipe(function(n,t){return Wi(e=>{const r=dS(e.action);return n[r]&&(!t||t[e.status])})}(r,a),e())}}function Xne(){return Pe(({action:n,status:t,error:e})=>({action:n,result:{successful:"SUCCESSFUL"===t,canceled:"CANCELED"===t,error:e}}))}function Kne(){return Pe(n=>n.action)}function HV(n){return t=>new ae(e=>t.subscribe({next(r){n.leave(()=>e.next(r))},error(r){n.leave(()=>e.error(r))},complete(){n.leave(()=>e.complete())}}))}let WV=(()=>{class n{constructor(e){this._executionStrategy=e}enter(e){return this._executionStrategy.enter(e)}leave(e){return this._executionStrategy.leave(e)}}return n.\u0275fac=function(e){return new(e||n)(se(JX))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();class Zne extends We{constructor(){super(...arguments),this._itemQueue=[],this._busyPushingNext=!1}next(t){if(this._busyPushingNext)this._itemQueue.unshift(t);else{for(this._busyPushingNext=!0,super.next(t);this._itemQueue.length>0;){const e=this._itemQueue.pop();super.next(e)}this._busyPushingNext=!1}}}let GV=(()=>{class n extends Zne{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Cr(n)))(r||n)}}(),n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})(),tK=(()=>{class n extends ae{constructor(e,r){super(a=>{const u=e.pipe(HV(r)).subscribe({next:p=>a.next(p),error:p=>a.error(p),complete:()=>a.complete()});a.add(u)})}}return n.\u0275fac=function(e){return new(e||n)(se(GV),se(WV))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();const nK=n=>(...t)=>n.shift()(...t,(...r)=>nK(n)(...r));let qV=(()=>{class n extends au{constructor(){super({})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})(),KU=(()=>{class n{constructor(e,r){this._parentManager=e,this._pluginHandlers=r,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const e=this.getPluginHandlers();this.rootPlugins.push(...e)}getPluginHandlers(){return(this._pluginHandlers||[]).map(r=>r.handle?r.handle.bind(r):r)}}return n.\u0275fac=function(e){return new(e||n)(se(n,12),se(zU,8))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})(),QU=(()=>{class n extends We{}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Cr(n)))(r||n)}}(),n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})(),iK=(()=>{class n{constructor(e,r,a,u,p,_){this._injector=e,this._actions=r,this._actionResults=a,this._pluginManager=u,this._stateStream=p,this._ngxsExecutionStrategy=_}dispatch(e){const r=this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(e));return r.subscribe({error:a=>this._ngxsExecutionStrategy.leave(()=>{try{this._errorHandler=this._errorHandler||this._injector.get(zl),this._errorHandler.handleError(a)}catch(u){}})}),r.pipe(HV(this._ngxsExecutionStrategy))}dispatchByEvents(e){return Array.isArray(e)?0===e.length?_n(this._stateStream.getValue()):AP(e.map(r=>this.dispatchSingle(r))):this.dispatchSingle(e)}dispatchSingle(e){if(!dS(e))return ro(new Error(`This action doesn't have a type property: ${e.constructor.name}`));const a=this._stateStream.getValue();return nK([...this._pluginManager.plugins,(p,_)=>{p!==a&&this._stateStream.next(p);const D=this.getActionResultStream(_);return D.subscribe(M=>this._actions.next(M)),this._actions.next({action:_,status:"DISPATCHED"}),this.createDispatchObservable(D)}])(a,e).pipe(r0())}getActionResultStream(e){return this._actionResults.pipe(Wi(r=>r.action===e&&"DISPATCHED"!==r.status),so(1),r0())}createDispatchObservable(e){return e.pipe(WX(r=>{switch(r.status){case"SUCCESSFUL":return _n(this._stateStream.getValue());case"ERRORED":return ro(r.error);default:return rf}})).pipe(r0())}}return n.\u0275fac=function(e){return new(e||n)(se(ai),se(GV),se(QU),se(KU),se(qV),se(WV))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();const rK=n=>{Object.freeze(n);const t="function"==typeof n,e=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(n).forEach(function(r){e.call(n,r)&&(!t||"caller"!==r&&"callee"!==r&&"arguments"!==r)&&null!==n[r]&&("object"==typeof n[r]||"function"==typeof n[r])&&!Object.isFrozen(n[r])&&rK(n[r])}),n};let sK=(()=>{class n{constructor(e,r){this.isDevMode=e,this.isTestMode=r}}return n.\u0275fac=function(e){return new(e||n)(se(KX),se(XX))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})(),oK=(()=>{class n{constructor(e,r){this._host=e,this._config=r}get isIncorrectProduction(){return!this._host.isDevMode()&&this._config.developmentMode}get isIncorrectDevelopment(){return this._host.isDevMode()&&!this._config.developmentMode}verifyDevMode(){this._host.isTestMode()||(this.isIncorrectProduction?console.warn(hf.INCORRECT_PRODUCTION()):this.isIncorrectDevelopment&&console.warn(hf.INCORRECT_DEVELOPMENT()))}}return n.\u0275fac=function(e){return new(e||n)(se(sK),se(cS))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})(),wk=(()=>{class n{constructor(e,r,a,u){this._stateStream=e,this._dispatcher=r,this._config=a,u.verifyDevMode()}getRootStateOperations(){const e={getState:()=>this._stateStream.getValue(),setState:r=>this._stateStream.next(r),dispatch:r=>this._dispatcher.dispatch(r)};return this._config.developmentMode?this.ensureStateAndActionsAreImmutable(e):e}ensureStateAndActionsAreImmutable(e){return{getState:()=>e.getState(),setState:r=>{const a=rK(r);return e.setState(a)},dispatch:r=>e.dispatch(r)}}setStateToTheCurrentWithNew(e){const r=this.getRootStateOperations(),a=r.getState();r.setState(Object.assign({},a,e.defaults))}}return n.\u0275fac=function(e){return new(e||n)(se(qV),se(iK),se(cS),se(oK))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})(),YV=(()=>{class n{constructor(e){this._internalStateOperations=e}createStateContext(e){const r=this._internalStateOperations.getRootStateOperations();function a(D){return bk(D,e.path)}function u(D,M){const I=HU(D,e.path,M),V=e.instance;if(V.ngxsOnChanges){const j=eK(e,{currentAppState:D,newAppState:I});V.ngxsOnChanges(j)}return r.setState(I),I}function p(D,M){return u(D,M(a(D)))}return{getState:()=>a(r.getState()),patchState:D=>p(r.getState(),function(n){return t=>{if(Array.isArray(n))throw new Error(hf.PATCHING_ARRAY());if("object"!=typeof n)throw new Error(hf.PATCHING_PRIMITIVE());const e=Object.assign({},t);for(const r in n)e[r]=n[r];return e}}(D)),setState(D){const M=r.getState();return function(D){return"function"==typeof D}(D)?p(M,D):u(M,D)},dispatch:D=>r.dispatch(D)}}}return n.\u0275fac=function(e){return new(e||n)(se(wk))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();class XV{static stateNameErrorMessage(t){return hf.STATE_NAME(t)}static checkCorrectStateName(t){if(!t)throw new Error(hf.STATE_NAME_PROPERTY());if(!this.stateNameRegex.test(t))throw new Error(this.stateNameErrorMessage(t))}static checkStateNameIsUnique(t,e){const a=this.getValidStateMeta(t).name,u=e[a];if(u&&u!==t)throw new Error(hf.STATE_UNIQUE(a,t.name,u.name));return a}static getValidStateMeta(t){const e=MP(t);if(!e)throw new Error(hf.STATE_DECORATOR());return e}}XV.stateNameRegex=new RegExp("^[a-zA-Z0-9_]+$");let Ek=(()=>{class n{constructor(e,r,a,u,p,_,D){this._injector=e,this._config=r,this._parentFactory=a,this._actions=u,this._actionResults=p,this._stateContextFactory=_,this._initialState=D,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=zV(()=>{const M=this;function I(j){const G=M.statePaths[j];return G?function(n,t){return t&&t.compatibility&&t.compatibility.strictContentSecurityPolicy?function(n){const t=n.slice();return e=>t.reduce((r,a)=>r&&r[a],e)}(n):function(n){const t=n;let e="store."+t[0],r=0;const a=t.length;let u=e;for(;++r<a;)u=u+" && "+(e=e+"."+t[r]);return new Function("store","return "+u+";")}(n)}(G.split("."),M._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(j){let G=I(j);return G||((...Z)=>(G||(G=I(j)),G?G(...Z):void 0))},getSelectorOptions:j=>Object.assign({},M._config.selectorOptions,j||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static cloneDefaults(e){let r={};return r=Array.isArray(e)?e.slice():function(n){return"object"==typeof n&&null!==n||"function"==typeof n}(e)?Object.assign({},e):void 0===e?{}:e,r}static checkStatesAreValid(e){e.forEach(XV.getValidStateMeta)}ngOnDestroy(){this._actionsSubscription.unsubscribe()}add(e){n.checkStatesAreValid(e);const{newStates:r}=this.addToStatesMap(e);if(!r.length)return[];const a=function(n){const t=e=>{const r=n.find(a=>a===e);if(!r)throw new Error(`Child state not found: ${e}. \r\nYou may have forgotten to add states to module`);return r[X_].name};return n.reduce((e,r)=>{const{name:a,children:u}=r[X_];return e[a]=(u||[]).map(t),e},{})}(r),u=function(n){const t=[],e={},r=(a,u=[])=>{Array.isArray(u)||(u=[]),u.push(a),e[a]=!0,n[a].forEach(p=>{if(u.indexOf(p)>=0)throw new Error(`Circular dependency '${p}' is required by '${a}': ${u.join(" -> ")}`);e[p]||r(p,u.slice(0))}),t.indexOf(a)<0&&t.push(a)};return Object.keys(n).forEach(a=>r(a)),t.reverse()}(a),p=function(n,t={}){const e=(r,a)=>{for(const u in r)if(r.hasOwnProperty(u)&&r[u].indexOf(a)>=0){const p=e(r,u);return null!==p?`${p}.${u}`:u}return null};for(const r in n)if(n.hasOwnProperty(r)){const a=e(n,r);t[r]=a?`${a}.${r}`:r}return t}(a),_=function(n){return n.reduce((t,e)=>(t[e[X_].name]=e,t),{})}(r),D=[];for(const M of u){const I=_[M],V=p[M],j=I[X_];this.addRuntimeInfoToMeta(j,V);const G={name:M,path:V,isInitialised:!1,actions:j.actions,instance:this._injector.get(I),defaults:n.cloneDefaults(j.defaults)};this.hasBeenMountedAndBootstrapped(M,V)||D.push(G),this.states.push(G)}return D}addAndReturnDefaults(e){const a=this.add(e||[]);return{defaults:a.reduce((p,_)=>HU(p,_.path,_.defaults),{}),states:a}}connectActionHandlers(){null===this._actionsSubscription&&(this._actionsSubscription=this._actions.pipe(Wi(e=>"DISPATCHED"===e.status),Kn(({action:e})=>this.invokeActions(this._actions,e).pipe(Pe(()=>({action:e,status:"SUCCESSFUL"})),mk({action:e,status:"CANCELED"}),Oe(r=>_n({action:e,status:"ERRORED",error:r}))))).subscribe(e=>this._actionResults.next(e)))}invokeActions(e,r){const a=dS(r),u=[];for(const p of this.states){const _=p.actions[a];if(_)for(const D of _){const M=this._stateContextFactory.createStateContext(p);try{let I=p.instance[D.fn](M,r);I instanceof Promise&&(I=rn(I)),I instanceof ae?(I=I.pipe(mk({})),D.options.cancelUncompleted&&(I=I.pipe(yi(e.pipe(Gne(r)))))):I=_n({}).pipe(r0()),u.push(I)}catch(I){u.push(ro(I))}}}return u.length||u.push(_n({})),AP(u)}addToStatesMap(e){const r=[],a=this.statesByName;for(const u of e){const p=XV.checkStateNameIsUnique(u,a);!a[p]&&(r.push(u),a[p]=u)}return{newStates:r}}addRuntimeInfoToMeta(e,r){this.statePaths[e.name]=r,e.path=r}hasBeenMountedAndBootstrapped(e,r){const a=void 0!==bk(this._initialState,r);return this.statesByName[e]&&a}}return n.\u0275fac=function(e){return new(e||n)(se(ai),se(cS),se(n,12),se(GV),se(QU),se(YV),se(jU,8))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})(),JU=(()=>{class n{constructor(e,r,a){this.internalStateOperations=e,this.stateContextFactory=r,this.bootstrapper=a}ngxsBootstrap(e,r){this.internalStateOperations.getRootStateOperations().dispatch(e).pipe(Wi(()=>!!r),Ss(()=>this.invokeInit(r.states)),Kn(()=>this.bootstrapper.appBootstrapped$),Wi(a=>!!a)).subscribe(()=>this.invokeBootstrap(r.states))}invokeInit(e){for(const r of e){const a=r.instance;if(a.ngxsOnChanges){const _=eK(r,{currentAppState:{},newAppState:this.internalStateOperations.getRootStateOperations().getState()});a.ngxsOnChanges(_)}a.ngxsOnInit&&a.ngxsOnInit(this.getStateContext(r)),r.isInitialised=!0}}invokeBootstrap(e){for(const r of e){const a=r.instance;a.ngxsAfterBootstrap&&a.ngxsAfterBootstrap(this.getStateContext(r))}}getStateContext(e){return this.stateContextFactory.createStateContext(e)}}return n.\u0275fac=function(e){return new(e||n)(se(wk),se(YV),se($U))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();const KV_getOptions=n=>n&&n.NGXS_SELECTOR_OPTIONS_META||{};function lK(n){const t=XU(n)||MP(n);return t&&t.makeRootSelector||(()=>n)}let sg=(()=>{class n{constructor(e,r,a,u,p,_){this._stateStream=e,this._internalStateOperations=r,this._config=a,this._internalExecutionStrategy=u,this._stateFactory=p,this.initStateStream(_)}dispatch(e){return this._internalStateOperations.getRootStateOperations().dispatch(e)}select(e){const r=this.getStoreBoundSelectorFn(e);return this._stateStream.pipe(Pe(r),Oe(a=>{const{suppressErrors:u}=this._config.selectorOptions;return a instanceof TypeError&&u?_n(void 0):ro(a)}),Sl(),HV(this._internalExecutionStrategy))}selectOnce(e){return this.select(e).pipe(so(1))}selectSnapshot(e){return this.getStoreBoundSelectorFn(e)(this._stateStream.getValue())}subscribe(e){return this._stateStream.pipe(HV(this._internalExecutionStrategy)).subscribe(e)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(e){return this._internalStateOperations.getRootStateOperations().setState(e)}getStoreBoundSelectorFn(e){return lK(e)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(e){const r=this._stateStream.value;if(!r||0===Object.keys(r).length){const p=Object.keys(this._config.defaultsState).length>0?Object.assign({},this._config.defaultsState,e):e;this._stateStream.next(p)}}}return n.\u0275fac=function(e){return new(e||n)(se(qV),se(wk),se(cS),se(WV),se(Ek),se(jU,8))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})(),OP=(()=>{class n{constructor(e,r){n.store=e,n.config=r}ngOnDestroy(){n.store=null,n.config=null}}return n.\u0275fac=function(e){return new(e||n)(se(sg),se(cS))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n.store=null,n.config=null,n})();class uK{static get type(){return"@@INIT"}}class cK{constructor(t){this.addedStates=t}static get type(){return"@@UPDATE_STATE"}}const QV=new _h(1);let aie=(()=>{class n{constructor(e,r,a,u,p=[],_){!function(){try{const n=window.ng,e=!(n.probe&&n.coreTokens)&&Uc();QV.next(e)}catch(n){QV.next(!1)}finally{QV.complete()}}();const D=e.addAndReturnDefaults(p);r.setStateToTheCurrentWithNew(D),e.connectActionHandlers(),_.ngxsBootstrap(new uK,D)}}return n.\u0275fac=function(e){return new(e||n)(se(Ek),se(wk),se(sg),se(OP),se(qX,8),se(JU))},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({}),n})(),lie=(()=>{class n{constructor(e,r,a,u=[],p){const _=n.flattenStates(u),D=a.addAndReturnDefaults(_);D.states.length&&(r.setStateToTheCurrentWithNew(D),p.ngxsBootstrap(new cK(D.defaults),D))}static flattenStates(e=[]){return e.reduce((r,a)=>r.concat(a),[])}}return n.\u0275fac=function(e){return new(e||n)(se(sg),se(wk),se(Ek),se(YX,8),se(JU))},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({}),n})();class rc{static forRoot(t=[],e={}){return{ngModule:aie,providers:[Ek,YV,tK,GV,$U,oK,sK,JU,iK,QU,wk,WV,sg,qV,OP,KU,...t,...rc.ngxsTokenProviders(t,e)]}}static forFeature(t=[]){return{ngModule:lie,providers:[Ek,KU,...t,{provide:YX,multi:!0,useValue:t}]}}static ngxsTokenProviders(t,e){return[{provide:XX,useValue:zX},{provide:KX,useValue:Uc},{provide:JX,useClass:e.executionStrategy||GX},{provide:qX,useValue:t},{provide:rc.ROOT_OPTIONS,useValue:e},{provide:cS,useFactory:rc.ngxsConfigFactory,deps:[rc.ROOT_OPTIONS]},{provide:KD,useFactory:rc.appBootstrapListenerFactory,multi:!0,deps:[$U]},{provide:jU,useFactory:rc.getInitialState},{provide:UX,useExisting:YV},{provide:HX,useExisting:Ek}]}static ngxsConfigFactory(t){return GU(new cS,t)}static appBootstrapListenerFactory(t){return()=>t.bootstrap()}static getInitialState(){return Rne.pop()}}function dK(n,t){return(e,r)=>{if(e.hasOwnProperty("prototype"))throw new Error(hf.ACTION_DECORATOR());const u=qU(e.constructor);Array.isArray(n)||(n=[n]);for(const p of n){const _=p.type;u.actions[_]||(u.actions[_]=[]),u.actions[_].push({fn:r,options:t||{},type:_})}}}function fS(n){return r=>{!function(n){QV.subscribe(t=>{t&&(n.\u0275prov||console.warn(hf.UNDECORATED_STATE_IN_IVY(n.name)))})}(r);const a=r,u=qU(a),p=Object.getPrototypeOf(a),_=function(r){return Object.assign({},r[QX]||{},n)}(p);(function(r){const{meta:a,inheritedStateClass:u,optionsWithInheritance:p}=r,{children:_,defaults:D,name:M}=p,I="string"==typeof M?M:M&&M.getName()||null;XV.checkCorrectStateName(I),u.hasOwnProperty(X_)&&(a.actions=Object.assign({},a.actions,(u[X_]||{}).actions)),a.children=_,a.defaults=D,a.name=I})({meta:u,inheritedStateClass:p,optionsWithInheritance:_}),a[QX]=_}}function fK(n){return(t,e,r)=>{if(!r||null===r.value)throw new Error(hf.SELECTOR_DECORATOR());const u=r.value,p=function(n,t,e){const r=e&&e.containerClass,u=zV(function(...M){const I=t.apply(r,M);return I instanceof Function?zV.apply(null,[I]):I});Object.setPrototypeOf(u,t);const p=function(n,t){const e=YU(n);e.originalFn=n;let r=()=>({});t&&(e.containerClass=t.containerClass,e.selectorName=t.selectorName,r=t.getSelectorOptions||r);const a=Object.assign({},e);return e.getSelectorOptions=()=>function(n,t){return Object.assign({},KV_getOptions(n.containerClass)||{},KV_getOptions(n.originalFn)||{},n.getSelectorOptions()||{},t)}(a,r()),e}(t,e);return p.makeRootSelector=D=>{const{argumentSelectorFunctions:M,selectorOptions:I}=function(n,t,e=[]){const r=t.getSelectorOptions(),a=n.getSelectorOptions(r);return{selectorOptions:a,argumentSelectorFunctions:function(n=[],t,e){const r=[];return e&&(0===n.length||t.injectContainerState)&&MP(e)&&r.push(e),n&&r.push(...n),r}(e,a,t.containerClass).map(_=>lK(_)(n))}}(D,p,n);return function(j){const G=M.map(Z=>Z(j));try{return u(...G)}catch(Z){if(Z instanceof TypeError&&I.suppressErrors)return;throw Z}}},u}(n,u,{containerClass:t,selectorName:e.toString(),getSelectorOptions:()=>({})}),_={configurable:!0,get:()=>p};return _.originalFn=u,_}}rc.\u0275fac=function(t){return new(t||rc)},rc.\u0275mod=Ht({type:rc}),rc.\u0275inj=zt({}),rc.ROOT_OPTIONS=new Ft("ROOT_OPTIONS");const hK="NGXS_DATA_META",ZU="NGXS_META",pK="NGXS_ARGUMENT_REGISTRY_META";let gK=(()=>{class n{constructor(e){this.sequence$=new au(0),this.subscription=null,e&&(this.subscription=e.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){var e;this.sequence$.next(0),null===(e=this.subscription)||void 0===e||e.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}}return n.\u0275fac=function(e){return new(e||n)(se(sg,8))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();function TP(n){return n[hK]}let pf=(()=>{class n{constructor(e,r,a){n.store=e.get(sg),n.ngZone=e.get(On),n.factory=r,n.context=a,n.computed=e.get(gK)}}return n.store=null,n.computed=null,n.context=null,n.factory=null,n.ngZone=null,n.\u0275fac=function(e){return new(e||n)(se(ai),se(HX),se(UX))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();class Ao{constructor(){Ao.statesCachedMeta.clear()}static createStateContext(t){return pf.context.createStateContext(t)}static ensureMappedState(t){if(hu(pf.factory)||hu(t))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(ff(t.name)?Ao.statesCachedMeta.get(t.name):null)||Ao.ensureMeta(t)}static getRepositoryByInstance(t){var e;const a=null!==(e=TP(Ao.getStateClassByInstance(t)))&&void 0!==e?e:null;if(hu(a))throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return a}static getStateClassByInstance(t){return(null!=t?t:{}).constructor}static clearMetaByInstance(t){const e=Ao.getRepositoryByInstance(t);e.stateMeta.actions={},e.operations={}}static createPayload(t,e){const r={},a=Array.from(t);for(let u=0;u<a.length;u++){const p=null==e?void 0:e.getPayloadTypeByIndex(u);ff(p)&&(r[p]=a[u])}return Object.keys(r).length>0?r:null}static createAction(t,e,r){const a=Ao.createPayload(e,r);return new(function(n){return class{constructor(e){e&&Object.keys(e).forEach(r=>{this[r]=e[r]})}static get type(){return n}}}(t.type))(a)}static ensureMeta(t){var e;const r=ff(t.name)?null===(e=pf.factory.states)||void 0===e?void 0:e.find(a=>a.name===t.name):null;return ff(r)&&ff(t.name)&&Ao.statesCachedMeta.set(t.name,r),r}}Ao.statesCachedMeta=new Map,Ao.\u0275fac=function(t){return new(t||Ao)},Ao.\u0275prov=ot({token:Ao,factory:Ao.\u0275fac}),new _h(1);class bie extends Error{constructor(t){super(`Child states can only be added to an object. Cannot convert ${ff(null==t?void 0:t.constructor)?t.constructor.name:t} to PlainObject`)}}function mK(n){var t;return null!==(t=n.NGXS_OPTIONS_META)&&void 0!==t?t:{name:""}}function yK(n){var t;const e=mK(n),r=null!==(t=e.children)&&void 0!==t?t:[],u=BX(void 0===e.defaults?{}:e.defaults);if(r.length){if(VX(u))return function(n,t){return t.reduce((e,r)=>{const a=mK(r);if(function(n){const t="string"==typeof n?n.trim():n;return[void 0,null,NaN,"",1/0].includes(t)}(a.name))throw new Error("State name not provided in class");return e[a.name.toString()]=yK(r),e},null!=n?n:{})}(u,r);throw new bie(u)}return u}function vK(n){var t;return null!==(t=n.__NGXS_COMPUTED_OPTION__)&&void 0!==t?t:null}function bK(){var n,t;return null!==(t=null===(n=null==pf?void 0:pf.computed)||void 0===n?void 0:n.sequenceValue)&&void 0!==t?t:0}function Die(n){let t=!1;return oC(n)&&(t=!0),t}function eH(n){return n[pK]}class xie extends Error{constructor(t,e){super(`An argument with the name '${t}' already exists in the method '${e}'`)}}class Sie{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(t){var e;return null!==(e=this.payloadMap.get(t))&&void 0!==e?e:null}getArgumentNameByIndex(t){var e;return null!==(e=this.argumentMap.get(t))&&void 0!==e?e:null}createPayloadType(t,e,r){this.checkDuplicateName(t,e),this.payloadMap.set(r,t),this.payloadMap.set(t,t)}createArgumentName(t,e,r){this.checkDuplicateName(t,e),this.argumentMap.set(r,t),this.argumentMap.set(t,t)}checkDuplicateName(t,e){if(BU(this.argumentMap.has(t))||BU(this.payloadMap.has(t)))throw new xie(t,e)}}function CK(n){return Uc()?$V(n):n}function kie(n){return{enumerable:!0,configurable:!0,get(){const t=TP(n),e=Ao.ensureMappedState(t.stateMeta);return Ao.createStateContext(e)}}}function wK(n){if(!n)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return Object.assign(Object.assign({},n),{getState:()=>Uc()?$V(n.getState()):n.getState(),setState(t){n.setState(t)},patchState(t){n.patchState(t)}})}function og(){return(n,t,e)=>{!function(n,t){if(!function(n,t){var e;let r=n,a=!1;if(VX(r))for(;null!==r;){if(SP(null==r?void 0:r.hasOwnProperty(t))){a=!!(null===(e=Object.getOwnPropertyDescriptor(r,t))||void 0===e?void 0:e.get);break}r=Object.getPrototypeOf(r)}return a}(n,null==t?void 0:t.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.\nExample: \n@Computed() get ${t.toString()}() { \n\t .. \n}`)}(n,t);const r=e.get;return e.get=function(...a){const u=function(n){return hu(vK(n))&&Object.defineProperties(n,{__NGXS_COMPUTED_OPTION__:{enumerable:!0,configurable:!0,value:new WeakMap}}),vK(n)}(this),p=null==u?void 0:u.get(r);if(SP(null==p?void 0:p.isObservable))return null==p?void 0:p.value;if(hu(p)||p.sequenceId!==bK()){u.delete(r);const D=r.apply(this,a);return u.set(r,{value:D,sequenceId:bK(),isObservable:Die(D)}),D}return p.value},e}}const Pie={cancelUncompleted:!0,insideZone:!1};function Jo(n=Pie){return(t,e,r)=>{!function(n,t){if(n.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(void 0===t)throw new Error("@DataAction() can only decorate a method implementation")}(t,r);const a=r.value,u=e.toString();return r.value=function(...p){const _=this;let D=null;const M=Ao.getRepositoryByInstance(_),I=M.operations;let V=I[u];const j=M.stateMeta,G=eH(a);if(hu(V)){const je=function(n){var t,e,r;return null!==(r=null===(e=null===(t=(n+"").replace(/[/][/].*$/gm,"").replace(/\s+/g,"").replace(/[/][*][^/*]*[*][/]/g,"").split("){",1))||void 0===t?void 0:t[0])||void 0===e?void 0:e.replace(/^[^(]*[(]/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean))&&void 0!==r?r:[]}(a),Et=function(n){const{statePath:t,argumentsNames:e,methodName:r,argumentRegistry:a}=n;let u="";for(let p=0;p<e.length;p++)ff(null==a?void 0:a.getArgumentNameByIndex(p))?u+=null==a?void 0:a.getArgumentNameByIndex(p):ff(null==a?void 0:a.getPayloadTypeByIndex(p))?u+=null==a?void 0:a.getPayloadTypeByIndex(p):u+=`$arg${p}`,p!==e.length-1&&(u+=", ");return`@${t.replace(/\./g,"/")}.${r}(${u})`}({statePath:j.path,methodName:u,argumentsNames:je,argumentRegistry:G});V=I[u]={type:Et,options:{cancelUncompleted:n.cancelUncompleted}},j.actions[V.type]=[{type:V.type,options:V.options,fn:V.type}]}Ao.ensureMappedState(j).instance[V.type]=()=>{var je;return SP(n.insideZone)?null===(je=pf.ngZone)||void 0===je||je.run(()=>{D=a.apply(_,p)}):D=a.apply(_,p),oC(D)?_n(null).pipe(Pe(()=>D)):D};const be=Ao.createAction(V,p,G),Ye=pf.store.dispatch(be);return oC(D)?function(n,t){return AP([n,t]).pipe(Pe(e=>e.pop()))}(Ye,D):D},r}}function pu(n){return(t,e,r)=>{const a=n.trim();if(!a)throw new Error("Payload name should be initialized");(function(n,t){const e=n[t];return hu(eH(e))&&Object.defineProperties(e,{[pK]:{enumerable:!0,configurable:!0,value:new Sie}}),eH(e)})(t,e).createPayloadType(a,e,r)}}function Dk(){return n=>{const t=function(n){if(function(n){return!BU(n)}(n.hasOwnProperty(ZU))){const t={name:null,actions:{},defaults:{},path:null,makeRootSelector:e=>e.getStateGetter(t.name),children:[]};Object.defineProperty(n,ZU,{value:t})}return function(n){var t;return null===(t=n)||void 0===t?void 0:t[ZU]}(n)}(n);if(hu(t.name))throw new Error("@StateRepository should be add before decorator @State");!function(n,t){(function(n){var t;const e=null!==(t=TP(n))&&void 0!==t?t:null;return(hu(e)||(null==e?void 0:e.stateClass)!==n)&&function(n){Object.defineProperty(n,hK,{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:n}})}(n),TP(n)}(n)).stateMeta=t}(n,t),function(n,t,e){Object.defineProperties(n.prototype,{name:{enumerable:!0,configurable:!0,value:t.name},initialState:{enumerable:!0,configurable:!0,get:()=>BX(e)},context:kie(n)})}(n,t,yK(n)),function(n){var t,e;const r=TP(n),a=null!==(e=null===(t=null==r?void 0:r.stateMeta)||void 0===t?void 0:t.name)&&void 0!==e?e:null;if(ff(a)){const u=`__${a}__selector`;Object.defineProperties(n.prototype,{[u]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(ff(this[u]))return this[u];if(hu(pf.store))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return this[u]=pf.store.select(n).pipe(Pe(p=>Uc()?$V(p):p),r0({refCount:!0,bufferSize:1})),this[u]}}})}}(n)}}var JV=(()=>(function(n){n.ID="id"}(JV||(JV={})),JV))(),kP=(()=>(function(n){n.ASC="asc",n.DESC="desc"}(kP||(kP={})),kP))();let EK=(()=>{class n{constructor(){this.browserStorageEvents$=new We,this.isInitialised=!1,this.isBootstrapped=!1,this._dirty=!0}get dirty(){return this._dirty}set dirty(e){this._dirty=e}ngxsOnChanges(e){var a;this.dirty&&this.isBootstrapped&&(this.dirty=!1,null===(a=this.ngxsDataDoCheck)||void 0===a||a.call(this))}ngxsOnInit(){this.isInitialised=!0}ngxsAfterBootstrap(){var r;this.isBootstrapped=!0,this.dirty&&(this.dirty=!1,null===(r=this.ngxsDataDoCheck)||void 0===r||r.call(this))}markAsDirtyAfterReset(){var r;this.dirty=!0,null===(r=this.ngxsDataAfterReset)||void 0===r||r.call(this)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})(),tH=(()=>{class n extends EK{constructor(){super(...arguments),this.primaryKey=JV.ID,this.comparator=null}get snapshot(){return CK(this.getState())}get ids(){return this.snapshot.ids}get entities(){return this.snapshot.entities}get entitiesArray(){const e=this.snapshot;return e.ids.map(r=>e.entities[r])}get ids$(){return this.state$.pipe(Pe(e=>e.ids))}get entities$(){return this.state$.pipe(Pe(e=>e.entities))}get entitiesArray$(){return this.state$.pipe(Pe(e=>e.ids.map(r=>e.entities[r])))}get ctx(){return wK(this.context)}setComparator(e){return this.comparator=e,this}dispatch(e){return this.ctx.dispatch(e)}getState(){return this.ctx.getState()}selectId(e){var r;return null===(r=e)||void 0===r?void 0:r[this.primaryKey]}selectOne(e){var r;return null!==(r=this.snapshot.entities[e])&&void 0!==r?r:null}selectAll(){const e=this.getState();return e.ids.map(r=>e.entities[r])}reset(){this.setEntitiesState(this.initialState),this.markAsDirtyAfterReset()}addOne(e){this.addEntityOne(e)}addMany(e){this.addEntitiesMany(e)}setOne(e){this.setEntityOne(e)}setMany(e){this.setEntitiesMany(e)}setAll(e){this.setEntitiesAll(e)}updateOne(e){this.updateEntitiesMany([e])}updateMany(e){this.updateEntitiesMany(e)}upsertOne(e){this.upsertEntitiesMany([e])}upsertMany(e){this.upsertEntitiesMany(e)}removeOne(e){this.removeEntitiesMany([e])}removeMany(e){this.removeEntitiesMany(e)}removeByEntity(e){const r=this.selectId(e);this.removeEntitiesMany([r])}removeByEntities(e){const r=[];for(const a of e){const u=this.selectId(a);r.push(u)}this.removeEntitiesMany(r)}removeAll(){this.setEntitiesState(this.initialState)}sort(e){this.comparator=null!=e?e:this.comparator,hu(this.comparator)?console.warn("You must set the compare function before sorting."):this.setEntitiesState(this.getState())}addEntityOne(e){const r=this.getState(),a=this.selectIdValue(e);a in r.entities||this.setEntitiesState(Object.assign(Object.assign({},r),{ids:[...r.ids,a],entities:Object.assign(Object.assign({},r.entities),{[a]:e})}))}addEntitiesMany(e){const r=this.getState(),a={},u=[];for(const p of e){const _=this.selectIdValue(p);_ in r.entities||_ in a||(u.push(_),a[_]=p)}u.length&&this.setEntitiesState(Object.assign(Object.assign({},r),{ids:[...r.ids,...u],entities:Object.assign(Object.assign({},r.entities),a)}))}setEntitiesAll(e){const r=this.getState(),a={},u=[];for(const p of e){const _=this.selectIdValue(p);_ in a||(u.push(_),a[_]=p)}this.setEntitiesState(Object.assign(Object.assign({},r),{ids:u,entities:a}))}setEntityOne(e){const r=this.getState(),a=this.selectIdValue(e);this.setEntitiesState(Object.assign(Object.assign({},r),a in r.entities?{entities:Object.assign(Object.assign({},r.entities),{[a]:e})}:{ids:[...r.ids,a],entities:Object.assign(Object.assign({},r.entities),{[a]:e})}))}setEntitiesMany(e){for(const r of e)this.setEntityOne(r)}updateEntitiesMany(e){const r=this.getState(),a=e.filter(_=>_.id in r.entities);if(0===a.length)return;const u=this.generateKeyMap(r),p=Object.assign({},r.entities);for(const _ of a){const D=this.updateOrigin(p,_),M=this.selectIdValue(D);M!==_.id&&(delete u[_.id],delete p[_.id]),u[_.id]=M,p[M]=D}this.setEntitiesState(Object.assign(Object.assign({},r),{ids:r.ids.map(_=>{var D;return null!==(D=u[_])&&void 0!==D?D:_}),entities:p}))}upsertEntitiesMany(e){const r=this.getState(),a=[],u=[];for(const p of e){const _=this.selectIdValue(p);_ in r.entities?a.push({id:_,changes:p}):u.push(p)}this.updateMany(a),this.addMany(u)}removeEntitiesMany(e){const r=this.getState(),a=this.generateKeyMap(r),u=Object.assign({},r.entities);for(const p of e)p in u&&(delete a[p],delete u[p]);this.setEntitiesState(Object.assign(Object.assign({},r),{ids:r.ids.filter(p=>p in a),entities:u}))}setEntitiesState(e){const r=this.sortKeysByComparator(e.ids,e.entities);this.ctx.setState(Object.assign(Object.assign({},e),{ids:r,entities:e.entities}))}sortKeysByComparator(e,r){if(hu(this.comparator))return e;const a=e.slice(),u=this.comparator;return"function"==typeof u?a.sort((p,_)=>u(r[p],r[_])):this.sortByComparatorOptions(a,u,r)}sortByComparatorOptions(e,r,a){switch(null==r?void 0:r.sortByOrder){case kP.ASC:return e.sort((u,p)=>function(n,t,e){return(null==t?void 0:t[n])>(null==e?void 0:e[n])?1:(null==t?void 0:t[n])<(null==e?void 0:e[n])?-1:0}(null==r?void 0:r.sortBy,a[u],a[p]));case kP.DESC:return e.sort((u,p)=>function(n,t,e){return(null==t?void 0:t[n])>(null==e?void 0:e[n])?-1:(null==t?void 0:t[n])<(null==e?void 0:e[n])?1:0}(null==r?void 0:r.sortBy,a[u],a[p]));default:return Uc()&&console.warn(`Invalid --\x3e { sortByOrder: "${null==r?void 0:r.sortByOrder}" } not supported!`),e}}generateKeyMap(e){return e.ids.reduce((r,a)=>(r[a]=a,r),{})}updateOrigin(e,r){return Object.assign(Object.assign({},e[r.id]),r.changes)}selectIdValue(e){const r=this.selectId(e);return hu(r)&&Uc()&&console.warn(`The entity passed to the 'selectId' implementation returned ${r}.`,"You should probably provide your own 'selectId' implementation.","The entity that was passed:",e,"The current `selectId` implementation: (entity: V): K => entity.id"),r}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Cr(n)))(r||n)}}(),n.\u0275prov=ot({token:n,factory:n.\u0275fac}),Vi([og(),ln("design:type",Object),ln("design:paramtypes",[])],n.prototype,"snapshot",null),Vi([og(),ln("design:type",Array),ln("design:paramtypes",[])],n.prototype,"ids",null),Vi([og(),ln("design:type",Object),ln("design:paramtypes",[])],n.prototype,"entities",null),Vi([og(),ln("design:type",Array),ln("design:paramtypes",[])],n.prototype,"entitiesArray",null),Vi([og(),ln("design:type",ae),ln("design:paramtypes",[])],n.prototype,"ids$",null),Vi([og(),ln("design:type",ae),ln("design:paramtypes",[])],n.prototype,"entities$",null),Vi([og(),ln("design:type",ae),ln("design:paramtypes",[])],n.prototype,"entitiesArray$",null),Vi([Jo(),ln("design:type",Function),ln("design:paramtypes",[]),ln("design:returntype",void 0)],n.prototype,"reset",null),Vi([Jo(),fu(0,pu("entity")),ln("design:type",Function),ln("design:paramtypes",[Object]),ln("design:returntype",void 0)],n.prototype,"addOne",null),Vi([Jo(),fu(0,pu("entities")),ln("design:type",Function),ln("design:paramtypes",[Array]),ln("design:returntype",void 0)],n.prototype,"addMany",null),Vi([Jo(),fu(0,pu("entity")),ln("design:type",Function),ln("design:paramtypes",[Object]),ln("design:returntype",void 0)],n.prototype,"setOne",null),Vi([Jo(),fu(0,pu("entities")),ln("design:type",Function),ln("design:paramtypes",[Array]),ln("design:returntype",void 0)],n.prototype,"setMany",null),Vi([Jo(),fu(0,pu("entities")),ln("design:type",Function),ln("design:paramtypes",[Array]),ln("design:returntype",void 0)],n.prototype,"setAll",null),Vi([Jo(),fu(0,pu("update")),ln("design:type",Function),ln("design:paramtypes",[Object]),ln("design:returntype",void 0)],n.prototype,"updateOne",null),Vi([Jo(),fu(0,pu("updates")),ln("design:type",Function),ln("design:paramtypes",[Array]),ln("design:returntype",void 0)],n.prototype,"updateMany",null),Vi([Jo(),fu(0,pu("entity")),ln("design:type",Function),ln("design:paramtypes",[Object]),ln("design:returntype",void 0)],n.prototype,"upsertOne",null),Vi([Jo(),fu(0,pu("entities")),ln("design:type",Function),ln("design:paramtypes",[Array]),ln("design:returntype",void 0)],n.prototype,"upsertMany",null),Vi([Jo(),fu(0,pu("id")),ln("design:type",Function),ln("design:paramtypes",[Object]),ln("design:returntype",void 0)],n.prototype,"removeOne",null),Vi([Jo(),fu(0,pu("ids")),ln("design:type",Function),ln("design:paramtypes",[Array]),ln("design:returntype",void 0)],n.prototype,"removeMany",null),Vi([Jo(),fu(0,pu("entity")),ln("design:type",Function),ln("design:paramtypes",[Object]),ln("design:returntype",void 0)],n.prototype,"removeByEntity",null),Vi([Jo(),fu(0,pu("entities")),ln("design:type",Function),ln("design:paramtypes",[Array]),ln("design:returntype",void 0)],n.prototype,"removeByEntities",null),Vi([Jo(),ln("design:type",Function),ln("design:paramtypes",[]),ln("design:returntype",void 0)],n.prototype,"removeAll",null),Vi([Jo(),fu(0,pu("comparator")),ln("design:type",Function),ln("design:paramtypes",[Object]),ln("design:returntype",void 0)],n.prototype,"sort",null),n})(),nH=(()=>{class n extends EK{get snapshot(){return CK(this.getState())}get ctx(){return wK(this.context)}getState(){return this.ctx.getState()}dispatch(e){return this.ctx.dispatch(e)}patchState(e){this.ctx.patchState(e)}setState(e){this.ctx.setState(e)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Cr(n)))(r||n)}}(),n.\u0275prov=ot({token:n,factory:n.\u0275fac}),Vi([og(),ln("design:type",Object),ln("design:paramtypes",[])],n.prototype,"snapshot",null),Vi([Jo(),fu(0,pu("patchValue")),ln("design:type",Function),ln("design:paramtypes",[Object]),ln("design:returntype",void 0)],n.prototype,"patchState",null),Vi([Jo(),fu(0,pu("stateValue")),ln("design:type",Function),ln("design:paramtypes",[Object]),ln("design:returntype",void 0)],n.prototype,"setState",null),Vi([Jo(),ln("design:type",Function),ln("design:paramtypes",[]),ln("design:returntype",void 0)],n.prototype,"reset",null),n})();var gf=pe(5536);let iH=(()=>{class n extends gf.View{constructor(e,r){super(e,r),this.handlers=this.constructor.HANDLER_TYPES.map(p=>new p(this))}static withDataHandlers(e){var r;const a=this.HANDLER_TYPES;return(r=class extends(this){}).HANDLER_TYPES=a.concat(e),r}finalize(){return this.handlers.forEach(e=>{var r;return null===(r=e.finalize)||void 0===r?void 0:r.call(e)}),super.finalize()}}return n.HANDLER_TYPES=[],n})();function rH(n){return t=>(function(n,t){var e;const r=null!==(e=n.signals)&&void 0!==e?e:n.signals=[],a=n.projections?n.projections[0]:void 0;!a||"albersUsa"===a.type||(r.push({name:"tx",update:"width / 2 - 300"},{name:"ty",update:"height / 2"},{name:"scale",value:null!=t.initialZoom?t.initialZoom:t.zoomLevels[0],on:[{events:{type:"wheel",consume:!0,filter:"event.shiftKey"},update:["clamp(scale * pow(1.0015, -event.deltaY * pow(48, event.deltaMode)), ",t.zoomLevels[0],", ",t.zoomLevels[1],")"].join("")}]},{name:"angles",value:[0,0],on:[{events:"mousedown",update:"[rotateX, centerY]"}]},{name:"cloned",value:null,on:[{events:"mousedown",update:"copy('"+a.name+"')"}]},{name:"start",value:null,on:[{events:"mousedown",update:"invert(cloned, xy())"}]},{name:"drag",value:null,on:[{events:"[mousedown[event.shiftKey], window:mouseup] > window:mousemove",update:"invert(cloned, xy())"}]},{name:"delta",value:null,on:[{events:{signal:"drag"},update:"[drag[0] - start[0], start[1] - drag[1]]"}]},{name:"rotateX",value:t.center[0],on:[{events:{signal:"delta"},update:"angles[0] + delta[0]"}]},{name:"centerY",value:t.center[1],on:[{events:{signal:"delta"},update:"clamp(angles[1] + delta[1], -60, 60)"}]}),Object.assign(a,{scale:{signal:"scale"},rotate:[{signal:"rotateX"},0,0],center:[0,{signal:"centerY"}],translate:[{signal:"tx"},{signal:"ty"}]}),delete a.size)}(t,n),t)}rH({center:[86.44305475,39.76622477],zoomLevels:[3200,25e4],initialZoom:6400}),rH({center:[96,39],zoomLevels:[10,25e4],initialZoom:600});const zie=[{CASE_NUMBER:"",RANK:0,AGE:0,PERIOD:0,TIME_BEFORE_DEATH:0,ALL_TYPES:0,HEALTH_ENCOUNTERS:0,OPIOID_PRESCRIPTIONS:0,INCARCERATIONS:0,OVERDOSES:0,NUM_ENCOUNTERS_TOTAL:0,AGE_RANK:0,HEALTH_RANK:0,OVERDOSE_RANK:0,INCARCERATIONS_RANK:0,PRESCRIPTIONS_RANK:0,FINAL_RANK:0,TIME_FIRST_OD:0,TIME_FIRST_RX:0,OD_DIFF:0,RX_DIFF:0},{CASE_NUMBER:"",RANK:0,AGE:0,PERIOD:0,TIME_BEFORE_DEATH:120,ALL_TYPES:0,HEALTH_ENCOUNTERS:0,OPIOID_PRESCRIPTIONS:0,INCARCERATIONS:0,OVERDOSES:0,NUM_ENCOUNTERS_TOTAL:0,AGE_RANK:0,HEALTH_RANK:0,OVERDOSE_RANK:0,INCARCERATIONS_RANK:0,PRESCRIPTIONS_RANK:0,FINAL_RANK:0,TIME_FIRST_OD:0,TIME_FIRST_RX:0,OD_DIFF:0,RX_DIFF:0}];let sH=(()=>{class n{constructor(e){this.view=e,this.options=this.constructor.OPTIONS,this.sortBy="HEALTH_RANK",this.sortRanks={},e.addDataListener("source",(r,a)=>{this.data=a,this.sortRanks=this.compileSortRanks(a),this.scheduleUpdateCall()}),e.addSignalListener("sort_by__field",(r,a)=>{this.sortBy=a,this.scheduleUpdateCall()}),e.addSignalListener("rank",(r,a)=>{this.ranks=a.RANK,this.ranksLookup=void 0,this.scheduleUpdateCall()}),e.addSignalListener("age",(r,a)=>{this.age=a.AGE,this.scheduleUpdateCall()}),e.addSignalListener("encounters",(r,a)=>{this.numEncounters=a.NUM_ENCOUNTERS_TOTAL,this.scheduleUpdateCall()})}static withOptions(e){var r;return(r=class extends(this){}).OPTIONS=e,r}finalize(){this.clearScheduledUpdateCall(),this.data=void 0,this.sortBy="HEALTH_RANK",this.sortRanks={},this.ranks=void 0,this.ranksLookup=void 0,this.age=void 0,this.numEncounters=void 0}scheduleUpdateCall(){var e;this.clearScheduledUpdateCall(),this.scheduledUpdateCall=setTimeout(()=>LV(this,void 0,void 0,function*(){this.clearScheduledUpdateCall(),this.updateData(),this.view.resize(),yield this.view.runAsync()}),null!==(e=this.options.debounceTime)&&void 0!==e?e:500)}clearScheduledUpdateCall(){void 0!==this.scheduledUpdateCall&&(clearTimeout(this.scheduledUpdateCall),this.scheduledUpdateCall=void 0)}updateData(){let{data:e=[]}=this;e=this.filterByRank(e),e=this.filterByAge(e),e=this.filterByEncounters(e),e=this.sortData(e),e=this.limitData(e),e=this.setRanks(e),0===e.length&&(e=zie),this.view.data("processed_source",e)}compileSortRanks(e){var r;const a={};for(const{CASE_NUMBER:u,AGE_RANK:p,HEALTH_RANK:_,OVERDOSE_RANK:D,TIME_FIRST_OD:M,TIME_FIRST_RX:I,OD_DIFF:V,RX_DIFF:j,INCARCERATIONS_RANK:G,PRESCRIPTIONS_RANK:Z}of e)null!==(r=a[u])&&void 0!==r||(a[u]={AGE_RANK:p,HEALTH_RANK:_,OVERDOSE_RANK:D,TIME_FIRST_OD:M,TIME_FIRST_RX:I,OD_DIFF:V,RX_DIFF:j,INCARCERATIONS_RANK:G,PRESCRIPTIONS_RANK:Z});return a}filterByRank(e){var r;const{ranks:a}=this;if(void 0===a)return e;const u=null!==(r=this.ranksLookup)&&void 0!==r?r:this.ranksLookup=new Set(a);return e.filter(({RANK:p})=>u.has(p))}filterByAge(e){const{age:r}=this;if(void 0===r)return e;const[a,u]=r;return e.filter(({AGE:p})=>a<=p&&p<=u)}filterByEncounters(e){const{numEncounters:r}=this;if(void 0===r)return e;const[a,u]=r;return e.filter(({NUM_ENCOUNTERS_TOTAL:p})=>a<=p&&p<=u)}sortData(e){const{sortBy:r,sortRanks:a}=this,u=p=>a[p.CASE_NUMBER][r];return e.sort((p,_)=>u(p)-u(_))}limitData(e){const{options:{maxCasesShown:r=43}}=this,a=new Set,u=[];for(const p of e)a.has(p.CASE_NUMBER)?u.push(p):a.size<r&&(u.push(p),a.add(p.CASE_NUMBER));return u}setRanks(e){let r="",a=-1;return e.map(u=>(u.CASE_NUMBER!==r&&(r=u.CASE_NUMBER,a+=1),Object.assign(Object.assign(Object.assign({},u),(0,gf.ingest)({})),{FINAL_RANK:a})))}}return n.OPTIONS={},n})();const Uie={Gender:"SEX",Age:"AGE","Opioid Prescriptions within last year before death":"OPIOID_PRESCRIPTIONS_1YEAR","Any Opioid Prescriptions before death":"ANY_PRESCRIPTIONS","Prescription vs. Illicit Drugs":"ILLICIT_V_PRESCRIPTION"};class Hie{constructor(t){this.view=t,this.subsets={},this.setData(),this.view.addSignalListener("data_variable_selection",(e,r)=>this.updateDataVariable(r.LABEL&&r.LABEL.length>0?r.LABEL[0]:void 0))}setData(){return LV(this,void 0,void 0,function*(){const t=yield(0,gf.loader)().load("assets/generated/vis-geomap-opioid-deaths.csv").then(e=>(0,gf.read)(e,{type:"csv",parse:{N_OPIOID_PRESCRIPTIONS:"number",LATITUDE:"number",LONGITUDE:"number",PERIOD:"date"}}));Object.entries(Uie).forEach(([e,r])=>{this.subsets[e]=t.filter(a=>a.DATA_VARIABLE===r)}),this.updateDataVariable("Age")})}updateDataVariable(t){return LV(this,void 0,void 0,function*(){t&&(yield this.view.runAsync(),this.view.data("source",this.subsets[t]||[]))})}finalize(){this.subsets={}}}const DK=[{id:"vis1-geomap-of-opioid-deaths",title:"Accidental Drug Overdose Deaths",description:"Marion County by Place of Injury (2010-2018)",spec:"assets/pages/vis1-geomap-of-opioid-deaths/vis.vl.json",options:{renderer:"canvas",actions:!0,patch:n=>((n=rH({center:[87.44305475,38.76622477],zoomLevels:[3200,25e4],initialZoom:6400})(n)).width=941,n.height=941,n),viewClass:class extends gf.View{constructor(t,e){super(t,e),this.dataHandler=new Hie(this)}finalize(){return this.dataHandler.finalize(),super.finalize()}}},content:"assets/pages/vis1-geomap-of-opioid-deaths/README.md",sql:"assets/pages/vis1-geomap-of-opioid-deaths/data.sql",csv:"assets/generated/vis-geomap-opioid-deaths.csv"},{id:"vis2-age-and-gender",title:"Age Group & Gender of Accidental Drug Overdose",description:"Marion County Deaths & Population (2010-2018)",spec:"assets/pages/vis2-age-and-gender/vis.vl.json",options:{},content:"assets/pages/vis2-age-and-gender/README.md",sql:"assets/pages/vis2-age-and-gender/data.sql",csv:"assets/generated/vis2-data/death-counts.csv"},{id:"vis3-heatmap-of-accidental-overdoses",title:"Age Group & Gender of Accidental Drug Overdose",description:"Marion County by Deaths & Population (2010-2018)",spec:"assets/pages/vis3-heatmap-of-accidental-overdoses/vis.vl.json",options:{},content:"assets/pages/vis3-heatmap-of-accidental-overdoses/README.md",sql:"assets/pages/vis4-combined-visualization/data.sql",csv:"assets/generated/visualization4/data.csv"},{id:"vis4-combined-visualization",title:"Accidental Drug Overdose Deaths",description:"Marion County by Substance, Sex, & Age (2010-2018)",spec:"assets/pages/vis4-combined-visualization/vis.vl.json",options:{},content:"assets/pages/vis4-combined-visualization/README.md",sql:"assets/pages/vis4-combined-visualization/data.sql",csv:"assets/generated/visualization4/data.csv"},{id:"vis5-opioid-trajectories",title:"Opioid Death Datasets",description:"Marion County by History of Opioid Prescription, Previous Overdose, Incarceration, Health Data (2010-2018)",spec:"assets/pages/vis5-opioid-trajectories/vis.vl.json",options:{},content:"assets/pages/vis5-opioid-trajectories/README.md",sql:"assets/pages/vis5-opioid-trajectories/data.sql",csv:"assets/generated/visualization5/data.csv"},{id:"vis6-maps-of-health",title:"Maps of Health #1",description:"Marion County Encounters Over Time (2004 - 2018)",spec:"assets/pages/vis6-maps-of-health/vis.vl.json",options:{renderer:"canvas",actions:!0,width:1268,viewClass:iH.withDataHandlers([sH])},content:"assets/pages/vis6-maps-of-health/README.md",sql:"assets/pages/vis6-maps-of-health/data.sql",csv:"assets/generated/visualization6/data.csv"},{id:"vis6-maps-of-health-v2",title:"Maps of Health #2",description:"Marion County Encounters Over Time (2004 - 2018)",spec:"assets/pages/vis6-maps-of-health/vis2.vl.json",options:{renderer:"canvas",actions:!0,width:1268,viewClass:iH.withDataHandlers([sH])},content:"assets/pages/vis6-maps-of-health/README.md",sql:"assets/pages/vis6-maps-of-health/data.sql",csv:"assets/generated/visualization6/data.csv"},{id:"vis6-maps-of-health-v3",title:"Maps of Health #3",description:"Marion County Encounters Over Time (2004 - 2018)",spec:"assets/pages/vis6-maps-of-health/vis3.vl.json",options:{renderer:"canvas",actions:!0,width:1268,viewClass:iH.withDataHandlers([sH])},content:"assets/pages/vis6-maps-of-health/README.md",sql:"assets/pages/vis6-maps-of-health/data.sql",csv:"assets/generated/visualization6/data.csv"}];let xK=(()=>{let n=class extends tH{ngxsOnInit(){this.setAll(DK)}};return n.\u0275fac=function(){let t;return function(r){return(t||(t=Cr(n)))(r||n)}}(),n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n=Vi([Dk(),fS({name:"visualizations"})],n),n})(),Gie=(()=>{class n{constructor(e){this.service=e}resolve(e){const r=e.paramMap.get("id");return null===r?rf:this.service.entities$.pipe(uS(r),so(1))}}return n.\u0275fac=function(e){return new(e||n)(se(xK))},n.\u0275prov=ot({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Yie{constructor(t,e){this.predicate=t,this.inclusive=e}call(t,e){return e.subscribe(new Xie(t,this.predicate,this.inclusive))}}class Xie extends Dt{constructor(t,e,r){super(t),this.predicate=e,this.inclusive=r,this.index=0}_next(t){const e=this.destination;let r;try{r=this.predicate(t,this.index++)}catch(a){return void e.error(a)}this.nextOrComplete(t,r)}nextOrComplete(t,e){const r=this.destination;Boolean(e)?r.next(t):(this.inclusive&&r.next(t),r.complete())}}const SK=l5();class Kie{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=io(-this._previousScrollPosition.left),t.style.top=io(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,r=t.style,a=this._document.body.style,u=r.scrollBehavior||"",p=a.scrollBehavior||"";this._isEnabled=!1,r.left=this._previousHTMLStyles.left,r.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),SK&&(r.scrollBehavior=a.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),SK&&(r.scrollBehavior=u,a.scrollBehavior=p)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,r=this._viewportRuler.getViewportSize();return e.scrollHeight>r.height||e.scrollWidth>r.width}}class Qie{constructor(t,e,r,a){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=r,this._config=a,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class AK{enable(){}disable(){}attach(){}}function oH(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function MK(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class Jie{constructor(t,e,r,a){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=r,this._config=a,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:r,height:a}=this._viewportRuler.getViewportSize();oH(e,[{width:r,height:a,bottom:a,right:r,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Zie=(()=>{class n{constructor(e,r,a,u){this._scrollDispatcher=e,this._viewportRuler=r,this._ngZone=a,this.noop=()=>new AK,this.close=p=>new Qie(this._scrollDispatcher,this._ngZone,this._viewportRuler,p),this.block=()=>new Kie(this._viewportRuler,this._document),this.reposition=p=>new Jie(this._scrollDispatcher,this._viewportRuler,this._ngZone,p),this._document=u}}return n.\u0275fac=function(e){return new(e||n)(se(aC),se(L_),se(On),se(An))},n.\u0275prov=ot({factory:function(){return new n(se(aC),se(L_),se(On),se(An))},token:n,providedIn:"root"}),n})();class aH{constructor(t){if(this.scrollStrategy=new AK,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const r of e)void 0!==t[r]&&(this[r]=t[r])}}}class ere{constructor(t,e,r,a,u){this.offsetX=r,this.offsetY=a,this.panelClass=u,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class tre{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let OK=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const r=this._attachedOverlays.indexOf(e);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(se(An))},n.\u0275prov=ot({factory:function(){return new n(se(An))},token:n,providedIn:"root"}),n})(),nre=(()=>{class n extends OK{constructor(e){super(e),this._keydownListener=r=>{const a=this._attachedOverlays;for(let u=a.length-1;u>-1;u--)if(a[u]._keydownEvents.observers.length>0){a[u]._keydownEvents.next(r);break}}}add(e){super.add(e),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(se(An))},n.\u0275prov=ot({factory:function(){return new n(se(An))},token:n,providedIn:"root"}),n})(),ire=(()=>{class n extends OK{constructor(e,r){super(e),this._platform=r,this._cursorStyleIsSet=!1,this._clickListener=a=>{const u=rC(a),p=this._attachedOverlays.slice();for(let _=p.length-1;_>-1;_--){const D=p[_];if(!(D._outsidePointerEvents.observers.length<1)&&D.hasAttached()){if(D.overlayElement.contains(u))break;D._outsidePointerEvents.next(a)}}}}add(e){if(super.add(e),!this._isAttached){const r=this._document.body;r.addEventListener("click",this._clickListener,!0),r.addEventListener("auxclick",this._clickListener,!0),r.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return n.\u0275fac=function(e){return new(e||n)(se(An),se(rs))},n.\u0275prov=ot({factory:function(){return new n(se(An),se(rs))},token:n,providedIn:"root"}),n})(),xk=(()=>{class n{constructor(e,r){this._platform=r,this._document=e}ngOnDestroy(){const e=this._containerElement;e&&e.parentNode&&e.parentNode.removeChild(e)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||tN()){const a=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let u=0;u<a.length;u++)a[u].parentNode.removeChild(a[u])}const r=this._document.createElement("div");r.classList.add(e),tN()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return n.\u0275fac=function(e){return new(e||n)(se(An),se(rs))},n.\u0275prov=ot({factory:function(){return new n(se(An),se(rs))},token:n,providedIn:"root"}),n})();class rre{constructor(t,e,r,a,u,p,_,D,M){this._portalOutlet=t,this._host=e,this._pane=r,this._config=a,this._ngZone=u,this._keyboardDispatcher=p,this._document=_,this._location=D,this._outsideClickDispatcher=M,this._backdropElement=null,this._backdropClick=new We,this._attachments=new We,this._detachments=new We,this._locationChanges=T.EMPTY,this._backdropClickHandler=I=>this._backdropClick.next(I),this._keydownEvents=new We,this._outsidePointerEvents=new We,a.scrollStrategy&&(this._scrollStrategy=a.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=a.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(so(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=io(this._config.width),t.height=io(this._config.height),t.minWidth=io(this._config.minWidth),t.minHeight=io(this._config.minHeight),t.maxWidth=io(this._config.maxWidth),t.maxHeight=io(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(!t)return;let e;const r=()=>{t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",r),this._disposeBackdrop(t)),this._config.backdropClass&&this._toggleClasses(t,this._config.backdropClass,!1),clearTimeout(e)};t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",r)}),t.style.pointerEvents="none",e=this._ngZone.runOutsideAngular(()=>setTimeout(r,500))}_toggleClasses(t,e,r){const a=t.classList;nN(e).forEach(u=>{u&&(r?a.add(u):a.remove(u))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(yi(Ii(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.parentNode&&t.parentNode.removeChild(t),this._backdropElement===t&&(this._backdropElement=null))}}const TK="cdk-overlay-connected-position-bounding-box",sre=/([A-Za-z%]+)$/;class kK{constructor(t,e,r,a,u){this._viewportRuler=e,this._document=r,this._platform=a,this._overlayContainer=u,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new We,this._resizeSubscription=T.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(TK),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,r=this._viewportRect,a=[];let u;for(let p of this._preferredPositions){let _=this._getOriginPoint(t,p),D=this._getOverlayPoint(_,e,p),M=this._getOverlayFit(D,e,r,p);if(M.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(p,_);this._canFitWithFlexibleDimensions(M,D,r)?a.push({position:p,origin:_,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(_,p)}):(!u||u.overlayFit.visibleArea<M.visibleArea)&&(u={overlayFit:M,overlayPoint:D,originPoint:_,position:p,overlayRect:e})}if(a.length){let p=null,_=-1;for(const D of a){const M=D.boundingBoxRect.width*D.boundingBoxRect.height*(D.position.weight||1);M>_&&(_=M,p=D)}return this._isPushed=!1,void this._applyPosition(p.position,p.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(u.position,u.originPoint);this._applyPosition(u.position,u.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&hS(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(TK),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let r,a;if("center"==e.originX)r=t.left+t.width/2;else{const u=this._isRtl()?t.right:t.left,p=this._isRtl()?t.left:t.right;r="start"==e.originX?u:p}return a="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom,{x:r,y:a}}_getOverlayPoint(t,e,r){let a,u;return a="center"==r.overlayX?-e.width/2:"start"===r.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,u="center"==r.overlayY?-e.height/2:"top"==r.overlayY?0:-e.height,{x:t.x+a,y:t.y+u}}_getOverlayFit(t,e,r,a){const u=IK(e);let{x:p,y:_}=t,D=this._getOffset(a,"x"),M=this._getOffset(a,"y");D&&(p+=D),M&&(_+=M);let j=0-_,G=_+u.height-r.height,Z=this._subtractOverflows(u.width,0-p,p+u.width-r.width),ye=this._subtractOverflows(u.height,j,G),be=Z*ye;return{visibleArea:be,isCompletelyWithinViewport:u.width*u.height===be,fitsInViewportVertically:ye===u.height,fitsInViewportHorizontally:Z==u.width}}_canFitWithFlexibleDimensions(t,e,r){if(this._hasFlexibleDimensions){const a=r.bottom-e.y,u=r.right-e.x,p=FK(this._overlayRef.getConfig().minHeight),_=FK(this._overlayRef.getConfig().minWidth),M=t.fitsInViewportHorizontally||null!=_&&_<=u;return(t.fitsInViewportVertically||null!=p&&p<=a)&&M}return!1}_pushOverlayOnScreen(t,e,r){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const a=IK(e),u=this._viewportRect,p=Math.max(t.x+a.width-u.width,0),_=Math.max(t.y+a.height-u.height,0),D=Math.max(u.top-r.top-t.y,0),M=Math.max(u.left-r.left-t.x,0);let I=0,V=0;return I=a.width<=u.width?M||-p:t.x<this._viewportMargin?u.left-r.left-t.x:0,V=a.height<=u.height?D||-_:t.y<this._viewportMargin?u.top-r.top-t.y:0,this._previousPushAmount={x:I,y:V},{x:t.x+I,y:t.y+V}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const r=this._getScrollVisibility(),a=new tre(t,r);this._positionChanges.next(a)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let r,a=t.overlayY;r="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let u=0;u<e.length;u++)e[u].style.transformOrigin=`${r} ${a}`}_calculateBoundingBoxRect(t,e){const r=this._viewportRect,a=this._isRtl();let u,p,_,I,V,j;if("top"===e.overlayY)p=t.y,u=r.height-p+this._viewportMargin;else if("bottom"===e.overlayY)_=r.height-t.y+2*this._viewportMargin,u=r.height-_+this._viewportMargin;else{const G=Math.min(r.bottom-t.y+r.top,t.y),Z=this._lastBoundingBoxSize.height;u=2*G,p=t.y-G,u>Z&&!this._isInitialRender&&!this._growAfterOpen&&(p=t.y-Z/2)}if("end"===e.overlayX&&!a||"start"===e.overlayX&&a)j=r.width-t.x+this._viewportMargin,I=t.x-this._viewportMargin;else if("start"===e.overlayX&&!a||"end"===e.overlayX&&a)V=t.x,I=r.right-t.x;else{const G=Math.min(r.right-t.x+r.left,t.x),Z=this._lastBoundingBoxSize.width;I=2*G,V=t.x-G,I>Z&&!this._isInitialRender&&!this._growAfterOpen&&(V=t.x-Z/2)}return{top:p,left:V,bottom:_,right:j,width:I,height:u}}_setBoundingBoxStyles(t,e){const r=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(r.height=Math.min(r.height,this._lastBoundingBoxSize.height),r.width=Math.min(r.width,this._lastBoundingBoxSize.width));const a={};if(this._hasExactPosition())a.top=a.left="0",a.bottom=a.right=a.maxHeight=a.maxWidth="",a.width=a.height="100%";else{const u=this._overlayRef.getConfig().maxHeight,p=this._overlayRef.getConfig().maxWidth;a.height=io(r.height),a.top=io(r.top),a.bottom=io(r.bottom),a.width=io(r.width),a.left=io(r.left),a.right=io(r.right),a.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",a.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",u&&(a.maxHeight=io(u)),p&&(a.maxWidth=io(p))}this._lastBoundingBoxSize=r,hS(this._boundingBox.style,a)}_resetBoundingBoxStyles(){hS(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){hS(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const r={},a=this._hasExactPosition(),u=this._hasFlexibleDimensions,p=this._overlayRef.getConfig();if(a){const I=this._viewportRuler.getViewportScrollPosition();hS(r,this._getExactOverlayY(e,t,I)),hS(r,this._getExactOverlayX(e,t,I))}else r.position="static";let _="",D=this._getOffset(e,"x"),M=this._getOffset(e,"y");D&&(_+=`translateX(${D}px) `),M&&(_+=`translateY(${M}px)`),r.transform=_.trim(),p.maxHeight&&(a?r.maxHeight=io(p.maxHeight):u&&(r.maxHeight="")),p.maxWidth&&(a?r.maxWidth=io(p.maxWidth):u&&(r.maxWidth="")),hS(this._pane.style,r)}_getExactOverlayY(t,e,r){let a={top:"",bottom:""},u=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(u=this._pushOverlayOnScreen(u,this._overlayRect,r));let p=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return u.y-=p,"bottom"===t.overlayY?a.bottom=this._document.documentElement.clientHeight-(u.y+this._overlayRect.height)+"px":a.top=io(u.y),a}_getExactOverlayX(t,e,r){let p,a={left:"",right:""},u=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(u=this._pushOverlayOnScreen(u,this._overlayRect,r)),p=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===p?a.right=this._document.documentElement.clientWidth-(u.x+this._overlayRect.width)+"px":a.left=io(u.x),a}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),r=this._scrollables.map(a=>a.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:MK(t,r),isOriginOutsideView:oH(t,r),isOverlayClipped:MK(e,r),isOverlayOutsideView:oH(e,r)}}_subtractOverflows(t,...e){return e.reduce((r,a)=>r-Math.max(a,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,r=this._viewportRuler.getViewportScrollPosition();return{top:r.top+this._viewportMargin,left:r.left+this._viewportMargin,right:r.left+t-this._viewportMargin,bottom:r.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&nN(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof Mn)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,r=t.height||0;return{top:t.y,bottom:t.y+r,left:t.x,right:t.x+e,height:r,width:e}}}function hS(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function FK(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(sre);return e&&"px"!==e?null:parseFloat(t)}return n||null}function IK(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}class ore{constructor(t,e,r,a,u,p,_){this._preferredPositions=[],this._positionStrategy=new kK(r,a,u,p,_).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,e),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,e,r,a){const u=new ere(t,e,r,a);return this._preferredPositions.push(u),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}const RK="cdk-global-overlay-wrapper";class are{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(RK),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,r=this._overlayRef.getConfig(),{width:a,height:u,maxWidth:p,maxHeight:_}=r,D=!("100%"!==a&&"100vw"!==a||p&&"100%"!==p&&"100vw"!==p),M=!("100%"!==u&&"100vh"!==u||_&&"100%"!==_&&"100vh"!==_);t.position=this._cssPosition,t.marginLeft=D?"0":this._leftOffset,t.marginTop=M?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,D?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=M?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,r=e.style;e.classList.remove(RK),r.justifyContent=r.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let lre=(()=>{class n{constructor(e,r,a,u){this._viewportRuler=e,this._document=r,this._platform=a,this._overlayContainer=u}global(){return new are}connectedTo(e,r,a){return new ore(r,a,e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(e){return new kK(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(se(L_),se(An),se(rs),se(xk))},n.\u0275prov=ot({factory:function(){return new n(se(L_),se(An),se(rs),se(xk))},token:n,providedIn:"root"}),n})(),ure=0,pS=(()=>{class n{constructor(e,r,a,u,p,_,D,M,I,V,j){this.scrollStrategies=e,this._overlayContainer=r,this._componentFactoryResolver=a,this._positionBuilder=u,this._keyboardDispatcher=p,this._injector=_,this._ngZone=D,this._document=M,this._directionality=I,this._location=V,this._outsideClickDispatcher=j}create(e){const r=this._createHostElement(),a=this._createPaneElement(r),u=this._createPortalOutlet(a),p=new aH(e);return p.direction=p.direction||this._directionality.value,new rre(u,r,a,p,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const r=this._document.createElement("div");return r.id="cdk-overlay-"+ure++,r.classList.add("cdk-overlay-pane"),e.appendChild(r),r}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(Hm)),new $te(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(se(Zie),se(xk),se(Lu),se(lre),se(nre),se(ai),se(On),se(An),se(vh),se(Jd),se(ire))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();const cre=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],NK=new Ft("cdk-connected-overlay-scroll-strategy");let dre=(()=>{class n{constructor(e){this.elementRef=e}}return n.\u0275fac=function(e){return new(e||n)(ue(Mn))},n.\u0275dir=kt({type:n,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),n})(),PK=(()=>{class n{constructor(e,r,a,u,p){this._overlay=e,this._dir=p,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=T.EMPTY,this._attachSubscription=T.EMPTY,this._detachSubscription=T.EMPTY,this._positionSubscription=T.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new Vn,this.positionChange=new Vn,this.attach=new Vn,this.detach=new Vn,this.overlayKeydown=new Vn,this.overlayOutsideClick=new Vn,this._templatePortal=new EP(r,a),this._scrollStrategyFactory=u,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(e){this._hasBackdrop=yr(e)}get lockPosition(){return this._lockPosition}set lockPosition(e){this._lockPosition=yr(e)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(e){this._flexibleDimensions=yr(e)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(e){this._growAfterOpen=yr(e)}get push(){return this._push}set push(e){this._push=yr(e)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=cre);const e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(r=>{this.overlayKeydown.next(r),27===r.keyCode&&!this.disableClose&&!bh(r)&&(r.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(r=>{this.overlayOutsideClick.next(r)})}_buildConfig(){const e=this._position=this.positionStrategy||this._createPositionStrategy(),r=new aH({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(r.width=this.width),(this.height||0===this.height)&&(r.height=this.height),(this.minWidth||0===this.minWidth)&&(r.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(r.minHeight=this.minHeight),this.backdropClass&&(r.backdropClass=this.backdropClass),this.panelClass&&(r.panelClass=this.panelClass),r}_updatePositionStrategy(e){const r=this.positions.map(a=>({originX:a.originX,originY:a.originY,overlayX:a.overlayX,overlayY:a.overlayY,offsetX:a.offsetX||this.offsetX,offsetY:a.offsetY||this.offsetY,panelClass:a.panelClass||void 0}));return e.setOrigin(this.origin.elementRef).withPositions(r).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const e=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(e),e}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function(n,t=!1){return e=>e.lift(new Yie(n,t))}(()=>this.positionChange.observers.length>0)).subscribe(e=>{this.positionChange.emit(e),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(ue(pS),ue(vt),ue(Ui),ue(NK),ue(vh,8))},n.\u0275dir=kt({type:n,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"],positions:["cdkConnectedOverlayPositions","positions"],origin:["cdkConnectedOverlayOrigin","origin"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[or]}),n})();const hre={provide:NK,deps:[pS],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};let LK=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({providers:[pS,hre],imports:[[P_,FU,I5],I5]}),n})();function pre(n,t){}class lH{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const gre={dialogContainer:a0("dialogContainer",[Xc("void, exit",Xo({opacity:0,transform:"scale(0.7)"})),Xc("enter",Xo({transform:"none"})),of("* => enter",tg("150ms cubic-bezier(0, 0, 0.2, 1)",Xo({transform:"none",opacity:1}))),of("* => void, * => exit",tg("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",Xo({opacity:0})))])};let mre=(()=>{class n extends kU{constructor(e,r,a,u,p,_){super(),this._elementRef=e,this._focusTrapFactory=r,this._changeDetectorRef=a,this._config=p,this._focusMonitor=_,this._animationStateChanged=new Vn,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=D=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(D)),this._ariaLabelledBy=p.ariaLabelledBy||null,this._document=u}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const r=vT(),a=this._elementRef.nativeElement;(!r||r===this._document.body||r===a||a.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=vT())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,r=vT();return e===r||e.contains(r)}}return n.\u0275fac=function(e){return new(e||n)(ue(Mn),ue(CN),ue(F),ue(An,8),ue(lH),ue(B_))},n.\u0275dir=kt({type:n,viewQuery:function(e,r){if(1&e&&Dl(DP,7),2&e){let a;Pi(a=Li())&&(r._portalOutlet=a.first)}},features:[qn]}),n})(),yre=(()=>{class n extends mre{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:r}){"enter"===e?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:r})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:r}))}_onAnimationStart({toState:e,totalTime:r}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:r}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:r})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Cr(n)))(r||n)}}(),n.\u0275cmp=Sn({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,r){1&e&&mm("@dialogContainer.start",function(u){return r._onAnimationStart(u)})("@dialogContainer.done",function(u){return r._onAnimationDone(u)}),2&e&&(_l("id",r._id),mi("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledBy)("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),Oc("@dialogContainer",r._state))},features:[qn],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,r){1&e&&cn(0,pre,0,0,"ng-template",0)},directives:[DP],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[gre.dialogContainer]}}),n})(),_re=0;class FP{constructor(t,e,r="mat-dialog-"+_re++){this._overlayRef=t,this._containerInstance=e,this.id=r,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new We,this._afterClosed=new We,this._beforeClosed=new We,this._state=0,e._id=r,e._animationStateChanged.pipe(Wi(a=>"opened"===a.state),so(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(Wi(a=>"closed"===a.state),so(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(Wi(a=>27===a.keyCode&&!this.disableClose&&!bh(a))).subscribe(a=>{a.preventDefault(),uH(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():uH(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(Wi(e=>"closing"===e.state),so(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._overlayRef.updateSize({width:t,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function uH(n,t,e){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=t),n.close(e)}const BK=new Ft("MatDialogData"),vre=new Ft("mat-dialog-default-options"),VK=new Ft("mat-dialog-scroll-strategy"),Cre={provide:VK,deps:[pS],useFactory:function(n){return()=>n.scrollStrategies.block()}};let wre=(()=>{class n{constructor(e,r,a,u,p,_,D,M,I){this._overlay=e,this._injector=r,this._defaultOptions=a,this._parentDialog=u,this._overlayContainer=p,this._dialogRefConstructor=D,this._dialogContainerType=M,this._dialogDataToken=I,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new We,this._afterOpenedAtThisLevel=new We,this._ariaHiddenElements=new Map,this.afterAllClosed=te(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(qo(void 0))),this._scrollStrategy=_}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,r){(r=function(n,t){return Object.assign(Object.assign({},t),n)}(r,this._defaultOptions||new lH)).id&&this.getDialogById(r.id);const a=this._createOverlay(r),u=this._attachDialogContainer(a,r),p=this._attachDialogContent(e,u,a,r);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(p),p.afterClosed().subscribe(()=>this._removeOpenDialog(p)),this.afterOpened.next(p),u._initializeWithAttachedContent(),p}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(r=>r.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const r=this._getOverlayConfig(e);return this._overlay.create(r)}_getOverlayConfig(e){const r=new aH({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(r.backdropClass=e.backdropClass),r}_attachDialogContainer(e,r){const u=ai.create({parent:r&&r.viewContainerRef&&r.viewContainerRef.injector||this._injector,providers:[{provide:lH,useValue:r}]}),p=new TU(this._dialogContainerType,r.viewContainerRef,u,r.componentFactoryResolver);return e.attach(p).instance}_attachDialogContent(e,r,a,u){const p=new this._dialogRefConstructor(a,r,u.id);if(e instanceof vt)r.attachTemplatePortal(new EP(e,null,{$implicit:u.data,dialogRef:p}));else{const _=this._createInjector(u,p,r),D=r.attachComponentPortal(new TU(e,u.viewContainerRef,_));p.componentInstance=D.instance}return p.updateSize(u.width,u.height).updatePosition(u.position),p}_createInjector(e,r,a){const u=e&&e.viewContainerRef&&e.viewContainerRef.injector,p=[{provide:this._dialogContainerType,useValue:a},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:r}];return e.direction&&(!u||!u.get(vh,null,xn.Optional))&&p.push({provide:vh,useValue:{value:e.direction,change:_n()}}),ai.create({parent:u||this._injector,providers:p})}_removeOpenDialog(e){const r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((a,u)=>{a?u.setAttribute("aria-hidden",a):u.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const r=e.parentElement.children;for(let a=r.length-1;a>-1;a--){let u=r[a];u!==e&&"SCRIPT"!==u.nodeName&&"STYLE"!==u.nodeName&&!u.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(u,u.getAttribute("aria-hidden")),u.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let r=e.length;for(;r--;)e[r].close()}}return n.\u0275fac=function(e){return new(e||n)(ue(pS),ue(ai),ue(void 0),ue(void 0),ue(xk),ue(void 0),ue(qh),ue(qh),ue(Ft))},n.\u0275dir=kt({type:n}),n})(),IP=(()=>{class n extends wre{constructor(e,r,a,u,p,_,D){super(e,r,u,_,D,p,FP,yre,BK)}}return n.\u0275fac=function(e){return new(e||n)(se(pS),se(ai),se(Jd,8),se(vre,8),se(VK),se(n,12),se(xk))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})(),Dre=0,xre=(()=>{class n{constructor(e,r,a){this.dialogRef=e,this._elementRef=r,this._dialog=a,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=$K(this._elementRef,this._dialog.openDialogs))}ngOnChanges(e){const r=e._matDialogClose||e._matDialogCloseResult;r&&(this.dialogResult=r.currentValue)}_onButtonClick(e){uH(this.dialogRef,0===e.screenX&&0===e.screenY?"keyboard":"mouse",this.dialogResult)}}return n.\u0275fac=function(e){return new(e||n)(ue(FP,8),ue(Mn),ue(IP))},n.\u0275dir=kt({type:n,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(e,r){1&e&&Cn("click",function(u){return r._onButtonClick(u)}),2&e&&mi("aria-label",r.ariaLabel||null)("type",r.type)},inputs:{type:"type",dialogResult:["mat-dialog-close","dialogResult"],ariaLabel:["aria-label","ariaLabel"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[or]}),n})(),cH=(()=>{class n{constructor(e,r,a){this._dialogRef=e,this._elementRef=r,this._dialog=a,this.id="mat-dialog-title-"+Dre++}ngOnInit(){this._dialogRef||(this._dialogRef=$K(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const e=this._dialogRef._containerInstance;e&&!e._ariaLabelledBy&&(e._ariaLabelledBy=this.id)})}}return n.\u0275fac=function(e){return new(e||n)(ue(FP,8),ue(Mn),ue(IP))},n.\u0275dir=kt({type:n,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(e,r){2&e&&_l("id",r.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),n})(),dH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=kt({type:n,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),n})();function $K(n,t){let e=n.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-dialog-container");)e=e.parentElement;return e?t.find(r=>r.id===e.id):null}let fH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({providers:[IP,Cre],imports:[[LK,FU,ps],ps]}),n})();const Sre=["*"];function jK(n){return Error(`Unable to find icon with the name "${n}"`)}function zK(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function UK(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class gS{constructor(t,e,r){this.url=t,this.svgText=e,this.options=r}}let RP=(()=>{class n{constructor(e,r,a,u){this._httpClient=e,this._sanitizer=r,this._errorHandler=u,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=a}addSvgIcon(e,r,a){return this.addSvgIconInNamespace("",e,r,a)}addSvgIconLiteral(e,r,a){return this.addSvgIconLiteralInNamespace("",e,r,a)}addSvgIconInNamespace(e,r,a,u){return this._addSvgIconConfig(e,r,new gS(a,null,u))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,r,a,u){const p=this._sanitizer.sanitize(wi.HTML,a);if(!p)throw UK(a);return this._addSvgIconConfig(e,r,new gS("",p,u))}addSvgIconSet(e,r){return this.addSvgIconSetInNamespace("",e,r)}addSvgIconSetLiteral(e,r){return this.addSvgIconSetLiteralInNamespace("",e,r)}addSvgIconSetInNamespace(e,r,a){return this._addSvgIconSetConfig(e,new gS(r,null,a))}addSvgIconSetLiteralInNamespace(e,r,a){const u=this._sanitizer.sanitize(wi.HTML,r);if(!u)throw UK(r);return this._addSvgIconSetConfig(e,new gS("",u,a))}registerFontClassAlias(e,r=e){return this._fontCssClassesByAlias.set(e,r),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const r=this._sanitizer.sanitize(wi.RESOURCE_URL,e);if(!r)throw zK(e);const a=this._cachedIconsByUrl.get(r);return a?_n(ZV(a)):this._loadSvgIconFromConfig(new gS(e,null)).pipe(Ss(u=>this._cachedIconsByUrl.set(r,u)),Pe(u=>ZV(u)))}getNamedSvgIcon(e,r=""){const a=HK(r,e);let u=this._svgIconConfigs.get(a);if(u)return this._getSvgFromConfig(u);if(u=this._getIconConfigFromResolvers(r,e),u)return this._svgIconConfigs.set(a,u),this._getSvgFromConfig(u);const p=this._iconSetConfigs.get(r);return p?this._getSvgFromIconSetConfigs(e,p):ro(jK(a))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?_n(ZV(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(Pe(r=>ZV(r)))}_getSvgFromIconSetConfigs(e,r){const a=this._extractIconWithNameFromAnySet(e,r);return a?_n(a):AP(r.filter(p=>!p.svgText).map(p=>this._loadSvgIconSetFromConfig(p).pipe(Oe(_=>{const M=`Loading icon set URL: ${this._sanitizer.sanitize(wi.RESOURCE_URL,p.url)} failed: ${_.message}`;return this._errorHandler.handleError(new Error(M)),_n(null)})))).pipe(Pe(()=>{const p=this._extractIconWithNameFromAnySet(e,r);if(!p)throw jK(e);return p}))}_extractIconWithNameFromAnySet(e,r){for(let a=r.length-1;a>=0;a--){const u=r[a];if(u.svgText&&u.svgText.indexOf(e)>-1){const p=this._svgElementFromConfig(u),_=this._extractSvgIconFromSet(p,e,u.options);if(_)return _}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Ss(r=>e.svgText=r),Pe(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?_n(null):this._fetchIcon(e).pipe(Ss(r=>e.svgText=r))}_extractSvgIconFromSet(e,r,a){const u=e.querySelector(`[id="${r}"]`);if(!u)return null;const p=u.cloneNode(!0);if(p.removeAttribute("id"),"svg"===p.nodeName.toLowerCase())return this._setSvgAttributes(p,a);if("symbol"===p.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(p),a);const _=this._svgElementFromString("<svg></svg>");return _.appendChild(p),this._setSvgAttributes(_,a)}_svgElementFromString(e){const r=this._document.createElement("DIV");r.innerHTML=e;const a=r.querySelector("svg");if(!a)throw Error("<svg> tag not found");return a}_toSvgElement(e){const r=this._svgElementFromString("<svg></svg>"),a=e.attributes;for(let u=0;u<a.length;u++){const{name:p,value:_}=a[u];"id"!==p&&r.setAttribute(p,_)}for(let u=0;u<e.childNodes.length;u++)e.childNodes[u].nodeType===this._document.ELEMENT_NODE&&r.appendChild(e.childNodes[u].cloneNode(!0));return r}_setSvgAttributes(e,r){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),r&&r.viewBox&&e.setAttribute("viewBox",r.viewBox),e}_fetchIcon(e){var r;const{url:a,options:u}=e,p=null!==(r=null==u?void 0:u.withCredentials)&&void 0!==r&&r;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==a)throw Error(`Cannot fetch icon from URL "${a}".`);const _=this._sanitizer.sanitize(wi.RESOURCE_URL,a);if(!_)throw zK(a);const D=this._inProgressUrlFetches.get(_);if(D)return D;const M=this._httpClient.get(_,{responseType:"text",withCredentials:p}).pipe(un(()=>this._inProgressUrlFetches.delete(_)),co());return this._inProgressUrlFetches.set(_,M),M}_addSvgIconConfig(e,r,a){return this._svgIconConfigs.set(HK(e,r),a),this}_addSvgIconSetConfig(e,r){const a=this._iconSetConfigs.get(e);return a?a.push(r):this._iconSetConfigs.set(e,[r]),this}_svgElementFromConfig(e){if(!e.svgElement){const r=this._svgElementFromString(e.svgText);this._setSvgAttributes(r,e.options),e.svgElement=r}return e.svgElement}_getIconConfigFromResolvers(e,r){for(let a=0;a<this._resolvers.length;a++){const u=this._resolvers[a](r,e);if(u)return Ore(u)?new gS(u.url,null,u.options):new gS(u,null)}}}return n.\u0275fac=function(e){return new(e||n)(se(Zm,8),se(Qm),se(An,8),se(zl))},n.\u0275prov=ot({factory:function(){return new n(se(Zm,8),se(Qm),se(An,8),se(zl))},token:n,providedIn:"root"}),n})();function ZV(n){return n.cloneNode(!0)}function HK(n,t){return n+":"+t}function Ore(n){return!(!n.url||!n.options)}const Tre=Eh(class{constructor(n){this._elementRef=n}}),kre=new Ft("mat-icon-location",{providedIn:"root",factory:function(){const n=yd(An),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),WK=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Rre=WK.map(n=>`[${n}]`).join(", "),Nre=/^url\(['"]?#(.*?)['"]?\)$/;let NP=(()=>{class n extends Tre{constructor(e,r,a,u,p){super(e),this._iconRegistry=r,this._location=u,this._errorHandler=p,this._inline=!1,this._currentIconFetch=T.EMPTY,a||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=yr(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const r=this._cleanupFontValue(e);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const r=this._cleanupFontValue(e);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const r=e.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const r=e.querySelectorAll("style");for(let u=0;u<r.length;u++)r[u].textContent+=" ";const a=this._location.getPathname();this._previousPath=a,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(a),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let r=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const a=e.childNodes[r];(1!==a.nodeType||"svg"===a.nodeName.toLowerCase())&&e.removeChild(a)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,r=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();r!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),r&&e.classList.add(r),this._previousFontSetClass=r),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const r=this._elementsWithExternalReferences;r&&r.forEach((a,u)=>{a.forEach(p=>{u.setAttribute(p.name,`url('${e}#${p.value}')`)})})}_cacheChildrenWithExternalReferences(e){const r=e.querySelectorAll(Rre),a=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let u=0;u<r.length;u++)WK.forEach(p=>{const _=r[u],D=_.getAttribute(p),M=D?D.match(Nre):null;if(M){let I=a.get(_);I||(I=[],a.set(_,I)),I.push({name:p,value:M[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[r,a]=this._splitIconName(e);r&&(this._svgNamespace=r),a&&(this._svgName=a),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(a,r).pipe(so(1)).subscribe(u=>this._setSvgElement(u),u=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${a}! ${u.message}`))})}}}return n.\u0275fac=function(e){return new(e||n)(ue(Mn),ue(RP),pd("aria-hidden"),ue(kre),ue(zl))},n.\u0275cmp=Sn({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,r){2&e&&(mi("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),Qn("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[qn],ngContentSelectors:Sre,decls:1,vars:0,template:function(e,r){1&e&&(vs(),Ei(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),Sk=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[ps],ps]}),n})(),Pre=(()=>{class n{constructor(e){this.dialogRef=e,this.disableAnimation=!0}ngAfterViewInit(){setTimeout(()=>{this.disableAnimation=!1})}close(){this.dialogRef.close()}}return n.\u0275fac=function(e){return new(e||n)(ue(FP))},n.\u0275cmp=Sn({type:n,selectors:[["agc-help-modal"]],decls:42,vars:1,consts:[[1,"agc-about","wrapper"],[1,"container"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"content"],["mat-dialog-title","",1,"title"],[1,"mat-typography"],[1,"help-title"],[1,"help-text"],[1,"gif-container"],["src","assets/images/help-year-range-selector.gif","alt","help-year-range-selector.gif"],["src","assets/images/help-variables-filterby3.gif","alt","help-variables-filterby3.gif"],["src","assets/images/help-filter-controls.gif","alt","help-filter-controls.gif"],["src","assets/images/help-pan-zoom.gif","alt","help-pan-zoom.gif"]],template:function(e,r){1&e&&(we(0,"div",0),we(1,"div",1),we(2,"div",2),we(3,"mat-icon",3),Cn("click",function(){return r.close()}),jt(4,"clear"),Ee(),Ee(),we(5,"div",4),we(6,"h2",5),jt(7,"Help"),Ee(),we(8,"mat-dialog-content",6),we(9,"mat-accordion"),we(10,"mat-expansion-panel"),we(11,"mat-expansion-panel-header"),we(12,"mat-panel-title",7),jt(13,"SELECT YEAR RANGE"),Ee(),Ee(),we(14,"div",8),jt(15," Set year ranges by clicking with your mouse cursor then dragging and releasing. Click again to reset. "),Ee(),we(16,"div",9),on(17,"img",10),Ee(),Ee(),we(18,"mat-expansion-panel"),we(19,"mat-expansion-panel-header"),we(20,"mat-panel-title",7),jt(21,"SELECT VARIABLES & FILTERS"),Ee(),Ee(),we(22,"div",8),jt(23," Click on Variables and filter by items. SHIFT + CLICK to add more items. "),Ee(),we(24,"div",9),on(25,"img",11),Ee(),Ee(),we(26,"mat-expansion-panel"),we(27,"mat-expansion-panel-header"),we(28,"mat-panel-title",7),jt(29,"USE CONTROLS TO FILTER"),Ee(),Ee(),we(30,"div",8),jt(31," Click on controls to update visualizations. Use SHIFT + CLICK to add more items. "),Ee(),we(32,"div",9),on(33,"img",12),Ee(),Ee(),we(34,"mat-expansion-panel"),we(35,"mat-expansion-panel-header"),we(36,"mat-panel-title",7),jt(37,"PAN AND ZOOM"),Ee(),Ee(),we(38,"div",8),jt(39," Hold down SHIFT key then use the scroll-wheel to zoom. SHIFT + CLICK (Hold) to pan. "),Ee(),we(40,"div",9),on(41,"img",13),Ee(),Ee(),Ee(),Ee(),Ee(),Ee(),Ee()),2&e&&yt("@.disabled",r.disableAnimation)},directives:[NP,cH,dH,NU,NV,PV,RU],styles:[".mat-dialog-container{padding:0;overflow:hidden}  .mat-expansion-panel-header{background-color:#fafafa}.agc-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:2rem;min-height:43rem}.agc-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem}.agc-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{font-weight:bold;font-size:.875rem;line-height:1.5rem}.agc-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]{font-size:1rem}.agc-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]   .gif-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding:2rem}.agc-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{float:right;margin-top:1rem;margin-right:1rem;cursor:pointer}.agc-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:2.25rem;margin-bottom:.5rem;text-align:left;font-weight:lighter}"]}),n})();function Lre(n,t){if(1&n){const e=eo();we(0,"div",17),Cn("click",function(){const u=Zr(e).index;return dn().setSlide(u)}),Ee()}if(2&n){const e=t.index;Qn("active",dn().currentSlide===e)}}let Bre=(()=>{class n{constructor(e){this.dialogRef=e,this.slides=[{title:"Select year range...",text:"Set year ranges by clicking with your mouse cursor then dragging and releasing. Click again to reset.",img:"assets/images/help-year-range-selector.gif"},{title:"Select variables and filters...",text:"Click on Variables and filter by items.  SHIFT + CLICK to add more items.",img:"assets/images/help-variables-filterby3.gif"},{title:"Use controls to filter...",text:"Click on controls to update visualizations.  Use SHIFT + CLICK to add more items.",img:"assets/images/help-filter-controls.gif"},{title:"Pan and zoom...",text:"Hold down SHIFT key then use the scroll-wheel to zoom.  SHIFT + CLICK (Hold) to pan.",img:"assets/images/help-pan-zoom.gif"}],this.currentSlide=0}close(){this.dialogRef.close()}incrementSlide(){this.currentSlide!==this.slides.length-1&&(this.currentSlide=this.currentSlide+1)}decrementSlide(){0!==this.currentSlide&&(this.currentSlide=this.currentSlide-1)}setSlide(e){e<0||e>=this.slides.length||(this.currentSlide=e)}}return n.\u0275fac=function(e){return new(e||n)(ue(FP))},n.\u0275cmp=Sn({type:n,selectors:[["agc-help-tour-modal"]],decls:24,vars:9,consts:[[1,"agc-tour","wrapper"],[1,"container"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"content"],["mat-dialog-title","",1,"title"],[1,"mat-typography"],[1,"help-text"],[1,"carousel"],[1,"material-icons","chevron-icon",3,"click"],[1,"gif-container"],[3,"src","alt"],[1,"slide-row"],[1,"slide-dots"],["class","slide",3,"active","click",4,"ngFor","ngForOf"],[1,"button-row"],[1,"btn-outline",3,"click"],[1,"slide",3,"click"]],template:function(e,r){1&e&&(we(0,"div",0),we(1,"div",1),we(2,"div",2),we(3,"mat-icon",3),Cn("click",function(){return r.close()}),jt(4,"clear"),Ee(),Ee(),we(5,"div",4),we(6,"h2",5),jt(7),Ee(),we(8,"mat-dialog-content",6),we(9,"div",7),jt(10),Ee(),we(11,"div",8),we(12,"mat-icon",9),Cn("click",function(){return r.decrementSlide()}),jt(13,"chevron_left"),Ee(),we(14,"div",10),on(15,"img",11),Ee(),we(16,"mat-icon",9),Cn("click",function(){return r.incrementSlide()}),jt(17,"chevron_right"),Ee(),Ee(),we(18,"div",12),we(19,"div",13),cn(20,Lre,1,2,"div",14),Ee(),Ee(),we(21,"div",15),we(22,"button",16),Cn("click",function(){return r.close()}),jt(23,"Got it!"),Ee(),Ee(),Ee(),Ee(),Ee(),Ee()),2&e&&(mt(7),Ur(r.slides[r.currentSlide].title),mt(3),Ur(r.slides[r.currentSlide].text),mt(2),Qn("disabled",0===r.currentSlide),mt(3),yt("src",r.slides[r.currentSlide].img,Rg)("alt",r.slides[r.currentSlide].img.split("/")[6]),mt(1),Qn("disabled",r.currentSlide===r.slides.length-1),mt(4),yt("ngForOf",r.slides))},directives:[NP,cH,dH,S_],styles:[".mat-dialog-container{padding:0;overflow:hidden}  .mat-expansion-panel-header{background-color:#fafafa}.agc-tour.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:2rem}.agc-tour.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem;overflow:hidden}.agc-tour.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{float:right;margin-top:1rem;margin-right:1rem;cursor:pointer}.agc-tour.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:2.25rem;margin-bottom:.5rem;text-align:left;font-weight:lighter}.agc-tour.wrapper[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.agc-tour.wrapper[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]{font-size:1rem}.agc-tour.wrapper[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .gif-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding:2rem}.agc-tour.wrapper[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .chevron-icon[_ngcontent-%COMP%]{font-size:4rem;height:4rem;width:4rem;cursor:pointer}.agc-tour.wrapper[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .chevron-icon.disabled[_ngcontent-%COMP%]{color:#d3d3d3}.agc-tour.wrapper[_ngcontent-%COMP%]   .slide-row[_ngcontent-%COMP%]{justify-content:space-around;display:flex}.agc-tour.wrapper[_ngcontent-%COMP%]   .slide-row[_ngcontent-%COMP%]   .slide-dots[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;width:9rem}.agc-tour.wrapper[_ngcontent-%COMP%]   .slide-row[_ngcontent-%COMP%]   .slide-dots[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]{width:1rem;height:1rem;border-radius:50%;border:1px solid darkgray;background-color:#fff;cursor:pointer}.agc-tour.wrapper[_ngcontent-%COMP%]   .slide-row[_ngcontent-%COMP%]   .slide-dots[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]{background-color:#2a4d87}.agc-tour.wrapper[_ngcontent-%COMP%]   .button-row[_ngcontent-%COMP%]{justify-content:flex-end;display:flex}.agc-tour.wrapper[_ngcontent-%COMP%]   .button-row[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]{border-radius:5px;border:1px solid #6880aa;color:#6880aa;background-color:#fff;width:9rem;height:2.5rem;font-size:1rem;cursor:pointer}.agc-tour.wrapper[_ngcontent-%COMP%]   .button-row[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:hover{background-color:#6880aa;color:#fff}"],changeDetection:0}),n})();const GK="HELP_POPUP_SHOWN";let qK=(()=>{let n=class extends nH{get hasShownHelpModal$(){return this.state$.pipe(uS("hasShownHelpModal"))}ngxsOnInit(){var e;super.ngxsOnInit();const r="true"===(null===(e=localStorage.getItem(GK))||void 0===e?void 0:e.toLowerCase());this.patchState({hasShownHelpModal:r})}setHasShownHelpModal(e){localStorage.setItem(GK,e.toString()),this.ctx.patchState({hasShownHelpModal:e})}};return n.\u0275fac=function(){let t;return function(r){return(t||(t=Cr(n)))(r||n)}}(),n.\u0275prov=ot({token:n,factory:n.\u0275fac}),Vi([og()],n.prototype,"hasShownHelpModal$",null),Vi([Jo()],n.prototype,"setHasShownHelpModal",null),n=Vi([Dk(),fS({name:"page",defaults:{hasShownHelpModal:!1}})],n),n})();function Vre(n,t){if(1&n&&(Nh(),on(0,"circle",3)),2&n){const e=dn();Co("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%"),mi("r",e._getCircleRadius())}}function $re(n,t){if(1&n&&(Nh(),on(0,"circle",3)),2&n){const e=dn();Co("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%"),mi("r",e._getCircleRadius())}}function jre(n,t){if(1&n&&(Nh(),on(0,"circle",3)),2&n){const e=dn();Co("animation-name","mat-progress-spinner-stroke-rotate-"+e._spinnerAnimationLabel)("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%"),mi("r",e._getCircleRadius())}}function zre(n,t){if(1&n&&(Nh(),on(0,"circle",3)),2&n){const e=dn();Co("stroke-dashoffset",e._getStrokeDashOffset(),"px")("stroke-dasharray",e._getStrokeCircumference(),"px")("stroke-width",e._getCircleStrokeWidth(),"%"),mi("r",e._getCircleRadius())}}const YK=".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:currentColor;stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n",Hre=Eh(class{constructor(n){this._elementRef=n}},"primary"),XK=new Ft("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});class K_ extends Hre{constructor(t,e,r,a,u){super(t),this._document=r,this._diameter=100,this._value=0,this._fallbackAnimation=!1,this.mode="determinate";const p=K_._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),p.has(r.head)||p.set(r.head,new Set([100])),this._fallbackAnimation=e.EDGE||e.TRIDENT,this._noopAnimations="NoopAnimations"===a&&!!u&&!u._forceAnimations,u&&(u.diameter&&(this.diameter=u.diameter),u.strokeWidth&&(this.strokeWidth=u.strokeWidth))}get diameter(){return this._diameter}set diameter(t){this._diameter=Yu(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=Yu(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,Yu(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=u5(t)||this._document.head,this._attachStyleNode(),t.classList.add(`mat-progress-spinner-indeterminate${this._fallbackAnimation?"-fallback":""}-animation`)}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._getStrokeCircumference():null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const t=this._styleRoot,e=this._diameter,r=K_._diameters;let a=r.get(t);if(!a||!a.has(e)){const u=this._document.createElement("style");u.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),u.textContent=this._getAnimationText(),t.appendChild(u),a||(a=new Set,r.set(t,a)),a.add(e)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}K_.\u0275fac=function(t){return new(t||K_)(ue(Mn),ue(rs),ue(An,8),ue(ec,8),ue(XK))},K_.\u0275cmp=Sn({type:K_,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(mi("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),Co("width",e.diameter,"px")("height",e.diameter,"px"),Qn("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",mode:"mode",diameter:"diameter",strokeWidth:"strokeWidth",value:"value"},exportAs:["matProgressSpinner"],features:[qn],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(Nh(),we(0,"svg",0),cn(1,Vre,1,9,"circle",1),cn(2,$re,1,7,"circle",2),Ee()),2&t&&(Co("width",e.diameter,"px")("height",e.diameter,"px"),yt("ngSwitch","indeterminate"===e.mode),mi("viewBox",e._getViewBox()),mt(1),yt("ngSwitchCase",!0),mt(1),yt("ngSwitchCase",!1))},directives:[A_,gx],styles:[YK],encapsulation:2,changeDetection:0}),K_._diameters=new WeakMap;let qre=(()=>{class n extends K_{constructor(e,r,a,u,p){super(e,r,a,u,p),this.mode="indeterminate"}}return n.\u0275fac=function(e){return new(e||n)(ue(Mn),ue(rs),ue(An,8),ue(ec,8),ue(XK))},n.\u0275cmp=Sn({type:n,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(e,r){2&e&&(Co("width",r.diameter,"px")("height",r.diameter,"px"),Qn("_mat-animation-noopable",r._noopAnimations))},inputs:{color:"color"},features:[qn],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(e,r){1&e&&(Nh(),we(0,"svg",0),cn(1,jre,1,9,"circle",1),cn(2,zre,1,7,"circle",2),Ee()),2&e&&(Co("width",r.diameter,"px")("height",r.diameter,"px"),yt("ngSwitch","indeterminate"===r.mode),mi("viewBox",r._getViewBox()),mt(1),yt("ngSwitchCase",!0),mt(1),yt("ngSwitchCase",!1))},directives:[A_,gx],styles:[YK],encapsulation:2,changeDetection:0}),n})(),Yre=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[ps,Er],ps]}),n})();const KK=["mat-button",""],QK=["*"],Kre=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Qre=Eh(DC(rP(class{constructor(n){this._elementRef=n}})));let PP=(()=>{class n extends Qre{constructor(e,r,a){super(e),this._focusMonitor=r,this._animationMode=a,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const u of Kre)this._hasHostAttributes(u)&&this._getHostElement().classList.add(u);e.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(e,r){e?this._focusMonitor.focusVia(this._getHostElement(),e,r):this._getHostElement().focus(r)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...e){return e.some(r=>this._getHostElement().hasAttribute(r))}}return n.\u0275fac=function(e){return new(e||n)(ue(Mn),ue(B_),ue(ec,8))},n.\u0275cmp=Sn({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(e,r){if(1&e&&Dl(Zx,5),2&e){let a;Pi(a=Li())&&(r.ripple=a.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(e,r){2&e&&(mi("disabled",r.disabled||null),Qn("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-button-disabled",r.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[qn],attrs:KK,ngContentSelectors:QK,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(e,r){1&e&&(vs(),we(0,"span",0),Ei(1),Ee(),on(2,"span",1),on(3,"span",2)),2&e&&(mt(2),Qn("mat-button-ripple-round",r.isRoundButton||r.isIconButton),yt("matRippleDisabled",r._isRippleDisabled())("matRippleCentered",r.isIconButton)("matRippleTrigger",r._getHostElement()))},directives:[Zx],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),n})(),LP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[oP,ps],ps]}),n})();var Jre=pe(7266);function BP(){return Ga(Lt)}var Zre=function(){var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var u in a)a.hasOwnProperty(u)&&(r[u]=a[u])})(t,e)};return function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}}(),ese=Object.prototype.hasOwnProperty;function e$(n,t){return ese.call(n,t)}function pH(n){if(Array.isArray(n)){for(var e=new Array(n.length),t=0;t<e.length;t++)e[t]=""+t;return e}if(Object.keys)return Object.keys(n);for(var r in e=[],n)e$(n,r)&&e.push(r);return e}function mf(n){switch(typeof n){case"object":return JSON.parse(JSON.stringify(n));case"undefined":return null;default:return n}}function gH(n){for(var r,t=0,e=n.length;t<e;){if(!((r=n.charCodeAt(t))>=48&&r<=57))return!1;t++}return!0}function Q_(n){return-1===n.indexOf("/")&&-1===n.indexOf("~")?n:n.replace(/~/g,"~0").replace(/\//g,"~1")}function ZK(n){return n.replace(/~1/g,"/").replace(/~0/g,"~")}function mH(n){if(void 0===n)return!0;if(n)if(Array.isArray(n)){for(var t=0,e=n.length;t<e;t++)if(mH(n[t]))return!0}else if("object"==typeof n){var r=pH(n),a=r.length;for(t=0;t<a;t++)if(mH(n[r[t]]))return!0}return!1}function tQ(n,t){var e=[n];for(var r in t){var a="object"==typeof t[r]?JSON.stringify(t[r],null,2):t[r];void 0!==a&&e.push(r+": "+a)}return e.join("\n")}var nQ=function(n){function t(e,r,a,u,p){var _=this.constructor,D=n.call(this,tQ(e,{name:r,index:a,operation:u,tree:p}))||this;return D.name=r,D.index=a,D.operation=u,D.tree=p,Object.setPrototypeOf(D,_.prototype),D.message=tQ(e,{name:r,index:a,operation:u,tree:p}),D}return Zre(t,n),t}(Error),lo=nQ,tse=mf,Ak={add:function(n,t,e){return n[t]=this.value,{newDocument:e}},remove:function(n,t,e){var r=n[t];return delete n[t],{newDocument:e,removed:r}},replace:function(n,t,e){var r=n[t];return n[t]=this.value,{newDocument:e,removed:r}},move:function(n,t,e){var r=t$(e,this.path);r&&(r=mf(r));var a=mS(e,{op:"remove",path:this.from}).removed;return mS(e,{op:"add",path:this.path,value:a}),{newDocument:e,removed:r}},copy:function(n,t,e){var r=t$(e,this.from);return mS(e,{op:"add",path:this.path,value:mf(r)}),{newDocument:e}},test:function(n,t,e){return{newDocument:e,test:VP(n[t],this.value)}},_get:function(n,t,e){return this.value=n[t],{newDocument:e}}},nse={add:function(n,t,e){return gH(t)?n.splice(t,0,this.value):n[t]=this.value,{newDocument:e,index:t}},remove:function(n,t,e){return{newDocument:e,removed:n.splice(t,1)[0]}},replace:function(n,t,e){var r=n[t];return n[t]=this.value,{newDocument:e,removed:r}},move:Ak.move,copy:Ak.copy,test:Ak.test,_get:Ak._get};function t$(n,t){if(""==t)return n;var e={op:"_get",path:t};return mS(n,e),e.value}function mS(n,t,e,r,a,u){if(void 0===e&&(e=!1),void 0===r&&(r=!0),void 0===a&&(a=!0),void 0===u&&(u=0),e&&("function"==typeof e?e(t,0,n,t.path):i$(t,0)),""===t.path){var p={newDocument:n};if("add"===t.op)return p.newDocument=t.value,p;if("replace"===t.op)return p.newDocument=t.value,p.removed=n,p;if("move"===t.op||"copy"===t.op)return p.newDocument=t$(n,t.from),"move"===t.op&&(p.removed=n),p;if("test"===t.op){if(p.test=VP(n,t.value),!1===p.test)throw new lo("Test operation failed","TEST_OPERATION_FAILED",u,t,n);return p.newDocument=n,p}if("remove"===t.op)return p.removed=n,p.newDocument=null,p;if("_get"===t.op)return t.value=n,p;if(e)throw new lo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",u,t,n);return p}r||(n=mf(n));var D=(t.path||"").split("/"),M=n,I=1,V=D.length,j=void 0,G=void 0,Z=void 0;for(Z="function"==typeof e?e:i$;;){if((G=D[I])&&-1!=G.indexOf("~")&&(G=ZK(G)),a&&"__proto__"==G)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(e&&void 0===j&&(void 0===M[G]?j=D.slice(0,I).join("/"):I==V-1&&(j=t.path),void 0!==j&&Z(t,0,n,j)),I++,Array.isArray(M)){if("-"===G)G=M.length;else{if(e&&!gH(G))throw new lo("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",u,t,n);gH(G)&&(G=~~G)}if(I>=V){if(e&&"add"===t.op&&G>M.length)throw new lo("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",u,t,n);if(!1===(p=nse[t.op].call(t,M,G,n)).test)throw new lo("Test operation failed","TEST_OPERATION_FAILED",u,t,n);return p}}else if(I>=V){if(!1===(p=Ak[t.op].call(t,M,G,n)).test)throw new lo("Test operation failed","TEST_OPERATION_FAILED",u,t,n);return p}if(M=M[G],e&&I<V&&(!M||"object"!=typeof M))throw new lo("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",u,t,n)}}function n$(n,t,e,r,a){if(void 0===r&&(r=!0),void 0===a&&(a=!0),e&&!Array.isArray(t))throw new lo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(n=mf(n));for(var u=new Array(t.length),p=0,_=t.length;p<_;p++)u[p]=mS(n,t[p],e,!0,a,p),n=u[p].newDocument;return u.newDocument=n,u}function ise(n,t,e){var r=mS(n,t);if(!1===r.test)throw new lo("Test operation failed","TEST_OPERATION_FAILED",e,t,n);return r.newDocument}function i$(n,t,e,r){if("object"!=typeof n||null===n||Array.isArray(n))throw new lo("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,n,e);if(!Ak[n.op])throw new lo("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,n,e);if("string"!=typeof n.path)throw new lo("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,n,e);if(0!==n.path.indexOf("/")&&n.path.length>0)throw new lo('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,n,e);if(("move"===n.op||"copy"===n.op)&&"string"!=typeof n.from)throw new lo("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,n,e);if(("add"===n.op||"replace"===n.op||"test"===n.op)&&void 0===n.value)throw new lo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,n,e);if(("add"===n.op||"replace"===n.op||"test"===n.op)&&mH(n.value))throw new lo("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,n,e);if(e)if("add"==n.op){var a=n.path.split("/").length,u=r.split("/").length;if(a!==u+1&&a!==u)throw new lo("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,n,e)}else if("replace"===n.op||"remove"===n.op||"_get"===n.op){if(n.path!==r)throw new lo("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,n,e)}else if("move"===n.op||"copy"===n.op){var _=iQ([{op:"_get",path:n.from,value:void 0}],e);if(_&&"OPERATION_PATH_UNRESOLVABLE"===_.name)throw new lo("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,n,e)}}function iQ(n,t,e){try{if(!Array.isArray(n))throw new lo("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)n$(mf(t),mf(n),e||!0);else{e=e||i$;for(var r=0;r<n.length;r++)e(n[r],r,t,void 0)}}catch(a){if(a instanceof lo)return a;throw a}}function VP(n,t){if(n===t)return!0;if(n&&t&&"object"==typeof n&&"object"==typeof t){var a,u,p,e=Array.isArray(n),r=Array.isArray(t);if(e&&r){if((u=n.length)!=t.length)return!1;for(a=u;0!=a--;)if(!VP(n[a],t[a]))return!1;return!0}if(e!=r)return!1;var _=Object.keys(n);if((u=_.length)!==Object.keys(t).length)return!1;for(a=u;0!=a--;)if(!t.hasOwnProperty(_[a]))return!1;for(a=u;0!=a--;)if(!VP(n[p=_[a]],t[p]))return!1;return!0}return n!=n&&t!=t}var yH=new WeakMap,rse=function(t){this.observers=new Map,this.obj=t},sse=function(t,e){this.callback=t,this.observer=e};function use(n,t){t.unobserve()}function cse(n,t){var r,a=function(n){return yH.get(n)}(n);if(a){var u=function(n,t){return n.observers.get(t)}(a,t);r=u&&u.observer}else a=new rse(n),yH.set(n,a);if(r)return r;if(r={},a.value=mf(n),t){r.callback=t,r.next=null;var p=function(){_H(r)},_=function(){clearTimeout(r.next),r.next=setTimeout(p)};"undefined"!=typeof window&&(window.addEventListener("mouseup",_),window.addEventListener("keyup",_),window.addEventListener("mousedown",_),window.addEventListener("keydown",_),window.addEventListener("change",_))}return r.patches=[],r.object=n,r.unobserve=function(){_H(r),clearTimeout(r.next),function(n,t){n.observers.delete(t.callback)}(a,r),"undefined"!=typeof window&&(window.removeEventListener("mouseup",_),window.removeEventListener("keyup",_),window.removeEventListener("mousedown",_),window.removeEventListener("keydown",_),window.removeEventListener("change",_))},a.observers.set(t,new sse(t,r)),r}function _H(n,t){void 0===t&&(t=!1);var e=yH.get(n.object);vH(e.value,n.object,n.patches,"",t),n.patches.length&&n$(e.value,n.patches);var r=n.patches;return r.length>0&&(n.patches=[],n.callback&&n.callback(r)),r}function vH(n,t,e,r,a){if(t!==n){"function"==typeof t.toJSON&&(t=t.toJSON());for(var u=pH(t),p=pH(n),D=!1,M=p.length-1;M>=0;M--){var V=n[I=p[M]];if(!e$(t,I)||void 0===t[I]&&void 0!==V&&!1===Array.isArray(t))Array.isArray(n)===Array.isArray(t)?(a&&e.push({op:"test",path:r+"/"+Q_(I),value:mf(V)}),e.push({op:"remove",path:r+"/"+Q_(I)}),D=!0):(a&&e.push({op:"test",path:r,value:n}),e.push({op:"replace",path:r,value:t}));else{var j=t[I];"object"==typeof V&&null!=V&&"object"==typeof j&&null!=j&&Array.isArray(V)===Array.isArray(j)?vH(V,j,e,r+"/"+Q_(I),a):V!==j&&(a&&e.push({op:"test",path:r+"/"+Q_(I),value:mf(V)}),e.push({op:"replace",path:r+"/"+Q_(I),value:mf(j)}))}}if(D||u.length!=p.length)for(M=0;M<u.length;M++){var I;!e$(n,I=u[M])&&void 0!==t[I]&&e.push({op:"add",path:r+"/"+Q_(I),value:mf(t[I])})}}}function dse(n,t,e){void 0===e&&(e=!1);var r=[];return vH(n,t,r,"",e),r}Object.assign({},_e,K,{JsonPatchError:nQ,deepClone:mf,escapePathComponent:Q_,unescapePathComponent:ZK});var fse=pe(5328),bH=pe.n(fse),rQ=pe(8772),pse={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},gse={"*":(n,t)=>n*t,"+":(n,t)=>n+t,"-":(n,t)=>n-t,"/":(n,t)=>n/t,"%":(n,t)=>n%t,">":(n,t)=>n>t,"<":(n,t)=>n<t,"<=":(n,t)=>n<=t,">=":(n,t)=>n>=t,"==":(n,t)=>n==t,"!=":(n,t)=>n!=t,"===":(n,t)=>n===t,"!==":(n,t)=>n!==t,"&":(n,t)=>n&t,"|":(n,t)=>n|t,"^":(n,t)=>n^t,"<<":(n,t)=>n<<t,">>":(n,t)=>n>>t,">>>":(n,t)=>n>>>t},mse={"+":n=>+n,"-":n=>-n,"~":n=>~n,"!":n=>!n};const yse=Array.prototype.slice,yS=(n,t,e)=>{const r=e?e(t[0]):t[0];return r[n].apply(r,yse.call(t,1))};var vse={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(n,t,e)=>Math.max(t,Math.min(e,n)),now:Date.now,utc:Date.UTC,datetime:(n,t,e,r,a,u,p)=>new Date(n,t||0,null!=e?e:1,r||0,a||0,u||0,p||0),date:n=>new Date(n).getDate(),day:n=>new Date(n).getDay(),year:n=>new Date(n).getFullYear(),month:n=>new Date(n).getMonth(),hours:n=>new Date(n).getHours(),minutes:n=>new Date(n).getMinutes(),seconds:n=>new Date(n).getSeconds(),milliseconds:n=>new Date(n).getMilliseconds(),time:n=>new Date(n).getTime(),timezoneoffset:n=>new Date(n).getTimezoneOffset(),utcdate:n=>new Date(n).getUTCDate(),utcday:n=>new Date(n).getUTCDay(),utcyear:n=>new Date(n).getUTCFullYear(),utcmonth:n=>new Date(n).getUTCMonth(),utchours:n=>new Date(n).getUTCHours(),utcminutes:n=>new Date(n).getUTCMinutes(),utcseconds:n=>new Date(n).getUTCSeconds(),utcmilliseconds:n=>new Date(n).getUTCMilliseconds(),length:n=>n.length,join:function(){return yS("join",arguments)},indexof:function(){return yS("indexOf",arguments)},lastindexof:function(){return yS("lastIndexOf",arguments)},slice:function(){return yS("slice",arguments)},reverse:n=>n.slice().reverse(),parseFloat,parseInt,upper:n=>String(n).toUpperCase(),lower:n=>String(n).toLowerCase(),substring:function(){return yS("substring",arguments,String)},split:function(){return yS("split",arguments,String)},replace:function(){return yS("replace",arguments,String)},trim:n=>String(n).trim(),regexp:RegExp,test:(n,t)=>RegExp(n).test(t)};const bse=["view","item","group","xy","x","y"],Cse={Literal:(n,t)=>t.value,Identifier:(n,t)=>{const e=t.name;return n.memberDepth>0?e:"datum"===e?n.datum:"event"===e?n.event:"item"===e?n.item:pse[e]||n.params["$"+e]},MemberExpression:(n,t)=>{const e=!t.computed,r=n(t.object);e&&(n.memberDepth+=1);const a=n(t.property);return e&&(n.memberDepth-=1),r[a]},CallExpression:(n,t)=>{const e=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),"if"===r?n(e[0])?n(e[1]):n(e[2]):(n.fn[r]||vse[r]).apply(n.fn,e.map(n))},ArrayExpression:(n,t)=>t.elements.map(n),BinaryExpression:(n,t)=>gse[t.operator](n(t.left),n(t.right)),UnaryExpression:(n,t)=>mse[t.operator](n(t.argument)),ConditionalExpression:(n,t)=>n(t.test)?n(t.consequent):n(t.alternate),LogicalExpression:(n,t)=>"&&"===t.operator?n(t.left)&&n(t.right):n(t.left)||n(t.right),ObjectExpression:(n,t)=>t.properties.reduce((e,r)=>{n.memberDepth+=1;const a=n(r.key);return n.memberDepth-=1,e[a]=n(r.value),e},{})};function $P(n,t,e,r,a,u){const p=_=>Cse[_.type](p,_);return p.memberDepth=0,p.fn=Object.create(t),p.params=e,p.datum=r,p.event=a,p.item=u,bse.forEach(_=>p.fn[_]=(...D)=>a.vega[_](...D)),p(n)}var wse={operator(n,t){const e=t.ast,r=n.functions;return a=>$P(e,r,a)},parameter(n,t){const e=t.ast,r=n.functions;return(a,u)=>$P(e,r,u,a)},event(n,t){const e=t.ast,r=n.functions;return a=>$P(e,r,void 0,void 0,a)},handler(n,t){const e=t.ast,r=n.functions;return(a,u)=>$P(e,r,a,u.item&&u.item.datum,u)},encode(n,t){const{marktype:e,channels:r}=t,a=n.functions,u="group"===e||"image"===e||"rect"===e;return(p,_)=>{const D=p.datum;let I,M=0;for(const V in r)I=$P(r[V].ast,a,_,D,void 0,p),p[V]!==I&&(p[V]=I,M=1);return"rule"!==e&&function(n,t,e){let r;t.x2&&(t.x?(e&&n.x>n.x2&&(r=n.x,n.x=n.x2,n.x2=r),n.width=n.x2-n.x):n.x=n.x2-(n.width||0)),t.xc&&(n.x=n.xc-(n.width||0)/2),t.y2&&(t.y?(e&&n.y>n.y2&&(r=n.y,n.y=n.y2,n.y2=r),n.height=n.y2-n.y):n.y=n.y2-(n.height||0)),t.yc&&(n.y=n.yc-(n.height||0)/2)}(p,r,u),M}}},Ese=pe(4141);const sQ=function(n){const[t,e]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(n).slice(1,3);return{library:t,version:e}},Mk="#fff",Use={background:"#333",title:{color:Mk,subtitleColor:Mk},style:{"guide-label":{fill:Mk},"guide-title":{fill:Mk}},axis:{domainColor:Mk,gridColor:"#888",tickColor:Mk}},_S="#4572a7",Hse={background:"#fff",arc:{fill:_S},area:{fill:_S},line:{stroke:_S,strokeWidth:2},path:{stroke:_S},rect:{fill:_S},shape:{stroke:_S},symbol:{fill:_S,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},vS="#30a2da",CH="#cbcbcb",oQ="#f0f0f0",qse={arc:{fill:vS},area:{fill:vS},axis:{domainColor:CH,grid:!0,gridColor:CH,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:CH,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:oQ,group:{fill:oQ},legend:{labelColor:"#333",labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:"#333",titleFontSize:14,titlePadding:10},line:{stroke:vS,strokeWidth:2},path:{stroke:vS,strokeWidth:.5},rect:{fill:vS},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:vS},bar:{binSpacing:2,fill:vS,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},bS="#000",Yse={group:{fill:"#e5e5e5"},arc:{fill:bS},area:{fill:bS},line:{stroke:bS},path:{stroke:bS},rect:{fill:bS},shape:{stroke:bS},symbol:{fill:bS,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},lQ="Benton Gothic, sans-serif",CS="#82c6df",wH="Benton Gothic Bold, sans-serif",jP={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Jse={background:"#ffffff",title:{anchor:"start",color:"#000000",font:wH,fontSize:22,fontWeight:"normal"},arc:{fill:CS},area:{fill:CS},line:{stroke:CS,strokeWidth:2},path:{stroke:CS},rect:{fill:CS},shape:{stroke:CS},symbol:{fill:CS,size:30},axis:{labelFont:lQ,labelFontSize:11.5,labelFontWeight:"normal",titleFont:wH,titleFontSize:13,titleFontWeight:"normal"},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:lQ,labelFontSize:11.5,symbolType:"square",titleFont:wH,titleFontSize:13,titleFontWeight:"normal"},range:{category:jP["category-6"],diverging:jP["fireandice-6"],heatmap:jP["fire-7"],ordinal:jP["fire-7"],ramp:jP["fire-7"]}},wS="#ab5787",r$="#979797",Zse={background:"#f9f9f9",arc:{fill:wS},area:{fill:wS},line:{stroke:wS},path:{stroke:wS},rect:{fill:wS},shape:{stroke:wS},symbol:{fill:wS,size:30},axis:{domainColor:r$,domainWidth:.5,gridWidth:.2,labelColor:r$,tickColor:r$,tickWidth:.2,titleColor:r$},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},ES="#3e5c69",eoe={background:"#fff",arc:{fill:ES},area:{fill:ES},line:{stroke:ES},path:{stroke:ES},rect:{fill:ES},shape:{stroke:ES},symbol:{fill:ES},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},xh="#1696d2",fQ="#000000",s$="Lato",EH="Lato",zP={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},soe={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:s$},axisX:{domain:!0,domainColor:fQ,domainWidth:1,grid:!1,labelFontSize:12,labelFont:EH,labelAngle:0,tickColor:fQ,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:s$},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:EH,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:s$,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:EH,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:s$,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:zP["six-groups-cat-1"],diverging:zP["diverging-colors"],heatmap:zP["diverging-colors"],ordinal:zP["six-groups-seq"],ramp:zP["shades-blue"]},area:{fill:xh},rect:{fill:xh},line:{color:xh,stroke:xh,strokeWidth:5},trail:{color:xh,stroke:xh,strokeWidth:0,size:1},path:{stroke:xh,strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:xh,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:xh,stroke:null}},arc:{fill:xh},shape:{stroke:xh},symbol:{fill:xh,size:30}},DS="#3366CC",o$="Arial, sans-serif",ooe={arc:{fill:DS},area:{fill:DS},path:{stroke:DS},rect:{fill:DS},shape:{stroke:DS},symbol:{stroke:DS},circle:{fill:DS},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:o$,fontSize:12},"guide-title":{font:o$,fontSize:12},"group-title":{font:o$,fontSize:12}},title:{font:o$,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:"#ccc",tickColor:"#ccc",domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},aoe="2.10.0";var a$=pe(303);function pQ(n,t){return JSON.stringify(n,function(n){const t=[];return function(e,r){if("object"!=typeof r||null===r)return r;const a=t.indexOf(this)+1;return t.length=a,t.length>n?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}(t))}const gQ="vg-tooltip-element",Foe={offsetX:10,offsetY:10,id:gQ,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(n){return String(n).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2,formatTooltip:function(n,t,e){if((0,a$.kJ)(n))return`[${n.map(r=>t((0,a$.HD)(r)?r:pQ(r,e))).join(", ")}]`;if((0,a$.Kn)(n)){let r="";const a=n,{title:u,image:p}=a,_=function(n,t){var e={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(e[r]=n[r]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(n);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(n,r[a])&&(e[r[a]]=n[r[a]])}return e}(a,["title","image"]);u&&(r+=`<h2>${t(u)}</h2>`),p&&(r+=`<img src="${t(p)}">`);const D=Object.keys(_);if(D.length>0){r+="<table>";for(const M of D){let I=_[M];void 0!==I&&((0,a$.Kn)(I)&&(I=pQ(I,e)),r+=`<tr><td class="key">${t(M)}:</td><td class="value">${t(I)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(n)}};class mQ{constructor(t){this.options=Object.assign(Object.assign({},Foe),t);const e=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=function(n){if(!/^[A-Za-z]+[-:.\w]*$/.test(n))throw new Error("Invalid HTML ID");return"#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element img {\n    max-width: 200px;\n    max-height: 200px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n".toString().replace(gQ,n)}(e);const a=document.head;a.childNodes.length>0?a.insertBefore(r,a.childNodes[0]):a.appendChild(r)}}tooltipHandler(t,e,r,a){var u;if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el)),(null!==(u=document.fullscreenElement)&&void 0!==u?u:document.body).appendChild(this.el),null==a||""===a)return void this.el.classList.remove("visible",`${this.options.theme}-theme`);this.el.innerHTML=this.options.formatTooltip(a,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:_,y:D}=function(n,t,e,r){let a=n.clientX+e;a+t.width>window.innerWidth&&(a=+n.clientX-e-t.width);let u=n.clientY+r;return u+t.height>window.innerHeight&&(u=+n.clientY-r-t.height),{x:a,y:u}}(e,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${D}px; left: ${_}px`)}}function Poe(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function yQ(n,t,e,r,a,u,p){try{var _=n[u](p),D=_.value}catch(M){return void e(M)}_.done?t(D):Promise.resolve(D).then(r,a)}function l$(n){return function(){var t=this,e=arguments;return new Promise(function(r,a){var u=n.apply(t,e);function p(D){yQ(u,r,a,p,_,"next",D)}function _(D){yQ(u,r,a,p,_,"throw",D)}p(void 0)})}}var v0,_Q=Object.prototype,xS=_Q.hasOwnProperty,DH="function"==typeof Symbol?Symbol:{},u$=DH.iterator||"@@iterator",Loe=DH.asyncIterator||"@@asyncIterator",c$=DH.toStringTag||"@@toStringTag";function vQ(n,t,e,r){var u=Object.create((t&&t.prototype instanceof SH?t:SH).prototype),p=new TH(r||[]);return u._invoke=function(n,t,e){var r=bQ;return function(u,p){if(r===CQ)throw new Error("Generator is already running");if(r===d$){if("throw"===u)throw p;return xQ()}for(e.method=u,e.arg=p;;){var _=e.delegate;if(_){var D=DQ(_,e);if(D){if(D===ag)continue;return D}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(r===bQ)throw r=d$,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);r=CQ;var M=xH(n,t,e);if("normal"===M.type){if(r=e.done?d$:Boe,M.arg===ag)continue;return{value:M.arg,done:e.done}}"throw"===M.type&&(r=d$,e.method="throw",e.arg=M.arg)}}}(n,e,p),u}function xH(n,t,e){try{return{type:"normal",arg:n.call(t,e)}}catch(r){return{type:"throw",arg:r}}}var bQ="suspendedStart",Boe="suspendedYield",CQ="executing",d$="completed",ag={};function SH(){}function f$(){}function Ok(){}var AH={};AH[u$]=function(){return this};var MH=Object.getPrototypeOf,h$=MH&&MH(MH(kH([])));h$&&h$!==_Q&&xS.call(h$,u$)&&(AH=h$);var Tk=Ok.prototype=SH.prototype=Object.create(AH);function wQ(n){["next","throw","return"].forEach(function(t){n[t]=function(e){return this._invoke(t,e)}})}function EQ(n){var t="function"==typeof n&&n.constructor;return!!t&&(t===f$||"GeneratorFunction"===(t.displayName||t.name))}function p$(n,t){function e(u,p,_,D){var M=xH(n[u],n,p);if("throw"!==M.type){var I=M.arg,V=I.value;return V&&"object"==typeof V&&xS.call(V,"__await")?t.resolve(V.__await).then(function(j){e("next",j,_,D)},function(j){e("throw",j,_,D)}):t.resolve(V).then(function(j){I.value=j,_(I)},function(j){return e("throw",j,_,D)})}D(M.arg)}var r;this._invoke=function(u,p){function _(){return new t(function(D,M){e(u,p,D,M)})}return r=r?r.then(_,_):_()}}function DQ(n,t){var e=n.iterator[t.method];if(e===v0){if(t.delegate=null,"throw"===t.method){if(n.iterator.return&&(t.method="return",t.arg=v0,DQ(n,t),"throw"===t.method))return ag;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return ag}var r=xH(e,n.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,ag;var a=r.arg;return a?a.done?(t[n.resultName]=a.value,t.next=n.nextLoc,"return"!==t.method&&(t.method="next",t.arg=v0),t.delegate=null,ag):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,ag)}function Uoe(n){var t={tryLoc:n[0]};1 in n&&(t.catchLoc=n[1]),2 in n&&(t.finallyLoc=n[2],t.afterLoc=n[3]),this.tryEntries.push(t)}function OH(n){var t=n.completion||{};t.type="normal",delete t.arg,n.completion=t}function TH(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(Uoe,this),this.reset(!0)}function kH(n){if(n){var t=n[u$];if(t)return t.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var e=-1,r=function a(){for(;++e<n.length;)if(xS.call(n,e))return a.value=n[e],a.done=!1,a;return a.value=v0,a.done=!0,a};return r.next=r}}return{next:xQ}}function xQ(){return{value:v0,done:!0}}f$.prototype=Tk.constructor=Ok,Ok.constructor=f$,Ok[c$]=f$.displayName="GeneratorFunction",wQ(p$.prototype),p$.prototype[Loe]=function(){return this},wQ(Tk),Tk[c$]="Generator",Tk[u$]=function(){return this},Tk.toString=function(){return"[object Generator]"},TH.prototype={constructor:TH,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=v0,this.done=!1,this.delegate=null,this.method="next",this.arg=v0,this.tryEntries.forEach(OH),!t)for(var e in this)"t"===e.charAt(0)&&xS.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=v0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(M,I){return p.type="throw",p.arg=t,e.next=M,I&&(e.method="next",e.arg=v0),!!I}for(var a=this.tryEntries.length-1;a>=0;--a){var u=this.tryEntries[a],p=u.completion;if("root"===u.tryLoc)return r("end");if(u.tryLoc<=this.prev){var _=xS.call(u,"catchLoc"),D=xS.call(u,"finallyLoc");if(_&&D){if(this.prev<u.catchLoc)return r(u.catchLoc,!0);if(this.prev<u.finallyLoc)return r(u.finallyLoc)}else if(_){if(this.prev<u.catchLoc)return r(u.catchLoc,!0)}else{if(!D)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return r(u.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&xS.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var u=a;break}}u&&("break"===t||"continue"===t)&&u.tryLoc<=e&&e<=u.finallyLoc&&(u=null);var p=u?u.completion:{};return p.type=t,p.arg=e,u?(this.method="next",this.next=u.finallyLoc,ag):this.complete(p)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),ag},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),OH(r),ag}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var a=r.completion;if("throw"===a.type){var u=a.arg;OH(r)}return u}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:kH(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=v0),ag}};var TC={wrap:vQ,isGeneratorFunction:EQ,AsyncIterator:p$,mark:function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,Ok):(n.__proto__=Ok,c$ in n||(n[c$]="GeneratorFunction")),n.prototype=Object.create(Tk),n},awrap:function(n){return{__await:n}},async:function(n,t,e,r,a){void 0===a&&(a=Promise);var u=new p$(vQ(n,t,e,r),a);return EQ(t)?u:u.next().then(function(p){return p.done?p.value:u.next()})},keys:function(n){var t=[];for(var e in n)t.push(e);return t.reverse(),function r(){for(;t.length;){var a=t.pop();if(a in n)return r.value=a,r.done=!1,r}return r.done=!0,r}},values:kH};function Woe(n,t,e){var r=n.open(t),_=new URL(t).origin,D=40;n.addEventListener("message",function M(V){V.source===r&&(D=0,n.removeEventListener("message",M,!1))},!1),setTimeout(function I(){D<=0||(r.postMessage(e,_),setTimeout(I,250),D-=1)},250)}var FH,Goe='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box; }\n  .vega-embed.has-actions {\n    padding-right: 38px; }\n  .vega-embed details:not([open]) > :not(summary) {\n    display: none !important; }\n  .vega-embed summary {\n    list-style: none;\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 6px;\n    z-index: 1000;\n    background: white;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n    color: #1b1e23;\n    border: 1px solid #aaa;\n    border-radius: 999px;\n    opacity: 0.2;\n    transition: opacity 0.4s ease-in;\n    outline: none;\n    cursor: pointer;\n    line-height: 0px; }\n    .vega-embed summary::-webkit-details-marker {\n      display: none; }\n    .vega-embed summary:active {\n      box-shadow: #aaa 0px 0px 0px 1px inset; }\n    .vega-embed summary svg {\n      width: 14px;\n      height: 14px; }\n  .vega-embed details[open] summary {\n    opacity: 0.7; }\n  .vega-embed:hover summary,\n  .vega-embed:focus summary {\n    opacity: 1 !important;\n    transition: opacity 0.2s ease; }\n  .vega-embed .vega-actions {\n    position: absolute;\n    z-index: 1001;\n    top: 35px;\n    right: -9px;\n    display: flex;\n    flex-direction: column;\n    padding-bottom: 8px;\n    padding-top: 8px;\n    border-radius: 4px;\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n    border: 1px solid #d9d9d9;\n    background: white;\n    animation-duration: 0.15s;\n    animation-name: scale-in;\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n    text-align: left; }\n    .vega-embed .vega-actions a {\n      padding: 8px 16px;\n      font-family: sans-serif;\n      font-size: 14px;\n      font-weight: 600;\n      white-space: nowrap;\n      color: #434a56;\n      text-decoration: none; }\n      .vega-embed .vega-actions a:hover {\n        background-color: #f7f7f9;\n        color: black; }\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n      content: "";\n      display: inline-block;\n      position: absolute; }\n    .vega-embed .vega-actions::before {\n      left: auto;\n      right: 14px;\n      top: -16px;\n      border: 8px solid #0000;\n      border-bottom-color: #d9d9d9; }\n    .vega-embed .vega-actions::after {\n      left: auto;\n      right: 15px;\n      top: -14px;\n      border: 7px solid #0000;\n      border-bottom-color: #fff; }\n  .vega-embed .chart-wrapper.fit-x {\n    width: 100%; }\n  .vega-embed .chart-wrapper.fit-y {\n    height: 100%; }\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px; }\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6); }\n  to {\n    opacity: 1;\n    transform: scale(1); } }\n';function SQ(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];for(var a=0,u=e;a<u.length;a++){var p=u[a];qoe(n,p)}return n}function qoe(n,t){for(var e=0,r=Object.keys(t);e<r.length;e++){var a=r[e];(0,gf.writeConfig)(n,a,t[a],!0)}}function AQ(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),e.push.apply(e,r)}return e}function kC(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?AQ(Object(e),!0).forEach(function(r){Poe(n,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):AQ(Object(e)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))})}return n}String.prototype.startsWith||(String.prototype.startsWith=function(n,t){return this.substr(!t||t<0?0:+t,n.length)===n});var FC=gf,UP=Ese,g$="undefined"!=typeof window?window:void 0;void 0===UP&&null!=g$&&null!==(FH=g$.vl)&&void 0!==FH&&FH.compile&&(UP=g$.vl);var Yoe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Xoe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},HP={vega:"Vega","vega-lite":"Vega-Lite"},m$={vega:FC.version,"vega-lite":UP?UP.version:"not available"},Koe={vega:n=>n,"vega-lite":(n,t)=>UP.compile(n,{config:t}).spec},Qoe='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',Joe="chart-wrapper";function Zoe(n){return"function"==typeof n}function MQ(n,t,e,r){var a="<html><head>".concat(t,'</head><body><pre><code class="json">'),u="</code></pre>".concat(e,"</body></html>"),p=window.open("");p.document.write(a+n+u),p.document.title="".concat(HP[r]," JSON Source")}function eae(n,t){if(n.$schema){var r,e=sQ(n.$schema);t&&t!==e.library&&console.warn("The given visualization spec is written in ".concat(HP[e.library],", but mode argument sets ").concat(null!==(r=HP[t])&&void 0!==r?r:t,"."));var a=e.library;return(0,rQ.satisfies)(m$[a],"^".concat(e.version.slice(1)))||console.warn("The input spec uses ".concat(HP[a]," ").concat(e.version,", but the current version of ").concat(HP[a]," is v").concat(m$[a],".")),a}return"mark"in n||"encoding"in n||"layer"in n||"hconcat"in n||"vconcat"in n||"facet"in n||"repeat"in n?"vega-lite":"marks"in n||"signals"in n||"scales"in n||"axes"in n?"vega":null!=t?t:"vega"}function OQ(n){return function(n){return!(!n||!("load"in n))}(n)?n:FC.loader(n)}function TQ(n){var t;return null!==(t=n.usermeta&&n.usermeta.embedOptions)&&void 0!==t?t:{}}function IH(){return(IH=l$(TC.mark(function n(t,e){var r,a,u,p,_,D,M,I,V,j,G=arguments;return TC.wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:if(u=G.length>2&&void 0!==G[2]?G[2]:{},!(0,gf.isString)(e)){ye.next=10;break}return _=OQ(u.loader),ye.t0=JSON,ye.next=6,_.load(e);case 6:ye.t1=ye.sent,p=ye.t0.parse.call(ye.t0,ye.t1),ye.next=11;break;case 10:p=e;case 11:return D=TQ(p).loader,(!_||D)&&(_=OQ(null!==(M=u.loader)&&void 0!==M?M:D)),ye.next=15,kQ(TQ(p),_);case 15:return I=ye.sent,ye.next=18,kQ(u,_);case 18:return j=kC(kC({},SQ(V=ye.sent,I)),{},{config:(0,gf.mergeConfig)(null!==(r=V.config)&&void 0!==r?r:{},null!==(a=I.config)&&void 0!==a?a:{})}),ye.next=22,rae(t,p,j,_);case 22:return ye.abrupt("return",ye.sent);case 23:case"end":return ye.stop()}},n)}))).apply(this,arguments)}function kQ(n,t){return RH.apply(this,arguments)}function RH(){return(RH=l$(TC.mark(function n(t,e){var r,a,u;return TC.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(!(0,gf.isString)(t.config)){_.next=8;break}return _.t1=JSON,_.next=4,e.load(t.config);case 4:_.t2=_.sent,_.t0=_.t1.parse.call(_.t1,_.t2),_.next=9;break;case 8:_.t0=null!==(r=t.config)&&void 0!==r?r:{};case 9:if(a=_.t0,!(0,gf.isString)(t.patch)){_.next=18;break}return _.t4=JSON,_.next=14,e.load(t.patch);case 14:_.t5=_.sent,_.t3=_.t4.parse.call(_.t4,_.t5),_.next=19;break;case 18:_.t3=t.patch;case 19:return u=_.t3,_.abrupt("return",kC(kC(kC({},t),u?{patch:u}:{}),a?{config:a}:{}));case 21:case"end":return _.stop()}},n)}))).apply(this,arguments)}function iae(n){var e,t=n.getRootNode?n.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:null!==(e=document.head)&&void 0!==e?e:document.body}}function rae(n,t){return NH.apply(this,arguments)}function NH(){return(NH=l$(TC.mark(function n(t,e){var r,a,u,p,_,D,M,I,V,j,G,Z,ye,be,Ye,je,Et,Wt,dr,fr,Ms,Yr,Zo,ya,td,kl,w0,ev,en,Rn,Jn,$i,Xa,Sh,Ar,ZP,Ka,LC,tv,lg,nv,eL,gW,AZ,tL,MZ,nL=arguments;return TC.wrap(function(Rk){for(;;)switch(Rk.prev=Rk.next){case 0:if(MZ=function(){Xa&&document.removeEventListener("click",Xa),en.finalize()},V=nL.length>3?nL[3]:void 0,j=(I=nL.length>2&&void 0!==nL[2]?nL[2]:{}).theme?(0,gf.mergeConfig)(qe[I.theme],null!==(r=I.config)&&void 0!==r?r:{}):I.config,G=(0,gf.isBoolean)(I.actions)?I.actions:SQ({},Yoe,null!==(a=I.actions)&&void 0!==a?a:{}),Z=kC(kC({},Xoe),I.i18n),ye=null!==(u=I.renderer)&&void 0!==u?u:"canvas",be=null!==(p=I.logLevel)&&void 0!==p?p:FC.Warn,Ye=null!==(_=I.downloadFileName)&&void 0!==_?_:"visualization",je="string"==typeof t?document.querySelector(t):t){Rk.next=12;break}throw new Error("".concat(t," does not exist"));case 12:return!1!==I.defaultStyle&&(Et="vega-embed-style",Wt=iae(je),dr=Wt.rootContainer,Wt.root.getElementById(Et)||((fr=document.createElement("style")).id=Et,fr.innerText=void 0===I.defaultStyle||!0===I.defaultStyle?Goe.toString():I.defaultStyle,dr.appendChild(fr))),Ms=eae(e,I.mode),Yr=Koe[Ms](e,j),"vega-lite"===Ms&&Yr.$schema&&(Zo=sQ(Yr.$schema),(0,rQ.satisfies)(m$.vega,"^".concat(Zo.version.slice(1)))||console.warn("The compiled spec uses Vega ".concat(Zo.version,", but current version is v").concat(m$.vega,"."))),je.classList.add("vega-embed"),G&&je.classList.add("has-actions"),je.innerHTML="",ya=je,G&&((td=document.createElement("div")).classList.add(Joe),je.appendChild(td),ya=td),(kl=I.patch)&&(Yr=kl instanceof Function?kl(Yr):n$(Yr,kl,!0,!1).newDocument),I.formatLocale&&FC.formatLocale(I.formatLocale),I.timeFormatLocale&&FC.timeFormatLocale(I.timeFormatLocale),ev=FC.parse(Yr,"vega-lite"===Ms?{}:j,{ast:w0=I.ast}),(en=new(I.viewClass||FC.View)(ev,kC({loader:V,logLevel:be,renderer:ye},w0?{expr:null!==(D=null!==(M=FC.expressionInterpreter)&&void 0!==M?M:I.expr)&&void 0!==D?D:wse}:{}))).addSignalListener("autosize",(E0,nd)=>{var vf=nd.type;"fit-x"==vf?(ya.classList.add("fit-x"),ya.classList.remove("fit-y")):"fit-y"==vf?(ya.classList.remove("fit-x"),ya.classList.add("fit-y")):"fit"==vf?ya.classList.add("fit-x","fit-y"):ya.classList.remove("fit-x","fit-y")}),!1!==I.tooltip&&(Rn=Zoe(I.tooltip)?I.tooltip:new mQ(!0===I.tooltip?{}:I.tooltip).call,en.tooltip(Rn)),void 0===(Jn=I.hover)&&(Jn="vega"===Ms),Jn&&en.hover(($i="boolean"==typeof Jn?{}:Jn).hoverSet,$i.updateSet),I&&(null!=I.width&&en.width(I.width),null!=I.height&&en.height(I.height),null!=I.padding&&en.padding(I.padding)),Rk.next=36,en.initialize(ya,I.bind).runAsync();case 36:if(!1!==G){if(Sh=je,!1!==I.defaultStyle&&((Ar=document.createElement("details")).title=Z.CLICK_TO_VIEW_ACTIONS,je.append(Ar),Sh=Ar,(ZP=document.createElement("summary")).innerHTML=Qoe,Ar.append(ZP),Xa=E0=>{Ar.contains(E0.target)||Ar.removeAttribute("open")},document.addEventListener("click",Xa)),Ka=document.createElement("div"),Sh.append(Ka),Ka.classList.add("vega-actions"),!0===G||!1!==G.export)for(LC=function(){var nd=lg[tv];if(!0===G||!0===G.export||G.export[nd]){var vf=Z["".concat(nd.toUpperCase(),"_ACTION")],Nk=document.createElement("a");Nk.text=vf,Nk.href="#",Nk.target="_blank",Nk.download="".concat(Ye,".").concat(nd),Nk.addEventListener("mousedown",function(){var Sce=l$(TC.mark(function OZ(Ace){return TC.wrap(function(iL){for(;;)switch(iL.prev=iL.next){case 0:return Ace.preventDefault(),iL.next=3,en.toImageURL(nd,I.scaleFactor);case 3:this.href=iL.sent;case 5:case"end":return iL.stop()}},OZ,this)}));return function(OZ){return Sce.apply(this,arguments)}}()),Ka.append(Nk)}},tv=0,lg=["svg","png"];tv<lg.length;tv++)LC();(!0===G||!1!==G.source)&&((nv=document.createElement("a")).text=Z.SOURCE_ACTION,nv.href="#",nv.addEventListener("click",function(E0){var nd,vf;MQ(bH()(e),null!==(nd=I.sourceHeader)&&void 0!==nd?nd:"",null!==(vf=I.sourceFooter)&&void 0!==vf?vf:"",Ms),E0.preventDefault()}),Ka.append(nv)),"vega-lite"===Ms&&(!0===G||!1!==G.compiled)&&((eL=document.createElement("a")).text=Z.COMPILED_ACTION,eL.href="#",eL.addEventListener("click",function(E0){var nd,vf;MQ(bH()(Yr),null!==(nd=I.sourceHeader)&&void 0!==nd?nd:"",null!==(vf=I.sourceFooter)&&void 0!==vf?vf:"","vega"),E0.preventDefault()}),Ka.append(eL)),(!0===G||!1!==G.editor)&&(AZ=null!==(gW=I.editorUrl)&&void 0!==gW?gW:"https://vega.github.io/editor/",(tL=document.createElement("a")).text=Z.EDITOR_ACTION,tL.href="#",tL.addEventListener("click",function(E0){Woe(window,AZ,{config:j,mode:Ms,renderer:ye,spec:bH()(e)}),E0.preventDefault()}),Ka.append(tL))}return Rk.abrupt("return",{view:en,spec:e,vgSpec:Yr,finalize:MZ});case 38:case"end":return Rk.stop()}},n)}))).apply(this,arguments)}let FQ=(()=>{class n{constructor(){this.loader$=new _h(1),this.subscriptions=new T,this.event$=this.loader$.pipe(BP(),r0(1)),this.view$=this.event$.pipe(Wi(e=>"ready"===e.type),uS("view")),this.loading$=this.event$.pipe(Pe(e=>"loading"===e.type),Sl()),this.error$=this.event$.pipe(Wi(e=>"error"===e.type),uS("error"))}ngOnDestroy(){this.loader$.complete(),this.subscriptions.unsubscribe()}create(...e){const r=function(n,t){return IH.apply(this,arguments)}(...e),a=this.subscriptions,p=new T(()=>r.then(M=>M.finalize())),_=r.then(M=>M.view),D=rn(_).pipe(Pe(M=>({type:"ready",view:M})),Oe(M=>rn([{type:"error",error:M}])),qo({type:"loading",loader:_}));p.add(a),r.finally(()=>a.unsubscribe()),this.subscriptions=p,this.loader$.next(D)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();function IQ(){}let PH=(()=>{class n{constructor(e,r,a,u){this.manager=r,this.renderer=a,this.cdr=u,this._autosize={width:!0,height:!0},this.minSizeChange=1,this.viewChange=this.manager.view$,this.viewLoading=this.manager.loading$,this.viewError=this.manager.error$,this.subscriptions=this.manager.event$.subscribe(this.handleEvents.bind(this)),this.detach=IQ,this.container=e.nativeElement}set autosize(e){this._autosize="boolean"==typeof e?{width:e,height:e}:Object.assign({width:!1,height:!1},e)}get autosize(){return this._autosize}ngOnChanges(e){("spec"in e||"options"in e)&&this.create()}ngOnDestroy(){this.subscriptions.unsubscribe(),this.detach()}create(){const{spec:e,options:r,manager:a,renderer:u}=this;if(e){const p=u.createElement("div");a.create(p,e,r)}else this.detach()}handleEvents(e){"ready"===e.type?this.attach(e.view):"error"===e.type&&this.detach()}attach(e){const{cdr:r,container:a,renderer:u}=this,p=this.getRoot(e.container()),_=new Jre.ResizeSensor(p,({width:D,height:M})=>{this.updateSize(p,e,D,M)});this.detach(),this.detach=()=>{_.detach(),u.removeChild(a,p),r.markForCheck(),this.detach=IQ},u.appendChild(a,p),r.markForCheck()}updateSize(e,r,a,u){const{_autosize:p}=this,_=p.width&&this.updateWidth(e,r,a),D=p.height&&this.updateHeight(e,r,u);(_||D)&&r.runAsync()}updateWidth(e,r,a){const{minSizeChange:u}=this,_=e.classList.contains("has-actions")?38:0;return Math.abs(a-r.width()-_)>=u&&(r.width(a-_),!0)}updateHeight(e,r,a){const{minSizeChange:u}=this;return Math.abs(a-r.height())>=u&&(r.height(a),!0)}getRoot(e){const{renderer:r}=this;let a=r.parentNode(e);for(;a;)e=a,a=r.parentNode(a);return e}}return n.\u0275fac=function(e){return new(e||n)(ue(Mn),ue(FQ),ue(Ra),ue(F))},n.\u0275cmp=Sn({type:n,selectors:[["ngx-vega"]],inputs:{minSizeChange:"minSizeChange",autosize:"autosize",spec:"spec",options:"options"},outputs:{viewChange:"viewChange",viewLoading:"viewLoading",viewError:"viewError"},features:[Yn([FQ]),or],decls:0,vars:0,template:function(e,r){},styles:['[_nghost-%COMP%]{display:block}[_nghost-%COMP%], [_nghost-%COMP%] > div[_ngcontent-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]     .vega-embed{display:inline-block;position:relative}[_nghost-%COMP%]     .vega-embed.has-actions{padding-right:38px}[_nghost-%COMP%]     .vega-embed details:not([open])>:not(summary){display:none!important}[_nghost-%COMP%]     .vega-embed summary{background:#fff;border:1px solid #aaa;border-radius:999px;box-shadow:1px 1px 3px rgba(0,0,0,.1);color:#1b1e23;cursor:pointer;line-height:0;list-style:none;opacity:.2;outline:none;padding:6px;position:absolute;right:0;top:0;transition:opacity .4s ease-in;z-index:1000}[_nghost-%COMP%]     .vega-embed summary::-webkit-details-marker{display:none}[_nghost-%COMP%]     .vega-embed summary:active{box-shadow:inset 0 0 0 1px #aaa}[_nghost-%COMP%]     .vega-embed summary svg{height:14px;width:14px}[_nghost-%COMP%]     .vega-embed details[open] summary{opacity:.7}[_nghost-%COMP%]     .vega-embed:focus summary, [_nghost-%COMP%]     .vega-embed:hover summary{opacity:1!important;transition:opacity .2s ease}[_nghost-%COMP%]     .vega-embed .vega-actions{-webkit-animation-duration:.15s;-webkit-animation-name:scale-in;-webkit-animation-timing-function:cubic-bezier(.2,0,.13,1.5);animation-duration:.15s;animation-name:scale-in;animation-timing-function:cubic-bezier(.2,0,.13,1.5);background:#fff;border:1px solid #d9d9d9;border-radius:4px;box-shadow:0 2px 8px 0 rgba(0,0,0,.2);display:flex;flex-direction:column;padding-bottom:8px;padding-top:8px;position:absolute;right:-9px;text-align:left;top:35px;z-index:1001}[_nghost-%COMP%]     .vega-embed .vega-actions a{color:#434a56;font-family:sans-serif;font-size:14px;font-weight:600;padding:8px 16px;text-decoration:none;white-space:nowrap}[_nghost-%COMP%]     .vega-embed .vega-actions a:hover{background-color:#f7f7f9;color:#000}[_nghost-%COMP%]     .vega-embed .vega-actions:after, [_nghost-%COMP%]     .vega-embed .vega-actions:before{content:"";display:inline-block;position:absolute}[_nghost-%COMP%]     .vega-embed .vega-actions:before{border:8px solid transparent;border-bottom-color:#d9d9d9;left:auto;right:14px;top:-16px}[_nghost-%COMP%]     .vega-embed .vega-actions:after{border:7px solid transparent;border-bottom-color:#fff;left:auto;right:15px;top:-14px}[_nghost-%COMP%]     .vega-embed-wrapper{max-width:100%;overflow:scroll;padding-right:14px}@-webkit-keyframes scale-in{0%{opacity:0;transform:scale(.6)}to{opacity:1;transform:scale(1)}}@keyframes scale-in{0%{opacity:0;transform:scale(.6)}to{opacity:1;transform:scale(1)}}'],changeDetection:0}),n})(),LH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({}),n})();function sae(n,t){if(1&n&&(we(0,"div",15),jt(1),Ee()),2&n){const e=dn();mt(1),Ur(e.headline)}}function oae(n,t){if(1&n&&(we(0,"div",16),jt(1),Ee()),2&n){const e=dn();mt(1),Ur(e.title)}}function aae(n,t){if(1&n&&(we(0,"div",17),jt(1),Ee()),2&n){const e=dn();mt(1),Ur(e.description)}}const lae=function(){return{width:!0,height:!1}};function uae(n,t){if(1&n){const e=eo();we(0,"ngx-vega",18),Cn("viewLoading",function(a){return Zr(e),dn().loadingVegaVisualization=a}),Ee()}if(2&n){const e=dn();yt("spec",e.spec)("options",e.options)("autosize",c_(3,lae))}}function cae(n,t){1&n&&on(0,"markdown",19),2&n&&yt("src",dn().content)}function dae(n,t){if(1&n){const e=eo();we(0,"markdown",26),Cn("load",function(){return Zr(e),dn(2).disableSpinner("sql")}),Ee()}2&n&&yt("src",dn(2).sql)}function fae(n,t){if(1&n){const e=eo();we(0,"mat-expansion-panel",20,21),Cn("closed",function(){return Zr(e),dn().enableSpinner("sql")}),we(2,"mat-expansion-panel-header"),we(3,"mat-panel-title"),jt(4," Data Extraction Source Code (SQL) "),Ee(),Ee(),we(5,"div",22),we(6,"a",23),we(7,"mat-icon"),jt(8,"cloud_download"),Ee(),Ee(),Ee(),on(9,"mat-spinner",24),cn(10,dae,1,1,"markdown",25),Ee()}if(2&n){const e=Kf(1),r=dn();mt(6),yt("href",r.sql,Rg),mt(3),Qn("smooth-hide",!r.spinners.sql),mt(1),yt("ngIf",r.sql&&e.expanded)}}function hae(n,t){if(1&n){const e=eo();we(0,"markdown",29),Cn("load",function(){return Zr(e),dn(2).disableSpinner("csv")}),Ee()}2&n&&yt("src",dn(2).csv)}function pae(n,t){if(1&n){const e=eo();we(0,"mat-expansion-panel",20,27),Cn("closed",function(){return Zr(e),dn().enableSpinner("csv")}),we(2,"mat-expansion-panel-header"),we(3,"mat-panel-title"),jt(4," Extracted Data (CSV) "),Ee(),Ee(),we(5,"div",22),we(6,"a",23),we(7,"mat-icon"),jt(8,"cloud_download"),Ee(),Ee(),Ee(),on(9,"mat-spinner",24),cn(10,hae,1,1,"markdown",28),Ee()}if(2&n){const e=Kf(1),r=dn();mt(6),yt("href",r.csv,Rg),mt(3),Qn("smooth-hide",!r.spinners.csv),mt(1),yt("ngIf",r.csv&&e.expanded)}}function gae(n,t){if(1&n){const e=eo();we(0,"markdown",26),Cn("load",function(){return Zr(e),dn(2).disableSpinner("spec")}),Ee()}2&n&&yt("src",dn(2).specString)}function mae(n,t){if(1&n){const e=eo();we(0,"mat-expansion-panel",20,30),Cn("closed",function(){return Zr(e),dn().enableSpinner("spec")}),we(2,"mat-expansion-panel-header"),we(3,"mat-panel-title"),jt(4," Visualization Source Code (Vega Lite Spec) "),Ee(),Ee(),we(5,"div",22),we(6,"a",23),we(7,"mat-icon"),jt(8,"cloud_download"),Ee(),Ee(),Ee(),on(9,"mat-spinner",24),cn(10,gae,1,1,"markdown",25),Ee()}if(2&n){const e=Kf(1),r=dn();mt(6),yt("href",r.specString,Rg),mt(3),Qn("smooth-hide",!r.spinners.spec),mt(1),yt("ngIf",r.spec&&e.expanded)}}let yae=(()=>{class n{constructor(e,r){this.dialog=e,this.page=r,this.clsName="agc-visualization-page",this.headline="Marion County Opioid Addiction Report",this.options={renderer:"canvas",actions:!0,width:1268},this.csvSpinnerActive=!0,this.spinners={sql:!0,csv:!0,spec:!0},this.loadingVegaVisualization=!0}get specString(){return this.spec}ngOnInit(){this.page.snapshot.hasShownHelpModal||(this.dialog.open(Bre,{width:"50rem",data:{}}),this.page.setHasShownHelpModal(!0))}disableSpinner(e){this.spinners=Object.assign(Object.assign({},this.spinners),{[e]:!1})}enableSpinner(e){this.spinners=Object.assign(Object.assign({},this.spinners),{[e]:!0})}launchHelpDialog(){this.dialog.open(Pre,{width:"60rem",data:{}})}}return n.\u0275fac=function(e){return new(e||n)(ue(IP),ue(qK))},n.\u0275cmp=Sn({type:n,selectors:[["agc-visualization-page"]],hostVars:2,hostBindings:function(e,r){2&e&&is(r.clsName)},inputs:{headline:"headline",title:"title",description:"description",spec:"spec",options:"options",content:"content",sql:"sql",csv:"csv"},decls:22,vars:12,consts:[["class","header",4,"ngIf"],[1,"content"],[1,"center-box"],["class","title",4,"ngIf"],["class","description",4,"ngIf"],[1,"loading-message"],[1,"visualization"],[3,"spec","options","autosize","viewLoading",4,"ngIf"],["mat-icon-button","","color","accent","disableRipple","",1,"help",3,"click"],["title","Help",1,"qmark"],["ngClass","info"],["ngClass","storage-icon","svgIcon","menu:data-storage"],[3,"src",4,"ngIf"],["multi",""],[3,"closed",4,"ngIf"],[1,"header"],[1,"title"],[1,"description"],[3,"spec","options","autosize","viewLoading"],[3,"src"],[3,"closed"],["sqlPanel",""],[1,"file-download-area"],["target","_blank","rel","noreferrer noopener",1,"file-download",3,"href"],[1,"spinner"],["lineNumbers","",3,"src","load",4,"ngIf"],["lineNumbers","",3,"src","load"],["csvPanel",""],["class","csvContent","lineNumbers","",3,"src","load",4,"ngIf"],["lineNumbers","",1,"csvContent",3,"src","load"],["specPanel",""]],template:function(e,r){1&e&&(cn(0,sae,2,1,"div",0),we(1,"div",1),we(2,"div",2),cn(3,oae,2,1,"div",3),cn(4,aae,2,1,"div",4),we(5,"div",5),on(6,"mat-spinner"),Ee(),we(7,"div",6),cn(8,uae,1,4,"ngx-vega",7),we(9,"button",8),Cn("click",function(){return r.launchHelpDialog()}),we(10,"span",9),jt(11,"?"),Ee(),Ee(),Ee(),we(12,"mat-expansion-panel",10),we(13,"mat-expansion-panel-header"),we(14,"mat-panel-title"),on(15,"mat-icon",11),jt(16," DATA & GRAPHIC VARIABLE EXTRACTION INFORMATION "),Ee(),Ee(),cn(17,cae,1,1,"markdown",12),we(18,"mat-accordion",13),cn(19,fae,11,4,"mat-expansion-panel",14),cn(20,pae,11,4,"mat-expansion-panel",14),cn(21,mae,11,4,"mat-expansion-panel",14),Ee(),Ee(),Ee(),Ee()),2&e&&(yt("ngIf",r.headline),mt(3),yt("ngIf",r.title),mt(1),yt("ngIf",r.description),mt(1),Qn("smooth-hide",!r.loadingVegaVisualization),mt(3),yt("ngIf",r.spec),mt(4),Qn("smooth-show",!r.loadingVegaVisualization),mt(5),yt("ngIf",r.content),mt(2),yt("ngIf",r.sql),mt(1),yt("ngIf",r.csv),mt(1),yt("ngIf",r.spec))},directives:[ou,qre,PP,NV,JO,PV,RU,NP,NU,PH,S],styles:[".mat-expanded .mat-expanded .mat-expansion-panel-content{min-height:13rem}[_nghost-%COMP%]{display:block;width:100%}[_nghost-%COMP%]   markdown[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;height:4rem;margin-bottom:4.5rem;padding:0 1rem;align-items:center;font-weight:300;font-size:2.25rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{align-items:center;width:100%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .center-box[_ngcontent-%COMP%]{display:block;width:100%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:bold;font-size:1.25rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:1.25rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .loading-message[_ngcontent-%COMP%]{position:fixed;z-index:2;left:50%;top:50%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .visualization[_ngcontent-%COMP%]{position:relative;padding-right:2.375rem;display:flex;width:100%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .visualization[_ngcontent-%COMP%]:hover   ngx-vega[_ngcontent-%COMP%]     summary, [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .visualization[_ngcontent-%COMP%]:hover   .help[_ngcontent-%COMP%]{opacity:1;transition:opacity .2s ease}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .visualization[_ngcontent-%COMP%]   .help[_ngcontent-%COMP%]{position:absolute;top:0;right:0;cursor:pointer;opacity:.2;transition:opacity .4s ease-in;border-width:1px;border-style:solid;border-radius:50%;box-shadow:1px 1px 3px #0000001a;background:white;color:#1b1e23}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .visualization[_ngcontent-%COMP%]   .help[_ngcontent-%COMP%], [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .visualization[_ngcontent-%COMP%]   .help[_ngcontent-%COMP%]   .qmark[_ngcontent-%COMP%]{width:1.75rem;height:1.75rem;line-height:1.75rem;font-size:1.25rem;vertical-align:baseline}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .visualization[_ngcontent-%COMP%]   .help[_ngcontent-%COMP%]     .mat-button-focus-overlay{display:none}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{opacity:0;margin-top:2rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{font-weight:bold;font-size:.875rem;line-height:1.5rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.5rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .file-download-area[_ngcontent-%COMP%]{margin-top:.625rem;margin-bottom:2.5rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .file-download-area[_ngcontent-%COMP%]   .file-download[_ngcontent-%COMP%]{position:absolute;right:2rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{position:absolute;z-index:1;left:50%;top:8rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]{padding:1rem .5rem 0}[_nghost-%COMP%]   .smooth-show[_ngcontent-%COMP%]{opacity:1!important;transition:opacity .75s}[_nghost-%COMP%]   .smooth-hide[_ngcontent-%COMP%]{opacity:0!important;transition:opacity .5s}"],changeDetection:0}),n})();function _ae(n,t){if(1&n&&on(0,"agc-visualization-page",1),2&n){const e=dn();yt("title",e.visualization.title)("description",e.visualization.description)("spec",e.visualization.spec)("options",e.visualization.options)("content",e.visualization.content)("sql",e.visualization.sql)("csv",e.visualization.csv)}}const vae=[{path:"",component:(()=>{class n{constructor(e){this.subscriptions=new T;const r=e.data.subscribe(a=>{this.visualization=a.visualization});this.subscriptions.add(r)}ngOnDestroy(){this.subscriptions.unsubscribe()}}return n.\u0275fac=function(e){return new(e||n)(ue(oS))},n.\u0275cmp=Sn({type:n,selectors:[["agc-visualization"]],decls:1,vars:1,consts:[[3,"title","description","spec","options","content","sql","csv",4,"ngIf"],[3,"title","description","spec","options","content","sql","csv"]],template:function(e,r){1&e&&cn(0,_ae,1,7,"agc-visualization-page",0),2&e&&yt("ngIf",r.visualization)},directives:[ou,yae],styles:[""]}),n})(),resolve:{visualization:Gie}}];let bae=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[ic.forChild(vae)],ic]}),n})(),Cae=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[Er,fH,Sk,PU]]}),n})(),wae=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[Er,fH,Sk]]}),n})(),BH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[Er,LP,PU,Sk,N.forChild(),LH,Cae,wae,Yre]]}),n})(),Eae=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[Er,bae,BH]]}),n})(),RQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[Er]]}),n})();const Dae=["underline"],xae=["connectionContainer"],Sae=["inputContainer"],Aae=["label"];function Mae(n,t){1&n&&(Tp(0),we(1,"div",14),on(2,"div",15),on(3,"div",16),on(4,"div",17),Ee(),we(5,"div",18),on(6,"div",15),on(7,"div",16),on(8,"div",17),Ee(),$b())}function Oae(n,t){1&n&&(we(0,"div",19),Ei(1,1),Ee())}function Tae(n,t){if(1&n&&(Tp(0),Ei(1,2),we(2,"span"),jt(3),Ee(),$b()),2&n){const e=dn(2);mt(3),Ur(e._control.placeholder)}}function kae(n,t){1&n&&Ei(0,3,["*ngSwitchCase","true"])}function Fae(n,t){1&n&&(we(0,"span",23),jt(1," *"),Ee())}function Iae(n,t){if(1&n){const e=eo();we(0,"label",20,21),Cn("cdkObserveContent",function(){return Zr(e),dn().updateOutlineGap()}),cn(2,Tae,4,1,"ng-container",12),cn(3,kae,1,0,"ng-content",12),cn(4,Fae,2,0,"span",22),Ee()}if(2&n){const e=dn();Qn("mat-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-form-field-empty",e._control.empty&&!e._shouldAlwaysFloat())("mat-accent","accent"==e.color)("mat-warn","warn"==e.color),yt("cdkObserveContentDisabled","outline"!=e.appearance)("id",e._labelId)("ngSwitch",e._hasLabel()),mi("for",e._control.id)("aria-owns",e._control.id),mt(2),yt("ngSwitchCase",!1),mt(1),yt("ngSwitchCase",!0),mt(1),yt("ngIf",!e.hideRequiredMarker&&e._control.required&&!e._control.disabled)}}function Rae(n,t){1&n&&(we(0,"div",24),Ei(1,4),Ee())}function Nae(n,t){if(1&n&&(we(0,"div",25,26),on(2,"span",27),Ee()),2&n){const e=dn();mt(2),Qn("mat-accent","accent"==e.color)("mat-warn","warn"==e.color)}}function Pae(n,t){1&n&&(we(0,"div"),Ei(1,5),Ee()),2&n&&yt("@transitionMessages",dn()._subscriptAnimationState)}function Lae(n,t){if(1&n&&(we(0,"div",31),jt(1),Ee()),2&n){const e=dn(2);yt("id",e._hintLabelId),mt(1),Ur(e.hintLabel)}}function Bae(n,t){if(1&n&&(we(0,"div",28),cn(1,Lae,2,2,"div",29),Ei(2,6),on(3,"div",30),Ei(4,7),Ee()),2&n){const e=dn();yt("@transitionMessages",e._subscriptAnimationState),mt(1),yt("ngIf",e.hintLabel)}}const Vae=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],$ae=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],NQ=new Ft("MatError"),zae={transitionMessages:a0("transitionMessages",[Xc("enter",Xo({opacity:1,transform:"translateY(0%)"})),of("void => enter",[Xo({opacity:0,transform:"translateY(-5px)"}),tg("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let VH=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=kt({type:n}),n})();const PQ=new Ft("MatHint");let y$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=kt({type:n,selectors:[["mat-label"]]}),n})(),Hae=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=kt({type:n,selectors:[["mat-placeholder"]]}),n})();const LQ=new Ft("MatPrefix"),BQ=new Ft("MatSuffix");let VQ=0;const Gae=Eh(class{constructor(n){this._elementRef=n}},"primary"),qae=new Ft("MAT_FORM_FIELD_DEFAULT_OPTIONS"),jQ=new Ft("MatFormField");let zQ=(()=>{class n extends Gae{constructor(e,r,a,u,p,_,D,M){super(e),this._changeDetectorRef=r,this._dir=u,this._defaults=p,this._platform=_,this._ngZone=D,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new We,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+VQ++,this._labelId="mat-form-field-label-"+VQ++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==M,this.appearance=p&&p.appearance?p.appearance:"legacy",this._hideRequiredMarker=!(!p||null==p.hideRequiredMarker)&&p.hideRequiredMarker}get appearance(){return this._appearance}set appearance(e){const r=this._appearance;this._appearance=e||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&r!==e&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=yr(e)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(e){this._explicitFormFieldControl=e}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${e.controlType}`),e.stateChanges.pipe(qo(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(yi(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(yi(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),Ii(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(qo(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(qo(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(yi(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(e){const r=this._control?this._control.ngControl:null;return r&&r[e]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,sC(this._label.nativeElement,"transitionend").pipe(so(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&e.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(u=>"start"===u.align):null,a=this._hintChildren?this._hintChildren.find(u=>"end"===u.align):null;r?e.push(r.id):this._hintLabel&&e.push(this._hintLabelId),a&&e.push(a.id)}else this._errorChildren&&e.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(e)}}_validateControlChild(){}updateOutlineGap(){const e=this._label?this._label.nativeElement:null;if(!("outline"===this.appearance&&e&&e.children.length&&e.textContent.trim()&&this._platform.isBrowser))return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let r=0,a=0;const u=this._connectionContainerRef.nativeElement,p=u.querySelectorAll(".mat-form-field-outline-start"),_=u.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const D=u.getBoundingClientRect();if(0===D.width&&0===D.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const M=this._getStartEnd(D),I=e.children,V=this._getStartEnd(I[0].getBoundingClientRect());let j=0;for(let G=0;G<I.length;G++)j+=I[G].offsetWidth;r=Math.abs(V-M)-5,a=j>0?.75*j+10:0}for(let D=0;D<p.length;D++)p[D].style.width=`${r}px`;for(let D=0;D<_.length;D++)_[D].style.width=`${a}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(e){return this._dir&&"rtl"===this._dir.value?e.right:e.left}_isAttachedToDOM(){const e=this._elementRef.nativeElement;if(e.getRootNode){const r=e.getRootNode();return r&&r!==e}return document.documentElement.contains(e)}}return n.\u0275fac=function(e){return new(e||n)(ue(Mn),ue(F),ue(Mn),ue(vh,8),ue(qae,8),ue(rs),ue(On),ue(ec,8))},n.\u0275cmp=Sn({type:n,selectors:[["mat-form-field"]],contentQueries:function(e,r,a){if(1&e&&(bs(a,VH,5),bs(a,VH,7),bs(a,y$,5),bs(a,y$,7),bs(a,Hae,5),bs(a,NQ,5),bs(a,PQ,5),bs(a,LQ,5),bs(a,BQ,5)),2&e){let u;Pi(u=Li())&&(r._controlNonStatic=u.first),Pi(u=Li())&&(r._controlStatic=u.first),Pi(u=Li())&&(r._labelChildNonStatic=u.first),Pi(u=Li())&&(r._labelChildStatic=u.first),Pi(u=Li())&&(r._placeholderChild=u.first),Pi(u=Li())&&(r._errorChildren=u),Pi(u=Li())&&(r._hintChildren=u),Pi(u=Li())&&(r._prefixChildren=u),Pi(u=Li())&&(r._suffixChildren=u)}},viewQuery:function(e,r){if(1&e&&(Dl(Dae,5),Dl(xae,7),Dl(Sae,5),Dl(Aae,5)),2&e){let a;Pi(a=Li())&&(r.underlineRef=a.first),Pi(a=Li())&&(r._connectionContainerRef=a.first),Pi(a=Li())&&(r._inputContainerRef=a.first),Pi(a=Li())&&(r._label=a.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(e,r){2&e&&Qn("mat-form-field-appearance-standard","standard"==r.appearance)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-appearance-legacy","legacy"==r.appearance)("mat-form-field-invalid",r._control.errorState)("mat-form-field-can-float",r._canLabelFloat())("mat-form-field-should-float",r._shouldLabelFloat())("mat-form-field-has-label",r._hasFloatingLabel())("mat-form-field-hide-placeholder",r._hideControlPlaceholder())("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-focused",r._control.focused)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))("_mat-animation-noopable",!r._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Yn([{provide:jQ,useExisting:n}]),qn],ngContentSelectors:$ae,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(e,r){1&e&&(vs(Vae),we(0,"div",0),we(1,"div",1,2),Cn("click",function(u){return r._control.onContainerClick&&r._control.onContainerClick(u)}),cn(3,Mae,9,0,"ng-container",3),cn(4,Oae,2,0,"div",4),we(5,"div",5,6),Ei(7),we(8,"span",7),cn(9,Iae,5,16,"label",8),Ee(),Ee(),cn(10,Rae,2,0,"div",9),Ee(),cn(11,Nae,3,4,"div",10),we(12,"div",11),cn(13,Pae,2,1,"div",12),cn(14,Bae,5,2,"div",13),Ee(),Ee()),2&e&&(mt(3),yt("ngIf","outline"==r.appearance),mt(1),yt("ngIf",r._prefixChildren.length),mt(5),yt("ngIf",r._hasFloatingLabel()),mt(1),yt("ngIf",r._suffixChildren.length),mt(1),yt("ngIf","outline"!=r.appearance),mt(1),yt("ngSwitch",r._getDisplayedMessages()),mt(1),yt("ngSwitchCase","error"),mt(1),yt("ngSwitchCase","hint"))},directives:[ou,A_,gx,Y5],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[zae.transitionMessages]},changeDetection:0}),n})(),Yae=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[Er,ps,X5],ps]}),n})();const gu=new Ft("NgValidators"),RC=new Ft("NgAsyncValidators");function eJ(n){return null!=n}function tJ(n){const t=Vy(n)?rn(n):n;return gm(t),t}function nJ(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function iJ(n,t){return t.map(e=>e(n))}function rJ(n){return n.map(t=>function(n){return!n.validate}(t)?t:e=>t.validate(e))}function jH(n){return null!=n?function(n){if(!n)return null;const t=n.filter(eJ);return 0==t.length?null:function(e){return nJ(iJ(e,t))}}(rJ(n)):null}function zH(n){return null!=n?function(n){if(!n)return null;const t=n.filter(eJ);return 0==t.length?null:function(e){return AP(iJ(e,t).map(tJ)).pipe(Pe(nJ))}}(rJ(n)):null}function aJ(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function lJ(n){return n._rawValidators}function uJ(n){return n._rawAsyncValidators}function UH(n){return n?Array.isArray(n)?n:[n]:[]}function _$(n,t){return Array.isArray(n)?n.includes(t):n===t}function cJ(n,t){const e=UH(t);return UH(n).forEach(a=>{_$(e,a)||e.push(a)}),e}function dJ(n,t){return UH(t).filter(e=>!_$(n,e))}let fJ=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=jH(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=zH(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,r){return!!this.control&&this.control.hasError(e,r)}getError(e,r){return this.control?this.control.getError(e,r):null}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=kt({type:n}),n})(),sc=(()=>{class n extends fJ{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Cr(n)))(r||n)}}(),n.\u0275dir=kt({type:n,features:[qn]}),n})();class J_ extends fJ{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}function WP(n,t){GH(n,t),t.valueAccessor.writeValue(n.value),function(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&pJ(n,t)})}(n,t),function(n,t){const e=(r,a)=>{t.valueAccessor.writeValue(r),a&&t.viewToModelUpdate(r)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&pJ(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function(n,t){if(t.valueAccessor.setDisabledState){const e=r=>{t.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function C$(n,t,e=!0){const r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),E$(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function w$(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function GH(n,t){const e=lJ(n);null!==t.validator?n.setValidators(aJ(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const r=uJ(n);null!==t.asyncValidator?n.setAsyncValidators(aJ(r,t.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const a=()=>n.updateValueAndValidity();w$(t._rawValidators,a),w$(t._rawAsyncValidators,a)}function E$(n,t){let e=!1;if(null!==n){if(null!==t.validator){const a=lJ(n);if(Array.isArray(a)&&a.length>0){const u=a.filter(p=>p!==t.validator);u.length!==a.length&&(e=!0,n.setValidators(u))}}if(null!==t.asyncValidator){const a=uJ(n);if(Array.isArray(a)&&a.length>0){const u=a.filter(p=>p!==t.asyncValidator);u.length!==a.length&&(e=!0,n.setAsyncValidators(u))}}}const r=()=>{};return w$(t._rawValidators,r),w$(t._rawAsyncValidators,r),e}function pJ(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function gJ(n,t){GH(n,t)}function mJ(n,t){n._syncPendingControls(),t.forEach(e=>{const r=e.control;"submit"===r.updateOn&&r._pendingChange&&(e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function D$(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const GP="VALID",x$="INVALID",kk="PENDING",qP="DISABLED";function XH(n){return(QH(n)?n.validators:n)||null}function yJ(n){return Array.isArray(n)?jH(n):n||null}function KH(n,t){return(QH(t)?t.asyncValidators:n)||null}function _J(n){return Array.isArray(n)?zH(n):n||null}function QH(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class JH{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=yJ(this._rawValidators),this._composedAsyncValidatorFn=_J(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===GP}get invalid(){return this.status===x$}get pending(){return this.status==kk}get disabled(){return this.status===qP}get enabled(){return this.status!==qP}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=yJ(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=_J(t)}addValidators(t){this.setValidators(cJ(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(cJ(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(dJ(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(dJ(t,this._rawAsyncValidators))}hasValidator(t){return _$(this._rawValidators,t)}hasAsyncValidator(t){return _$(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=kk,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=qP,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=GP,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===GP||this.status===kk)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?qP:GP}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=kk,this._hasOwnPendingAsyncValidator=!0;const e=tJ(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let r=n;return t.forEach(a=>{r=r instanceof ZH?r.controls.hasOwnProperty(a)?r.controls[a]:null:r instanceof ple&&r.at(a)||null}),r}(this,t)}getError(t,e){const r=e?this.get(e):this;return r&&r.errors?r.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Vn,this.statusChanges=new Vn}_calculateStatus(){return this._allControlsDisabled()?qP:this.errors?x$:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(kk)?kk:this._anyControlsHaveStatus(x$)?x$:GP}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){QH(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class S$ extends JH{constructor(t=null,e,r){super(XH(e),KH(r,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){D$(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){D$(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class ZH extends JH{constructor(t,e,r){super(XH(e),KH(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,r={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((r,a)=>{r.reset(t[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,r)=>(t[r]=e instanceof S$?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,r)=>!!r._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const r=this.controls[e];r&&t(r,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const r=this.controls[e];if(this.contains(e)&&t(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,r)=>((e.enabled||this.disabled)&&(t[r]=e.value),t))}_reduceChildren(t,e){let r=t;return this._forEachChild((a,u)=>{r=e(r,a,u)}),r}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,r)=>{if(void 0===t[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class ple extends JH{constructor(t,e,r){super(XH(e),KH(r,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,r={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((r,a)=>{this._throwIfControlMissing(a),this.at(a).setValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((r,a)=>{this.at(a)&&this.at(a).patchValue(r,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((r,a)=>{r.reset(t[a],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof S$?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,r)=>!!r._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,r)=>{t(e,r)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,r)=>{if(void 0===t[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const gle={provide:sc,useExisting:Me(()=>A$)},YP=(()=>Promise.resolve(null))();let A$=(()=>{class n extends sc{constructor(e,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Vn,this.form=new ZH({},jH(e),zH(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){YP.then(()=>{const r=this._findContainer(e.path);e.control=r.registerControl(e.name,e.control),WP(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){YP.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name),D$(this._directives,e)})}addFormGroup(e){YP.then(()=>{const r=this._findContainer(e.path),a=new ZH({});gJ(a,e),r.registerControl(e.name,a),a.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){YP.then(()=>{const r=this._findContainer(e.path);r&&r.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,r){YP.then(()=>{this.form.get(e.path).setValue(r)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,mJ(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(ue(gu,10),ue(RC,10))},n.\u0275dir=kt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,r){1&e&&Cn("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Yn([gle]),qn]}),n})();const Dle={provide:sc,useExisting:Me(()=>M$)};let M$=(()=>{class n extends sc{constructor(e,r){super(),this.validators=e,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Vn,this._setValidators(e),this._setAsyncValidators(r)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(E$(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const r=this.form.get(e.path);return WP(r,e),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),r}getControl(e){return this.form.get(e.path)}removeControl(e){C$(e.control||null,e,!1),D$(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,r){this.form.get(e.path).setValue(r)}onSubmit(e){return this.submitted=!0,mJ(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const r=e.control,a=this.form.get(e.path);r!==a&&(C$(r||null,e),a instanceof S$&&(WP(a,e),e.control=a))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const r=this.form.get(e.path);gJ(r,e),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const r=this.form.get(e.path);r&&function(n,t){return E$(n,t)}(r,e)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){GH(this.form,this),this._oldForm&&E$(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(ue(gu,10),ue(RC,10))},n.\u0275dir=kt({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,r){1&e&&Cn("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Yn([Dle]),qn,or]}),n})();const zle=["trigger"],Ule=["panel"];function Hle(n,t){if(1&n&&(we(0,"span",8),jt(1),Ee()),2&n){const e=dn();mt(1),Ur(e.placeholder)}}function Wle(n,t){if(1&n&&(we(0,"span",12),jt(1),Ee()),2&n){const e=dn(2);mt(1),Ur(e.triggerValue)}}function Gle(n,t){1&n&&Ei(0,0,["*ngSwitchCase","true"])}function qle(n,t){1&n&&(we(0,"span",9),cn(1,Wle,2,1,"span",10),cn(2,Gle,1,0,"ng-content",11),Ee()),2&n&&(yt("ngSwitch",!!dn().customTrigger),mt(2),yt("ngSwitchCase",!0))}function Yle(n,t){if(1&n){const e=eo();we(0,"div",13),we(1,"div",14,15),Cn("@transformPanel.done",function(a){return Zr(e),dn()._panelDoneAnimatingStream.next(a.toState)})("keydown",function(a){return Zr(e),dn()._handleKeydown(a)}),Ei(3,1),Ee(),Ee()}if(2&n){const e=dn();yt("@transformPanelWrap",void 0),mt(1),function(n,t,e){Pu(yo,Ru,qf(Ct(),n,t,e),!0)}("mat-select-panel ",e._getPanelTheme(),""),Co("transform-origin",e._transformOrigin)("font-size",e._triggerFontSize,"px"),yt("ngClass",e.panelClass)("@transformPanel",e.multiple?"showing-multiple":"showing"),mi("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}const Xle=[[["mat-select-trigger"]],"*"],Kle=["mat-select-trigger","*"],zJ={transformPanelWrap:a0("transformPanelWrap",[of("* => void",Lx("@transformPanel",[c8()],{optional:!0}))]),transformPanel:a0("transformPanel",[Xc("void",Xo({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),Xc("showing",Xo({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),Xc("showing-multiple",Xo({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),of("void => *",tg("120ms cubic-bezier(0, 0, 0.2, 1)")),of("* => void",tg("100ms 25ms linear",Xo({opacity:0})))])};let UJ=0;const WJ=new Ft("mat-select-scroll-strategy"),eue=new Ft("MAT_SELECT_CONFIG"),tue={provide:WJ,deps:[pS],useFactory:function(n){return()=>n.scrollStrategies.reposition()}};class nue{constructor(t,e){this.source=t,this.value=e}}const iue=rP(sP(DC(Qx(class{constructor(n,t,e,r,a){this._elementRef=n,this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=r,this.ngControl=a}})))),GJ=new Ft("MatSelectTrigger");let rue=(()=>{class n extends iue{constructor(e,r,a,u,p,_,D,M,I,V,j,G,Z,ye){var be,Ye,je;super(p,u,D,M,V),this._viewportRuler=e,this._changeDetectorRef=r,this._ngZone=a,this._dir=_,this._parentFormField=I,this._liveAnnouncer=Z,this._defaultOptions=ye,this._panelOpen=!1,this._compareWith=(Et,Wt)=>Et===Wt,this._uid="mat-select-"+UJ++,this._triggerAriaLabelledBy=null,this._destroy=new We,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+UJ++,this._panelDoneAnimatingStream=new We,this._overlayPanelClass=(null===(be=this._defaultOptions)||void 0===be?void 0:be.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._required=!1,this._multiple=!1,this._disableOptionCentering=null!==(je=null===(Ye=this._defaultOptions)||void 0===Ye?void 0:Ye.disableOptionCentering)&&void 0!==je&&je,this.ariaLabel="",this.optionSelectionChanges=te(()=>{const Et=this.options;return Et?Et.changes.pipe(qo(Et),Ga(()=>Ii(...Et.map(Wt=>Wt.onSelectionChange)))):this._ngZone.onStable.pipe(so(1),Ga(()=>this.optionSelectionChanges))}),this.openedChange=new Vn,this._openedStream=this.openedChange.pipe(Wi(Et=>Et),Pe(()=>{})),this._closedStream=this.openedChange.pipe(Wi(Et=>!Et),Pe(()=>{})),this.selectionChange=new Vn,this.valueChange=new Vn,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==ye?void 0:ye.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=ye.typeaheadDebounceInterval),this._scrollStrategyFactory=G,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(j)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required}set required(e){this._required=yr(e),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._multiple=yr(e)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(e){this._disableOptionCentering=yr(e)}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){(e!==this._value||this._multiple&&Array.isArray(e))&&(this.options&&this._setSelectionByValue(e),this._value=e)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(e){this._typeaheadDebounceInterval=Yu(e)}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new Iz(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Sl(),yi(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(yi(this._destroy)).subscribe(e=>{e.added.forEach(r=>r.select()),e.removed.forEach(r=>r.deselect())}),this.options.changes.pipe(qo(null),yi(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const e=this._getTriggerAriaLabelledby();if(e!==this._triggerAriaLabelledBy){const r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?r.setAttribute("aria-labelledby",e):r.removeAttribute("aria-labelledby")}this.ngControl&&this.updateErrorState()}ngOnChanges(e){e.disabled&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(e){this.value=e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){var e,r;return this.multiple?(null===(e=this._selectionModel)||void 0===e?void 0:e.selected)||[]:null===(r=this._selectionModel)||void 0===r?void 0:r.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const e=this._selectionModel.selected.map(r=>r.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){const r=e.keyCode,a=40===r||38===r||37===r||39===r,u=13===r||32===r,p=this._keyManager;if(!p.isTyping()&&u&&!bh(e)||(this.multiple||e.altKey)&&a)e.preventDefault(),this.open();else if(!this.multiple){const _=this.selected;p.onKeydown(e);const D=this.selected;D&&_!==D&&this._liveAnnouncer.announce(D.viewValue,1e4)}}_handleOpenKeydown(e){const r=this._keyManager,a=e.keyCode,u=40===a||38===a,p=r.isTyping();if(u&&e.altKey)e.preventDefault(),this.close();else if(p||13!==a&&32!==a||!r.activeItem||bh(e))if(!p&&this._multiple&&65===a&&e.ctrlKey){e.preventDefault();const _=this.options.some(D=>!D.disabled&&!D.selected);this.options.forEach(D=>{D.disabled||(_?D.select():D.deselect())})}else{const _=r.activeItemIndex;r.onKeydown(e),this._multiple&&u&&e.shiftKey&&r.activeItem&&r.activeItemIndex!==_&&r.activeItem._selectViaInteraction()}else e.preventDefault(),r.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(so(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this._selectionModel.selected.forEach(r=>r.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(r=>this._selectValue(r)),this._sortValues();else{const r=this._selectValue(e);r?this._keyManager.updateActiveItem(r):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue(e){const r=this.options.find(a=>{if(this._selectionModel.isSelected(a))return!1;try{return null!=a.value&&this._compareWith(a.value,e)}catch(u){return!1}});return r&&this._selectionModel.select(r),r}_initKeyManager(){this._keyManager=new _7(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(yi(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(yi(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const e=Ii(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(yi(e)).subscribe(r=>{this._onSelect(r.source,r.isUserInput),r.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),Ii(...this.options.map(r=>r._stateChanges)).pipe(yi(e)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(e,r){const a=this._selectionModel.isSelected(e);null!=e.value||this._multiple?(a!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),r&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),r&&this.focus())):(e.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(e.value)),a!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const e=this.options.toArray();this._selectionModel.sort((r,a)=>this.sortComparator?this.sortComparator(r,a,e):e.indexOf(r)-e.indexOf(a)),this.stateChanges.next()}}_propagateChanges(e){let r=null;r=this.multiple?this.selected.map(a=>a.value):this.selected?this.selected.value:e,this._value=r,this.valueChange.emit(r),this._onChange(r),this.selectionChange.emit(this._getChangeEvent(r)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var e;return!this._panelOpen&&!this.disabled&&(null===(e=this.options)||void 0===e?void 0:e.length)>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){var e;if(this.ariaLabel)return null;const r=null===(e=this._parentFormField)||void 0===e?void 0:e.getLabelId();return this.ariaLabelledby?(r?r+" ":"")+this.ariaLabelledby:r}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var e;if(this.ariaLabel)return null;const r=null===(e=this._parentFormField)||void 0===e?void 0:e.getLabelId();let a=(r?r+" ":"")+this._valueId;return this.ariaLabelledby&&(a+=" "+this.ariaLabelledby),a}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){this._ariaDescribedby=e.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return n.\u0275fac=function(e){return new(e||n)(ue(L_),ue(F),ue(On),ue(j9),ue(Mn),ue(vh,8),ue(A$,8),ue(M$,8),ue(jQ,8),ue(J_,10),pd("tabindex"),ue(WJ),ue(o8),ue(eue,8))},n.\u0275dir=kt({type:n,viewQuery:function(e,r){if(1&e&&(Dl(zle,5),Dl(Ule,5),Dl(PK,5)),2&e){let a;Pi(a=Li())&&(r.trigger=a.first),Pi(a=Li())&&(r.panel=a.first),Pi(a=Li())&&(r._overlayDir=a.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],id:"id",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",typeaheadDebounceInterval:"typeaheadDebounceInterval",panelClass:"panelClass",ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",sortComparator:"sortComparator"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[qn,or]}),n})(),qJ=(()=>{class n extends rue{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(e,r,a){const u=this._getItemHeight();return Math.min(Math.max(0,u*e-r+u/2),a)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(yi(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(so(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(e){const r=sV(e,this.options,this.optionGroups),a=this._getItemHeight();this.panel.nativeElement.scrollTop=0===e&&1===r?0:function(n,t,e,r){return n<e?n:n+t>e+256?Math.max(0,n-256+t):e}((e+r)*a,a,this.panel.nativeElement.scrollTop)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(e){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(e)}_getChangeEvent(e){return new nue(this,e)}_calculateOverlayOffsetX(){const e=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),r=this._viewportRuler.getViewportSize(),a=this._isRtl(),u=this.multiple?56:32;let p;if(this.multiple)p=40;else if(this.disableOptionCentering)p=16;else{let M=this._selectionModel.selected[0]||this.options.first;p=M&&M.group?32:16}a||(p*=-1);const _=0-(e.left+p-(a?u:0)),D=e.right+p-r.width+(a?0:u);_>0?p+=_+8:D>0&&(p-=D+8),this._overlayDir.offsetX=Math.round(p),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(e,r,a){const u=this._getItemHeight(),p=(u-this._triggerRect.height)/2,_=Math.floor(256/u);let D;return this.disableOptionCentering?0:(D=0===this._scrollTop?e*u:this._scrollTop===a?(e-(this._getItemCount()-_))*u+(u-(this._getItemCount()*u-256)%u):r-u/2,Math.round(-1*D-p))}_checkOverlayWithinViewport(e){const r=this._getItemHeight(),a=this._viewportRuler.getViewportSize(),u=this._triggerRect.top-8,p=a.height-this._triggerRect.bottom-8,_=Math.abs(this._offsetY),M=Math.min(this._getItemCount()*r,256)-_-this._triggerRect.height;M>p?this._adjustPanelUp(M,p):_>u?this._adjustPanelDown(_,u,e):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(e,r){const a=Math.round(e-r);this._scrollTop-=a,this._offsetY-=a,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(e,r,a){const u=Math.round(e-r);if(this._scrollTop+=u,this._offsetY+=u,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=a)return this._scrollTop=a,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const e=this._getItemHeight(),r=this._getItemCount(),a=Math.min(r*e,256),p=r*e-a;let _;_=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),_+=sV(_,this.options,this.optionGroups);const D=a/2;this._scrollTop=this._calculateOverlayScroll(_,D,p),this._offsetY=this._calculateOverlayOffsetY(_,D,p),this._checkOverlayWithinViewport(p)}_getOriginBasedOnOption(){const e=this._getItemHeight(),r=(e-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-r+e/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return n.\u0275fac=function(){let t;return function(r){return(t||(t=Cr(n)))(r||n)}}(),n.\u0275cmp=Sn({type:n,selectors:[["mat-select"]],contentQueries:function(e,r,a){if(1&e&&(bs(a,GJ,5),bs(a,lP,5),bs(a,fk,5)),2&e){let u;Pi(u=Li())&&(r.customTrigger=u.first),Pi(u=Li())&&(r.options=u),Pi(u=Li())&&(r.optionGroups=u)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(e,r){1&e&&Cn("keydown",function(u){return r._handleKeydown(u)})("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()}),2&e&&(mi("id",r.id)("tabindex",r.tabIndex)("aria-controls",r.panelOpen?r.id+"-panel":null)("aria-expanded",r.panelOpen)("aria-label",r.ariaLabel||null)("aria-required",r.required.toString())("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-describedby",r._ariaDescribedby||null)("aria-activedescendant",r._getAriaActiveDescendant()),Qn("mat-select-disabled",r.disabled)("mat-select-invalid",r.errorState)("mat-select-required",r.required)("mat-select-empty",r.empty)("mat-select-multiple",r.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[Yn([{provide:VH,useExisting:n},{provide:p0,useExisting:n}]),qn],ngContentSelectors:Kle,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(e,r){if(1&e&&(vs(Xle),we(0,"div",0,1),Cn("click",function(){return r.toggle()}),we(3,"div",2),cn(4,Hle,2,1,"span",3),cn(5,qle,3,2,"span",4),Ee(),we(6,"div",5),on(7,"div",6),Ee(),Ee(),cn(8,Yle,4,14,"ng-template",7),Cn("backdropClick",function(){return r.close()})("attach",function(){return r._onAttached()})("detach",function(){return r.close()})),2&e){const a=Kf(1);mi("aria-owns",r.panelOpen?r.id+"-panel":null),mt(3),yt("ngSwitch",r.empty),mi("id",r._valueId),mt(1),yt("ngSwitchCase",!0),mt(1),yt("ngSwitchCase",!1),mt(3),yt("cdkConnectedOverlayPanelClass",r._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",r._scrollStrategy)("cdkConnectedOverlayOrigin",a)("cdkConnectedOverlayOpen",r.panelOpen)("cdkConnectedOverlayPositions",r._positions)("cdkConnectedOverlayMinWidth",null==r._triggerRect?null:r._triggerRect.width)("cdkConnectedOverlayOffsetY",r._offsetY)}},directives:[dre,A_,gx,PK,kB,JO],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;opacity:0}\n'],encapsulation:2,data:{animation:[zJ.transformPanelWrap,zJ.transformPanel]},changeDetection:0}),n})(),YJ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({providers:[tue],imports:[[Er,LK,oV,ps],uC,Yae,oV,ps]}),n})(),sue=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[Er,YJ]]}),n})(),oue=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[Er,YJ,sue]]}),n})(),XJ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[Er,LP,fH,Sk,N]]}),n})(),KJ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[Er]]}),n})(),QJ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[Er,LH,RQ]]}),n})(),T$=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[Er,XJ,KJ,QJ,BH],XJ,KJ,QJ,BH]}),n})();function JJ(n,t,e){return e?JJ(n,t).pipe(Pe(r=>Ae(r)?e(...r):e(r))):new ae(r=>{const a=(...p)=>r.next(1===p.length?p[0]:p);let u;try{u=n(a)}catch(p){return void r.error(p)}if(Ce(t))return()=>t(a,u)})}const k$={datasetsPath:"assets/generated/aggregate-table-data.json",subLabel:"Drug",subLabelFlag:"Tox lab flag",timeSliderSource:["deaths","DOD"]};var Z_=(()=>(function(n){n.pie="pie-chart",n.verticalBar="vertical-bar-chart",n.horizontalBar="horizontal-bar-chart"}(Z_||(Z_={})),Z_))();const oW={[Z_.pie]:{maxDistinctValues:4},[Z_.verticalBar]:{maxDistinctValues:50},[Z_.horizontalBar]:{maxDistinctValues:500}};function ZJ(n){return null!=n?n:{ids:[],entities:{}}}let KP=(()=>{let n=class extends tH{selectId(e){return"string"==typeof e?e:e.name}};return n.\u0275fac=function(){let t;return function(r){return(t||(t=Cr(n)))(r||n)}}(),n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n=Vi([Dk(),fS({name:"datasets",defaults:ZJ()})],n),n})();var PC=(()=>(function(n){n.all="all",n.sub="sub",n.nonSub="non-sub"}(PC||(PC={})),PC))();let Ik=(()=>{let n=class extends tH{constructor(e){super(),this.datasetsState=e}get subLabel$(){return this.state$.pipe(uS("subLabel"),Sl())}get subLabelFlag$(){return this.state$.pipe(uS("subLabelFlag"),Sl())}selectId(e,r){return"object"==typeof e&&"dataset"in e&&(r=e,e=e.dataset),`${this.datasetsState.selectId(e)}:${"string"==typeof r?r:r.name}`}getVariable(e){return this.entities$.pipe(uS(e),Sl())}getVariables(e,r){const a=this.createVariableSelector(e,r);return this.entitiesArray$.pipe(Pe(u=>u.filter(a)))}getSubVariables(e){return this.getVariables(e,PC.sub)}getMetadata(e){return this.getVariable(e).pipe(Pe(r=>{if(void 0===r)return[];const a=[{label:"Type",value:r.type},{label:"Description",value:r.description},{label:"Missing values",value:`${r.percentMissing}%`}];if("summary"===r.distribution.type){const{distribution:{summary:{distinct:u,min:p,max:_}}}=r;a.push({label:"Distinct entries",value:""+u},{label:"Minimum value/length",value:""+p},{label:"Maximum value/length",value:""+_})}return a}))}createVariableSelector(e,r){const a=[];if(void 0!==e){const{datasetsState:p}=this,_=p.selectId.bind(p),D=_(e);a.push(M=>_(M.dataset)===D)}const{snapshot:{subLabelFlag:u}}=this;switch(r){case PC.nonSub:a.push(p=>p.description!==u);break;case PC.sub:a.push(p=>p.description===u)}return 0===a.length?()=>!0:1===a.length?a[0]:p=>a.every(_=>_(p))}};return n.\u0275fac=function(e){return new(e||n)(se(KP))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),Vi([og()],n.prototype,"subLabel$",null),Vi([og()],n.prototype,"subLabelFlag$",null),n=Vi([Dk(),fS({name:"datasetVariables",defaults:Object.assign(Object.assign({},ZJ()),{subLabel:k$.subLabel,subLabelFlag:k$.subLabelFlag})})],n),n})();const eZ={leading:!0,trailing:!1};function tZ(n,t=Yc,e=eZ){return r=>r.lift(new cue(n,t,e.leading,e.trailing))}class cue{constructor(t,e,r,a){this.duration=t,this.scheduler=e,this.leading=r,this.trailing=a}call(t,e){return e.subscribe(new due(t,this.duration,this.scheduler,this.leading,this.trailing))}}class due extends Dt{constructor(t,e,r,a,u){super(t),this.duration=e,this.scheduler=r,this.leading=a,this.trailing=u,this._hasTrailingValue=!1,this._trailingValue=null}_next(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(fue,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)}}function fue(n){const{subscriber:t}=n;t.clearThrottle()}var C0=(()=>(function(n){n.pie="pie-chart",n.histogram="histogram",n.verticalBar="bar-chart",n.horizontalBar="horizontal-bar-chart",n.summary="summary"}(C0||(C0={})),C0))();function nZ(n,t=[],e={}){const{flipAxes:r,xLabel:a,yLabel:u}=e;return{$schema:"https://vega.github.io/schema/vega-lite/v5.json",autosize:{resize:!0},width:"container",view:{strokeOpacity:0},data:{name:"distribution",values:t},transform:[{aggregate:[{op:"sum",field:"count",as:"total"}],groupby:["value"]},{calculate:'isDate(datum.value) ? timeFormat(datum.value, "%Y") : toString(datum.value)',as:"label"},{calculate:'format(datum.total, ",")',as:"totalLabel"}],encoding:{x:r?rZ(a):iZ(a,0),y:r?iZ(u):rZ(u)},layer:[{mark:{type:"bar",width:24,color:"#77ACF0",strokeWidth:1,stroke:"white",orient:r?"horizontal":"vertical"}},{mark:{type:"text",align:r?"left":"center",baseline:"middle",dx:r?3:0,dy:r?0:-10},encoding:{text:{field:"totalLabel",type:"nominal"}}}]}}function iZ(n,t){return{field:"label",type:"nominal",axis:{minExtent:0,title:n,titlePadding:10,titleColor:"#212121",titleFontSize:12,titleFontWeight:"bold",labelFlush:!1,labelAngle:t,domainColor:"#757575",grid:!1,tickColor:"#757575"}}}function rZ(n){return{field:"total",type:"quantitative",title:"Count of Records",axis:{title:n,titlePadding:10,titleColor:"#212121",titleFontSize:12,titleFontWeight:"bold",labelFontSize:10,domainColor:"#757575",gridColor:"#e0e0e0",tickColor:"#757575"}}}function sZ(n,t=[]){return{$schema:"https://vega.github.io/schema/vega-lite/v5.json",width:"container",height:350,autosize:{resize:!0},view:{strokeOpacity:0},data:{name:"distribution",values:t},transform:[{aggregate:[{op:"sum",field:"count",as:"count"}],groupby:["value"]},{joinaggregate:[{op:"sum",field:"count",as:"total"}]},{calculate:"datum.count / datum.total",as:"percentage"},{calculate:'isDate(datum.value) ? timeFormat(datum.value, "%Y") : toString(datum.value)',as:"label"},{calculate:'"(" + datum.count + ")"',as:"countLabel"},{calculate:'format(datum.percentage, ",.2%")',as:"percentageLabel"}],encoding:{color:{field:"value",type:"nominal",scale:{scheme:"tableau20"},legend:{title:null,orient:"top-left",symbolType:"square",labelExpr:"datum.label",labelFontWeight:"bold"}},theta:{field:"count",type:"quantitative",stack:!0}},layer:[{mark:{type:"arc",radius:130,stroke:"white",strokeWidth:2}},{mark:{type:"text",radius:160,fill:"black",fontWeight:"bold"},encoding:{text:{field:"percentageLabel",type:"nominal"}}},{mark:{type:"text",radius:160,fill:"black",yOffset:15},encoding:{text:{field:"countLabel",type:"nominal"}}}]}}function hue(n=[]){return{$schema:"https://vega.github.io/schema/vega-lite/v5.json",width:"container",height:150,title:{text:"Select Date Range to Update Datasets",align:"left",anchor:"start"},view:{strokeOpacity:0},data:{name:"distribution",values:n},mark:"line",params:[{name:"period",select:{type:"interval",encodings:["x"],mark:{fill:"#6ea7ef",fillOpacity:.15}}}],encoding:{color:{value:"#6ea7ef"},x:{field:"period",type:"temporal",title:"Year",axis:{minExtent:0,titlePadding:10,titleFontSize:14,tickColor:"#757575",domainColor:"#757575",labelExpr:'[month(datum.value) === 0 ? timeFormat(datum.value, "%Y") : ""]',labelFlush:!1,gridDash:{condition:{test:{field:"value",timeUnit:"month",equal:7},value:[2,2]},value:[]},gridColor:{condition:{test:{field:"value",timeUnit:"month",equal:1},value:"#bdbdbd"},value:"#e0e0e0"}}},y:{aggregate:"sum",field:"count",type:"quantitative",title:"# Deaths",axis:{titlePadding:10,titleFontSize:14,domainColor:"#757575",labelFontSize:{condition:{test:{field:"index",equal:1},value:0},value:10},gridColor:"#e0e0e0",gridOpacity:{condition:{test:{field:"index",equal:1},value:0},value:1},tickColor:"#757575",tickOpacity:{condition:{test:{field:"index",equal:1},value:0},value:1}}}}}}let aW=(()=>{class n{constructor(){this.createBarChart=nZ,this.createPieChart=sZ,this.createTimeSlider=hue}createChart(e){const{type:r,distribution:{type:a,summary:{distinct:u}}}=e;if(Object.values(C0).includes(a)&&a!==C0.summary){if(u<=oW[Z_.pie].maxDistinctValues)return sZ();switch(a){case C0.pie:case C0.histogram:case C0.verticalBar:if(u<=oW[Z_.verticalBar].maxDistinctValues)return this.createBarChart(e,[],{xLabel:e.name,yLabel:"Count of Records"});case C0.horizontalBar:if(u<=oW[Z_.horizontalBar].maxDistinctValues||"DATE"===r)return this.createBarChart(e,[],{flipAxes:!0,xLabel:"# Total Deaths",yLabel:e.name});default:return}}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=ot({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var pue=pe(593);function oZ(n){const t=new Date(n);return Number.isNaN(+t)?void 0:t}let lW=(()=>{class n{constructor(e){this.http=e}load(e){const{distribution:{url:r}}=e,a=this.getTransformHandlers(e),u={header:!0,delimiter:",",skipEmptyLines:!0,dynamicTyping:this.getDynamicTypingConfig(e),transform:(p,_)=>{const D=a[_];return D?D(p):p}};return this.http.get(r,{responseType:"text"}).pipe(Pe(p=>(0,pue.parse)(p,u)),Pe(p=>this.aggregateResult(e,p.data)))}getDynamicTypingConfig(e){return{value:void 0===this.getValueTransform(e)}}getTransformHandlers(e){return{period:oZ,value:this.getValueTransform(e),count:Number}}aggregateResult(e,r){switch(e.type){case"DATE":return this.aggregateByYear(r);default:return r}}getValueTransform(e){switch(e.type){case"BOOLEAN":return r=>"0"===r?"False":"True";case"DATE":return oZ;default:return}}aggregateByYear(e){const r=e.reduce((p,{value:_,count:D})=>{var M,I;const V=null===(M=null==_?void 0:_.getFullYear)||void 0===M?void 0:M.call(_),j=(null!==(I=p.get(V))&&void 0!==I?I:0)+D;return p.set(V,j)},new Map);return Array.from(r.keys()).sort((p,_)=>void 0===p?1:void 0===_?-1:p-_).map(p=>{const _=void 0!==p?new Date(p,0):void 0;return{period:_,value:null!=_?_:"<date unavailable>",count:r.get(p)}})}}return n.\u0275fac=function(e){return new(e||n)(se(Zm))},n.\u0275prov=ot({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),gue=(()=>{class n{constructor(e,r,a){this.chartFactory=e,this.dataLoader=r,this.variableStore=a,this.visualizations=[],this.filterSources$=new _h(1),this.filterSources$.next(_n(void 0))}setVariables(e){this.visualizations=e.map(r=>{const a=this.variableStore.selectId(r),u=this.variableStore.getMetadata(a),p=this.chartFactory.createChart(r);return{variable:r,metadata:u,spec:p,data:p&&this.createDataSource(r)}})}setFilterSource(e){this.filterSources$.next(e)}createDataSource(e){const r=this.filterSources$.pipe(BP(),qo(void 0));return J([this.dataLoader.load(e),r]).pipe(tZ(100)).pipe(Pe(([p,_])=>this.filterData(p,_)))}filterData(e,r){if(void 0===r)return e;const[a,u]=r;return e.filter(({period:_})=>void 0===_||a<=+_&&+_<=u)}}return n.\u0275fac=function(e){return new(e||n)(se(aW),se(lW),se(Ik))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();function mue(n,t){if(1&n&&(we(0,"mat-option",6),jt(1),Ee()),2&n){const e=t.$implicit;yt("value",e),mt(1),Ur(e)}}function yue(n,t){if(1&n){const e=eo();we(0,"div",11),Cn("click",function(){const u=Zr(e).$implicit;return dn(2).changeSelection(u)}),jt(1),Ee()}if(2&n){const e=t.$implicit;Qn("selected",e===dn(2).selection),mt(1),Ur(e)}}function _ue(n,t){if(1&n){const e=eo();we(0,"div",18),Cn("click",function(){const u=Zr(e).$implicit;return dn(3).subOptionFilter=u}),jt(1),Ee()}if(2&n){const e=t.$implicit,r=dn(3);Qn("selected",r.subOptionFilter===e)("disabled",!r.validSubOption(e)),mt(1),Ur(e)}}function vue(n,t){if(1&n){const e=eo();we(0,"div",11),Cn("click",function(){const u=Zr(e).$implicit;return dn(3).changeSelection(u)}),jt(1),Ee()}if(2&n){const e=t.$implicit;Qn("selected",e===dn(3).selection),mt(1),Ur(e)}}function bue(n,t){1&n&&(we(0,"div",19),jt(1,"No options match the selected filter."),Ee())}function Cue(n,t){if(1&n&&(we(0,"div",12),we(1,"div",13),we(2,"div",14),jt(3),Ee(),we(4,"div",15),cn(5,_ue,2,5,"div",16),Ee(),Ee(),we(6,"div",8),cn(7,vue,2,3,"div",9),cn(8,bue,2,0,"div",17),Ee(),Ee()),2&n){const e=dn(2);mt(3),Lr("",e.subLabel,":"),mt(2),yt("ngForOf",e.LETTERS),mt(2),yt("ngForOf",e.getFilteredSubOptions()),mt(1),yt("ngIf",e.getFilteredSubOptions().length<1)}}function wue(n,t){if(1&n&&(we(0,"div",7),we(1,"div",8),cn(2,yue,2,3,"div",9),Ee(),cn(3,Cue,9,4,"div",10),Ee()),2&n){const e=dn();mt(2),yt("ngForOf",e.options),mt(1),yt("ngIf",e.subOptions.length>0)}}let Eue=(()=>{class n{constructor(){this.clsName="agc-sub-selector",this.label="",this.selection="",this.options=[],this.subLabel="",this.subOptions=[],this.selectionChange=new Vn,this.showMenu=!1,this.subOptionFilter="A",this.LETTERS=[...Array(26)].map((e,r)=>String.fromCharCode(r+65))}ngOnInit(){this.subOptions.length>0&&(this.subOptionFilter=this.subOptions[0].charAt(0))}ngOnChanges(e){"selection"in e&&(this.showMenu=!1)}get allOptions(){return this.subOptions.length<1?this.options:this.options.concat(this.subOptions)}get enabled(){return this.options.length>0}toggleMenu(){this.showMenu=!(!this.options||this.options.length<=0||this.showMenu)}changeSelection(e){this.selection=e===this.selection?"":e,this.showMenu=!1,this.selectionChange.emit(this.selection)}getFilteredSubOptions(){return""===this.subOptionFilter?this.subOptions:this.subOptions.filter(e=>e.charAt(0).toLowerCase()===this.subOptionFilter.toLowerCase())}validSubOption(e){return!(!this.subOptions||this.subOptions.map(a=>a.charAt(0).toLowerCase()).indexOf(e.toLowerCase())<0)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Sn({type:n,selectors:[["agc-sub-selector"]],hostVars:2,hostBindings:function(e,r){2&e&&is(r.clsName)},inputs:{label:"label",selection:"selection",options:"options",subLabel:"subLabel",subOptions:"subOptions"},outputs:{selectionChange:"selectionChange"},features:[or],decls:8,vars:4,consts:[[1,"select-container"],["id","selection"],["aria-label","selection",3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[1,"select-cover",3,"click"],["class","select-menu mat-elevation-z3",4,"ngIf"],[3,"value"],[1,"select-menu","mat-elevation-z3"],[1,"options"],["class","option",3,"selected","click",4,"ngFor","ngForOf"],["class","sub-options-container",4,"ngIf"],[1,"option",3,"click"],[1,"sub-options-container"],[1,"sub-options-header"],[1,"option"],[1,"sub-options-filters"],["class","letter-filter",3,"selected","disabled","click",4,"ngFor","ngForOf"],["class","empty-message",4,"ngIf"],[1,"letter-filter",3,"click"],[1,"empty-message"]],template:function(e,r){1&e&&(we(0,"div",0),we(1,"mat-form-field"),we(2,"mat-label",1),jt(3),Ee(),we(4,"mat-select",2),Cn("valueChange",function(u){return r.selection=u}),cn(5,mue,2,2,"mat-option",3),Ee(),Ee(),we(6,"div",4),Cn("click",function(){return r.toggleMenu()}),Ee(),cn(7,wue,4,2,"div",5),Ee()),2&e&&(mt(3),Ur(r.label),mt(1),yt("value",r.selection),mt(1),yt("ngForOf",r.allOptions),mt(2),yt("ngIf",r.showMenu))},directives:[zQ,y$,qJ,S_,ou,lP],styles:["[_nghost-%COMP%]   .select-container[_ngcontent-%COMP%]{position:relative;width:-moz-fit-content;width:fit-content;height:-moz-fit-content;height:fit-content}[_nghost-%COMP%]   .select-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{z-index:1}[_nghost-%COMP%]   .select-container[_ngcontent-%COMP%]   .select-cover[_ngcontent-%COMP%]{width:100%;height:100%;z-index:2;position:absolute;left:0;top:0;cursor:pointer}[_nghost-%COMP%]   .select-container[_ngcontent-%COMP%]   .select-cover.inactive[_ngcontent-%COMP%]{cursor:disabled!important}[_nghost-%COMP%]   .select-container[_ngcontent-%COMP%]   .select-menu[_ngcontent-%COMP%]{width:45rem;min-height:5rem;max-height:45vh;overflow:auto;position:absolute;left:0;display:block;margin-top:-1rem;background-color:#fff;padding:.5rem;z-index:3}[_nghost-%COMP%]   .select-container[_ngcontent-%COMP%]   .select-menu.hidden[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .select-container[_ngcontent-%COMP%]   .select-menu[_ngcontent-%COMP%]   .sub-options-container[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .select-container[_ngcontent-%COMP%]   .select-menu[_ngcontent-%COMP%]   .sub-options-container[_ngcontent-%COMP%]   .sub-options-header[_ngcontent-%COMP%]{width:100%;display:flex;padding:.5rem}[_nghost-%COMP%]   .select-container[_ngcontent-%COMP%]   .select-menu[_ngcontent-%COMP%]   .sub-options-container[_ngcontent-%COMP%]   .sub-options-header[_ngcontent-%COMP%]   .sub-options-filters[_ngcontent-%COMP%]{width:100%;display:flex;padding:.75rem 0;cursor:pointer}[_nghost-%COMP%]   .select-container[_ngcontent-%COMP%]   .select-menu[_ngcontent-%COMP%]   .sub-options-container[_ngcontent-%COMP%]   .sub-options-header[_ngcontent-%COMP%]   .sub-options-filters[_ngcontent-%COMP%]   .letter-filter[_ngcontent-%COMP%]{padding:.25rem;color:#000;border-bottom:1px solid white}[_nghost-%COMP%]   .select-container[_ngcontent-%COMP%]   .select-menu[_ngcontent-%COMP%]   .sub-options-container[_ngcontent-%COMP%]   .sub-options-header[_ngcontent-%COMP%]   .sub-options-filters[_ngcontent-%COMP%]   .letter-filter.selected[_ngcontent-%COMP%]{background-color:#fafafa;font-weight:bold;color:#000;border-bottom:1px solid black}[_nghost-%COMP%]   .select-container[_ngcontent-%COMP%]   .select-menu[_ngcontent-%COMP%]   .sub-options-container[_ngcontent-%COMP%]   .sub-options-header[_ngcontent-%COMP%]   .sub-options-filters[_ngcontent-%COMP%]   .letter-filter.disabled[_ngcontent-%COMP%]{color:#d3d3d3;cursor:not-allowed}[_nghost-%COMP%]   .options[_ngcontent-%COMP%]{width:100%;height:-moz-fit-content;height:fit-content;display:flex;flex-wrap:wrap;flex-basis:24%}[_nghost-%COMP%]   .options[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]:hover{background-color:#fafafa;cursor:pointer}[_nghost-%COMP%]   .options[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]{width:100%;text-align:center;font-style:italic;padding-bottom:1rem}[_nghost-%COMP%]   .option[_ngcontent-%COMP%]{width:11rem;min-width:11rem;padding:1rem 0;text-align:center;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .option.selected[_ngcontent-%COMP%]{background-color:#fafafa}"],changeDetection:0}),n})();function Due(n,t){if(1&n&&(we(0,"mat-option",7),jt(1),Ee()),2&n){const e=t.$implicit;yt("value",t.index),mt(1),Ur(e.name)}}function xue(n,t){if(1&n&&(we(0,"div",8),jt(1),Ee()),2&n){const e=dn();mt(1),Ur(e.selectedDataset.description)}}let Sue=(()=>{class n{constructor(){this.clsName="agc-table-data-selector",this.datasets=[],this.variables=[],this.subLabel="",this.subVariables=[],this.datasetChange=new Vn,this.dataVariableChange=new Vn,this.selectAll=new Vn}get variableNames(){return this.variables.map(e=>e.name)}get subVariableNames(){return this.subVariables.map(e=>e.name)}setDataset(e){void 0!==e&&e!==this.selectedDataset&&(this.selectedDataset=e,this.selectedVariable=void 0,this.datasetChange.emit(e))}setVariableFromName(e){var r;if(void 0!==this.selectedDataset){const a=null!==(r=this.variables.find(u=>u.name===e))&&void 0!==r?r:this.subVariables.find(u=>u.name===e);(null==a?void 0:a.dataset)===this.selectedDataset.name&&(this.selectedVariable=a,this.dataVariableChange.emit(a))}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Sn({type:n,selectors:[["agc-table-data-selector"]],hostVars:2,hostBindings:function(e,r){2&e&&is(r.clsName)},inputs:{datasets:"datasets",variables:"variables",subLabel:"subLabel",subVariables:"subVariables"},outputs:{datasetChange:"datasetChange",dataVariableChange:"dataVariableChange",selectAll:"selectAll"},decls:10,vars:7,consts:[[1,"selections-container"],["id","datasetLabel"],["aria-label","datasetLabel",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["label","Data Variable",3,"options","subLabel","subOptions","selection","selectionChange"],["mat-raised-button","",1,"all",3,"disabled","click"],["class","description",4,"ngIf"],[3,"value"],[1,"description"]],template:function(e,r){if(1&e&&(we(0,"div",0),we(1,"mat-form-field"),we(2,"mat-label",1),jt(3,"Dataset"),Ee(),we(4,"mat-select",2),Cn("selectionChange",function(u){return r.setDataset(r.datasets[u.value])}),cn(5,Due,2,2,"mat-option",3),Ee(),Ee(),we(6,"agc-sub-selector",4),Cn("selectionChange",function(u){return r.setVariableFromName(u)}),Ee(),we(7,"button",5),Cn("click",function(){return r.selectAll.emit()}),jt(8," Select All Variables "),Ee(),Ee(),cn(9,xue,2,1,"div",6)),2&e){let a;mt(5),yt("ngForOf",r.datasets),mt(1),yt("options",r.variableNames)("subLabel",r.subLabel)("subOptions",r.subVariableNames)("selection",null!==(a=null==r.selectedVariable?null:r.selectedVariable.name)&&void 0!==a?a:""),mt(1),yt("disabled",void 0===r.selectedDataset),mt(2),yt("ngIf",null==r.selectedDataset?null:r.selectedDataset.description)}},directives:[zQ,y$,qJ,S_,Eue,ou,lP],styles:["[_nghost-%COMP%]   .selections-container[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .selections-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:first-of-type{margin-right:2rem}[_nghost-%COMP%]   .selections-container[_ngcontent-%COMP%]   .all[_ngcontent-%COMP%]{margin-left:2rem;margin-bottom:1.25em}[_nghost-%COMP%]   .description[_ngcontent-%COMP%]{margin-top:3rem}"],changeDetection:0}),n})(),aZ=(()=>{class n{constructor(e){this.loader=e,this.dataEmitter=new _h(1),this.data=[],this.data$=this.dataEmitter.asObservable()}get filteredData(){const e=this.createFilterPred();return e?this.data.filter(e):this.data}get hasDataPeriods(){return this.data.some(({period:e})=>!!e)}ngOnDestroy(){this.clearData(),this.clearFilter()}load(e){this.clearData(),this.clearFilter();const r=this.loader.load(e);this.dataSub=r.subscribe(this.setData.bind(this))}setData(e){e!==this.data&&(this.clearData(),this.data=e,this.updateFiltering())}setFilterSource(e){e!==this.filterSource&&(this.clearFilter(),this.filterSource=e,this.updateFiltering())}createFilterPred(){if(!this.filter)return;const[e,r]=this.filter;return({period:a})=>!a||e<=+a&&+a<=r}updateFiltering(){if(this.filterSource)if(this.hasDataPeriods){if(!this.filterSub){let e=!1;if(this.filterSub=this.filterSource.subscribe(r=>{e=!0,this.filter=r,this.emitData()}),e)return}}else this.clearFilter();this.emitData()}emitData(){this.dataEmitter.next(this.filteredData)}clearData(){var e,r;null===(r=null===(e=this.dataSub)||void 0===e?void 0:e.unsubscribe)||void 0===r||r.call(e),this.data=[]}clearFilter(){var e,r;null===(r=null===(e=this.filterSub)||void 0===e?void 0:e.unsubscribe)||void 0===r||r.call(e),this.filterSub=void 0,this.filter=void 0}}return n.\u0275fac=function(e){return new(e||n)(se(lW))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();function Aue(n,t){if(1&n&&(we(0,"div",3),we(1,"div",4),jt(2),Ee(),we(3,"div",5),jt(4),Ee(),Ee()),2&n){const e=t.$implicit;mt(2),Lr("",e.label,":"),mt(2),Ur(e.value)}}let Mue=(()=>{class n{constructor(){this.clsName="dataset-summary",this.summary=[],this.title=""}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Sn({type:n,selectors:[["agc-dataset-summary"]],hostVars:2,hostBindings:function(e,r){2&e&&is(r.clsName)},inputs:{summary:"summary",title:"title"},decls:4,vars:2,consts:[[1,"title"],[1,"summary"],["class","summary-item",4,"ngFor","ngForOf"],[1,"summary-item"],[1,"label"],[1,"value"]],template:function(e,r){1&e&&(we(0,"div",0),jt(1),Ee(),we(2,"div",1),cn(3,Aue,5,2,"div",2),Ee()),2&e&&(mt(1),Ur(r.title),mt(2),yt("ngForOf",r.summary))},directives:[S_],styles:["[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:bold;color:#000}[_nghost-%COMP%]   .summary[_ngcontent-%COMP%]{padding-top:.5em;padding-left:1rem}[_nghost-%COMP%]   .summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{display:flex;font-size:.8rem}[_nghost-%COMP%]   .summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:bold;color:#000;margin-right:.5rem}[_nghost-%COMP%]   .summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:lighter}"],changeDetection:0}),n})();function Oue(n,t){1&n&&(we(0,"div",6),jt(1," Loading visualization... "),Ee())}function Tue(n,t){1&n&&(we(0,"div",7),jt(1," No data available for the selected time period "),Ee())}function kue(n,t){if(1&n){const e=eo();we(0,"ngx-vega",8),Cn("viewChange",function(a){return Zr(e),dn(2).attachView(a)}),Ee()}if(2&n){const e=dn(2);Qn("no-data",0===e.data.length),yt("spec",e.spec)("autosize",e.autosize)("options",e.options)}}function Fue(n,t){if(1&n&&(we(0,"div",2),cn(1,Oue,2,0,"div",3),cn(2,Tue,2,0,"div",4),cn(3,kue,1,5,"ngx-vega",5),Ee()),2&n){const e=dn();mt(1),yt("ngIf",e.loading),mt(1),yt("ngIf",0===e.data.length&&!e.loading),mt(1),yt("ngIf",e.spec)}}const Iue=100;let Rue=(()=>{class n{constructor(e,r,a,u){this.cdr=e,this.chartFactory=r,this.dataManager=a,this.variableState=u,this.autosize=!1,this.loading=!0,this.data=[],this.subscriptions=new T;const p=a.data$.subscribe(_=>{this.data=_,this.scheduleViewDataUpdate()});this.subscriptions.add(p),this.subscriptions.add(()=>this.clearViewDataUpdate())}get isSummaryOnly(){return this.variable.distribution.type===C0.summary}ngOnChanges(e){"variable"in e&&this.onVariableChange(),("filterThrottle"in e||"filterSource"in e)&&this.onFilterChange()}ngOnDestroy(){this.subscriptions.unsubscribe()}attachView(e){this.view=e,this.scheduleViewDataUpdate()}resetView(){this.loading=!0,this.spec=void 0,this.metadata=void 0,this.data=[],this.view=void 0}onVariableChange(){this.resetView();const{variable:e,chartFactory:r,dataManager:a,variableState:u}=this,p=u.selectId(e),_=this.spec=r.createChart(e);this.metadata=u.getMetadata(p),_?a.load(e):a.setData([])}onFilterChange(){var e;const{filterSource:r,filterThrottle:a=Iue,dataManager:u}=this,p=null===(e=null==r?void 0:r.pipe)||void 0===e?void 0:e.call(r,tZ(a));u.setFilterSource(p)}scheduleViewDataUpdate(){if(void 0!==this.viewDataUpdateTaskId)return;const e=()=>r===this.viewDataUpdateTaskId,r=this.viewDataUpdateTaskId=setTimeout(()=>LV(this,void 0,void 0,function*(){if(!e()||!this.view)return;const a=this.getDataBindingName();void 0!==a?(this.view.data(a,this.data),yield this.view.runAsync(),e()&&(this.loading=!1,this.cdr.markForCheck(),this.clearViewDataUpdate())):this.clearViewDataUpdate()}))}clearViewDataUpdate(){const e=this.viewDataUpdateTaskId;void 0!==e&&(clearTimeout(e),this.viewDataUpdateTaskId=void 0)}getDataBindingName(){var e;if(void 0!==this.dataBindingName)return this.dataBindingName;let r;return null===(e=this.view)||void 0===e||e.getState({recurse:!1,signals:()=>!1,data:a=>(r=a,!1)}),r}}return n.\u0275fac=function(e){return new(e||n)(ue(F),ue(aW),ue(aZ),ue(Ik))},n.\u0275cmp=Sn({type:n,selectors:[["agc-variable-visualization"]],inputs:{variable:"variable",filterThrottle:"filterThrottle",filterSource:"filterSource",dataBindingName:"dataBindingName",autosize:"autosize",options:"options"},features:[Yn([aZ]),or],decls:3,vars:5,consts:[[1,"summary",3,"title","summary"],["class","visualization-area",4,"ngIf"],[1,"visualization-area"],["class","loading-message",4,"ngIf"],["class","no-data-message",4,"ngIf"],["class","visualization",3,"no-data","spec","autosize","options","viewChange",4,"ngIf"],[1,"loading-message"],[1,"no-data-message"],[1,"visualization",3,"spec","autosize","options","viewChange"]],template:function(e,r){1&e&&(on(0,"agc-dataset-summary",0),lh(1,"async"),cn(2,Fue,4,3,"div",1)),2&e&&(yt("title",r.variable.name)("summary",d_(1,3,r.metadata)),mt(2),yt("ngIf",!r.isSummaryOnly))},directives:[Mue,ou,PH],pipes:[mx],styles:["[_nghost-%COMP%]{display:flex;flex-direction:row;width:100%}[_nghost-%COMP%]   .summary[_ngcontent-%COMP%]{flex-grow:1;margin-right:1rem}[_nghost-%COMP%]   .visualization-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;flex-grow:3;flex-shrink:1}[_nghost-%COMP%]   .visualization-area[_ngcontent-%COMP%]   .visualization.no-data[_ngcontent-%COMP%]{display:none}"],changeDetection:0}),n})();function Nue(n,t){if(1&n&&on(0,"agc-variable-visualization",6),2&n){const e=t.$implicit,r=dn(2);yt("variable",e)("filterSource",r.filterSource$)("autosize",r.autosize)}}const Pue=function(){return{actions:!1}};function Lue(n,t){if(1&n){const e=eo();we(0,"ngx-vega",7),Cn("viewChange",function(a){return Zr(e),dn(2).attachFilterView(a)}),Ee()}if(2&n){const e=dn(2);Qn("active",e.filterActive)("sticky",e.selectedVariables.length>1),yt("spec",e.filterSpec)("autosize",e.autosize)("options",c_(7,Pue))}}function Bue(n,t){if(1&n&&(we(0,"div",3),cn(1,Nue,1,3,"agc-variable-visualization",4),cn(2,Lue,1,8,"ngx-vega",5),Ee()),2&n){const e=dn();mt(1),yt("ngForOf",e.selectedVariables),mt(1),yt("ngIf",e.filterSpec)}}const uW=function(){return[]},Vue=[{path:"",component:(()=>{class n{constructor(e,r,a,u,p){this.variablesState=r,this.loader=a,this.chartFactory=u,this.cdr=p,this.clsName="agc-data-distributions",this.autosize={width:!0,height:!1},this.selectedVariables=[],this.filterActive=!1,this.filterSourceObservables$=new _h(1),this.variableObservables$=new _h(1),this.subVariableObservables$=new _h(1),this.datasets$=e.entitiesArray$,this.subLabel$=r.subLabel$,this.variables$=this.variableObservables$.pipe(BP()),this.subVariables$=this.subVariableObservables$.pipe(BP()),this.loadFilterSpec(),this.filterSource$=this.createFilterSource()}hasSpec(e){return"spec"in e&&void 0!==e.spec}setSelectedDataset(e){if(e!==this.selectedDataset){this.selectedDataset=e,this.selectedVariables=[],this.filterActive=!1;const{variablesState:r,variableObservables$:a,subVariableObservables$:u}=this,p=r.getVariables(e,PC.nonSub),_=r.getVariables(e,PC.sub);a.next(p),u.next(_)}}setSelectedVariable(e){const{selectedDataset:r,selectedVariables:a}=this;r&&(1!==a.length||a[0]!==e)&&(this.selectedVariables=[e],this.filterActive=!1)}setSelectAllVariables(){const{selectedDataset:e}=this;if(e){const r=this.variablesState.entitiesArray.filter(a=>a.dataset===e.name);this.selectedVariables=r,this.filterActive=!0}}attachFilterView(e){const a=JJ(u=>e.addSignalListener("period",u),u=>e.removeSignalListener("period",u)).pipe(Pe(([u,{period:p}])=>p));this.filterSourceObservables$.next(a)}loadFilterSpec(){const{variablesState:e,loader:r,chartFactory:a,cdr:u}=this,p=e.selectId(...k$.timeSliderSource);e.getVariable(p).pipe(Wi(M=>!!M),Ga(M=>r.load(M)),so(1)).subscribe(M=>{this.filterSpec=a.createTimeSlider(M),u.markForCheck()})}createFilterSource(){const{filterSourceObservables$:e,cdr:r}=this;return function(n,t){return new ae(e=>{let r,a;try{r=n()}catch(_){return void e.error(_)}try{a=t()}catch(_){return void e.error(_)}const p=(a?rn(a):rf).subscribe(e);return()=>{p.unsubscribe(),r&&r.unsubscribe()}})}(()=>(this.filterActive=!0,r.markForCheck(),new T(()=>{this.filterActive=!1,r.markForCheck()})),()=>e).pipe(r0(1),BP())}}return n.\u0275fac=function(e){return new(e||n)(ue(KP),ue(Ik),ue(lW),ue(aW),ue(F))},n.\u0275cmp=Sn({type:n,selectors:[["agc-data-distributions"]],hostVars:2,hostBindings:function(e,r){2&e&&is(r.clsName)},features:[Yn([gue])],decls:8,vars:16,consts:[[1,"header"],[3,"subLabel","datasets","variables","subVariables","datasetChange","dataVariableChange","selectAll"],["class","data-block",4,"ngIf"],[1,"data-block"],["class","visualization","dataBindingName","distribution",3,"variable","filterSource","autosize",4,"ngFor","ngForOf"],["class","time-slider",3,"active","sticky","spec","autosize","options","viewChange",4,"ngIf"],["dataBindingName","distribution",1,"visualization",3,"variable","filterSource","autosize"],[1,"time-slider",3,"spec","autosize","options","viewChange"]],template:function(e,r){if(1&e&&(we(0,"div",0),jt(1,"Data Distributions"),Ee(),we(2,"agc-table-data-selector",1),Cn("datasetChange",function(u){return r.setSelectedDataset(u)})("dataVariableChange",function(u){return r.setSelectedVariable(u)})("selectAll",function(){return r.setSelectAllVariables()}),lh(3,"async"),lh(4,"async"),lh(5,"async"),lh(6,"async"),Ee(),cn(7,Bue,3,2,"div",2)),2&e){let a,u,p,_;mt(2),yt("subLabel",null!==(a=d_(3,5,r.subLabel$))&&void 0!==a?a:"")("datasets",null!==(u=d_(4,7,r.datasets$))&&void 0!==u?u:c_(13,uW))("variables",null!==(p=d_(5,9,r.variables$))&&void 0!==p?p:c_(14,uW))("subVariables",null!==(_=d_(6,11,r.subVariables$))&&void 0!==_?_:c_(15,uW)),mt(5),yt("ngIf",r.selectedVariables.length>0)}},directives:[Sue,ou,S_,Rue,PH],pipes:[mx],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;height:4rem;margin-bottom:4.5rem;padding:0 1rem;align-items:center}[_nghost-%COMP%]   .data-block[_ngcontent-%COMP%]{width:100%;height:100%;margin-top:2rem}[_nghost-%COMP%]   .data-block[_ngcontent-%COMP%]   .visualization[_ngcontent-%COMP%]{padding-top:2rem;padding-bottom:2rem}[_nghost-%COMP%]   .data-block[_ngcontent-%COMP%]   .time-slider[_ngcontent-%COMP%]{margin-top:2rem;width:100%}[_nghost-%COMP%]   .data-block[_ngcontent-%COMP%]   .time-slider[_ngcontent-%COMP%]:not(.active){display:none}[_nghost-%COMP%]   .data-block[_ngcontent-%COMP%]   .time-slider.sticky[_ngcontent-%COMP%]{position:sticky;bottom:0;z-index:2001}"],changeDetection:0}),n})()}];let $ue=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[ic.forChild(Vue)],ic]}),n})(),jue=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[Er,LP,LH,T$,RQ,oue,$ue]]}),n})();const zue=[{path:"",pathMatch:"full",redirectTo:"about"},{path:"about",loadChildren:()=>tne},{path:"change-log",loadChildren:()=>rne},{path:"data-er-diagram",loadChildren:()=>ane},{path:"data-schema-browser",loadChildren:()=>cne},{path:"visualization/:id",loadChildren:()=>Eae},{path:"data-distributions",loadChildren:()=>jue}];let Uue=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[ic.forRoot(zue)],ic]}),n})();const Hue={version:"1.0.0",lastCommitDate:new Date(1603996553e3),buildDate:new Date(1603996944707)};let lZ=(()=>{class n{constructor(e){this.data=e}}return n.\u0275fac=function(e){return new(e||n)(ue(BK))},n.\u0275cmp=Sn({type:n,selectors:[["agc-markdown-modal"]],decls:10,vars:4,consts:[["mat-dialog-title","",1,"header"],[1,"title"],[1,"filler"],["mat-icon-button","","mat-dialog-close","","tabindex","-1",1,"close"],[3,"src"]],template:function(e,r){1&e&&(we(0,"h2",0),we(1,"div",1),jt(2),lh(3,"uppercase"),Ee(),on(4,"div",2),we(5,"button",3),we(6,"mat-icon"),jt(7,"close"),Ee(),Ee(),Ee(),we(8,"mat-dialog-content"),on(9,"markdown",4),Ee()),2&e&&(mt(2),Ur(d_(3,2,r.data.title)),mt(7),yt("src",r.data.src))},directives:[cH,PP,xre,NP,dH,S],pipes:[RB],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .filler[_ngcontent-%COMP%]{flex-grow:1}"],changeDetection:0}),n})();var I$;function QP(n,t,e,r){var p,a=arguments.length,u=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,e):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,e,r);else for(var _=n.length-1;_>=0;_--)(p=n[_])&&(u=(a<3?p(u):a>3?p(t,e,u):p(t,e))||u);return a>3&&u&&Object.defineProperty(t,e,u),u}function yf(n,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(n,t)}class dZ{constructor(t,e,r){this.path=t,this.queryParams=e,this.extras=r}static get type(){return"[Router] Navigate"}}class dW{constructor(t,e,r="none"){this.routerState=t,this.event=e,this.trigger=r}static get type(){return"[Router] RouterNavigation"}}class fZ{constructor(t,e,r,a="none"){this.routerState=t,this.storeState=e,this.event=r,this.trigger=a}static get type(){return"[Router] RouterCancel"}}class hZ{constructor(t,e,r,a="none"){this.routerState=t,this.storeState=e,this.event=r,this.trigger=a}static get type(){return"[Router] RouterError"}}class pZ{constructor(t,e,r="none"){this.routerState=t,this.event=e,this.trigger=r}static get type(){return"[Router] RouterDataResolved"}}class JP{}class Gue{serialize(t){return{root:this.serializeRoute(t.root),url:t.url}}serializeRoute(t){const e=t.children.map(r=>this.serializeRoute(r));return{url:t.url,params:t.params,queryParams:t.queryParams,fragment:t.fragment,data:t.data,outlet:t.outlet,component:null,routeConfig:null,root:null,parent:null,firstChild:e[0],children:e,pathFromRoot:null,paramMap:t.paramMap,queryParamMap:t.queryParamMap,toString:t.toString}}}let ed=I$=class{constructor(t,e,r,a,u,p,_){this._store=t,this._router=e,this._serializer=r,this._ngZone=a,this._urlSerializer=u,this._locationStrategy=p,this._location=_,this._trigger="none",this._routerState=null,this._storeState=null,this._lastRoutesRecognized=null,this.setUpStoreListener(),this.setUpRouterEventsListener(),this.checkInitialNavigationOnce()}static state(t){return t&&t.state}static url(t){return t&&t.state&&t.state.url}navigate(t,e){return this._ngZone.run(()=>this._router.navigate(e.path,Object.assign({queryParams:e.queryParams},e.extras)))}angularRouterAction(t,e){t.setState(Object.assign({},t.getState(),{trigger:e.trigger,state:e.routerState,navigationId:e.event.id}))}setUpStoreListener(){this._store.select(I$).subscribe(t=>{this.navigateIfNeeded(t)})}setUpRouterEventsListener(){this._router.events.subscribe(t=>{t instanceof Sr?this.navigationStart():t instanceof g0?this._lastRoutesRecognized=t:t instanceof _i?this.dispatchRouterDataResolved(t):t instanceof Qo?(this.dispatchRouterCancel(t),this.reset()):t instanceof cu?(this.dispatchRouterError(t),this.reset()):t instanceof ao&&(this.navigationEnd(),this.reset())})}navigationStart(){this._routerState=this._serializer.serialize(this._router.routerState.snapshot),"none"!==this._trigger&&(this._storeState=this._store.selectSnapshot(I$))}navigationEnd(){this.shouldDispatchRouterNavigation()&&this.dispatchRouterNavigation()}shouldDispatchRouterNavigation(){return!this._storeState||"store"!==this._trigger}navigateIfNeeded(t){!this._storeState||!this._storeState.state||!t||"router"===t.trigger||this._router.url===this._storeState.state.url||(this._trigger="store",this._ngZone.run(()=>{this._router.navigateByUrl(this._storeState.state.url)}))}dispatchRouterNavigation(){const t=this._serializer.serialize(this._lastRoutesRecognized.state);this.dispatchRouterAction(new dW(t,new g0(this._lastRoutesRecognized.id,this._lastRoutesRecognized.url,this._lastRoutesRecognized.urlAfterRedirects,t),this._trigger))}dispatchRouterCancel(t){this.dispatchRouterAction(new fZ(this._routerState,this._storeState,t,this._trigger))}dispatchRouterError(t){this.dispatchRouterAction(new hZ(this._routerState,this._storeState,new cu(t.id,t.url,`${t}`),this._trigger))}dispatchRouterAction(t){this._trigger="router";try{this._store.dispatch(t)}finally{this._trigger="none"}}dispatchRouterDataResolved(t){const e=this._serializer.serialize(t.state);this.dispatchRouterAction(new pZ(e,t,this._trigger))}reset(){this._trigger="none",this._storeState=null,this._routerState=null}checkInitialNavigationOnce(){zX()||this._router.events.pipe(s(t=>t instanceof g0)).subscribe(({url:t})=>{const e=this._location.normalize(this._locationStrategy.path(!0)),r=this._urlSerializer.parse(e);this._urlSerializer.serialize(r)!==t&&this._router.navigateByUrl(e)})}};ed.\u0275fac=function(t){return new(t||ed)(se(sg),se(ma),se(JP),se(On),se(sS),se(gh),se(Jd))},ed.\u0275prov=ot({token:ed,factory:function(n){return ed.\u0275fac(n)}}),ed.ctorParameters=()=>[{type:sg},{type:ma},{type:JP},{type:On},{type:sS},{type:gh},{type:Jd}],ed.ctorParameters=()=>[{type:sg},{type:ma},{type:JP},{type:On},{type:sS},{type:gh},{type:Jd}],QP([dK(dZ),yf("design:type",Function),yf("design:paramtypes",[Object,dZ]),yf("design:returntype",void 0)],ed.prototype,"navigate",null),QP([dK([dW,hZ,fZ,pZ]),yf("design:type",Function),yf("design:paramtypes",[Object,Object]),yf("design:returntype",void 0)],ed.prototype,"angularRouterAction",null),QP([fK(),yf("design:type",Function),yf("design:paramtypes",[Object]),yf("design:returntype",void 0)],ed,"state",null),QP([fK(),yf("design:type",Function),yf("design:paramtypes",[Object]),yf("design:returntype",Object)],ed,"url",null),ed=I$=QP([fS({name:"router",defaults:{state:void 0,navigationId:void 0,trigger:"none"}}),yf("design:paramtypes",[sg,ma,JP,On,sS,gh,Jd])],ed);let que=(()=>{class n{static forRoot(){return{ngModule:n,providers:[{provide:JP,useClass:Gue}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[rc.forFeature([ed])]]}),n})(),gZ=(()=>{let n=class extends nH{constructor(e,r){super(),this.actions$=e,this.router=r,this.destroy$=new We,this.navigationStart$=this.router.events.pipe(Wi(a=>a instanceof Sr),Pe(a=>a.url),yi(this.destroy$)),this.navigationEnd$=this.actions$.pipe(function(...n){return Ck(n,["SUCCESSFUL","CANCELED","ERRORED"],Xne)}(dW),Pe(a=>a.action.event.url),yi(this.destroy$))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};return n.\u0275fac=function(e){return new(e||n)(se(tK),se(ma))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n=Vi([Dk(),fS({name:"routerFacade"})],n),n})(),Yue=(()=>{class n{constructor(){this.clsName="agc-menu-icon",this.alternateIcon=!1}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Sn({type:n,selectors:[["agc-menu-icon"]],hostVars:2,hostBindings:function(e,r){2&e&&is(r.clsName)},inputs:{alternateIcon:"alternateIcon"},decls:6,vars:2,consts:[[1,"icon"],[1,"bar"],[1,"text"]],template:function(e,r){1&e&&(we(0,"div",0),on(1,"div",1),on(2,"div",1),on(3,"div",1),Ee(),we(4,"div",2),jt(5,"MENU"),Ee()),2&e&&Qn("alternate",r.alternateIcon)},styles:["[_nghost-%COMP%]{display:block;width:2.25rem;height:2.25rem;cursor:pointer}[_nghost-%COMP%]   .icon[_ngcontent-%COMP%]{margin-bottom:.25rem}[_nghost-%COMP%]   .icon[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{width:1.875rem;height:.25rem;border-radius:.625rem;transition:.4s}[_nghost-%COMP%]   .icon[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-of-type(2){width:2.25rem;margin:.25rem 0}[_nghost-%COMP%]   .icon.alternate[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-of-type(1){width:1.75rem;transform:translate(.375rem,.5rem) rotate(45deg)}[_nghost-%COMP%]   .icon.alternate[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-of-type(2){opacity:0}[_nghost-%COMP%]   .icon.alternate[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-of-type(3){width:1.75rem;transform:translate(.375rem,-.5rem) rotate(-45deg)}"],changeDetection:0}),n})(),Xue=(()=>{class n{constructor(){this.clsName="agc-page-header",this.elevation=!0,this.menuOpen=!1,this.menuOpenChange=new Vn}toggleMenuOpen(){this.menuOpen=!this.menuOpen,this.menuOpenChange.emit(this.menuOpen)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Sn({type:n,selectors:[["agc-page-header"]],hostVars:4,hostBindings:function(e,r){2&e&&(is(r.clsName),Qn("mat-elevation-z3",r.elevation))},inputs:{menuOpen:"menuOpen"},outputs:{menuOpenChange:"menuOpenChange"},decls:7,vars:1,consts:[["mat-flat-button","","color","primary",1,"menu",3,"click"],[3,"alternateIcon"],[1,"logos"],["href","https://cns.iu.edu","target","_blank","rel","noreferrer noopener"],["src","assets/images/iu-white.svg","alt","Indiana University logo"],["href","https://www.regenstrief.org","target","_blank","rel","noreferrer noopener"],["src","assets/images/regenstrief-white.svg","alt","Regenstrief Institute logo"]],template:function(e,r){1&e&&(we(0,"button",0),Cn("click",function(){return r.toggleMenuOpen()}),on(1,"agc-menu-icon",1),Ee(),we(2,"div",2),we(3,"a",3),on(4,"img",4),Ee(),we(5,"a",5),on(6,"img",6),Ee(),Ee()),2&e&&(mt(1),yt("alternateIcon",r.menuOpen))},directives:[PP,Yue],styles:["[_nghost-%COMP%]{display:flex;height:3.5rem;align-items:center}[_nghost-%COMP%]   .menu[_ngcontent-%COMP%]{display:flex;width:5rem;height:3.5rem;align-items:center;justify-content:center;border-radius:0;border-right-width:1px;border-right-style:solid}[_nghost-%COMP%]   .logos[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100%;justify-content:flex-start;align-items:center;border-radius:0;border-left-width:1px;border-left-style:solid}[_nghost-%COMP%]   .logos[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{height:2.25rem;margin-left:1rem}[_nghost-%COMP%]   .logos[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:2.25rem}"],changeDetection:0}),n})(),Kue=(()=>{class n{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(e){this._vertical=yr(e)}get inset(){return this._inset}set inset(e){this._inset=yr(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Sn({type:n,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(e,r){2&e&&(mi("aria-orientation",r.vertical?"vertical":"horizontal"),Qn("mat-divider-vertical",r.vertical)("mat-divider-horizontal",!r.vertical)("mat-divider-inset",r.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(e,r){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),n})(),Que=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[ps],ps]}),n})(),Jue=(()=>{class n{constructor(e){this.locale=e}transform(e,r,a,u){if(!e||0===e.length||void 0===r)return e;const p=new Intl.Collator(this.locale||void 0,{usage:"sort",numeric:!0,sensitivity:"nocase"===u?"accent":"variant"});return[...e].sort((D,M)=>{const I=D[r],V=M[r];return null==I?null==V?0:1:null==V?-1:"desc"===a?-p.compare(I,V):p.compare(I,V)})}}return n.\u0275fac=function(e){return new(e||n)(ue(Xd,24))},n.\u0275pipe=Ys({name:"orderBy",type:n,pure:!0}),n})();const Zue=function(n){return["/visualization",n]};function ece(n,t){if(1&n&&(we(0,"a",12),we(1,"div",6),jt(2),Ee(),we(3,"div",13),jt(4),Ee(),on(5,"mat-divider"),Ee()),2&n){const e=t.$implicit;yt("routerLink",function(n,t,e,r){return sO(Ct(),To(),n,t,e,r)}(3,Zue,e.path)),mt(2),Ur(e.title),mt(2),Ur(e.description)}}let tce=(()=>{class n{constructor(){this.clsName="agc-page-menu",this.header="",this.pages=[]}linkId(e,r){return r.path}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Sn({type:n,selectors:[["agc-page-menu"]],hostVars:2,hostBindings:function(e,r){2&e&&is(r.clsName)},inputs:{header:"header",pages:"pages"},decls:34,vars:6,consts:[[1,"header"],[1,"pages"],["class","link","routerLinkActive","active",3,"routerLink",4,"ngFor","ngForOf","ngForTrackBy"],[1,"info"],["routerLink","/data-distributions","routerLinkActive","active",1,"link","distributions"],["svgIcon","menu:data-distributions"],[1,"title"],["routerLink","/about","routerLinkActive","active",1,"link","about"],["routerLink","/data-schema-browser","routerLinkActive","active",1,"link","schema"],["svgIcon","menu:data-storage"],["routerLink","/data-er-diagram","routerLinkActive","active",1,"link","er-diagram"],["routerLink","/change-log","routerLinkActive","active",1,"link","changelog"],["routerLinkActive","active",1,"link",3,"routerLink"],[1,"description"]],template:function(e,r){1&e&&(we(0,"div",0),jt(1),Ee(),we(2,"nav",1),cn(3,ece,6,5,"a",2),lh(4,"orderBy"),Ee(),we(5,"div",3),we(6,"a",4),on(7,"mat-icon",5),we(8,"span",6),jt(9,"Data Distributions"),Ee(),Ee(),on(10,"mat-divider"),we(11,"a",7),we(12,"mat-icon"),jt(13,"info_outlined"),Ee(),we(14,"span",6),jt(15,"About"),Ee(),Ee(),on(16,"mat-divider"),we(17,"a",8),on(18,"mat-icon",9),we(19,"span",6),jt(20,"Data Schema Browser"),Ee(),Ee(),on(21,"mat-divider"),we(22,"a",10),we(23,"mat-icon"),jt(24,"bar_chart_outline"),Ee(),we(25,"span",6),jt(26,"Data ER Diagram"),Ee(),Ee(),on(27,"mat-divider"),we(28,"a",11),we(29,"mat-icon"),jt(30,"published_with_changes_outline"),Ee(),we(31,"span",6),jt(32,"Changelog"),Ee(),Ee(),on(33,"mat-divider"),Ee()),2&e&&(mt(1),Lr(" ",r.header,"\n"),mt(2),yt("ngForOf",X2(4,3,r.pages,"order"))("ngForTrackBy",r.linkId))},directives:[S_,RV,wX,NP,Kue],pipes:[Jue],styles:["[_nghost-%COMP%]{display:block;width:30rem;padding-bottom:2rem}[_nghost-%COMP%]   .header[_ngcontent-%COMP%], [_nghost-%COMP%]   .pages[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:not(mat-divider), [_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{padding-left:1.5rem;padding-right:1.5rem}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;height:4rem;align-items:center}[_nghost-%COMP%]   .pages[_ngcontent-%COMP%]{padding-top:2rem}[_nghost-%COMP%]   .pages[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{outline:none;text-decoration:none}[_nghost-%COMP%]   .pages[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-top:1rem}[_nghost-%COMP%]   .pages[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{padding-bottom:1rem}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{display:flex;height:2.25rem;align-items:center;cursor:pointer;outline:none;text-decoration:none;transition:color .3s ease-in-out}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.5rem}"],changeDetection:0}),n})(),nce=(()=>{class n{constructor(){this.clsName="agc-sub-bar",this.visible=!0}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Sn({type:n,selectors:[["agc-sub-bar"]],hostVars:4,hostBindings:function(e,r){2&e&&(is(r.clsName),Qn("visible",r.visible))},inputs:{visible:"visible"},decls:0,vars:0,template:function(e,r){},styles:["[_nghost-%COMP%]{display:block;height:2.625rem;transition:height .3s ease-in-out}[_nghost-%COMP%]:not(.visible){height:0}"],changeDetection:0}),n})(),ice=(()=>{class n{constructor(){this.clsName="agc-banner"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Sn({type:n,selectors:[["agc-banner"]],hostVars:2,hostBindings:function(e,r){2&e&&is(r.clsName)},decls:4,vars:0,consts:[[1,"info"],[1,"filler"],["src","assets/images/hero-banner.jpg","alt","Image of a pill bottle",1,"image"]],template:function(e,r){1&e&&(we(0,"div",0),jt(1," Indiana Opioid Dashboard\n"),Ee(),on(2,"div",1),on(3,"img",2))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:row;height:15rem;align-items:center}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;height:4rem;padding-left:2rem;padding-right:1rem;align-items:center}[_nghost-%COMP%]   .image[_ngcontent-%COMP%]{height:15rem}[_nghost-%COMP%]   .filler[_ngcontent-%COMP%]{flex-grow:1}"],changeDetection:0}),n})(),rce=(()=>{class n{constructor(){this.clsName="agc-page-footer",this.buildDate=new Date,this.contactClick=new Vn,this.privacyClick=new Vn}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=Sn({type:n,selectors:[["agc-page-footer"]],hostVars:2,hostBindings:function(e,r){2&e&&is(r.clsName)},inputs:{buildDate:"buildDate"},outputs:{contactClick:"contactClick",privacyClick:"privacyClick"},decls:12,vars:4,consts:[[1,"resources"],["mat-button","","disableRipple","",1,"contact",3,"click"],["mat-button","","disableRipple","",1,"privacy",3,"click"],[1,"filler"],[1,"build-date"],[1,"copyright"]],template:function(e,r){1&e&&(we(0,"div",0),we(1,"button",1),Cn("click",function(){return r.contactClick.emit()}),jt(2,"Contact Us"),Ee(),we(3,"button",2),Cn("click",function(){return r.privacyClick.emit()}),jt(4,"Privacy Policy"),Ee(),on(5,"div",3),we(6,"span",4),jt(7),lh(8,"date"),Ee(),Ee(),we(9,"div",5),we(10,"span"),jt(11,"Copyright \xa9 2020 Indiana University, Regenstrief Institute - All rights reserved."),Ee(),Ee()),2&e&&(mt(7),Lr(" This site was last updated on ",X2(8,1,r.buildDate,"MM/dd/yyyy, h:mm a")," "))},directives:[PP],pipes:[NB],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .resources[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;height:4.5rem;align-items:center;padding-left:1rem;padding-right:1rem}[_nghost-%COMP%]   .resources[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%], [_nghost-%COMP%]   .resources[_ngcontent-%COMP%]   .privacy[_ngcontent-%COMP%]{transition:color .3s}[_nghost-%COMP%]   .resources[_ngcontent-%COMP%]   .filler[_ngcontent-%COMP%]{flex-grow:1}[_nghost-%COMP%]   .copyright[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;height:3rem;justify-content:center;align-items:center}"],changeDetection:0}),n})(),sce=(()=>{class n{constructor(e,r,a){this.dialog=r,this.zone=a,this.clsName="agc-root",this.menuHeader="Marion County Opioid Addiction Report",this.pages=DK.map(u=>({path:u.id,title:u.title,description:u.description})),this.subBarVisible=!0,this.menuOpen=!1,this.buildDate=Hue.buildDate,e.navigationStart$.subscribe(()=>{this.menuOpen=!1})}ngAfterViewInit(){this.sidenavContainer.scrollable.elementScrolled().subscribe(()=>{const r=0===this.sidenavContainer.scrollable.measureScrollOffset("top");this.subBarVisible!==r&&this.zone.run(()=>{this.subBarVisible=r})})}openContactUs(){this.dialog.open(lZ,{width:"800px",height:"600px",data:{title:"Contact us",src:"assets/footer/contact-us.md"}})}openPrivacyPolicy(){this.dialog.open(lZ,{width:"800px",height:"600px",data:{title:"Privacy Policy",src:"assets/footer/privacy-policy.md"}})}}return n.\u0275fac=function(e){return new(e||n)(ue(gZ),ue(IP),ue(On))},n.\u0275cmp=Sn({type:n,selectors:[["agc-root"]],viewQuery:function(e,r){if(1&e&&Dl(hP,5),2&e){let a;Pi(a=Li())&&(r.sidenavContainer=a.first)}},hostVars:2,hostBindings:function(e,r){2&e&&is(r.clsName)},decls:12,vars:6,consts:[[3,"menuOpen","menuOpenChange"],["mode","over",3,"opened","openedChange","closedStart"],[3,"header","pages"],[3,"visible"],[1,"content"],[1,"outlet-wrapper"],[1,"space-filler"],[3,"buildDate","contactClick","privacyClick"]],template:function(e,r){1&e&&(we(0,"agc-page-header",0),Cn("menuOpenChange",function(u){return r.menuOpen=u}),Ee(),we(1,"mat-sidenav-container"),we(2,"mat-sidenav",1),Cn("openedChange",function(u){return r.menuOpen=u})("closedStart",function(){return r.menuOpen=!1}),on(3,"agc-page-menu",2),Ee(),we(4,"mat-sidenav-content"),on(5,"agc-sub-bar",3),on(6,"agc-banner"),we(7,"div",4),we(8,"div",5),on(9,"router-outlet"),Ee(),on(10,"div",6),Ee(),we(11,"agc-page-footer",7),Cn("contactClick",function(){return r.openContactUs()})("privacyClick",function(){return r.openPrivacyPolicy()}),Ee(),Ee(),Ee()),2&e&&(yt("menuOpen",r.menuOpen),mt(2),yt("opened",r.menuOpen),mt(1),yt("header",r.menuHeader)("pages",r.pages),mt(2),yt("visible",r.subBarVisible),mt(6),yt("buildDate",r.buildDate))},directives:[Xue,hP,gV,tce,fP,nce,ice,xU,rce],styles:["[_nghost-%COMP%]{display:block;height:100%;overflow-y:auto}[_nghost-%COMP%]   agc-page-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10}[_nghost-%COMP%]   mat-sidenav-container[_ngcontent-%COMP%]{height:calc(100% - 3.5rem)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-flow:column;max-width:1328px;min-height:calc(100% - 25.125rem);padding:4.5rem 4rem;align-items:center;margin:auto}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .outlet-wrapper[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .space-filler[_ngcontent-%COMP%]{flex-grow:1}"]}),n})(),mZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[Er]]}),n})(),yZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[Er,LP]]}),n})(),_Z=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[Er,LP,Sk,T$]]}),n})(),vZ=(()=>{class n{constructor(e,r){e.addSvgIconInNamespace("menu","data-storage",r.bypassSecurityTrustResourceUrl("assets/icons/data-storage.svg")),e.addSvgIconInNamespace("menu","data-distributions",r.bypassSecurityTrustResourceUrl("assets/icons/data-distributions.svg"))}}return n.\u0275fac=function(e){return new(e||n)(se(RP),se(Qm))},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[Er,ic,Que,Sk,T$]]}),n})(),bZ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[Er]]}),n})();const CZ=new Ft("Theme options");let oce=(()=>{class n{constructor(e,r){var a,u;this.elements=[],this.defaultTheme=null!==(a=e.default)&&void 0!==a?a:"",this.currentTheme=null!==(u=e.theme)&&void 0!==u?u:this.defaultTheme;const p=null==r?void 0:r.getContainerElement();p&&this.addElement(p)}get theme(){return this.currentTheme}set theme(e){const r=e||this.defaultTheme,a=this.currentTheme;this.currentTheme=r,this.switchTheme(this.elements,r,a)}ngOnDestroy(){const e=[...this.elements];for(const r of e)this.removeElement(r)}addBootstrapComponent(e){const r=e.location.nativeElement;r&&(this.addElement(r),e.onDestroy(()=>this.removeElement(r)))}addElement(e){this.switchTheme([e],this.currentTheme,""),this.elements.push(e)}removeElement(e){const r=this.elements.indexOf(e);r>=0&&(this.elements.splice(r,1),this.switchTheme([e],"",this.currentTheme))}switchTheme(e,r,a){this.addClass(e,"color-transitions-disabled"),this.removeClass(e,a),this.addClass(e,r),setTimeout(()=>this.removeClass(e,"color-transitions-disabled"))}addClass(e,r){if(r)for(const a of e)a.classList.add(r)}removeClass(e,r){if(r)for(const a of e)a.classList.remove(r)}}return n.\u0275fac=function(e){return new(e||n)(se(CZ),se(xk,8))},n.\u0275prov=ot({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ace=(()=>{class n{static forRoot(e={}){return{ngModule:n,providers:[{provide:KD,useFactory:r=>a=>r.addBootstrapComponent(a),deps:[oce],multi:!0},{provide:CZ,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({}),n})(),lce=(()=>{class n{constructor(e,r){this.accessor=e,this.injector=r}static forRoot(e=[]){return{ngModule:n,providers:[Ao,pf,gK,...e]}}}return n.\u0275fac=function(e){return new(e||n)(se(Ao,2),se(pf,2))},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({}),n})();const R$=(n,t)=>((n,t)=>new Array(t+1).join("0"))(0,t-n.toString().length)+n;class dce{constructor(t,e,r){this.action=t,this.store=e,this.logWriter=r}dispatched(t){const e=dS(this.action),r=function(n){return R$(n.getHours(),2)+":"+R$(n.getMinutes(),2)+":"+R$(n.getSeconds(),2)+"."+R$(n.getMilliseconds(),3)}(new Date);this.logWriter.startGroup(`action ${e} @ ${r}`),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",Object.assign({},this.action)),this.logWriter.logGrey("prev state",t)}completed(t){this.logWriter.logGreen("next state",t),this.logWriter.endGroup()}errored(t){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",t),this.logWriter.endGroup()}_hasPayload(t){return this._getNonEmptyProperties(t).length>0}_getNonEmptyProperties(t){return Object.keys(t).map(a=>t[a]).filter(a=>void 0!==a)}}class fce{constructor(t){this.options=t,this.options=this.options||{},this.logger=t.logger||console}startGroup(t){const e=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{e.call(this.logger,t)}catch(r){console.log(t)}}endGroup(){try{this.logger.groupEnd()}catch(t){this.logger.log("\u2014\u2014 log end \u2014\u2014")}}logGrey(t,e){this.log(t,"color: #9E9E9E; font-weight: bold",e)}logGreen(t,e){this.log(t,"color: #4CAF50; font-weight: bold",e)}logRedish(t,e){this.log(t,"color: #FD8182; font-weight: bold",e)}log(t,e,r){this.isIE()?this.logger.log(t,r):this.logger.log("%c "+t,e,r)}isIE(){const t="undefined"!=typeof window&&window.navigator.userAgent?window.navigator.userAgent:"";let e=!1;const r=t.indexOf("MSIE "),a=t.indexOf("Trident/");return(r>-1||a>-1)&&(e=!0),e}}const wZ=new Ft("NGXS_LOGGER_PLUGIN_OPTIONS");let hce=(()=>{class n{constructor(e,r){this._options=e,this._injector=r}handle(e,r,a){if(this._options.disabled||!this._options.filter(r,e))return a(e,r);this._logWriter=this._logWriter||new fce(this._options),this._store=this._store||this._injector.get(sg);const u=new dce(r,this._store,this._logWriter);return u.dispatched(e),a(e,r).pipe(Ss(p=>{u.completed(p)}),Oe(p=>{throw u.errored(p),p}))}}return n.\u0275fac=function(e){return new(e||n)(se(wZ),se(ai))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();const EZ=new Ft("LOGGER_USER_OPTIONS");function pce(n){return Object.assign({},{logger:console,collapsed:!1,disabled:!1,filter:()=>!0},n)}let gce=(()=>{class n{static forRoot(e){return{ngModule:n,providers:[{provide:zU,useClass:hce,multi:!0},{provide:EZ,useValue:e},{provide:wZ,useFactory:pce,deps:[EZ]}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({}),n})();const fW=new Ft("NGXS_STORAGE_PLUGIN_OPTION"),DZ=new Ft("STORAGE_ENGINE"),hW="@@STATE",xZ="NGXS_OPTIONS_META";function yce(n){return void 0!==n&&n.key&&(n.key=function(n){return Array.isArray(n)||(n=[n]),n.map(t=>(t.hasOwnProperty(xZ)&&(t=t[xZ].name),t instanceof class{constructor(t){this.name=t,YU(this).makeRootSelector=r=>r.getStateGetter(this.name)}getName(){return this.name}toString(){return`StateToken[${this.name}]`}}?t.getName():t))}(n.key)),Object.assign({key:[hW],storage:0,serialize:JSON.stringify,deserialize:JSON.parse,beforeSerialize:t=>t,afterDeserialize:t=>t},n)}function _ce(n,t){return MR(t)?null:0===n.storage?localStorage:1===n.storage?sessionStorage:null}let vce=(()=>{class n{constructor(e,r,a){this._options=e,this._engine=r,this._platformId=a}handle(e,r,a){if(MR(this._platformId)&&null===this._engine)return a(e,r);const u=this._options.key,p=function(n){const t=dS(n);return function(e){return t===dS(e)}}(r),_=p(uK)||p(cK);let D=!1;if(_)for(const M of u){const I=M===hW;let V=this._engine.getItem(M);if("undefined"!==V&&null!=V){try{const j=this._options.deserialize(V);V=this._options.afterDeserialize(j,M)}catch(j){console.error("Error ocurred while deserializing the store value, falling back to empty object."),V={}}this._options.migrations&&this._options.migrations.forEach(j=>{j.version===bk(V,j.versionKey||"version")&&(!j.key&&I||j.key===M)&&(V=j.migrate(V),D=!0)}),e=I?Object.assign({},e,V):HU(e,M,V)}}return a(e,r).pipe(Ss(M=>{if(!_||_&&D)for(const I of u){let V=M;I!==hW&&(V=bk(M,I));try{const j=this._options.beforeSerialize(V,I);this._engine.setItem(I,this._options.serialize(j))}catch(j){console.error("Error ocurred while serializing the store value, value not updated.")}}}))}}return n.\u0275fac=function(e){return new(e||n)(se(fW),se(DZ),se(Yd))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n})();const SZ=new Ft("USER_OPTIONS");let bce=(()=>{class n{static forRoot(e){return{ngModule:n,providers:[{provide:zU,useClass:vce,multi:!0},{provide:SZ,useValue:e},{provide:fW,useFactory:yce,deps:[SZ]},{provide:DZ,useFactory:_ce,deps:[fW,Yd]}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({}),n})();let Cce=(()=>{class n{constructor(e){this.http=e}load(e){return this.http.get(e,{responseType:"json"}).pipe(Pe(this.parseRawData.bind(this)))}parseRawData(e){const r=[],a=[];for(const u of Object.values(e))r.push(this.parseRawDataset(u)),a.push(...Object.values(u.columns).map(p=>this.parseRawDatasetVariable(u,p)));return{datasets:r,variables:a}}parseRawDataset(e){return{name:e.name,description:e.remarks,variables:Object.keys(e.columns)}}parseRawDatasetVariable(e,r){return{dataset:e.name,name:r.name,description:r.remarks,type:r.type,nonNullCount:r.n_non_null,percentMissing:r.pct_missing,distribution:{type:r.dist_type,url:r.dist_data.url,summary:{distinct:r.dist_data.distinct,min:r.dist_data.min,max:r.dist_data.max}}}}}return n.\u0275fac=function(e){return new(e||n)(se(Zm))},n.\u0275prov=ot({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wce=[gZ,qK,xK,(()=>{let n=class extends nH{constructor(e,r,a){super(),this.datasetLoader=e,this.datasetsState=r,this.variablesState=a}ngxsOnInit(){super.ngxsOnInit(),this.datasetLoader.load(k$.datasetsPath).subscribe(e=>{this.datasetsState.addMany(e.datasets),this.variablesState.addMany(e.variables)})}};return n.\u0275fac=function(e){return new(e||n)(se(Cce),se(KP),se(Ik))},n.\u0275prov=ot({token:n,factory:n.\u0275fac}),n=Vi([Dk(),fS({name:"data",children:[KP,Ik]})],n),n})(),KP,Ik];let Ece=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[lce.forRoot(),rc.forRoot(wce,{developmentMode:!1}),bce.forRoot({key:[]}),que.forRoot(),gce.forRoot({disabled:true})]]}),n})(),Dce=(()=>{class n{constructor(e){if(e)throw new Error("CoreModule should only be imported once in the AppModule!")}}return n.\u0275fac=function(e){return new(e||n)(se(n,12))},n.\u0275mod=Ht({type:n}),n.\u0275inj=zt({imports:[[ace.forRoot(),Ece,mZ,yZ,_Z,vZ,bZ],mZ,yZ,_Z,vZ,bZ]}),n})(),xce=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=Ht({type:n,bootstrap:[sce]}),n.\u0275inj=zt({providers:[],imports:[[qR,tP,gz,rU,N.forRoot({loader:Zm,markedOptions:{provide:g,useValue:{gfm:!0}}}),Uue,Dce,T$]]}),n})();(function(){if(ix)throw new Error("Cannot enable prod mode after platform setup.");_O=!1})(),Qj().bootstrapModule(xce).catch(n=>console.error(n))},5328:it=>{"use strict";var bt=/("(?:[^\\"]|\\.)*")|[:,]/g;it.exports=function(_e,K){var qe,Ce,xe;return K=K||{},qe=JSON.stringify([1],void 0,void 0===K.indent?2:K.indent).slice(2,-3),Ce=""===qe?1/0:void 0===K.maxLength?80:K.maxLength,xe=K.replacer,function ve(de,De,Ae){var Ie,ke,nt,T,Yt,Kt,Nt,Dt,ti,oi,Jt,Qe;if(de&&"function"==typeof de.toJSON&&(de=de.toJSON()),void 0===(Jt=JSON.stringify(de,xe)))return Jt;if(Jt.length<=(Nt=Ce-De.length-Ae)&&(ti=Jt.replace(bt,function(Lt,pt){return pt||Lt+" "})).length<=Nt)return ti;if(null!=xe&&(de=JSON.parse(Jt),xe=void 0),"object"==typeof de&&null!==de){if(Dt=De+qe,nt=[],ke=0,Array.isArray(de))for(oi="[",Ie="]",Nt=de.length;ke<Nt;ke++)nt.push(ve(de[ke],Dt,ke===Nt-1?0:1)||"null");else for(oi="{",Ie="}",Nt=(Kt=Object.keys(de)).length;ke<Nt;ke++)T=Kt[ke],Yt=JSON.stringify(T)+": ",void 0!==(Qe=ve(de[T],Dt,Yt.length+(ke===Nt-1?0:1)))&&nt.push(Yt+Qe);if(nt.length>0)return[oi,qe+nt.join(",\n"+Dt),Ie].join("\n"+De)}return Jt}(_e,"",0)}}},it=>{it(it.s=7853)}]);