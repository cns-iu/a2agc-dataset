(self.webpackChunka2agc=self.webpackChunka2agc||[]).push([[179],{8255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=8255,t.exports=e},7266:(t,e,n)=>{t.exports={ResizeSensor:n(9835),ElementQueries:n(4845)}},4845:function(t,e,n){"use strict";var i,r,s;"undefined"!=typeof window&&window,r=[n(9835)],void 0===(s="function"==typeof(i=function(t){var e=function(){var e,n={},i=[];function r(t){t||(t=document.documentElement);var e=window.getComputedStyle(t,null).fontSize;return parseFloat(e)||16}function s(t,e){var n=e.split(/\d/),i=n[n.length-1];switch(e=parseFloat(e),i){case"px":return e;case"em":return e*r(t);case"rem":return e*r();case"vw":return e*document.documentElement.clientWidth/100;case"vh":return e*document.documentElement.clientHeight/100;case"vmin":case"vmax":var s=document.documentElement.clientWidth/100,o=document.documentElement.clientHeight/100;return e*(0,Math["vmin"===i?"min":"max"])(s,o);default:return e}}function o(t,e){var i,r,o,a,l,u,c,h;this.element=t;var d=["min-width","min-height","max-width","max-height"];this.call=function(){for(i in o=function(t){if(!t.getBoundingClientRect)return{width:t.offsetWidth,height:t.offsetHeight};var e=t.getBoundingClientRect();return{width:Math.round(e.width),height:Math.round(e.height)}}(this.element),u={},n[e])n[e].hasOwnProperty(i)&&(a=s(this.element,(r=n[e][i]).value),l="width"===r.property?o.width:o.height,c="","min"===r.mode&&l>=a&&(c+=r.value),"max"===r.mode&&l<=a&&(c+=r.value),u[h=r.mode+"-"+r.property]||(u[h]=""),c&&-1===(" "+u[h]+" ").indexOf(" "+c+" ")&&(u[h]+=" "+c));for(var t in d)d.hasOwnProperty(t)&&(u[d[t]]?this.element.setAttribute(d[t],u[d[t]].substr(1)):this.element.removeAttribute(d[t]))}}function a(e,n){e.elementQueriesSetupInformation||(e.elementQueriesSetupInformation=new o(e,n)),e.elementQueriesSensor||(e.elementQueriesSensor=new t(e,function(){e.elementQueriesSetupInformation.call()}))}function l(t,r,s,o){if(void 0===n[t]){n[t]=[];var a=i.length;e.innerHTML+="\n"+t+" {animation: 0.1s element-queries;}",e.innerHTML+="\n"+t+" > .resize-sensor {min-width: "+a+"px;}",i.push(t)}n[t].push({mode:r,property:s,value:o})}function u(t){var e;if(document.querySelectorAll&&(e=t?t.querySelectorAll.bind(t):document.querySelectorAll.bind(document)),e||"undefined"==typeof $$||(e=$$),e||"undefined"==typeof jQuery||(e=jQuery),!e)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return e}function c(e){var n=[],i=[],r=[],s=0,o=-1,a=[];for(var l in e.children)if(e.children.hasOwnProperty(l)&&e.children[l].tagName&&"img"===e.children[l].tagName.toLowerCase()){n.push(e.children[l]);var u=e.children[l].getAttribute("min-width")||e.children[l].getAttribute("data-min-width"),c=e.children[l].getAttribute("data-src")||e.children[l].getAttribute("url");r.push(c),i.push({minWidth:u}),u?e.children[l].style.display="none":(s=n.length-1,e.children[l].style.display="block")}function h(){var t,l=!1;for(t in n)n.hasOwnProperty(t)&&i[t].minWidth&&e.offsetWidth>i[t].minWidth&&(l=t);if(l||(l=s),o!==l)if(a[l])n[o].style.display="none",n[l].style.display="block",o=l;else{var u=new Image;u.onload=function(){n[l].src=r[l],n[o].style.display="none",n[l].style.display="block",a[l]=!0,o=l},u.src=r[l]}else n[l].src=r[l]}o=s,e.resizeSensorInstance=new t(e,h),h()}var h=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,d=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function f(t){var e,n,i,r;for(t=t.replace(/'/g,'"');null!==(e=h.exec(t));)for(n=e[1]+e[3],i=e[2];null!==(r=d.exec(i));)l(n,r[1],r[2],r[3])}function p(t){var e="";if(t)if("string"==typeof t)-1===(t=t.toLowerCase()).indexOf("min-width")&&-1===t.indexOf("max-width")||f(t);else for(var n=0,i=t.length;n<i;n++)1===t[n].type?-1!==(e=t[n].selectorText||t[n].cssText).indexOf("min-height")||-1!==e.indexOf("max-height")?f(e):-1===e.indexOf("min-width")&&-1===e.indexOf("max-width")||f(e):4===t[n].type?p(t[n].cssRules||t[n].rules):3===t[n].type&&t[n].styleSheet.hasOwnProperty("cssRules")&&p(t[n].styleSheet.cssRules)}var m=!1;this.init=function(){var n="animationstart";void 0!==document.documentElement.style.webkitAnimationName?n="webkitAnimationStart":void 0!==document.documentElement.style.MozAnimationName?n="mozanimationstart":void 0!==document.documentElement.style.OAnimationName&&(n="oanimationstart"),document.body.addEventListener(n,function(e){var n=e.target,r=n&&window.getComputedStyle(n,null),s=r&&r.getPropertyValue("animation-name");if(s&&-1!==s.indexOf("element-queries")){n.elementQueriesSensor=new t(n,function(){n.elementQueriesSetupInformation&&n.elementQueriesSetupInformation.call()});var o=window.getComputedStyle(n.resizeSensor,null).getPropertyValue("min-width");o=parseInt(o.replace("px","")),a(e.target,i[o])}}),m||((e=document.createElement("style")).type="text/css",e.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",e.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(e),m=!0);for(var r=0,s=document.styleSheets.length;r<s;r++)try{document.styleSheets[r].href&&0===document.styleSheets[r].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[r].href),p(document.styleSheets[r].cssRules||document.styleSheets[r].rules||document.styleSheets[r].cssText)}catch(o){}!function(){for(var t=u()("[data-responsive-image],[responsive-image]"),e=0,n=t.length;e<n;e++)c(t[e])}()},this.findElementQueriesElements=function(t){!function(t){var e=u(t);for(var i in n)if(n.hasOwnProperty(i))for(var r=e(i,t),s=0,o=r.length;s<o;s++)a(r[s],i)}(t)},this.update=function(){this.init()}};return e.update=function(){e.instance.update()},e.detach=function(t){t.elementQueriesSetupInformation?(t.elementQueriesSensor.detach(),delete t.elementQueriesSetupInformation,delete t.elementQueriesSensor):t.resizeSensorInstance&&(t.resizeSensorInstance.detach(),delete t.resizeSensorInstance)},e.init=function(){e.instance||(e.instance=new e),e.instance.init()},e.findElementQueriesElements=function(t){e.instance.findElementQueriesElements(t)},e.listen=function(){!function(t){if(document.addEventListener)document.addEventListener("DOMContentLoaded",t,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var e=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(t(),clearInterval(e))},10);else window.onload=t}(e.init)},e})?i.apply(e,r):i)||(t.exports=s)},9835:function(t,e,n){"use strict";var i,r;"undefined"!=typeof window&&window,void 0===(r="function"==typeof(i=function(){if("undefined"==typeof window)return null;var t="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||function(e){return t.setTimeout(e,20)},n=t.cancelAnimationFrame||t.mozCancelAnimationFrame||t.webkitCancelAnimationFrame||function(e){t.clearTimeout(e)};function i(t,e){var n=Object.prototype.toString.call(t),i="[object Array]"===n||"[object NodeList]"===n||"[object HTMLCollection]"===n||"[object Object]"===n||"undefined"!=typeof jQuery&&t instanceof jQuery||"undefined"!=typeof Elements&&t instanceof Elements,r=0,s=t.length;if(i)for(;r<s;r++)e(t[r]);else e(t)}function r(t){if(!t.getBoundingClientRect)return{width:t.offsetWidth,height:t.offsetHeight};var e=t.getBoundingClientRect();return{width:Math.round(e.width),height:Math.round(e.height)}}function s(t,e){Object.keys(e).forEach(function(n){t.style[n]=e[n]})}var o=function(t,a){var l=0;function u(){var t,e,n=[];this.add=function(t){n.push(t)},this.call=function(i){for(t=0,e=n.length;t<e;t++)n[t].call(this,i)},this.remove=function(i){var r=[];for(t=0,e=n.length;t<e;t++)n[t]!==i&&r.push(n[t]);n=r},this.length=function(){return n.length}}i(t,function(t){!function(t,n){if(t)if(t.resizedAttached)t.resizedAttached.add(n);else{t.resizedAttached=new u,t.resizedAttached.add(n),t.resizeSensor=document.createElement("div"),t.resizeSensor.dir="ltr",t.resizeSensor.className="resize-sensor";var i={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},o={position:"absolute",left:"0px",top:"0px",transition:"0s"};s(t.resizeSensor,i);var a=document.createElement("div");a.className="resize-sensor-expand",s(a,i);var c=document.createElement("div");s(c,o),a.appendChild(c);var h=document.createElement("div");h.className="resize-sensor-shrink",s(h,i);var d=document.createElement("div");s(d,o),s(d,{width:"200%",height:"200%"}),h.appendChild(d),t.resizeSensor.appendChild(a),t.resizeSensor.appendChild(h),t.appendChild(t.resizeSensor);var f=window.getComputedStyle(t),p=f?f.getPropertyValue("position"):null;"absolute"!==p&&"relative"!==p&&"fixed"!==p&&"sticky"!==p&&(t.style.position="relative");var m=!1,g=0,y=r(t),v=0,_=0,b=!0;l=0;var x=function(){if(b){if(0===t.offsetWidth&&0===t.offsetHeight)return void(l||(l=e(function(){l=0,x()})));b=!1}var n,i;i=t.offsetHeight,c.style.width=(n=t.offsetWidth)+10+"px",c.style.height=i+10+"px",a.scrollLeft=n+10,a.scrollTop=i+10,h.scrollLeft=n+10,h.scrollTop=i+10};t.resizeSensor.resetSensor=x;var w=function(){g=0,m&&(v=y.width,_=y.height,t.resizedAttached&&t.resizedAttached.call(y))},C=function(){y=r(t),(m=y.width!==v||y.height!==_)&&!g&&(g=e(w)),x()},A=function(t,e,n){t.attachEvent?t.attachEvent("on"+e,n):t.addEventListener(e,n)};A(a,"scroll",C),A(h,"scroll",C),l=e(function(){l=0,x()})}}(t,a)}),this.detach=function(e){l||(n(l),l=0),o.detach(t,e)},this.reset=function(){t.resizeSensor.resetSensor()}};if(o.reset=function(t){i(t,function(t){t.resizeSensor.resetSensor()})},o.detach=function(t,e){i(t,function(t){t&&(t.resizedAttached&&"function"==typeof e&&(t.resizedAttached.remove(e),t.resizedAttached.length())||t.resizeSensor&&(t.contains(t.resizeSensor)&&t.removeChild(t.resizeSensor),delete t.resizeSensor,delete t.resizedAttached))})},"undefined"!=typeof MutationObserver){var a=new MutationObserver(function(t){for(var e in t)if(t.hasOwnProperty(e))for(var n=t[e].addedNodes,i=0;i<n.length;i++)n[i].resizeSensor&&o.reset(n[i])});document.addEventListener("DOMContentLoaded",function(t){a.observe(document.body,{childList:!0,subtree:!0})})}return o})?i.call(e,n,e,t):i)||(t.exports=r)},5270:(t,e,n)=>{"use strict";const i=n(9377),r=Symbol("max"),s=Symbol("length"),o=Symbol("lengthCalculator"),a=Symbol("allowStale"),l=Symbol("maxAge"),u=Symbol("dispose"),c=Symbol("noDisposeOnSet"),h=Symbol("lruList"),d=Symbol("cache"),f=Symbol("updateAgeOnGet"),p=()=>1,m=(t,e,n)=>{const i=t[d].get(e);if(i){const e=i.value;if(g(t,e)){if(v(t,i),!t[a])return}else n&&(t[f]&&(i.value.now=Date.now()),t[h].unshiftNode(i));return e.value}},g=(t,e)=>{if(!e||!e.maxAge&&!t[l])return!1;const n=Date.now()-e.now;return e.maxAge?n>e.maxAge:t[l]&&n>t[l]},y=t=>{if(t[s]>t[r])for(let e=t[h].tail;t[s]>t[r]&&null!==e;){const n=e.prev;v(t,e),e=n}},v=(t,e)=>{if(e){const n=e.value;t[u]&&t[u](n.key,n.value),t[s]-=n.length,t[d].delete(n.key),t[h].removeNode(e)}};class _{constructor(t,e,n,i,r){this.key=t,this.value=e,this.length=n,this.now=i,this.maxAge=r||0}}const b=(t,e,n,i)=>{let r=n.value;g(t,r)&&(v(t,n),t[a]||(r=void 0)),r&&e.call(i,r.value,r.key,t)};t.exports=class{constructor(t){if("number"==typeof t&&(t={max:t}),t||(t={}),t.max&&("number"!=typeof t.max||t.max<0))throw new TypeError("max must be a non-negative number");this[r]=t.max||1/0;const e=t.length||p;if(this[o]="function"!=typeof e?p:e,this[a]=t.stale||!1,t.maxAge&&"number"!=typeof t.maxAge)throw new TypeError("maxAge must be a number");this[l]=t.maxAge||0,this[u]=t.dispose,this[c]=t.noDisposeOnSet||!1,this[f]=t.updateAgeOnGet||!1,this.reset()}set max(t){if("number"!=typeof t||t<0)throw new TypeError("max must be a non-negative number");this[r]=t||1/0,y(this)}get max(){return this[r]}set allowStale(t){this[a]=!!t}get allowStale(){return this[a]}set maxAge(t){if("number"!=typeof t)throw new TypeError("maxAge must be a non-negative number");this[l]=t,y(this)}get maxAge(){return this[l]}set lengthCalculator(t){"function"!=typeof t&&(t=p),t!==this[o]&&(this[o]=t,this[s]=0,this[h].forEach(t=>{t.length=this[o](t.value,t.key),this[s]+=t.length})),y(this)}get lengthCalculator(){return this[o]}get length(){return this[s]}get itemCount(){return this[h].length}rforEach(t,e){e=e||this;for(let n=this[h].tail;null!==n;){const i=n.prev;b(this,t,n,e),n=i}}forEach(t,e){e=e||this;for(let n=this[h].head;null!==n;){const i=n.next;b(this,t,n,e),n=i}}keys(){return this[h].toArray().map(t=>t.key)}values(){return this[h].toArray().map(t=>t.value)}reset(){this[u]&&this[h]&&this[h].length&&this[h].forEach(t=>this[u](t.key,t.value)),this[d]=new Map,this[h]=new i,this[s]=0}dump(){return this[h].map(t=>!g(this,t)&&{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[h]}set(t,e,n){if((n=n||this[l])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");const i=n?Date.now():0,a=this[o](e,t);if(this[d].has(t)){if(a>this[r])return v(this,this[d].get(t)),!1;const o=this[d].get(t).value;return this[u]&&(this[c]||this[u](t,o.value)),o.now=i,o.maxAge=n,o.value=e,this[s]+=a-o.length,o.length=a,this.get(t),y(this),!0}const f=new _(t,e,a,i,n);return f.length>this[r]?(this[u]&&this[u](t,e),!1):(this[s]+=f.length,this[h].unshift(f),this[d].set(t,this[h].head),y(this),!0)}has(t){if(!this[d].has(t))return!1;const e=this[d].get(t).value;return!g(this,e)}get(t){return m(this,t,!0)}peek(t){return m(this,t,!1)}pop(){const t=this[h].tail;return t?(v(this,t),t.value):null}del(t){v(this,this[d].get(t))}load(t){this.reset();const e=Date.now();for(let n=t.length-1;n>=0;n--){const i=t[n],r=i.e||0;if(0===r)this.set(i.k,i.v);else{const t=r-e;t>0&&this.set(i.k,i.v,t)}}}prune(){this[d].forEach((t,e)=>m(this,e,!1))}}},5478:function(t){t.exports=function(){"use strict";function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function n(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(i)return(i=i.call(t)).next.bind(i);if(Array.isArray(t)||(i=function(t,n){if(t){if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i={exports:{}};i.exports={defaults:{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},getDefaults:function(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}},changeDefaults:function(t){i.exports.defaults=t}};var r=/[&<>"']/,s=/[&<>"']/g,o=/[<>"']|&(?!#?\w+;)/,a=/[<>"']|&(?!#?\w+;)/g,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},u=function(t){return l[t]},c=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function h(t){return t.replace(c,function(t,e){return"colon"===(e=e.toLowerCase())?":":"#"===e.charAt(0)?"x"===e.charAt(1)?String.fromCharCode(parseInt(e.substring(2),16)):String.fromCharCode(+e.substring(1)):""})}var d=/(^|[^\[])\^/g,f=/[^\w:]/g,p=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,m={},g=/^[^:]+:\/*[^/]*$/,y=/^([^:]+:)[\s\S]*$/,v=/^([^:]+:\/*[^/]*)[\s\S]*$/;function _(t,e,n){var i=t.length;if(0===i)return"";for(var r=0;r<i;){var s=t.charAt(i-r-1);if(s!==e||n){if(s===e||!n)break;r++}else r++}return t.substr(0,i-r)}var b=function(t,e){if(e){if(r.test(t))return t.replace(s,u)}else if(o.test(t))return t.replace(a,u);return t},x=h,w=function(t){for(var e,n,i=1;i<arguments.length;i++)for(n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},C=i.exports.defaults,A=_,E=function(t,e){var n=t.replace(/\|/g,function(t,e,n){for(var i=!1,r=e;--r>=0&&"\\"===n[r];)i=!i;return i?"|":" |"}).split(/ \|/),i=0;if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n},k=b;function D(t,e,n){var i=e.href,r=e.title?k(e.title):null,s=t[1].replace(/\\([\[\]])/g,"$1");return"!"!==t[0].charAt(0)?{type:"link",raw:n,href:i,title:r,text:s}:{type:"image",raw:n,href:i,title:r,text:k(s)}}var S=function(){function t(t){this.options=t||C}var e=t.prototype;return e.space=function(t){var e=this.rules.block.newline.exec(t);if(e)return e[0].length>1?{type:"space",raw:e[0]}:{raw:"\n"}},e.code=function(t){var e=this.rules.block.code.exec(t);if(e){var n=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:A(n,"\n")}}},e.fences=function(t){var e=this.rules.block.fences.exec(t);if(e){var n=e[0],i=function(t,e){var n=t.match(/^(\s+)(?:```)/);if(null===n)return e;var i=n[1];return e.split("\n").map(function(t){var e=t.match(/^\s+/);return null===e?t:e[0].length>=i.length?t.slice(i.length):t}).join("\n")}(n,e[3]||"");return{type:"code",raw:n,lang:e[2]?e[2].trim():e[2],text:i}}},e.heading=function(t){var e=this.rules.block.heading.exec(t);if(e){var n=e[2].trim();if(/#$/.test(n)){var i=A(n,"#");this.options.pedantic?n=i.trim():i&&!/ $/.test(i)||(n=i.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n}}},e.nptable=function(t){var e=this.rules.block.nptable.exec(t);if(e){var n={type:"table",header:E(e[1].replace(/^ *| *\| *$/g,"")),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:e[3]?e[3].replace(/\n$/,"").split("\n"):[],raw:e[0]};if(n.header.length===n.align.length){var i,r=n.align.length;for(i=0;i<r;i++)n.align[i]=/^ *-+: *$/.test(n.align[i])?"right":/^ *:-+: *$/.test(n.align[i])?"center":/^ *:-+ *$/.test(n.align[i])?"left":null;for(r=n.cells.length,i=0;i<r;i++)n.cells[i]=E(n.cells[i],n.header.length);return n}}},e.hr=function(t){var e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:e[0]}},e.blockquote=function(t){var e=this.rules.block.blockquote.exec(t);if(e){var n=e[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:e[0],text:n}}},e.list=function(t){var e=this.rules.block.list.exec(t);if(e){var n,i,r,s,o,a,l,u,c,h=e[0],d=e[2],f=d.length>1,p={type:"list",raw:h,ordered:f,start:f?+d.slice(0,-1):"",loose:!1,items:[]},m=e[0].match(this.rules.block.item),g=!1,y=m.length;r=this.rules.block.listItemStart.exec(m[0]);for(var v=0;v<y;v++){if(h=n=m[v],this.options.pedantic||(c=n.match(new RegExp("\\n\\s*\\n {0,"+(r[0].length-1)+"}\\S")))&&(o=n.length-c.index+m.slice(v+1).join("\n").length,p.raw=p.raw.substring(0,p.raw.length-o),h=n=n.substring(0,c.index),y=v+1),v!==y-1){if(s=this.rules.block.listItemStart.exec(m[v+1]),this.options.pedantic?s[1].length>r[1].length:s[1].length>=r[0].length||s[1].length>3){m.splice(v,2,m[v]+(!this.options.pedantic&&s[1].length<r[0].length&&!m[v].match(/\n$/)?"":"\n")+m[v+1]),v--,y--;continue}(!this.options.pedantic||this.options.smartLists?s[2][s[2].length-1]!==d[d.length-1]:f===(1===s[2].length))&&(o=m.slice(v+1).join("\n").length,p.raw=p.raw.substring(0,p.raw.length-o),v=y-1),r=s}i=n.length,~(n=n.replace(/^ *([*+-]|\d+[.)]) ?/,"")).indexOf("\n ")&&(i-=n.length,n=n.replace(this.options.pedantic?/^ {1,4}/gm:new RegExp("^ {1,"+i+"}","gm"),"")),n=A(n,"\n"),v!==y-1&&(h+="\n"),a=g||/\n\n(?!\s*$)/.test(h),v!==y-1&&(g="\n\n"===h.slice(-2),a||(a=g)),a&&(p.loose=!0),this.options.gfm&&(u=void 0,(l=/^\[[ xX]\] /.test(n))&&(u=" "!==n[1],n=n.replace(/^\[[ xX]\] +/,""))),p.items.push({type:"list_item",raw:h,task:l,checked:u,loose:a,text:n})}return p}},e.html=function(t){var e=this.rules.block.html.exec(t);if(e)return{type:this.options.sanitize?"paragraph":"html",raw:e[0],pre:!this.options.sanitizer&&("pre"===e[1]||"script"===e[1]||"style"===e[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):k(e[0]):e[0]}},e.def=function(t){var e=this.rules.block.def.exec(t);if(e)return e[3]&&(e[3]=e[3].substring(1,e[3].length-1)),{type:"def",tag:e[1].toLowerCase().replace(/\s+/g," "),raw:e[0],href:e[2],title:e[3]}},e.table=function(t){var e=this.rules.block.table.exec(t);if(e){var n={type:"table",header:E(e[1].replace(/^ *| *\| *$/g,"")),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:e[3]?e[3].replace(/\n$/,"").split("\n"):[]};if(n.header.length===n.align.length){n.raw=e[0];var i,r=n.align.length;for(i=0;i<r;i++)n.align[i]=/^ *-+: *$/.test(n.align[i])?"right":/^ *:-+: *$/.test(n.align[i])?"center":/^ *:-+ *$/.test(n.align[i])?"left":null;for(r=n.cells.length,i=0;i<r;i++)n.cells[i]=E(n.cells[i].replace(/^ *\| *| *\| *$/g,""),n.header.length);return n}}},e.lheading=function(t){var e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1]}},e.paragraph=function(t){var e=this.rules.block.paragraph.exec(t);if(e)return{type:"paragraph",raw:e[0],text:"\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1]}},e.text=function(t){var e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0]}},e.escape=function(t){var e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:k(e[1])}},e.tag=function(t,e,n){var i=this.rules.inline.tag.exec(t);if(i)return!e&&/^<a /i.test(i[0])?e=!0:e&&/^<\/a>/i.test(i[0])&&(e=!1),!n&&/^<(pre|code|kbd|script)(\s|>)/i.test(i[0])?n=!0:n&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(i[0])&&(n=!1),{type:this.options.sanitize?"text":"html",raw:i[0],inLink:e,inRawBlock:n,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):k(i[0]):i[0]}},e.link=function(t){var e=this.rules.inline.link.exec(t);if(e){var n=e[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;var i=A(n.slice(0,-1),"\\");if((n.length-i.length)%2==0)return}else{var r=function(t,e){if(-1===t.indexOf(e[1]))return-1;for(var n=t.length,i=0,r=0;r<n;r++)if("\\"===t[r])r++;else if(t[r]===e[0])i++;else if(t[r]===e[1]&&--i<0)return r;return-1}(e[2],"()");if(r>-1){var s=(0===e[0].indexOf("!")?5:4)+e[1].length+r;e[2]=e[2].substring(0,r),e[0]=e[0].substring(0,s).trim(),e[3]=""}}var o=e[2],a="";if(this.options.pedantic){var l=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o);l&&(o=l[1],a=l[3])}else a=e[3]?e[3].slice(1,-1):"";return o=o.trim(),/^</.test(o)&&(o=this.options.pedantic&&!/>$/.test(n)?o.slice(1):o.slice(1,-1)),D(e,{href:o?o.replace(this.rules.inline._escapes,"$1"):o,title:a?a.replace(this.rules.inline._escapes,"$1"):a},e[0])}},e.reflink=function(t,e){var n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){var i=(n[2]||n[1]).replace(/\s+/g," ");if(!(i=e[i.toLowerCase()])||!i.href){var r=n[0].charAt(0);return{type:"text",raw:r,text:r}}return D(n,i,n[0])}},e.emStrong=function(t,e,n){void 0===n&&(n="");var i=this.rules.inline.emStrong.lDelim.exec(t);if(i&&(!i[3]||!n.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82C[\uDC00-\uDD1E\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDD\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var r=i[1]||i[2]||"";if(!r||r&&(""===n||this.rules.inline.punctuation.exec(n))){var s,o,a=i[0].length-1,l=a,u=0,c="*"===i[0][0]?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(c.lastIndex=0,e=e.slice(-1*t.length+a);null!=(i=c.exec(e));)if(s=i[1]||i[2]||i[3]||i[4]||i[5]||i[6])if(o=s.length,i[3]||i[4])l+=o;else if(!((i[5]||i[6])&&a%3)||(a+o)%3){if(!((l-=o)>0))return o=Math.min(o,o+l+u),Math.min(a,o)%2?{type:"em",raw:t.slice(0,a+i.index+o+1),text:t.slice(1,a+i.index+o)}:{type:"strong",raw:t.slice(0,a+i.index+o+1),text:t.slice(2,a+i.index+o-1)}}else u+=o}}},e.codespan=function(t){var e=this.rules.inline.code.exec(t);if(e){var n=e[2].replace(/\n/g," "),i=/[^ ]/.test(n),r=/^ /.test(n)&&/ $/.test(n);return i&&r&&(n=n.substring(1,n.length-1)),n=k(n,!0),{type:"codespan",raw:e[0],text:n}}},e.br=function(t){var e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}},e.del=function(t){var e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2]}},e.autolink=function(t,e){var n,i,r=this.rules.inline.autolink.exec(t);if(r)return i="@"===r[2]?"mailto:"+(n=k(this.options.mangle?e(r[1]):r[1])):n=k(r[1]),{type:"link",raw:r[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}},e.url=function(t,e){var n;if(n=this.rules.inline.url.exec(t)){var i,r;if("@"===n[2])r="mailto:"+(i=k(this.options.mangle?e(n[0]):n[0]));else{var s;do{s=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(s!==n[0]);i=k(n[0]),r="www."===n[1]?"http://"+i:i}return{type:"link",raw:n[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}},e.inlineText=function(t,e,n){var i,r=this.rules.inline.text.exec(t);if(r)return i=e?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):k(r[0]):r[0]:k(this.options.smartypants?n(r[0]):r[0]),{type:"text",raw:r[0],text:i}},t}(),F={exec:function(){}},O=function(t,e){t=t.source||t,e=e||"";var n={replace:function(e,i){return i=(i=i.source||i).replace(d,"$1"),t=t.replace(e,i),n},getRegex:function(){return new RegExp(t,e)}};return n},M=w,T={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:F,table:F,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};T.def=O(T.def).replace("label",T._label).replace("title",T._title).getRegex(),T.bullet=/(?:[*+-]|\d{1,9}[.)])/,T.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,T.item=O(T.item,"gm").replace(/bull/g,T.bullet).getRegex(),T.listItemStart=O(/^( *)(bull) */).replace("bull",T.bullet).getRegex(),T.list=O(T.list).replace(/bull/g,T.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+T.def.source+")").getRegex(),T._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",T._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,T.html=O(T.html,"i").replace("comment",T._comment).replace("tag",T._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),T.paragraph=O(T._paragraph).replace("hr",T.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",T._tag).getRegex(),T.blockquote=O(T.blockquote).replace("paragraph",T.paragraph).getRegex(),T.normal=M({},T),T.gfm=M({},T.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),T.gfm.nptable=O(T.gfm.nptable).replace("hr",T.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",T._tag).getRegex(),T.gfm.table=O(T.gfm.table).replace("hr",T.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",T._tag).getRegex(),T.pedantic=M({},T.normal,{html:O("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",T._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:F,paragraph:O(T.normal._paragraph).replace("hr",T.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",T.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var P={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:F,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:F,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};P.punctuation=O(P.punctuation).replace(/punctuation/g,P._punctuation).getRegex(),P.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,P.escapedEmSt=/\\\*|\\_/g,P._comment=O(T._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),P.emStrong.lDelim=O(P.emStrong.lDelim).replace(/punct/g,P._punctuation).getRegex(),P.emStrong.rDelimAst=O(P.emStrong.rDelimAst,"g").replace(/punct/g,P._punctuation).getRegex(),P.emStrong.rDelimUnd=O(P.emStrong.rDelimUnd,"g").replace(/punct/g,P._punctuation).getRegex(),P._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,P._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,P._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,P.autolink=O(P.autolink).replace("scheme",P._scheme).replace("email",P._email).getRegex(),P._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,P.tag=O(P.tag).replace("comment",P._comment).replace("attribute",P._attribute).getRegex(),P._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,P._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,P._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,P.link=O(P.link).replace("label",P._label).replace("href",P._href).replace("title",P._title).getRegex(),P.reflink=O(P.reflink).replace("label",P._label).getRegex(),P.reflinkSearch=O(P.reflinkSearch,"g").replace("reflink",P.reflink).replace("nolink",P.nolink).getRegex(),P.normal=M({},P),P.pedantic=M({},P.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:O(/^!?\[(label)\]\((.*?)\)/).replace("label",P._label).getRegex(),reflink:O(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",P._label).getRegex()}),P.gfm=M({},P.normal,{escape:O(P.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),P.gfm.url=O(P.gfm.url,"i").replace("email",P.gfm._extended_email).getRegex(),P.breaks=M({},P.gfm,{br:O(P.br).replace("{2,}","*").getRegex(),text:O(P.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var R={block:T,inline:P},B=S,I=i.exports.defaults,N=R.block,L=R.inline,$=function(t,e){if(e<1)return"";for(var n="";e>1;)1&e&&(n+=t),e>>=1,t+=t;return n+t};function z(t){return t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function j(t){var e,n,i="",r=t.length;for(e=0;e<r;e++)n=t.charCodeAt(e),Math.random()>.5&&(n="x"+n.toString(16)),i+="&#"+n+";";return i}var U=function(){function e(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||I,this.options.tokenizer=this.options.tokenizer||new B,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var e={block:N.normal,inline:L.normal};this.options.pedantic?(e.block=N.pedantic,e.inline=L.pedantic):this.options.gfm&&(e.block=N.gfm,e.inline=this.options.breaks?L.breaks:L.gfm),this.tokenizer.rules=e}e.lex=function(t,n){return new e(n).lex(t)},e.lexInline=function(t,n){return new e(n).inlineTokens(t)};var n,i,r=e.prototype;return r.lex=function(t){return t=t.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(t,this.tokens,!0),this.inline(this.tokens),this.tokens},r.blockTokens=function(t,e,n){var i,r,s,o,a,l,u=this;for(void 0===e&&(e=[]),void 0===n&&(n=!0),this.options.pedantic&&(t=t.replace(/^ +$/gm,""));t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(n){return!!(i=n.call(u,t,e))&&(t=t.substring(i.raw.length),e.push(i),!0)})))if(i=this.tokenizer.space(t))t=t.substring(i.raw.length),i.type&&e.push(i);else if(i=this.tokenizer.code(t))t=t.substring(i.raw.length),(o=e[e.length-1])&&"paragraph"===o.type?(o.raw+="\n"+i.raw,o.text+="\n"+i.text):e.push(i);else if(i=this.tokenizer.fences(t))t=t.substring(i.raw.length),e.push(i);else if(i=this.tokenizer.heading(t))t=t.substring(i.raw.length),e.push(i);else if(i=this.tokenizer.nptable(t))t=t.substring(i.raw.length),e.push(i);else if(i=this.tokenizer.hr(t))t=t.substring(i.raw.length),e.push(i);else if(i=this.tokenizer.blockquote(t))t=t.substring(i.raw.length),i.tokens=this.blockTokens(i.text,[],n),e.push(i);else if(i=this.tokenizer.list(t)){for(t=t.substring(i.raw.length),s=i.items.length,r=0;r<s;r++)i.items[r].tokens=this.blockTokens(i.items[r].text,[],!1);e.push(i)}else if(i=this.tokenizer.html(t))t=t.substring(i.raw.length),e.push(i);else if(n&&(i=this.tokenizer.def(t)))t=t.substring(i.raw.length),this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});else if(i=this.tokenizer.table(t))t=t.substring(i.raw.length),e.push(i);else if(i=this.tokenizer.lheading(t))t=t.substring(i.raw.length),e.push(i);else if(a=t,this.options.extensions&&this.options.extensions.startBlock&&function(){var e=1/0,n=t.slice(1),i=void 0;u.options.extensions.startBlock.forEach(function(t){"number"==typeof(i=t.call(this,n))&&i>=0&&(e=Math.min(e,i))}),e<1/0&&e>=0&&(a=t.substring(0,e+1))}(),n&&(i=this.tokenizer.paragraph(a)))o=e[e.length-1],l&&"paragraph"===o.type?(o.raw+="\n"+i.raw,o.text+="\n"+i.text):e.push(i),l=a.length!==t.length,t=t.substring(i.raw.length);else if(i=this.tokenizer.text(t))t=t.substring(i.raw.length),(o=e[e.length-1])&&"text"===o.type?(o.raw+="\n"+i.raw,o.text+="\n"+i.text):e.push(i);else if(t){var c="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(c);break}throw new Error(c)}return e},r.inline=function(t){var e,n,i,r,s,o,a=t.length;for(e=0;e<a;e++)switch((o=t[e]).type){case"paragraph":case"text":case"heading":o.tokens=[],this.inlineTokens(o.text,o.tokens);break;case"table":for(o.tokens={header:[],cells:[]},r=o.header.length,n=0;n<r;n++)o.tokens.header[n]=[],this.inlineTokens(o.header[n],o.tokens.header[n]);for(r=o.cells.length,n=0;n<r;n++)for(s=o.cells[n],o.tokens.cells[n]=[],i=0;i<s.length;i++)o.tokens.cells[n][i]=[],this.inlineTokens(s[i],o.tokens.cells[n][i]);break;case"blockquote":this.inline(o.tokens);break;case"list":for(r=o.items.length,n=0;n<r;n++)this.inline(o.items[n].tokens)}return t},r.inlineTokens=function(t,e,n,i){var r,s,o,a=this;void 0===e&&(e=[]),void 0===n&&(n=!1),void 0===i&&(i=!1);var l,u,c,h=t;if(this.tokens.links){var d=Object.keys(this.tokens.links);if(d.length>0)for(;null!=(l=this.tokenizer.rules.inline.reflinkSearch.exec(h));)d.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(h=h.slice(0,l.index)+"["+$("a",l[0].length-2)+"]"+h.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(l=this.tokenizer.rules.inline.blockSkip.exec(h));)h=h.slice(0,l.index)+"["+$("a",l[0].length-2)+"]"+h.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(l=this.tokenizer.rules.inline.escapedEmSt.exec(h));)h=h.slice(0,l.index)+"++"+h.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;t;)if(u||(c=""),u=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(n){return!!(r=n.call(a,t,e))&&(t=t.substring(r.raw.length),e.push(r),!0)})))if(r=this.tokenizer.escape(t))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.tag(t,n,i))t=t.substring(r.raw.length),n=r.inLink,i=r.inRawBlock,(s=e[e.length-1])&&"text"===r.type&&"text"===s.type?(s.raw+=r.raw,s.text+=r.text):e.push(r);else if(r=this.tokenizer.link(t))t=t.substring(r.raw.length),"link"===r.type&&(r.tokens=this.inlineTokens(r.text,[],!0,i)),e.push(r);else if(r=this.tokenizer.reflink(t,this.tokens.links))t=t.substring(r.raw.length),s=e[e.length-1],"link"===r.type?(r.tokens=this.inlineTokens(r.text,[],!0,i),e.push(r)):s&&"text"===r.type&&"text"===s.type?(s.raw+=r.raw,s.text+=r.text):e.push(r);else if(r=this.tokenizer.emStrong(t,h,c))t=t.substring(r.raw.length),r.tokens=this.inlineTokens(r.text,[],n,i),e.push(r);else if(r=this.tokenizer.codespan(t))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.br(t))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.del(t))t=t.substring(r.raw.length),r.tokens=this.inlineTokens(r.text,[],n,i),e.push(r);else if(r=this.tokenizer.autolink(t,j))t=t.substring(r.raw.length),e.push(r);else if(n||!(r=this.tokenizer.url(t,j))){if(o=t,this.options.extensions&&this.options.extensions.startInline&&function(){var e=1/0,n=t.slice(1),i=void 0;a.options.extensions.startInline.forEach(function(t){"number"==typeof(i=t.call(this,n))&&i>=0&&(e=Math.min(e,i))}),e<1/0&&e>=0&&(o=t.substring(0,e+1))}(),r=this.tokenizer.inlineText(o,i,z))t=t.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(c=r.raw.slice(-1)),u=!0,(s=e[e.length-1])&&"text"===s.type?(s.raw+=r.raw,s.text+=r.text):e.push(r);else if(t){var f="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(f);break}throw new Error(f)}}else t=t.substring(r.raw.length),e.push(r);return e},n=e,i=[{key:"rules",get:function(){return{block:N,inline:L}}}],null&&t(n.prototype,null),i&&t(n,i),e}(),V=i.exports.defaults,q=function(t,e,n){if(t){var i;try{i=decodeURIComponent(h(n)).replace(f,"").toLowerCase()}catch(r){return null}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return null}e&&!p.test(n)&&(n=function(t,e){m[" "+t]||(m[" "+t]=g.test(t)?t+"/":_(t,"/",!0));var n=-1===(t=m[" "+t]).indexOf(":");return"//"===e.substring(0,2)?n?e:t.replace(y,"$1")+e:"/"===e.charAt(0)?n?e:t.replace(v,"$1")+e:t+e}(e,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(r){return null}return n},H=b,W=function(){function t(t){this.options=t||V}var e=t.prototype;return e.code=function(t,e,n){var i=(e||"").match(/\S*/)[0];if(this.options.highlight){var r=this.options.highlight(t,i);null!=r&&r!==t&&(n=!0,t=r)}return t=t.replace(/\n$/,"")+"\n",i?'<pre><code class="'+this.options.langPrefix+H(i,!0)+'">'+(n?t:H(t,!0))+"</code></pre>\n":"<pre><code>"+(n?t:H(t,!0))+"</code></pre>\n"},e.blockquote=function(t){return"<blockquote>\n"+t+"</blockquote>\n"},e.html=function(t){return t},e.heading=function(t,e,n,i){return this.options.headerIds?"<h"+e+' id="'+this.options.headerPrefix+i.slug(n)+'">'+t+"</h"+e+">\n":"<h"+e+">"+t+"</h"+e+">\n"},e.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},e.list=function(t,e,n){var i=e?"ol":"ul";return"<"+i+(e&&1!==n?' start="'+n+'"':"")+">\n"+t+"</"+i+">\n"},e.listitem=function(t){return"<li>"+t+"</li>\n"},e.checkbox=function(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},e.paragraph=function(t){return"<p>"+t+"</p>\n"},e.table=function(t,e){return e&&(e="<tbody>"+e+"</tbody>"),"<table>\n<thead>\n"+t+"</thead>\n"+e+"</table>\n"},e.tablerow=function(t){return"<tr>\n"+t+"</tr>\n"},e.tablecell=function(t,e){var n=e.header?"th":"td";return(e.align?"<"+n+' align="'+e.align+'">':"<"+n+">")+t+"</"+n+">\n"},e.strong=function(t){return"<strong>"+t+"</strong>"},e.em=function(t){return"<em>"+t+"</em>"},e.codespan=function(t){return"<code>"+t+"</code>"},e.br=function(){return this.options.xhtml?"<br/>":"<br>"},e.del=function(t){return"<del>"+t+"</del>"},e.link=function(t,e,n){if(null===(t=q(this.options.sanitize,this.options.baseUrl,t)))return n;var i='<a href="'+H(t)+'"';return e&&(i+=' title="'+e+'"'),i+">"+n+"</a>"},e.image=function(t,e,n){if(null===(t=q(this.options.sanitize,this.options.baseUrl,t)))return n;var i='<img src="'+t+'" alt="'+n+'"';return e&&(i+=' title="'+e+'"'),i+(this.options.xhtml?"/>":">")},e.text=function(t){return t},t}(),G=function(){function t(){}var e=t.prototype;return e.strong=function(t){return t},e.em=function(t){return t},e.codespan=function(t){return t},e.del=function(t){return t},e.html=function(t){return t},e.text=function(t){return t},e.link=function(t,e,n){return""+n},e.image=function(t,e,n){return""+n},e.br=function(){return""},t}(),X=function(){function t(){this.seen={}}var e=t.prototype;return e.serialize=function(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},e.getNextSafeSlug=function(t,e){var n=t,i=0;if(this.seen.hasOwnProperty(n)){i=this.seen[t];do{n=t+"-"+ ++i}while(this.seen.hasOwnProperty(n))}return e||(this.seen[t]=i,this.seen[n]=0),n},e.slug=function(t,e){void 0===e&&(e={});var n=this.serialize(t);return this.getNextSafeSlug(n,e.dryrun)},t}(),Y=W,K=G,Z=X,Q=i.exports.defaults,J=x,tt=U,et=function(){function t(t){this.options=t||Q,this.options.renderer=this.options.renderer||new Y,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new K,this.slugger=new Z}t.parse=function(e,n){return new t(n).parse(e)},t.parseInline=function(e,n){return new t(n).parseInline(e)};var e=t.prototype;return e.parse=function(t,e){void 0===e&&(e=!0);var n,i,r,s,o,a,l,u,c,h,d,f,p,m,g,y,v,_,b,x="",w=t.length;for(n=0;n<w;n++)if(h=t[n],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[h.type])||!1===(b=this.options.extensions.renderers[h.type].call(this,h))&&["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type))switch(h.type){case"space":continue;case"hr":x+=this.renderer.hr();continue;case"heading":x+=this.renderer.heading(this.parseInline(h.tokens),h.depth,J(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue;case"code":x+=this.renderer.code(h.text,h.lang,h.escaped);continue;case"table":for(u="",l="",s=h.header.length,i=0;i<s;i++)l+=this.renderer.tablecell(this.parseInline(h.tokens.header[i]),{header:!0,align:h.align[i]});for(u+=this.renderer.tablerow(l),c="",s=h.cells.length,i=0;i<s;i++){for(l="",o=(a=h.tokens.cells[i]).length,r=0;r<o;r++)l+=this.renderer.tablecell(this.parseInline(a[r]),{header:!1,align:h.align[r]});c+=this.renderer.tablerow(l)}x+=this.renderer.table(u,c);continue;case"blockquote":c=this.parse(h.tokens),x+=this.renderer.blockquote(c);continue;case"list":for(d=h.ordered,f=h.start,p=h.loose,s=h.items.length,c="",i=0;i<s;i++)y=(g=h.items[i]).checked,v=g.task,m="",g.task&&(_=this.renderer.checkbox(y),p?g.tokens.length>0&&"text"===g.tokens[0].type?(g.tokens[0].text=_+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&"text"===g.tokens[0].tokens[0].type&&(g.tokens[0].tokens[0].text=_+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:_}):m+=_),m+=this.parse(g.tokens,p),c+=this.renderer.listitem(m,v,y);x+=this.renderer.list(c,d,f);continue;case"html":x+=this.renderer.html(h.text);continue;case"paragraph":x+=this.renderer.paragraph(this.parseInline(h.tokens));continue;case"text":for(c=h.tokens?this.parseInline(h.tokens):h.text;n+1<w&&"text"===t[n+1].type;)c+="\n"+((h=t[++n]).tokens?this.parseInline(h.tokens):h.text);x+=e?this.renderer.paragraph(c):c;continue;default:var C='Token with "'+h.type+'" type was not found.';if(this.options.silent)return void console.error(C);throw new Error(C)}else x+=b||"";return x},e.parseInline=function(t,e){e=e||this.renderer;var n,i,r,s="",o=t.length;for(n=0;n<o;n++)if(i=t[n],!(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type])||!1===(r=this.options.extensions.renderers[i.type].call(this,i))&&["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type))switch(i.type){case"escape":s+=e.text(i.text);break;case"html":s+=e.html(i.text);break;case"link":s+=e.link(i.href,i.title,this.parseInline(i.tokens,e));break;case"image":s+=e.image(i.href,i.title,i.text);break;case"strong":s+=e.strong(this.parseInline(i.tokens,e));break;case"em":s+=e.em(this.parseInline(i.tokens,e));break;case"codespan":s+=e.codespan(i.text);break;case"br":s+=e.br();break;case"del":s+=e.del(this.parseInline(i.tokens,e));break;case"text":s+=e.text(i.text);break;default:var a='Token with "'+i.type+'" type was not found.';if(this.options.silent)return void console.error(a);throw new Error(a)}else s+=r||"";return s},t}(),nt=S,it=W,rt=G,st=X,ot=w,at=function(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},lt=b,ut=i.exports.getDefaults,ct=i.exports.changeDefaults,ht=i.exports.defaults;function dt(t,e,n){if(null==t)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if("function"==typeof e&&(n=e,e=null),e=ot({},dt.defaults,e||{}),at(e),n){var i,r=e.highlight;try{i=tt.lex(t,e)}catch(l){return n(l)}var s=function(t){var s;if(!t)try{e.walkTokens&&dt.walkTokens(i,e.walkTokens),s=et.parse(i,e)}catch(l){t=l}return e.highlight=r,t?n(t):n(null,s)};if(!r||r.length<3)return s();if(delete e.highlight,!i.length)return s();var o=0;return dt.walkTokens(i,function(t){"code"===t.type&&(o++,setTimeout(function(){r(t.text,t.lang,function(e,n){if(e)return s(e);null!=n&&n!==t.text&&(t.text=n,t.escaped=!0),0==--o&&s()})},0))}),void(0===o&&s())}try{var a=tt.lex(t,e);return e.walkTokens&&dt.walkTokens(a,e.walkTokens),et.parse(a,e)}catch(l){if(l.message+="\nPlease report this to https://github.com/markedjs/marked.",e.silent)return"<p>An error occurred:</p><pre>"+lt(l.message+"",!0)+"</pre>";throw l}}return dt.options=dt.setOptions=function(t){return ot(dt.defaults,t),ct(dt.defaults),dt},dt.getDefaults=ut,dt.defaults=ht,dt.use=function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r,s=ot.apply(void 0,[{}].concat(n)),o=dt.defaults.extensions||{renderers:{},childTokens:{}};n.forEach(function(e){if(e.extensions&&(r=!0,e.extensions.forEach(function(t){if(!t.name)throw new Error("extension name required");if(t.renderer){var e=o.renderers?o.renderers[t.name]:null;o.renderers[t.name]=e?function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var s=t.renderer.apply(this,i);return!1===s&&(s=e.apply(this,i)),s}:t.renderer}if(t.tokenizer){if(!t.level||"block"!==t.level&&"inline"!==t.level)throw new Error("extension level must be 'block' or 'inline'");o[t.level]?o[t.level].unshift(t.tokenizer):o[t.level]=[t.tokenizer],t.start&&("block"===t.level?o.startBlock?o.startBlock.push(t.start):o.startBlock=[t.start]:"inline"===t.level&&(o.startInline?o.startInline.push(t.start):o.startInline=[t.start]))}t.childTokens&&(o.childTokens[t.name]=t.childTokens)})),e.renderer&&function(){var t=dt.defaults.renderer||new it,n=function(n){var i=t[n];t[n]=function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];var a=e.renderer[n].apply(t,s);return!1===a&&(a=i.apply(t,s)),a}};for(var i in e.renderer)n(i);s.renderer=t}(),e.tokenizer&&function(){var t=dt.defaults.tokenizer||new nt,n=function(n){var i=t[n];t[n]=function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];var a=e.tokenizer[n].apply(t,s);return!1===a&&(a=i.apply(t,s)),a}};for(var i in e.tokenizer)n(i);s.tokenizer=t}(),e.walkTokens){var n=dt.defaults.walkTokens;s.walkTokens=function(i){e.walkTokens.call(t,i),n&&n(i)}}r&&(s.extensions=o),dt.setOptions(s)})},dt.walkTokens=function(t,e){for(var i,r=function(){var t=i.value;switch(e(t),t.type){case"table":for(var r,s=n(t.tokens.header);!(r=s()).done;)dt.walkTokens(r.value,e);for(var o,a=n(t.tokens.cells);!(o=a()).done;)for(var l,u=n(o.value);!(l=u()).done;)dt.walkTokens(l.value,e);break;case"list":dt.walkTokens(t.items,e);break;default:dt.defaults.extensions&&dt.defaults.extensions.childTokens&&dt.defaults.extensions.childTokens[t.type]?dt.defaults.extensions.childTokens[t.type].forEach(function(n){dt.walkTokens(t[n],e)}):t.tokens&&dt.walkTokens(t.tokens,e)}},s=n(t);!(i=s()).done;)r()},dt.parseInline=function(t,e){if(null==t)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof t)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");e=ot({},dt.defaults,e||{}),at(e);try{var n=tt.lexInline(t,e);return e.walkTokens&&dt.walkTokens(n,e.walkTokens),et.parseInline(n,e)}catch(i){if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",e.silent)return"<p>An error occurred:</p><pre>"+lt(i.message+"",!0)+"</pre>";throw i}},dt.Parser=et,dt.parser=et.parse,dt.Renderer=it,dt.TextRenderer=rt,dt.Lexer=tt,dt.lexer=tt.lex,dt.Tokenizer=nt,dt.Slugger=st,dt.parse=dt,dt}()},593:function(t,e){var n,i;void 0===(i="function"==typeof(n=function t(){"use strict";var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},n=!e.document&&!!e.postMessage,i=n&&/blob:/i.test((e.location||{}).protocol),r={},s=0,o={parse:function(n,i){var a=(i=i||{}).dynamicTyping||!1;if(x(a)&&(i.dynamicTypingFunction=a,a={}),i.dynamicTyping=a,i.transform=!!x(i.transform)&&i.transform,i.worker&&o.WORKERS_SUPPORTED){var l=function(){if(!o.WORKERS_SUPPORTED)return!1;var n,i,a=(n=e.URL||e.webkitURL||null,i=t.toString(),o.BLOB_URL||(o.BLOB_URL=n.createObjectURL(new Blob(["(",i,")();"],{type:"text/javascript"})))),l=new e.Worker(a);return l.onmessage=g,l.id=s++,r[l.id]=l}();return l.userStep=i.step,l.userChunk=i.chunk,l.userComplete=i.complete,l.userError=i.error,i.step=x(i.step),i.chunk=x(i.chunk),i.complete=x(i.complete),i.error=x(i.error),delete i.worker,void l.postMessage({input:n,config:i,workerId:l.id})}var f=null;return"string"==typeof n?f=i.download?new u(i):new h(i):!0===n.readable&&x(n.read)&&x(n.on)?f=new d(i):(e.File&&n instanceof File||n instanceof Object)&&(f=new c(i)),f.stream(n)},unparse:function(t,e){var n=!1,i=!0,r=",",s="\r\n",a='"',l=a+a,u=!1,c=null,h=!1;!function(){if("object"==typeof e){if("string"!=typeof e.delimiter||o.BAD_DELIMITERS.filter(function(t){return-1!==e.delimiter.indexOf(t)}).length||(r=e.delimiter),("boolean"==typeof e.quotes||"function"==typeof e.quotes||Array.isArray(e.quotes))&&(n=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(u=e.skipEmptyLines),"string"==typeof e.newline&&(s=e.newline),"string"==typeof e.quoteChar&&(a=e.quoteChar),"boolean"==typeof e.header&&(i=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");c=e.columns}void 0!==e.escapeChar&&(l=e.escapeChar+a),"boolean"==typeof e.escapeFormulae&&(h=e.escapeFormulae)}}();var d=new RegExp(p(a),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return f(null,t,u);if("object"==typeof t[0])return f(c||Object.keys(t[0]),t,u)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:"object"==typeof t.data[0]?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),f(t.fields||[],t.data||[],u);throw new Error("Unable to serialize unrecognized input");function f(t,e,n){var o="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var a=Array.isArray(t)&&0<t.length,l=!Array.isArray(e[0]);if(a&&i){for(var u=0;u<t.length;u++)0<u&&(o+=r),o+=m(t[u],u);0<e.length&&(o+=s)}for(var c=0;c<e.length;c++){var h=a?t.length:e[c].length,d=!1,f=a?0===Object.keys(e[c]).length:0===e[c].length;if(n&&!a&&(d="greedy"===n?""===e[c].join("").trim():1===e[c].length&&0===e[c][0].length),"greedy"===n&&a){for(var p=[],g=0;g<h;g++)p.push(e[c][l?t[g]:g]);d=""===p.join("").trim()}if(!d){for(var y=0;y<h;y++)0<y&&!f&&(o+=r),o+=m(e[c][a&&l?t[y]:y],y);c<e.length-1&&(!n||0<h&&!f)&&(o+=s)}}return o}function m(t,e){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);!0===h&&"string"==typeof t&&null!==t.match(/^[=+\-@].*$/)&&(t="'"+t);var i=t.toString().replace(d,l);return"boolean"==typeof n&&n||"function"==typeof n&&n(t,e)||Array.isArray(n)&&n[e]||function(t,e){for(var n=0;n<e.length;n++)if(-1<t.indexOf(e[n]))return!0;return!1}(i,o.BAD_DELIMITERS)||-1<i.indexOf(r)||" "===i.charAt(0)||" "===i.charAt(i.length-1)?a+i+a:i}}};if(o.RECORD_SEP=String.fromCharCode(30),o.UNIT_SEP=String.fromCharCode(31),o.BYTE_ORDER_MARK="\ufeff",o.BAD_DELIMITERS=["\r","\n",'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!n&&!!e.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=m,o.ParserHandle=f,o.NetworkStreamer=u,o.FileStreamer=c,o.StringStreamer=h,o.ReadableStreamStreamer=d,e.jQuery){var a=e.jQuery;a.fn.parse=function(t){var n=t.config||{},i=[];return this.each(function(t){if("INPUT"!==a(this).prop("tagName").toUpperCase()||"file"!==a(this).attr("type").toLowerCase()||!e.FileReader||!this.files||0===this.files.length)return!0;for(var r=0;r<this.files.length;r++)i.push({file:this.files[r],inputElem:this,instanceConfig:a.extend({},n)})}),r(),this;function r(){if(0!==i.length){var e,n,r,l=i[0];if(x(t.before)){var u=t.before(l.file,l.inputElem);if("object"==typeof u){if("abort"===u.action)return e=l.file,n=l.inputElem,r=u.reason,void(x(t.error)&&t.error({name:"AbortError"},e,n,r));if("skip"===u.action)return void s();"object"==typeof u.config&&(l.instanceConfig=a.extend(l.instanceConfig,u.config))}else if("skip"===u)return void s()}var c=l.instanceConfig.complete;l.instanceConfig.complete=function(t){x(c)&&c(t,l.file,l.inputElem),s()},o.parse(l.file,l.instanceConfig)}else x(t.complete)&&t.complete()}function s(){i.splice(0,1),r()}}}function l(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var e=_(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new f(e),(this._handle.streamer=this)._config=e}).call(this,t),this.parseChunk=function(t,n){if(this.isFirstChunk&&x(this._config.beforeFirstChunk)){var r=this._config.beforeFirstChunk(t);void 0!==r&&(t=r)}this.isFirstChunk=!1,this._halted=!1;var s=this._partialLine+t;this._partialLine="";var a=this._handle.parse(s,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var l=a.meta.cursor;this._finished||(this._partialLine=s.substring(l-this._baseIndex),this._baseIndex=l),a&&a.data&&(this._rowCount+=a.data.length);var u=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(i)e.postMessage({results:a,workerId:o.WORKER_ID,finished:u});else if(x(this._config.chunk)&&!n){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);a=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!u||!x(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),u||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(t){x(this._config.error)?this._config.error(t):i&&this._config.error&&e.postMessage({workerId:o.WORKER_ID,error:t,finished:!1})}}function u(t){var e;(t=t||{}).chunkSize||(t.chunkSize=o.RemoteChunkSize),l.call(this,t),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),n||(e.onload=b(this._chunkLoaded,this),e.onerror=b(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var i in t)e.setRequestHeader(i,t[i])}this._config.chunkSize&&e.setRequestHeader("Range","bytes="+this._start+"-"+(this._start+this._config.chunkSize-1));try{e.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}n&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substring(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){this._sendError(new Error(e.statusText||t))}}function c(t){var e,n;(t=t||{}).chunkSize||(t.chunkSize=o.LocalChunkSize),l.call(this,t);var i="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,n=t.slice||t.webkitSlice||t.mozSlice,i?((e=new FileReader).onload=b(this._chunkLoaded,this),e.onerror=b(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var r=Math.min(this._start+this._config.chunkSize,this._input.size);t=n.call(t,this._start,r)}var s=e.readAsText(t,this._config.encoding);i||this._chunkLoaded({target:{result:s}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function h(t){var e;l.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t,n=this._config.chunkSize;return n?(t=e.substring(0,n),e=e.substring(n)):(t=e,e=""),this._finished=!e,this.parseChunk(t)}}}function d(t){l.call(this,t=t||{});var e=[],n=!0,i=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){i&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):n=!0},this._streamData=b(function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}},this),this._streamError=b(function(t){this._streamCleanUp(),this._sendError(t)},this),this._streamEnd=b(function(){this._streamCleanUp(),i=!0,this._streamData("")},this),this._streamCleanUp=b(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function f(t){var e,n,i,r=Math.pow(2,53),s=-r,a=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,l=/^(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))$/,u=this,c=0,h=0,d=!1,f=!1,g=[],y={data:[],errors:[],meta:{}};if(x(t.step)){var v=t.step;t.step=function(e){if(y=e,C())w();else{if(w(),0===y.data.length)return;c+=e.data.length,t.preview&&c>t.preview?n.abort():(y.data=y.data[0],v(y,u))}}}function b(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function w(){if(y&&i&&(E("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),i=!1),t.skipEmptyLines)for(var e=0;e<y.data.length;e++)b(y.data[e])&&y.data.splice(e--,1);return C()&&function(){if(y)if(Array.isArray(y.data[0])){for(var e=0;C()&&e<y.data.length;e++)y.data[e].forEach(n);y.data.splice(0,1)}else y.data.forEach(n);function n(e,n){x(t.transformHeader)&&(e=t.transformHeader(e,n)),g.push(e)}}(),function(){if(!y||!t.header&&!t.dynamicTyping&&!t.transform)return y;function e(e,n){var i,r=t.header?{}:[];for(i=0;i<e.length;i++){var s=i,o=e[i];t.header&&(s=i>=g.length?"__parsed_extra":g[i]),t.transform&&(o=t.transform(o,s)),o=A(s,o),"__parsed_extra"===s?(r[s]=r[s]||[],r[s].push(o)):r[s]=o}return t.header&&(i>g.length?E("FieldMismatch","TooManyFields","Too many fields: expected "+g.length+" fields but parsed "+i,h+n):i<g.length&&E("FieldMismatch","TooFewFields","Too few fields: expected "+g.length+" fields but parsed "+i,h+n)),r}var n=1;return!y.data.length||Array.isArray(y.data[0])?(y.data=y.data.map(e),n=y.data.length):y.data=e(y.data,0),t.header&&y.meta&&(y.meta.fields=g),h+=n,y}()}function C(){return t.header&&0===g.length}function A(e,n){return i=e,t.dynamicTypingFunction&&void 0===t.dynamicTyping[i]&&(t.dynamicTyping[i]=t.dynamicTypingFunction(i)),!0===(t.dynamicTyping[i]||t.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(t){if(a.test(t)){var e=parseFloat(t);if(s<e&&e<r)return!0}return!1}(n)?parseFloat(n):l.test(n)?new Date(n):""===n?null:n):n;var i}function E(t,e,n,i){var r={type:t,code:e,message:n};void 0!==i&&(r.row=i),y.errors.push(r)}this.parse=function(r,s,a){if(t.newline||(t.newline=function(t,e){t=t.substring(0,1048576);var n=new RegExp(p(e)+"([^]*?)"+p(e),"gm"),i=(t=t.replace(n,"")).split("\r"),r=t.split("\n");if(1===i.length||1<r.length&&r[0].length<i[0].length)return"\n";for(var s=0,o=0;o<i.length;o++)"\n"===i[o][0]&&s++;return s>=i.length/2?"\r\n":"\r"}(r,t.quoteChar||'"')),i=!1,t.delimiter)x(t.delimiter)&&(t.delimiter=t.delimiter(r),y.meta.delimiter=t.delimiter);else{var l=function(e,n,i,r,s){var a,l,u,c;s=s||[",","\t","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var h=0;h<s.length;h++){var d=s[h],f=0,p=0,g=0;u=void 0;for(var y=new m({comments:r,delimiter:d,newline:n,preview:10}).parse(e),v=0;v<y.data.length;v++)if(i&&b(y.data[v]))g++;else{var _=y.data[v].length;p+=_,void 0!==u?0<_&&(f+=Math.abs(_-u),u=_):u=_}0<y.data.length&&(p/=y.data.length-g),(void 0===l||f<=l)&&(void 0===c||c<p)&&1.99<p&&(l=f,a=d,c=p)}return{successful:!!(t.delimiter=a),bestDelimiter:a}}(r,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);l.successful?t.delimiter=l.bestDelimiter:(i=!0,t.delimiter=o.DefaultDelimiter),y.meta.delimiter=t.delimiter}var u=_(t);return t.preview&&t.header&&u.preview++,e=r,n=new m(u),y=n.parse(e,s,a),w(),d?{meta:{paused:!0}}:y||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,n.abort(),e=x(t.chunk)?"":e.substring(n.getCharIndex())},this.resume=function(){u.streamer._halted?(d=!1,u.streamer.parseChunk(e,!0)):setTimeout(u.resume,3)},this.aborted=function(){return f},this.abort=function(){f=!0,n.abort(),y.meta.aborted=!0,x(t.complete)&&t.complete(y),e=""}}function p(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function m(t){var e,n=(t=t||{}).delimiter,i=t.newline,r=t.comments,s=t.step,a=t.preview,l=t.fastMode,u=e=void 0===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(u=t.escapeChar),("string"!=typeof n||-1<o.BAD_DELIMITERS.indexOf(n))&&(n=","),r===n)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<o.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==i&&"\r"!==i&&"\r\n"!==i&&(i="\n");var c=0,h=!1;this.parse=function(t,o,d){if("string"!=typeof t)throw new Error("Input must be a string");var f=t.length,m=n.length,g=i.length,y=r.length,v=x(s),_=[],b=[],w=[],C=c=0;if(!t)return I();if(l||!1!==l&&-1===t.indexOf(e)){for(var A=t.split(i),E=0;E<A.length;E++){if(c+=(w=A[E]).length,E!==A.length-1)c+=i.length;else if(d)return I();if(!r||w.substring(0,y)!==r){if(v){if(_=[],T(w.split(n)),N(),h)return I()}else T(w.split(n));if(a&&a<=E)return _=_.slice(0,a),I(!0)}}return I()}for(var k=t.indexOf(n,c),D=t.indexOf(i,c),S=new RegExp(p(u)+p(e),"g"),F=t.indexOf(e,c);;)if(t[c]!==e)if(r&&0===w.length&&t.substring(c,c+y)===r){if(-1===D)return I();D=t.indexOf(i,c=D+g),k=t.indexOf(n,c)}else if(-1!==k&&(k<D||-1===D))w.push(t.substring(c,k)),k=t.indexOf(n,c=k+m);else{if(-1===D)break;if(w.push(t.substring(c,D)),B(D+g),v&&(N(),h))return I();if(a&&_.length>=a)return I(!0)}else for(F=c,c++;;){if(-1===(F=t.indexOf(e,F+1)))return d||b.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:_.length,index:c}),R();if(F===f-1)return R(t.substring(c,F).replace(S,e));if(e!==u||t[F+1]!==u){if(e===u||0===F||t[F-1]!==u){-1!==k&&k<F+1&&(k=t.indexOf(n,F+1)),-1!==D&&D<F+1&&(D=t.indexOf(i,F+1));var O=P(-1===D?k:Math.min(k,D));if(t[F+1+O]===n){w.push(t.substring(c,F).replace(S,e)),t[c=F+1+O+m]!==e&&(F=t.indexOf(e,c)),k=t.indexOf(n,c),D=t.indexOf(i,c);break}var M=P(D);if(t.substring(F+1+M,F+1+M+g)===i){if(w.push(t.substring(c,F).replace(S,e)),B(F+1+M+g),k=t.indexOf(n,c),F=t.indexOf(e,c),v&&(N(),h))return I();if(a&&_.length>=a)return I(!0);break}b.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:_.length,index:c}),F++}}else F++}return R();function T(t){_.push(t),C=c}function P(e){var n=0;if(-1!==e){var i=t.substring(F+1,e);i&&""===i.trim()&&(n=i.length)}return n}function R(e){return d||(void 0===e&&(e=t.substring(c)),w.push(e),c=f,T(w),v&&N()),I()}function B(e){c=e,T(w),w=[],D=t.indexOf(i,c)}function I(t){return{data:_,errors:b,meta:{delimiter:n,linebreak:i,aborted:h,truncated:!!t,cursor:C+(o||0)}}}function N(){s(I()),_=[],b=[]}},this.abort=function(){h=!0},this.getCharIndex=function(){return c}}function g(t){var e=t.data,n=r[e.workerId],i=!1;if(e.error)n.userError(e.error,e.file);else if(e.results&&e.results.data){var s={abort:function(){i=!0,y(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:v,resume:v};if(x(n.userStep)){for(var o=0;o<e.results.data.length&&(n.userStep({data:e.results.data[o],errors:e.results.errors,meta:e.results.meta},s),!i);o++);delete e.results}else x(n.userChunk)&&(n.userChunk(e.results,s,e.file),delete e.results)}e.finished&&!i&&y(e.workerId,e.results)}function y(t,e){var n=r[t];x(n.userComplete)&&n.userComplete(e),n.terminate(),delete r[t]}function v(){throw new Error("Not implemented.")}function _(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var n in t)e[n]=_(t[n]);return e}function b(t,e){return function(){t.apply(e,arguments)}}function x(t){return"function"==typeof t}return i&&(e.onmessage=function(t){var n=t.data;if(void 0===o.WORKER_ID&&n&&(o.WORKER_ID=n.workerId),"string"==typeof n.input)e.postMessage({workerId:o.WORKER_ID,results:o.parse(n.input,n.config),finished:!0});else if(e.File&&n.input instanceof File||n.input instanceof Object){var i=o.parse(n.input,n.config);i&&e.postMessage({workerId:o.WORKER_ID,results:i,finished:!0})}}),(u.prototype=Object.create(l.prototype)).constructor=u,(c.prototype=Object.create(l.prototype)).constructor=c,(h.prototype=Object.create(h.prototype)).constructor=h,(d.prototype=Object.create(l.prototype)).constructor=d,o})?n.apply(e,[]):n)||(t.exports=i)},5078:t=>{"use strict";var e=/("(?:[^\\"]|\\.)*")|[:,]/g;t.exports=function(t,n){var i,r,s;return n=n||{},i=JSON.stringify([1],void 0,void 0===n.indent?2:n.indent).slice(2,-3),r=""===i?1/0:void 0===n.maxLength?80:n.maxLength,s=n.replacer,function t(n,o,a){var l,u,c,h,d,f,p,m,g,y,v,_;if(n&&"function"==typeof n.toJSON&&(n=n.toJSON()),void 0===(v=JSON.stringify(n,s)))return v;if(v.length<=(p=r-o.length-a)&&(g=v.replace(e,function(t,e){return e||t+" "})).length<=p)return g;if(null!=s&&(n=JSON.parse(v),s=void 0),"object"==typeof n&&null!==n){if(m=o+i,c=[],u=0,Array.isArray(n))for(y="[",l="]",p=n.length;u<p;u++)c.push(t(n[u],m,u===p-1?0:1)||"null");else for(y="{",l="}",p=(f=Object.keys(n)).length;u<p;u++)h=f[u],d=JSON.stringify(h)+": ",void 0!==(_=t(n[h],m,d.length+(u===p-1?0:1)))&&c.push(d+_);if(c.length>0)return[y,i+c.join(",\n"+m),l].join("\n"+o)}return v}(t,"",0)}},2405:(t,e,n)=>{const i=Symbol("SemVer ANY");class r{static get ANY(){return i}constructor(t,e){if(e=s(e),t instanceof r){if(t.loose===!!e.loose)return t;t=t.value}u("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.value=this.semver===i?"":this.operator+this.semver.version,u("comp",this)}parse(t){const e=t.match(this.options.loose?o[a.COMPARATORLOOSE]:o[a.COMPARATOR]);if(!e)throw new TypeError(`Invalid comparator: ${t}`);this.operator=void 0!==e[1]?e[1]:"","="===this.operator&&(this.operator=""),this.semver=e[2]?new c(e[2],this.options.loose):i}toString(){return this.value}test(t){if(u("Comparator.test",t,this.options.loose),this.semver===i||t===i)return!0;if("string"==typeof t)try{t=new c(t,this.options)}catch(e){return!1}return l(t,this.operator,this.semver,this.options)}intersects(t,e){if(!(t instanceof r))throw new TypeError("a Comparator is required");if(e&&"object"==typeof e||(e={loose:!!e,includePrerelease:!1}),""===this.operator)return""===this.value||new h(t.value,e).test(this.value);if(""===t.operator)return""===t.value||new h(this.value,e).test(t.semver);const n=!(">="!==this.operator&&">"!==this.operator||">="!==t.operator&&">"!==t.operator),i=!("<="!==this.operator&&"<"!==this.operator||"<="!==t.operator&&"<"!==t.operator),s=this.semver.version===t.semver.version,o=!(">="!==this.operator&&"<="!==this.operator||">="!==t.operator&&"<="!==t.operator),a=l(this.semver,"<",t.semver,e)&&(">="===this.operator||">"===this.operator)&&("<="===t.operator||"<"===t.operator),u=l(this.semver,">",t.semver,e)&&("<="===this.operator||"<"===this.operator)&&(">="===t.operator||">"===t.operator);return n||i||s&&o||a||u}}t.exports=r;const s=n(5494),{re:o,t:a}=n(5716),l=n(2376),u=n(7211),c=n(2388),h=n(4573)},4573:(t,e,n)=>{class i{constructor(t,e){if(e=s(e),t instanceof i)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new i(t.raw,e);if(t instanceof o)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(t=>this.parseRange(t.trim())).filter(t=>t.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${t}`);if(this.set.length>1){const t=this.set[0];if(this.set=this.set.filter(t=>!p(t[0])),0===this.set.length)this.set=[t];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&m(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){t=t.trim();const e=`parseRange:${Object.keys(this.options).join(",")}:${t}`,n=r.get(e);if(n)return n;const i=this.options.loose;t=t.replace(i?u[c.HYPHENRANGELOOSE]:u[c.HYPHENRANGE],D(this.options.includePrerelease)),a("hyphen replace",t),t=t.replace(u[c.COMPARATORTRIM],h),a("comparator trim",t,u[c.COMPARATORTRIM]),t=(t=(t=t.replace(u[c.TILDETRIM],d)).replace(u[c.CARETTRIM],f)).split(/\s+/).join(" ");const s=i?u[c.COMPARATORLOOSE]:u[c.COMPARATOR],l=t.split(" ").map(t=>y(t,this.options)).join(" ").split(/\s+/).map(t=>k(t,this.options)).filter(this.options.loose?t=>!!t.match(s):()=>!0).map(t=>new o(t,this.options)),m=new Map;for(const r of l){if(p(r))return[r];m.set(r.value,r)}m.size>1&&m.has("")&&m.delete("");const g=[...m.values()];return r.set(e,g),g}intersects(t,e){if(!(t instanceof i))throw new TypeError("a Range is required");return this.set.some(n=>g(n,e)&&t.set.some(t=>g(t,e)&&n.every(n=>t.every(t=>n.intersects(t,e)))))}test(t){if(!t)return!1;if("string"==typeof t)try{t=new l(t,this.options)}catch(e){return!1}for(let n=0;n<this.set.length;n++)if(S(this.set[n],t,this.options))return!0;return!1}}t.exports=i;const r=new(n(5270))({max:1e3}),s=n(5494),o=n(2405),a=n(7211),l=n(2388),{re:u,t:c,comparatorTrimReplace:h,tildeTrimReplace:d,caretTrimReplace:f}=n(5716),p=t=>"<0.0.0-0"===t.value,m=t=>""===t.value,g=(t,e)=>{let n=!0;const i=t.slice();let r=i.pop();for(;n&&i.length;)n=i.every(t=>r.intersects(t,e)),r=i.pop();return n},y=(t,e)=>(a("comp",t,e),t=x(t,e),a("caret",t),t=_(t,e),a("tildes",t),t=C(t,e),a("xrange",t),t=E(t,e),a("stars",t),t),v=t=>!t||"x"===t.toLowerCase()||"*"===t,_=(t,e)=>t.trim().split(/\s+/).map(t=>b(t,e)).join(" "),b=(t,e)=>t.replace(e.loose?u[c.TILDELOOSE]:u[c.TILDE],(e,n,i,r,s)=>{let o;return a("tilde",t,e,n,i,r,s),v(n)?o="":v(i)?o=`>=${n}.0.0 <${+n+1}.0.0-0`:v(r)?o=`>=${n}.${i}.0 <${n}.${+i+1}.0-0`:s?(a("replaceTilde pr",s),o=`>=${n}.${i}.${r}-${s} <${n}.${+i+1}.0-0`):o=`>=${n}.${i}.${r} <${n}.${+i+1}.0-0`,a("tilde return",o),o}),x=(t,e)=>t.trim().split(/\s+/).map(t=>w(t,e)).join(" "),w=(t,e)=>{a("caret",t,e);const n=e.includePrerelease?"-0":"";return t.replace(e.loose?u[c.CARETLOOSE]:u[c.CARET],(e,i,r,s,o)=>{let l;return a("caret",t,e,i,r,s,o),v(i)?l="":v(r)?l=`>=${i}.0.0${n} <${+i+1}.0.0-0`:v(s)?l="0"===i?`>=${i}.${r}.0${n} <${i}.${+r+1}.0-0`:`>=${i}.${r}.0${n} <${+i+1}.0.0-0`:o?(a("replaceCaret pr",o),l="0"===i?"0"===r?`>=${i}.${r}.${s}-${o} <${i}.${r}.${+s+1}-0`:`>=${i}.${r}.${s}-${o} <${i}.${+r+1}.0-0`:`>=${i}.${r}.${s}-${o} <${+i+1}.0.0-0`):(a("no pr"),l="0"===i?"0"===r?`>=${i}.${r}.${s}${n} <${i}.${r}.${+s+1}-0`:`>=${i}.${r}.${s}${n} <${i}.${+r+1}.0-0`:`>=${i}.${r}.${s} <${+i+1}.0.0-0`),a("caret return",l),l})},C=(t,e)=>(a("replaceXRanges",t,e),t.split(/\s+/).map(t=>A(t,e)).join(" ")),A=(t,e)=>(t=t.trim()).replace(e.loose?u[c.XRANGELOOSE]:u[c.XRANGE],(n,i,r,s,o,l)=>{a("xRange",t,n,i,r,s,o,l);const u=v(r),c=u||v(s),h=c||v(o);return"="===i&&h&&(i=""),l=e.includePrerelease?"-0":"",u?n=">"===i||"<"===i?"<0.0.0-0":"*":i&&h?(c&&(s=0),o=0,">"===i?(i=">=",c?(r=+r+1,s=0,o=0):(s=+s+1,o=0)):"<="===i&&(i="<",c?r=+r+1:s=+s+1),"<"===i&&(l="-0"),n=`${i+r}.${s}.${o}${l}`):c?n=`>=${r}.0.0${l} <${+r+1}.0.0-0`:h&&(n=`>=${r}.${s}.0${l} <${r}.${+s+1}.0-0`),a("xRange return",n),n}),E=(t,e)=>(a("replaceStars",t,e),t.trim().replace(u[c.STAR],"")),k=(t,e)=>(a("replaceGTE0",t,e),t.trim().replace(u[e.includePrerelease?c.GTE0PRE:c.GTE0],"")),D=t=>(e,n,i,r,s,o,a,l,u,c,h,d,f)=>`${n=v(i)?"":v(r)?`>=${i}.0.0${t?"-0":""}`:v(s)?`>=${i}.${r}.0${t?"-0":""}`:o?`>=${n}`:`>=${n}${t?"-0":""}`} ${l=v(u)?"":v(c)?`<${+u+1}.0.0-0`:v(h)?`<${u}.${+c+1}.0-0`:d?`<=${u}.${c}.${h}-${d}`:t?`<${u}.${c}.${+h+1}-0`:`<=${l}`}`.trim(),S=(t,e,n)=>{for(let i=0;i<t.length;i++)if(!t[i].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let n=0;n<t.length;n++)if(a(t[n].semver),t[n].semver!==o.ANY&&t[n].semver.prerelease.length>0){const i=t[n].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0}},2388:(t,e,n)=>{const i=n(7211),{MAX_LENGTH:r,MAX_SAFE_INTEGER:s}=n(9597),{re:o,t:a}=n(5716),l=n(5494),{compareIdentifiers:u}=n(6931);class c{constructor(t,e){if(e=l(e),t instanceof c){if(t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease)return t;t=t.version}else if("string"!=typeof t)throw new TypeError(`Invalid Version: ${t}`);if(t.length>r)throw new TypeError(`version is longer than ${r} characters`);i("SemVer",t,e),this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease;const n=t.trim().match(e.loose?o[a.LOOSE]:o[a.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");this.prerelease=n[4]?n[4].split(".").map(t=>{if(/^[0-9]+$/.test(t)){const e=+t;if(e>=0&&e<s)return e}return t}):[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(i("SemVer.compare",this.version,this.options,t),!(t instanceof c)){if("string"==typeof t&&t===this.version)return 0;t=new c(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof c||(t=new c(t,this.options)),u(this.major,t.major)||u(this.minor,t.minor)||u(this.patch,t.patch)}comparePre(t){if(t instanceof c||(t=new c(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let e=0;do{const n=this.prerelease[e],r=t.prerelease[e];if(i("prerelease compare",e,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return u(n,r)}while(++e)}compareBuild(t){t instanceof c||(t=new c(t,this.options));let e=0;do{const n=this.build[e],r=t.build[e];if(i("prerelease compare",e,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return u(n,r)}while(++e)}inc(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e),this.inc("pre",e);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let t=this.prerelease.length;for(;--t>=0;)"number"==typeof this.prerelease[t]&&(this.prerelease[t]++,t=-2);-1===t&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}}t.exports=c},4924:(t,e,n)=>{const i=n(9412);t.exports=(t,e)=>{const n=i(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null}},2376:(t,e,n)=>{const i=n(7346),r=n(6387),s=n(9670),o=n(7988),a=n(9117),l=n(312);t.exports=(t,e,n,u)=>{switch(e){case"===":return"object"==typeof t&&(t=t.version),"object"==typeof n&&(n=n.version),t===n;case"!==":return"object"==typeof t&&(t=t.version),"object"==typeof n&&(n=n.version),t!==n;case"":case"=":case"==":return i(t,n,u);case"!=":return r(t,n,u);case">":return s(t,n,u);case">=":return o(t,n,u);case"<":return a(t,n,u);case"<=":return l(t,n,u);default:throw new TypeError(`Invalid operator: ${e}`)}}},7515:(t,e,n)=>{const i=n(2388),r=n(9412),{re:s,t:o}=n(5716);t.exports=(t,e)=>{if(t instanceof i)return t;if("number"==typeof t&&(t=String(t)),"string"!=typeof t)return null;let n=null;if((e=e||{}).rtl){let e;for(;(e=s[o.COERCERTL].exec(t))&&(!n||n.index+n[0].length!==t.length);)n&&e.index+e[0].length===n.index+n[0].length||(n=e),s[o.COERCERTL].lastIndex=e.index+e[1].length+e[2].length;s[o.COERCERTL].lastIndex=-1}else n=t.match(s[o.COERCE]);return null===n?null:r(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,e)}},9600:(t,e,n)=>{const i=n(2388);t.exports=(t,e,n)=>{const r=new i(t,n),s=new i(e,n);return r.compare(s)||r.compareBuild(s)}},8094:(t,e,n)=>{const i=n(648);t.exports=(t,e)=>i(t,e,!0)},648:(t,e,n)=>{const i=n(2388);t.exports=(t,e,n)=>new i(t,n).compare(new i(e,n))},5567:(t,e,n)=>{const i=n(9412),r=n(7346);t.exports=(t,e)=>{if(r(t,e))return null;{const n=i(t),r=i(e),s=n.prerelease.length||r.prerelease.length,o=s?"pre":"",a=s?"prerelease":"";for(const t in n)if(("major"===t||"minor"===t||"patch"===t)&&n[t]!==r[t])return o+t;return a}}},7346:(t,e,n)=>{const i=n(648);t.exports=(t,e,n)=>0===i(t,e,n)},9670:(t,e,n)=>{const i=n(648);t.exports=(t,e,n)=>i(t,e,n)>0},7988:(t,e,n)=>{const i=n(648);t.exports=(t,e,n)=>i(t,e,n)>=0},4018:(t,e,n)=>{const i=n(2388);t.exports=(t,e,n,r)=>{"string"==typeof n&&(r=n,n=void 0);try{return new i(t,n).inc(e,r).version}catch(s){return null}}},9117:(t,e,n)=>{const i=n(648);t.exports=(t,e,n)=>i(t,e,n)<0},312:(t,e,n)=>{const i=n(648);t.exports=(t,e,n)=>i(t,e,n)<=0},9726:(t,e,n)=>{const i=n(2388);t.exports=(t,e)=>new i(t,e).major},4325:(t,e,n)=>{const i=n(2388);t.exports=(t,e)=>new i(t,e).minor},6387:(t,e,n)=>{const i=n(648);t.exports=(t,e,n)=>0!==i(t,e,n)},9412:(t,e,n)=>{const{MAX_LENGTH:i}=n(9597),{re:r,t:s}=n(5716),o=n(2388),a=n(5494);t.exports=(t,e)=>{if(e=a(e),t instanceof o)return t;if("string"!=typeof t)return null;if(t.length>i)return null;if(!(e.loose?r[s.LOOSE]:r[s.FULL]).test(t))return null;try{return new o(t,e)}catch(n){return null}}},2869:(t,e,n)=>{const i=n(2388);t.exports=(t,e)=>new i(t,e).patch},8003:(t,e,n)=>{const i=n(9412);t.exports=(t,e)=>{const n=i(t,e);return n&&n.prerelease.length?n.prerelease:null}},7913:(t,e,n)=>{const i=n(648);t.exports=(t,e,n)=>i(e,t,n)},5416:(t,e,n)=>{const i=n(9600);t.exports=(t,e)=>t.sort((t,n)=>i(n,t,e))},8113:(t,e,n)=>{const i=n(4573);t.exports=(t,e,n)=>{try{e=new i(e,n)}catch(r){return!1}return e.test(t)}},3799:(t,e,n)=>{const i=n(9600);t.exports=(t,e)=>t.sort((t,n)=>i(t,n,e))},9709:(t,e,n)=>{const i=n(9412);t.exports=(t,e)=>{const n=i(t,e);return n?n.version:null}},198:(t,e,n)=>{const i=n(5716);t.exports={re:i.re,src:i.src,tokens:i.t,SEMVER_SPEC_VERSION:n(9597).SEMVER_SPEC_VERSION,SemVer:n(2388),compareIdentifiers:n(6931).compareIdentifiers,rcompareIdentifiers:n(6931).rcompareIdentifiers,parse:n(9412),valid:n(9709),clean:n(4924),inc:n(4018),diff:n(5567),major:n(9726),minor:n(4325),patch:n(2869),prerelease:n(8003),compare:n(648),rcompare:n(7913),compareLoose:n(8094),compareBuild:n(9600),sort:n(3799),rsort:n(5416),gt:n(9670),lt:n(9117),eq:n(7346),neq:n(6387),gte:n(7988),lte:n(312),cmp:n(2376),coerce:n(7515),Comparator:n(2405),Range:n(4573),satisfies:n(8113),toComparators:n(4718),maxSatisfying:n(2971),minSatisfying:n(378),minVersion:n(1232),validRange:n(9499),outside:n(8219),gtr:n(5301),ltr:n(9917),intersects:n(7613),simplifyRange:n(7810),subset:n(1227)}},9597:t=>{t.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16}},7211:t=>{const e="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};t.exports=e},6931:t=>{const e=/^[0-9]+$/,n=(t,n)=>{const i=e.test(t),r=e.test(n);return i&&r&&(t=+t,n=+n),t===n?0:i&&!r?-1:r&&!i?1:t<n?-1:1};t.exports={compareIdentifiers:n,rcompareIdentifiers:(t,e)=>n(e,t)}},5494:t=>{const e=["includePrerelease","loose","rtl"];t.exports=t=>t?"object"!=typeof t?{loose:!0}:e.filter(e=>t[e]).reduce((t,e)=>(t[e]=!0,t),{}):{}},5716:(t,e,n)=>{const{MAX_SAFE_COMPONENT_LENGTH:i}=n(9597),r=n(7211),s=(e=t.exports={}).re=[],o=e.src=[],a=e.t={};let l=0;const u=(t,e,n)=>{const i=l++;r(i,e),a[t]=i,o[i]=e,s[i]=new RegExp(e,n?"g":void 0)};u("NUMERICIDENTIFIER","0|[1-9]\\d*"),u("NUMERICIDENTIFIERLOOSE","[0-9]+"),u("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),u("MAINVERSION",`(${o[a.NUMERICIDENTIFIER]})\\.(${o[a.NUMERICIDENTIFIER]})\\.(${o[a.NUMERICIDENTIFIER]})`),u("MAINVERSIONLOOSE",`(${o[a.NUMERICIDENTIFIERLOOSE]})\\.(${o[a.NUMERICIDENTIFIERLOOSE]})\\.(${o[a.NUMERICIDENTIFIERLOOSE]})`),u("PRERELEASEIDENTIFIER",`(?:${o[a.NUMERICIDENTIFIER]}|${o[a.NONNUMERICIDENTIFIER]})`),u("PRERELEASEIDENTIFIERLOOSE",`(?:${o[a.NUMERICIDENTIFIERLOOSE]}|${o[a.NONNUMERICIDENTIFIER]})`),u("PRERELEASE",`(?:-(${o[a.PRERELEASEIDENTIFIER]}(?:\\.${o[a.PRERELEASEIDENTIFIER]})*))`),u("PRERELEASELOOSE",`(?:-?(${o[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[a.PRERELEASEIDENTIFIERLOOSE]})*))`),u("BUILDIDENTIFIER","[0-9A-Za-z-]+"),u("BUILD",`(?:\\+(${o[a.BUILDIDENTIFIER]}(?:\\.${o[a.BUILDIDENTIFIER]})*))`),u("FULLPLAIN",`v?${o[a.MAINVERSION]}${o[a.PRERELEASE]}?${o[a.BUILD]}?`),u("FULL",`^${o[a.FULLPLAIN]}$`),u("LOOSEPLAIN",`[v=\\s]*${o[a.MAINVERSIONLOOSE]}${o[a.PRERELEASELOOSE]}?${o[a.BUILD]}?`),u("LOOSE",`^${o[a.LOOSEPLAIN]}$`),u("GTLT","((?:<|>)?=?)"),u("XRANGEIDENTIFIERLOOSE",`${o[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),u("XRANGEIDENTIFIER",`${o[a.NUMERICIDENTIFIER]}|x|X|\\*`),u("XRANGEPLAIN",`[v=\\s]*(${o[a.XRANGEIDENTIFIER]})(?:\\.(${o[a.XRANGEIDENTIFIER]})(?:\\.(${o[a.XRANGEIDENTIFIER]})(?:${o[a.PRERELEASE]})?${o[a.BUILD]}?)?)?`),u("XRANGEPLAINLOOSE",`[v=\\s]*(${o[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[a.XRANGEIDENTIFIERLOOSE]})(?:${o[a.PRERELEASELOOSE]})?${o[a.BUILD]}?)?)?`),u("XRANGE",`^${o[a.GTLT]}\\s*${o[a.XRANGEPLAIN]}$`),u("XRANGELOOSE",`^${o[a.GTLT]}\\s*${o[a.XRANGEPLAINLOOSE]}$`),u("COERCE",`(^|[^\\d])(\\d{1,${i}})(?:\\.(\\d{1,${i}}))?(?:\\.(\\d{1,${i}}))?(?:$|[^\\d])`),u("COERCERTL",o[a.COERCE],!0),u("LONETILDE","(?:~>?)"),u("TILDETRIM",`(\\s*)${o[a.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",u("TILDE",`^${o[a.LONETILDE]}${o[a.XRANGEPLAIN]}$`),u("TILDELOOSE",`^${o[a.LONETILDE]}${o[a.XRANGEPLAINLOOSE]}$`),u("LONECARET","(?:\\^)"),u("CARETTRIM",`(\\s*)${o[a.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",u("CARET",`^${o[a.LONECARET]}${o[a.XRANGEPLAIN]}$`),u("CARETLOOSE",`^${o[a.LONECARET]}${o[a.XRANGEPLAINLOOSE]}$`),u("COMPARATORLOOSE",`^${o[a.GTLT]}\\s*(${o[a.LOOSEPLAIN]})$|^$`),u("COMPARATOR",`^${o[a.GTLT]}\\s*(${o[a.FULLPLAIN]})$|^$`),u("COMPARATORTRIM",`(\\s*)${o[a.GTLT]}\\s*(${o[a.LOOSEPLAIN]}|${o[a.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",u("HYPHENRANGE",`^\\s*(${o[a.XRANGEPLAIN]})\\s+-\\s+(${o[a.XRANGEPLAIN]})\\s*$`),u("HYPHENRANGELOOSE",`^\\s*(${o[a.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[a.XRANGEPLAINLOOSE]})\\s*$`),u("STAR","(<|>)?=?\\s*\\*"),u("GTE0","^\\s*>=\\s*0.0.0\\s*$"),u("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},5301:(t,e,n)=>{const i=n(8219);t.exports=(t,e,n)=>i(t,e,">",n)},7613:(t,e,n)=>{const i=n(4573);t.exports=(t,e,n)=>(t=new i(t,n),e=new i(e,n),t.intersects(e))},9917:(t,e,n)=>{const i=n(8219);t.exports=(t,e,n)=>i(t,e,"<",n)},2971:(t,e,n)=>{const i=n(2388),r=n(4573);t.exports=(t,e,n)=>{let s=null,o=null,a=null;try{a=new r(e,n)}catch(l){return null}return t.forEach(t=>{a.test(t)&&(s&&-1!==o.compare(t)||(s=t,o=new i(s,n)))}),s}},378:(t,e,n)=>{const i=n(2388),r=n(4573);t.exports=(t,e,n)=>{let s=null,o=null,a=null;try{a=new r(e,n)}catch(l){return null}return t.forEach(t=>{a.test(t)&&(s&&1!==o.compare(t)||(s=t,o=new i(s,n)))}),s}},1232:(t,e,n)=>{const i=n(2388),r=n(4573),s=n(9670);t.exports=(t,e)=>{t=new r(t,e);let n=new i("0.0.0");if(t.test(n))return n;if(n=new i("0.0.0-0"),t.test(n))return n;n=null;for(let r=0;r<t.set.length;++r){let e=null;t.set[r].forEach(t=>{const n=new i(t.semver.version);switch(t.operator){case">":0===n.prerelease.length?n.patch++:n.prerelease.push(0),n.raw=n.format();case"":case">=":e&&!s(n,e)||(e=n);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${t.operator}`)}}),!e||n&&!s(n,e)||(n=e)}return n&&t.test(n)?n:null}},8219:(t,e,n)=>{const i=n(2388),r=n(2405),{ANY:s}=r,o=n(4573),a=n(8113),l=n(9670),u=n(9117),c=n(312),h=n(7988);t.exports=(t,e,n,d)=>{let f,p,m,g,y;switch(t=new i(t,d),e=new o(e,d),n){case">":f=l,p=c,m=u,g=">",y=">=";break;case"<":f=u,p=h,m=l,g="<",y="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(a(t,e,d))return!1;for(let i=0;i<e.set.length;++i){let n=null,o=null;if(e.set[i].forEach(t=>{t.semver===s&&(t=new r(">=0.0.0")),n=n||t,o=o||t,f(t.semver,n.semver,d)?n=t:m(t.semver,o.semver,d)&&(o=t)}),n.operator===g||n.operator===y)return!1;if((!o.operator||o.operator===g)&&p(t,o.semver))return!1;if(o.operator===y&&m(t,o.semver))return!1}return!0}},7810:(t,e,n)=>{const i=n(8113),r=n(648);t.exports=(t,e,n)=>{const s=[];let o=null,a=null;const l=t.sort((t,e)=>r(t,e,n));for(const r of l)i(r,e,n)?(a=r,o||(o=r)):(a&&s.push([o,a]),a=null,o=null);o&&s.push([o,null]);const u=[];for(const[i,r]of s)u.push(i===r?i:r||i!==l[0]?r?i===l[0]?`<=${r}`:`${i} - ${r}`:`>=${i}`:"*");const c=u.join(" || "),h="string"==typeof e.raw?e.raw:String(e);return c.length<h.length?c:e}},1227:(t,e,n)=>{const i=n(4573),r=n(2405),{ANY:s}=r,o=n(8113),a=n(648),l=(t,e,n)=>{if(t===e)return!0;if(1===t.length&&t[0].semver===s){if(1===e.length&&e[0].semver===s)return!0;t=n.includePrerelease?[new r(">=0.0.0-0")]:[new r(">=0.0.0")]}if(1===e.length&&e[0].semver===s){if(n.includePrerelease)return!0;e=[new r(">=0.0.0")]}const i=new Set;let l,h,d,f,p,m,g;for(const r of t)">"===r.operator||">="===r.operator?l=u(l,r,n):"<"===r.operator||"<="===r.operator?h=c(h,r,n):i.add(r.semver);if(i.size>1)return null;if(l&&h){if(d=a(l.semver,h.semver,n),d>0)return null;if(0===d&&(">="!==l.operator||"<="!==h.operator))return null}for(const r of i){if(l&&!o(r,String(l),n))return null;if(h&&!o(r,String(h),n))return null;for(const t of e)if(!o(r,String(t),n))return!1;return!0}let y=!(!h||n.includePrerelease||!h.semver.prerelease.length)&&h.semver,v=!(!l||n.includePrerelease||!l.semver.prerelease.length)&&l.semver;y&&1===y.prerelease.length&&"<"===h.operator&&0===y.prerelease[0]&&(y=!1);for(const r of e){if(g=g||">"===r.operator||">="===r.operator,m=m||"<"===r.operator||"<="===r.operator,l)if(v&&r.semver.prerelease&&r.semver.prerelease.length&&r.semver.major===v.major&&r.semver.minor===v.minor&&r.semver.patch===v.patch&&(v=!1),">"===r.operator||">="===r.operator){if(f=u(l,r,n),f===r&&f!==l)return!1}else if(">="===l.operator&&!o(l.semver,String(r),n))return!1;if(h)if(y&&r.semver.prerelease&&r.semver.prerelease.length&&r.semver.major===y.major&&r.semver.minor===y.minor&&r.semver.patch===y.patch&&(y=!1),"<"===r.operator||"<="===r.operator){if(p=c(h,r,n),p===r&&p!==h)return!1}else if("<="===h.operator&&!o(h.semver,String(r),n))return!1;if(!r.operator&&(h||l)&&0!==d)return!1}return!(l&&m&&!h&&0!==d||h&&g&&!l&&0!==d||v||y)},u=(t,e,n)=>{if(!t)return e;const i=a(t.semver,e.semver,n);return i>0?t:i<0||">"===e.operator&&">="===t.operator?e:t},c=(t,e,n)=>{if(!t)return e;const i=a(t.semver,e.semver,n);return i<0?t:i>0||"<"===e.operator&&"<="===t.operator?e:t};t.exports=(t,e,n={})=>{if(t===e)return!0;t=new i(t,n),e=new i(e,n);let r=!1;t:for(const i of t.set){for(const t of e.set){const e=l(i,t,n);if(r=r||null!==e,e)continue t}if(r)return!1}return!0}},4718:(t,e,n)=>{const i=n(4573);t.exports=(t,e)=>new i(t,e).set.map(t=>t.map(t=>t.value).join(" ").trim().split(" "))},9499:(t,e,n)=>{const i=n(4573);t.exports=(t,e)=>{try{return new i(t,e).range||"*"}catch(n){return null}}},4141:function(t,e,n){!function(t,e,n){"use strict";Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function t(){var e=isNaN(arguments[0])?1:Number(arguments[0]);return e?Array.prototype.reduce.call(this,function(n,i){return Array.isArray(i)?n.push.apply(n,t.call(i,e-1)):n.push(i),n},[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(t){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var i,r=(function(t){var e=function(){function t(t,e){return null!=e&&t instanceof e}var e,n,i;try{e=Map}catch(a){e=function(){}}try{n=Set}catch(a){n=function(){}}try{i=Promise}catch(a){i=function(){}}function r(s,a,l,u,c){"object"==typeof a&&(l=a.depth,u=a.prototype,c=a.includeNonEnumerable,a=a.circular);var h=[],d=[],f="undefined"!=typeof Buffer;return void 0===a&&(a=!0),void 0===l&&(l=1/0),function s(l,p){if(null===l)return null;if(0===p)return l;var m,g;if("object"!=typeof l)return l;if(t(l,e))m=new e;else if(t(l,n))m=new n;else if(t(l,i))m=new i(function(t,e){l.then(function(e){t(s(e,p-1))},function(t){e(s(t,p-1))})});else if(r.__isArray(l))m=[];else if(r.__isRegExp(l))m=new RegExp(l.source,o(l)),l.lastIndex&&(m.lastIndex=l.lastIndex);else if(r.__isDate(l))m=new Date(l.getTime());else{if(f&&Buffer.isBuffer(l))return m=Buffer.allocUnsafe?Buffer.allocUnsafe(l.length):new Buffer(l.length),l.copy(m),m;t(l,Error)?m=Object.create(l):void 0===u?(g=Object.getPrototypeOf(l),m=Object.create(g)):(m=Object.create(u),g=u)}if(a){var y=h.indexOf(l);if(-1!=y)return d[y];h.push(l),d.push(m)}for(var v in t(l,e)&&l.forEach(function(t,e){var n=s(e,p-1),i=s(t,p-1);m.set(n,i)}),t(l,n)&&l.forEach(function(t){var e=s(t,p-1);m.add(e)}),l){var _;g&&(_=Object.getOwnPropertyDescriptor(g,v)),_&&null==_.set||(m[v]=s(l[v],p-1))}if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(l);for(v=0;v<b.length;v++){var x=b[v];(!(C=Object.getOwnPropertyDescriptor(l,x))||C.enumerable||c)&&(m[x]=s(l[x],p-1),C.enumerable||Object.defineProperty(m,x,{enumerable:!1}))}}if(c){var w=Object.getOwnPropertyNames(l);for(v=0;v<w.length;v++){var C,A=w[v];(C=Object.getOwnPropertyDescriptor(l,A))&&C.enumerable||(m[A]=s(l[A],p-1),Object.defineProperty(m,A,{enumerable:!1}))}}return m}(s,l)}function s(t){return Object.prototype.toString.call(t)}function o(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return r.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},r.__objToStr=s,r.__isDate=function(t){return"object"==typeof t&&"[object Date]"===s(t)},r.__isArray=function(t){return"object"==typeof t&&"[object Array]"===s(t)},r.__isRegExp=function(t){return"object"==typeof t&&"[object RegExp]"===s(t)},r.__getRegExpFlags=o,r}();t.exports&&(t.exports=e)}(i={exports:{}}),i.exports),s=function(t,e){e||(e={}),"function"==typeof e&&(e={cmp:e});var n,i="boolean"==typeof e.cycles&&e.cycles,r=e.cmp&&(n=e.cmp,function(t){return function(e,i){return n({key:e,value:t[e]},{key:i,value:t[i]})}}),s=[];return function t(e){if(e&&e.toJSON&&"function"==typeof e.toJSON&&(e=e.toJSON()),void 0!==e){if("number"==typeof e)return isFinite(e)?""+e:"null";if("object"!=typeof e)return JSON.stringify(e);var n,o;if(Array.isArray(e)){for(o="[",n=0;n<e.length;n++)n&&(o+=","),o+=t(e[n])||"null";return o+"]"}if(null===e)return"null";if(-1!==s.indexOf(e)){if(i)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var a=s.push(e)-1,l=Object.keys(e).sort(r&&r(e));for(o="",n=0;n<l.length;n++){var u=l[n],c=t(e[u]);c&&(o&&(o+=","),o+=JSON.stringify(u)+":"+c)}return s.splice(a,1),"{"+o+"}"}}(t)};function o(t){return!!t.or}function a(t){return!!t.and}function l(t){return!!t.not}function u(t,e){if(l(t))u(t.not,e);else if(a(t))for(const n of t.and)u(n,e);else if(o(t))for(const n of t.or)u(n,e);else e(t)}function c(t,e){return l(t)?{not:c(t.not,e)}:a(t)?{and:t.and.map(t=>c(t,e))}:o(t)?{or:t.or.map(t=>c(t,e))}:e(t)}const h=function t(e,n){if(e===n)return!0;if(e&&n&&"object"==typeof e&&"object"==typeof n){if(e.constructor!==n.constructor)return!1;var i,r,s;if(Array.isArray(e)){if((i=e.length)!=n.length)return!1;for(r=i;0!=r--;)if(!t(e[r],n[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if((i=(s=Object.keys(e)).length)!==Object.keys(n).length)return!1;for(r=i;0!=r--;)if(!Object.prototype.hasOwnProperty.call(n,s[r]))return!1;for(r=i;0!=r--;){var o=s[r];if(!t(e[o],n[o]))return!1}return!0}return e!=e&&n!=n},d=r;function f(t,n){const i={};for(const r of n)e.hasOwnProperty(t,r)&&(i[r]=t[r]);return i}function p(t,e){const n={...t};for(const i of e)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(t=>s(t)).join(",")})`};const m=s;function g(t){if(e.isNumber(t))return t;const n=e.isString(t)?t:s(t);if(n.length<250)return n;let i=0;for(let e=0;e<n.length;e++)i=(i<<5)-i+n.charCodeAt(e),i&=i;return i}function y(t){return!1===t||null===t}function v(t,e){return t.includes(e)}function _(t,e){let n=0;for(const[i,r]of t.entries())if(e(r,i,n++))return!0;return!1}function b(t,e){let n=0;for(const[i,r]of t.entries())if(!e(r,i,n++))return!1;return!0}function x(t,...e){for(const n of e)w(t,null!=n?n:{});return t}function w(t,n){for(const i of F(n))e.writeConfig(t,i,n[i],!0)}function C(t,e){const n=[],i={};let r;for(const s of t)r=e(s),r in i||(i[r]=1,n.push(s));return n}function A(t,e){if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0}function E(t,e){for(const n of t)if(e.has(n))return!0;return!1}function k(t){const n=new Set;for(const i of t){const t=e.splitAccessPath(i).map((t,e)=>0===e?t:`[${t}]`),r=t.map((e,n)=>t.slice(0,n+1).join(""));for(const e of r)n.add(e)}return n}function D(t,e){return void 0===t||void 0===e||E(k(t),k(e))}function S(t){return 0===F(t).length}const F=Object.keys,O=Object.values,M=Object.entries;function T(t){return!0===t||!1===t}function P(t){const e=t.replace(/\W/g,"_");return(t.match(/^\d+/)?"_":"")+e}function R(t,e){return l(t)?`!(${R(t.not,e)})`:a(t)?`(${t.and.map(t=>R(t,e)).join(") && (")})`:o(t)?`(${t.or.map(t=>R(t,e)).join(") || (")})`:e(t)}function B(t,e){if(0===e.length)return!0;const n=e.shift();return n in t&&B(t[n],e)&&delete t[n],S(t)}function I(t){return t.charAt(0).toUpperCase()+t.substr(1)}function N(t,n="datum"){const i=e.splitAccessPath(t),r=[];for(let s=1;s<=i.length;s++){const t=`[${i.slice(0,s).map(e.stringValue).join("][")}]`;r.push(`${n}${t}`)}return r.join(" && ")}function L(t,n="datum"){return`${n}[${e.stringValue(e.splitAccessPath(t).join("."))}]`}function $(t){return t.replace(/(\[|\]|\.|'|")/g,"\\$1")}function z(t){return`${e.splitAccessPath(t).map($).join("\\.")}`}function j(t,e,n){return t.replace(new RegExp(e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function U(t){return`${e.splitAccessPath(t).join(".")}`}function V(t){return t?e.splitAccessPath(t).length:0}function q(...t){for(const e of t)if(void 0!==e)return e}let H=42;function W(t){const e=++H;return t?String(t)+e:e}function G(t){return X(t)?t:`__${t}`}function X(t){return t.startsWith("__")}function Y(t){if(void 0!==t)return(t%360+360)%360}function K(t){return!!e.isNumber(t)||!isNaN(t)&&!isNaN(parseFloat(t))}const Z="row",Q="column",J="facet",tt="x",et="y",nt="x2",it="y2",rt="radius",st="radius2",ot="theta",at="theta2",lt="latitude",ut="longitude",ct="latitude2",ht="longitude2",dt="color",ft="fill",pt="stroke",mt="shape",gt="size",yt="angle",vt="opacity",_t="fillOpacity",bt="strokeOpacity",xt="strokeWidth",wt="strokeDash",Ct="text",At="order",Et="detail",kt="key",Dt="tooltip",St="href",Ft="url",Ot="description",Mt={theta:1,theta2:1,radius:1,radius2:1};function Tt(t){return t in Mt}const Pt={longitude:1,longitude2:1,latitude:1,latitude2:1},Rt=F(Pt),Bt={x:1,y:1,x2:1,y2:1,...Mt,...Pt,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function It(t){return t===dt||t===ft||t===pt}const Nt={row:1,column:1,facet:1},Lt=F(Nt),$t={...Bt,...Nt},zt=F($t),{order:jt,detail:Ut,tooltip:Vt,...qt}=$t,{row:Ht,column:Wt,facet:Gt,...Xt}=qt;function Yt(t){return!!$t[t]}const Kt=[nt,it,ct,ht,at,st];function Zt(t){return Qt(t)!==t}function Qt(t){switch(t){case nt:return tt;case it:return et;case ct:return lt;case ht:return ut;case at:return ot;case st:return rt}return t}function Jt(t){if(Tt(t))switch(t){case ot:return"startAngle";case at:return"endAngle";case rt:return"outerRadius";case st:return"innerRadius"}return t}function te(t){switch(t){case tt:return nt;case et:return it;case lt:return ct;case ut:return ht;case ot:return at;case rt:return st}}function ee(t){switch(t){case tt:case nt:return"width";case et:case it:return"height"}}const{x:ne,y:ie,x2:re,y2:se,latitude:oe,longitude:ae,latitude2:le,longitude2:ue,theta:ce,theta2:he,radius:de,radius2:fe,...pe}=Bt,me=F(pe),ge={x:1,y:1},ye=F(ge);function ve(t){return t in ge}const _e={theta:1,radius:1},be=F(_e);function xe(t){return"width"===t?tt:et}const{text:we,tooltip:Ce,href:Ae,url:Ee,description:ke,detail:De,key:Se,order:Fe,...Oe}=pe,Me=F(Oe),Te={...ge,..._e,...Oe},Pe=F(Te);function Re(t){return!!Te[t]}const Be={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:Ie,...Ne}=Be;function Le(t){switch(t){case tt:case et:case ot:case rt:case gt:case yt:case xt:case vt:case _t:case bt:case nt:case it:case at:case st:return;case J:case Z:case Q:case mt:case wt:case Ct:case Dt:case St:case Ft:case Ot:return"discrete";case dt:case ft:case pt:return"flexible";case lt:case ut:case ct:case ht:case Et:case kt:case At:return}}const $e={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},ze={count:1,min:1,max:1};function je(t){return!!t&&!!t.argmin}function Ue(t){return!!t&&!!t.argmax}function Ve(t){return e.isString(t)&&!!$e[t]}const qe=["count","valid","missing","distinct"];function He(t){return e.isString(t)&&v(qe,t)}const We=["count","sum","distinct","valid","missing"],Ge=e.toSet(["mean","average","median","q1","q3","min","max"]);function Xe(t){return e.isBoolean(t)&&(t=Ws(t,void 0)),"bin"+F(t).map(e=>Qe(t[e])?P(`_${e}_${M(t[e])}`):P(`_${e}_${t[e]}`)).join("")}function Ye(t){return!0===t||Ze(t)&&!t.binned}function Ke(t){return"binned"===t||Ze(t)&&!0===t.binned}function Ze(t){return e.isObject(t)}function Qe(t){return null==t?void 0:t.param}function Je(t){switch(t){case Z:case Q:case gt:case dt:case ft:case pt:case xt:case vt:case _t:case bt:case mt:return 6;case wt:return 4;default:return 10}}function tn(t){return t&&!!t.expr}function en(t){const e=F(t||{}),n={};for(const i of e)n[i]=dn(t[i]);return n}function nn(t){const{anchor:e,frame:n,offset:i,orient:r,color:s,subtitleColor:o,subtitleFont:a,subtitleFontSize:l,subtitleFontStyle:u,subtitleFontWeight:c,subtitleLineHeight:h,subtitlePadding:d,...p}=t,m={...p,...s?{fill:s}:{}},g={...e?{anchor:e}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{}},y={...o?{subtitleColor:o}:{},...a?{subtitleFont:a}:{},...l?{subtitleFontSize:l}:{},...u?{subtitleFontStyle:u}:{},...c?{subtitleFontWeight:c}:{},...h?{subtitleLineHeight:h}:{},...d?{subtitlePadding:d}:{}};return{titleMarkConfig:m,subtitleMarkConfig:f(m,["align","baseline","dx","dy","limit"]),nonMark:g,subtitle:y}}function rn(t){return e.isString(t)||e.isArray(t)&&e.isString(t[0])}function sn(t){return t&&!!t.signal}function on(t){return!!t.step}function an(t){return!e.isArray(t)&&"field"in t&&"data"in t}const ln=F({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),un={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},cn=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function hn(t){const n=e.isArray(t.condition)?t.condition.map(fn):fn(t.condition);return{...dn(t),condition:n}}function dn(t){if(tn(t)){const{expr:e,...n}=t;return{signal:e,...n}}return t}function fn(t){if(tn(t)){const{expr:e,...n}=t;return{signal:e,...n}}return t}function pn(t){if(tn(t)){const{expr:e,...n}=t;return{signal:e,...n}}return sn(t)?t:void 0!==t?{value:t}:void 0}function mn(t){return sn(t)?t.signal:e.stringValue(t.value)}function gn(t){return sn(t)?t.signal:null==t?null:e.stringValue(t)}function yn(t,e,n){for(const i of n){const n=bn(i,e.markDef,e.config);void 0!==n&&(t[i]=pn(n))}return t}function vn(t){var e;return[].concat(t.type,null!==(e=t.style)&&void 0!==e?e:[])}function _n(t,e,n,i={}){const{vgChannel:r,ignoreVgConfig:s}=i;return r&&void 0!==e[r]?e[r]:void 0!==e[t]?e[t]:!s||r&&r!==t?bn(t,e,n,i):void 0}function bn(t,e,n,{vgChannel:i}={}){return q(i?xn(t,e,n.style):void 0,xn(t,e,n.style),i?n[e.type][i]:void 0,n[e.type][t],i?n.mark[i]:n.mark[t])}function xn(t,e,n){return wn(t,vn(e),n)}function wn(t,n,i){let r;n=e.array(n);for(const e of n){const n=i[e];n&&void 0!==n[t]&&(r=n[t])}return r}function Cn(t,n){return e.array(t).reduce((t,e)=>{var i;return t.field.push(Ts(e,n)),t.order.push(null!==(i=e.sort)&&void 0!==i?i:"ascending"),t},{field:[],order:[]})}function An(t,e){const n=[...t];return e.forEach(t=>{for(const e of n)if(h(e,t))return;n.push(t)}),n}function En(t,n){return h(t,n)||!n?t:t?[...e.array(t),...e.array(n)].join(", "):n}function kn(t,e){const n=t.value,i=e.value;if(null==n||null===i)return{explicit:t.explicit,value:null};if((rn(n)||sn(n))&&(rn(i)||sn(i)))return{explicit:t.explicit,value:En(n,i)};if(rn(n)||sn(n))return{explicit:t.explicit,value:n};if(rn(i)||sn(i))return{explicit:t.explicit,value:i};if(!(rn(n)||sn(n)||rn(i)||sn(i)))return{explicit:t.explicit,value:An(n,i)};throw new Error("It should never reach here")}function Dn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sn(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,Fn(t,e,"set"),n),n}function Fn(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function On(t){return`Invalid specification ${m(t)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}function Mn(t){return("width"==t?"Width":"Height")+' "container" only works for single views and layered views.'}function Tn(t){return`${"width"==t?"Width":"Height"} "container" only works well with autosize "fit" or "fit-${"width"==t?"x":"y"}".`}function Pn(t){return t?`Dropping "fit-${t}" because spec has discrete ${ee(t)}.`:'Dropping "fit" because spec has discrete size.'}function Rn(t){return`Unknown field for ${t}. Cannot calculate view size.`}function Bn(t){return`Cannot project a selection on encoding channel "${t}", which has no field.`}function In(t,e){return`Cannot project a selection on encoding channel "${t}" as it uses an aggregate function ("${e}").`}function Nn(t){return`Selection not supported for ${t} yet.`}function Ln(t){return`The "columns" property cannot be used when "${t}" has nested row/column.`}function $n(t,e,n){return`An ancestor parsed field "${t}" as ${n} but a child wants to parse the field as ${e}.`}function zn(t){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${t} are dropped.`}function jn(t){return`Invalid field type "${t}".`}function Un(t,e){const{fill:n,stroke:i}=e;return`Dropping color ${t} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function Vn(t,e){return`Dropping ${m(t)} from channel "${e}" since it does not contain any data field, datum, value, or signal.`}function qn(t,e,n){return`${t} dropped as it is incompatible with "${e}"${n?` when ${n}`:""}.`}function Hn(t){return`${t} encoding should be discrete (ordinal / nominal / binned).`}function Wn(t){return`${t} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Gn(t,e){return`Using discrete channel "${t}" to encode "${e}" field can be misleading as it does not encode ${"ordinal"===e?"order":"magnitude"}.`}function Xn(t){return`Using unaggregated domain with raw field has no effect (${m(t)}).`}function Yn(t){return`Unaggregated domain not applicable for "${t}" since it produces values outside the origin domain of the source data.`}function Kn(t){return`Unaggregated domain is currently unsupported for log scale (${m(t)}).`}function Zn(t,e,n){return`${n}-scale's "${e}" is dropped as it does not work with ${t} scale.`}function Qn(t){return`The step for "${t}" is dropped because the ${"width"===t?"x":"y"} is continuous.`}const Jn="Domains that should be unioned has conflicting sort properties. Sort will be set to true.";function ti(t,e){return`Invalid ${t}: ${m(e)}.`}function ei(t){return`1D error band does not support ${t}.`}function ni(t){return`Channel ${t} is required for "binned" bin.`}const ii=e.logger(e.Warn);let ri=ii;function si(...t){ri.warn(...t)}function oi(t){if(t&&e.isObject(t))for(const e of pi)if(e in t)return!0;return!1}const ai=["january","february","march","april","may","june","july","august","september","october","november","december"],li=ai.map(t=>t.substr(0,3)),ui=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],ci=ui.map(t=>t.substr(0,3));function hi(t,n){const i=[];if(n&&void 0!==t.day&&F(t).length>1&&(si(function(t){return`Dropping day from datetime ${m(t)} as day cannot be combined with other units.`}(t)),delete(t=d(t)).day),i.push(void 0!==t.year?t.year:2012),void 0!==t.month){const r=n?function(t){if(K(t)&&(t=+t),e.isNumber(t))return t-1;{const e=t.toLowerCase(),n=ai.indexOf(e);if(-1!==n)return n;const i=e.substr(0,3),r=li.indexOf(i);if(-1!==r)return r;throw new Error(ti("month",t))}}(t.month):t.month;i.push(r)}else if(void 0!==t.quarter){const r=n?function(t){if(K(t)&&(t=+t),e.isNumber(t))return t>4&&si(ti("quarter",t)),t-1;throw new Error(ti("quarter",t))}(t.quarter):t.quarter;i.push(e.isNumber(r)?3*r:`${r}*3`)}else i.push(0);if(void 0!==t.date)i.push(t.date);else if(void 0!==t.day){const r=n?function(t){if(K(t)&&(t=+t),e.isNumber(t))return t%7;{const e=t.toLowerCase(),n=ui.indexOf(e);if(-1!==n)return n;const i=e.substr(0,3),r=ci.indexOf(i);if(-1!==r)return r;throw new Error(ti("day",t))}}(t.day):t.day;i.push(e.isNumber(r)?r+1:`${r}+1`)}else i.push(1);for(const e of["hours","minutes","seconds","milliseconds"]){const n=t[e];i.push(void 0===n?0:n)}return i}function di(t){const e=hi(t,!0).join(", ");return t.utc?`utc(${e})`:`datetime(${e})`}const fi={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},pi=F(fi);function mi(t){return t.startsWith("utc")}const gi={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function yi(t){return pi.filter(e=>vi(t,e))}function vi(t,e){const n=t.indexOf(e);return!(n<0||n>0&&"seconds"===e&&"i"===t.charAt(n-1)||t.length>n+3&&"day"===e&&"o"===t.charAt(n+3)||n>0&&"year"===e&&"f"===t.charAt(n-1))}function _i(t){if(!t)return;const e=yi(t);return`timeUnitSpecifier(${m(e)}, ${m(gi)})`}function bi(t){if(!t)return;let n;return e.isString(t)?n={unit:t}:e.isObject(t)&&(n={...t,...t.unit?{unit:t.unit}:{}}),mi(n.unit)&&(n.utc=!0,n.unit=n.unit.substr(3)),n}function xi(t){return t&&!!t.field&&void 0!==t.equal}function wi(t){return t&&!!t.field&&void 0!==t.lt}function Ci(t){return t&&!!t.field&&void 0!==t.lte}function Ai(t){return t&&!!t.field&&void 0!==t.gt}function Ei(t){return t&&!!t.field&&void 0!==t.gte}function ki(t){if(t&&t.field){if(e.isArray(t.range)&&2===t.range.length)return!0;if(sn(t.range))return!0}return!1}function Di(t){return t&&!!t.field&&(e.isArray(t.oneOf)||e.isArray(t.in))}function Si(t){return Di(t)||xi(t)||ki(t)||wi(t)||Ai(t)||Ci(t)||Ei(t)}function Fi(t,e){return Ys(t,{timeUnit:e,wrapTime:!0})}function Oi(t,e=!0){var n;const{field:i}=t,r=null===(n=bi(t.timeUnit))||void 0===n?void 0:n.unit,s=r?`time(${function(t,e,{end:n}={end:!1}){const i=N(e),r=mi(t)?"utc":"";let s;const o={};for(const l of pi)vi(t,l)&&(o[l]="quarter"===(a=l)?`(${r}quarter(${i})-1)`:`${r}${a}(${i})`,s=l);var a;return n&&(o[s]+="+1"),function(t){const e=hi(t,!1).join(", ");return t.utc?`utc(${e})`:`datetime(${e})`}(o)}(r,i)})`:Ts(t,{expr:"datum"});if(xi(t))return`${s}===${Fi(t.equal,r)}`;if(wi(t))return`${s}<${Fi(t.lt,r)}`;if(Ai(t))return`${s}>${Fi(t.gt,r)}`;if(Ci(t))return`${s}<=${Fi(t.lte,r)}`;if(Ei(t))return`${s}>=${Fi(t.gte,r)}`;if(Di(t))return`indexof([${function(t,e){return t.map(t=>Fi(t,e))}(t.oneOf,r).join(",")}], ${s}) !== -1`;if(function(t){return t&&!!t.field&&void 0!==t.valid}(t))return Mi(s,t.valid);if(ki(t)){const{range:n}=t,i=sn(n)?{signal:`${n.signal}[0]`}:n[0],o=sn(n)?{signal:`${n.signal}[1]`}:n[1];if(null!==i&&null!==o&&e)return"inrange("+s+", ["+Fi(i,r)+", "+Fi(o,r)+"])";const a=[];return null!==i&&a.push(`${s} >= ${Fi(i,r)}`),null!==o&&a.push(`${s} <= ${Fi(o,r)}`),a.length>0?a.join(" && "):"true"}throw new Error(`Invalid field predicate: ${m(t)}`)}function Mi(t,e=!0){return e?`isValid(${t}) && isFinite(+${t})`:`!isValid(${t}) || !isFinite(+${t})`}function Ti(t){var e;return Si(t)&&t.timeUnit?{...t,timeUnit:null===(e=bi(t.timeUnit))||void 0===e?void 0:e.unit}:t}const Pi="quantitative",Ri="ordinal",Bi="temporal",Ii="nominal",Ni="geojson",Li="linear",$i="time",zi="utc",ji={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function Ui(t,e){const n=ji[t],i=ji[e];return n===i||"ordinal-position"===n&&"time"===i||"ordinal-position"===i&&"time"===n}const Vi={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function qi(t){return Vi[t]}const Hi=["linear","log","pow","sqrt","symlog","time","utc"],Wi=e.toSet(Hi),Gi=e.toSet(["linear","log","pow","sqrt","symlog"]),Xi=e.toSet(["quantile","quantize","threshold"]),Yi=Hi.concat(["quantile","quantize","threshold","sequential","identity"]),Ki=e.toSet(Yi),Zi=e.toSet(["ordinal","bin-ordinal","point","band"]);function Qi(t){return t in Zi}function Ji(t){return t in Ki}function tr(t){return t in Wi}function er(t){return t in Xi}function nr(t){return null==t?void 0:t.param}const{type:ir,domain:rr,range:sr,rangeMax:or,rangeMin:ar,scheme:lr,...ur}={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},cr=F(ur);function hr(t,e){switch(e){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(t);case"bins":return!["point","band","identity","ordinal"].includes(t);case"round":return tr(t)||"band"===t||"point"===t;case"padding":case"rangeMin":case"rangeMax":return tr(t)||["point","band"].includes(t);case"paddingOuter":case"align":return["point","band"].includes(t);case"paddingInner":return"band"===t;case"domainMax":case"domainMid":case"domainMin":case"clamp":return tr(t);case"nice":return tr(t)||"quantize"===t||"threshold"===t;case"exponent":return"pow"===t;case"base":return"log"===t;case"constant":return"symlog"===t;case"zero":return Ji(t)&&!v(["log","time","utc","threshold","quantile"],t)}}function dr(t,e){switch(e){case"interpolate":case"scheme":case"domainMid":return It(t)?void 0:`Cannot use the scale property "${t}" with non-color channel.`;case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}const fr={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},pr=fr.arc,mr=fr.area,gr=fr.bar,yr=fr.image,vr=fr.line,_r=fr.point,br=fr.rect,xr=fr.rule,wr=fr.text,Cr=fr.tick,Ar=fr.trail,Er=fr.circle,kr=fr.square,Dr=fr.geoshape;function Sr(t){return["line","area","trail"].includes(t)}function Fr(t){return["rect","bar","image","arc"].includes(t)}const Or=F(fr);function Mr(t){return t.type}e.toSet(Or);const Tr=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit","fill","fillOpacity"],Pr=F({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1}),Rr=F({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1});function Br(t){return t&&null!=t.band}const Ir={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]};function Nr(t){const{channel:e,channelDef:n,markDef:i,scale:r,config:s}=t,o=Vr(t);return _s(n)&&!He(n.aggregate)&&r&&tr(r.get("type"))&&!1===r.get("zero")?Lr({fieldDef:n,channel:e,markDef:i,ref:o,config:s}):o}function Lr({fieldDef:t,channel:e,markDef:n,ref:i,config:r}){return Sr(n.type)||null===_n("invalid",n,r)?i:[$r(t,e),i]}function $r(t,e){return{test:zr(t,!0),..."y"===Qt(e)?{field:{group:"height"}}:{value:0}}}function zr(t,n=!0){return Mi(e.isString(t)?t:Ts(t,{expr:"datum"}),!n)}function jr(t,e,n,i){const r={};if(e&&(r.scale=e),xs(t)){const{datum:e}=t;oi(e)?r.signal=di(e):sn(e)?r.signal=e.signal:tn(e)?r.signal=e.expr:r.value=e}else r.field=Ts(t,n);if(i){const{offset:t,band:e}=i;t&&(r.offset=t),e&&(r.band=e)}return r}function Ur({scaleName:t,fieldOrDatumDef:e,fieldOrDatumDef2:n,offset:i,startSuffix:r,bandPosition:s=.5}){const o=0<s&&s<1?"datum":void 0,a=Ts(e,{expr:o,suffix:r}),l=void 0!==n?Ts(n,{expr:o}):Ts(e,{suffix:"end",expr:o}),u={};if(0===s||1===s)u.scale=t,u.field=0===s?a:l;else{const e=sn(s)?`${s.signal} * ${a} + (1-${s.signal}) * ${l}`:`${s} * ${a} + ${1-s} * ${l}`;u.signal=`scale("${t}", ${e})`}return i&&(u.offset=i),u}function Vr({channel:t,channelDef:n,channel2Def:i,markDef:r,config:s,scaleName:o,scale:a,stack:l,offset:u,defaultRef:c,bandPosition:h}){if(n){if(As(n)){var d,f;if(Es(n)){var p;null!==(p=h)&&void 0!==p||(h=fs({fieldDef:n,fieldDef2:i,markDef:r,config:s}));const{bin:e,timeUnit:a,type:c}=n;if(Ye(e)||h&&a&&c===Bi)return l&&l.impute?jr(n,o,{binSuffix:"mid"},{offset:u}):h?Ur({scaleName:o,fieldOrDatumDef:n,bandPosition:h,offset:u}):jr(n,o,Zs(n,t)?{binSuffix:"range"}:{},{offset:u});if(Ke(e)){if(_s(i))return Ur({scaleName:o,fieldOrDatumDef:n,fieldOrDatumDef2:i,bandPosition:h,offset:u});si(ni(t===tt?nt:it))}}const e=null==a?void 0:a.get("type");return jr(n,o,Qi(e)?{binSuffix:"range"}:{},{offset:u,band:"band"===e?null!==(d=null!==(f=h)&&void 0!==f?f:n.bandPosition)&&void 0!==d?d:.5:void 0})}if(ks(n)){const e=u?{offset:u}:{};return{...qr(t,n.value),...e}}}return e.isFunction(c)&&(c=c()),c?{...c,...u?{offset:u}:{}}:c}function qr(t,e){return v(["x","x2"],t)&&"width"===e?{field:{group:"width"}}:v(["y","y2"],t)&&"height"===e?{field:{group:"height"}}:pn(e)}function Hr(t){return t&&"number"!==t&&"time"!==t}function Wr(t,e,n){return`${t}(${e}${n?`, ${m(n)}`:""})`}function Gr({fieldOrDatumDef:t,format:n,formatType:i,expr:r,normalizeStack:s,config:o}){if(Hr(i))return Yr({fieldOrDatumDef:t,format:n,formatType:i,expr:r,config:o});const a=Xr(t,r,s);if(Xs(t)){var l,u;const i=function(t,n,i,r,s){return!n||i?`${s?"utc":"time"}Format(${t}, '${i=e.isString(i)?i:r}')`:function(t,e,n){if(!t)return;const i=_i(t);return`${n||mi(t)?"utc":"time"}Format(${e}, ${i})`}(n,t,s)}(a,_s(t)?null===(l=bi(t.timeUnit))||void 0===l?void 0:l.unit:void 0,n,o.timeFormat,Ds(t)&&(null===(u=t.scale)||void 0===u?void 0:u.type)===zi);return i?{signal:i}:void 0}return n=Qr(bs(t),n,o),_s(t)&&Ye(t.bin)?{signal:es(a,Ts(t,{expr:r,binSuffix:"end"}),n,i,o)}:n||"quantitative"===bs(t)?{signal:`${Jr(a,n)}`}:{signal:`isValid(${a}) ? ${a} : ""+${a}`}}function Xr(t,e,n){return _s(t)?n?`${Ts(t,{expr:e,suffix:"end"})}-${Ts(t,{expr:e,suffix:"start"})}`:Ts(t,{expr:e}):function(t){const{datum:e}=t;return oi(e)?di(e):`${m(e)}`}(t)}function Yr({fieldOrDatumDef:t,format:e,formatType:n,expr:i,normalizeStack:r,config:s,field:o}){var a;return null!==(a=o)&&void 0!==a||(o=Xr(t,i,r)),_s(t)&&Ye(t.bin)?{signal:es(o,Ts(t,{expr:i,binSuffix:"end"}),e,n,s)}:{signal:Wr(n,o,e)}}function Kr(t,e,n,i,r,s){var o;if(!Hr(i))return Xs(t)?function(t,e,n,i){return t||(e?{signal:_i(e)}:i?void 0:n.timeFormat)}(n,_s(t)?null===(o=bi(t.timeUnit))||void 0===o?void 0:o.unit:void 0,r,s):Qr(e,n,r)}function Zr(t,e,n){return t&&(sn(t)||"number"===t||"time"===t)?t:Xs(e)&&"time"!==n&&"utc"!==n?"time":void 0}function Qr(t,n,i){return e.isString(n)?n:t===Pi?i.numberFormat:void 0}function Jr(t,e){return`format(${t}, "${e||""}")`}function ts(t,n,i,r){var s;return Hr(i)?Wr(i,t,n):Jr(t,null!==(s=e.isString(n)?n:void 0)&&void 0!==s?s:r.numberFormat)}function es(t,e,n,i,r){const s=ts(t,n,i,r),o=ts(e,n,i,r);return`${Mi(t,!1)} ? "null" : ${s} + " \u2013 " + ${o}`}const ns="min",is={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function rs(t){return t in is}function ss(t){return!!t&&!!t.encoding}function os(t){return!(!t||"count"!==t.op&&!t.field)}function as(t){return!!t&&e.isArray(t)}function ls(t){return"row"in t||"column"in t}function us(t){return!!t&&"header"in t}function cs(t){return"facet"in t}function hs(t){const{field:e,timeUnit:n,bin:i,aggregate:r}=t;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:e}}function ds(t){return"sort"in t}function fs({fieldDef:t,fieldDef2:e,markDef:n,config:i}){if(As(t)&&void 0!==t.bandPosition)return t.bandPosition;if(_s(t)){const{timeUnit:r,bin:s}=t;if(r&&!e)return Fr(n.type)?0:bn("timeUnitBandPosition",n,i);if(Ye(s))return.5}}function ps({channel:t,fieldDef:e,fieldDef2:n,markDef:i,config:r,scaleType:s,useVlSizeChannel:o}){const a=ee(t),l=_n(o?"size":a,i,r,{vgChannel:a});if(void 0!==l)return l;if(_s(e)){const{timeUnit:t,bin:o}=e;if(t&&!n)return{band:bn("timeUnitBandSize",i,r)};if(Ye(o)&&!Qi(s))return{band:1}}var u,c,h;return Fr(i.type)?s?Qi(s)?(null===(c=r[i.type])||void 0===c?void 0:c.discreteBandSize)||{band:1}:null===(h=r[i.type])||void 0===h?void 0:h.continuousBandSize:null===(u=r[i.type])||void 0===u?void 0:u.discreteBandSize:void 0}function ms(t,e,n,i){return!!(Ye(t.bin)||t.timeUnit&&Es(t)&&"temporal"===t.type)&&void 0!==fs({fieldDef:t,fieldDef2:e,markDef:n,config:i})}function gs(t){return!!t&&"condition"in t}function ys(t){const n=t&&t.condition;return!!n&&!e.isArray(n)&&_s(n)}function vs(t){const n=t&&t.condition;return!!n&&!e.isArray(n)&&As(n)}function _s(t){return!(!t||!t.field&&"count"!==t.aggregate)}function bs(t){return t&&t.type}function xs(t){return!!t&&"datum"in t}function ws(t){return Es(t)&&!Ps(t)||Cs(t)}function Cs(t){return xs(t)&&e.isNumber(t.datum)}function As(t){return _s(t)||xs(t)}function Es(t){return!!t&&("field"in t||"count"===t.aggregate)&&"type"in t}function ks(t){return t&&"value"in t&&"value"in t}function Ds(t){return!!t&&("scale"in t||"sort"in t)}function Ss(t){return t&&("axis"in t||"stack"in t||"impute"in t)}function Fs(t){return!!t&&"legend"in t}function Os(t){return!!t&&("format"in t||"formatType"in t)}function Ms(t){return p(t,["legend","axis","header","scale"])}function Ts(t,e={}){let n=t.field;const i=e.prefix;let r=e.suffix,s="";if(function(t){return"count"===t.aggregate}(t))n=G("count");else{let i;if(!e.nofn)if(function(t){return"op"in t}(t))i=t.op;else{const{bin:u,aggregate:c,timeUnit:h}=t;var o,a;if(Ye(u))i=Xe(u),r=(null!==(o=e.binSuffix)&&void 0!==o?o:"")+(null!==(a=e.suffix)&&void 0!==a?a:"");else if(c)Ue(c)?(s=`["${n}"]`,n=`argmax_${c.argmax}`):je(c)?(s=`["${n}"]`,n=`argmin_${c.argmin}`):i=String(c);else if(h){var l;i=function(t){const{utc:e,...n}=bi(t);return n.unit?(e?"utc":"")+F(n).map(t=>P(`${"unit"===t?"":`_${t}_`}${n[t]}`)).join(""):(e?"utc":"")+"timeunit"+F(n).map(t=>P(`_${t}_${n[t]}`)).join("")}(h),r=(!["range","mid"].includes(e.binSuffix)&&e.binSuffix||"")+(null!==(l=e.suffix)&&void 0!==l?l:"")}}i&&(n=n?`${i}_${n}`:i)}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),e.forAs?U(n):e.expr?L(n,e.expr)+s:z(n)+s}function Ps(t){switch(t.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return _s(t)&&!!t.bin;case"temporal":return!1}throw new Error(jn(t.type))}const Rs=(t,e)=>{switch(e.fieldTitle){case"plain":return t.field;case"functional":return function(t){const{aggregate:e,bin:n,timeUnit:i,field:r}=t;if(Ue(e))return`${r} for argmax(${e.argmax})`;if(je(e))return`${r} for argmin(${e.argmin})`;const s=bi(i),o=e||(null==s?void 0:s.unit)||(null==s?void 0:s.maxbins)&&"timeunit"||Ye(n)&&"bin";return o?`${o.toUpperCase()}(${r})`:r}(t);default:return function(t,e){const{field:n,bin:i,timeUnit:r,aggregate:s}=t;if("count"===s)return e.countTitle;if(Ye(i))return`${n} (binned)`;if(r){var o;const t=null===(o=bi(r))||void 0===o?void 0:o.unit;if(t)return`${n} (${yi(t).join("-")})`}else if(s)return Ue(s)?`${n} for max ${s.argmax}`:je(s)?`${n} for min ${s.argmin}`:`${I(s)} of ${n}`;return n}(t,e)}};let Bs=Rs;function Is(t){Bs=t}function Ns(t,e,{allowDisabling:n,includeDefault:i=!0}){var r;const s=null===(r=Ls(t))||void 0===r?void 0:r.title;if(!_s(t))return s;const o=t,a=i?$s(o,e):void 0;return n?q(s,o.title,a):null!==(l=null!=s?s:o.title)&&void 0!==l?l:a;var l}function Ls(t){return Ss(t)&&t.axis?t.axis:Fs(t)&&t.legend?t.legend:us(t)&&t.header?t.header:void 0}function $s(t,e){return Bs(t,e)}function zs(t){if(Os(t)){const{format:e,formatType:n}=t;return{format:e,formatType:n}}{var e;const n=null!==(e=Ls(t))&&void 0!==e?e:{},{format:i,formatType:r}=n;return{format:i,formatType:r}}}function js(t){return _s(t)?t:ys(t)?t.condition:void 0}function Us(t){return As(t)?t:vs(t)?t.condition:void 0}function Vs(t,n,i,r={}){return e.isString(t)||e.isNumber(t)||e.isBoolean(t)?(si(function(t,e,n){return`Channel ${t} is a ${e}. Converted to {value: ${m(n)}}.`}(n,e.isString(t)?"string":e.isNumber(t)?"number":"boolean",t)),{value:t}):As(t)?qs(t,n,i,r):vs(t)?{...t,condition:qs(t.condition,n,i,r)}:t}function qs(t,n,i,r){if(Os(t)){const{format:e,formatType:s,...o}=t;if(Hr(s)&&!i.customFormatTypes)return si(zn(n)),qs(o,n,i,r)}else{const e=Ss(t)?"axis":Fs(t)?"legend":us(t)?"header":null;if(e&&t[e]){const{format:s,formatType:o,...a}=t[e];if(Hr(o)&&!i.customFormatTypes)return si(zn(n)),qs({...t,[e]:a},n,i,r)}}return _s(t)?Hs(t,n,r):function(t){let n=t.type;if(n)return t;const{datum:i}=t;return n=e.isNumber(i)?"quantitative":e.isString(i)?"nominal":oi(i)?"temporal":void 0,{...t,type:n}}(t)}function Hs(t,n,{compositeMark:i=!1}={}){const{aggregate:r,timeUnit:s,bin:o,field:a}=t,l={...t};if(i||!r||Ve(r)||Ue(r)||je(r)||(si(function(t){return`Invalid aggregation operator "${t}".`}(r)),delete l.aggregate),s&&(l.timeUnit=bi(s)),a&&(l.field=`${a}`),Ye(o)&&(l.bin=Ws(o,n)),Ke(o)&&!ve(n)&&si(function(t){return`Channel ${t} should not be used with "binned" bin.`}(n)),Es(l)){const{type:t}=l,e=function(t){if(t)switch(t=t.toLowerCase()){case"q":case Pi:return"quantitative";case"t":case Bi:return"temporal";case"o":case Ri:return"ordinal";case"n":case Ii:return"nominal";case Ni:return"geojson"}}(t);t!==e&&(l.type=e),"quantitative"!==t&&He(r)&&(si(function(t,e){return`Invalid field type "${t}" for aggregate: "${e}", using "quantitative" instead.`}(t,r)),l.type="quantitative")}else if(!Zt(n)){const t=function(t,n){var i;switch(n){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(ds(t)&&e.isArray(t.sort))return"ordinal";const{aggregate:r,bin:s,timeUnit:o}=t;if(o)return"temporal";if(s||r&&!Ue(r)&&!je(r))return"quantitative";if(Ds(t)&&null!==(i=t.scale)&&void 0!==i&&i.type)switch(ji[t.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}(l,n);l.type=t}if(Es(l)){const{compatible:t,warning:e}=function(t,e){const n=t.type;if("geojson"===n&&"shape"!==e)return{compatible:!1,warning:`Channel ${e} should not be used with a geojson data.`};switch(e){case Z:case Q:case J:return Ps(t)?Gs:{compatible:!1,warning:Hn(e)};case tt:case et:case dt:case ft:case pt:case Ct:case Et:case kt:case Dt:case St:case Ft:case yt:case ot:case rt:case Ot:return Gs;case ut:case ht:case lt:case ct:return n!==Pi?{compatible:!1,warning:`Channel ${e} should be used with a quantitative field only, not ${t.type} field.`}:Gs;case vt:case _t:case bt:case xt:case gt:case at:case st:case nt:case it:return"nominal"!==n||t.sort?Gs:{compatible:!1,warning:`Channel ${e} should not be used with an unsorted discrete field.`};case mt:case wt:return Ps(t)||Ds(i=t)&&er(null===(r=i.scale)||void 0===r?void 0:r.type)?Gs:{compatible:!1,warning:Wn(e)};case At:return"nominal"!==t.type||"sort"in t?Gs:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}var i,r}(l,n)||{};!1===t&&si(e)}if(ds(l)&&e.isString(l.sort)){const{sort:t}=l;if(rs(t))return{...l,sort:{encoding:t}};const e=t.substr(1);if("-"===t.charAt(0)&&rs(e))return{...l,sort:{encoding:e,order:"descending"}}}if(us(l)){const{header:t}=l;if(t){const{orient:e,...n}=t;if(e)return{...l,header:{...n,labelOrient:t.labelOrient||e,titleOrient:t.titleOrient||e}}}}return l}function Ws(t,n){return e.isBoolean(t)?{maxbins:Je(n)}:"binned"===t?{binned:!0}:t.maxbins||t.step?t:{...t,maxbins:Je(n)}}const Gs={compatible:!0};function Xs(t){const{formatType:e}=zs(t);return"time"===e||!e&&(n=t)&&("temporal"===n.type||_s(n)&&!!n.timeUnit);var n}function Ys(t,{timeUnit:n,type:i,wrapTime:r,undefinedIfExprNotRequired:s}){var o;const a=n&&(null===(o=bi(n))||void 0===o?void 0:o.unit);let l,u=a||"temporal"===i;return tn(t)?l=t.expr:sn(t)?l=t.signal:oi(t)?(u=!0,l=di(t)):(e.isString(t)||e.isNumber(t))&&u&&(l=`datetime(${m(t)})`,function(t){return!!fi[t]}(a)&&(e.isNumber(t)&&t<1e4||e.isString(t)&&isNaN(Date.parse(t)))&&(l=di({[a]:t}))),l?r&&u?`time(${l})`:l:s?void 0:m(t)}function Ks(t,e){const{type:n}=t;return e.map(e=>{const i=Ys(e,{timeUnit:_s(t)?t.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return void 0!==i?{signal:i}:e})}function Zs(t,e){return Ye(t.bin)?Re(e)&&["ordinal","nominal"].includes(t.type):(console.warn("Only call this method for binned field defs."),!1)}const Qs={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Js(t){return t&&t.condition}const to=["domain","grid","labels","ticks","title"],eo={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},no={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},io={...no,style:1,labelExpr:1,encoding:1};function ro(t){return!!io[t]}const so=F({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1});function oo(t){return"mark"in t}class ao{constructor(t,e){this.name=t,this.run=e}hasMatchingType(t){return!!oo(t)&&(Mr(e=t.mark)?e.type:e)===this.name;var e}}function lo(t,n){const i=t&&t[n];return!!i&&(e.isArray(i)?_(i,t=>!!t.field):_s(i)||ys(i))}function uo(t){return _(zt,n=>{if(lo(t,n)){const i=t[n];if(e.isArray(i))return _(i,t=>!!t.aggregate);{const t=js(i);return t&&!!t.aggregate}}return!1})}function co(t,e){const n=[],i=[],r=[],s=[],o={};return mo(t,(a,l)=>{if(_s(a)){const{field:u,aggregate:c,bin:h,timeUnit:d,...f}=a;if(c||d||h){const t=Ls(a),p=t&&t.title;let m=Ts(a,{forAs:!0});const g={...p?[]:{title:Ns(a,e,{allowDisabling:!0})},...f,field:m};if(c){let t;if(Ue(c)?(t="argmax",m=Ts({op:"argmax",field:c.argmax},{forAs:!0}),g.field=`${m}.${u}`):je(c)?(t="argmin",m=Ts({op:"argmin",field:c.argmin},{forAs:!0}),g.field=`${m}.${u}`):"boxplot"!==c&&"errorbar"!==c&&"errorband"!==c&&(t=c),t){const e={op:t,as:m};u&&(e.field=u),s.push(e)}}else if(n.push(m),Es(a)&&Ye(h))i.push({bin:h,field:u,as:m}),n.push(Ts(a,{binSuffix:"end"})),Zs(a,l)&&n.push(Ts(a,{binSuffix:"range"})),ve(l)&&(o[`${l}2`]={field:`${m}_end`}),g.bin="binned",Zt(l)||(g.type=Pi);else if(d){r.push({timeUnit:d,field:u,as:m});const t=Es(a)&&a.type!==Bi&&"time";t&&(l===Ct||l===Dt?g.formatType=t:function(t){return!!pe[t]}(l)?g.legend={formatType:t,...g.legend}:ve(l)&&(g.axis={formatType:t,...g.axis}))}o[l]=g}else n.push(u),o[l]=t[l]}else o[l]=t[l]}),{bins:i,timeUnits:r,aggregate:s,groupby:n,encoding:o}}function ho(t,n,i,r){return F(t).reduce((s,o)=>{if(!Yt(o))return si(function(t){return`${t}-encoding is dropped as ${t} is not a valid encoding channel.`}(o)),s;const a=t[o];if("angle"!==o||"arc"!==n||t.theta||(si("Arc marks uses theta channel rather than angle, replacing angle with theta."),o=ot),!function(t,e,n){const i=function(t,e){return function(t){switch(t){case dt:case ft:case pt:case Ot:case Et:case kt:case Dt:case St:case At:case vt:case _t:case bt:case xt:case J:case Z:case Q:return Be;case tt:case et:case lt:case ut:return Ne;case nt:case it:case ct:case ht:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case gt:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case wt:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case mt:return{point:"always",geoshape:"always"};case Ct:return{text:"always"};case yt:return{point:"always",square:"always",text:"always"};case Ft:return{image:"always"};case ot:case rt:return{text:"always",arc:"always"};case at:case st:return{arc:"always"}}}(t)[e]}(e,n);if(!i)return!1;if("binned"===i){const n=t[e===nt?tt:et];return!!(_s(n)&&_s(t[e])&&Ke(n.bin))}return!0}(t,o,n))return si(qn(o,n)),s;if(o===gt&&"line"===n){const e=js(t[o]);if(null!=e&&e.aggregate)return si("Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead."),s}if(o===dt&&(i?"fill"in t:"stroke"in t))return si(Un("encoding",{fill:"fill"in t,stroke:"stroke"in t})),s;if(o===Et||o===At&&!e.isArray(a)&&!ks(a)||o===Dt&&e.isArray(a))a&&(s[o]=e.array(a).reduce((t,e)=>(_s(e)?t.push(Hs(e,o)):si(Vn(e,o)),t),[]));else{if(o===Dt&&null===a)s[o]=null;else if(!(_s(a)||xs(a)||ks(a)||gs(a)||sn(a)))return si(Vn(a,o)),s;s[o]=Vs(a,o,r)}return s},{})}function fo(t,e){const n={};for(const i of F(t)){const r=Vs(t[i],i,e,{compositeMark:!0});n[i]=r}return n}function po(t){const n=[];for(const i of F(t))if(lo(t,i)){const r=e.array(t[i]);for(const t of r)_s(t)?n.push(t):ys(t)&&n.push(t.condition)}return n}function mo(t,n,i){if(t)for(const r of F(t)){const s=t[r];if(e.isArray(s))for(const t of s)n.call(i,t,r);else n.call(i,s,r)}}function go(t,n){return F(n).reduce((i,r)=>{switch(r){case tt:case et:case St:case Ot:case Ft:case nt:case it:case ot:case at:case rt:case st:case lt:case ut:case ct:case ht:case Ct:case mt:case yt:case Dt:return i;case At:if("line"===t||"trail"===t)return i;case Et:case kt:{const t=n[r];if(e.isArray(t)||_s(t))for(const n of e.array(t))n.aggregate||i.push(Ts(n,{}));return i}case gt:if("trail"===t)return i;case dt:case ft:case pt:case vt:case _t:case bt:case wt:case xt:{const t=js(n[r]);return t&&!t.aggregate&&i.push(Ts(t,{})),i}}},[])}function yo(t,e,n,i=!0){return"tooltip"in n?{tooltip:n.tooltip}:{tooltip:[...t.map(({fieldPrefix:t,titlePrefix:n})=>{const r=i?` of ${vo(e)}`:"";return{field:t+e.field,type:e.type,title:sn(n)?{signal:`${n}"${escape(r)}"`}:n+r}}),...C(po(n).map(Ms),g)]}}function vo(t){const{title:e,field:n}=t;return q(e,n)}function _o(t,n,i,r,s){const{scale:o,axis:a}=i;return({partName:l,mark:u,positionPrefix:c,endPositionPrefix:h,extraEncoding:d={}})=>{const f=vo(i);return bo(t,l,s,{mark:u,encoding:{[n]:{field:`${c}_${i.field}`,type:i.type,...void 0!==f?{title:f}:{},...void 0!==o?{scale:o}:{},...void 0!==a?{axis:a}:{}},...e.isString(h)?{[`${n}2`]:{field:`${h}_${i.field}`}}:{},...r,...d}})}}function bo(t,n,i,r){const{clip:s,color:o,opacity:a}=t,l=t.type;return t[n]||void 0===t[n]&&i[n]?[{...r,mark:{...i[n],...s?{clip:s}:{},...o?{color:o}:{},...a?{opacity:a}:{},...Mr(r.mark)?r.mark:{type:r.mark},style:`${l}-${n}`,...e.isBoolean(t[n])?{}:t[n]}}]:[]}function xo(t,e,n){const{encoding:i}=t,r="vertical"===e?"y":"x",s=i[`${r}2`],o=i[`${r}Error`],a=i[`${r}Error2`];return{continuousAxisChannelDef:wo(i[r],n),continuousAxisChannelDef2:wo(s,n),continuousAxisChannelDefError:wo(o,n),continuousAxisChannelDefError2:wo(a,n),continuousAxis:r}}function wo(t,e){if(t&&t.aggregate){const{aggregate:n,...i}=t;return n!==e&&si(function(t,e){return`Continuous axis should not have customized aggregation function ${t}; ${e} already agregates the axis.`}(n,e)),i}return t}function Co(t,e){const{mark:n,encoding:i}=t,{x:r,y:s}=i;if(Mr(n)&&n.orient)return n.orient;if(ws(r)){if(ws(s)){const t=_s(r)&&r.aggregate,n=_s(s)&&s.aggregate;if(t||n!==e){if(n||t!==e){if(t===e&&n===e)throw new Error("Both x and y cannot have aggregate");return Xs(s)&&!Xs(r)?"horizontal":"vertical"}return"horizontal"}return"vertical"}return"horizontal"}if(ws(s))return"vertical";throw new Error(`Need a valid continuous axis for ${e}s`)}const Ao="boxplot",Eo=new ao(Ao,Do);function ko(t){return e.isNumber(t)?"tukey":t}function Do(t,{config:n}){var i;t={...t,encoding:fo(t.encoding,n)};const{mark:r,encoding:s,params:o,projection:a,...l}=t,u=Mr(r)?r:{type:r};o&&si(Nn("boxplot"));const c=null!==(i=u.extent)&&void 0!==i?i:n.boxplot.extent,h=_n("size",u,n),d=ko(c),{bins:f,timeUnits:m,transform:g,continuousAxisChannelDef:y,continuousAxis:v,groupby:_,aggregate:b,encodingWithoutContinuousAxis:x,ticksOrient:w,boxOrient:C,customTooltipWithoutAggregatedField:A}=function(t,n,i){const r=Co(t,Ao),{continuousAxisChannelDef:s,continuousAxis:o}=xo(t,r,Ao),a=s.field,l=ko(n),u=[...So(a),{op:"median",field:a,as:`mid_box_${a}`},{op:"min",field:a,as:("min-max"===l?"lower_whisker_":"min_")+a},{op:"max",field:a,as:("min-max"===l?"upper_whisker_":"max_")+a}],c="min-max"===l||"tukey"===l?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${n}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${n}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[o]:h,...d}=t.encoding,{customTooltipWithoutAggregatedField:f,filteredEncoding:p}=function(t){const{tooltip:n,...i}=t;if(!n)return{filteredEncoding:i};let r,s;if(e.isArray(n)){for(const t of n)t.aggregate?(r||(r=[]),r.push(t)):(s||(s=[]),s.push(t));r&&(i.tooltip=r)}else n.aggregate?i.tooltip=n:s=n;return e.isArray(s)&&1===s.length&&(s=s[0]),{customTooltipWithoutAggregatedField:s,filteredEncoding:i}}(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:_}=co(p,i),b="vertical"===r?"horizontal":"vertical",x=r;return{bins:m,timeUnits:g,transform:[...m,...g,{aggregate:[...y,...u],groupby:v},...c],groupby:v,aggregate:y,continuousAxisChannelDef:s,continuousAxis:o,encodingWithoutContinuousAxis:_,ticksOrient:b,boxOrient:x,customTooltipWithoutAggregatedField:f}}(t,c,n),{color:E,size:k,...D}=x,F=t=>_o(u,v,y,t,n.boxplot),O=F(D),M=F(x),T=F({...D,...k?{size:k}:{}}),P=yo([{fieldPrefix:"min-max"===d?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===d?"lower_whisker_":"min_",titlePrefix:"Min"}],y,x),R={type:"tick",color:"black",opacity:1,orient:w,invalid:null,aria:!1},B="min-max"===d?P:yo([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],y,x),I=[...O({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:B}),...O({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:B}),...O({partName:"ticks",mark:R,positionPrefix:"lower_whisker",extraEncoding:B}),...O({partName:"ticks",mark:R,positionPrefix:"upper_whisker",extraEncoding:B})],N=[..."tukey"!==d?I:[],...M({partName:"box",mark:{type:"bar",...h?{size:h}:{},orient:C,invalid:null,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:P}),...T({partName:"median",mark:{type:"tick",invalid:null,...e.isObject(n.boxplot.median)&&n.boxplot.median.color?{color:n.boxplot.median.color}:{},...h?{size:h}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:P})];var L;if("min-max"===d)return{...l,transform:(null!==(L=l.transform)&&void 0!==L?L:[]).concat(g),layer:N};const $=`datum["lower_box_${y.field}"]`,z=`datum["upper_box_${y.field}"]`,j=`(${z} - ${$})`,U=`${$} - ${c} * ${j}`,V=`${z} + ${c} * ${j}`,q=`datum["${y.field}"]`,H={joinaggregate:So(y.field),groupby:_},W={transform:[{filter:`(${U} <= ${q}) && (${q} <= ${V})`},{aggregate:[{op:"min",field:y.field,as:`lower_whisker_${y.field}`},{op:"max",field:y.field,as:`upper_whisker_${y.field}`},{op:"min",field:`lower_box_${y.field}`,as:`lower_box_${y.field}`},{op:"max",field:`upper_box_${y.field}`,as:`upper_box_${y.field}`},...b],groupby:_}],layer:I},{tooltip:G,...X}=D,{scale:Y,axis:K}=y,Z=vo(y),Q=p(K,["title"]),J=bo(u,"outliers",n.boxplot,{transform:[{filter:`(${q} < ${U}) || (${q} > ${V})`}],mark:"point",encoding:{[v]:{field:y.field,type:y.type,...void 0!==Z?{title:Z}:{},...void 0!==Y?{scale:Y}:{},...S(Q)?{}:{axis:Q}},...X,...E?{color:E}:{},...A?{tooltip:A}:{}}})[0];let tt;const et=[...f,...m,H];return J?tt={transform:et,layer:[J,W]}:(tt=W,tt.transform.unshift(...et)),{...l,layer:[tt,{transform:g,layer:N}]}}function So(t){return[{op:"q1",field:t,as:`lower_box_${t}`},{op:"q3",field:t,as:`upper_box_${t}`}]}const Fo="errorbar",Oo=new ao(Fo,Mo);function Mo(t,{config:e}){t={...t,encoding:fo(t.encoding,e)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:l,tooltipEncoding:u}=To(t,Fo,e);delete s.size;const c=_o(a,r,i,s,e.errorbar),h=a.thickness,d=a.size,f={type:"tick",orient:o,aria:!1,...void 0!==h?{thickness:h}:{},...void 0!==d?{size:d}:{}},p=[...c({partName:"ticks",mark:f,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:f,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...void 0!==h?{size:h}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function To(t,e,n){var i;const{mark:r,encoding:s,params:o,projection:a,...l}=t,u=Mr(r)?r:{type:r};o&&si(Nn(e));const{orient:c,inputType:h}=function(t,e){const{encoding:n}=t;if(function(t){return(As(t.x)||As(t.y))&&!As(t.x2)&&!As(t.y2)&&!As(t.xError)&&!As(t.xError2)&&!As(t.yError)&&!As(t.yError2)}(n))return{orient:Co(t,e),inputType:"raw"};const i=function(t){return As(t.x2)||As(t.y2)}(n),r=function(t){return As(t.xError)||As(t.xError2)||As(t.yError)||As(t.yError2)}(n),s=n.x,o=n.y;if(i){if(r)throw new Error(`${e} cannot be both type aggregated-upper-lower and aggregated-error`);const t=n.x2,i=n.y2;if(As(t)&&As(i))throw new Error(`${e} cannot have both x2 and y2`);if(As(t)){if(ws(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${e}`)}if(As(i)){if(ws(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${e}`)}throw new Error("No ranged axis")}{const t=n.xError,i=n.yError,r=n.yError2;if(As(n.xError2)&&!As(t))throw new Error(`${e} cannot have xError2 without xError`);if(As(r)&&!As(i))throw new Error(`${e} cannot have yError2 without yError`);if(As(t)&&As(i))throw new Error(`${e} cannot have both xError and yError with both are quantiative`);if(As(t)){if(ws(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(As(i)){if(ws(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}(t,e),{continuousAxisChannelDef:d,continuousAxisChannelDef2:f,continuousAxisChannelDefError:p,continuousAxisChannelDefError2:m,continuousAxis:g}=xo(t,c,e),{errorBarSpecificAggregate:y,postAggregateCalculates:v,tooltipSummary:_,tooltipTitleWithFieldName:b}=function(t,e,n,i,r,s,o,a){let l=[],u=[];const c=e.field;let h,d=!1;if("raw"===s){const e=t.center?t.center:t.extent?"iqr"===t.extent?"median":"mean":a.errorbar.center,n=t.extent?t.extent:"mean"===e?"stderr":"iqr";if("median"===e!=("iqr"===n)&&si(function(t,e,n){return`${t} is not usually used with ${e} for ${n}.`}(e,n,o)),"stderr"===n||"stdev"===n)l=[{op:n,field:c,as:`extent_${c}`},{op:e,field:c,as:`center_${c}`}],u=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],h=[{fieldPrefix:"center_",titlePrefix:I(e)},{fieldPrefix:"upper_",titlePrefix:Po(e,n,"+")},{fieldPrefix:"lower_",titlePrefix:Po(e,n,"-")}],d=!0;else{let t,e,i;"ci"===n?(t="mean",e="ci0",i="ci1"):(t="median",e="q1",i="q3"),l=[{op:e,field:c,as:`lower_${c}`},{op:i,field:c,as:`upper_${c}`},{op:t,field:c,as:`center_${c}`}],h=[{fieldPrefix:"upper_",titlePrefix:Ns({field:c,aggregate:i,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Ns({field:c,aggregate:e,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Ns({field:c,aggregate:t,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(t.center||t.extent)&&si((f=t.center,`${(p=t.extent)?"extent ":""}${p&&f?"and ":""}${f?"center ":""}${p&&f?"are ":"is "}not needed when data are aggregated.`)),"aggregated-upper-lower"===s?(h=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):"aggregated-error"===s&&(h=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`datum["${c}"] + datum["${i.field}"]`,as:`upper_${c}`}],u.push(r?{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`lower_${c}`}:{calculate:`datum["${c}"] - datum["${i.field}"]`,as:`lower_${c}`}));for(const t of u)h.push({fieldPrefix:t.as.substring(0,6),titlePrefix:j(j(t.calculate,'datum["',""),'"]',"")})}var f,p;return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:h,tooltipTitleWithFieldName:d}}(u,d,f,p,m,h,e,n),{[g]:x,["x"===g?"x2":"y2"]:w,["x"===g?"xError":"yError"]:C,["x"===g?"xError2":"yError2"]:A,...E}=s,{bins:k,timeUnits:D,aggregate:S,groupby:F,encoding:O}=co(E,n),M=[...S,...y],T="raw"!==h?[]:F,P=yo(_,d,O,b);return{transform:[...null!==(i=l.transform)&&void 0!==i?i:[],...k,...D,...0===M.length?[]:[{aggregate:M,groupby:T}],...v],groupby:T,continuousAxisChannelDef:d,continuousAxis:g,encodingWithoutContinuousAxis:O,ticksOrient:"vertical"===c?"horizontal":"vertical",markDef:u,outerSpec:l,tooltipEncoding:P}}function Po(t,e,n){return`${I(t)} ${n} ${e}`}const Ro="errorband",Bo=new ao(Ro,Io);function Io(t,{config:e}){t={...t,encoding:fo(t.encoding,e)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:l}=To(t,Ro,e),u=o,c=_o(u,r,i,s,e.errorband),h=void 0!==t.encoding.x&&void 0!==t.encoding.y;let d={type:h?"area":"rect"},f={type:h?"line":"rule"};const p={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return h?(d={...d,...p,ariaRoleDescription:"errorband"},f={...f,...p,aria:!1}):u.interpolate?si(ei("interpolate")):u.tension&&si(ei("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:f,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:f,positionPrefix:"upper",extraEncoding:l})]}}const No={};function Lo(t,e,n){const i=new ao(t,e);No[t]={normalizer:i,parts:n}}Lo(Ao,Do,["box","median","outliers","rule","ticks"]),Lo(Fo,Mo,["ticks","rule"]),Lo(Ro,Io,["band","borders"]);const $o=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],zo={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},jo={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Uo=F(zo),Vo=F(jo),qo=F({header:1,headerRow:1,headerColumn:1,headerFacet:1}),Ho=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Wo="_vgsid_",Go={point:{on:"click",fields:[Wo],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Xo(t){return!(!t||"legend"!==t&&!t.legend)}function Yo(t){return Xo(t)&&e.isObject(t)}function Ko(t){return!!t.select}function Zo(t){const e=[];for(const n of t||[]){if(Ko(n))continue;const{expr:t,bind:i,...r}=n;if(i&&t){const n={...r,bind:i,init:t};e.push(n)}else{const n={...r,...t?{update:t}:{},...i?{bind:i}:{}};e.push(n)}}return e}function Qo(t){return"concat"in t}function Jo(t){return"vconcat"in t}function ta(t){return"hconcat"in t}const ea=["background","padding"];function na(t,e){const n={};for(const i of ea)t&&void 0!==t[i]&&(n[i]=dn(t[i]));return e&&(n.params=t.params),n}function ia(t){return e.isObject(t)&&void 0!==t.step}function ra(t){return t.view||t.width||t.height}const sa=F({align:1,bounds:1,center:1,columns:1,spacing:1});function oa(t,e){var n;return null!==(n=t[e])&&void 0!==n?n:t["width"===e?"continuousWidth":"continuousHeight"]}function aa(t,e){const n=la(t,e);return ia(n)?n.step:ua}function la(t,e){var n;return q(null!==(n=t[e])&&void 0!==n?n:t["width"===e?"discreteWidth":"discreteHeight"],{step:t.step})}const ua=20,ca={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:ua},mark:{color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},arc:{},area:{},bar:{binSpacing:1,continuousBandSize:5,timeUnitBandPosition:.5},circle:{},geoshape:{},image:{},line:{},point:{},rect:{binSpacing:0,continuousBandSize:5,timeUnitBandPosition:.5},rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Go,style:{},title:{},facet:{spacing:20},concat:{spacing:20}},ha=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],da={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},fa={blue:ha[0],orange:ha[1],red:ha[2],teal:ha[3],green:ha[4],yellow:ha[5],purple:ha[6],pink:ha[7],brown:ha[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function pa(t){const e=F(t||{}),n={};for(const i of e){const e=t[i];n[i]=Js(e)?hn(e):dn(e)}return n}const ma=[...Rr,...so,...qo,"background","padding","legend","lineBreak","scale","style","title","view"];function ga(t={}){const{color:n,font:i,fontSize:r,...s}=t,o=e.mergeConfig({},ca,i?function(t){return{text:{font:t},style:{"guide-label":{font:t},"guide-title":{font:t},"group-title":{font:t},"group-subtitle":{font:t}}}}(i):{},n?function(t={}){return{signals:[{name:"color",value:e.isObject(t)?{...fa,...t}:fa}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}(n):{},r?function(t){return{signals:[{name:"fontSize",value:e.isObject(t)?{...da,...t}:da}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}(r):{},s||{}),a=p(o,ma);for(const e of["background","lineBreak","padding"])o[e]&&(a[e]=dn(o[e]));for(const e of Rr)o[e]&&(a[e]=en(o[e]));for(const e of so)o[e]&&(a[e]=pa(o[e]));for(const e of qo)o[e]&&(a[e]=en(o[e]));return o.legend&&(a.legend=en(o.legend)),o.scale&&(a.scale=en(o.scale)),o.style&&(a.style=function(t){const e=F(t),n={};for(const i of e)n[i]=pa(t[i]);return n}(o.style)),o.title&&(a.title=en(o.title)),o.view&&(a.view=en(o.view)),a}const ya=["view",...Or],va=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],_a={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]};function ba(t,e,n,i){var r;"view"===e&&(n="cell");const s={...i?t[e][i]:t[e],...t.style[null!==(r=n)&&void 0!==r?r:e]};var o;S(s)||(t.style[null!==(o=n)&&void 0!==o?o:e]=s),i||delete t[e]}function xa(t){return"layer"in t}class wa{map(t,e){return cs(t)?this.mapFacet(t,e):function(t){return"repeat"in t}(t)?this.mapRepeat(t,e):ta(t)?this.mapHConcat(t,e):Jo(t)?this.mapVConcat(t,e):Qo(t)?this.mapConcat(t,e):this.mapLayerOrUnit(t,e)}mapLayerOrUnit(t,e){if(xa(t))return this.mapLayer(t,e);if(oo(t))return this.mapUnit(t,e);throw new Error(On(t))}mapLayer(t,e){return{...t,layer:t.layer.map(t=>this.mapLayerOrUnit(t,e))}}mapHConcat(t,e){return{...t,hconcat:t.hconcat.map(t=>this.map(t,e))}}mapVConcat(t,e){return{...t,vconcat:t.vconcat.map(t=>this.map(t,e))}}mapConcat(t,e){const{concat:n,...i}=t;return{...i,concat:n.map(t=>this.map(t,e))}}mapFacet(t,e){return{...t,spec:this.map(t.spec,e)}}mapRepeat(t,e){return{...t,spec:this.map(t.spec,e)}}}const Ca={zero:1,center:1,normalize:1},Aa=new Set([pr,gr,mr,xr,_r,Er,kr,vr,wr,Cr]),Ea=new Set([gr,mr,pr]);function ka(t,e){const n="x"===e?"y":"radius",i=t[e],r=t[n];if(_s(i)&&_s(r))if("quantitative"===bs(i)&&"quantitative"===bs(r)){if(i.stack)return e;if(r.stack)return n;const t=_s(i)&&!!i.aggregate;if(t!==(_s(r)&&!!r.aggregate))return t?e:n;{var s,o;const t=null===(s=i.scale)||void 0===s?void 0:s.type,a=null===(o=r.scale)||void 0===o?void 0:o.type;if(t&&"linear"!==t)return n;if(a&&"linear"!==a)return e}}else{if("quantitative"===bs(i))return e;if("quantitative"===bs(r))return n}else{if("quantitative"===bs(i))return e;if("quantitative"===bs(r))return n}}function Da(t,n,i={}){var r,s;const o=Mr(t)?t.type:t;if(!Aa.has(o))return null;const a=ka(n,"x")||ka(n,"theta");if(!a)return null;const l=n[a],u=_s(l)?Ts(l,{}):void 0;let c=function(t){switch(t){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}(a),h=n[c],d=_s(h)?Ts(h,{}):void 0;d===u&&(d=void 0,h=void 0,c=void 0);const f=me.reduce((t,i)=>{if("tooltip"!==i&&lo(n,i)){const r=n[i];for(const n of e.array(r)){const e=js(n);if(e.aggregate)continue;const r=Ts(e,{});r&&r===d||t.push({channel:i,fieldDef:e})}}return t},[]);let p;if(void 0!==l.stack?p=e.isBoolean(l.stack)?l.stack?"zero":null:l.stack:Ea.has(o)&&(p="zero"),!p||!(p in Ca))return null;var m;if(uo(n)&&0===f.length)return null;if(null!=l&&null!==(r=l.scale)&&void 0!==r&&r.type&&(null==l||null===(s=l.scale)||void 0===s?void 0:s.type)!==Li){if(i.disallowNonLinearStack)return null;si(function(t){return`Cannot stack non-linear scale (${t}).`}(l.scale.type))}return As(n[te(a)])?(void 0!==l.stack&&si(`Cannot stack "${m=a}" if there is already "${m}2".`),null):(_s(l)&&l.aggregate&&!v(We,l.aggregate)&&si(`Stacking is applied even though the aggregate function is non-summative ("${l.aggregate}").`),{groupbyChannel:h?c:void 0,groupbyField:d,fieldChannel:a,impute:null!==l.impute&&Sr(o),stackBy:f,offset:p})}function Sa(t){const{point:e,line:n,...i}=t;return F(i).length>1?i:i.type}function Fa(t){for(const e of["line","area","rule","trail"])t[e]&&(t={...t,[e]:p(t[e],["point","line"])});return t}function Oa(t,n={},i){return"transparent"===t.point?{opacity:0}:t.point?e.isObject(t.point)?t.point:{}:void 0!==t.point?null:n.point||i.shape?e.isObject(n.point)?n.point:{}:void 0}function Ma(t,e={}){return t.line?!0===t.line?{}:t.line:void 0!==t.line?null:e.line?!0===e.line?{}:e.line:void 0}class Ta{constructor(){Dn(this,"name","path-overlay")}hasMatchingType(t,e){if(oo(t)){const{mark:n,encoding:i}=t,r=Mr(n)?n:{type:n};switch(r.type){case"line":case"rule":case"trail":return!!Oa(r,e[r.type],i);case"area":return!!Oa(r,e[r.type],i)||!!Ma(r,e[r.type])}}return!1}run(t,e,n){const{config:i}=e,{params:r,projection:s,mark:o,encoding:a,...l}=t,u=fo(a,i),c=Mr(o)?o:{type:o},h=Oa(c,i[c.type],u),d="area"===c.type&&Ma(c,i[c.type]),m=[{...r?{params:r}:{},mark:Sa({..."area"===c.type&&void 0===c.opacity&&void 0===c.fillOpacity?{opacity:.7}:{},...c}),encoding:p(u,["shape"])}],g=Da(c,u);let y=u;if(g){const{fieldChannel:t,offset:e}=g;y={...u,[t]:{...u[t],...e?{stack:e}:{}}}}return d&&m.push({...s?{projection:s}:{},mark:{type:"line",...f(c,["clip","interpolate","tension","tooltip"]),...d},encoding:y}),h&&m.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...f(c,["clip","tooltip"]),...h},encoding:y}),n({...l,layer:m},{...e,config:Fa(i)})}}function Pa(t,e){return e?ls(t)?$a(t,e):Ia(t,e):t}function Ra(t,e){return e?$a(t,e):t}function Ba(t,n,i){const r=n[t];return(s=r)&&!e.isString(s)&&"repeat"in s?r.repeat in i?{...n,[t]:i[r.repeat]}:void si(function(t){return`Unknown repeated value "${t}".`}(r.repeat)):n;var s}function Ia(t,e){if(void 0!==(t=Ba("field",t,e))){if(null===t)return null;if(ds(t)&&os(t.sort)){const n=Ba("field",t.sort,e);t={...t,...n?{sort:n}:{}}}return t}}function Na(t,e){if(_s(t))return Ia(t,e);{const n=Ba("datum",t,e);return n===t||n.type||(n.type="nominal"),n}}function La(t,e){if(!As(t)){if(vs(t)){const n=Na(t.condition,e);if(n)return{...t,condition:n};{const{condition:e,...n}=t;return n}}return t}{const n=Na(t,e);if(n)return n;if(gs(t))return{condition:t.condition}}}function $a(t,n){const i={};for(const r in t)if(e.hasOwnProperty(t,r)){const s=t[r];if(e.isArray(s))i[r]=s.map(t=>La(t,n)).filter(t=>t);else{const t=La(s,n);void 0!==t&&(i[r]=t)}}return i}class za{constructor(){Dn(this,"name","RuleForRangedLine")}hasMatchingType(t){if(oo(t)){const{encoding:e,mark:n}=t;if("line"===n||Mr(n)&&"line"===n.type)for(const t of Kt){const n=e[Qt(t)];if(e[t]&&(_s(n)&&!Ke(n.bin)||xs(n)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:s}=t;return si(`Line mark is for continuous lines and thus cannot be used with ${(o=!!r.x2)&&!!r.y2?"x2 and y2":o?"x2":"y2"}. We will use the rule mark (line segments) instead.`),console.log(s),i({...t,mark:e.isObject(s)?{...s,type:"rule"}:"rule"},n);var o}}function ja({parentEncoding:t,encoding:n={},layer:i}){let r={};if(t){const s=new Set([...F(t),...F(n)]);for(const o of s){const s=n[o],a=t[o];if(As(s)){const t={...a,...s};r[o]=t}else vs(s)?r[o]={...s,condition:{...a,...s.condition}}:s||null===s?r[o]=s:(i||ks(a)||sn(a)||As(a)||e.isArray(a))&&(r[o]=a)}}else r=n;return!r||S(r)?void 0:r}function Ua(t){const{parentProjection:e,projection:n}=t;return e&&n&&si(function(t){const{parentProjection:e,projection:n}=t;return`Layer's shared projection ${m(e)} is overridden by a child projection ${m(n)}.`}({parentProjection:e,projection:n})),null!=n?n:e}function Va(t){return"filter"in t}function qa(t){return"lookup"in t}function Ha(t){return"pivot"in t}function Wa(t){return"density"in t}function Ga(t){return"quantile"in t}function Xa(t){return"regression"in t}function Ya(t){return"loess"in t}function Ka(t){return"sample"in t}function Za(t){return"window"in t}function Qa(t){return"joinaggregate"in t}function Ja(t){return"flatten"in t}function tl(t){return"calculate"in t}function el(t){return"bin"in t}function nl(t){return"impute"in t}function il(t){return"timeUnit"in t}function rl(t){return"aggregate"in t}function sl(t){return"stack"in t}function ol(t){return"fold"in t}function al(t,e){const{transform:n,...i}=t;return n?{...i,transform:n.map(t=>{if(Va(t))return{filter:cl(t,e)};if(el(t)&&Ze(t.bin))return{...t,bin:ul(t.bin)};if(qa(t)){const{selection:e,...n}=t.from;return e?{...t,from:{param:e,...n}}:t}return t})}:t}function ll(t,e){var i,r;const s=d(t);if(_s(s)&&Ze(s.bin)&&(s.bin=ul(s.bin)),Ds(s)&&null!==(i=s.scale)&&void 0!==i&&null!==(r=i.domain)&&void 0!==r&&r.selection){const{selection:t,...e}=s.scale.domain;s.scale.domain={...e,...t?{param:t}:{}}}if(gs(s))if(n.isArray(s.condition))s.condition=s.condition.map(t=>{const{selection:n,param:i,test:r,...s}=t;return i?t:{...s,test:cl(t,e)}});else{const{selection:t,param:n,test:i,...r}=ll(s.condition,e);s.condition=n?s.condition:{...r,test:cl(s.condition,e)}}return s}function ul(t){const e=t.extent;if(null!=e&&e.selection){const{selection:n,...i}=e;return{...t,extent:{...i,param:n}}}return t}function cl(t,e){const n=t=>c(t,t=>{var n,i,r;const s={param:t,empty:null===(n=e.emptySelections[t])||void 0===n||n};return null!==(r=(i=e.selectionPredicates)[t])&&void 0!==r||(i[t]=[]),e.selectionPredicates[t].push(s),s});return t.selection?n(t.selection):c(t.test||t.filter,t=>t.selection?n(t.selection):t)}class hl extends wa{map(t,e){var n;const i=null!==(n=e.selections)&&void 0!==n?n:[];if(t.params&&!oo(t)){const e=[];for(const n of t.params)Ko(n)?i.push(n):e.push(n);t.params=e}return e.selections=i,super.map(t,dl(t,e))}mapUnit(t,e){var i;const r=e.selections;if(!r||!r.length)return t;const s=(null!==(i=e.path)&&void 0!==i?i:[]).concat(t.name),o=[];for(const a of r)if(a.views&&a.views.length)for(const e of a.views)(n.isString(e)&&(e===t.name||s.indexOf(e)>=0)||n.isArray(e)&&e.map(t=>s.indexOf(t)).every((t,e,n)=>-1!==t&&(0===e||t>n[e-1])))&&o.push(a);else o.push(a);return o.length&&(t.params=o),t}}for(const Mp of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=hl.prototype[Mp];hl.prototype[Mp]=function(e,n){return t.call(this,e,dl(e,n))}}function dl(t,e){var n;return t.name?{...e,path:(null!==(n=e.path)&&void 0!==n?n:[]).concat(t.name)}:e}function fl(t,e){void 0===e&&(e=ga(t.config));const n=function(t,e={}){const n={config:e};return gl.map(pl.map(ml.map(t,n),n),n)}(t,e),{width:i,height:r}=t,s=function(t,e,n){let{width:i,height:r}=e;const s=oo(t)||xa(t),o={};s?"container"==i&&"container"==r?(o.type="fit",o.contains="padding"):"container"==i?(o.type="fit-x",o.contains="padding"):"container"==r&&(o.type="fit-y",o.contains="padding"):("container"==i&&(si(Mn("width")),i=void 0),"container"==r&&(si(Mn("height")),r=void 0));const a={type:"pad",...o,...n?yl(n.autosize):{},...yl(t.autosize)};if("fit"!==a.type||s||(si('Autosize "fit" only works for single views and layered views.'),a.type="pad"),"container"==i&&"fit"!=a.type&&"fit-x"!=a.type&&si(Tn("width")),"container"==r&&"fit"!=a.type&&"fit-y"!=a.type&&si(Tn("height")),!h(a,{type:"pad"}))return a}(n,{width:i,height:r,autosize:t.autosize},e);return{...n,...s?{autosize:s}:{}}}const pl=new class extends wa{constructor(...t){super(...t),Dn(this,"nonFacetUnitNormalizers",[Eo,Oo,Bo,new Ta,new za])}map(t,e){if(oo(t)){const n=lo(t.encoding,Z),i=lo(t.encoding,Q),r=lo(t.encoding,J);if(n||i||r)return this.mapFacetedUnit(t,e)}return super.map(t,e)}mapUnit(t,e){const{parentEncoding:n,parentProjection:i}=e,r=Ra(t.encoding,e.repeater),s={...t,...r?{encoding:r}:{}};if(n||i)return this.mapUnitWithParentEncodingOrProjection(s,e);const o=this.mapLayerOrUnit.bind(this);for(const a of this.nonFacetUnitNormalizers)if(a.hasMatchingType(s,e.config))return a.run(s,e,o);return s}mapRepeat(t,n){return function(t){return!e.isArray(t.repeat)&&t.repeat.layer}(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,e){const{repeat:n,spec:i,...r}=t,{row:s,column:o,layer:a}=n,{repeater:l={},repeaterPrefix:u=""}=e;return s||o?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...o?{column:o}:{}},spec:{repeat:{layer:a},spec:i}},e):{...r,layer:a.map(t=>{const n={...l,layer:t},r=`${(i.name||"")+u}child__layer_${P(t)}`,s=this.mapLayerOrUnit(i,{...e,repeater:n,repeaterPrefix:r});return s.name=r,s})}}mapNonLayerRepeat(t,n){var i;const{repeat:r,spec:s,data:o,...a}=t;!e.isArray(r)&&t.columns&&(t=p(t,["columns"]),si(Ln("repeat")));const l=[],{repeater:u={},repeaterPrefix:c=""}=n,h=!e.isArray(r)&&r.row||[u?u.row:null],d=!e.isArray(r)&&r.column||[u?u.column:null],f=e.isArray(r)&&r||[u?u.repeat:null];for(const g of f)for(const t of h)for(const i of d){const o={repeat:g,row:t,column:i,layer:u.layer},a=(s.name||"")+c+"child__"+(e.isArray(r)?`${P(g)}`:(r.row?`row_${P(t)}`:"")+(r.column?`column_${P(i)}`:"")),h=this.map(s,{...n,repeater:o,repeaterPrefix:a});h.name=a,l.push(p(h,["data"]))}const m=e.isArray(r)?t.columns:r.column?r.column.length:1;return{data:null!==(i=s.data)&&void 0!==i?i:o,align:"all",...a,columns:m,concat:l}}mapFacet(t,e){const{facet:n}=t;return ls(n)&&t.columns&&(t=p(t,["columns"]),si(Ln("facet"))),super.mapFacet(t,e)}mapUnitWithParentEncodingOrProjection(t,e){const{encoding:n,projection:i}=t,{parentEncoding:r,parentProjection:s,config:o}=e,a=Ua({parentProjection:s,projection:i}),l=ja({parentEncoding:r,encoding:Ra(n,e.repeater)});return this.mapUnit({...t,...a?{projection:a}:{},...l?{encoding:l}:{}},{config:o})}mapFacetedUnit(t,e){const{row:n,column:i,facet:r,...s}=t.encoding,{mark:o,width:a,projection:l,height:u,view:c,params:h,encoding:d,...f}=t,{facetMapping:p,layout:m}=this.getFacetMappingAndLayout({row:n,column:i,facet:r},e),g=Ra(s,e.repeater);return this.mapFacet({...f,...m,facet:p,spec:{...a?{width:a}:{},...u?{height:u}:{},...c?{view:c}:{},...l?{projection:l}:{},mark:o,encoding:g,...h?{params:h}:{}}},e)}getFacetMappingAndLayout(t,e){const{row:n,column:i,facet:r}=t;if(n||i){r&&si(`Facet encoding dropped as ${(o=[...n?[Z]:[],...i?[Q]:[]]).join(" and ")} ${o.length>1?"are":"is"} also specified.`);const e={},a={};for(const n of[Z,Q]){const i=t[n];if(i){const{align:t,center:r,spacing:o,columns:l,...u}=i;e[n]=u;for(const e of["align","center","spacing"]){var s;void 0!==i[e]&&(null!==(s=a[e])&&void 0!==s||(a[e]={}),a[e][n]=i[e])}}}return{facetMapping:e,layout:a}}var o;{const{align:t,center:n,spacing:i,columns:s,...o}=r;return{facetMapping:Pa(o,e.repeater),layout:{...t?{align:t}:{},...n?{center:n}:{},...i?{spacing:i}:{},...s?{columns:s}:{}}}}}mapLayer(t,{parentEncoding:e,parentProjection:n,...i}){const{encoding:r,projection:s,...o}=t,a={...i,parentEncoding:ja({parentEncoding:e,encoding:r,layer:!0}),parentProjection:Ua({parentProjection:n,projection:s})};return super.mapLayer(o,a)}},ml=new class extends wa{map(t,e){var n,i;return null!==(n=e.emptySelections)&&void 0!==n||(e.emptySelections={}),null!==(i=e.selectionPredicates)&&void 0!==i||(e.selectionPredicates={}),t=al(t,e),super.map(t,e)}mapLayerOrUnit(t,e){if((t=al(t,e)).encoding){const n={};for(const[i,r]of M(t.encoding))n[i]=ll(r,e);t={...t,encoding:n}}return super.mapLayerOrUnit(t,e)}mapUnit(t,e){const{selection:n,...i}=t;return n?{...i,params:M(n).map(([t,n])=>{const{init:i,bind:r,empty:s,...o}=n;"single"===o.type?(o.type="point",o.toggle=!1):"multi"===o.type&&(o.type="point"),e.emptySelections[t]="none"!==s;for(const l of O(null!==(a=e.selectionPredicates[t])&&void 0!==a?a:{})){var a;l.empty="none"!==s}return{name:t,value:i,select:o,bind:r}})}:t}},gl=new hl;function yl(t){return e.isString(t)?{type:t}:null!=t?t:{}}class vl{constructor(t={},e={}){this.explicit=t,this.implicit=e}clone(){return new vl(d(this.explicit),d(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return q(this.explicit[t],this.implicit[t])}getWithExplicit(t){return void 0!==this.explicit[t]?{explicit:!0,value:this.explicit[t]}:void 0!==this.implicit[t]?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:e,explicit:n}){void 0!==e&&this.set(t,e,n)}set(t,e,n){return delete this[n?"implicit":"explicit"][t],this[n?"explicit":"implicit"][t]=e,this}copyKeyFromSplit(t,{explicit:e,implicit:n}){void 0!==e[t]?this.set(t,e[t],!0):void 0!==n[t]&&this.set(t,n[t],!1)}copyKeyFromObject(t,e){void 0!==e[t]&&this.set(t,e[t],!0)}copyAll(t){for(const e of F(t.combine())){const n=t.getWithExplicit(e);this.setWithExplicit(e,n)}}}function _l(t){return{explicit:!0,value:t}}function bl(t){return{explicit:!1,value:t}}function xl(t){return(e,n,i,r)=>{const s=t(e.value,n.value);return s>0?e:s<0?n:wl(e,n,i,r)}}function wl(t,e,n,i){return t.explicit&&e.explicit&&si(function(t,e,n,i){return`Conflicting ${e.toString()} property "${t.toString()}" (${m(n)} and ${m(i)}). Using ${m(n)}.`}(n,i,t.value,e.value)),t}function Cl(t,e,n,i,r=wl){return void 0===t||void 0===t.value?e:t.explicit&&!e.explicit?t:e.explicit&&!t.explicit?e:h(t.value,e.value)?t:r(t,e,n,i)}class Al extends vl{constructor(t={},e={},n=!1){super(t,e),this.explicit=t,this.implicit=e,this.parseNothing=n}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function El(t){return"url"in t}function kl(t){return"values"in t}function Dl(t){return"name"in t&&!El(t)&&!kl(t)&&!Sl(t)}function Sl(t){return t&&(Fl(t)||Ol(t)||Ml(t))}function Fl(t){return"sequence"in t}function Ol(t){return"sphere"in t}function Ml(t){return"graticule"in t}let Tl;!function(t){t[t.Raw=0]="Raw",t[t.Main=1]="Main",t[t.Row=2]="Row",t[t.Column=3]="Column",t[t.Lookup=4]="Lookup"}(Tl||(Tl={}));const Pl=/[[\]{}]/,Rl={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let Bl,Il;function Nl(t,e,n){return Bl=e||"view",Il=n||Rl,$l(t.trim()).map(zl)}function Ll(t,e,n,i,r){const s=t.length;let o,a=0;for(;e<s;++e){if(o=t[e],!a&&o===n)return e;r&&r.indexOf(o)>=0?--a:i&&i.indexOf(o)>=0&&++a}return e}function $l(t){const e=[],n=t.length;let i=0,r=0;for(;r<n;)r=Ll(t,r,",","[{","]}"),e.push(t.substring(i,r).trim()),i=++r;if(0===e.length)throw"Empty event selector: "+t;return e}function zl(t){return"["===t[0]?function(t){const e=t.length;let n,i=1;if(i=Ll(t,i,"]","[","]"),i===e)throw"Empty between selector: "+t;if(n=$l(t.substring(1,i)),2!==n.length)throw"Between selector must have two elements: "+t;if(">"!==(t=t.slice(i+1).trim())[0])throw"Expected '>' after between selector: "+t;n=n.map(zl);const r=zl(t.slice(1).trim());return r.between?{between:n,stream:r}:(r.between=n,r)}(t):function(t){const e={source:Bl},n=[];let i,r,s=[0,0],o=0,a=0,l=t.length,u=0;if("}"===t[l-1]){if(u=t.lastIndexOf("{"),!(u>=0))throw"Unmatched right brace: "+t;try{s=function(t){const e=t.split(",");if(!t.length||e.length>2)throw t;return e.map(e=>{const n=+e;if(n!=n)throw t;return n})}(t.substring(u+1,l-1))}catch(c){throw"Invalid throttle specification: "+t}l=(t=t.slice(0,u).trim()).length,u=0}if(!l)throw t;if("@"===t[0]&&(o=++u),i=Ll(t,u,":"),i<l&&(n.push(t.substring(a,i).trim()),a=u=++i),u=Ll(t,u,"["),u===l)n.push(t.substring(a,l).trim());else if(n.push(t.substring(a,u).trim()),r=[],a=++u,a===l)throw"Unmatched left bracket: "+t;for(;u<l;){if(u=Ll(t,u,"]"),u===l)throw"Unmatched left bracket: "+t;if(r.push(t.substring(a,u).trim()),u<l-1&&"["!==t[++u])throw"Expected left bracket: "+t;a=++u}if(!(l=n.length)||Pl.test(n[l-1]))throw"Invalid event selector: "+t;return l>1?(e.type=n[1],o?e.markname=n[0].slice(1):function(t){return Il[t]}(n[0])?e.marktype=n[0]:e.source=n[0]):e.type=n[0],"!"===e.type.slice(-1)&&(e.consume=!0,e.type=e.type.slice(0,-1)),null!=r&&(e.filter=r),s[0]&&(e.throttle=s[0]),s[1]&&(e.debounce=s[1]),e}(t)}function jl(t,n=!0,i=e.identity){if(e.isArray(t)){const e=t.map(t=>jl(t,n,i));return n?`[${e.join(", ")}]`:e}return oi(t)?i(n?di(t):function(t){const e=hi(t,!0);return t.utc?+new Date(Date.UTC(...e)):+new Date(...e)}(t)):n?i(m(t)):t}function Ul(t,n){for(const r of O(null!==(i=t.component.selection)&&void 0!==i?i:{})){var i;const s=r.name;let o=`${s}${Ju}, ${"global"===r.resolve?"true":`{unit: ${ic(t)}}`}`;for(const e of nc)e.defined(r)&&(e.signals&&(n=e.signals(t,r,n)),e.modifyExpr&&(o=e.modifyExpr(t,r,o)));n.push({name:s+tc,on:[{events:{signal:r.name+Ju},update:`modify(${e.stringValue(r.name+Qu)}, ${o})`}]})}return Hl(n)}function Vl(t,n){if(t.component.selection&&F(t.component.selection).length){const i=e.stringValue(t.getName("cell"));n.unshift({name:"facet",value:{},on:[{events:Nl("mousemove","scope"),update:`isTuple(facet) ? facet : group(${i}).datum`}]})}return Hl(n)}function ql(t,e){for(const i of O(null!==(n=t.component.selection)&&void 0!==n?n:{})){var n;for(const n of nc)n.defined(i)&&n.marks&&(e=n.marks(t,i,e))}return e}function Hl(t){return t.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Wl{constructor(t,e){this.debugName=e,Dn(this,"_children",[]),Dn(this,"_parent",null),Dn(this,"_hash",void 0),t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,e){this._children.includes(t)?si("Attempt to add the same child twice."):void 0!==e?this._children.splice(e,0,t):this._children.push(t)}removeChild(t){const e=this._children.indexOf(t);return this._children.splice(e,1),e}remove(){let t=this._parent.removeChild(this);for(const e of this._children)e._parent=this._parent,this._parent.addChild(e,t++)}insertAsParentOf(t){const e=t.parent;e.removeChild(this),this.parent=e,t.parent=this}swapWithParent(){const t=this._parent,e=t.parent;for(const n of this._children)n.parent=t;this._children=[],t.removeChild(this),t.parent.removeChild(t),this.parent=e,t.parent=this}}class Gl extends Wl{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,e,n,i){super(t,e),this.type=n,this.refCounts=i,Dn(this,"_source",void 0),Dn(this,"_name",void 0),this._source=this._name=e,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return void 0===this._hash&&(this._hash=`Output ${W()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}class Xl extends Wl{clone(){return new Xl(null,d(this.formula))}constructor(t,e){super(t),this.formula=e}static makeFromEncoding(t,e){const n=e.reduceFieldDef((t,e)=>{const{field:n,timeUnit:i}=e;if(i){const r=Ts(e,{forAs:!0});t[g({as:r,field:n,timeUnit:i})]={as:r,field:n,timeUnit:i}}return t},{});return S(n)?null:new Xl(t,n)}static makeFromTransform(t,e){const{timeUnit:n,...i}={...e},r={...i,timeUnit:bi(n)};return new Xl(t,{[g(r)]:r})}merge(t){this.formula={...this.formula};for(const e in t.formula)this.formula[e]||(this.formula[e]=t.formula[e]);for(const e of t.children)t.removeChild(e),e.parent=this;t.remove()}removeFormulas(t){const e={};for(const[n,i]of M(this.formula))t.has(i.as)||(e[n]=i);this.formula=e}producedFields(){return new Set(O(this.formula).map(t=>t.as))}dependentFields(){return new Set(O(this.formula).map(t=>t.field))}hash(){return`TimeUnit ${g(this.formula)}`}assemble(){const t=[];for(const e of O(this.formula)){const{field:n,as:i,timeUnit:r}=e,{unit:s,utc:o,...a}=bi(r);t.push({field:z(n),type:"timeunit",...s?{units:yi(s)}:{},...o?{timezone:"utc"}:{},...a,as:[i,`${i}_end`]})}return t}}const Yl="_tuple_fields";class Kl{constructor(...t){Dn(this,"hasChannel",void 0),Dn(this,"hasField",void 0),Dn(this,"timeUnit",void 0),Dn(this,"items",void 0),this.items=t,this.hasChannel={},this.hasField={}}}const Zl={defined:()=>!0,parse:(t,n,i)=>{var r;const s=n.name,o=null!==(r=n.project)&&void 0!==r?r:n.project=new Kl,a={},l={},u=new Set,c=(t,e)=>{const n="visual"===e?t.channel:t.field;let i=P(`${s}_${n}`);for(let r=1;u.has(i);r++)i=P(`${s}_${n}_${r}`);return u.add(i),{[e]:i}},h=n.type,d=t.config.selection[h],f=void 0!==i.value?e.array(i.value):null;let{fields:p,encodings:m}=e.isObject(i.select)?i.select:{};if(!p&&!m&&f)for(const g of f)if(e.isObject(g))for(const t of F(g))Xt[t]?(m||(m=[])).push(t):"interval"===h?(si('Interval selections should be initialized using "x" and/or "y" keys.'),m=d.encodings):(p||(p=[])).push(t);p||m||(m=d.encodings,p=d.fields);for(const e of null!==(y=m)&&void 0!==y?y:[]){var y;const n=t.fieldDef(e);if(n){let i=n.field;if(n.aggregate){si(In(e,n.aggregate));continue}if(!i){si(Bn(e));continue}if(n.timeUnit){i=t.vgField(e);const r={timeUnit:n.timeUnit,as:i,field:n.field};l[g(r)]=r}if(!a[i]){let r="E";"interval"===h?Ji(t.getScaleComponent(e).get("type"))&&(r="R"):n.bin&&(r="R-RE");const s={field:i,channel:e,type:r};s.signals={...c(s,"data"),...c(s,"visual")},o.items.push(a[i]=s),o.hasField[i]=o.hasChannel[e]=a[i]}}else si(Bn(e))}for(const e of null!==(v=p)&&void 0!==v?v:[]){var v;if(o.hasField[e])continue;const t={type:"E",field:e};t.signals={...c(t,"data")},o.items.push(t),o.hasField[e]=t}f&&(n.init=f.map(t=>o.items.map(n=>e.isObject(t)?void 0!==t[n.channel]?t[n.channel]:t[n.field]:t))),S(l)||(o.timeUnit=new Xl(null,l))},signals:(t,e,n)=>{const i=e.name+Yl;return n.filter(t=>t.name===i).length>0?n:n.concat({name:i,value:e.project.items.map(t=>{const{signals:e,hasLegend:n,...i}=t;return i.field=z(i.field),i})})}},Ql={defined:t=>"interval"===t.type&&"global"===t.resolve&&t.bind&&"scales"===t.bind,parse:(t,e)=>{const n=e.scales=[];for(const i of e.project.items){const r=i.channel;if(!Re(r))continue;const s=t.getScaleComponent(r),o=s?s.get("type"):void 0;s&&Ji(o)?(s.set("selectionExtent",{param:e.name,field:i.field},!0),n.push(i)):si("Scale bindings are currently only supported for scales with unbinned, continuous domains.")}},topLevelSignals:(t,n,i)=>{const r=n.scales.filter(t=>0===i.filter(e=>e.name===t.signals.data).length);if(!t.parent||tu(t)||0===r.length)return i;const s=i.filter(t=>t.name===n.name)[0];let o=s.update;if(o.indexOf(ec)>=0)s.update=`{${r.map(t=>`${e.stringValue(z(t.field))}: ${t.signals.data}`).join(", ")}}`;else{for(const t of r){const n=`${e.stringValue(z(t.field))}: ${t.signals.data}`;o.includes(n)||(o=`${o.substring(0,o.length-1)}, ${n}}`)}s.update=o}return i.concat(r.map(t=>({name:t.signals.data})))},signals:(t,e,n)=>{if(t.parent&&!tu(t))for(const i of e.scales){const t=n.filter(t=>t.name===i.signals.data)[0];t.push="outer",delete t.value,delete t.update}return n}};function Jl(t,n){return`domain(${e.stringValue(t.scaleName(n))})`}function tu(t){var e;return t.parent&&Rf(t.parent)&&(null!==(e=!t.parent.parent)&&void 0!==e?e:tu(t.parent.parent))}const eu="_brush",nu="_scale_trigger",iu={defined:t=>"interval"===t.type,signals:(t,n,i)=>{const r=n.name,s=r+Yl,o=Ql.defined(n),a=n.init?n.init[0]:null,l=[],u=[];if(n.translate&&!o){const t=`!event.item || event.item.mark.name !== ${e.stringValue(r+eu)}`;ru(n,(n,i)=>{var r,s;const o=e.array(null!==(s=(r=i.between[0]).filter)&&void 0!==s?s:r.filter=[]);return o.includes(t)||o.push(t),n})}n.project.items.forEach((r,s)=>{const o=r.channel;if(o!==tt&&o!==et)return void si("Interval selections only support x and y encoding channels.");const c=function(t,n,i,r){const s=i.channel,o=i.signals.visual,a=i.signals.data,l=Ql.defined(n),u=e.stringValue(t.scaleName(s)),c=t.getScaleComponent(s),h=c?c.get("type"):void 0,d=t=>`scale(${u}, ${t})`,f=t.getSizeSignalRef(s===tt?"width":"height").signal,p=`${s}(unit)`,m=ru(n,(t,e)=>[...t,{events:e.between[0],update:`[${p}, ${p}]`},{events:e,update:`[${o}[0], clamp(${p}, 0, ${f})]`}]);return m.push({events:{signal:n.name+nu},update:Ji(h)?`[${d(`${a}[0]`)}, ${d(`${a}[1]`)}]`:"[0, 0]"}),l?[{name:a,on:[]}]:[{name:o,...r?{init:jl(r,!0,d)}:{value:[]},on:m},{name:a,...r?{init:jl(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${u}, ${o})`}]}]}(t,n,r,a?a[s]:null),h=r.signals.data,d=r.signals.visual,f=e.stringValue(t.scaleName(o)),p=Ji(t.getScaleComponent(o).get("type"))?"+":"";i.push(...c),l.push(h),u.push({scaleName:t.scaleName(o),expr:`(!isArray(${h}) || (${p}invert(${f}, ${d})[0] === ${p}${h}[0] && ${p}invert(${f}, ${d})[1] === ${p}${h}[1]))`})}),o||i.push({name:r+nu,value:{},on:[{events:u.map(t=>({scale:t.scaleName})),update:`${u.map(t=>t.expr).join(" && ")} ? ${r+nu} : {}`}]});const c=`unit: ${ic(t)}, fields: ${s}, values`;return i.concat({name:r+Ju,...a?{init:`{${c}: ${jl(a)}}`}:{},on:[{events:[{signal:l.join(" || ")}],update:`${l.join(" && ")} ? {${c}: [${l}]} : null`}]})},marks:(t,n,i)=>{const r=n.name,{x:s,y:o}=n.project.hasChannel,a=s&&s.signals.visual,l=o&&o.signals.visual,u=`data(${e.stringValue(n.name+Qu)})`;if(Ql.defined(n))return i;const c={x:void 0!==s?{signal:`${a}[0]`}:{value:0},y:void 0!==o?{signal:`${l}[0]`}:{value:0},x2:void 0!==s?{signal:`${a}[1]`}:{field:{group:"width"}},y2:void 0!==o?{signal:`${l}[1]`}:{field:{group:"height"}}};if("global"===n.resolve)for(const e of F(c))c[e]=[{test:`${u}.length && ${u}[0].unit === ${ic(t)}`,...c[e]},{value:0}];const{fill:h,fillOpacity:d,cursor:f,...p}=n.mark,m=F(p).reduce((t,e)=>(t[e]=[{test:[void 0!==s&&`${a}[0] !== ${a}[1]`,void 0!==o&&`${l}[0] !== ${l}[1]`].filter(t=>t).join(" && "),value:p[e]},{value:null}],t),{});return[{name:`${r+eu}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:h},fillOpacity:{value:d}},update:c}},...i,{name:r+eu,type:"rect",clip:!0,encode:{enter:{...f?{cursor:{value:f}}:{},fill:{value:"transparent"}},update:{...c,...m}}}]}};function ru(t,e){return t.events.reduce((t,n)=>n.between?e(t,n):(si(`${n} is not an ordered event stream for interval selections.`),t),[])}const su={defined:t=>"point"===t.type,signals:(t,n,i)=>{const r=n.name,s=r+Yl,o="(item().isVoronoi ? datum.datum : datum)",a=n.project.items.map(n=>{const i=t.fieldDef(n.channel);return i&&i.bin?`[${o}[${e.stringValue(t.vgField(n.channel,{}))}], ${o}[${e.stringValue(t.vgField(n.channel,{binSuffix:"end"}))}]]`:`${o}[${e.stringValue(n.field)}]`}).join(", "),l=`unit: ${ic(t)}, fields: ${s}, values`,u=n.events;return i.concat([{name:r+Ju,on:u?[{events:u,update:`datum && item().mark.marktype !== 'group' ? {${l}: [${a}]} : null`,force:!0}]:[]}])}};function ou(t,n,i,r){const s=gs(n)&&n.condition,o=r(n);return s?{[i]:[...e.array(s).map(e=>{const n=r(e);if(function(t){return t.param}(e)){const{param:i,empty:r}=e;return{test:dh(t,{param:i,empty:r}),...n}}return{test:ph(t,e.test),...n}}),...void 0!==o?[o]:[]]}:void 0!==o?{[i]:o}:{}}function au(t,e="text"){return ou(t,t.encoding[e],e,e=>lu(e,t.config))}function lu(t,e,n="datum"){if(t){if(ks(t))return pn(t.value);if(As(t)){const{format:i,formatType:r}=zs(t);return Gr({fieldOrDatumDef:t,format:i,formatType:r,expr:n,config:e})}}}function uu(t,n={}){const{encoding:i,markDef:r,config:s,stack:o}=t,a=i.tooltip;if(e.isArray(a))return{tooltip:hu({tooltip:a},o,s,n)};{const l=n.reactiveGeom?"datum.datum":"datum";return ou(t,a,"tooltip",t=>{const a=lu(t,s,l);if(a)return a;if(null===t)return;let u=_n("tooltip",r,s);return!0===u&&(u={content:"encoding"}),e.isString(u)?{value:u}:e.isObject(u)?sn(u)?u:"encoding"===u.content?hu(i,o,s,n):{signal:l}:void 0})}}function cu(t,n,i,{reactiveGeom:r}={}){const s={},o=r?"datum.datum":"datum",a=[];function l(r,l){var u;const c=Qt(l),h=Es(r)?r:{...r,type:t[c].type},d=h.title||$s(h,i),f=e.array(d).join(", ");let p;if(ve(l)){const e="x"===l?"x2":"y2",r=js(t[e]);if(Ke(h.bin)&&r){const t=Ts(h,{expr:o}),n=Ts(r,{expr:o}),{format:a,formatType:l}=zs(h);p=es(t,n,a,l,i),s[e]=!0}else if(n&&n.fieldChannel===l&&"normalize"===n.offset){const{format:t,formatType:e}=zs(h);p=Gr({fieldOrDatumDef:h,format:t,formatType:e,expr:o,config:i,normalizeStack:!0}).signal}}null!==(u=p)&&void 0!==u||(p=lu(h,i,o).signal),a.push({channel:l,key:f,value:p})}mo(t,(t,e)=>{_s(t)?l(t,e):ys(t)&&l(t.condition,e)});const u={};for(const{channel:e,key:c,value:h}of a)s[e]||u[c]||(u[c]=h);return u}function hu(t,e,n,{reactiveGeom:i}={}){const r=cu(t,e,n,{reactiveGeom:i}),s=M(r).map(([t,e])=>`"${t}": ${e}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function du(t){const{markDef:e,config:n}=t,i=_n("aria",e,n);return!1===i?{}:{...i?{aria:i}:{},...fu(t),...pu(t)}}function fu(t){const{mark:e,markDef:n,config:i}=t;if(!1===i.aria)return{};const r=_n("ariaRoleDescription",n,i);return null!=r?{ariaRoleDescription:{value:r}}:e in un?{}:{ariaRoleDescription:{value:e}}}function pu(t){const{encoding:e,markDef:n,config:i,stack:r}=t,s=e.description;if(s)return ou(t,s,"description",e=>lu(e,t.config));const o=_n("description",n,i);if(null!=o)return{description:pn(o)};if(!1===i.aria)return{};const a=cu(e,r,i);return S(a)?void 0:{description:{signal:M(a).map(([t,e],n)=>`"${n>0?"; ":""}${t}: " + (${e})`).join(" + ")}}}function mu(t,e,n={}){const{markDef:i,encoding:r,config:s}=e,{vgChannel:o}=n;let{defaultRef:a,defaultValue:l}=n;var u;return void 0===a&&(null!==(u=l)&&void 0!==u||(l=_n(t,i,s,{vgChannel:o,ignoreVgConfig:!0})),void 0!==l&&(a=pn(l))),ou(e,r[t],null!=o?o:t,n=>Vr({channel:t,channelDef:n,markDef:i,config:s,scaleName:e.scaleName(t),scale:e.getScaleComponent(t),stack:null,defaultRef:a}))}function gu(t,e={filled:void 0}){var n,i,r,s;const{markDef:o,encoding:a,config:l}=t,{type:u}=o,c=null!==(n=e.filled)&&void 0!==n?n:_n("filled",o,l),h=v(["bar","point","circle","square","geoshape"],u)?"transparent":void 0,d=null!==(i=null!==(r=_n(!0===c?"color":void 0,o,l,{vgChannel:"fill"}))&&void 0!==r?r:l.mark[!0===c&&"color"])&&void 0!==i?i:h,f=null!==(s=_n(!1===c?"color":void 0,o,l,{vgChannel:"stroke"}))&&void 0!==s?s:l.mark[!1===c&&"color"],p=c?"fill":"stroke",m={...d?{fill:pn(d)}:{},...f?{stroke:pn(f)}:{}};return o.color&&(c?o.fill:o.stroke)&&si(Un("property",{fill:"fill"in o,stroke:"stroke"in o})),{...m,...mu("color",t,{vgChannel:p,defaultValue:c?d:f}),...mu("fill",t,{defaultValue:a.fill?d:void 0}),...mu("stroke",t,{defaultValue:a.stroke?f:void 0})}}function yu(t){const{encoding:e,mark:n}=t,i=e.order;return!Sr(n)&&ks(i)?ou(t,i,"zindex",t=>pn(t.value)):{}}function vu(t,e){const n=e[function(t){switch(t){case tt:return"xOffset";case et:return"yOffset";case nt:return"x2Offset";case it:return"y2Offset";case ot:return"thetaOffset";case rt:return"radiusOffset";case at:return"theta2Offset";case st:return"radius2Offset"}}(t)];if(n)return n}function _u(t,e,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:s,config:o,stack:a}=e,l=r[t],u=r[te(t)],c=e.scaleName(t),h=e.getScaleComponent(t),d=vu(t,s),f=bu({model:e,defaultPos:n,channel:t,scaleName:c,scale:h}),p=!l&&ve(t)&&(r.latitude||r.longitude)?{field:e.getName(t)}:function(t){const{channel:e,channelDef:n,scaleName:i,stack:r,offset:s,markDef:o}=t;if(As(n)&&r&&e===r.fieldChannel){if(_s(n)){let t=n.bandPosition;if(void 0!==t||"text"!==o.type||"radius"!==e&&"theta"!==e||(t=.5),void 0!==t)return Ur({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:t,offset:s})}return jr(n,i,{suffix:"end"},{offset:s})}return Nr(t)}({channel:t,channelDef:l,channel2Def:u,markDef:s,config:o,scaleName:c,scale:h,stack:a,offset:d,defaultRef:f});return p?{[i||t]:p}:void 0}function bu({model:t,defaultPos:e,channel:n,scaleName:i,scale:r}){const{markDef:s,config:o}=t;return()=>{const a=Qt(n),l=Jt(n),u=_n(n,s,o,{vgChannel:l});if(void 0!==u)return qr(n,u);switch(e){case"zeroOrMin":case"zeroOrMax":if(i){const t=r.get("type");if(v(["log",$i,zi],t));else if(r.domainDefinitelyIncludesZero())return{scale:i,value:0}}if("zeroOrMin"===e)return"y"===a?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${t.width.signal},${t.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...t[ee(n)],mult:.5}}}}const xu={left:"x",center:"xc",right:"x2"},wu={top:"y",middle:"yc",bottom:"y2"};function Cu(t,e,n,i="middle"){if("radius"===t||"theta"===t)return Jt(t);const r="x"===t?"align":"baseline",s=_n(r,e,n);let o;return sn(s)?(si(function(t){return`The ${t} for range marks cannot be an expression`}(r)),o=void 0):o=s,"x"===t?xu[o||("top"===i?"left":"center")]:wu[o||i]}function Au(t,e,{defaultPos:n,defaultPos2:i,range:r}){return r?Eu(t,e,{defaultPos:n,defaultPos2:i}):_u(t,e,{defaultPos:n})}function Eu(t,e,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:s}=e,o=te(t),a=ee(t),l=function(t,e,n){const{encoding:i,mark:r,markDef:s,stack:o,config:a}=t,l=Qt(n),u=ee(n),c=Jt(n),h=i[l],d=t.scaleName(l),f=t.getScaleComponent(l),p=vu(n in i||n in s?n:l,t.markDef);if(!h&&("x2"===n||"y2"===n)&&(i.latitude||i.longitude)){const e=ee(n),i=t.markDef[e];return null!=i?{[e]:{value:i}}:{[c]:{field:t.getName(n)}}}const m=function({channel:t,channelDef:e,channel2Def:n,markDef:i,config:r,scaleName:s,scale:o,stack:a,offset:l,defaultRef:u}){return As(e)&&a&&t.charAt(0)===a.fieldChannel.charAt(0)?jr(e,s,{suffix:"start"},{offset:l}):Nr({channel:t,channelDef:n,scaleName:s,scale:o,stack:a,markDef:i,config:r,offset:l,defaultRef:u})}({channel:n,channelDef:h,channel2Def:i[n],markDef:s,config:a,scaleName:d,scale:f,stack:o,offset:p,defaultRef:void 0});return void 0!==m?{[c]:m}:ku(n,s)||ku(n,{[n]:xn(n,s,a.style),[u]:xn(u,s,a.style)})||ku(n,a[r])||ku(n,a.mark)||{[c]:bu({model:t,defaultPos:e,channel:n,scaleName:d,scale:f})()}}(e,i,o);return{..._u(t,e,{defaultPos:n,vgChannel:l[a]?Cu(t,r,s):Jt(t)}),...l}}function ku(t,e){const n=ee(t),i=Jt(t);if(void 0!==e[i])return{[i]:qr(t,e[i])};if(void 0!==e[t])return{[i]:qr(t,e[t])};if(e[n]){const i=e[n];if(!Br(i))return{[n]:qr(t,i)};si(function(t){return`Position range does not support relative band size for ${t}.`}(n))}}function Du(t,n,i){var r,s;const{config:o,encoding:a,markDef:l}=t,u=te(n),c=ee(n),h=a[n],d=a[u],f=t.getScaleComponent(n),p=f?f.get("type"):void 0,m=t.scaleName(n),g=l.orient,y=null!==(r=null!==(s=a[c])&&void 0!==s?s:a.size)&&void 0!==r?r:_n("size",l,o,{vgChannel:c}),v="bar"===i&&("x"===n?"vertical"===g:"horizontal"===g);if(!_s(h)||!(Ye(h.bin)||Ke(h.bin)||h.timeUnit&&!d)||y&&!Br(y)||Qi(p))return(As(h)&&Qi(p)||v)&&!d?function(t,n,i){const{markDef:r,encoding:s,config:o,stack:a}=i,l=r.orient,u=i.scaleName(n),c=i.getScaleComponent(n),h=ee(n),d=te(n),f="horizontal"===l&&"y"===n||"vertical"===l&&"x"===n;let p;(s.size||r.size)&&(f?p=mu("size",i,{vgChannel:h,defaultRef:pn(r.size)}):si(function(t){return`Cannot apply size to non-oriented mark "${t}".`}(r.type)));const m=ps({channel:n,fieldDef:t,markDef:r,config:o,scaleType:null==c?void 0:c.get("type"),useVlSizeChannel:f});p=p||{[h]:Su(h,u,c,o,m)};const g=Cu(n,r,o,"band"===(null==c?void 0:c.get("type"))&&"band"in p[h]?"top":"middle"),y="xc"===g||"yc"===g,v=vu(n,r),_=Nr({channel:n,channelDef:t,markDef:r,config:o,scaleName:u,scale:c,stack:a,offset:v,defaultRef:bu({model:i,defaultPos:"mid",channel:n,scaleName:u,scale:c}),bandPosition:y?.5:sn(m)?{signal:`(1-${m})/2`}:Br(m)?(1-m.band)/2:0});if(h)return{[g]:_,...p};{const t=Jt(d),n=p[h],i=v?{...n,offset:v}:n;return{[g]:_,[t]:e.isArray(_)?[_[0],{..._[1],offset:i}]:{..._,offset:i}}}}(h,n,t):Eu(n,t,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"});{var _,b;const e=ps({channel:n,fieldDef:h,markDef:l,config:o,scaleType:p}),i=null===(_=t.component.axes[n])||void 0===_?void 0:_[0];return function({fieldDef:t,fieldDef2:e,channel:n,bandSize:i,scaleName:r,markDef:s,spacing:o=0,axisTranslate:a,reverse:l,config:u}){const c=te(n),h=Jt(n),d=Jt(c),f=vu(n,s),p=sn(i)?{signal:`(1-${i.signal})/2`}:Br(i)?(1-i.band)/2:.5;if(Ye(t.bin)||t.timeUnit)return{[d]:Ou({channel:n,fieldDef:t,scaleName:r,markDef:s,bandPosition:p,offset:Fu(c,o,l,a,f),config:u}),[h]:Ou({channel:n,fieldDef:t,scaleName:r,markDef:s,bandPosition:sn(p)?{signal:`1-${p.signal}`}:1-p,offset:Fu(n,o,l,a,f),config:u})};if(Ke(t.bin)){const i=jr(t,r,{},{offset:Fu(c,o,l,a,f)});if(_s(e))return{[d]:i,[h]:jr(e,r,{},{offset:Fu(n,o,l,a,f)})};if(Ze(t.bin)&&t.bin.step)return{[d]:i,[h]:{signal:`scale("${r}", ${Ts(t,{expr:"datum"})} + ${t.bin.step})`,offset:Fu(n,o,l,a,f)}}}si(ni(c))}({fieldDef:h,fieldDef2:d,channel:n,markDef:l,scaleName:m,bandSize:e,axisTranslate:null!==(b=null==i?void 0:i.get("translate"))&&void 0!==b?b:.5,spacing:ve(n)?_n("binSpacing",l,o):void 0,reverse:f.get("reverse"),config:o})}}function Su(t,n,i,r,s){if(Br(s)){if(!i)return{mult:s.band,field:{group:t}};{const t=i.get("type");if("band"===t)return{scale:n,band:s.band};1!==s.band&&(si(function(t){return`Cannot use the relative band size with ${t} scale.`}(t)),s=void 0)}}else{if(sn(s))return s;if(s)return{value:s}}if(i){const t=i.get("range");if(on(t)&&e.isNumber(t.step))return{value:t.step-2}}return{value:aa(r.view,t)-2}}function Fu(t,e,n,i,r){if(Tt(t))return 0;const s="x"===t||"y2"===t?-e/2:e/2;if(sn(n)||sn(r)||sn(i)){const t=gn(n),e=gn(r),o=gn(i);return{signal:(o?`${o} + `:"")+(t?`(${t} ? -1 : 1) * `:"")+(e?`(${e} + ${s})`:s)}}return r=r||0,i+(n?-r-s:+r+s)}function Ou({channel:t,fieldDef:e,scaleName:n,markDef:i,bandPosition:r,offset:s,config:o}){return Lr({fieldDef:e,channel:t,markDef:i,ref:Ur({scaleName:n,fieldOrDatumDef:e,bandPosition:r,offset:s}),config:o})}const Mu=new Set(["aria","width","height"]);function Tu(t,e){const{fill:n,stroke:i}="include"===e.color?gu(t):{};return{...Ru(t.markDef,e),...Pu(t,"fill",n),...Pu(t,"stroke",i),...mu("opacity",t),...mu("fillOpacity",t),...mu("strokeOpacity",t),...mu("strokeWidth",t),...mu("strokeDash",t),...yu(t),...uu(t),...au(t,"href"),...du(t)}}function Pu(t,n,i){const{config:r,mark:s,markDef:o}=t;if("hide"===_n("invalid",o,r)&&i&&!Sr(s)){const r=function(t,{invalid:e=!1,channels:n}){const i=n.reduce((e,n)=>{const i=t.getScaleComponent(n);if(i){const r=i.get("type"),s=t.vgField(n,{expr:"datum"});s&&Ji(r)&&(e[s]=!0)}return e},{}),r=F(i);if(r.length>0){const t=e?"||":"&&";return r.map(t=>zr(t,e)).join(` ${t} `)}}(t,{invalid:!0,channels:Pe});if(r)return{[n]:[{test:r,value:null},...e.array(i)]}}return i?{[n]:i}:{}}function Ru(t,e){return ln.reduce((n,i)=>(Mu.has(i)||void 0===t[i]||"ignore"===e[i]||(n[i]=pn(t[i])),n),{})}function Bu(t){const{config:e,markDef:n}=t;if(_n("invalid",n,e)){const e=function(t,{invalid:e=!1,channels:n}){const i=n.reduce((e,n)=>{const i=t.getScaleComponent(n);if(i){const r=i.get("type"),s=t.vgField(n,{expr:"datum"});s&&Ji(r)&&(e[s]=!0)}return e},{}),r=F(i);if(r.length>0){const t=e?"||":"&&";return r.map(t=>zr(t,e)).join(` ${t} `)}}(t,{channels:ye});if(e)return{defined:{signal:e}}}return{}}function Iu(t,e){if(void 0!==e)return{[t]:pn(e)}}const Nu="voronoi",Lu={defined:t=>"point"===t.type&&t.nearest,parse:(t,e)=>{if(e.events)for(const n of e.events)n.markname=t.getName(Nu)},marks:(t,e,n)=>{const{x:i,y:r}=e.project.hasChannel,s=t.mark;if(Sr(s))return si(`The "nearest" transform is not supported for ${s} marks.`),n;const o={name:t.getName(Nu),type:"path",interactive:!0,from:{data:t.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...uu(t,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((e,n)=>{var i;const r=null!==(i=e.name)&&void 0!==i?i:"";r===t.component.mark[0].name?a=n:r.indexOf(Nu)>=0&&(l=!0)}),l||n.splice(a+1,0,o),n}},$u={defined:t=>"point"===t.type&&"global"===t.resolve&&t.bind&&"scales"!==t.bind&&!Xo(t.bind),parse:(t,e,n)=>sc(e,n),topLevelSignals:(t,n,i)=>{const r=n.name,s=n.project,o=n.bind,a=n.init&&n.init[0],l=Lu.defined(n)?"(item().isVoronoi ? datum.datum : datum)":"datum";return s.items.forEach((t,s)=>{const u=P(`${r}_${t.field}`);var c,h;i.filter(t=>t.name===u).length||i.unshift({name:u,...a?{init:jl(a[s])}:{value:null},on:n.events?[{events:n.events,update:`datum && item().mark.marktype !== 'group' ? ${l}[${e.stringValue(t.field)}] : null`}]:[],bind:null!==(c=null!==(h=o[t.field])&&void 0!==h?h:o[t.channel])&&void 0!==c?c:o})}),i},signals:(t,e,n)=>{const i=e.name,r=e.project,s=n.filter(t=>t.name===i+Ju)[0],o=i+Yl,a=r.items.map(t=>P(`${i}_${t.field}`)),l=a.map(t=>`${t} !== null`).join(" && ");return a.length&&(s.update=`${l} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},zu="_toggle",ju={defined:t=>"point"===t.type&&!!t.toggle,signals:(t,e,n)=>n.concat({name:e.name+zu,value:!1,on:[{events:e.events,update:e.toggle}]}),modifyExpr:(t,e)=>{const n=e.name+Ju,i=e.name+zu;return`${i} ? null : ${n}, `+("global"===e.resolve?`${i} ? null : true, `:`${i} ? null : {unit: ${ic(t)}}, `)+`${i} ? ${n} : null`}},Uu={defined:t=>void 0!==t.clear&&!1!==t.clear,parse:(t,n)=>{n.clear&&(n.clear=e.isString(n.clear)?Nl(n.clear,"view"):n.clear)},topLevelSignals:(t,e,n)=>{if($u.defined(e))for(const i of e.project.items){const t=n.findIndex(t=>t.name===P(`${e.name}_${i.field}`));-1!==t&&n[t].on.push({events:e.clear,update:"null"})}return n},signals:(t,e,n)=>{function i(t,i){-1!==t&&n[t].on&&n[t].on.push({events:e.clear,update:i})}if("interval"===e.type)for(const r of e.project.items){const t=n.findIndex(t=>t.name===r.signals.visual);i(t,"[0, 0]"),-1===t&&i(n.findIndex(t=>t.name===r.signals.data),"null")}else{let t=n.findIndex(t=>t.name===e.name+Ju);i(t,"null"),ju.defined(e)&&(t=n.findIndex(t=>t.name===e.name+zu),i(t,"false"))}return n}},Vu={defined:t=>{const e="global"===t.resolve&&t.bind&&Xo(t.bind),n=1===t.project.items.length&&t.project.items[0].field!==Wo;return e&&!n&&si("Legend bindings are only supported for selections over an individual field or encoding channel."),e&&n},parse:(t,i,r)=>{const s=d(r);if(s.select=e.isString(s.select)?{type:s.select,toggle:i.toggle}:{...s.select,toggle:i.toggle},sc(i,s),n.isObject(r.select)&&(r.select.on||r.select.clear)){const t='event.item && indexof(event.item.mark.role, "legend") < 0';for(const n of i.events){var o;n.filter=e.array(null!==(o=n.filter)&&void 0!==o?o:[]),n.filter.includes(t)||n.filter.push(t)}}const a=Yo(i.bind)?i.bind.legend:"click",l=e.isString(a)?Nl(a,"view"):e.array(a);i.bind={legend:{merge:l}}},topLevelSignals:(t,e,n)=>{const i=e.name,r=Yo(e.bind)&&e.bind.legend,s=t=>e=>{const n=d(e);return n.markname=t,n};for(const o of e.project.items){if(!o.hasLegend)continue;const t=`${P(o.field)}_legend`,a=`${i}_${t}`;if(0===n.filter(t=>t.name===a).length){const i=r.merge.map(s(`${t}_symbols`)).concat(r.merge.map(s(`${t}_labels`))).concat(r.merge.map(s(`${t}_entries`)));n.unshift({name:a,...e.init?{}:{value:null},on:[{events:i,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${a}`,force:!0}]})}}return n},signals:(t,e,n)=>{const i=e.name,r=e.project,s=n.find(t=>t.name===i+Ju),o=i+Yl,a=r.items.filter(t=>t.hasLegend).map(t=>P(`${i}_${P(t.field)}_legend`)),l=`${a.map(t=>`${t} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;e.events&&a.length>0?s.on.push({events:a.map(t=>({signal:t})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const u=n.find(t=>t.name===i+zu),c=Yo(e.bind)&&e.bind.legend;return u&&(e.events?u.on.push({...u.on[0],events:c}):u.on[0].events=c),n}},qu="_translate_anchor",Hu="_translate_delta",Wu={defined:t=>"interval"===t.type&&t.translate,signals:(t,e,n)=>{const i=e.name,r=Ql.defined(e),s=i+qu,{x:o,y:a}=e.project.hasChannel;let l=Nl(e.translate,"scope");return r||(l=l.map(t=>(t.between[0].markname=i+eu,t))),n.push({name:s,value:{},on:[{events:l.map(t=>t.between[0]),update:"{x: x(unit), y: y(unit)"+(void 0!==o?`, extent_x: ${r?Jl(t,tt):`slice(${o.signals.visual})`}`:"")+(void 0!==a?`, extent_y: ${r?Jl(t,et):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:i+Hu,value:{},on:[{events:l,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),void 0!==o&&Gu(t,e,o,"width",n),void 0!==a&&Gu(t,e,a,"height",n),n}};function Gu(t,e,n,i,r){var s,o;const a=e.name,l=a+qu,u=a+Hu,c=n.channel,h=Ql.defined(e),d=r.filter(t=>t.name===n.signals[h?"data":"visual"])[0],f=t.getSizeSignalRef(i).signal,p=t.getScaleComponent(c),m=p.get("type"),g=p.get("reverse"),y=`${l}.extent_${c}`,v=`${h?"log"===m?"panLog":"symlog"===m?"panSymlog":"pow"===m?"panPow":"panLinear":"panLinear"}(${y}, ${h?c===tt?g?"":"-":g?"-":"":""}${u}.${c} / ${h?`${f}`:`span(${y})`}${h?"pow"===m?`, ${null!==(s=p.get("exponent"))&&void 0!==s?s:1}`:"symlog"===m?`, ${null!==(o=p.get("constant"))&&void 0!==o?o:1}`:"":""})`;d.on.push({events:{signal:u},update:h?v:`clampRange(${v}, 0, ${f})`})}const Xu="_zoom_anchor",Yu="_zoom_delta",Ku={defined:t=>"interval"===t.type&&t.zoom,signals:(t,n,i)=>{const r=n.name,s=Ql.defined(n),o=r+Yu,{x:a,y:l}=n.project.hasChannel,u=e.stringValue(t.scaleName(tt)),c=e.stringValue(t.scaleName(et));let h=Nl(n.zoom,"scope");return s||(h=h.map(t=>(t.markname=r+eu,t))),i.push({name:r+Xu,on:[{events:h,update:s?"{"+[u?`x: invert(${u}, x(unit))`:"",c?`y: invert(${c}, y(unit))`:""].filter(t=>!!t).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:h,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==a&&Zu(t,n,a,"width",i),void 0!==l&&Zu(t,n,l,"height",i),i}};function Zu(t,e,n,i,r){var s,o;const a=e.name,l=n.channel,u=Ql.defined(e),c=r.filter(t=>t.name===n.signals[u?"data":"visual"])[0],h=t.getSizeSignalRef(i).signal,d=t.getScaleComponent(l),f=d.get("type"),p=u?Jl(t,l):c.name,m=a+Yu,g=`${u?"log"===f?"zoomLog":"symlog"===f?"zoomSymlog":"pow"===f?"zoomPow":"zoomLinear":"zoomLinear"}(${p}, ${a}${Xu}.${l}, ${m}${u?"pow"===f?`, ${null!==(s=d.get("exponent"))&&void 0!==s?s:1}`:"symlog"===f?`, ${null!==(o=d.get("constant"))&&void 0!==o?o:1}`:"":""})`;c.on.push({events:{signal:m},update:u?g:`clampRange(${g}, 0, ${h})`})}const Qu="_store",Ju="_tuple",tc="_modify",ec="vlSelectionResolve",nc=[su,iu,Zl,ju,$u,Ql,Vu,Uu,Wu,Ku,Lu];function ic(t,{escape:n}={escape:!0}){let i=n?e.stringValue(t.name):t.name;const r=function(t){let e=t.parent;for(;e&&!Tf(e);)e=e.parent;return e}(t);if(r){const{facet:t}=r;for(const n of Lt)t[n]&&(i+=` + '__facet_${n}_' + (facet[${e.stringValue(r.vgField(n))}])`)}return i}function rc(t){var e;return O(null!==(e=t.component.selection)&&void 0!==e?e:{}).reduce((t,e)=>t||e.project.items.some(t=>t.field===Wo),!1)}function sc(t,e){!n.isString(e.select)&&e.select.on||delete t.events,!n.isString(e.select)&&e.select.clear||delete t.clear,!n.isString(e.select)&&e.select.toggle||delete t.toggle}function oc(t){this.type=t}var ac,lc,uc,cc,hc;oc.prototype.visit=function(t){let e,n,i;if(t(this))return 1;for(e=function(t){switch(t.type){case"ArrayExpression":return t.elements;case"BinaryExpression":case"LogicalExpression":return[t.left,t.right];case"CallExpression":return[t.callee].concat(t.arguments);case"ConditionalExpression":return[t.test,t.consequent,t.alternate];case"MemberExpression":return[t.object,t.property];case"ObjectExpression":return t.properties;case"Property":return[t.key,t.value];case"UnaryExpression":return[t.argument];case"Identifier":case"Literal":case"RawCode":default:return[]}}(this),n=0,i=e.length;n<i;++n)if(e[n].visit(t))return 1},(ac={})[1]="Boolean",ac[2]="<end>",ac[3]="Identifier",ac[4]="Keyword",ac[5]="Null",ac[6]="Numeric",ac[7]="Punctuator",ac[8]="String",ac[9]="RegularExpression";var dc="Identifier",fc="Unexpected token %0",pc="Invalid regular expression",mc="Invalid regular expression: missing /",gc="Octal literals are not allowed in strict mode.",yc="ILLEGAL",vc="Disabled.",_c=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),bc=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function xc(t,e){if(!t)throw new Error("ASSERT: "+e)}function wc(t){return t>=48&&t<=57}function Cc(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function Ac(t){return"01234567".indexOf(t)>=0}function Ec(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function kc(t){return 10===t||13===t||8232===t||8233===t}function Dc(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||t>=128&&_c.test(String.fromCharCode(t))}function Sc(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||t>=128&&bc.test(String.fromCharCode(t))}const Fc={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function Oc(){for(;uc<cc;){const t=lc.charCodeAt(uc);if(!Ec(t)&&!kc(t))break;++uc}}function Mc(t){var e,n,i,r=0;for(n="u"===t?4:2,e=0;e<n;++e)uc<cc&&Cc(lc[uc])?(i=lc[uc++],r=16*r+"0123456789abcdef".indexOf(i.toLowerCase())):Wc({},fc,yc);return String.fromCharCode(r)}function Tc(){var t,e;for(e=0,"}"===(t=lc[uc])&&Wc({},fc,yc);uc<cc&&Cc(t=lc[uc++]);)e=16*e+"0123456789abcdef".indexOf(t.toLowerCase());return(e>1114111||"}"!==t)&&Wc({},fc,yc),e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}function Pc(){var t,e;for(t=lc.charCodeAt(uc++),e=String.fromCharCode(t),92===t&&(117!==lc.charCodeAt(uc)&&Wc({},fc,yc),++uc,(t=Mc("u"))&&"\\"!==t&&Dc(t.charCodeAt(0))||Wc({},fc,yc),e=t);uc<cc&&Sc(t=lc.charCodeAt(uc));)++uc,e+=String.fromCharCode(t),92===t&&(e=e.substr(0,e.length-1),117!==lc.charCodeAt(uc)&&Wc({},fc,yc),++uc,(t=Mc("u"))&&"\\"!==t&&Sc(t.charCodeAt(0))||Wc({},fc,yc),e+=t);return e}function Rc(){var t,e;for(t=uc++;uc<cc;){if(92===(e=lc.charCodeAt(uc)))return uc=t,Pc();if(!Sc(e))break;++uc}return lc.slice(t,uc)}function Bc(){var t,e,n,i,r=uc,s=lc.charCodeAt(uc),o=lc[uc];switch(s){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++uc,{type:7,value:String.fromCharCode(s),start:r,end:uc};default:if(61===(t=lc.charCodeAt(uc+1)))switch(s){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return uc+=2,{type:7,value:String.fromCharCode(s)+String.fromCharCode(t),start:r,end:uc};case 33:case 61:return 61===lc.charCodeAt(uc+=2)&&++uc,{type:7,value:lc.slice(r,uc),start:r,end:uc}}}return">>>="===(i=lc.substr(uc,4))?{type:7,value:i,start:r,end:uc+=4}:">>>"===(n=i.substr(0,3))||"<<="===n||">>="===n?{type:7,value:n,start:r,end:uc+=3}:o===(e=n.substr(0,2))[1]&&"+-<>&|".indexOf(o)>=0||"=>"===e?{type:7,value:e,start:r,end:uc+=2}:("//"===e&&Wc({},fc,yc),"<>=!+-*%&|^/".indexOf(o)>=0?{type:7,value:o,start:r,end:++uc}:void Wc({},fc,yc))}function Ic(){var t,e,n;if(xc(wc((n=lc[uc]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),e=uc,t="","."!==n){if(t=lc[uc++],n=lc[uc],"0"===t){if("x"===n||"X"===n)return++uc,function(t){let e="";for(;uc<cc&&Cc(lc[uc]);)e+=lc[uc++];return 0===e.length&&Wc({},fc,yc),Dc(lc.charCodeAt(uc))&&Wc({},fc,yc),{type:6,value:parseInt("0x"+e,16),start:t,end:uc}}(e);if(Ac(n))return function(t){let e="0"+lc[uc++];for(;uc<cc&&Ac(lc[uc]);)e+=lc[uc++];return(Dc(lc.charCodeAt(uc))||wc(lc.charCodeAt(uc)))&&Wc({},fc,yc),{type:6,value:parseInt(e,8),octal:!0,start:t,end:uc}}(e);n&&wc(n.charCodeAt(0))&&Wc({},fc,yc)}for(;wc(lc.charCodeAt(uc));)t+=lc[uc++];n=lc[uc]}if("."===n){for(t+=lc[uc++];wc(lc.charCodeAt(uc));)t+=lc[uc++];n=lc[uc]}if("e"===n||"E"===n)if(t+=lc[uc++],"+"!==(n=lc[uc])&&"-"!==n||(t+=lc[uc++]),wc(lc.charCodeAt(uc)))for(;wc(lc.charCodeAt(uc));)t+=lc[uc++];else Wc({},fc,yc);return Dc(lc.charCodeAt(uc))&&Wc({},fc,yc),{type:6,value:parseFloat(t),start:e,end:uc}}function Nc(){if(Oc(),uc>=cc)return{type:2,start:uc,end:uc};const t=lc.charCodeAt(uc);return Dc(t)?(e=uc,{type:1===(n=92===lc.charCodeAt(uc)?Pc():Rc()).length?3:Fc.hasOwnProperty(n)?4:"null"===n?5:"true"===n||"false"===n?1:3,value:n,start:e,end:uc}):40===t||41===t||59===t?Bc():39===t||34===t?function(){var t,e,n,i,r="",s=!1;for(xc("'"===(t=lc[uc])||'"'===t,"String literal must starts with a quote"),e=uc,++uc;uc<cc;){if((n=lc[uc++])===t){t="";break}if("\\"===n)if((n=lc[uc++])&&kc(n.charCodeAt(0)))"\r"===n&&"\n"===lc[uc]&&++uc;else switch(n){case"u":case"x":"{"===lc[uc]?(++uc,r+=Tc()):r+=Mc(n);break;case"n":r+="\n";break;case"r":r+="\r";break;case"t":r+="\t";break;case"b":r+="\b";break;case"f":r+="\f";break;case"v":r+="\v";break;default:Ac(n)?(0!==(i="01234567".indexOf(n))&&(s=!0),uc<cc&&Ac(lc[uc])&&(s=!0,i=8*i+"01234567".indexOf(lc[uc++]),"0123".indexOf(n)>=0&&uc<cc&&Ac(lc[uc])&&(i=8*i+"01234567".indexOf(lc[uc++]))),r+=String.fromCharCode(i)):r+=n}else{if(kc(n.charCodeAt(0)))break;r+=n}}return""!==t&&Wc({},fc,yc),{type:8,value:r,octal:s,start:e,end:uc}}():46===t?wc(lc.charCodeAt(uc+1))?Ic():Bc():wc(t)?Ic():Bc();var e,n}function Lc(){const t=hc;return uc=t.end,hc=Nc(),uc=t.end,t}function $c(){const t=uc;hc=Nc(),uc=t}function zc(t,e,n){const i=new oc("||"===t||"&&"===t?"LogicalExpression":"BinaryExpression");return i.operator=t,i.left=e,i.right=n,i}function jc(t,e){const n=new oc("CallExpression");return n.callee=t,n.arguments=e,n}function Uc(t){const e=new oc(dc);return e.name=t,e}function Vc(t){const e=new oc("Literal");return e.value=t.value,e.raw=lc.slice(t.start,t.end),t.regex&&("//"===e.raw&&(e.raw="/(?:)/"),e.regex=t.regex),e}function qc(t,e,n){const i=new oc("MemberExpression");return i.computed="["===t,i.object=e,i.property=n,i.computed||(n.member=!0),i}function Hc(t,e,n){const i=new oc("Property");return i.key=e,i.value=n,i.kind=t,i}function Wc(t,e){var n,i=Array.prototype.slice.call(arguments,2),r=e.replace(/%(\d)/g,(t,e)=>(xc(e<i.length,"Message reference must be in range"),i[e]));throw(n=new Error(r)).index=uc,n.description=r,n}function Gc(t){2===t.type&&Wc(t,"Unexpected end of input"),6===t.type&&Wc(t,"Unexpected number"),8===t.type&&Wc(t,"Unexpected string"),3===t.type&&Wc(t,"Unexpected identifier"),4===t.type&&Wc(t,"Unexpected reserved word"),Wc(t,fc,t.value)}function Xc(t){const e=Lc();7===e.type&&e.value===t||Gc(e)}function Yc(t){return 7===hc.type&&hc.value===t}function Kc(t){return 4===hc.type&&hc.value===t}function Zc(){uc=hc.start;const t=Lc();return 8===t.type||6===t.type?(t.octal&&Wc(t,gc),Vc(t)):Uc(t.value)}function Qc(){var t,e,n;return uc=hc.start,3===(t=hc).type?(n=Zc(),Xc(":"),Hc("init",n,oh())):2!==t.type&&7!==t.type?(e=Zc(),Xc(":"),Hc("init",e,oh())):void Gc(t)}const Jc={if:1};function th(){var t,e,n,i,r,s,o;if(Yc("("))return function(){Xc("(");const t=ah();return Xc(")"),t}();if(Yc("["))return function(){const t=[];for(uc=hc.start,Xc("[");!Yc("]");)Yc(",")?(Lc(),t.push(null)):(t.push(oh()),Yc("]")||Xc(","));return Lc(),function(t){const e=new oc("ArrayExpression");return e.elements=t,e}(t)}();if(Yc("{"))return function(){var t,e,n=[],i={},r=String;for(uc=hc.start,Xc("{");!Yc("}");)e="$"+((t=Qc()).key.type===dc?t.key.name:r(t.key.value)),Object.prototype.hasOwnProperty.call(i,e)?Wc({},"Duplicate data property in object literal not allowed in strict mode"):i[e]=!0,n.push(t),Yc("}")||Xc(",");return Xc("}"),function(t){const e=new oc("ObjectExpression");return e.properties=t,e}(n)}();if(uc=hc.start,3===(t=hc.type)||Jc[hc.value])n=Uc(Lc().value);else if(8===t||6===t)hc.octal&&Wc(hc,gc),n=Vc(Lc());else{if(4===t)throw new Error(vc);1===t?((e=Lc()).value="true"===e.value,n=Vc(e)):5===t?((e=Lc()).value=null,n=Vc(e)):Yc("/")||Yc("/=")?(n=Vc((hc=null,Oc(),i=uc,r=function(){var t,e,n,i;for(xc("/"===(t=lc[uc]),"Regular expression literal must start with a slash"),e=lc[uc++],n=!1,i=!1;uc<cc;)if(e+=t=lc[uc++],"\\"===t)kc((t=lc[uc++]).charCodeAt(0))&&Wc({},mc),e+=t;else if(kc(t.charCodeAt(0)))Wc({},mc);else if(n)"]"===t&&(n=!1);else{if("/"===t){i=!0;break}"["===t&&(n=!0)}return i||Wc({},mc),{value:e.substr(1,e.length-2),literal:e}}(),s=function(){var t,e,n;for(e="",n="";uc<cc&&Sc((t=lc[uc]).charCodeAt(0));)++uc,"\\"===t&&uc<cc?Wc({},fc,yc):(n+=t,e+=t);return n.search(/[^gimuy]/g)>=0&&Wc({},pc,n),{value:n,literal:e}}(),o=function(t,e){let n=t;e.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(t,e)=>{if(parseInt(e,16)<=1114111)return"x";Wc({},pc)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(i){Wc({},pc)}try{return new RegExp(t,e)}catch(r){return null}}(r.value,s.value),{literal:r.literal+s.literal,value:o,regex:{pattern:r.value,flags:s.value},start:i,end:uc})),$c()):Gc(Lc())}return n}function eh(){const t=[];if(Xc("("),!Yc(")"))for(;uc<cc&&(t.push(oh()),!Yc(")"));)Xc(",");return Xc(")"),t}function nh(){Xc("[");const t=ah();return Xc("]"),t}function ih(){const t=function(){var t;for(t=th();;)if(Yc("."))t=qc(".",t,(Xc("."),function(){uc=hc.start;const t=Lc();return function(t){return 3===t.type||4===t.type||1===t.type||5===t.type}(t)||Gc(t),Uc(t.value)}()));else if(Yc("("))t=jc(t,eh());else{if(!Yc("["))break;t=qc("[",t,nh())}return t}();if(7===hc.type&&(Yc("++")||Yc("--")))throw new Error(vc);return t}function rh(){var t,e;if(7!==hc.type&&4!==hc.type)e=ih();else{if(Yc("++")||Yc("--"))throw new Error(vc);if(Yc("+")||Yc("-")||Yc("~")||Yc("!"))t=Lc(),e=rh(),e=function(t,e){const n=new oc("UnaryExpression");return n.operator=t,n.argument=e,n.prefix=!0,n}(t.value,e);else{if(Kc("delete")||Kc("void")||Kc("typeof"))throw new Error(vc);e=ih()}}return e}function sh(t){let e=0;if(7!==t.type&&4!==t.type)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11}return e}function oh(){var t,e;return t=function(){var t,e,n,i,r,s,o,a,l,u;if(t=hc,l=rh(),0===(r=sh(i=hc)))return l;for(i.prec=r,Lc(),e=[t,hc],s=[l,i,o=rh()];(r=sh(hc))>0;){for(;s.length>2&&r<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,l=s.pop(),e.pop(),n=zc(a,l,o),s.push(n);(i=Lc()).prec=r,s.push(i),e.push(hc),n=rh(),s.push(n)}for(n=s[u=s.length-1],e.pop();u>1;)e.pop(),n=zc(s[u-1].value,s[u-2],n),u-=2;return n}(),Yc("?")&&(Lc(),e=oh(),Xc(":"),t=function(t,e,n){const i=new oc("ConditionalExpression");return i.test=t,i.consequent=e,i.alternate=n,i}(t,e,oh())),t}function ah(){const t=oh();if(Yc(","))throw new Error(vc);return t}function lh(t){const e=[];return"Identifier"===t.type?[t.name]:"Literal"===t.type?[t.value]:("MemberExpression"===t.type&&(e.push(...lh(t.object)),e.push(...lh(t.property))),e)}function uh(t){return"MemberExpression"===t.object.type?uh(t.object):"datum"===t.object.name}function ch(t){const e=function(t){uc=0,cc=(lc=t).length,hc=null,$c();const e=ah();if(2!==hc.type)throw new Error("Unexpect token after expression.");return e}(t),n=new Set;return e.visit(t=>{"MemberExpression"===t.type&&uh(t)&&n.add(lh(t).slice(1).join("."))}),n}class hh extends Wl{clone(){return new hh(null,this.model,d(this.filter))}constructor(t,e,n){super(t),this.model=e,this.filter=n,Dn(this,"expr",void 0),Dn(this,"_dependentFields",void 0),this.expr=ph(this.model,this.filter,this),this._dependentFields=ch(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function dh(t,n,i,r="datum"){const s=e.isString(n)?n:n.param,o=P(s),a=e.stringValue(o+Qu);let l;try{l=t.getSelectionComponent(o,s)}catch(h){return`!!${o}`}if(l.project.timeUnit){const e=null!=i?i:t.component.data.raw,n=l.project.timeUnit.clone();e.parent?n.insertAsParentOf(e):e.parent=n}const u=`vlSelectionTest(${a}, ${r}${"global"===l.resolve?")":`, ${e.stringValue(l.resolve)})`}`,c=`length(data(${a}))`;return!1===n.empty?`${c} && ${u}`:`!${c} || ${u}`}function fh(t,n,i){const r=P(n),s=i.encoding;let o,a=i.field;try{o=t.getSelectionComponent(r,n)}catch(l){return r}if(s||a){if(s&&!a){const t=o.project.items.filter(t=>t.channel===s);!t.length||t.length>1?(a=o.project.items[0].field,si((t.length?"Multiple ":"No ")+`matching ${e.stringValue(s)} encoding found for selection ${e.stringValue(i.param)}. `+`Using "field": ${e.stringValue(a)}.`)):a=t[0].field}}else a=o.project.items[0].field,o.project.items.length>1&&si(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${e.stringValue(a)}.`);return`${o.name}[${e.stringValue(z(a))}]`}function ph(t,n,i){return R(n,n=>e.isString(n)?n:function(t){return null==t?void 0:t.param}(n)?dh(t,n,i):Oi(n))}function mh(t,e,n,i){var r,s,o,a,l;null!==(r=t.encode)&&void 0!==r||(t.encode={}),null!==(o=(s=t.encode)[e])&&void 0!==o||(s[e]={}),null!==(l=(a=t.encode[e]).update)&&void 0!==l||(a.update={}),t.encode[e].update[n]=i}function gh(t,n,i,r={header:!1}){const{disable:s,orient:o,scale:a,labelExpr:l,title:u,zindex:c,...h}=t.combine();if(!s){for(const t in h){const i=eo[t],r=h[t];if(i&&i!==n&&"both"!==i)delete h[t];else if(Js(r)){const{condition:n,...i}=r,s=e.array(n),o=Qs[t];if(o){const{vgProp:e,part:n}=o;mh(h,n,e,[...s.map(t=>{const{test:e,...n}=t;return{test:ph(null,e),...n}}),i]),delete h[t]}else if(null===o){const e={signal:s.map(t=>{const{test:e,...n}=t;return`${ph(null,e)} ? ${mn(n)} : `}).join("")+mn(i)};h[t]=e}}else if(sn(r)){const e=Qs[t];if(e){const{vgProp:n,part:i}=e;mh(h,i,n,r),delete h[t]}}v(["labelAlign","labelBaseline"],t)&&null===h[t]&&delete h[t]}if("grid"===n){if(!h.grid)return;if(h.encode){const{grid:t}=h.encode;h.encode={...t?{grid:t}:{}},S(h.encode)&&delete h.encode}return{scale:a,orient:o,...h,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:q(c,0)}}{if(!r.header&&t.mainExtracted)return;if(void 0!==l){var d,f;let t=l;null!==(d=h.encode)&&void 0!==d&&null!==(f=d.labels)&&void 0!==f&&f.update&&sn(h.encode.labels.update.text)&&(t=j(l,"datum.label",h.encode.labels.update.text.signal)),mh(h,"labels","text",{signal:t})}if(null===h.labelAlign&&delete h.labelAlign,h.encode){for(const e of to)t.hasAxisPart(e)||delete h.encode[e];S(h.encode)&&delete h.encode}const n=function(t,n){if(t)return e.isArray(t)&&!rn(t)?t.map(t=>$s(t,n)).join(", "):t}(u,i);return{scale:a,orient:o,grid:!1,...n?{title:n}:{},...h,...!1===i.aria?{aria:!1}:{},zindex:q(c,0)}}}}function yh(t){const{axes:e}=t.component,n=[];for(const i of ye)if(e[i])for(const r of e[i])if(!r.get("disable")&&!r.get("gridScale")){const e="x"===i?"height":"width",r=t.getSizeSignalRef(e).signal;e!==r&&n.push({name:e,update:r})}return n}function vh(t,e,n,i){return Object.assign.apply(null,[{},...t.map(t=>{if("axisOrient"===t){const t="x"===n?"bottom":"left",r=e["x"===n?"axisBottom":"axisLeft"]||{},s=e["x"===n?"axisTop":"axisRight"]||{},o=new Set([...F(r),...F(s)]),a={};for(const e of o.values())a[e]={signal:`${i.signal} === "${t}" ? ${gn(r[e])} : ${gn(s[e])}`};return a}return e[t]})])}function _h(t,n){const i=[{}];for(const s of t){var r;let t=null===(r=n[s])||void 0===r?void 0:r.style;if(t){t=e.array(t);for(const e of t)i.push(n.style[e])}}return Object.assign.apply(null,i)}function bh(t,e,n,i={}){const r=wn(t,n,e);if(void 0!==r)return{configFrom:"style",configValue:r};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"]){var s;if(void 0!==(null===(s=i[o])||void 0===s?void 0:s[t]))return{configFrom:o,configValue:i[o][t]}}return{}}const xh={scale:({model:t,channel:e})=>t.scaleName(e),format:({fieldOrDatumDef:t,config:e,axis:n})=>{const{format:i,formatType:r}=n;return Kr(t,t.type,i,r,e,!0)},formatType:({axis:t,fieldOrDatumDef:e,scaleType:n})=>{const{formatType:i}=t;return Zr(i,e,n)},grid:({fieldOrDatumDef:t,axis:e,scaleType:n})=>{var i;return null!==(i=e.grid)&&void 0!==i?i:function(t,e){return!Qi(t)&&_s(e)&&!Ye(null==e?void 0:e.bin)&&!Ke(null==e?void 0:e.bin)}(n,t)},gridScale:({model:t,channel:e})=>function(t,e){const n="x"===e?"y":"x";if(t.getScaleComponent(n))return t.scaleName(n)}(t,e),labelAlign:({axis:t,labelAngle:e,orient:n,channel:i})=>t.labelAlign||Ah(e,n,i),labelAngle:({labelAngle:t})=>t,labelBaseline:({axis:t,labelAngle:e,orient:n,channel:i})=>t.labelBaseline||Ch(e,n,i),labelFlush:({axis:t,fieldOrDatumDef:e,channel:n})=>{var i;return null!==(i=t.labelFlush)&&void 0!==i?i:function(t,e){if("x"===e&&v(["quantitative","temporal"],t))return!0}(e.type,n)},labelOverlap:({axis:t,fieldOrDatumDef:n,scaleType:i})=>{var r;return null!==(r=t.labelOverlap)&&void 0!==r?r:function(t,n,i,r){if(i&&!e.isObject(r)||"nominal"!==t&&"ordinal"!==t)return"log"!==n&&"symlog"!==n||"greedy"}(n.type,i,_s(n)&&!!n.timeUnit,_s(n)?n.sort:void 0)},orient:({orient:t})=>t,tickCount:({channel:t,model:e,axis:n,fieldOrDatumDef:i,scaleType:r})=>{var s;const o="x"===t?"width":"y"===t?"height":void 0,a=o?e.getSizeSignalRef(o):void 0;return null!==(s=n.tickCount)&&void 0!==s?s:function({fieldOrDatumDef:t,scaleType:e,size:n,values:i}){if(!i&&!Qi(e)&&"log"!==e){if(_s(t)){var r;if(Ye(t.bin))return{signal:`ceil(${n.signal}/10)`};if(t.timeUnit&&v(["month","hours","day","quarter"],null===(r=bi(t.timeUnit))||void 0===r?void 0:r.unit))return}return{signal:`ceil(${n.signal}/40)`}}}({fieldOrDatumDef:i,scaleType:r,size:a,values:n.values})},title:({axis:t,model:e,channel:n})=>{if(void 0!==t.title)return t.title;const i=Eh(e,n);if(void 0!==i)return i;const r=e.typedFieldDef(n),s=e.fieldDef("x"===n?"x2":"y2");return An(r?[hs(r)]:[],_s(s)?[hs(s)]:[])},values:({axis:t,fieldOrDatumDef:n})=>function(t,n){const i=t.values;return e.isArray(i)?Ks(n,i):sn(i)?i:void 0}(t,n),zindex:({axis:t,fieldOrDatumDef:e,mark:n})=>{var i;return null!==(i=t.zindex)&&void 0!==i?i:function(t,e){return"rect"===t&&Ps(e)?1:0}(n,e)}};function wh(t){return`(((${t.signal} % 360) + 360) % 360)`}function Ch(t,e,n,i){if(void 0!==t){if("x"===n){if(sn(t)){const n=wh(t);return{signal:`(45 < ${n} && ${n} < 135) || (225 < ${n} && ${n} < 315) ? "middle" :(${n} <= 45 || 315 <= ${n}) === ${sn(e)?`(${e.signal} === "top")`:"top"===e} ? "bottom" : "top"`}}return 45<t&&t<135||225<t&&t<315?"middle":sn(e)?{signal:`${e.signal} ${t<=45||315<=t?"===":"!=="} "top" ? "bottom" : "top"`}:(t<=45||315<=t)==("top"===e)?"bottom":"top"}if(sn(t)){const n=wh(t);return{signal:`${n} <= 45 || 315 <= ${n} || (135 <= ${n} && ${n} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${n} && ${n} <= 135) === ${sn(e)?`(${e.signal} === "left")`:"left"===e} ? "top" : "bottom"`}}return t<=45||315<=t||135<=t&&t<=225?i?"middle":null:sn(e)?{signal:`${e.signal} ${45<=t&&t<=135?"===":"!=="} "left" ? "top" : "bottom"`}:(45<=t&&t<=135)==("left"===e)?"top":"bottom"}}function Ah(t,e,n){if(void 0===t)return;const i="x"===n,r=i?0:90,s=i?"bottom":"left";if(sn(t)){const n=wh(t);return{signal:`(${r?`(${n} + 90)`:n} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${n} && ${n} < ${180+r}) === ${sn(e)?`(${e.signal} === "${s}")`:e===s} ? "left" : "right"`}}return(t+r)%180==0?i?null:"center":sn(e)?{signal:`${e.signal} ${r<t&&t<180+r?"===":"!=="} "${s}" ? "left" : "right"`}:(r<t&&t<180+r)==(e===s)?"left":"right"}function Eh(t,e){const n="x"===e?"x2":"y2",i=t.fieldDef(e),r=t.fieldDef(n),s=i?i.title:void 0,o=r?r.title:void 0;return s&&o?En(s,o):s||o||(void 0!==s?s:void 0!==o?o:void 0)}class kh extends Wl{clone(){return new kh(null,d(this.transform))}constructor(t,e){super(t),this.transform=e,Dn(this,"_dependentFields",void 0),this._dependentFields=ch(this.transform.calculate)}static parseAllForSortIndex(t,e){return e.forEachFieldDef((e,n)=>{if(Ds(e)&&as(e.sort)){const{field:i,timeUnit:r}=e,s=e.sort,o=s.map((t,e)=>`${Oi({field:i,timeUnit:r,equal:t})} ? ${e} : `).join("")+s.length;t=new kh(t,{calculate:o,as:Dh(e,n,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${g(this.transform)}`}}function Dh(t,e,n){return Ts(t,{prefix:e,suffix:"sort_index",...null!=n?n:{}})}function Sh(t,e){return v(["top","bottom"],e)?"column":v(["left","right"],e)||"row"===t?"row":"column"}function Fh(t,e,n,i){return q((e||{})[t],("row"===i?n.headerRow:"column"===i?n.headerColumn:n.headerFacet)[t],n.header[t])}function Oh(t,e,n,i){const r={};for(const s of t){const t=Fh(s,e||{},n,i);void 0!==t&&(r[s]=t)}return r}const Mh=["row","column"],Th=["header","footer"];function Ph(t,e){const n=t.component.layoutHeaders[e].title,i=t.config?t.config:void 0,r=t.component.layoutHeaders[e].facetFieldDef?t.component.layoutHeaders[e].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=Oh(["titleAnchor","titleAngle","titleOrient"],r.header,i,e),l=Sh(e,a),u=Y(o);return{name:`${e}-title`,type:"group",role:`${l}-title`,title:{text:n,..."row"===e?{orient:"left"}:{},style:"guide-title",...Bh(u,l),...Rh(l,u,s),...Uh(i,r,e,Uo,zo)}}}function Rh(t,e,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=Ah(e,"row"===t?"left":"top","row"===t?"y":"x");return i?{align:i}:{}}function Bh(t,e){const n=Ch(t,"row"===e?"left":"top","row"===e?"y":"x",!0);return n?{baseline:n}:{}}function Ih(t,e){const n=t.component.layoutHeaders[e],i=[];for(const r of Th)if(n[r])for(const s of n[r]){const o=$h(t,e,r,n,s);null!=o&&i.push(o)}return i}function Nh(t,n){const{sort:i}=t;var r;return os(i)?{field:Ts(i,{expr:"datum"}),order:null!==(r=i.order)&&void 0!==r?r:"ascending"}:e.isArray(i)?{field:Dh(t,n,{expr:"datum"}),order:"ascending"}:{field:Ts(t,{expr:"datum"}),order:null!=i?i:"ascending"}}function Lh(t,e,n){const{format:i,formatType:r,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:l}=Oh(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],t.header,n,e),u=Gr({fieldOrDatumDef:t,format:i,formatType:r,expr:"parent",config:n}).signal,c=Sh(e,a);return{text:{signal:l?j(j(l,"datum.label",u),"datum.value",Ts(t,{expr:"parent"})):u},..."row"===e?{orient:"left"}:{},style:"guide-label",frame:"group",...Bh(s,c),...Rh(c,s,o),...Uh(n,t,e,Vo,jo)}}function $h(t,e,n,i,r){if(r){let s=null;const{facetFieldDef:o}=i,a=t.config?t.config:void 0;if(o&&r.labels){const{labelOrient:t}=Oh(["labelOrient"],o.header,a,e);("row"===e&&!v(["top","bottom"],t)||"column"===e&&!v(["left","right"],t))&&(s=Lh(o,e,a))}const l=Tf(t)&&!ls(t.facet),u=r.axes,c=(null==u?void 0:u.length)>0;if(s||c){const a="row"===e?"height":"width";return{name:t.getName(`${e}_${n}`),type:"group",role:`${e}-${n}`,...i.facetFieldDef?{from:{data:t.getName(`${e}_domain`)},sort:Nh(o,e)}:{},...c&&l?{from:{data:t.getName(`facet_domain_${e}`)}}:{},...s?{title:s}:{},...r.sizeSignal?{encode:{update:{[a]:r.sizeSignal}}}:{},...c?{axes:u}:{}}}}return null}const zh={column:{start:0,end:1},row:{start:1,end:0}};function jh(t,e){return zh[e][t]}function Uh(t,e,n,i,r){const s={};for(const o of i){if(!r[o])continue;const i=Fh(o,null==e?void 0:e.header,t,n);void 0!==i&&(s[r[o]]=i)}return s}function Vh(t){return[...qh(t,"width"),...qh(t,"height"),...qh(t,"childWidth"),...qh(t,"childHeight")]}function qh(t,e){const n="width"===e?"x":"y",i=t.component.layoutSize.get(e);if(!i||"merged"===i)return[];const r=t.getSizeSignalRef(e).signal;if("step"===i){const e=t.getScaleComponent(n);if(e){const i=e.get("type"),s=e.get("range");if(Qi(i)&&on(s)){const i=t.scaleName(n);return Tf(t.parent)&&"independent"===t.parent.component.resolve.scale[n]?[Hh(i,s)]:[Hh(i,s),{name:r,update:Wh(i,e,`domain('${i}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==i){const e=r.endsWith("width"),n=e?"containerSize()[0]":"containerSize()[1]",i=`isFinite(${n}) ? ${n} : ${oa(t.config.view,e?"width":"height")}`;return[{name:r,init:i,on:[{update:i,events:"window:resize"}]}]}return[{name:r,value:i}]}function Hh(t,e){return{name:`${t}_step`,value:e.step}}function Wh(t,e,n){const i=e.get("type"),r=e.get("padding"),s=q(e.get("paddingOuter"),r);let o=e.get("paddingInner");return o="band"===i?void 0!==o?o:r:1,`bandspace(${n}, ${gn(o)}, ${gn(s)}) * ${t}_step`}function Gh(t){return"childWidth"===t?"width":"childHeight"===t?"height":t}function Xh(t,e){return F(t).reduce((n,i)=>({...n,...ou(e,t[i],i,t=>pn(t.value))}),{})}function Yh(t,e){if(Rf(e)||Tf(e))return"shared";if(Pf(e))return ve(t)?"independent":"shared";throw new Error("invalid model type for resolve")}function Kh(t,e){const n=t.scale[e],i=ve(e)?"axis":"legend";return"independent"===n?("shared"===t[i][e]&&si(function(t){return`Setting the scale to be independent for "${t}" means we also have to set the guide (axis or legend) to be independent.`}(e)),"independent"):t[i][e]||"shared"}const Zh=F({aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1});class Qh extends vl{}const Jh={symbols:function(t,{fieldOrDatumDef:n,model:i,channel:r,legendCmpt:s,legendType:o}){var a,l,u,c;if("symbol"!==o)return;const{markDef:h,encoding:d,config:f,mark:p}=i,m=h.filled&&"trail"!==p;let g={...yn({},i,Tr),...gu(i,{filled:m})};const y=null!==(a=s.get("symbolOpacity"))&&void 0!==a?a:f.legend.symbolOpacity,v=null!==(l=s.get("symbolFillColor"))&&void 0!==l?l:f.legend.symbolFillColor,_=null!==(u=s.get("symbolStrokeColor"))&&void 0!==u?u:f.legend.symbolStrokeColor,b=void 0===y?null!==(c=td(d.opacity))&&void 0!==c?c:h.opacity:void 0;var x;if(g.fill)if("fill"===r||m&&r===dt)delete g.fill;else if(g.fill.field)v?delete g.fill:(g.fill=pn(null!==(x=f.legend.symbolBaseFillColor)&&void 0!==x?x:"black"),g.fillOpacity=pn(null!=b?b:1));else if(e.isArray(g.fill)){var w,C,A;const t=null!==(w=null!==(C=ed(null!==(A=d.fill)&&void 0!==A?A:d.color))&&void 0!==C?C:h.fill)&&void 0!==w?w:m&&h.color;t&&(g.fill=pn(t))}if(g.stroke)if("stroke"===r||!m&&r===dt)delete g.stroke;else if(g.stroke.field||_)delete g.stroke;else if(e.isArray(g.stroke)){const t=q(ed(d.stroke||d.color),h.stroke,m?h.color:void 0);t&&(g.stroke={value:t})}if(r!==vt){const t=_s(n)&&id(0,s,n);t?g.opacity=[{test:t,...pn(null!=b?b:1)},pn(f.legend.unselectedOpacity)]:b&&(g.opacity=pn(b))}return g={...g,...t},S(g)?void 0:g},gradient:function(t,{model:e,legendType:n,legendCmpt:i}){var r;if("gradient"!==n)return;const{config:s,markDef:o,encoding:a}=e;let l={};const u=void 0===(null!==(r=i.get("gradientOpacity"))&&void 0!==r?r:s.legend.gradientOpacity)?td(a.opacity)||o.opacity:void 0;return u&&(l.opacity=pn(u)),l={...l,...t},S(l)?void 0:l},labels:function(t,{fieldOrDatumDef:e,model:n,channel:i,legendCmpt:r}){const s=n.legend(i)||{},o=n.config,a=_s(e)?id(0,r,e):void 0,l=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=s,h=Hr(c)?Yr({fieldOrDatumDef:e,field:"datum.value",format:u,formatType:c,config:o}):void 0,d={...l?{opacity:l}:{},...h?{text:h}:{},...t};return S(d)?void 0:d},entries:function(t,{legendCmpt:e}){const n=e.get("selections");return null!=n&&n.length?{...t,fill:{value:"transparent"}}:t}};function td(t){return nd(t,(t,e)=>Math.max(t,e.value))}function ed(t){return nd(t,(t,e)=>q(t,e.value))}function nd(t,n){return function(t){const n=t&&t.condition;return!!n&&(e.isArray(n)||ks(n))}(t)?e.array(t.condition).reduce(n,t.value):ks(t)?t.value:void 0}function id(t,n,i){const r=n.get("selections");if(null==r||!r.length)return;const s=e.stringValue(i.field);return r.map(t=>`(!length(data(${e.stringValue(P(t)+Qu)})) || (${t}[${s}] && indexof(${t}[${s}], datum.value) >= 0))`).join(" || ")}const rd={direction:({direction:t})=>t,format:({fieldOrDatumDef:t,legend:e,config:n})=>{const{format:i,formatType:r}=e;return Kr(t,t.type,i,r,n,!1)},formatType:({legend:t,fieldOrDatumDef:e,scaleType:n})=>{const{formatType:i}=t;return Zr(i,e,n)},gradientLength:t=>{var e,n;const{legend:i,legendConfig:r}=t;return null!==(e=null!==(n=i.gradientLength)&&void 0!==n?n:r.gradientLength)&&void 0!==e?e:function({legendConfig:t,model:e,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=t;if(tr(r))return"horizontal"===n?"top"===i||"bottom"===i?od(e,"width",o,s):o:od(e,"height",l,a)}(t)},labelOverlap:({legend:t,legendConfig:e,scaleType:n})=>{var i,r;return null!==(i=null!==(r=t.labelOverlap)&&void 0!==r?r:e.labelOverlap)&&void 0!==i?i:function(t){if(v(["quantile","threshold","log","symlog"],t))return"greedy"}(n)},symbolType:({legend:t,markDef:e,channel:n,encoding:i})=>{var r;return null!==(r=t.symbolType)&&void 0!==r?r:function(t,e,n,i){if("shape"!==e){var r;const t=null!==(r=ed(n))&&void 0!==r?r:i;if(t)return t}switch(t){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(e.type,n,i.shape,e.shape)},title:({fieldOrDatumDef:t,config:e})=>Ns(t,e,{allowDisabling:!0}),type:({legendType:t,scaleType:e,channel:n})=>{if(It(n)&&tr(e)){if("gradient"===t)return}else if("symbol"===t)return;return t},values:({fieldOrDatumDef:t,legend:n})=>function(t,n){const i=t.values;return e.isArray(i)?Ks(n,i):sn(i)?i:void 0}(n,t)};function sd({legendConfig:t,legendType:e,orient:n,legend:i}){var r,s;return null!==(r=null!==(s=i.direction)&&void 0!==s?s:t[e?"gradientDirection":"symbolDirection"])&&void 0!==r?r:function(t,e){switch(t){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===e?"horizontal":void 0}}(n,e)}function od(t,e,n,i){return{signal:`clamp(${t.getSizeSignalRef(e).signal}, ${n}, ${i})`}}function ad(t){const e=Mf(t)?function(t){const{encoding:e}=t,n={};for(const i of[dt,...Ho]){const r=Us(e[i]);r&&t.getScaleComponent(i)&&(i===mt&&_s(r)&&r.type===Ni||(n[i]=ud(t,i)))}return n}(t):function(t){const{legends:e,resolve:n}=t.component;for(const i of t.children){ad(i);for(const r of F(i.component.legends))n.legend[r]=Kh(t.component.resolve,r),"shared"===n.legend[r]&&(e[r]=cd(e[r],i.component.legends[r]),e[r]||(n.legend[r]="independent",delete e[r]))}for(const i of F(e))for(const e of t.children)e.component.legends[i]&&"shared"===n.legend[i]&&delete e.component.legends[i];return e}(t);return t.component.legends=e,e}function ld(t,e,n,i){switch(e){case"disable":return void 0!==n;case"values":return!(null==n||!n.values);case"title":if("title"===e&&t===(null==i?void 0:i.title))return!0}return t===(n||{})[e]}function ud(t,e){var n,i,r;let s=t.legend(e);const{markDef:o,encoding:a,config:l}=t,u=l.legend,c=new Qh({},function(t,e){const n=t.scaleName(e);if("trail"===t.mark){if("color"===e)return{stroke:n};if("size"===e)return{strokeWidth:n}}return"color"===e?t.markDef.filled?{fill:n}:{stroke:n}:{[e]:n}}(t,e));!function(t,e,n){var i;const r=null===(i=t.fieldDef(e))||void 0===i?void 0:i.field;for(const l of O(null!==(s=t.component.selection)&&void 0!==s?s:{})){var s,o;const t=null!==(o=l.project.hasField[r])&&void 0!==o?o:l.project.hasChannel[e];if(t&&Vu.defined(l)){var a;const e=null!==(a=n.get("selections"))&&void 0!==a?a:[];e.push(l.name),n.set("selections",e,!1),t.hasLegend=!0}}}(t,e,c);const h=void 0!==s?!s:u.disable;if(c.set("disable",h,void 0!==s),h)return c;s=s||{};const d=t.getScaleComponent(e).get("type"),f=Us(a[e]),p=_s(f)?null===(n=bi(f.timeUnit))||void 0===n?void 0:n.unit:void 0,m=s.orient||l.legend.orient||"right",g=function(t){const{legend:e}=t;return q(e.type,function({channel:t,timeUnit:e,scaleType:n}){if(It(t)){if(v(["quarter","month","day"],e))return"symbol";if(tr(n))return"gradient"}return"symbol"}(t))}({legend:s,channel:e,timeUnit:p,scaleType:d}),y={legend:s,channel:e,model:t,markDef:o,encoding:a,fieldOrDatumDef:f,legendConfig:u,config:l,scaleType:d,orient:m,legendType:g,direction:sd({legend:s,legendType:g,orient:m,legendConfig:u})};for(const v of Zh){if("gradient"===g&&v.startsWith("symbol")||"symbol"===g&&v.startsWith("gradient"))continue;const n=v in rd?rd[v](y):s[v];if(void 0!==n){const i=ld(n,v,s,t.fieldDef(e));(i||void 0===l.legend[v])&&c.set(v,n,i)}}const _=null!==(i=null===(r=s)||void 0===r?void 0:r.encoding)&&void 0!==i?i:{},b=c.get("selections"),x={},w={fieldOrDatumDef:f,model:t,channel:e,legendCmpt:c,legendType:g};for(const v of["labels","legend","title","symbols","gradient","entries"]){var C;const e=Xh(null!==(C=_[v])&&void 0!==C?C:{},t),n=v in Jh?Jh[v](e,w):e;void 0===n||S(n)||(x[v]={...null!=b&&b.length&&_s(f)?{name:`${P(f.field)}_legend_${v}`}:{},...null!=b&&b.length?{interactive:!!b}:{},update:n})}var A;return S(x)||c.set("encode",x,!(null===(A=s)||void 0===A||!A.encoding)),c}function cd(t,e){if(!t)return e.clone();const n=t.getWithExplicit("orient"),i=e.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const u of Zh){const n=Cl(t.getWithExplicit(u),e.getWithExplicit(u),u,"legend",(t,e)=>{switch(u){case"symbolType":return"circle"===(n=e).value?n:t;case"title":return kn(t,e);case"type":return r=!0,bl("symbol")}var n;return wl(t,e,u,"legend")});t.setWithExplicit(u,n)}var s,o,a,l;return r&&(null!==(s=t.implicit)&&void 0!==s&&null!==(o=s.encode)&&void 0!==o&&o.gradient&&B(t.implicit,["encode","gradient"]),null!==(a=t.explicit)&&void 0!==a&&null!==(l=a.encode)&&void 0!==l&&l.gradient&&B(t.explicit,["encode","gradient"])),t}function hd(t){const e=t.component.legends,n={};for(const i of F(e)){const r=t.getScaleComponent(i),s=m(r.get("domains"));if(n[s])for(const t of n[s])cd(t,e[i])||n[s].push(e[i]);else n[s]=[e[i].clone()]}return O(n).flat().map(e=>function(t,e){var n;const{disable:i,labelExpr:r,selections:s,...o}=t.combine();if(!i){if(!1===e.aria&&null==o.aria&&(o.aria=!1),null!==(n=o.encode)&&void 0!==n&&n.symbols){const t=o.encode.symbols.update;!t.fill||"transparent"===t.fill.value||t.stroke||o.stroke||(t.stroke={value:"transparent"});for(const e of Ho)o[e]&&delete t[e]}if(o.title||delete o.title,void 0!==r){var a,l;let t=r;null!==(a=o.encode)&&void 0!==a&&null!==(l=a.labels)&&void 0!==l&&l.update&&sn(o.encode.labels.update.text)&&(t=j(r,"datum.label",o.encode.labels.update.text.signal)),function(t,e,n,i){var r,s,o,a,l;null!==(r=t.encode)&&void 0!==r||(t.encode={}),null!==(o=(s=t.encode)[e])&&void 0!==o||(s[e]={}),null!==(l=(a=t.encode[e]).update)&&void 0!==l||(a.update={}),t.encode[e].update.text=i}(o,"labels",0,{signal:t})}return o}}(e,t.config)).filter(t=>void 0!==t)}function dd(t){const e=t.component.projection;if(!e||e.merged)return[];const n=e.combine(),{name:i}=n;if(e.data){const r={signal:`[${e.size.map(t=>t.signal).join(", ")}]`},s=e.data.reduce((e,n)=>{const i=sn(n)?n.signal:`data('${t.lookupDataSource(n)}')`;return v(e,i)||e.push(i),e},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const fd=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class pd extends vl{constructor(t,e,n,i){super({...e},{name:t}),this.specifiedProjection=e,this.size=n,this.data=i,Dn(this,"merged",!1)}get isFit(){return!!this.data}}function md(t){t.component.projection=Mf(t)?function(t){if(t.hasProjection){var e;const n=en(t.specifiedProjection),i=!(n&&(null!=n.scale||null!=n.translate)),r=i?[t.getSizeSignalRef("width"),t.getSizeSignalRef("height")]:void 0,s=i?function(t){const e=[],{encoding:n}=t;for(const i of[[ut,lt],[ht,ct]])(Us(n[i[0]])||Us(n[i[1]]))&&e.push({signal:t.getName(`geojson_${e.length}`)});return t.channelHasField(mt)&&t.typedFieldDef(mt).type===Ni&&e.push({signal:t.getName(`geojson_${e.length}`)}),0===e.length&&e.push(t.requestDataName(Tl.Main)),e}(t):void 0,o=new pd(t.projectionName(!0),{...null!==(e=en(t.config.projection))&&void 0!==e?e:{},...null!=n?n:{}},r,s);return o.get("type")||o.set("type","equalEarth",!1),o}}(t):function(t){if(0===t.children.length)return;let n;for(const e of t.children)md(e);const i=b(t.children,t=>{const i=t.component.projection;if(i){if(n){const t=function(t,n){const i=b(fd,i=>!e.hasOwnProperty(t.explicit,i)&&!e.hasOwnProperty(n.explicit,i)||!!(e.hasOwnProperty(t.explicit,i)&&e.hasOwnProperty(n.explicit,i)&&h(t.get(i),n.get(i))));if(h(t.size,n.size)){if(i)return t;if(h(t.explicit,{}))return n;if(h(n.explicit,{}))return t}return null}(n,i);return t&&(n=t),!!t}return n=i,!0}return!0});if(n&&i){const e=t.projectionName(!0),i=new pd(e,n.specifiedProjection,n.size,d(n.data));for(const n of t.children){const t=n.component.projection;t&&(t.isFit&&i.data.push(...n.component.projection.data),n.renameProjection(t.get("name"),e),t.merged=!0)}return i}}(t)}function gd(t,e,n,i){if(Zs(e,n)){var r,s;const o=Mf(t)&&null!==(r=null!==(s=t.axis(n))&&void 0!==s?s:t.legend(n))&&void 0!==r?r:{},a=Ts(e,{expr:"datum"}),l=Ts(e,{expr:"datum",binSuffix:"end"});return{formulaAs:Ts(e,{binSuffix:"range",forAs:!0}),formula:es(a,l,o.format,o.formatType,i)}}return{}}function yd(t,e){return`${Xe(t)}_${e}`}function vd(t,e,n){var i;const r=yd(null!==(i=Ws(n,void 0))&&void 0!==i?i:{},e);return t.getName(`${r}_bins`)}function _d(t,n,i){let r,s;r=function(t){return"as"in t}(t)?e.isString(t.as)?[t.as,`${t.as}_end`]:[t.as[0],t.as[1]]:[Ts(t,{forAs:!0}),Ts(t,{binSuffix:"end",forAs:!0})];const o={...Ws(n,void 0)},a=yd(o,t.field),{signal:l,extentSignal:u}=function(t,e){return{signal:t.getName(`${e}_bins`),extentSignal:t.getName(`${e}_extent`)}}(i,a);if(Qe(o.extent)){const t=o.extent;s=fh(i,t.param,t),delete o.extent}return{key:a,binComponent:{bin:o,field:t.field,as:[r],...l?{signal:l}:{},...u?{extentSignal:u}:{},...s?{span:s}:{}}}}class bd extends Wl{clone(){return new bd(null,d(this.bins))}constructor(t,e){super(t),this.bins=e}static makeFromEncoding(t,e){const n=e.reduceFieldDef((t,n,i)=>{if(Es(n)&&Ye(n.bin)){const{key:r,binComponent:s}=_d(n,n.bin,e);t[r]={...s,...t[r],...gd(e,n,i,e.config)}}return t},{});return S(n)?null:new bd(t,n)}static makeFromTransform(t,e,n){const{key:i,binComponent:r}=_d(e,e.bin,n);return new bd(t,{[i]:r})}merge(t,e){for(const n of F(t.bins))n in this.bins?(e(t.bins[n].signal,this.bins[n].signal),this.bins[n].as=C([...this.bins[n].as,...t.bins[n].as],g)):this.bins[n]=t.bins[n];for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}producedFields(){return new Set(O(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(O(this.bins).map(t=>t.field))}hash(){return`Bin ${g(this.bins)}`}assemble(){return O(this.bins).flatMap(t=>{const e=[],[n,...i]=t.as,{extent:r,...s}=t.bin,o={type:"bin",field:z(t.field),as:n,signal:t.signal,...Qe(r)?{extent:null}:{extent:r},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!r&&t.extentSignal&&(e.push({type:"extent",field:z(t.field),signal:t.extentSignal}),o.extent={signal:t.extentSignal}),e.push(o);for(const a of i)for(let t=0;t<2;t++)e.push({type:"formula",expr:Ts({field:n[t]},{expr:"datum"}),as:a[t]});return t.formula&&e.push({type:"formula",expr:t.formula,as:t.formulaAs}),e})}}class xd extends Wl{clone(){return new xd(null,new Set(this.dimensions),d(this.measures))}constructor(t,e,n){super(t),this.dimensions=e,this.measures=n}get groupBy(){return this.dimensions}static makeFromEncoding(t,e){let n=!1;e.forEachFieldDef(t=>{t.aggregate&&(n=!0)});const i={},r=new Set;return n?(e.forEachFieldDef((t,n)=>{const{aggregate:s,field:o}=t;if(s)if("count"===s){var a;null!==(a=i["*"])&&void 0!==a||(i["*"]={}),i["*"].count=new Set([Ts(t,{forAs:!0})])}else{if(je(s)||Ue(s)){var l;const t=je(s)?"argmin":"argmax",e=s[t];null!==(l=i[e])&&void 0!==l||(i[e]={}),i[e][t]=new Set([Ts({op:t,field:e},{forAs:!0})])}else{var u;null!==(u=i[o])&&void 0!==u||(i[o]={}),i[o][s]=new Set([Ts(t,{forAs:!0})])}var c;Re(n)&&"unaggregated"===e.scaleDomain(n)&&(null!==(c=i[o])&&void 0!==c||(i[o]={}),i[o].min=new Set([Ts({field:o,aggregate:"min"},{forAs:!0})]),i[o].max=new Set([Ts({field:o,aggregate:"max"},{forAs:!0})]))}else!function(t,e,n,i){const r=Mf(i)?i.encoding[te(e)]:void 0;if(Es(n)&&Mf(i)&&ms(n,r,i.markDef,i.config))t.add(Ts(n,{})),t.add(Ts(n,{suffix:"end"})),n.bin&&Zs(n,e)&&t.add(Ts(n,{binSuffix:"range"}));else if(e in Pt){const n=function(t){switch(t){case lt:return"y";case ct:return"y2";case ut:return"x";case ht:return"x2"}}(e);t.add(i.getName(n))}else t.add(Ts(n))}(r,n,t,e)}),r.size+F(i).length===0?null:new xd(t,r,i)):null}static makeFromTransform(t,e){const n=new Set,i={};for(const a of e.aggregate){const{op:t,field:e,as:n}=a;var r,s;t&&("count"===t?(null!==(r=i["*"])&&void 0!==r||(i["*"]={}),i["*"].count=new Set([n||Ts(a,{forAs:!0})])):(null!==(s=i[e])&&void 0!==s||(i[e]={}),i[e][t]=new Set([n||Ts(a,{forAs:!0})])))}for(const a of null!==(o=e.groupby)&&void 0!==o?o:[]){var o;n.add(a)}return n.size+F(i).length===0?null:new xd(t,n,i)}merge(t){return A(this.dimensions,t.dimensions)?(function(t,e){for(const i of F(e)){const r=e[i];for(const e of F(r)){var n;i in t?t[i][e]=new Set([...null!==(n=t[i][e])&&void 0!==n?n:[],...r[e]]):t[i]={[e]:r[e]}}}}(this.measures,t.measures),!0):(ri.debug("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...F(this.measures)])}producedFields(){const t=new Set;for(const e of F(this.measures))for(const n of F(this.measures[e])){const i=this.measures[e][n];0===i.size?t.add(`${n}_${e}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${g({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],e=[],n=[];for(const i of F(this.measures))for(const r of F(this.measures[i]))for(const s of this.measures[i][r])n.push(s),t.push(r),e.push("*"===i?null:z(i));return{type:"aggregate",groupby:[...this.dimensions].map(z),ops:t,fields:e,as:n}}}class wd extends Wl{constructor(t,n,i,r){super(t),this.model=n,this.name=i,this.data=r,Dn(this,"column",void 0),Dn(this,"row",void 0),Dn(this,"facet",void 0),Dn(this,"childModel",void 0);for(const s of Lt){const t=n.facet[s];if(t){const{bin:i,sort:r}=t;this[s]={name:n.getName(`${s}_domain`),fields:[Ts(t),...Ye(i)?[Ts(t,{binSuffix:"end"})]:[]],...os(r)?{sortField:r}:e.isArray(r)?{sortIndexField:Dh(t,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const e of Lt)this[e]&&(t+=` ${e.charAt(0)}:${g(this[e])}`);return t}get fields(){const t=[];for(const n of Lt){var e;null!==(e=this[n])&&void 0!==e&&e.fields&&t.push(...this[n].fields)}return t}dependentFields(){const t=new Set(this.fields);for(const e of Lt)this[e]&&(this[e].sortField&&t.add(this[e].sortField.field),this[e].sortIndexField&&t.add(this[e].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const e of ye){const n=this.childModel.component.scales[e];if(n&&!n.merged){const i=n.get("type"),r=n.get("range");if(Qi(i)&&on(r)){const n=hf(df(this.childModel,e));n?t[e]=n:si(Rn(e))}}}return t}assembleRowColumnHeaderData(t,e,n){const i={row:"y",column:"x",facet:void 0}[t],r=[],s=[],o=[];i&&n&&n[i]&&(e?(r.push(`distinct_${n[i]}`),s.push("max")):(r.push(n[i]),s.push("distinct")),o.push(`distinct_${n[i]}`));const{sortField:a,sortIndexField:l}=this[t];if(a){const{op:t=ns,field:e}=a;r.push(e),s.push(t),o.push(Ts(a,{forAs:!0}))}else l&&(r.push(l),s.push("max"),o.push(l));return{name:this[t].name,source:null!=e?e:this.data,transform:[{type:"aggregate",groupby:this[t].fields,...r.length?{fields:r,ops:s,as:o}:{}}]}}assembleFacetHeaderData(t){const{columns:e}=this.model.layout,{layoutHeaders:n}=this.model.component,i=[],r={};for(const u of Mh){for(const t of Th){var s;const e=null!==(s=n[u]&&n[u][t])&&void 0!==s?s:[];for(const t of e){var o;if((null===(o=t.axes)||void 0===o?void 0:o.length)>0){r[u]=!0;break}}}if(r[u]){const t=`length(data("${this.facet.name}"))`;i.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:"row"===u?e?{signal:`ceil(${t} / ${e})`}:1:e?{signal:`min(${t}, ${e})`}:{signal:t}}]})}}const{row:a,column:l}=r;return(a||l)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let e=null;const n=this.getChildIndependentFieldsWithStep(),{column:i,row:r,facet:s}=this;if(i&&r&&(n.x||n.y)){var o,a;e=`cross_${this.column.name}_${this.row.name}`;const i=[].concat(null!==(o=n.x)&&void 0!==o?o:[],null!==(a=n.y)&&void 0!==a?a:[]),r=i.map(()=>"distinct");t.push({name:e,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:i,ops:r}]})}for(const l of[Q,Z])this[l]&&t.push(this.assembleRowColumnHeaderData(l,e,n));if(s){const e=this.assembleFacetHeaderData(n);e&&t.push(...e)}return t}}function Cd(t){return"'"===t[0]&&"'"===t[t.length-1]||'"'===t[0]&&'"'===t[t.length-1]?t.slice(1,-1):t}function Ad(t){const n={};return u(t.filter,t=>{if(Si(t)){let r=null;if(xi(t))r=dn(t.equal);else if(Ci(t))r=dn(t.lte);else if(wi(t))r=dn(t.lt);else if(Ai(t))r=dn(t.gt);else if(Ei(t))r=dn(t.gte);else if(ki(t))r=t.range[0];else if(Di(t)){var i;r=(null!==(i=t.oneOf)&&void 0!==i?i:t.in)[0]}r&&(oi(r)?n[t.field]="date":e.isNumber(r)?n[t.field]="number":e.isString(r)&&(n[t.field]="string")),t.timeUnit&&(n[t.field]="date")}}),n}class Ed extends Wl{clone(){return new Ed(null,d(this._parse))}constructor(t,e){super(t),Dn(this,"_parse",void 0),this._parse=e}hash(){return`Parse ${g(this._parse)}`}static makeExplicit(t,e,n){let i={};const r=e.data;return!Sl(r)&&r&&r.format&&r.format.parse&&(i=r.format.parse),this.makeWithAncestors(t,i,{},n)}static makeWithAncestors(t,e,n,i){for(const o of F(n)){const t=i.getWithExplicit(o);void 0!==t.value&&(t.explicit||t.value===n[o]||"derived"===t.value||"flatten"===n[o]?delete n[o]:si($n(o,n[o],t.value)))}for(const o of F(e)){const t=i.get(o);void 0!==t&&(t===e[o]?delete e[o]:si($n(o,e[o],t)))}const r=new vl(e,n);i.copyAll(r);const s={};for(const o of F(r.combine())){const t=r.get(o);null!==t&&(s[o]=t)}return 0===F(s).length||i.parseNothing?null:new Ed(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const e of F(this._parse)){const n=this._parse[e];1===V(e)&&(t[e]=n)}return t}producedFields(){return new Set(F(this._parse))}dependentFields(){return new Set(F(this._parse))}assembleTransforms(t=!1){return F(this._parse).filter(e=>!t||V(e)>1).map(t=>{const e=function(t,e){const n=N(t);return"number"===e?`toNumber(${n})`:"boolean"===e?`toBoolean(${n})`:"string"===e?`toString(${n})`:"date"===e?`toDate(${n})`:"flatten"===e?n:e.startsWith("date:")?`timeParse(${n},'${Cd(e.slice(5,e.length))}')`:e.startsWith("utc:")?`utcParse(${n},'${Cd(e.slice(4,e.length))}')`:(si(`Unrecognized parse "${e}".`),null)}(t,this._parse[t]);return e?{type:"formula",expr:e,as:U(t)}:null}).filter(t=>null!==t)}}class kd extends Wl{clone(){return new kd(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Wo])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Wo}}}class Dd extends Wl{clone(){return new Dd(null,this.params)}constructor(t,e){super(t),this.params=e}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${g(this.params)}`}assemble(){return{type:"graticule",...!0===this.params?{}:this.params}}}class Sd extends Wl{clone(){return new Sd(null,this.params)}constructor(t,e){super(t),this.params=e}dependentFields(){return new Set}producedFields(){var t;return new Set([null!==(t=this.params.as)&&void 0!==t?t:"data"])}hash(){return`Hash ${g(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Fd extends Wl{constructor(t){var e;let n;if(super(null),Dn(this,"_data",void 0),Dn(this,"_name",void 0),Dn(this,"_generator",void 0),null!==(e=t)&&void 0!==e||(t={name:"source"}),Sl(t)||(n=t.format?{...p(t.format,["parse"])}:{}),kl(t))this._data={values:t.values};else if(El(t)){if(this._data={url:t.url},!n.type){let e=/(?:\.([^.]+))?$/.exec(t.url)[1];v(["json","csv","tsv","dsv","topojson"],e)||(e="json"),n.type=e}}else Ol(t)?this._data={values:[{type:"Sphere"}]}:(Dl(t)||Sl(t))&&(this._data={});this._generator=Sl(t),t.name&&(this._name=t.name),n&&!S(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}function Od(t){return t instanceof Fd||t instanceof Dd||t instanceof Sd}var Md=new WeakMap;class Td{constructor(){Md.set(this,{writable:!0,value:void 0}),Sn(this,Md,!1)}setModified(){Sn(this,Md,!0)}get modifiedFlag(){return function(t,e){return e.get?e.get.call(t):e.value}(this,Fn(this,Md,"get"))}}class Pd extends Td{getNodeDepths(t,e,n){n.set(t,e);for(const i of t.children)this.getNodeDepths(i,e+1,n);return n}optimize(t){const e=[...this.getNodeDepths(t,0,new Map).entries()].sort((t,e)=>e[1]-t[1]);for(const n of e)this.run(n[0]);return this.modifiedFlag}}class Rd extends Td{optimize(t){this.run(t);for(const e of t.children)this.optimize(e);return this.modifiedFlag}}class Bd extends Rd{mergeNodes(t,e){const n=e.shift();for(const i of e)t.removeChild(i),i.parent=n,i.remove()}run(t){const e=t.children.map(t=>t.hash()),n={};for(let i=0;i<e.length;i++)void 0===n[e[i]]?n[e[i]]=[t.children[i]]:n[e[i]].push(t.children[i]);for(const i of F(n))n[i].length>1&&(this.setModified(),this.mergeNodes(t,n[i]))}}class Id extends Rd{constructor(t){super(),Dn(this,"requiresSelectionId",void 0),this.requiresSelectionId=t&&rc(t)}run(t){t instanceof kd&&(this.requiresSelectionId&&(Od(t.parent)||t.parent instanceof xd||t.parent instanceof Ed)||(this.setModified(),t.remove()))}}class Nd extends Td{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,e){let n=new Set;t instanceof Xl&&(n=t.producedFields(),E(n,e)&&(this.setModified(),t.removeFormulas(e),0===t.producedFields.length&&t.remove()));for(const i of t.children)this.run(i,new Set([...e,...n]))}}class Ld extends Rd{constructor(){super()}run(t){t instanceof Gl&&!t.isRequired()&&(this.setModified(),t.remove())}}class $d extends Pd{run(t){if(!(Od(t)||t.numChildren()>1))for(const e of t.children)if(e instanceof Ed)if(t instanceof Ed)this.setModified(),t.merge(e);else{if(D(t.producedFields(),e.dependentFields()))continue;this.setModified(),e.swapWithParent()}}}class zd extends Pd{run(t){const e=[...t.children],n=t.children.filter(t=>t instanceof Ed);if(t.numChildren()>1&&n.length>=1){const i={},r=new Set;for(const t of n){const e=t.parse;for(const t of F(e))t in i?i[t]!==e[t]&&r.add(t):i[t]=e[t]}for(const t of r)delete i[t];if(!S(i)){this.setModified();const n=new Ed(t,i);for(const r of e){if(r instanceof Ed)for(const t of F(i))delete r.parse[t];t.removeChild(r),r.parent=n,r instanceof Ed&&0===F(r.parse).length&&r.remove()}}}}}class jd extends Pd{run(t){t instanceof Gl||t.numChildren()>0||t instanceof wd||t instanceof Fd||(this.setModified(),t.remove())}}class Ud extends Pd{run(t){const e=t.children.filter(t=>t instanceof Xl),n=e.pop();for(const i of e)this.setModified(),n.merge(i)}}class Vd extends Pd{run(t){const e=t.children.filter(t=>t instanceof xd),n={};for(const i of e){const t=g(i.groupBy);t in n||(n[t]=[]),n[t].push(i)}for(const i of F(n)){const e=n[i];if(e.length>1){const n=e.pop();for(const i of e)n.merge(i)&&(t.removeChild(i),i.parent=n,i.remove(),this.setModified())}}}}class qd extends Pd{constructor(t){super(),this.model=t}run(t){const e=!(Od(t)||t instanceof hh||t instanceof Ed||t instanceof kd),n=[],i=[];for(const r of t.children)r instanceof bd&&(e&&!D(t.producedFields(),r.dependentFields())?n.push(r):i.push(r));if(n.length>0){const e=n.pop();for(const t of n)e.merge(t,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof bd?t.merge(e,this.model.renameSignal.bind(this.model)):e.swapWithParent()}if(i.length>1){const t=i.pop();for(const e of i)t.merge(e,this.model.renameSignal.bind(this.model));this.setModified()}}}class Hd extends Pd{run(t){const e=[...t.children];if(!_(e,t=>t instanceof Gl)||t.numChildren()<=1)return;const n=[];let i;for(const r of e)if(r instanceof Gl){let e=r;for(;1===e.numChildren();){const[t]=e.children;if(!(t instanceof Gl))break;e=t}n.push(...e.children),i?(t.removeChild(r),r.parent=i.parent,i.parent.removeChild(i),i.parent=e,this.setModified()):i=e}else n.push(r);if(n.length){this.setModified();for(const t of n)t.parent.removeChild(t),t.parent=i}}}class Wd extends Wl{clone(){return new Wd(null,d(this.transform))}constructor(t,e){super(t),this.transform=e}addDimensions(t){this.transform.groupby=C(this.transform.groupby.concat(t),t=>t)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(t=>t.field).filter(t=>void 0!==t).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){var e;return null!==(e=t.as)&&void 0!==e?e:Ts(t)}hash(){return`JoinAggregateTransform ${g(this.transform)}`}assemble(){const t=[],e=[],n=[];for(const r of this.transform.joinaggregate)e.push(r.op),n.push(this.getDefaultName(r)),t.push(void 0===r.field?null:r.field);const i=this.transform.groupby;return{type:"joinaggregate",as:n,ops:e,fields:t,...void 0!==i?{groupby:i}:{}}}}class Gd extends Wl{clone(){return new Gd(null,d(this._stack))}constructor(t,e){super(t),Dn(this,"_stack",void 0),this._stack=e}static makeFromTransform(t,n){const{stack:i,groupby:r,as:s,offset:o="zero"}=n,a=[],l=[];if(void 0!==n.sort)for(const e of n.sort)a.push(e.field),l.push(q(e.order,"ascending"));const u={field:a,order:l};let c;return c=function(t){return e.isArray(t)&&t.every(t=>e.isString(t))&&t.length>1}(s)?s:e.isString(s)?[s,`${s}_end`]:[`${n.stack}_start`,`${n.stack}_end`],new Gd(t,{stackField:i,groupby:r,offset:o,sort:u,facetby:[],as:c})}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannel:s,fieldChannel:o,offset:a,impute:l}=i;let u;s&&(u=js(r[s]));const c=function(t){return t.stack.stackBy.reduce((t,e)=>{const n=Ts(e.fieldDef);return n&&t.push(n),t},[])}(n),h=n.encoding.order;let d;return d=e.isArray(h)||_s(h)?Cn(h):c.reduce((t,e)=>(t.field.push(e),t.order.push("y"===o?"descending":"ascending"),t),{field:[],order:[]}),new Gd(t,{dimensionFieldDef:u,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:l,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${g(this._stack)}`}getGroupbyFields(){const{dimensionFieldDef:t,impute:e,groupby:n}=this._stack;return t?t.bin?e?[Ts(t,{binSuffix:"mid"})]:[Ts(t,{}),Ts(t,{binSuffix:"end"})]:[Ts(t)]:null!=n?n:[]}assemble(){const t=[],{facetby:e,dimensionFieldDef:n,stackField:i,stackby:r,sort:s,offset:o,impute:a,as:l}=this._stack;if(a&&n){const{bandPosition:s=.5,bin:o}=n;o&&t.push({type:"formula",expr:`${s}*`+Ts(n,{expr:"datum"})+`+${1-s}*`+Ts(n,{expr:"datum",binSuffix:"end"}),as:Ts(n,{binSuffix:"mid",forAs:!0})}),t.push({type:"impute",field:i,groupby:[...r,...e],key:Ts(n,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...e],field:i,sort:s,as:l,offset:o}),t}}class Xd extends Wl{clone(){return new Xd(null,d(this.transform))}constructor(t,e){super(t),this.transform=e}addDimensions(t){this.transform.groupby=C(this.transform.groupby.concat(t),t=>t)}dependentFields(){var t,e;const n=new Set;return(null!==(t=this.transform.groupby)&&void 0!==t?t:[]).forEach(n.add,n),(null!==(e=this.transform.sort)&&void 0!==e?e:[]).forEach(t=>n.add(t.field)),this.transform.window.map(t=>t.field).filter(t=>void 0!==t).forEach(n.add,n),n}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){var e;return null!==(e=t.as)&&void 0!==e?e:Ts(t)}hash(){return`WindowTransform ${g(this.transform)}`}assemble(){const t=[],e=[],n=[],i=[];for(const c of this.transform.window)e.push(c.op),n.push(this.getDefaultName(c)),i.push(void 0===c.param?null:c.param),t.push(void 0===c.field?null:c.field);const r=this.transform.frame,s=this.transform.groupby;if(r&&null===r[0]&&null===r[1]&&e.every(t=>Ve(t)))return{type:"joinaggregate",as:n,ops:e,fields:t,...void 0!==s?{groupby:s}:{}};const o=[],a=[];if(void 0!==this.transform.sort)for(const c of this.transform.sort){var l;o.push(c.field),a.push(null!==(l=c.order)&&void 0!==l?l:"ascending")}const u=this.transform.ignorePeers;return{type:"window",params:i,as:n,ops:e,fields:t,sort:{field:o,order:a},...void 0!==u?{ignorePeers:u}:{},...void 0!==s?{groupby:s}:{},...void 0!==r?{frame:r}:{}}}}function Yd(t){if(t instanceof wd)if(1!==t.numChildren()||t.children[0]instanceof Gl){const n=t.model.component.data.main;Kd(n);const i=(e=t,function t(n){if(!(n instanceof wd)){const i=n.clone();if(i instanceof Gl){const t=Zd+i.getSource();i.setSource(t),e.model.component.data.outputNodes[t]=i}else(i instanceof xd||i instanceof Gd||i instanceof Xd||i instanceof Wd)&&i.addDimensions(e.fields);for(const e of n.children.flatMap(t))e.parent=i;return[i]}return n.children.flatMap(t)}),r=t.children.map(i).flat();for(const t of r)t.parent=n}else{const e=t.children[0];(e instanceof xd||e instanceof Gd||e instanceof Xd||e instanceof Wd)&&e.addDimensions(t.fields),e.swapWithParent(),Yd(t)}else t.children.map(Yd);var e}function Kd(t){if(t instanceof Gl&&t.type===Tl.Main&&1===t.numChildren()){const e=t.children[0];e instanceof wd||(e.swapWithParent(),Kd(t))}}const Zd="scale_";function Qd(t){for(const e of t){for(const t of e.children)if(t.parent!==e)return!1;if(!Qd(e.children))return!1}return!0}function Jd(t,e){let n=!1;for(const i of e)n=t.optimize(i)||n;return n}function tf(t,e,n){let i=t.sources,r=!1;return r=Jd(new Ld,i)||r,r=Jd(new Id(e),i)||r,i=i.filter(t=>t.numChildren()>0),r=Jd(new jd,i)||r,i=i.filter(t=>t.numChildren()>0),n||(r=Jd(new $d,i)||r,r=Jd(new qd(e),i)||r,r=Jd(new Nd,i)||r,r=Jd(new zd,i)||r,r=Jd(new Vd,i)||r,r=Jd(new Ud,i)||r,r=Jd(new Bd,i)||r,r=Jd(new Hd,i)||r),t.sources=i,r}class ef{constructor(t){Dn(this,"signal",void 0),Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,e){return new ef(()=>t(e))}}function nf(t){Mf(t)?function(t){const e=t.component.scales;for(const n of F(e)){const i=rf(t,n);if(e[n].setWithExplicit("domains",i),lf(t,n),t.component.data.isFaceted){let e=t;for(;!Tf(e)&&e.parent;)e=e.parent;if("shared"===e.component.resolve.scale[n])for(const t of i.value)an(t)&&(t.data=Zd+t.data.replace(Zd,""))}}}(t):function(t){for(const n of t.children)nf(n);const e=t.component.scales;for(const n of F(e)){let i,r=null;for(const e of t.children){const t=e.component.scales[n];if(t){i=void 0===i?t.getWithExplicit("domains"):Cl(i,t.getWithExplicit("domains"),"domains","scale",cf);const e=t.get("selectionExtent");r&&e&&r.param!==e.param&&si("The same selection must be used to override scale domains in a layered view."),r=e}}e[n].setWithExplicit("domains",i),r&&e[n].set("selectionExtent",r,!0)}}(t)}function rf(t,e){const n=t.getScaleComponent(e).get("type"),{encoding:i}=t,r=function(t,e,n,i){if("unaggregated"===t){const{valid:t,reason:i}=uf(e,n);if(!t)return void si(i)}else if(void 0===t&&i.useUnaggregatedDomain){const{valid:t}=uf(e,n);if(t)return"unaggregated"}return t}(t.scaleDomain(e),t.typedFieldDef(e),n,t.config.scale);return r!==t.scaleDomain(e)&&(t.specifiedScales[e]={...t.specifiedScales[e],domain:r}),"x"===e&&Us(i.x2)?Us(i.x)?Cl(of(n,r,t,"x"),of(n,r,t,"x2"),"domain","scale",cf):of(n,r,t,"x2"):"y"===e&&Us(i.y2)?Us(i.y)?Cl(of(n,r,t,"y"),of(n,r,t,"y2"),"domain","scale",cf):of(n,r,t,"y2"):of(n,r,t,e)}function sf(t,e,n){var i;const r=null===(i=bi(n))||void 0===i?void 0:i.unit;return"temporal"===e||r?function(t,e,n){return t.map(t=>({signal:`{data: ${Ys(t,{timeUnit:n,type:e})}}`}))}(t,e,r):[t]}function of(t,n,i,r){const{encoding:s}=i,o=Us(s[r]),{type:a}=o,l=o.timeUnit;if(function(t){return t&&t.unionWith}(n)){const e=of(t,void 0,i,r),s=sf(n.unionWith,a,l);return _l([...e.value,...s])}if(sn(n))return _l([n]);if(n&&"unaggregated"!==n&&!nr(n))return _l(sf(n,a,l));const u=i.stack;if(u&&r===u.fieldChannel){if("normalize"===u.offset)return bl([[0,1]]);const t=i.requestDataName(Tl.Main);return bl([{data:t,field:i.vgField(r,{suffix:"start"})},{data:t,field:i.vgField(r,{suffix:"end"})}])}const c=Re(r)&&_s(o)?function(t,e,n){if(!Qi(n))return;const i=t.fieldDef(e),r=i.sort;if(as(r))return{op:"min",field:Dh(i,e),order:"ascending"};const{stack:s}=t,o=s?[...s.groupbyField?[s.groupbyField]:[],...s.stackBy.map(t=>t.fieldDef.field)]:void 0;if(os(r))return af(r,s&&!v(o,r.field));if(ss(r)){const{encoding:e,order:n}=r,i=t.fieldDef(e),{aggregate:a,field:l}=i,u=s&&!v(o,l);if(je(a)||Ue(a))return af({field:Ts(i),order:n},u);if(Ve(a)||!a)return af({op:a,field:l,order:n},u)}else{if("descending"===r)return{op:"min",field:t.vgField(e),order:"descending"};if(v(["ascending",void 0],r))return!0}}(i,r,t):void 0;if(xs(o))return bl(sf([o.datum],a,l));const h=o;if("unaggregated"===n){const t=i.requestDataName(Tl.Main),{field:e}=o;return bl([{data:t,field:Ts({field:e,aggregate:"min"})},{data:t,field:Ts({field:e,aggregate:"max"})}])}if(Ye(h.bin)){if(Qi(t))return bl("bin-ordinal"===t?[]:[{data:T(c)?i.requestDataName(Tl.Main):i.requestDataName(Tl.Raw),field:i.vgField(r,Zs(h,r)?{binSuffix:"range"}:{}),sort:!0!==c&&e.isObject(c)?c:{field:i.vgField(r,{}),op:"min"}}]);{const{bin:t}=h;if(Ye(t)){const e=vd(i,h.field,t);return bl([new ef(()=>{const t=i.getSignalName(e);return`[${t}.start, ${t}.stop]`})])}return bl([{data:i.requestDataName(Tl.Main),field:i.vgField(r,{})}])}}if(h.timeUnit&&v(["time","utc"],t)&&ms(h,Mf(i)?i.encoding[te(r)]:void 0,i.markDef,i.config)){const t=i.requestDataName(Tl.Main);return bl([{data:t,field:i.vgField(r)},{data:t,field:i.vgField(r,{suffix:"end"})}])}return bl(c?[{data:T(c)?i.requestDataName(Tl.Main):i.requestDataName(Tl.Raw),field:i.vgField(r),sort:c}]:[{data:i.requestDataName(Tl.Main),field:i.vgField(r)}])}function af(t,e){const{op:n,field:i,order:r}=t;return{op:null!=n?n:e?"sum":ns,...i?{field:z(i)}:{},...r?{order:r}:{}}}function lf(t,e){var n;const i=t.component.scales[e],r=t.specifiedScales[e].domain,s=null===(n=t.fieldDef(e))||void 0===n?void 0:n.bin,o=nr(r)&&r,a=Ze(s)&&Qe(s.extent)&&s.extent;(o||a)&&i.set("selectionExtent",null!=o?o:a,!0)}function uf(t,n){const{aggregate:i,type:r}=t;return i?e.isString(i)&&!Ge[i]?{valid:!1,reason:Yn(i)}:"quantitative"===r&&"log"===n?{valid:!1,reason:Kn(t)}:{valid:!0}:{valid:!1,reason:Xn(t)}}function cf(t,e,n,i){return t.explicit&&e.explicit&&si(function(t,e,n,i){return`Conflicting ${e.toString()} property "${t.toString()}" (${m(n)} and ${m(i)}). Using the union of the two domains.`}(n,i,t.value,e.value)),{explicit:t.explicit,value:[...t.value,...e.value]}}function hf(t){if(an(t)&&e.isString(t.field))return t.field;if(function(t){return!e.isArray(t)&&"fields"in t&&!("data"in t)}(t)){let n;for(const i of t.fields)if(an(i)&&e.isString(i.field))if(n){if(n!==i.field)return si("Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect."),n}else n=i.field;return si("Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect."),n}if(function(t){return!e.isArray(t)&&"fields"in t&&"data"in t}(t)){si("Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.");const n=t.fields[0];return e.isString(n)?n:void 0}}function df(t,n){return function(t){const n=C(t.map(t=>{if(an(t)){const{sort:e,...n}=t;return n}return t}),g),i=C(t.map(t=>{if(an(t)){const e=t.sort;return void 0===e||T(e)||("op"in e&&"count"===e.op&&delete e.field,"ascending"===e.order&&delete e.order),e}}).filter(t=>void 0!==t),g);if(0===n.length)return;if(1===n.length){const n=t[0];if(an(n)&&i.length>0){let t=i[0];return i.length>1?(si(Jn),t=!0):e.isObject(t)&&"field"in t&&n.field===t.field&&(t=!t.order||{order:t.order}),{...n,sort:t}}return n}const r=C(i.map(t=>T(t)||!("op"in t)||e.isString(t.op)&&t.op in ze?t:(si(function(t){return`Dropping sort property ${m(t)} as unioned domains only support boolean or op "count", "min", and "max".`}(t)),!0)),g);let s;1===r.length?s=r[0]:r.length>1&&(si(Jn),s=!0);const o=C(t.map(t=>an(t)?t.data:null),t=>t);return 1===o.length&&null!==o[0]?{data:o[0],fields:n.map(t=>t.field),...s?{sort:s}:{}}:{fields:n,...s?{sort:s}:{}}}(t.component.scales[n].get("domains").map(e=>(an(e)&&(e.data=t.lookupDataSource(e.data)),e)))}function ff(t){return Rf(t)||Pf(t)?t.children.reduce((t,e)=>t.concat(ff(e)),pf(t)):pf(t)}function pf(t){return F(t.component.scales).reduce((n,i)=>{const r=t.component.scales[i];if(r.merged)return n;const s=r.combine(),{name:o,type:a,selectionExtent:l,domains:u,range:c,reverse:h,...d}=s,f=function(t,n,i,r){if(ve(i)){if(on(t))return{step:{signal:`${n}_step`}}}else if(e.isObject(t)&&an(t))return{...t,data:r.lookupDataSource(t.data)};return t}(s.range,o,i,t),p=df(t,i),m=l?function(t,n,i,r){const s=fh(t,n.param,n);return{signal:Ji(i.get("type"))&&e.isArray(r)&&r[0]>r[1]?`isValid(${s}) && reverse(${s})`:s}}(t,l,r,p):null;return n.push({name:o,type:a,...p?{domain:p}:{},...m?{domainRaw:m}:{},range:f,...void 0!==h?{reverse:h}:{},...d}),n},[])}class mf extends vl{constructor(t,e){super({},{name:t}),Dn(this,"merged",!1),this.setWithExplicit("type",e)}domainDefinitelyIncludesZero(){return!1!==this.get("zero")||_(this.get("domains"),t=>e.isArray(t)&&2===t.length&&t[0]<=0&&t[1]>=0)}}const gf=["range","scheme"];function yf(t){return"x"===t?"width":"y"===t?"height":void 0}function vf(t,n){const i=t.fieldDef(n);if(null!=i&&i.bin){const{bin:r,field:s}=i,o=yf(n),a=t.getName(o);if(e.isObject(r)&&r.binned&&void 0!==r.step)return new ef(()=>{const e=t.scaleName(n),i=`(domain("${e}")[1] - domain("${e}")[0]) / ${r.step}`;return`${t.getSignalName(a)} / (${i})`});if(Ye(r)){const e=vd(t,s,r);return new ef(()=>{const n=t.getSignalName(e),i=`(${n}.stop - ${n}.start) / ${n}.step`;return`${t.getSignalName(a)} / (${i})`})}}}function _f(t,n){const i=n.specifiedScales[t],{size:r}=n,s=n.getScaleComponent(t).get("type");for(const u of gf)if(void 0!==i[u]){const r=hr(s,u),o=dr(t,u);if(r)if(o)si(o);else switch(u){case"range":{const r=i.range;if(e.isArray(r)){if(ve(t))return _l(r.map(t=>{if("width"===t||"height"===t){const e=n.getName(t),i=n.getSignalName.bind(n);return ef.fromName(i,e)}return t}))}else if(e.isObject(r))return _l({data:n.requestDataName(Tl.Main),field:r.field,sort:{op:"min",field:n.vgField(t)}});return _l(r)}case"scheme":return _l(bf(i[u]))}else si(Zn(s,u,t))}if(t===tt||t===et){const e=t===tt?"width":"height",n=r[e];if(ia(n)){if(Qi(s))return _l({step:n.step});si(Qn(e))}}const{rangeMin:o,rangeMax:a}=i,l=function(t,n){const{size:i,config:r,mark:s,encoding:o}=n,a=n.getSignalName.bind(n),{type:l}=Us(o[t]),u=n.getScaleComponent(t).get("type"),{domain:c,domainMid:h}=n.specifiedScales[t];switch(t){case tt:case et:{if(v(["point","band"],u))if(t!==tt||i.width){if(t===et&&!i.height){const t=la(r.view,"height");if(ia(t))return t}}else{const t=la(r.view,"width");if(ia(t))return t}const e=yf(t),s=n.getName(e);return t===et&&Ji(u)?[ef.fromName(a,s),0]:[0,ef.fromName(a,s)]}case gt:{const o=xf(s,n.component.scales[t].get("zero"),r),a=function(t,n,i,r){const s={x:vf(i,"x"),y:vf(i,"y")};switch(t){case"bar":case"tick":{if(void 0!==r.scale.maxBandSize)return r.scale.maxBandSize;const t=Cf(n,s,r.view);return e.isNumber(t)?t-1:new ef(()=>`${t.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const t=Cf(n,s,r.view);return e.isNumber(t)?Math.pow(wf*t,2):new ef(()=>`pow(0.95 * ${t.signal}, 2)`)}}throw new Error(qn("size",t))}(s,i,n,r);return er(u)?function(t,e,n){const i=()=>{const i=gn(e),r=gn(t),s=`(${i} - ${r}) / (${n} - 1)`;return`sequence(${r}, ${i} + ${s}, ${s})`};return sn(e)?new ef(i):{signal:i()}}(o,a,function(t,n,i,r){switch(t){case"quantile":return n.scale.quantileCount;case"quantize":return n.scale.quantizeCount;case"threshold":return void 0!==i&&e.isArray(i)?i.length+1:(si(function(t){return`Domain for ${t} is required for threshold scale.`}(r)),3)}}(u,r,c,t)):[o,a]}case ot:return[0,2*Math.PI];case yt:return[0,360];case rt:return[0,new ef(()=>`min(${n.getSignalName("width")},${n.getSignalName("height")})/2`)];case xt:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case wt:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case mt:return"symbol";case dt:case ft:case pt:return"ordinal"===u?"nominal"===l?"category":"ordinal":void 0!==h?"diverging":"rect"===s||"geoshape"===s?"heatmap":"ramp";case vt:case _t:case bt:return[r.scale.minOpacity,r.scale.maxOpacity]}throw new Error(`Scale range undefined for channel ${t}`)}(t,n);return(void 0!==o||void 0!==a)&&hr(s,"rangeMin")&&e.isArray(l)&&2===l.length?_l([null!=o?o:l[0],null!=a?a:l[1]]):bl(l)}function bf(t){return function(t){return!e.isString(t)&&!!t.name}(t)?{scheme:t.name,...p(t,["name"])}:{scheme:t}}function xf(t,e,n){if(e)return sn(e)?{signal:`${e.signal} ? 0 : ${xf(t,!1,n)}`}:0;switch(t){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(qn("size",t))}const wf=.95;function Cf(t,e,n){const i=ia(t.width)?t.width.step:aa(n,"width"),r=ia(t.height)?t.height.step:aa(n,"height");return e.x||e.y?new ef(()=>`min(${[e.x?e.x.signal:i,e.y?e.y.signal:r].join(", ")})`):Math.min(i,r)}function Af(t,e){Mf(t)?function(t,e){const n=t.component.scales,{config:i,encoding:r,markDef:s,specifiedScales:o}=t;for(const a of F(n)){const l=o[a],u=n[a],c=t.getScaleComponent(a),h=Us(r[a]),d=l[e],f=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=hr(f,e),y=dr(a,e);if(void 0!==d&&(g?y&&si(y):si(Zn(f,e,a))),g&&void 0===y)if(void 0!==d){const t=h.timeUnit,n=h.type;switch(e){case"domainMax":case"domainMin":oi(l[e])||"temporal"===n||t?u.set(e,{signal:Ys(l[e],{type:n,timeUnit:t})},!0):u.set(e,l[e],!0);break;default:u.copyKeyFromObject(e,l)}}else{const n=e in Ef?Ef[e]({model:t,channel:a,fieldOrDatumDef:h,scaleType:f,scalePadding:p,scalePaddingInner:m,domain:l.domain,markDef:s,config:i}):i.scale[e];void 0!==n&&u.set(e,n,!1)}}}(t,e):Df(t,e)}const Ef={bins:({model:t,fieldOrDatumDef:e})=>_s(e)?function(t,e){const n=e.bin;if(Ye(n)){const i=vd(t,e.field,n);return new ef(()=>t.getSignalName(i))}if(Ke(n)&&Ze(n)&&void 0!==n.step)return{step:n.step}}(t,e):void 0,interpolate:({channel:t,fieldOrDatumDef:e})=>function(t,e){if(v([dt,ft,pt],t)&&"nominal"!==e)return"hcl"}(t,e.type),nice:({scaleType:t,channel:n,domain:i,fieldOrDatumDef:r})=>function(t,n,i,r){var s;if(!(null!==(s=js(r))&&void 0!==s&&s.bin||e.isArray(i)||v([$i,zi],t)))return n in ge||void 0}(t,n,i,r),padding:({channel:t,scaleType:e,fieldOrDatumDef:n,markDef:i,config:r})=>function(t,e,n,i,r,s){if(t in ge){if(tr(e)){if(void 0!==n.continuousPadding)return n.continuousPadding;const{type:e,orient:o}=r;if("bar"===e&&(!_s(i)||!i.bin&&!i.timeUnit)&&("vertical"===o&&"x"===t||"horizontal"===o&&"y"===t))return s.continuousBandSize}if("point"===e)return n.pointPadding}}(t,e,r.scale,n,i,r.bar),paddingInner:({scalePadding:t,channel:e,markDef:n,config:i})=>function(t,e,n,i){if(void 0===t&&e in ge){const{bandPaddingInner:t,barBandPaddingInner:e,rectBandPaddingInner:r}=i;return q(t,"bar"===n?e:r)}}(t,e,n.type,i.scale),paddingOuter:({scalePadding:t,channel:e,scaleType:n,scalePaddingInner:i,config:r})=>function(t,e,n,i,r,s){if(void 0===t&&e in ge&&"band"===n){const{bandPaddingOuter:t}=s;return q(t,sn(r)?{signal:`${r.signal}/2`}:r/2)}}(t,e,n,0,i,r.scale),reverse:({fieldOrDatumDef:t,scaleType:e,channel:n,config:i})=>function(t,e,n,i){return"x"===n&&void 0!==i.xReverse?Ji(t)&&"descending"===e?sn(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse:!(!Ji(t)||"descending"!==e)||void 0}(e,_s(t)?t.sort:void 0,n,i.scale),zero:({channel:t,fieldOrDatumDef:n,domain:i,markDef:r,scaleType:s})=>function(t,n,i,r,s){if(i&&"unaggregated"!==i&&Ji(s)){if(e.isArray(i)){const t=i[i.length-1];if(i[0]<=0&&t>=0)return!0}return!1}if("size"===t&&"quantitative"===n.type&&!er(s))return!0;if((!_s(n)||!n.bin)&&v([...ye,...be],t)){const{orient:e,type:n}=r;return!v(["bar","area","line","trail"],n)||!("horizontal"===e&&"y"===t||"vertical"===e&&"x"===t)}return!1}(t,n,i,r,s)};function kf(t){Mf(t)?function(t){const e=t.component.scales;for(const n of Pe){const i=e[n];if(!i)continue;const r=_f(n,t);i.setWithExplicit("range",r)}}(t):Df(t,"range")}function Df(t,e){const n=t.component.scales;for(const i of t.children)"range"===e?kf(i):Af(i,e);for(const i of F(n)){let r;for(const n of t.children){const t=n.component.scales[i];t&&(r=Cl(r,t.getWithExplicit(e),e,"scale",xl((t,n)=>{switch(e){case"range":return t.step&&n.step?t.step-n.step:0}return 0})))}n[i].setWithExplicit(e,r)}}function Sf(t){t.component.scales=Mf(t)?function(t){const{encoding:e,mark:n,markDef:i}=t;return Pe.reduce((r,s)=>{const o=Us(e[s]);if(o&&n===Dr&&s===mt&&o.type===Ni)return r;let a=o&&o.scale;if(o&&null!==a&&!1!==a){var l;null!==(l=a)&&void 0!==l||(a={});const e=function(t,e,n,i){const r=function(t,e,n){switch(e.type){case"nominal":case"ordinal":var i;if(It(t)||"discrete"===Le(t))return"shape"===t&&"ordinal"===e.type&&si(Gn(t,"ordinal")),"ordinal";if(t in ge){if(v(["rect","bar","image","rule"],n.type))return"band"}else if("arc"===n.type&&t in _e)return"band";return Br(n[ee(t)])||Ss(e)&&null!==(i=e.axis)&&void 0!==i&&i.tickBand?"band":"point";case"temporal":return It(t)?"time":"discrete"===Le(t)?(si(Gn(t,"temporal")),"ordinal"):_s(e)&&e.timeUnit&&bi(e.timeUnit).utc?"utc":"time";case"quantitative":return It(t)?_s(e)&&Ye(e.bin)?"bin-ordinal":"linear":"discrete"===Le(t)?(si(Gn(t,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(jn(e.type))}(e,n,i),{type:s}=t;return Re(e)?void 0!==s?function(t,e){if(!Re(t))return!1;switch(t){case tt:case et:case ot:case rt:return tr(e)||v(["band","point"],e);case gt:case xt:case vt:case _t:case bt:case yt:return tr(e)||er(e)||v(["band","point","ordinal"],e);case dt:case ft:case pt:return"band"!==e;case wt:case mt:return"ordinal"===e||er(e)}}(e,s)?_s(n)&&(o=s,!(v([Ri,Ii],a=n.type)?void 0===o||Qi(o):a===Bi?v([$i,zi,void 0],o):a!==Pi||v(["log","pow","sqrt","symlog","quantile","quantize","threshold",Li,void 0],o)))?(si(function(t,e){return`FieldDef does not work with "${t}" scale. We are using "${e}" scale instead.`}(s,r)),r):s:(si(function(t,e,n){return`Channel "${t}" does not work with "${e}" scale. We are using "${n}" scale instead.`}(e,s,r)),r):r:null;var o,a}(a,s,o,i);r[s]=new mf(t.scaleName(`${s}`,!0),{value:e,explicit:a.type===e})}return r},{})}(t):function(t){const e=t.component.scales={},n={},i=t.component.resolve;for(const o of t.children){Sf(o);for(const e of F(o.component.scales)){var r,s;if(null!==(s=(r=i.scale)[e])&&void 0!==s||(r[e]=Yh(e,t)),"shared"===i.scale[e]){const t=n[e],r=o.component.scales[e].getWithExplicit("type");t?Ui(t.value,r.value)?n[e]=Cl(t,r,"type","scale",Ff):(i.scale[e]="independent",delete n[e]):n[e]=r}}}for(const o of F(n)){const i=t.scaleName(o,!0);e[o]=new mf(i,n[o]);for(const e of t.children){const t=e.component.scales[o];t&&(e.renameScale(t.get("name"),i),t.merged=!0)}}return e}(t)}const Ff=xl((t,e)=>qi(t)-qi(e));class Of{constructor(){Dn(this,"nameMap",void 0),this.nameMap={}}rename(t,e){this.nameMap[t]=e}has(t){return void 0!==this.nameMap[t]}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Mf(t){return"unit"===(null==t?void 0:t.type)}function Tf(t){return"facet"===(null==t?void 0:t.type)}function Pf(t){return"concat"===(null==t?void 0:t.type)}function Rf(t){return"layer"===(null==t?void 0:t.type)}class Bf{constructor(t,n,i,r,s,o,a){var l,u;this.type=n,this.parent=i,this.config=s,Dn(this,"name",void 0),Dn(this,"size",void 0),Dn(this,"title",void 0),Dn(this,"description",void 0),Dn(this,"data",void 0),Dn(this,"transforms",void 0),Dn(this,"layout",void 0),Dn(this,"scaleNameMap",void 0),Dn(this,"projectionNameMap",void 0),Dn(this,"signalNameMap",void 0),Dn(this,"component",void 0),Dn(this,"view",void 0),Dn(this,"children",[]),Dn(this,"correctDataNames",t=>(t.from&&t.from.data&&(t.from.data=this.lookupDataSource(t.from.data)),t.from&&t.from.facet&&t.from.facet.data&&(t.from.facet.data=this.lookupDataSource(t.from.facet.data)),t)),this.parent=i,this.config=s,this.view=en(a),this.name=null!==(l=t.name)&&void 0!==l?l:r,this.title=rn(t.title)?{text:t.title}:t.title?en(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new Of,this.projectionNameMap=i?i.projectionNameMap:new Of,this.signalNameMap=i?i.signalNameMap:new Of,this.data=t.data,this.description=t.description,this.transforms=(null!==(u=t.transform)&&void 0!==u?u:[]).map(t=>Va(t)?{filter:c(t.filter,Ti)}:t),this.layout="layer"===n||"unit"===n?{}:function(t,n,i){const r=i[n],s={},{spacing:o,columns:a}=r;void 0!==o&&(s.spacing=o),void 0!==a&&(cs(t)&&!ls(t.facet)||Qo(t))&&(s.columns=a),Jo(t)&&(s.columns=1);for(const c of sa)if(void 0!==t[c])if("spacing"===c){var l,u;const n=t[c];s[c]=e.isNumber(n)?n:{row:null!==(l=n.row)&&void 0!==l?l:o,column:null!==(u=n.column)&&void 0!==u?u:o}}else s[c]=t[c];return s}(t,n,s),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:cs(t)||i&&i.component.data.isFaceted&&void 0===t.data},layoutSize:new vl,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?d(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){!function(t,{ignoreRange:e}={}){Sf(t),nf(t);for(const n of cr)Af(t,n);e||kf(t)}(this)}parseProjection(){md(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){ad(this)}assembleGroupStyle(){var t,e;if("unit"===this.type||"layer"===this.type)return null!==(t=null===(e=this.view)||void 0===e?void 0:e.style)&&void 0!==t?t:"cell"}assembleEncodeFromView(t){const{style:e,...n}=t,i={};for(const r of F(n)){const t=n[r];void 0!==t&&(i[r]=pn(t))}return i}assembleGroupEncodeEntry(t){let e={};var n;return this.view&&(e=this.assembleEncodeFromView(this.view)),t||(this.description&&(e.description=pn(this.description)),"unit"!==this.type&&"layer"!==this.type)?S(e)?void 0:e:{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...null!==(n=e)&&void 0!==n?n:{}}}assembleLayout(){if(!this.layout)return;const{spacing:t,...e}=this.layout,{component:n,config:i}=this,r=function(t,e){const n={};for(const i of Lt){const r=t[i];if(null!=r&&r.facetFieldDef){const{titleAnchor:t,titleOrient:s}=Oh(["titleAnchor","titleOrient"],r.facetFieldDef.header,e,i),o=Sh(i,s),a=jh(t,o);void 0!==a&&(n[o]=a)}}return S(n)?void 0:n}(n.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...e,...r?{titleBand:r}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let e=[];for(const n of Lt)t[n].title&&e.push(Ph(this,n));for(const n of Mh)e=e.concat(Ih(this,n));return e}assembleAxes(){return function(t,e){const{x:n=[],y:i=[]}=t;return[...n.map(t=>gh(t,"grid",e)),...i.map(t=>gh(t,"grid",e)),...n.map(t=>gh(t,"main",e)),...i.map(t=>gh(t,"main",e))].filter(t=>t)}(this.component.axes,this.config)}assembleLegends(){return hd(this)}assembleProjections(){return Rf(t=this)||Pf(t)?function(t){return t.children.reduce((t,e)=>t.concat(e.assembleProjections()),dd(t))}(t):dd(t);var t}assembleTitle(){var t;const{encoding:e,...n}=null!==(t=this.title)&&void 0!==t?t:{},i={...nn(this.config.title).nonMark,...n,...e?{encode:{update:e}}:{}};var r,s;if(i.text)return v(["unit","layer"],this.type)?v(["middle",void 0],i.anchor)&&(null!==(r=i.frame)&&void 0!==r||(i.frame="group")):null!==(s=i.anchor)&&void 0!==s||(i.anchor="start"),S(i)?void 0:i}assembleGroup(t=[]){const e={};(t=t.concat(this.assembleSignals())).length>0&&(e.signals=t);const n=this.assembleLayout();n&&(e.layout=n),e.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Tf(this.parent)?ff(this):[];i.length>0&&(e.scales=i);const r=this.assembleAxes();r.length>0&&(e.axes=r);const s=this.assembleLegends();return s.length>0&&(e.legends=s),e}getName(t){return P((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Tl[t].toLowerCase())}requestDataName(t){const e=this.getDataName(t),n=this.component.data.outputNodeRefCounts;return n[e]=(n[e]||0)+1,e}getSizeSignalRef(t){if(Tf(this.parent)){const e=xe(Gh(t)),n=this.component.scales[e];if(n&&!n.merged){const t=n.get("type"),i=n.get("range");if(Qi(t)&&on(i)){const t=n.get("name"),i=hf(df(this,e));return i?{signal:Wh(t,n,Ts({aggregate:"distinct",field:i},{expr:"datum"}))}:(si(Rn(e)),null)}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const e=this.component.data.outputNodes[t];return e?e.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,e){this.signalNameMap.rename(t,e)}renameScale(t,e){this.scaleNameMap.rename(t,e)}renameProjection(t,e){this.projectionNameMap.rename(t,e)}scaleName(t,e){return e?this.getName(t):Yt(t)&&Re(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t))?this.scaleNameMap.get(this.getName(t)):void 0}projectionName(t){return t?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const e=this.component.scales[t];return e&&!e.merged?e:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,e){let n=this.component.selection[t];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(t,e)),!n)throw new Error(`Cannot find a selection named "${e}".`);return n}hasAxisOrientSignalRef(){var t,e;return(null===(t=this.component.axes.x)||void 0===t?void 0:t.some(t=>t.hasOrientSignalRef()))||(null===(e=this.component.axes.y)||void 0===e?void 0:e.some(t=>t.hasOrientSignalRef()))}}class If extends Bf{vgField(t,e={}){const n=this.fieldDef(t);if(n)return Ts(n,e)}reduceFieldDef(t,n){return function(t,n,i,r){return t?F(t).reduce((i,s)=>{const o=t[s];return e.isArray(o)?o.reduce((t,e)=>n.call(r,t,e,s),i):n.call(r,i,o,s)},i):i}(this.getMapping(),(e,n,i)=>{const r=js(n);return r?t(e,r,i):e},n)}forEachFieldDef(t,e){mo(this.getMapping(),(e,n)=>{const i=js(e);i&&t(i,n)},e)}}class Nf extends Wl{clone(){return new Nf(null,d(this.transform))}constructor(t,e){var n,i,r;super(t),this.transform=e,this.transform=d(e);const s=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(i=s[0])&&void 0!==i?i:"value",null!==(r=s[1])&&void 0!==r?r:"density"]}dependentFields(){var t;return new Set([this.transform.density,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${g(this.transform)}`}assemble(){const{density:t,...e}=this.transform;return{type:"kde",field:t,...e}}}class Lf extends Wl{clone(){return new Lf(null,{...this.filter})}constructor(t,e){super(t),this.filter=e}static make(t,e){const{config:n,mark:i,markDef:r}=e;if("filter"!==_n("invalid",r,n))return null;const s=e.reduceFieldDef((t,n,r)=>{const s=Re(r)&&e.getScaleComponent(r);return s&&Ji(s.get("type"))&&"count"!==n.aggregate&&!Sr(i)&&(t[n.field]=n),t},{});return F(s).length?new Lf(t,s):null}dependentFields(){return new Set(F(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${g(this.filter)}`}assemble(){const t=F(this.filter).reduce((t,e)=>{const n=this.filter[e],i=Ts(n,{expr:"datum"});return null!==n&&("temporal"===n.type?t.push(`(isDate(${i}) || (isValid(${i}) && isFinite(+${i})))`):"quantitative"===n.type&&(t.push(`isValid(${i})`),t.push(`isFinite(+${i})`))),t},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class $f extends Wl{clone(){return new $f(this.parent,d(this.transform))}constructor(t,e){super(t),this.transform=e,this.transform=d(e);const{flatten:n,as:i=[]}=this.transform;this.transform.as=n.map((t,e)=>{var n;return null!==(n=i[e])&&void 0!==n?n:t})}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${g(this.transform)}`}assemble(){const{flatten:t,as:e}=this.transform;return{type:"flatten",fields:t,as:e}}}class zf extends Wl{clone(){return new zf(null,d(this.transform))}constructor(t,e){var n,i,r;super(t),this.transform=e,this.transform=d(e);const s=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(i=s[0])&&void 0!==i?i:"key",null!==(r=s[1])&&void 0!==r?r:"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${g(this.transform)}`}assemble(){const{fold:t,as:e}=this.transform;return{type:"fold",fields:t,as:e}}}class jf extends Wl{clone(){return new jf(null,d(this.fields),this.geojson,this.signal)}static parseAll(t,e){if(e.component.projection&&!e.component.projection.isFit)return t;let n=0;for(const i of[[ut,lt],[ht,ct]]){const r=i.map(t=>{const n=Us(e.encoding[t]);return _s(n)?n.field:xs(n)?{expr:`${n.datum}`}:ks(n)?{expr:`${n.value}`}:void 0});(r[0]||r[1])&&(t=new jf(t,r,null,e.getName("geojson_"+n++)))}if(e.channelHasField(mt)){const i=e.typedFieldDef(mt);i.type===Ni&&(t=new jf(t,null,i.field,e.getName("geojson_"+n++)))}return t}constructor(t,e,n,i){super(t),this.fields=e,this.geojson=n,this.signal=i}dependentFields(){var t;const n=(null!==(t=this.fields)&&void 0!==t?t:[]).filter(e.isString);return new Set([...this.geojson?[this.geojson]:[],...n])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${g(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class Uf extends Wl{clone(){return new Uf(null,this.projection,d(this.fields),d(this.as))}constructor(t,e,n,i){super(t),this.projection=e,this.fields=n,this.as=i}static parseAll(t,e){if(!e.projectionName())return t;for(const n of[[ut,lt],[ht,ct]]){const i=n.map(t=>{const n=Us(e.encoding[t]);return _s(n)?n.field:xs(n)?{expr:`${n.datum}`}:ks(n)?{expr:`${n.value}`}:void 0}),r=n[0]===ht?"2":"";(i[0]||i[1])&&(t=new Uf(t,e.projectionName(),i,[e.getName(`x${r}`),e.getName(`y${r}`)]))}return t}dependentFields(){return new Set(this.fields.filter(e.isString))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${g(this.fields)} ${g(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Vf extends Wl{clone(){return new Vf(null,d(this.transform))}constructor(t,e){super(t),this.transform=e}dependentFields(){var t;return new Set([this.transform.impute,this.transform.key,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:e=0,stop:n,step:i}=t;return{signal:`sequence(${[e,n,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,e){return new Vf(t,e)}static makeFromEncoding(t,e){const n=e.encoding,i=n.x,r=n.y;if(_s(i)&&_s(r)){const s=i.impute?i:r.impute?r:void 0;if(void 0===s)return;const o=i.impute?r:r.impute?i:void 0,{method:a,value:l,frame:u,keyvals:c}=s.impute,h=go(e.mark,n);return new Vf(t,{impute:s.field,key:o.field,...a?{method:a}:{},...void 0!==l?{value:l}:{},...u?{frame:u}:{},...void 0!==c?{keyvals:c}:{},...h.length?{groupby:h}:{}})}return null}hash(){return`Impute ${g(this.transform)}`}assemble(){const{impute:t,key:e,keyvals:n,method:i,groupby:r,value:s,frame:o=[null,null]}=this.transform,a={type:"impute",field:t,key:e,...n?{keyvals:(l=n,void 0!==(null==l?void 0:l.stop)?this.processSequence(n):n)}:{},method:"value",...r?{groupby:r}:{},value:i&&"value"!==i?null:s};var l;return i&&"value"!==i?[a,{type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:o,ignorePeers:!1,...r?{groupby:r}:{}},{type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t}]:[a]}}class qf extends Wl{clone(){return new qf(null,d(this.transform))}constructor(t,e){var n,i,r;super(t),this.transform=e,this.transform=d(e);const s=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(i=s[0])&&void 0!==i?i:e.on,null!==(r=s[1])&&void 0!==r?r:e.loess]}dependentFields(){var t;return new Set([this.transform.loess,this.transform.on,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${g(this.transform)}`}assemble(){const{loess:t,on:e,...n}=this.transform;return{type:"loess",x:e,y:t,...n}}}class Hf extends Wl{clone(){return new Hf(null,d(this.transform),this.secondary)}constructor(t,e,n){super(t),this.transform=e,this.secondary=n}static make(t,e,n,i){const r=e.component.data.sources,{from:s}=n;let o=null;if(function(t){return"data"in t}(s)){let t=sp(s.data,r);t||(t=new Fd(s.data),r.push(t));const n=e.getName(`lookup_${i}`);o=new Gl(t,n,Tl.Lookup,e.component.data.outputNodeRefCounts),e.component.data.outputNodes[n]=o}else if(function(t){return"param"in t}(s)){const t=s.param;let i;n={as:t,...n};try{i=e.getSelectionComponent(P(t),t)}catch(a){throw new Error(`Lookups can only be performed on selection parameters. "${t}" is a variable parameter.`)}if(o=i.materialized,!o)throw new Error(`Cannot define and lookup the "${t}" selection in the same view. Try moving the lookup into a second, layered view?`)}return new Hf(t,n,o.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?e.array(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${g({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:e.array(this.transform.as)}:{}};else{let n=this.transform.as;e.isString(n)||(si('If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.'),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class Wf extends Wl{clone(){return new Wf(null,d(this.transform))}constructor(t,e){var n,i,r;super(t),this.transform=e,this.transform=d(e);const s=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(i=s[0])&&void 0!==i?i:"prob",null!==(r=s[1])&&void 0!==r?r:"value"]}dependentFields(){var t;return new Set([this.transform.quantile,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${g(this.transform)}`}assemble(){const{quantile:t,...e}=this.transform;return{type:"quantile",field:t,...e}}}class Gf extends Wl{clone(){return new Gf(null,d(this.transform))}constructor(t,e){var n,i,r;super(t),this.transform=e,this.transform=d(e);const s=null!==(n=this.transform.as)&&void 0!==n?n:[void 0,void 0];this.transform.as=[null!==(i=s[0])&&void 0!==i?i:e.on,null!==(r=s[1])&&void 0!==r?r:e.regression]}dependentFields(){var t;return new Set([this.transform.regression,this.transform.on,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${g(this.transform)}`}assemble(){const{regression:t,on:e,...n}=this.transform;return{type:"regression",x:e,y:t,...n}}}class Xf extends Wl{clone(){return new Xf(null,d(this.transform))}constructor(t,e){super(t),this.transform=e}addDimensions(t){var e;this.transform.groupby=C((null!==(e=this.transform.groupby)&&void 0!==e?e:[]).concat(t),t=>t)}producedFields(){}dependentFields(){var t;return new Set([this.transform.pivot,this.transform.value,...null!==(t=this.transform.groupby)&&void 0!==t?t:[]])}hash(){return`PivotTransform ${g(this.transform)}`}assemble(){const{pivot:t,value:e,groupby:n,limit:i,op:r}=this.transform;return{type:"pivot",field:t,value:e,...void 0!==i?{limit:i}:{},...void 0!==r?{op:r}:{},...void 0!==n?{groupby:n}:{}}}}class Yf extends Wl{clone(){return new Yf(null,d(this.transform))}constructor(t,e){super(t),this.transform=e}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${g(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Kf(t){let e=0;return function n(i,r){var s;if(i instanceof Fd&&!i.isGenerator&&!El(i.data)&&(t.push(r),r={name:null,source:r.name,transform:[]}),i instanceof Ed&&(i.parent instanceof Fd&&!r.source?(r.format={...null!==(s=r.format)&&void 0!==s?s:{},parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof wd)return r.name||(r.name="data_"+e++),!r.source||r.transform.length>0?(t.push(r),i.data=r.name):i.data=r.source,void t.push(...i.assemble());switch((i instanceof Dd||i instanceof Sd||i instanceof Lf||i instanceof hh||i instanceof kh||i instanceof Uf||i instanceof xd||i instanceof Hf||i instanceof Xd||i instanceof Wd||i instanceof zf||i instanceof $f||i instanceof Nf||i instanceof qf||i instanceof Wf||i instanceof Gf||i instanceof kd||i instanceof Yf||i instanceof Xf)&&r.transform.push(i.assemble()),(i instanceof bd||i instanceof Xl||i instanceof Vf||i instanceof Gd||i instanceof jf)&&r.transform.push(...i.assemble()),i instanceof Gl&&(r.source&&0===r.transform.length?i.setSource(r.source):i.parent instanceof Gl?i.setSource(r.name):(r.name||(r.name="data_"+e++),i.setSource(r.name),1===i.numChildren()&&(t.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof Gl&&(!r.source||r.transform.length>0)&&t.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name="data_"+e++);let s=r.name;!r.source||r.transform.length>0?t.push(r):s=r.source;for(const t of i.children)n(t,{name:null,source:s,transform:[]});break}}}}function Zf(t,n){const{facet:i,config:r,child:s,component:o}=t;if(t.channelHasField(n)){var a;const l=i[n],u=Fh("title",null,r,n);let c=Ns(l,r,{allowDisabling:!0,includeDefault:void 0===u||!!u});s.component.layoutHeaders[n].title&&(c=e.isArray(c)?c.join(", "):c,c+=` / ${s.component.layoutHeaders[n].title}`,s.component.layoutHeaders[n].title=null);const h=Fh("labelOrient",l.header,r,n),d=null!==l.header&&q(null===(a=l.header)||void 0===a?void 0:a.labels,r.header.labels,!0),f=v(["bottom","right"],h)?"footer":"header";o.layoutHeaders[n]={title:null!==l.header?c:null,facetFieldDef:l,[f]:"facet"===n?[]:[Qf(t,n,d)]}}}function Qf(t,e,n){const i="row"===e?"height":"width";return{labels:n,sizeSignal:t.child.component.layoutSize.get(i)?t.child.getSizeSignalRef(i):void 0,axes:[]}}function Jf(t,e){const{child:n}=t;if(n.component.axes[e]){const{layoutHeaders:s,resolve:o}=t.component;if(o.axis[e]=Kh(o,e),"shared"===o.axis[e]){const o="x"===e?"column":"row",a=s[o];for(const s of n.component.axes[e]){var i;const e="top"===(r=s.get("orient"))||"left"===r||sn(r)?"header":"footer";null!==(i=a[e])&&void 0!==i||(a[e]=[Qf(t,o,!1)]);const n=gh(s,"main",t.config,{header:!0});n&&a[e][0].axes.push(n),s.mainExtracted=!0}}}var r}function tp(t){for(const e of t.children)e.parseLayoutSize()}function ep(t,e){const n=Gh(e),i=xe(n),r=t.component.resolve,s=t.component.layoutSize;let o;for(const l of t.children){var a;const e=l.component.layoutSize.getWithExplicit(n),s=null!==(a=r.scale[i])&&void 0!==a?a:Yh(i,t);if("independent"===s&&"step"===e.value){o=void 0;break}if(o){if("independent"===s&&o.value!==e.value){o=void 0;break}o=Cl(o,e,n,"")}else o=e}if(o){for(const i of t.children)t.renameSignal(i.getName(n),t.getName(e)),i.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(e,o)}else s.setWithExplicit(e,{explicit:!1,value:void 0})}function np(t,e){const n=t.config,i=t.getScaleComponent("width"===e?"x":"y");if(i){const t=i.get("type"),r=i.get("range");if(Qi(t)){const t=la(n.view,e);return on(r)||ia(t)?"step":t}return oa(n.view,e)}if(t.hasProjection||"arc"===t.mark)return oa(n.view,e);{const t=la(n.view,e);return ia(t)?t.step:t}}function ip(t,e,n){return Ts(e,{suffix:`by_${Ts(t)}`,...null!=n?n:{}})}class rp extends If{constructor(t,e,n,i){super(t,"facet",e,n,i,t.resolve),Dn(this,"facet",void 0),Dn(this,"child",void 0),Dn(this,"children",void 0),this.child=Sp(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!ls(t))return{facet:this.initFacetFieldDef(t,"facet")};const e=F(t),n={};for(const i of e){if(![Z,Q].includes(i)){si(qn(i,"facet"));break}const e=t[i];if(void 0===e.field){si(Vn(e,i));break}n[i]=this.initFacetFieldDef(e,i)}return n}initFacetFieldDef(t,e){const n=Hs(t,e);return n.header?n.header=en(n.header):null===n.header&&(n.header=null),n}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=op(this),this.child.parseData()}parseLayoutSize(){tp(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),function(t){for(const e of Lt)Zf(t,e);Jf(t,"x"),Jf(t,"y")}(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const r of Lt)for(const s of Th){const o=this.component.layoutHeaders[r],a=o[s],{facetFieldDef:l}=o;if(l){const n=Fh("titleOrient",l.header,this.config,r);if(["right","bottom"].includes(n)){var e;const i=Sh(r,n);null!==(e=t.titleAnchor)&&void 0!==e||(t.titleAnchor={}),t.titleAnchor[i]="end"}}if(null!=a&&a[0]){const e="row"===r?"height":"width",a="header"===s?"headerBand":"footerBand";var n,i;"facet"===r||this.child.component.layoutSize.get(e)||(null!==(n=t[a])&&void 0!==n||(t[a]={}),t[a][r]=.5),o.title&&(null!==(i=t.offset)&&void 0!==i||(t.offset={}),t.offset["row"===r?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:e}=this.facet,n=t?this.columnDistinctSignal():e?1:void 0;let i="all";return(e||"independent"!==this.component.resolve.scale.x)&&(t||"independent"!==this.component.resolve.scale.y)||(i="none"),{...this.getHeaderLayoutMixins(),...n?{columns:n}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof rp))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroup(t){return this.parent&&this.parent instanceof rp?{...this.channelHasField("column")?{encode:{update:{columns:{field:Ts(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],e=[],n=[];if(this.child instanceof rp){if(this.child.channelHasField("column")){const i=Ts(this.child.facet.column);t.push(i),e.push("distinct"),n.push(`distinct_${i}`)}}else for(const i of ye){const r=this.child.component.scales[i];if(r&&!r.merged){const s=r.get("type"),o=r.get("range");if(Qi(s)&&on(o)){const r=hf(df(this.child,i));r?(t.push(r),e.push("distinct"),n.push(`distinct_${r}`)):si(Rn(i))}}}return{fields:t,ops:e,as:n}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),l=[];for(const c of Lt){const t=this.facet[c];if(t){l.push(Ts(t));const{bin:n,sort:u}=t;if(Ye(n)&&l.push(Ts(t,{binSuffix:"end"})),os(u)){const{field:e,op:n=ns}=u,l=ip(t,u);i&&r?(s.push(l),o.push("max"),a.push(l)):(s.push(e),o.push(n),a.push(l))}else if(e.isArray(u)){const e=Dh(t,c);s.push(e),o.push("max"),a.push(e)}}}const u=!!i&&!!r;return{name:t,data:n,groupby:l,...u||s.length>0?{aggregate:{...u?{cross:u}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,i=n[t];return i?os(i.sort)?[ip(i,i.sort,{expr:"datum"})]:e.isArray(i.sort)?[Dh(i,t,{expr:"datum"})]:[Ts(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:t}=i;return[(os(t)?t.order:!e.isArray(t)&&t)||"ascending"]}return[]}assembleLabelTitle(){const{facet:t,config:e}=this;if(t.facet)return Lh(t.facet,"facet",e);const n={row:["top","bottom"],column:["left","right"]};for(const r of Mh)if(t[r]){var i;const s=Fh("labelOrient",null===(i=t[r])||void 0===i?void 0:i.header,e,r);if(n[r].includes(s))return Lh(t[r],r,e)}}assembleMarks(){const{child:t}=this,e=function(t){const e=[],n=Kf(e);for(const i of t.children)n(i,{source:t.name,name:null,transform:[]});return e}(this.component.data.facetRoot),n=t.assembleGroupEncodeEntry(!1),i=this.assembleLabelTitle()||t.assembleTitle(),r=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...i?{title:i}:{},...r?{style:r}:{},from:{facet:this.assembleFacet()},sort:{field:Lt.map(t=>this.facetSortFields(t)).flat(),order:Lt.map(t=>this.facetSortOrder(t)).flat()},...e.length>0?{data:e}:{},...n?{encode:{update:n}}:{},...t.assembleGroup(Vl(this,[]))}]}getMapping(){return this.facet}}function sp(t,e){for(const o of e){var n,i,r,s;const e=o.data;if(t.name&&o.hasName()&&t.name!==o.dataName)continue;const a=null===(n=t.format)||void 0===n?void 0:n.mesh,l=null===(i=e.format)||void 0===i?void 0:i.feature;if(a&&l)continue;const u=null===(r=t.format)||void 0===r?void 0:r.feature;if((u||l)&&u!==l)continue;const c=null===(s=e.format)||void 0===s?void 0:s.mesh;if(!a&&!c||a===c)if(kl(t)&&kl(e)){if(h(t.values,e.values))return o}else if(El(t)&&El(e)){if(t.url===e.url)return o}else if(Dl(t)&&t.name===o.dataName)return o}return null}function op(t){var n,i,r;let s=function(t,e){if(t.data||!t.parent){if(null===t.data){const t=new Fd({values:[]});return e.push(t),t}const n=sp(t.data,e);if(n)return Sl(t.data)||(n.data.format=x({},t.data.format,n.data.format)),!n.hasName()&&t.data.name&&(n.dataName=t.data.name),n;{const n=new Fd(t.data);return e.push(n),n}}return t.parent.component.data.facetRoot?t.parent.component.data.facetRoot:t.parent.component.data.main}(t,t.component.data.sources);const{outputNodes:o,outputNodeRefCounts:a}=t.component.data,l=t.parent?t.parent.component.data.ancestorParse.clone():new Al,u=t.data;Sl(u)?(Fl(u)?s=new Sd(s,u.sequence):Ml(u)&&(s=new Dd(s,u.graticule)),l.parseNothing=!0):null===(null==u||null===(n=u.format)||void 0===n?void 0:n.parse)&&(l.parseNothing=!0),s=null!==(i=Ed.makeExplicit(s,t,l))&&void 0!==i?i:s,s=new kd(s);const c=t.parent&&Rf(t.parent);var h;(Mf(t)||Tf(t))&&c&&(s=null!==(h=bd.makeFromEncoding(s,t))&&void 0!==h?h:s),t.transforms.length>0&&(s=function(t,e,n){let i=0;for(const o of e.transforms){let a,l;if(tl(o))l=t=new kh(t,o),a="derived";else if(Va(o)){var r;const i=Ad(o);l=t=null!==(r=Ed.makeWithAncestors(t,{},i,n))&&void 0!==r?r:t,t=new hh(t,e,o.filter)}else if(el(o))l=t=bd.makeFromTransform(t,o,e),a="number";else if(il(o))a="date",void 0===n.getWithExplicit(o.field).value&&(t=new Ed(t,{[o.field]:a}),n.set(o.field,a,!1)),l=t=Xl.makeFromTransform(t,o);else if(rl(o))l=t=xd.makeFromTransform(t,o),a="number",rc(e)&&(t=new kd(t));else if(qa(o))l=t=Hf.make(t,e,o,i++),a="derived";else if(Za(o))l=t=new Xd(t,o),a="number";else if(Qa(o))l=t=new Wd(t,o),a="number";else if(sl(o))l=t=Gd.makeFromTransform(t,o),a="derived";else if(ol(o))l=t=new zf(t,o),a="derived";else if(Ja(o))l=t=new $f(t,o),a="derived";else if(Ha(o))l=t=new Xf(t,o),a="derived";else if(Ka(o))t=new Yf(t,o);else if(nl(o))l=t=Vf.makeFromTransform(t,o),a="derived";else if(Wa(o))l=t=new Nf(t,o),a="derived";else if(Ga(o))l=t=new Wf(t,o),a="derived";else if(Xa(o))l=t=new Gf(t,o),a="derived";else{if(!Ya(o)){si(`Ignoring an invalid transform: ${m(o)}.`);continue}l=t=new qf(t,o),a="derived"}if(l&&void 0!==a)for(const t of null!==(s=l.producedFields())&&void 0!==s?s:[]){var s;n.set(t,a,!1)}}return t}(s,t,l));const d=function(t){const e={};if(Mf(t)&&t.component.selection)for(const n of F(t.component.selection)){const i=t.component.selection[n];for(const t of i.project.items)!t.channel&&V(t.field)>1&&(e[t.field]="flatten")}return e}(t),f=function(t){const n={};function i(t){var i;Xs(t)?n[t.field]="date":"quantitative"===t.type&&e.isString(i=t.aggregate)&&v(["min","max"],i)?n[t.field]="number":V(t.field)>1?t.field in n||(n[t.field]="flatten"):Ds(t)&&os(t.sort)&&V(t.sort.field)>1&&(t.sort.field in n||(n[t.sort.field]="flatten"))}if((Mf(t)||Tf(t))&&t.forEachFieldDef((e,n)=>{if(Es(e))i(e);else{const r=Qt(n),s=t.fieldDef(r);i({...e,type:s.type})}}),Mf(t)){const{mark:e,markDef:i,encoding:r}=t;if(Sr(e)&&!t.encoding.order){const t=r["horizontal"===i.orient?"y":"x"];_s(t)&&"quantitative"===t.type&&!(t.field in n)&&(n[t.field]="number")}}return n}(t);var p,g;s=null!==(r=Ed.makeWithAncestors(s,{},{...d,...f},l))&&void 0!==r?r:s,Mf(t)&&(s=jf.parseAll(s,t),s=Uf.parseAll(s,t)),(Mf(t)||Tf(t))&&(c||(s=null!==(g=bd.makeFromEncoding(s,t))&&void 0!==g?g:s),s=null!==(p=Xl.makeFromEncoding(s,t))&&void 0!==p?p:s,s=kh.parseAllForSortIndex(s,t));const y=t.getDataName(Tl.Raw),_=new Gl(s,y,Tl.Raw,a);if(o[y]=_,s=_,Mf(t)){var b,w;const e=xd.makeFromEncoding(s,t);e&&(s=e,rc(t)&&(s=new kd(s))),s=null!==(b=Vf.makeFromEncoding(s,t))&&void 0!==b?b:s,s=null!==(w=Gd.makeFromEncoding(s,t))&&void 0!==w?w:s}var C;Mf(t)&&(s=null!==(C=Lf.make(s,t))&&void 0!==C?C:s);const A=t.getDataName(Tl.Main),E=new Gl(s,A,Tl.Main,a);o[A]=E,s=E,Mf(t)&&function(t,e){for(const[i,r]of M(null!==(n=t.component.selection)&&void 0!==n?n:{})){var n;const s=t.getName(`lookup_${i}`);t.component.data.outputNodes[s]=r.materialized=new Gl(new hh(e,t,{param:i}),s,Tl.Lookup,t.component.data.outputNodeRefCounts)}}(t,E);let k=null;if(Tf(t)){var D;const e=t.getName("facet");s=null!==(D=function(t,e){const{row:n,column:i}=e;if(n&&i){let e=null;for(const r of[n,i])if(os(r.sort)){const{field:n,op:i=ns}=r.sort;t=e=new Wd(t,{joinaggregate:[{op:i,field:n,as:ip(r,r.sort,{forAs:!0})}],groupby:[Ts(r)]})}return e}return null}(s,t.facet))&&void 0!==D?D:s,k=new wd(s,t,e,E.getSource()),o[e]=k}return{...t.component.data,outputNodes:o,outputNodeRefCounts:a,raw:_,main:E,facetRoot:k,ancestorParse:l}}class ap extends Bf{constructor(t,e,n,i){var r,s,o,a;super(t,"concat",e,n,i,t.resolve),Dn(this,"children",void 0),"shared"!==(null===(r=t.resolve)||void 0===r||null===(s=r.axis)||void 0===s?void 0:s.x)&&"shared"!==(null===(o=t.resolve)||void 0===o||null===(a=o.axis)||void 0===a?void 0:a.y)||si("Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415)."),this.children=this.getChildren(t).map((t,e)=>Sp(t,this,this.getName(`concat_${e}`),void 0,i))}parseData(){this.component.data=op(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const e of F(t.component.selection))this.component.selection[e]=t.component.selection[e]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return Jo(t)?t.vconcat:ta(t)?t.hconcat:t.concat}parseLayoutSize(){!function(t){tp(t);const e=void 0===t.layout.columns?"height":"childHeight";ep(t,1===t.layout.columns?"width":"childWidth"),ep(t,e)}(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((t,e)=>e.assembleSelectionTopLevelSignals(t),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Vh(this);for(const e of this.children)t.push(...e.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((t,e)=>e.assembleSelectionData(t),t)}assembleMarks(){return this.children.map(t=>{const e=t.assembleTitle(),n=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...e?{title:e}:{},...n?{style:n}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleDefaultLayout(){const t=this.layout.columns;return{...null!=t?{columns:t}:{},bounds:"full",align:"each"}}}const lp={disable:1,gridScale:1,scale:1,...no,labelExpr:1,encode:1},up=F(lp);class cp extends vl{constructor(t={},e={},n=!1){super(),this.explicit=t,this.implicit=e,this.mainExtracted=n}clone(){return new cp(d(this.explicit),d(this.implicit),this.mainExtracted)}hasAxisPart(t){return!("axis"!==t&&("grid"===t||"title"===t?!this.get(t):(e=this.get(t),!1===e||null===e)));var e}hasOrientSignalRef(){return sn(this.explicit.orient)}}const hp={bottom:"top",top:"bottom",left:"right",right:"left"};function dp(t,e){if(!t)return e.map(t=>t.clone());{if(t.length!==e.length)return;const n=t.length;for(let i=0;i<n;i++){const n=t[i],r=e[i];if(!!n!=!!r)return;if(n&&r){const e=n.getWithExplicit("orient"),s=r.getWithExplicit("orient");if(e.explicit&&s.explicit&&e.value!==s.value)return;t[i]=fp(n,r)}}}return t}function fp(t,e){for(const n of up){const i=Cl(t.getWithExplicit(n),e.getWithExplicit(n),n,"axis",(t,e)=>{switch(n){case"title":return kn(t,e);case"gridScale":return{explicit:t.explicit,value:q(t.value,e.value)}}return wl(t,e,n,"axis")});t.setWithExplicit(n,i)}return t}function pp(t,e,n,i,r){if("disable"===e)return void 0!==n;switch(n=n||{},e){case"titleAngle":case"labelAngle":return t===(sn(n.labelAngle)?n.labelAngle:Y(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(t===Eh(i,r))return!0}return t===n[e]}const mp=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function gp(t,e){var n,i,r,s,o;let a=e.axis(t);const l=new cp,u=Us(e.encoding[t]),{mark:c,config:h}=e,d=(null===(n=a)||void 0===n?void 0:n.orient)||(null===(i=h["x"===t?"axisX":"axisY"])||void 0===i?void 0:i.orient)||(null===(r=h.axis)||void 0===r?void 0:r.orient)||function(t){return"x"===t?"bottom":"left"}(t),f=e.getScaleComponent(t).get("type"),p=function(t,e,n,i){const r="band"===e?["axisDiscrete","axisBand"]:"point"===e?["axisDiscrete","axisPoint"]:function(t){return t in Gi}(e)?["axisQuantitative"]:"time"===e||"utc"===e?["axisTemporal"]:[],s="x"===t?"axisX":"axisY",o=sn(n)?"axisOrient":`axis${I(n)}`,a=[...r,...r.map(t=>s+t.substr(4))],l=["axis",o,s];return{vlOnlyAxisConfig:vh(a,i,t,n),vgAxisConfig:vh(l,i,t,n),axisConfigStyle:_h([...l,...a],i)}}(t,f,d,e.config),m=void 0!==a?!a:bh("disable",h.style,null===(s=a)||void 0===s?void 0:s.style,p).configValue;if(l.set("disable",m,void 0!==a),m)return l;a=a||{};const g=function(t,e,n,i,r){const s=null==e?void 0:e.labelAngle;if(void 0!==s)return sn(s)?s:Y(s);{const{configValue:s}=bh("labelAngle",i,null==e?void 0:e.style,r);return void 0!==s?Y(s):n!==tt||!v([Ii,Ri],t.type)||_s(t)&&t.timeUnit?void 0:270}}(u,a,t,h.style,p),y={fieldOrDatumDef:u,axis:a,channel:t,model:e,scaleType:f,orient:d,labelAngle:g,mark:c,config:h};for(const v of up){const n=v in xh?xh[v](y):ro(v)?a[v]:void 0,i=void 0!==n,r=pp(n,v,a,e,t);if(i&&r)l.set(v,n,r);else{const{configValue:t,configFrom:e}=ro(v)&&"values"!==v?bh(v,h.style,a.style,p):{},s=void 0!==t;i&&!s?l.set(v,n,r):("vgAxisConfig"!==e||mp.has(v)&&s||Js(t)||sn(t))&&l.set(v,t,!1)}}const _=null!==(o=a.encoding)&&void 0!==o?o:{},b=to.reduce((n,i)=>{var r;if(!l.hasAxisPart(i))return n;const s=Xh(null!==(r=_[i])&&void 0!==r?r:{},e),o="labels"===i?function(t,e,n){var i;const{encoding:r,config:s}=t,o=null!==(i=Us(r[e]))&&void 0!==i?i:Us(r[te(e)]),a=t.axis(e)||{},{format:l,formatType:u}=a;return Hr(u)?{text:Yr({fieldOrDatumDef:o,field:"datum.value",format:l,formatType:u,config:s}),...n}:n}(e,t,s):s;return void 0===o||S(o)||(n[i]={update:o}),n},{});return S(b)||l.set("encode",b,!!a.encoding||void 0!==a.labelAngle),l}function yp(t,e){return{...Tu(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),..._u("x",t,{defaultPos:"mid"}),..._u("y",t,{defaultPos:"mid"}),...mu("size",t),...mu("angle",t),...vp(t,0,e)}}function vp(t,e,n){return n?{shape:{value:n}}:mu("shape",t)}function _p(t,e,n){if(void 0===_n("align",t,n))return"center"}function bp(t,e,n){if(void 0===_n("baseline",t,n))return"middle"}function xp(t){var n;const{config:i,markDef:r}=t,{orient:s}=r,o="horizontal"===s?"width":"height",a=t.getScaleComponent("horizontal"===s?"x":"y"),l=null!==(n=_n("size",r,i,{vgChannel:o}))&&void 0!==n?n:i.tick.bandSize;if(void 0!==l)return l;{const t=a?a.get("range"):void 0;return t&&on(t)&&e.isNumber(t.step)?3*t.step/4:3*aa(i.view,o)/4}}const wp={arc:{vgMark:"arc",encodeEntry:t=>({...Tu(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),..._u("x",t,{defaultPos:"mid"}),..._u("y",t,{defaultPos:"mid"}),...Du(t,"radius","arc"),...Du(t,"theta","arc")})},area:{vgMark:"area",encodeEntry:t=>({...Tu(t,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...Au("x",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===t.markDef.orient}),...Au("y",t,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===t.markDef.orient}),...Bu(t)})},bar:{vgMark:"rect",encodeEntry:t=>({...Tu(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Du(t,"x","bar"),...Du(t,"y","bar")})},circle:{vgMark:"symbol",encodeEntry:t=>yp(t,"circle")},geoshape:{vgMark:"shape",encodeEntry:t=>({...Tu(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:t=>{const{encoding:e}=t,n=e.shape;return[{type:"geoshape",projection:t.projectionName(),...n&&_s(n)&&n.type===Ni?{field:Ts(n,{expr:"datum"})}:{}}]}},image:{vgMark:"image",encodeEntry:t=>({...Tu(t,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Du(t,"x","image"),...Du(t,"y","image"),...au(t,"url")})},line:{vgMark:"line",encodeEntry:t=>({...Tu(t,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),..._u("x",t,{defaultPos:"mid"}),..._u("y",t,{defaultPos:"mid"}),...mu("size",t,{vgChannel:"strokeWidth"}),...Bu(t)})},point:{vgMark:"symbol",encodeEntry:t=>yp(t)},rect:{vgMark:"rect",encodeEntry:t=>({...Tu(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Du(t,"x","rect"),...Du(t,"y","rect")})},rule:{vgMark:"rule",encodeEntry:t=>{const{markDef:e}=t,n=e.orient;return t.encoding.x||t.encoding.y||t.encoding.latitude||t.encoding.longitude?{...Tu(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Au("x",t,{defaultPos:"horizontal"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==n}),...Au("y",t,{defaultPos:"vertical"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==n}),...mu("size",t,{vgChannel:"strokeWidth"})}:{}}},square:{vgMark:"symbol",encodeEntry:t=>yp(t,"square")},text:{vgMark:"text",encodeEntry:t=>{const{config:e}=t;return{...Tu(t,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),..._u("x",t,{defaultPos:"mid"}),..._u("y",t,{defaultPos:"mid"}),...au(t),...mu("size",t,{vgChannel:"fontSize"}),...mu("angle",t),...Iu("align",_p(t.markDef,0,e)),...Iu("baseline",bp(t.markDef,0,e)),..._u("radius",t,{defaultPos:null}),..._u("theta",t,{defaultPos:null})}}},tick:{vgMark:"rect",encodeEntry:t=>{const{config:e,markDef:n}=t,i=n.orient,r="horizontal"===i?"width":"height",s="horizontal"===i?"height":"width";return{...Tu(t,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),..._u("x",t,{defaultPos:"mid",vgChannel:"xc"}),..._u("y",t,{defaultPos:"mid",vgChannel:"yc"}),...mu("size",t,{defaultValue:xp(t),vgChannel:r}),[s]:pn(_n("thickness",n,e))}}},trail:{vgMark:"trail",encodeEntry:t=>({...Tu(t,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),..._u("x",t,{defaultPos:"mid"}),..._u("y",t,{defaultPos:"mid"}),...mu("size",t),...Bu(t)})}};const Cp="faceted_path_",Ap="stack_group_";function Ep(t,n={fromPrefix:""}){const{mark:i,markDef:r,encoding:s,config:o}=t,a=q(r.clip,function(t){const e=t.getScaleComponent("x"),n=t.getScaleComponent("y");return!!(e&&e.get("selectionExtent")||n&&n.get("selectionExtent"))||void 0}(t),function(t){const e=t.component.projection;return!(!e||e.isFit)||void 0}(t)),l=vn(r),u=s.key,c=function(t){const{encoding:n,stack:i,mark:r,markDef:s,config:o}=t,a=n.order;if(!(!e.isArray(a)&&ks(a)&&y(a.value)||!a&&y(_n("order",s,o)))){if((e.isArray(a)||_s(a))&&!i)return Cn(a,{expr:"datum"});if(Sr(r)){const i="horizontal"===s.orient?"y":"x",r=n[i];if(_s(r)){const n=r.sort;return e.isArray(n)?{field:Ts(r,{prefix:i,suffix:"sort_index",expr:"datum"})}:os(n)?{field:Ts({aggregate:uo(t.encoding)?n.op:void 0,field:n.field},{expr:"datum"})}:ss(n)?{field:Ts(t.fieldDef(n.encoding),{expr:"datum"}),order:n.order}:null===n?void 0:{field:Ts(r,{binSuffix:t.stack&&t.stack.impute?"mid":void 0,expr:"datum"})}}}}}(t),h=function(t){if(!t.component.selection)return null;const e=F(t.component.selection).length;let n=e,i=t.parent;for(;i&&0===n;)n=F(i.component.selection).length,i=i.parent;return n?{interactive:e>0||!!t.encoding.tooltip}:null}(t),d=_n("aria",r,o),f=wp[i].postEncodingTransform?wp[i].postEncodingTransform(t):null;return[{name:t.getName("marks"),type:wp[i].vgMark,...a?{clip:!0}:{},...l?{style:l}:{},...u?{key:u.field}:{},...c?{sort:c}:{},...h||{},...!1===d?{aria:d}:{},from:{data:n.fromPrefix+t.requestDataName(Tl.Main)},encode:{update:wp[i].encodeEntry(t)},...f?{transform:f}:{}}]}class kp extends If{constructor(t,e,n,i={},r){var s;super(t,"unit",e,n,r,void 0,ra(t)?t.view:void 0),Dn(this,"markDef",void 0),Dn(this,"encoding",void 0),Dn(this,"specifiedScales",{}),Dn(this,"stack",void 0),Dn(this,"specifiedAxes",{}),Dn(this,"specifiedLegends",{}),Dn(this,"specifiedProjection",{}),Dn(this,"selection",[]),Dn(this,"children",[]);const o=Mr(t.mark)?{...t.mark}:{type:t.mark},a=o.type;void 0===o.filled&&(o.filled=function(t,e,{graticule:n}){if(n)return!1;const i=bn("filled",t,e),r=t.type;return q(i,r!==_r&&r!==vr&&r!==xr)}(o,r,{graticule:t.data&&Ml(t.data)}));const l=this.encoding=ho(t.encoding||{},a,o.filled,r);this.markDef=function(t,e,n){const i=en(t),r=_n("orient",i,n);if(i.orient=function(t,e,n){switch(t){case _r:case Er:case kr:case wr:case br:case yr:return}const{x:i,y:r,x2:s,y2:o}=e;switch(t){case gr:if(_s(i)&&(Ke(i.bin)||_s(r)&&r.aggregate&&!i.aggregate))return"vertical";if(_s(r)&&(Ke(r.bin)||_s(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s&&(_s(i)&&i.type===Pi&&!Ye(i.bin)||Cs(i)))return"horizontal";if(!o&&(_s(r)&&r.type===Pi&&!Ye(r.bin)||Cs(r)))return"vertical"}case xr:if(s&&(!_s(i)||!Ke(i.bin))&&o&&(!_s(r)||!Ke(r.bin)))return;case mr:if(o)return _s(r)&&Ke(r.bin)?"horizontal":"vertical";if(s)return _s(i)&&Ke(i.bin)?"vertical":"horizontal";if(t===xr){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case vr:case Cr:{const e=ws(i),s=ws(r);if(n)return n;if(e&&!s)return"tick"!==t?"horizontal":"vertical";if(!e&&s)return"tick"!==t?"vertical":"horizontal";if(e&&s){const e=i,n=r,s=e.type===Bi,o=n.type===Bi;return s&&!o?"tick"!==t?"vertical":"horizontal":!s&&o?"tick"!==t?"horizontal":"vertical":!e.aggregate&&n.aggregate?"tick"!==t?"vertical":"horizontal":e.aggregate&&!n.aggregate&&"tick"!==t?"horizontal":"vertical"}return}}return"vertical"}(i.type,e,r),void 0!==r&&r!==i.orient&&si(`Specified orient "${i.orient}" overridden with "${r}".`),"bar"===i.type&&i.orient){const t=_n("cornerRadiusEnd",i,n);if(void 0!==t){const n="horizontal"===i.orient&&e.x2||"vertical"===i.orient&&e.y2?["cornerRadius"]:Ir[i.orient];for(const e of n)i[e]=t;void 0!==i.cornerRadiusEnd&&delete i.cornerRadiusEnd}}return void 0===_n("opacity",i,n)&&(i.opacity=function(t,e){if(v([_r,Cr,Er,kr],t)&&!uo(e))return.7}(i.type,e)),void 0===_n("cursor",i,n)&&(i.cursor=function(t,e,n){return e.href||t.href||_n("href",t,n)?"pointer":t.cursor}(i,e,n)),i}(o,l,r),this.size=function({encoding:t,size:e}){for(const n of ye){const i=ee(n);ia(e[i])&&ws(t[n])&&(delete e[i],si(Qn(i)))}return e}({encoding:l,size:ra(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=Da(a,l),this.specifiedScales=this.initScales(a,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(null!==(s=t.params)&&void 0!==s?s:[]).filter(t=>Ko(t))}get hasProjection(){const{encoding:t}=this,e=this.mark===Dr,n=t&&Rt.some(e=>As(t[e]));return e||n}scaleDomain(t){const e=this.specifiedScales[t];return e?e.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,e){return Pe.reduce((t,n)=>{const i=Us(e[n]);var r;return i&&(t[n]=this.initScale(null!==(r=i.scale)&&void 0!==r?r:{})),t},{})}initScale(t){const{domain:n,range:i}=t,r=en(t);return e.isArray(n)&&(r.domain=n.map(dn)),e.isArray(i)&&(r.range=i.map(dn)),r}initAxes(t){return ye.reduce((e,n)=>{const i=t[n];if(As(i)||n===tt&&As(t.x2)||n===et&&As(t.y2)){const t=As(i)?i.axis:void 0;e[n]=t?this.initAxis({...t}):t}return e},{})}initAxis(t){const e=F(t),n={};for(const i of e){const e=t[i];n[i]=Js(e)?hn(e):dn(e)}return n}initLegends(t){return Me.reduce((e,n)=>{const i=Us(t[n]);if(i&&function(t){switch(t){case dt:case ft:case pt:case gt:case mt:case vt:case xt:case wt:return!0;case _t:case bt:case yt:return!1}}(n)){const t=i.legend;e[n]=t?en(t):t}return e},{})}parseData(){this.component.data=op(this)}parseLayoutSize(){!function(t){const{size:e,component:n}=t;for(const i of ye){const r=ee(i);if(e[r]){const t=e[r];n.layoutSize.set(r,ia(t)?"step":t,!0)}else{const e=np(t,r);n.layoutSize.set(r,e,!1)}}}(this)}parseSelections(){this.component.selection=function(t,n){const i={},r=t.config.selection;if(!n||!n.length)return i;for(const o of n){const n=P(o.name),a=o.select,l=e.isString(a)?a:a.type,u=e.isObject(a)?d(a):{type:l},{fields:c,encodings:h,...f}=r[l];for(const t in f){var s;"mark"===t&&(u[t]={...f[t],...u[t]}),(void 0===u[t]||!0===u[t])&&(u[t]=null!==(s=f[t])&&void 0!==s?s:u[t])}const p=i[n]={...u,name:n,type:l,init:o.value,bind:o.bind,events:e.isString(u.on)?Nl(u.on,"scope"):e.array(d(u.on))};for(const e of nc)e.defined(p)&&e.parse&&e.parse(t,p,o)}return i}(this,this.selection)}parseMarkGroup(){this.component.mark=function(t){if(v([vr,mr,Ar],t.mark)){const e=go(t.mark,t.encoding);if(e.length>0)return function(t,e){return[{name:t.getName("pathgroup"),type:"group",from:{facet:{name:Cp+t.requestDataName(Tl.Main),data:t.requestDataName(Tl.Main),groupby:e}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Ep(t,{fromPrefix:Cp})}]}(t,e)}else if(t.mark===gr){const e=cn.some(e=>_n(e,t.markDef,t.config));if(t.stack&&!t.fieldDef("size")&&e)return function(t){const[e]=Ep(t,{fromPrefix:Ap}),n=t.scaleName(t.stack.fieldChannel),i=(e={})=>t.vgField(t.stack.fieldChannel,e),r=(t,e)=>`${t}(${[i({prefix:"min",suffix:"start",expr:e}),i({prefix:"max",suffix:"start",expr:e}),i({prefix:"min",suffix:"end",expr:e}),i({prefix:"max",suffix:"end",expr:e})].map(t=>`scale('${n}',${t})`).join(",")})`;let s,o;"x"===t.stack.fieldChannel?(s={...f(e.encode.update,["y","yc","y2","height",...cn]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},e.encode.update={...p(e.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...f(e.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},e.encode.update={...p(e.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const l of cn){const n=bn(l,t.markDef,t.config);e.encode.update[l]?(s[l]=e.encode.update[l],delete e.encode.update[l]):n&&(s[l]=pn(n)),n&&(e.encode.update[l]={value:0})}const a=[];if(t.stack.groupbyChannel){const e=t.fieldDef(t.stack.groupbyChannel),n=Ts(e);n&&a.push(n),(null!=e&&e.bin||null!=e&&e.timeUnit)&&a.push(Ts(e,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((n,i)=>{if(e.encode.update[i])return{...n,[i]:e.encode.update[i]};{const e=bn(i,t.markDef,t.config);return void 0!==e?{...n,[i]:pn(e)}:n}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:t.requestDataName(Tl.Main),name:Ap+t.requestDataName(Tl.Main),groupby:a,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[e]}]}]}(t)}return Ep(t)}(this)}parseAxesAndHeaders(){var t;this.component.axes=(t=this,ye.reduce((e,n)=>(t.component.scales[n]&&(e[n]=[gp(n,t)]),e),{}))}assembleSelectionTopLevelSignals(t){return function(t,n){let i=!1;for(const s of O(null!==(r=t.component.selection)&&void 0!==r?r:{})){var r;const o=s.name,a=e.stringValue(o+Qu);if(0===n.filter(t=>t.name===o).length){const t="point"===s.type?", true, true)":")";n.push({name:s.name,update:`${ec}(${a}, ${e.stringValue("global"===s.resolve?"union":s.resolve)}${t}`})}i=!0;for(const e of nc)e.defined(s)&&e.topLevelSignals&&(n=e.topLevelSignals(t,s,n))}return i&&0===n.filter(t=>"unit"===t.name).length&&n.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]}),Hl(n)}(this,t)}assembleSignals(){return[...yh(this),...Ul(this,[])]}assembleSelectionData(t){return function(t,e){const n=[...e];for(const r of O(null!==(i=t.component.selection)&&void 0!==i?i:{})){var i;const e={name:r.name+Qu};if(r.init){const n=r.project.items.map(t=>{const{signals:e,...n}=t;return n});e.values=r.init.map(e=>({unit:ic(t,{escape:!1}),fields:n,values:jl(e,!1)}))}n.filter(t=>t.name===r.name+Qu).length||n.push(e)}return n}(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Vh(this)}assembleMarks(){var t;let e=null!==(t=this.component.mark)&&void 0!==t?t:[];return this.parent&&Rf(this.parent)||(e=ql(this,e)),e.map(this.correctDataNames)}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return lo(this.encoding,t)}fieldDef(t){return js(this.encoding[t])}typedFieldDef(t){const e=this.fieldDef(t);return Es(e)?e:null}}class Dp extends Bf{constructor(t,e,n,i,r){super(t,"layer",e,n,r,t.resolve,t.view),Dn(this,"children",void 0);const s={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((t,e)=>{if(xa(t))return new Dp(t,this,this.getName(`layer_${e}`),s,r);if(oo(t))return new kp(t,this,this.getName(`layer_${e}`),s,r);throw new Error(On(t))})}parseData(){this.component.data=op(this);for(const t of this.children)t.parseData()}parseLayoutSize(){tp(this),ep(this,"width"),ep(this,"height")}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const e of F(t.component.selection))this.component.selection[e]=t.component.selection[e]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){!function(t){const{axes:e,resolve:n}=t.component,i={top:0,bottom:0,right:0,left:0};for(const s of t.children){s.parseAxesAndHeaders();for(const i of F(s.component.axes))n.axis[i]=Kh(t.component.resolve,i),"shared"===n.axis[i]&&(e[i]=dp(e[i],s.component.axes[i]),e[i]||(n.axis[i]="independent",delete e[i]))}for(const s of ye){for(const o of t.children)if(o.component.axes[s]){if("independent"===n.axis[s]){var r;e[s]=(null!==(r=e[s])&&void 0!==r?r:[]).concat(o.component.axes[s]);for(const t of o.component.axes[s]){const{value:e,explicit:n}=t.getWithExplicit("orient");if(!sn(e)){if(i[e]>0&&!n){const n=hp[e];i[e]>i[n]&&t.set("orient",n,!1)}i[e]++}}}delete o.component.axes[s]}if("independent"===n.axis[s]&&e[s]&&e[s].length>1)for(const t of e[s])t.get("grid")&&!t.explicit.grid&&(t.implicit.grid=!1)}}(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((t,e)=>e.assembleSelectionTopLevelSignals(t),t)}assembleSignals(){return this.children.reduce((t,e)=>t.concat(e.assembleSignals()),yh(this))}assembleLayoutSignals(){return this.children.reduce((t,e)=>t.concat(e.assembleLayoutSignals()),Vh(this))}assembleSelectionData(t){return this.children.reduce((t,e)=>e.assembleSelectionData(t),t)}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const e of this.children)if(t=e.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return function(t,e){for(const n of t.children)Mf(n)&&(e=ql(n,e));return e}(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,e)=>t.concat(e.assembleLegends()),hd(this))}}function Sp(t,e,n,i,r){if(cs(t))return new rp(t,e,n,r);if(xa(t))return new Dp(t,e,n,i,r);if(oo(t))return new kp(t,e,n,i,r);if(function(t){return Jo(t)||ta(t)||Qo(t)}(t))return new ap(t,e,n,r);throw new Error(On(t))}function Fp(t,n,i,r){const s=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(void 0===n?(n={type:"pad"},r.hasAxisOrientSignalRef()&&(n.resize=!0)):e.isString(n)&&(n={type:n}),s&&o&&("fit"===(a=n.type)||"fit-x"===a||"fit-y"===a))if("step"===s&&"step"===o)si(Pn()),n.type="pad";else if("step"===s||"step"===o){const t="step"===s?"width":"height";si(Pn(xe(t))),n.type=function(t){return t?`fit-${xe(t)}`:"fit"}("width"===t?"height":"width")}var a;return{...1===F(n).length&&n.type?"pad"===n.type?{}:{autosize:n.type}:{autosize:n},...na(i,!1),...na(t,!0)}}function Op(t,n,i={},r){const s=t.config?function(t){t=d(t);for(const e of va)delete t[e];if(t.axis)for(const e in t.axis)Js(t.axis[e])&&delete t.axis[e];if(t.legend)for(const e of $o)delete t.legend[e];if(t.mark){for(const e of Pr)delete t.mark[e];t.mark.tooltip&&e.isObject(t.mark.tooltip)&&delete t.mark.tooltip}t.params&&(t.signals=(t.signals||[]).concat(Zo(t.params)),delete t.params);for(const e of ya){for(const i of Pr)delete t[e][i];const n=_a[e];if(n)for(const i of n)delete t[e][i];ba(t,e)}for(const e of F(No))delete t[e];!function(t){const{titleMarkConfig:e,subtitleMarkConfig:n,subtitle:i}=nn(t.title);S(e)||(t.style["group-title"]={...t.style["group-title"],...e}),S(n)||(t.style["group-subtitle"]={...t.style["group-subtitle"],...n}),S(i)?delete t.title:t.title=i}(t);for(const n in t)e.isObject(t[n])&&S(t[n])&&delete t[n];return S(t)?void 0:t}(t.config):void 0,o=[].concat(t.assembleSelectionData([]),function(t,e){const n=[],i=Kf(n);let r=0;for(const l of t.sources){l.hasName()||(l.dataName="source_"+r++);const t=l.assemble();i(l,t)}for(const l of n)0===l.transform.length&&delete l.transform;let s=0;for(const[l,u]of n.entries()){var o;0!==(null!==(o=u.transform)&&void 0!==o?o:[]).length||u.source||n.splice(s++,0,n.splice(l,1)[0])}for(const l of n)for(const e of null!==(a=l.transform)&&void 0!==a?a:[]){var a;"lookup"===e.type&&(e.from=t.outputNodes[e.from].getSource())}for(const l of n)l.name in e&&(l.values=e[l.name]);return n}(t.component.data,i)),a=t.assembleProjections(),l=t.assembleTitle(),u=t.assembleGroupStyle(),c=t.assembleGroupEncodeEntry(!0);let h=t.assembleLayoutSignals();h=h.filter(t=>"width"!==t.name&&"height"!==t.name||void 0===t.value||(n[t.name]=+t.value,!1));const{params:f,...p}=n;return{$schema:"https://vega.github.io/schema/vega/v5.json",...t.description?{description:t.description}:{},...p,...l?{title:l}:{},...u?{style:u}:{},...c?{encode:{update:c}}:{},data:o,...a.length>0?{projections:a}:{},...t.assembleGroup([...h,...t.assembleSelectionTopLevelSignals([]),...Zo(f)]),...s?{config:s}:{},...r?{usermeta:r}:{}}}t.accessPathDepth=V,t.accessPathWithDatum=N,t.compile=function(t,n={}){n.logger&&(ri=n.logger),n.fieldTitle&&Is(n.fieldTitle);try{const i=ga(e.mergeConfig(n.config,t.config)),r=fl(t,i),s=Sp(r,null,"",void 0,i);return s.parse(),function(t,e){Qd(t.sources);let n=0,i=0;for(let r=0;r<5&&tf(t,e,!0);r++)n++;t.sources.map(Yd);for(let r=0;r<5&&tf(t,e,!1);r++)i++;Qd(t.sources),5===Math.max(n,i)&&si("Maximum optimization runs(5) reached.")}(s.component.data,s),{spec:Op(s,Fp(t,r.autosize,i,s),t.datasets,t.usermeta),normalized:r}}finally{n.logger&&(ri=ii),n.fieldTitle&&Is(Rs)}},t.contains=v,t.deepEqual=h,t.deleteNestedProperty=B,t.duplicate=d,t.entries=M,t.every=b,t.fieldIntersection=D,t.flatAccessWithDatum=L,t.getFirstDefined=q,t.hasIntersection=E,t.hash=g,t.internalField=G,t.isBoolean=T,t.isEmpty=S,t.isEqual=function(t,e){const n=F(t),i=F(e);if(n.length!==i.length)return!1;for(const r of n)if(t[r]!==e[r])return!1;return!0},t.isInternalField=X,t.isNullOrFalse=y,t.isNumeric=K,t.keys=F,t.logicalExpr=R,t.mergeDeep=x,t.normalize=fl,t.normalizeAngle=Y,t.omit=p,t.pick=f,t.prefixGenerator=k,t.removePathFromField=U,t.replaceAll=j,t.replacePathInField=z,t.resetIdCounter=function(){H=42},t.setEqual=A,t.some=_,t.stringify=m,t.titleCase=I,t.unique=C,t.uniqueId=W,t.vals=O,t.varName=P,t.version="5.1.0",Object.defineProperty(t,"__esModule",{value:!0})}(e,n(2737),n(4965))},2737:(t,e,n)=>{"use strict";function i(t,e,n){return t.fields=e||[],t.fname=n,t}function r(t){return null==t?null:t.fname}function s(t){return null==t?null:t.fields}function o(t){return 1===t.length?a(t[0]):l(t)}n.r(e),n.d(e,{Debug:()=>C,Error:()=>b,Info:()=>w,None:()=>_,Warn:()=>x,accessor:()=>i,accessorFields:()=>s,accessorName:()=>r,array:()=>K,ascending:()=>tt,clampRange:()=>Z,compare:()=>J,constant:()=>rt,debounce:()=>st,error:()=>u,extend:()=>ot,extent:()=>at,extentIndex:()=>lt,falsy:()=>y,fastmap:()=>dt,field:()=>h,flush:()=>ft,hasOwnProperty:()=>ct,id:()=>d,identity:()=>f,inherits:()=>pt,inrange:()=>mt,isArray:()=>E,isBoolean:()=>gt,isDate:()=>yt,isFunction:()=>Q,isIterable:()=>vt,isNumber:()=>_t,isObject:()=>k,isRegExp:()=>bt,isString:()=>xt,key:()=>wt,lerp:()=>Ct,logger:()=>A,lruCache:()=>At,merge:()=>Et,mergeConfig:()=>S,one:()=>m,pad:()=>Dt,panLinear:()=>$,panLog:()=>z,panPow:()=>j,panSymlog:()=>U,peek:()=>M,quarter:()=>X,repeat:()=>kt,span:()=>St,splitAccessPath:()=>c,stringValue:()=>Ft,toBoolean:()=>Ot,toDate:()=>Tt,toNumber:()=>T,toSet:()=>Rt,toString:()=>Pt,truncate:()=>Bt,truthy:()=>g,utcquarter:()=>Y,visitArray:()=>It,writeConfig:()=>F,zero:()=>p,zoomLinear:()=>q,zoomLog:()=>H,zoomPow:()=>W,zoomSymlog:()=>G});const a=t=>function(e){return e[t]},l=t=>{const e=t.length;return function(n){for(let i=0;i<e;++i)n=n[t[i]];return n}};function u(t){throw Error(t)}function c(t){const e=[],n=t.length;let i,r,s,o=null,a=0,l="";function c(){e.push(l+t.substring(i,r)),l="",i=r+1}for(t+="",i=r=0;r<n;++r)if(s=t[r],"\\"===s)l+=t.substring(i,r),l+=t.substring(++r,++r),i=r;else if(s===o)c(),o=null,a=-1;else{if(o)continue;i===a&&'"'===s||i===a&&"'"===s?(i=r+1,o=s):"."!==s||a?"["===s?(r>i&&c(),a=i=r+1):"]"===s&&(a||u("Access path missing open bracket: "+t),a>0&&c(),a=0,i=r+1):r>i?c():i=r+1}return a&&u("Access path missing closing bracket: "+t),o&&u("Access path missing closing quote: "+t),r>i&&(r++,c()),e}function h(t,e,n){const r=c(t);return t=1===r.length?r[0]:t,i((n&&n.get||o)(r),[t],e||t)}const d=h("id"),f=i(t=>t,[],"identity"),p=i(()=>0,[],"zero"),m=i(()=>1,[],"one"),g=i(()=>!0,[],"true"),y=i(()=>!1,[],"false");function v(t,e,n){const i=[e].concat([].slice.call(n));console[t].apply(console,i)}const _=0,b=1,x=2,w=3,C=4;function A(t,e){let n=t||_;return{level(t){return arguments.length?(n=+t,this):n},error(){return n>=b&&v(e||"error","ERROR",arguments),this},warn(){return n>=x&&v(e||"warn","WARN",arguments),this},info(){return n>=w&&v(e||"log","INFO",arguments),this},debug(){return n>=C&&v(e||"log","DEBUG",arguments),this}}}var E=Array.isArray;function k(t){return t===Object(t)}const D=t=>"__proto__"!==t;function S(...t){return t.reduce((t,e)=>{for(const n in e)"signals"===n?t.signals=O(t.signals,e.signals):F(t,n,e[n],"legend"===n?{layout:1}:"style"===n||null);return t},{})}function F(t,e,n,i){if(!D(e))return;let r,s;if(k(n)&&!E(n))for(r in s=k(t[e])?t[e]:t[e]={},n)i&&(!0===i||i[r])?F(s,r,n[r]):D(r)&&(s[r]=n[r]);else t[e]=n}function O(t,e){if(null==t)return e;const n={},i=[];function r(t){n[t.name]||(n[t.name]=1,i.push(t))}return e.forEach(r),t.forEach(r),i}function M(t){return t[t.length-1]}function T(t){return null==t||""===t?null:+t}const P=t=>e=>t*Math.exp(e),R=t=>e=>Math.log(t*e),B=t=>e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),I=t=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*t,N=t=>e=>e<0?-Math.pow(-e,t):Math.pow(e,t);function L(t,e,n,i){const r=n(t[0]),s=n(M(t)),o=(s-r)*e;return[i(r-o),i(s-o)]}function $(t,e){return L(t,e,T,f)}function z(t,e){var n=Math.sign(t[0]);return L(t,e,R(n),P(n))}function j(t,e,n){return L(t,e,N(n),N(1/n))}function U(t,e,n){return L(t,e,B(n),I(n))}function V(t,e,n,i,r){const s=i(t[0]),o=i(M(t)),a=null!=e?i(e):(s+o)/2;return[r(a+(s-a)*n),r(a+(o-a)*n)]}function q(t,e,n){return V(t,e,n,T,f)}function H(t,e,n){const i=Math.sign(t[0]);return V(t,e,n,R(i),P(i))}function W(t,e,n,i){return V(t,e,n,N(i),N(1/i))}function G(t,e,n,i){return V(t,e,n,B(i),I(i))}function X(t){return 1+~~(new Date(t).getMonth()/3)}function Y(t){return 1+~~(new Date(t).getUTCMonth()/3)}function K(t){return null!=t?E(t)?t:[t]:[]}function Z(t,e,n){let i,r=t[0],s=t[1];return s<r&&(i=s,s=r,r=i),i=s-r,i>=n-e?[e,n]:[r=Math.min(Math.max(r,e),n-i),r+i]}function Q(t){return"function"==typeof t}function J(t,e,n){n=n||{},e=K(e)||[];const r=[],o=[],a={},l=n.comparator||et;return K(t).forEach((t,i)=>{null!=t&&(r.push("descending"===e[i]?-1:1),o.push(t=Q(t)?t:h(t,null,n)),(s(t)||[]).forEach(t=>a[t]=1))}),0===o.length?null:i(l(o,r),Object.keys(a))}const tt=(t,e)=>(t<e||null==t)&&null!=e?-1:(t>e||null==e)&&null!=t?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e==e?-1:e!=e&&t==t?1:0),et=(t,e)=>1===t.length?nt(t[0],e[0]):it(t,e,t.length),nt=(t,e)=>function(n,i){return tt(t(n),t(i))*e},it=(t,e,n)=>(e.push(0),function(i,r){let s,o=0,a=-1;for(;0===o&&++a<n;)s=t[a],o=tt(s(i),s(r));return o*e[a]});function rt(t){return Q(t)?t:()=>t}function st(t,e){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(e(i),n=null),t)}}function ot(t){for(let e,n,i=1,r=arguments.length;i<r;++i)for(n in e=arguments[i],e)t[n]=e[n];return t}function at(t,e){let n,i,r,s,o=0;if(t&&(n=t.length))if(null==e){for(i=t[o];o<n&&(null==i||i!=i);i=t[++o]);for(r=s=i;o<n;++o)i=t[o],null!=i&&(i<r&&(r=i),i>s&&(s=i))}else{for(i=e(t[o]);o<n&&(null==i||i!=i);i=e(t[++o]));for(r=s=i;o<n;++o)i=e(t[o]),null!=i&&(i<r&&(r=i),i>s&&(s=i))}return[r,s]}function lt(t,e){const n=t.length;let i,r,s,o,a,l=-1;if(null==e){for(;++l<n;)if(r=t[l],null!=r&&r>=r){i=s=r;break}if(l===n)return[-1,-1];for(o=a=l;++l<n;)r=t[l],null!=r&&(i>r&&(i=r,o=l),s<r&&(s=r,a=l))}else{for(;++l<n;)if(r=e(t[l],l,t),null!=r&&r>=r){i=s=r;break}if(l===n)return[-1,-1];for(o=a=l;++l<n;)r=e(t[l],l,t),null!=r&&(i>r&&(i=r,o=l),s<r&&(s=r,a=l))}return[o,a]}const ut=Object.prototype.hasOwnProperty;function ct(t,e){return ut.call(t,e)}const ht={};function dt(t){let e,n={};function i(t){return ct(n,t)&&n[t]!==ht}const r={size:0,empty:0,object:n,has:i,get:t=>i(t)?n[t]:void 0,set(t,e){return i(t)||(++r.size,n[t]===ht&&--r.empty),n[t]=e,this},delete(t){return i(t)&&(--r.size,++r.empty,n[t]=ht),this},clear(){r.size=r.empty=0,r.object=n={}},test(t){return arguments.length?(e=t,r):e},clean(){const t={};let i=0;for(const r in n){const s=n[r];s===ht||e&&e(s)||(t[r]=s,++i)}r.size=i,r.empty=0,r.object=n=t}};return t&&Object.keys(t).forEach(e=>{r.set(e,t[e])}),r}function ft(t,e,n,i,r,s){if(!n&&0!==n)return s;const o=+n;let a,l=t[0],u=M(t);u<l&&(a=l,l=u,u=a),a=Math.abs(e-l);const c=Math.abs(u-e);return a<c&&a<=o?i:c<=o?r:s}function pt(t,e,n){const i=t.prototype=Object.create(e.prototype);return Object.defineProperty(i,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),ot(i,n)}function mt(t,e,n,i){let r,s=e[0],o=e[e.length-1];return s>o&&(r=s,s=o,o=r),i=void 0===i||i,((n=void 0===n||n)?s<=t:s<t)&&(i?t<=o:t<o)}function gt(t){return"boolean"==typeof t}function yt(t){return"[object Date]"===Object.prototype.toString.call(t)}function vt(t){return t&&Q(t[Symbol.iterator])}function _t(t){return"number"==typeof t}function bt(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function xt(t){return"string"==typeof t}function wt(t,e,n){t&&(t=e?K(t).map(t=>t.replace(/\\(.)/g,"$1")):K(t));const r=t&&t.length,s=n&&n.get||o,a=t=>s(e?[t]:c(t));let l;if(r)if(1===r){const e=a(t[0]);l=function(t){return""+e(t)}}else{const e=t.map(a);l=function(t){let n=""+e[0](t),i=0;for(;++i<r;)n+="|"+e[i](t);return n}}else l=function(){return""};return i(l,t,"key")}function Ct(t,e){const n=t[0],i=M(t),r=+e;return r?1===r?i:n+r*(i-n):n}function At(t){let e,n,i;t=+t||1e4;const r=()=>{e={},n={},i=0},s=(r,s)=>(++i>t&&(n=e,e={},i=1),e[r]=s);return r(),{clear:r,has:t=>ct(e,t)||ct(n,t),get:t=>ct(e,t)?e[t]:ct(n,t)?s(t,n[t]):void 0,set:(t,n)=>ct(e,t)?e[t]=n:s(t,n)}}function Et(t,e,n,i){const r=e.length,s=n.length;if(!s)return e;if(!r)return n;const o=i||new e.constructor(r+s);let a=0,l=0,u=0;for(;a<r&&l<s;++u)o[u]=t(e[a],n[l])>0?n[l++]:e[a++];for(;a<r;++a,++u)o[u]=e[a];for(;l<s;++l,++u)o[u]=n[l];return o}function kt(t,e){let n="";for(;--e>=0;)n+=t;return n}function Dt(t,e,n,i){const r=n||" ",s=t+"",o=e-s.length;return o<=0?s:"left"===i?kt(r,o)+s:"center"===i?kt(r,~~(o/2))+s+kt(r,Math.ceil(o/2)):s+kt(r,o)}function St(t){return t&&M(t)-t[0]||0}function Ft(t){return E(t)?"["+t.map(Ft)+"]":k(t)||xt(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function Ot(t){return null==t||""===t?null:!(!t||"false"===t||"0"===t||!t)}const Mt=t=>_t(t)||yt(t)?t:Date.parse(t);function Tt(t,e){return e=e||Mt,null==t||""===t?null:e(t)}function Pt(t){return null==t||""===t?null:t+""}function Rt(t){const e={},n=t.length;for(let i=0;i<n;++i)e[t[i]]=!0;return e}function Bt(t,e,n,i){const r=null!=i?i:"\u2026",s=t+"",o=s.length,a=Math.max(0,e-r.length);return o<=e?s:"left"===n?r+s.slice(o-a):"center"===n?s.slice(0,Math.ceil(a/2))+r+s.slice(o-~~(a/2)):s.slice(0,a)+r}function It(t,e,n){if(t)if(e){const i=t.length;for(let r=0;r<i;++r){const i=e(t[r]);i&&n(i,r,t)}}else t.forEach(n)}},303:(t,e,n)=>{"use strict";function i(t,e,n){return t.fields=e||[],t.fname=n,t}function r(t){return null==t?null:t.fname}function s(t){return null==t?null:t.fields}function o(t){return 1===t.length?a(t[0]):l(t)}n.d(e,{ZE:()=>i,Oj:()=>s,el:()=>r,IX:()=>U,l$:()=>V,qu:()=>H,a9:()=>K,vU:()=>u,l7:()=>Z,We:()=>Q,k:()=>g,Xr:()=>nt,EP:()=>h,yl:()=>it,nr:()=>tt,yR:()=>d,XW:()=>rt,u5:()=>st,kJ:()=>y,jn:()=>ot,J_:()=>at,mf:()=>q,TW:()=>lt,hj:()=>ut,Kn:()=>v,Kj:()=>ct,HD:()=>ht,Jy:()=>dt,t7:()=>ft,$m:()=>pt,fE:()=>b,kX:()=>p,vk:()=>gt,Dw:()=>M,mJ:()=>T,QA:()=>P,Zw:()=>R,fj:()=>C,mS:()=>z,yP:()=>yt,_k:()=>c,m8:()=>vt,sw:()=>_t,ZU:()=>xt,He:()=>A,Rg:()=>Ct,BB:()=>wt,$G:()=>At,yb:()=>m,N3:()=>j,bM:()=>f,ay:()=>I,dH:()=>N,mK:()=>L,bV:()=>$});const a=t=>function(e){return e[t]},l=t=>{const e=t.length;return function(n){for(let i=0;i<e;++i)n=n[t[i]];return n}};function u(t){throw Error(t)}function c(t){const e=[],n=t.length;let i,r,s,o=null,a=0,l="";function c(){e.push(l+t.substring(i,r)),l="",i=r+1}for(t+="",i=r=0;r<n;++r)if(s=t[r],"\\"===s)l+=t.substring(i,r),l+=t.substring(++r,++r),i=r;else if(s===o)c(),o=null,a=-1;else{if(o)continue;i===a&&'"'===s||i===a&&"'"===s?(i=r+1,o=s):"."!==s||a?"["===s?(r>i&&c(),a=i=r+1):"]"===s&&(a||u("Access path missing open bracket: "+t),a>0&&c(),a=0,i=r+1):r>i?c():i=r+1}return a&&u("Access path missing closing bracket: "+t),o&&u("Access path missing closing quote: "+t),r>i&&(r++,c()),e}function h(t,e,n){const r=c(t);return t=1===r.length?r[0]:t,i((n&&n.get||o)(r),[t],e||t)}h("id");const d=i(t=>t,[],"identity"),f=i(()=>0,[],"zero"),p=i(()=>1,[],"one"),m=i(()=>!0,[],"true"),g=i(()=>!1,[],"false");var y=Array.isArray;function v(t){return t===Object(t)}const _=t=>"__proto__"!==t;function b(...t){return t.reduce((t,e)=>{for(const n in e)"signals"===n?t.signals=w(t.signals,e.signals):x(t,n,e[n],"legend"===n?{layout:1}:"style"===n||null);return t},{})}function x(t,e,n,i){if(!_(e))return;let r,s;if(v(n)&&!y(n))for(r in s=v(t[e])?t[e]:t[e]={},n)i&&(!0===i||i[r])?x(s,r,n[r]):_(r)&&(s[r]=n[r]);else t[e]=n}function w(t,e){if(null==t)return e;const n={},i=[];function r(t){n[t.name]||(n[t.name]=1,i.push(t))}return e.forEach(r),t.forEach(r),i}function C(t){return t[t.length-1]}function A(t){return null==t||""===t?null:+t}const E=t=>e=>t*Math.exp(e),k=t=>e=>Math.log(t*e),D=t=>e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),S=t=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*t,F=t=>e=>e<0?-Math.pow(-e,t):Math.pow(e,t);function O(t,e,n,i){const r=n(t[0]),s=n(C(t)),o=(s-r)*e;return[i(r-o),i(s-o)]}function M(t,e){return O(t,e,A,d)}function T(t,e){var n=Math.sign(t[0]);return O(t,e,k(n),E(n))}function P(t,e,n){return O(t,e,F(n),F(1/n))}function R(t,e,n){return O(t,e,D(n),S(n))}function B(t,e,n,i,r){const s=i(t[0]),o=i(C(t)),a=null!=e?i(e):(s+o)/2;return[r(a+(s-a)*n),r(a+(o-a)*n)]}function I(t,e,n){return B(t,e,n,A,d)}function N(t,e,n){const i=Math.sign(t[0]);return B(t,e,n,k(i),E(i))}function L(t,e,n,i){return B(t,e,n,F(i),F(1/i))}function $(t,e,n,i){return B(t,e,n,D(i),S(i))}function z(t){return 1+~~(new Date(t).getMonth()/3)}function j(t){return 1+~~(new Date(t).getUTCMonth()/3)}function U(t){return null!=t?y(t)?t:[t]:[]}function V(t,e,n){let i,r=t[0],s=t[1];return s<r&&(i=s,s=r,r=i),i=s-r,i>=n-e?[e,n]:[r=Math.min(Math.max(r,e),n-i),r+i]}function q(t){return"function"==typeof t}function H(t,e,n){n=n||{},e=U(e)||[];const r=[],o=[],a={},l=n.comparator||G;return U(t).forEach((t,i)=>{null!=t&&(r.push("descending"===e[i]?-1:1),o.push(t=q(t)?t:h(t,null,n)),(s(t)||[]).forEach(t=>a[t]=1))}),0===o.length?null:i(l(o,r),Object.keys(a))}const W=(t,e)=>(t<e||null==t)&&null!=e?-1:(t>e||null==e)&&null!=t?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e==e?-1:e!=e&&t==t?1:0),G=(t,e)=>1===t.length?X(t[0],e[0]):Y(t,e,t.length),X=(t,e)=>function(n,i){return W(t(n),t(i))*e},Y=(t,e,n)=>(e.push(0),function(i,r){let s,o=0,a=-1;for(;0===o&&++a<n;)s=t[a],o=W(s(i),s(r));return o*e[a]});function K(t){return q(t)?t:()=>t}function Z(t){for(let e,n,i=1,r=arguments.length;i<r;++i)for(n in e=arguments[i],e)t[n]=e[n];return t}function Q(t,e){let n,i,r,s,o=0;if(t&&(n=t.length))if(null==e){for(i=t[o];o<n&&(null==i||i!=i);i=t[++o]);for(r=s=i;o<n;++o)i=t[o],null!=i&&(i<r&&(r=i),i>s&&(s=i))}else{for(i=e(t[o]);o<n&&(null==i||i!=i);i=e(t[++o]));for(r=s=i;o<n;++o)i=e(t[o]),null!=i&&(i<r&&(r=i),i>s&&(s=i))}return[r,s]}const J=Object.prototype.hasOwnProperty;function tt(t,e){return J.call(t,e)}const et={};function nt(t){let e,n={};function i(t){return tt(n,t)&&n[t]!==et}const r={size:0,empty:0,object:n,has:i,get:t=>i(t)?n[t]:void 0,set(t,e){return i(t)||(++r.size,n[t]===et&&--r.empty),n[t]=e,this},delete(t){return i(t)&&(--r.size,++r.empty,n[t]=et),this},clear(){r.size=r.empty=0,r.object=n={}},test(t){return arguments.length?(e=t,r):e},clean(){const t={};let i=0;for(const r in n){const s=n[r];s===et||e&&e(s)||(t[r]=s,++i)}r.size=i,r.empty=0,r.object=n=t}};return t&&Object.keys(t).forEach(e=>{r.set(e,t[e])}),r}function it(t,e,n,i,r,s){if(!n&&0!==n)return s;const o=+n;let a,l=t[0],u=C(t);u<l&&(a=l,l=u,u=a),a=Math.abs(e-l);const c=Math.abs(u-e);return a<c&&a<=o?i:c<=o?r:s}function rt(t,e,n){const i=t.prototype=Object.create(e.prototype);return i.constructor=t,Z(i,n)}function st(t,e,n,i){let r,s=e[0],o=e[e.length-1];return s>o&&(r=s,s=o,o=r),i=void 0===i||i,((n=void 0===n||n)?s<=t:s<t)&&(i?t<=o:t<o)}function ot(t){return"boolean"==typeof t}function at(t){return"[object Date]"===Object.prototype.toString.call(t)}function lt(t){return t&&q(t[Symbol.iterator])}function ut(t){return"number"==typeof t}function ct(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function ht(t){return"string"==typeof t}function dt(t,e,n){t&&(t=e?U(t).map(t=>t.replace(/\\(.)/g,"$1")):U(t));const r=t&&t.length,s=n&&n.get||o,a=t=>s(e?[t]:c(t));let l;if(r)if(1===r){const e=a(t[0]);l=function(t){return""+e(t)}}else{const e=t.map(a);l=function(t){let n=""+e[0](t),i=0;for(;++i<r;)n+="|"+e[i](t);return n}}else l=function(){return""};return i(l,t,"key")}function ft(t,e){const n=t[0],i=C(t),r=+e;return r?1===r?i:n+r*(i-n):n}function pt(t){let e,n,i;t=+t||1e4;const r=()=>{e={},n={},i=0},s=(r,s)=>(++i>t&&(n=e,e={},i=1),e[r]=s);return r(),{clear:r,has:t=>tt(e,t)||tt(n,t),get:t=>tt(e,t)?e[t]:tt(n,t)?s(t,n[t]):void 0,set:(t,n)=>tt(e,t)?e[t]=n:s(t,n)}}function mt(t,e){let n="";for(;--e>=0;)n+=t;return n}function gt(t,e,n,i){const r=n||" ",s=t+"",o=e-s.length;return o<=0?s:"left"===i?mt(r,o)+s:"center"===i?mt(r,~~(o/2))+s+mt(r,Math.ceil(o/2)):s+mt(r,o)}function yt(t){return t&&C(t)-t[0]||0}function vt(t){return y(t)?"["+t.map(vt)+"]":v(t)||ht(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function _t(t){return null==t||""===t?null:!(!t||"false"===t||"0"===t||!t)}const bt=t=>ut(t)||at(t)?t:Date.parse(t);function xt(t,e){return e=e||bt,null==t||""===t?null:e(t)}function wt(t){return null==t||""===t?null:t+""}function Ct(t){const e={},n=t.length;for(let i=0;i<n;++i)e[t[i]]=!0;return e}function At(t,e,n,i){const r=null!=i?i:"\u2026",s=t+"",o=s.length,a=Math.max(0,e-r.length);return o<=e?s:"left"===n?r+s.slice(o-a):"center"===n?s.slice(0,Math.ceil(a/2))+r+s.slice(o-~~(a/2)):s.slice(0,a)+r}},4965:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Bounds:()=>ag,CanvasHandler:()=>Iv,CanvasRenderer:()=>jv,DATE:()=>si,DAY:()=>oi,DAYOFYEAR:()=>ai,Dataflow:()=>Mo,Debug:()=>B,Error:()=>T,EventStream:()=>yo,Gradient:()=>pm,GroupItem:()=>ug,HOURS:()=>li,Handler:()=>vv,Info:()=>R,Item:()=>lg,MILLISECONDS:()=>hi,MINUTES:()=>ui,MONTH:()=>ii,Marks:()=>nv,MultiPulse:()=>Do,None:()=>M,Operator:()=>po,Parameters:()=>co,Pulse:()=>Co,QUARTER:()=>ni,RenderType:()=>S_,Renderer:()=>bv,ResourceLoader:()=>cg,SECONDS:()=>ci,SVGHandler:()=>Vv,SVGRenderer:()=>f_,SVGStringRenderer:()=>D_,Scenegraph:()=>cv,TIME_UNITS:()=>di,Transform:()=>Po,View:()=>qT,WEEK:()=>ri,Warn:()=>P,YEAR:()=>ei,accessor:()=>m,accessorFields:()=>y,accessorName:()=>g,array:()=>lt,ascending:()=>dt,bandwidthNRD:()=>Ca,bin:()=>Aa,bootstrapCI:()=>Da,boundClip:()=>I_,boundContext:()=>Mg,boundItem:()=>iv,boundMark:()=>sv,boundStroke:()=>fg,changeset:()=>lo,clampRange:()=>ut,codegenExpression:()=>zN,compare:()=>ht,constant:()=>gt,cumulativeLogNormal:()=>Ua,cumulativeNormal:()=>Ia,cumulativeUniform:()=>Xa,dayofyear:()=>_i,debounce:()=>yt,defaultLocale:()=>Hs,definition:()=>Bo,densityLogNormal:()=>ja,densityNormal:()=>Ba,densityUniform:()=>Ga,domChild:()=>pv,domClear:()=>mv,domCreate:()=>dv,domFind:()=>fv,dotbin:()=>Sa,error:()=>x,expressionFunction:()=>HM,extend:()=>vt,extent:()=>_t,extentIndex:()=>bt,falsy:()=>F,fastmap:()=>At,field:()=>C,flush:()=>Et,font:()=>Ky,fontFamily:()=>Yy,fontSize:()=>qy,format:()=>Ge,formatLocale:()=>Ns,formats:()=>Xe,hasOwnProperty:()=>wt,id:()=>A,identity:()=>E,inferType:()=>De,inferTypes:()=>Se,ingest:()=>no,inherits:()=>kt,inrange:()=>Dt,interpolate:()=>$p,interpolateColors:()=>Ip,interpolateRange:()=>Bp,intersect:()=>M_,intersectBoxLine:()=>Ug,intersectPath:()=>Lg,intersectPoint:()=>$g,intersectRule:()=>jg,isArray:()=>N,isBoolean:()=>St,isDate:()=>Ft,isFunction:()=>ct,isIterable:()=>Ot,isNumber:()=>Mt,isObject:()=>L,isRegExp:()=>Tt,isString:()=>Pt,isTuple:()=>Js,key:()=>Rt,lerp:()=>Bt,lineHeight:()=>Hy,loader:()=>Xs,locale:()=>qs,logger:()=>I,lruCache:()=>It,markup:()=>o_,merge:()=>Nt,mergeConfig:()=>z,multiLineOffset:()=>Gy,one:()=>D,pad:()=>$t,panLinear:()=>Z,panLog:()=>Q,panPow:()=>J,panSymlog:()=>tt,parse:()=>II,parseExpression:()=>NN,parseSelector:()=>JT,pathCurves:()=>gm,pathEqual:()=>L_,pathParse:()=>_m,pathRectangle:()=>Vm,pathRender:()=>Om,pathSymbols:()=>Rm,pathTrail:()=>qm,peek:()=>V,point:()=>yv,projection:()=>EA,quantileLogNormal:()=>Va,quantileNormal:()=>Na,quantileUniform:()=>Ya,quantiles:()=>xa,quantizeInterpolator:()=>Np,quarter:()=>ot,quartiles:()=>wa,random:()=>Ea,randomInteger:()=>Oa,randomKDE:()=>$a,randomLCG:()=>Fa,randomLogNormal:()=>qa,randomMixture:()=>Ha,randomNormal:()=>La,randomUniform:()=>Ka,read:()=>Gs,regressionExp:()=>il,regressionLinear:()=>el,regressionLoess:()=>ll,regressionLog:()=>nl,regressionPoly:()=>ol,regressionPow:()=>rl,regressionQuad:()=>sl,renderModule:()=>O_,repeat:()=>Lt,resetDefaultLocale:()=>Ws,resetSVGClipId:()=>sg,resetSVGDefIds:()=>$_,responseType:()=>Ye,runtimeContext:()=>eT,sampleCurve:()=>dl,sampleLogNormal:()=>za,sampleNormal:()=>Ra,sampleUniform:()=>Wa,scale:()=>Ep,sceneEqual:()=>N_,sceneFromJSON:()=>lv,scenePickVisit:()=>Jg,sceneToJSON:()=>av,sceneVisit:()=>Qg,sceneZOrder:()=>Zg,scheme:()=>Vp,serializeXML:()=>a_,setRandom:()=>ka,span:()=>zt,splitAccessPath:()=>w,stringValue:()=>jt,textMetrics:()=>Ly,timeBin:()=>rr,timeFloor:()=>Bi,timeFormatLocale:()=>Us,timeInterval:()=>ji,timeOffset:()=>qi,timeSequence:()=>Gi,timeUnitSpecifier:()=>gi,timeUnits:()=>pi,toBoolean:()=>Ut,toDate:()=>qt,toNumber:()=>q,toSet:()=>Wt,toString:()=>Ht,transform:()=>Io,transforms:()=>Ro,truncate:()=>Gt,truthy:()=>S,tupleid:()=>to,typeParsers:()=>Ae,utcFloor:()=>Li,utcInterval:()=>Ui,utcOffset:()=>Hi,utcSequence:()=>Xi,utcdayofyear:()=>Ei,utcquarter:()=>at,utcweek:()=>ki,version:()=>jN,visitArray:()=>Xt,week:()=>bi,writeConfig:()=>j,zero:()=>k,zoomLinear:()=>nt,zoomLog:()=>it,zoomPow:()=>rt,zoomSymlog:()=>st});var i={};n.r(i),n.d(i,{aggregate:()=>Ol,bin:()=>Ml,collect:()=>Pl,compare:()=>Rl,countpattern:()=>Il,cross:()=>Nl,density:()=>zl,dotbin:()=>ql,expression:()=>Hl,extent:()=>Gl,facet:()=>Yl,field:()=>Kl,filter:()=>Ql,flatten:()=>Jl,fold:()=>tu,formula:()=>eu,generate:()=>nu,impute:()=>su,joinaggregate:()=>ou,kde:()=>au,key:()=>lu,load:()=>cu,lookup:()=>du,multiextent:()=>fu,multivalues:()=>mu,params:()=>yu,pivot:()=>vu,prefacet:()=>_u,project:()=>bu,proxy:()=>xu,quantile:()=>wu,relay:()=>Cu,sample:()=>Au,sequence:()=>Eu,sieve:()=>ku,subflow:()=>Xl,timeunit:()=>Du,tupleindex:()=>Fu,values:()=>Ou,window:()=>Bu});var r={};n.r(r),n.d(r,{interpolate:()=>ud,interpolateArray:()=>ed,interpolateBasis:()=>Vh,interpolateBasisClosed:()=>qh,interpolateCubehelix:()=>Gf,interpolateCubehelixLong:()=>Xf,interpolateDate:()=>id,interpolateDiscrete:()=>Qd,interpolateHcl:()=>Pf,interpolateHclLong:()=>Rf,interpolateHsl:()=>hf,interpolateHslLong:()=>df,interpolateHue:()=>Jd,interpolateLab:()=>Mf,interpolateNumber:()=>rd,interpolateNumberArray:()=>Jh,interpolateObject:()=>sd,interpolateRgb:()=>Yh,interpolateRgbBasis:()=>Zh,interpolateRgbBasisClosed:()=>Qh,interpolateRound:()=>cd,interpolateString:()=>ld,interpolateTransformCss:()=>of,interpolateTransformSvg:()=>af,interpolateZoom:()=>uf,piecewise:()=>Yd,quantize:()=>Yf});var s={};n.r(s),n.d(s,{bound:()=>ub,identifier:()=>db,mark:()=>fb,overlap:()=>pb,render:()=>xb,viewlayout:()=>Ub});var o={};n.r(o),n.d(o,{axisticks:()=>qb,datajoin:()=>Hb,encode:()=>Gb,legendentries:()=>Xb,linkpath:()=>Jb,pie:()=>rx,scale:()=>ax,sortitems:()=>hx,stack:()=>gx});var a={};n.r(a),n.d(a,{contour:()=>GA,geojson:()=>KA,geopath:()=>ZA,geopoint:()=>QA,geoshape:()=>JA,graticule:()=>tE,heatmap:()=>eE,isocontour:()=>NA,kde2d:()=>qA,projection:()=>iE});var l={};n.r(l),n.d(l,{force:()=>QE});var u={};n.r(u),n.d(u,{nest:()=>Zk,pack:()=>iD,partition:()=>sD,stratify:()=>oD,tree:()=>uD,treelinks:()=>cD,treemap:()=>fD});var c={};n.r(c),n.d(c,{label:()=>MD});var h={};n.r(h),n.d(h,{loess:()=>PD,regression:()=>BD});var d={};n.r(d),n.d(d,{voronoi:()=>rS});var f={};n.r(f),n.d(f,{wordcloud:()=>vS});var p={};function m(t,e,n){return t.fields=e||[],t.fname=n,t}function g(t){return null==t?null:t.fname}function y(t){return null==t?null:t.fields}function v(t){return 1===t.length?_(t[0]):b(t)}n.r(p),n.d(p,{crossfilter:()=>ES,resolvefilter:()=>kS});const _=t=>function(e){return e[t]},b=t=>{const e=t.length;return function(n){for(let i=0;i<e;++i)n=n[t[i]];return n}};function x(t){throw Error(t)}function w(t){const e=[],n=t.length;let i,r,s,o=null,a=0,l="";function u(){e.push(l+t.substring(i,r)),l="",i=r+1}for(t+="",i=r=0;r<n;++r)if(s=t[r],"\\"===s)l+=t.substring(i,r),l+=t.substring(++r,++r),i=r;else if(s===o)u(),o=null,a=-1;else{if(o)continue;i===a&&'"'===s||i===a&&"'"===s?(i=r+1,o=s):"."!==s||a?"["===s?(r>i&&u(),a=i=r+1):"]"===s&&(a||x("Access path missing open bracket: "+t),a>0&&u(),a=0,i=r+1):r>i?u():i=r+1}return a&&x("Access path missing closing bracket: "+t),o&&x("Access path missing closing quote: "+t),r>i&&(r++,u()),e}function C(t,e,n){const i=w(t);return t=1===i.length?i[0]:t,m((n&&n.get||v)(i),[t],e||t)}const A=C("id"),E=m(t=>t,[],"identity"),k=m(()=>0,[],"zero"),D=m(()=>1,[],"one"),S=m(()=>!0,[],"true"),F=m(()=>!1,[],"false");function O(t,e,n){const i=[e].concat([].slice.call(n));console[t].apply(console,i)}const M=0,T=1,P=2,R=3,B=4;function I(t,e){let n=t||M;return{level(t){return arguments.length?(n=+t,this):n},error(){return n>=T&&O(e||"error","ERROR",arguments),this},warn(){return n>=P&&O(e||"warn","WARN",arguments),this},info(){return n>=R&&O(e||"log","INFO",arguments),this},debug(){return n>=B&&O(e||"log","DEBUG",arguments),this}}}var N=Array.isArray;function L(t){return t===Object(t)}const $=t=>"__proto__"!==t;function z(...t){return t.reduce((t,e)=>{for(const n in e)"signals"===n?t.signals=U(t.signals,e.signals):j(t,n,e[n],"legend"===n?{layout:1}:"style"===n||null);return t},{})}function j(t,e,n,i){if(!$(e))return;let r,s;if(L(n)&&!N(n))for(r in s=L(t[e])?t[e]:t[e]={},n)i&&(!0===i||i[r])?j(s,r,n[r]):$(r)&&(s[r]=n[r]);else t[e]=n}function U(t,e){if(null==t)return e;const n={},i=[];function r(t){n[t.name]||(n[t.name]=1,i.push(t))}return e.forEach(r),t.forEach(r),i}function V(t){return t[t.length-1]}function q(t){return null==t||""===t?null:+t}const H=t=>e=>t*Math.exp(e),W=t=>e=>Math.log(t*e),G=t=>e=>Math.sign(e)*Math.log1p(Math.abs(e/t)),X=t=>e=>Math.sign(e)*Math.expm1(Math.abs(e))*t,Y=t=>e=>e<0?-Math.pow(-e,t):Math.pow(e,t);function K(t,e,n,i){const r=n(t[0]),s=n(V(t)),o=(s-r)*e;return[i(r-o),i(s-o)]}function Z(t,e){return K(t,e,q,E)}function Q(t,e){var n=Math.sign(t[0]);return K(t,e,W(n),H(n))}function J(t,e,n){return K(t,e,Y(n),Y(1/n))}function tt(t,e,n){return K(t,e,G(n),X(n))}function et(t,e,n,i,r){const s=i(t[0]),o=i(V(t)),a=null!=e?i(e):(s+o)/2;return[r(a+(s-a)*n),r(a+(o-a)*n)]}function nt(t,e,n){return et(t,e,n,q,E)}function it(t,e,n){const i=Math.sign(t[0]);return et(t,e,n,W(i),H(i))}function rt(t,e,n,i){return et(t,e,n,Y(i),Y(1/i))}function st(t,e,n,i){return et(t,e,n,G(i),X(i))}function ot(t){return 1+~~(new Date(t).getMonth()/3)}function at(t){return 1+~~(new Date(t).getUTCMonth()/3)}function lt(t){return null!=t?N(t)?t:[t]:[]}function ut(t,e,n){let i,r=t[0],s=t[1];return s<r&&(i=s,s=r,r=i),i=s-r,i>=n-e?[e,n]:[r=Math.min(Math.max(r,e),n-i),r+i]}function ct(t){return"function"==typeof t}function ht(t,e,n){n=n||{},e=lt(e)||[];const i=[],r=[],s={},o=n.comparator||ft;return lt(t).forEach((t,o)=>{null!=t&&(i.push("descending"===e[o]?-1:1),r.push(t=ct(t)?t:C(t,null,n)),(y(t)||[]).forEach(t=>s[t]=1))}),0===r.length?null:m(o(r,i),Object.keys(s))}const dt=(t,e)=>(t<e||null==t)&&null!=e?-1:(t>e||null==e)&&null!=t?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e==e?-1:e!=e&&t==t?1:0),ft=(t,e)=>1===t.length?pt(t[0],e[0]):mt(t,e,t.length),pt=(t,e)=>function(n,i){return dt(t(n),t(i))*e},mt=(t,e,n)=>(e.push(0),function(i,r){let s,o=0,a=-1;for(;0===o&&++a<n;)s=t[a],o=dt(s(i),s(r));return o*e[a]});function gt(t){return ct(t)?t:()=>t}function yt(t,e){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(e(i),n=null),t)}}function vt(t){for(let e,n,i=1,r=arguments.length;i<r;++i)for(n in e=arguments[i],e)t[n]=e[n];return t}function _t(t,e){let n,i,r,s,o=0;if(t&&(n=t.length))if(null==e){for(i=t[o];o<n&&(null==i||i!=i);i=t[++o]);for(r=s=i;o<n;++o)i=t[o],null!=i&&(i<r&&(r=i),i>s&&(s=i))}else{for(i=e(t[o]);o<n&&(null==i||i!=i);i=e(t[++o]));for(r=s=i;o<n;++o)i=e(t[o]),null!=i&&(i<r&&(r=i),i>s&&(s=i))}return[r,s]}function bt(t,e){const n=t.length;let i,r,s,o,a,l=-1;if(null==e){for(;++l<n;)if(r=t[l],null!=r&&r>=r){i=s=r;break}if(l===n)return[-1,-1];for(o=a=l;++l<n;)r=t[l],null!=r&&(i>r&&(i=r,o=l),s<r&&(s=r,a=l))}else{for(;++l<n;)if(r=e(t[l],l,t),null!=r&&r>=r){i=s=r;break}if(l===n)return[-1,-1];for(o=a=l;++l<n;)r=e(t[l],l,t),null!=r&&(i>r&&(i=r,o=l),s<r&&(s=r,a=l))}return[o,a]}const xt=Object.prototype.hasOwnProperty;function wt(t,e){return xt.call(t,e)}const Ct={};function At(t){let e,n={};function i(t){return wt(n,t)&&n[t]!==Ct}const r={size:0,empty:0,object:n,has:i,get:t=>i(t)?n[t]:void 0,set(t,e){return i(t)||(++r.size,n[t]===Ct&&--r.empty),n[t]=e,this},delete(t){return i(t)&&(--r.size,++r.empty,n[t]=Ct),this},clear(){r.size=r.empty=0,r.object=n={}},test(t){return arguments.length?(e=t,r):e},clean(){const t={};let i=0;for(const r in n){const s=n[r];s===Ct||e&&e(s)||(t[r]=s,++i)}r.size=i,r.empty=0,r.object=n=t}};return t&&Object.keys(t).forEach(e=>{r.set(e,t[e])}),r}function Et(t,e,n,i,r,s){if(!n&&0!==n)return s;const o=+n;let a,l=t[0],u=V(t);u<l&&(a=l,l=u,u=a),a=Math.abs(e-l);const c=Math.abs(u-e);return a<c&&a<=o?i:c<=o?r:s}function kt(t,e,n){const i=t.prototype=Object.create(e.prototype);return Object.defineProperty(i,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),vt(i,n)}function Dt(t,e,n,i){let r,s=e[0],o=e[e.length-1];return s>o&&(r=s,s=o,o=r),i=void 0===i||i,((n=void 0===n||n)?s<=t:s<t)&&(i?t<=o:t<o)}function St(t){return"boolean"==typeof t}function Ft(t){return"[object Date]"===Object.prototype.toString.call(t)}function Ot(t){return t&&ct(t[Symbol.iterator])}function Mt(t){return"number"==typeof t}function Tt(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function Pt(t){return"string"==typeof t}function Rt(t,e,n){t&&(t=e?lt(t).map(t=>t.replace(/\\(.)/g,"$1")):lt(t));const i=t&&t.length,r=n&&n.get||v,s=t=>r(e?[t]:w(t));let o;if(i)if(1===i){const e=s(t[0]);o=function(t){return""+e(t)}}else{const e=t.map(s);o=function(t){let n=""+e[0](t),r=0;for(;++r<i;)n+="|"+e[r](t);return n}}else o=function(){return""};return m(o,t,"key")}function Bt(t,e){const n=t[0],i=V(t),r=+e;return r?1===r?i:n+r*(i-n):n}function It(t){let e,n,i;t=+t||1e4;const r=()=>{e={},n={},i=0},s=(r,s)=>(++i>t&&(n=e,e={},i=1),e[r]=s);return r(),{clear:r,has:t=>wt(e,t)||wt(n,t),get:t=>wt(e,t)?e[t]:wt(n,t)?s(t,n[t]):void 0,set:(t,n)=>wt(e,t)?e[t]=n:s(t,n)}}function Nt(t,e,n,i){const r=e.length,s=n.length;if(!s)return e;if(!r)return n;const o=i||new e.constructor(r+s);let a=0,l=0,u=0;for(;a<r&&l<s;++u)o[u]=t(e[a],n[l])>0?n[l++]:e[a++];for(;a<r;++a,++u)o[u]=e[a];for(;l<s;++l,++u)o[u]=n[l];return o}function Lt(t,e){let n="";for(;--e>=0;)n+=t;return n}function $t(t,e,n,i){const r=n||" ",s=t+"",o=e-s.length;return o<=0?s:"left"===i?Lt(r,o)+s:"center"===i?Lt(r,~~(o/2))+s+Lt(r,Math.ceil(o/2)):s+Lt(r,o)}function zt(t){return t&&V(t)-t[0]||0}function jt(t){return N(t)?"["+t.map(jt)+"]":L(t)||Pt(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function Ut(t){return null==t||""===t?null:!(!t||"false"===t||"0"===t||!t)}const Vt=t=>Mt(t)||Ft(t)?t:Date.parse(t);function qt(t,e){return e=e||Vt,null==t||""===t?null:e(t)}function Ht(t){return null==t||""===t?null:t+""}function Wt(t){const e={},n=t.length;for(let i=0;i<n;++i)e[t[i]]=!0;return e}function Gt(t,e,n,i){const r=null!=i?i:"\u2026",s=t+"",o=s.length,a=Math.max(0,e-r.length);return o<=e?s:"left"===n?r+s.slice(o-a):"center"===n?s.slice(0,Math.ceil(a/2))+r+s.slice(o-~~(a/2)):s.slice(0,a)+r}function Xt(t,e,n){if(t)if(e){const i=t.length;for(let r=0;r<i;++r){const i=e(t[r]);i&&n(i,r,t)}}else t.forEach(n)}function Yt(t,e,n){return t.fields=e||[],t.fname=n,t}function Kt(t){return 1===t.length?Zt(t[0]):Qt(t)}const Zt=t=>function(e){return e[t]},Qt=t=>{const e=t.length;return function(n){for(let i=0;i<e;++i)n=n[t[i]];return n}};function Jt(t){throw Error(t)}const te=function(t,e,n){const i=function(t){const e=[],n=t.length;let i,r,s,o=null,a=0,l="";function u(){e.push(l+t.substring(i,r)),l="",i=r+1}for(t+="",i=r=0;r<n;++r)if(s=t[r],"\\"===s)l+=t.substring(i,r),l+=t.substring(++r,++r),i=r;else if(s===o)u(),o=null,a=-1;else{if(o)continue;i===a&&'"'===s||i===a&&"'"===s?(i=r+1,o=s):"."!==s||a?"["===s?(r>i&&u(),a=i=r+1):"]"===s&&(a||Jt("Access path missing open bracket: "+t),a>0&&u(),a=0,i=r+1):r>i?u():i=r+1}return a&&Jt("Access path missing closing bracket: "+t),o&&Jt("Access path missing closing quote: "+t),r>i&&(r++,u()),e}(t);return t=1===i.length?i[0]:t,Yt(Kt(i),[t],t)}("id"),ee=Yt(t=>t,[],"identity"),ne=(Yt(()=>0,[],"zero"),Yt(()=>1,[],"one"),Yt(()=>!0,[],"true"));function ie(t,e,n){const i=[e].concat([].slice.call(n));console[t].apply(console,i)}Yt(()=>!1,[],"false");var re=Array.isArray;function se(t){return null!=t?re(t)?t:[t]:[]}function oe(t){return"function"==typeof t}function ae(t){return oe(t)?t:()=>t}function le(t){for(let e,n,i=1,r=arguments.length;i<r;++i)for(n in e=arguments[i],e)t[n]=e[n];return t}const ue=Object.prototype.hasOwnProperty;function ce(t,e,n){const i=t.prototype=Object.create(e.prototype);return Object.defineProperty(i,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),le(i,n)}function he(t,e,n){if(t)if(e){const i=t.length;for(let r=0;r<i;++r){const i=e(t[r]);i&&n(i,r,t)}}else t.forEach(n)}var de=n(303);const fe=/^([A-Za-z]+:)?\/\//,pe=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,me=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,ge="file://";async function ye(t,e){const n=await this.sanitize(t,e),i=n.href;return n.localFile?this.file(i):this.http(i,e)}async function ve(t,e){e=(0,de.l7)({},this.options,e);const n=this.fileAccess,i={href:null};let r,s,o;const a=pe.test(t.replace(me,""));null!=t&&"string"==typeof t&&a||(0,de.vU)("Sanitize failure, invalid URI: "+(0,de.m8)(t));const l=fe.test(t);return(o=e.baseURL)&&!l&&(t.startsWith("/")||"/"===o[o.length-1]||(t="/"+t),t=o+t),s=(r=t.startsWith(ge))||"file"===e.mode||"http"!==e.mode&&!l&&n,r?t=t.slice(ge.length):t.startsWith("//")&&("file"===e.defaultProtocol?(t=t.slice(2),s=!0):t=(e.defaultProtocol||"http")+":"+t),Object.defineProperty(i,"localFile",{value:!!s}),i.href=t,e.target&&(i.target=e.target+""),e.rel&&(i.rel=e.rel+""),"image"===e.context&&e.crossOrigin&&(i.crossOrigin=e.crossOrigin+""),i}function _e(t){return t?e=>new Promise((n,i)=>{t.readFile(e,(t,e)=>{t?i(t):n(e)})}):be}async function be(){(0,de.vU)("No file system access.")}function xe(t){return t?async function(e,n){const i=(0,de.l7)({},this.options.http,n),r=n&&n.response,s=await t(e,i);return s.ok?(0,de.mf)(s[r])?s[r]():s.text():(0,de.vU)(s.status+""+s.statusText)}:we}async function we(){(0,de.vU)("No HTTP fetch method available.")}const Ce=t=>!(Number.isNaN(+t)||t instanceof Date),Ae={boolean:de.sw,integer:de.He,number:de.He,date:de.ZU,string:de.BB,unknown:de.yR},Ee=[t=>"true"===t||"false"===t||!0===t||!1===t,t=>Ce(t)&&Number.isInteger(+t),Ce,t=>!Number.isNaN(Date.parse(t))],ke=["boolean","integer","number","date"];function De(t,e){if(!t||!t.length)return"unknown";const n=t.length,i=Ee.length,r=Ee.map((t,e)=>e+1);for(let o,a,l=0,u=0;l<n;++l)for(a=e?t[l][e]:t[l],o=0;o<i;++o)if(r[o]&&null!=(s=a)&&s==s&&!Ee[o](a)&&(r[o]=0,++u,u===Ee.length))return"string";var s;return ke[r.reduce((t,e)=>0===t?e:t,0)-1]}function Se(t,e){return e.reduce((e,n)=>(e[n]=De(t,n),e),{})}var Fe={},Oe={};function Me(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'}).join(",")+"}")}function Te(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var i in t)i in e||n.push(e[i]=i)}),n}function Pe(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function Re(t){const e=function(e,n){const i={delimiter:t};return Be(e,n?(0,de.l7)(n,i):i)};return e.responseType="text",e}function Be(t,e){return e.header&&(t=e.header.map(de.m8).join(e.delimiter)+"\n"+t),function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function i(t,e){var i,r=[],s=t.length,o=0,a=0,l=s<=0,u=!1;function c(){if(l)return Oe;if(u)return u=!1,Fe;var e,i,r=o;if(34===t.charCodeAt(r)){for(;o++<s&&34!==t.charCodeAt(o)||34===t.charCodeAt(++o););return(e=o)>=s?l=!0:10===(i=t.charCodeAt(o++))?u=!0:13===i&&(u=!0,10===t.charCodeAt(o)&&++o),t.slice(r+1,e-1).replace(/""/g,'"')}for(;o<s;){if(10===(i=t.charCodeAt(e=o++)))u=!0;else if(13===i)u=!0,10===t.charCodeAt(o)&&++o;else if(i!==n)continue;return t.slice(r,e)}return l=!0,t.slice(r,s)}for(10===t.charCodeAt(s-1)&&--s,13===t.charCodeAt(s-1)&&--s;(i=c())!==Oe;){for(var h=[];i!==Fe&&i!==Oe;)h.push(i),i=c();e&&null==(h=e(h,a++))||r.push(h)}return r}function r(e,n){return e.map(function(e){return n.map(function(t){return o(e[t])}).join(t)})}function s(e){return e.map(o).join(t)}function o(t){return null==t?"":t instanceof Date?function(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),r=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":function(t){return t<0?"-"+Pe(-t,6):t>9999?"+"+Pe(t,6):Pe(t,4)}(t.getUTCFullYear())+"-"+Pe(t.getUTCMonth()+1,2)+"-"+Pe(t.getUTCDate(),2)+(r?"T"+Pe(e,2)+":"+Pe(n,2)+":"+Pe(i,2)+"."+Pe(r,3)+"Z":i?"T"+Pe(e,2)+":"+Pe(n,2)+":"+Pe(i,2)+"Z":n||e?"T"+Pe(e,2)+":"+Pe(n,2)+"Z":"")}(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,r,s=i(t,function(t,i){if(n)return n(t,i-1);r=t,n=e?function(t,e){var n=Me(t);return function(i,r){return e(n(i),r,t)}}(t,e):Me(t)});return s.columns=r||[],s},parseRows:i,format:function(e,n){return null==n&&(n=Te(e)),[n.map(o).join(t)].concat(r(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=Te(t)),r(t,e).join("\n")},formatRows:function(t){return t.map(s).join("\n")},formatRow:s,formatValue:o}}(e.delimiter).parse(t+"")}function Ie(t,e){const n=e&&e.property?(0,de.EP)(e.property):de.yR;return!(0,de.Kn)(t)||(i=t,"function"==typeof Buffer&&(0,de.mf)(Buffer.isBuffer)&&Buffer.isBuffer(i))?n(JSON.parse(t)):function(t,e){return!(0,de.kJ)(t)&&(0,de.TW)(t)&&(t=[...t]),e&&e.copy?JSON.parse(JSON.stringify(t)):t}(n(t),e);var i}function Ne(t){return t}function Le(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return $e(t,e)})}:$e(t,e)}function $e(t,e){var n=e.id,i=e.bbox,r=null==e.properties?{}:e.properties,s=ze(t,e);return null==n&&null==i?{type:"Feature",properties:r,geometry:s}:null==i?{type:"Feature",id:n,properties:r,geometry:s}:{type:"Feature",id:n,bbox:i,properties:r,geometry:s}}function ze(t,e){var n=function(t){if(null==t)return Ne;var e,n,i=t.scale[0],r=t.scale[1],s=t.translate[0],o=t.translate[1];return function(t,a){a||(e=n=0);var l=2,u=t.length,c=new Array(u);for(c[0]=(e+=t[0])*i+s,c[1]=(n+=t[1])*r+o;l<u;)c[l]=t[l],++l;return c}}(t.transform),i=t.arcs;function r(t,e){e.length&&e.pop();for(var r=i[t<0?~t:t],s=0,o=r.length;s<o;++s)e.push(n(r[s],s));t<0&&function(t,e){for(var n,i=t.length,r=i-e;r<--i;)n=t[r],t[r++]=t[i],t[i]=n}(e,o)}function s(t){return n(t)}function o(t){for(var e=[],n=0,i=t.length;n<i;++n)r(t[n],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=o(t);e.length<4;)e.push(e[0]);return e}function l(t){return t.map(a)}return function t(e){var n,i=e.type;switch(i){case"GeometryCollection":return{type:i,geometries:e.geometries.map(t)};case"Point":n=s(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(s);break;case"LineString":n=o(e.arcs);break;case"MultiLineString":n=e.arcs.map(o);break;case"Polygon":n=l(e.arcs);break;case"MultiPolygon":n=e.arcs.map(l);break;default:return null}return{type:i,coordinates:n}}(e)}function je(t,e){var n={},i={},r={},s=[],o=-1;function a(t,e){for(var i in t){var r=t[i];delete e[r.start],delete r.start,delete r.end,r.forEach(function(t){n[t<0?~t:t]=1}),s.push(r)}}return e.forEach(function(n,i){var r,s=t.arcs[n<0?~n:n];s.length<3&&!s[1][0]&&!s[1][1]&&(r=e[++o],e[o]=n,e[i]=r)}),e.forEach(function(e){var n,s,o=function(e){var n,i=t.arcs[e<0?~e:e],r=i[0];return t.transform?(n=[0,0],i.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=i[i.length-1],e<0?[n,r]:[r,n]}(e),a=o[0],l=o[1];if(n=r[a])if(delete r[n.end],n.push(e),n.end=l,s=i[l]){delete i[s.start];var u=s===n?n:n.concat(s);i[u.start=n.start]=r[u.end=s.end]=u}else i[n.start]=r[n.end]=n;else if(n=i[l])if(delete i[n.start],n.unshift(e),n.start=a,s=r[a]){delete r[s.end];var c=s===n?n:s.concat(n);i[c.start=s.start]=r[c.end=n.end]=c}else i[n.start]=r[n.end]=n;else i[(n=[e]).start=a]=r[n.end=l]=n}),a(r,i),a(i,r),e.forEach(function(t){n[t<0?~t:t]||s.push([t])}),s}function Ue(t){return ze(t,Ve.apply(this,arguments))}function Ve(t,e,n){var i,r,s;if(arguments.length>1)i=qe(0,e,n);else for(r=0,i=new Array(s=t.arcs.length);r<s;++r)i[r]=r;return{type:"MultiLineString",arcs:je(t,i)}}function qe(t,e,n){var i,r=[],s=[];function o(t){var e=t<0?~t:t;(s[e]||(s[e]=[])).push({i:t,g:i})}function a(t){t.forEach(o)}function l(t){t.forEach(a)}return function t(e){switch(i=e,e.type){case"GeometryCollection":e.geometries.forEach(t);break;case"LineString":a(e.arcs);break;case"MultiLineString":case"Polygon":l(e.arcs);break;case"MultiPolygon":!function(t){t.forEach(l)}(e.arcs)}}(e),s.forEach(null==n?function(t){r.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&r.push(t[0].i)}),r}Be.responseType="text",Ie.responseType="json";const He={interior:(t,e)=>t!==e,exterior:(t,e)=>t===e};function We(t,e){let n,i,r,s;return t=Ie(t,e),e&&e.feature?(n=Le,r=e.feature):e&&e.mesh?(n=Ue,r=e.mesh,s=He[e.filter]):(0,de.vU)("Missing TopoJSON feature or mesh parameter."),i=(i=t.objects[r])?n(t,i,s):(0,de.vU)("Invalid TopoJSON object: "+r),i&&i.features||[i]}We.responseType="json";const Ge={dsv:Be,csv:Re(","),tsv:Re("\t"),json:Ie,topojson:We};function Xe(t,e){return arguments.length>1?(Ge[t]=e,this):(0,de.nr)(Ge,t)?Ge[t]:null}function Ye(t){const e=Xe(t);return e&&e.responseType||"text"}var Ke=Math.sqrt(50),Ze=Math.sqrt(10),Qe=Math.sqrt(2);function Je(t,e,n){var i,r,s,o,a=-1;if(n=+n,(t=+t)==(e=+e)&&n>0)return[t];if((i=e<t)&&(r=t,t=e,e=r),0===(o=tn(t,e,n))||!isFinite(o))return[];if(o>0){let n=Math.round(t/o),i=Math.round(e/o);for(n*o<t&&++n,i*o>e&&--i,s=new Array(r=i-n+1);++a<r;)s[a]=(n+a)*o}else{o=-o;let n=Math.round(t*o),i=Math.round(e*o);for(n/o<t&&++n,i/o>e&&--i,s=new Array(r=i-n+1);++a<r;)s[a]=(n+a)/o}return i&&s.reverse(),s}function tn(t,e,n){var i=(e-t)/Math.max(0,n),r=Math.floor(Math.log(i)/Math.LN10),s=i/Math.pow(10,r);return r>=0?(s>=Ke?10:s>=Ze?5:s>=Qe?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(s>=Ke?10:s>=Ze?5:s>=Qe?2:1)}function en(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),r=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),s=i/r;return s>=Ke?r*=10:s>=Ze?r*=5:s>=Qe&&(r*=2),e<t?-r:r}var nn,rn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function sn(t){if(!(e=rn.exec(t)))throw new Error("invalid format: "+t);var e;return new on({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function on(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function an(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function ln(t){return(t=an(Math.abs(t)))?t[1]:NaN}function un(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ln(e)/3)))-ln(Math.abs(t)))}function cn(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ln(e)-ln(t))+1}function hn(t){return Math.max(0,-ln(Math.abs(t)))}function dn(t,e){var n=an(t,e);if(!n)return t+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}sn.prototype=on.prototype,on.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const fn={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>dn(100*t,e),r:dn,s:function(t,e){var n=an(t,e);if(!n)return t+"";var i=n[0],r=n[1],s=r-(nn=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,o=i.length;return s===o?i:s>o?i+new Array(s-o+1).join("0"):s>0?i.slice(0,s)+"."+i.slice(s):"0."+new Array(1-s).join("0")+an(t,Math.max(0,e+s-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function pn(t){return t}var mn,gn,yn,vn=Array.prototype.map,_n=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function bn(t){var e,n,i=void 0===t.grouping||void 0===t.thousands?pn:(e=vn.call(t.grouping,Number),n=t.thousands+"",function(t,i){for(var r=t.length,s=[],o=0,a=e[0],l=0;r>0&&a>0&&(l+a+1>i&&(a=Math.max(1,i-l)),s.push(t.substring(r-=a,r+a)),!((l+=a+1)>i));)a=e[o=(o+1)%e.length];return s.reverse().join(n)}),r=void 0===t.currency?"":t.currency[0]+"",s=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?pn:function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(vn.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",u=void 0===t.minus?"\u2212":t.minus+"",c=void 0===t.nan?"NaN":t.nan+"";function h(t){var e=(t=sn(t)).fill,n=t.align,h=t.sign,d=t.symbol,f=t.zero,p=t.width,m=t.comma,g=t.precision,y=t.trim,v=t.type;"n"===v?(m=!0,v="g"):fn[v]||(void 0===g&&(g=12),y=!0,v="g"),(f||"0"===e&&"="===n)&&(f=!0,e="0",n="=");var _="$"===d?r:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",b="$"===d?s:/[%p]/.test(v)?l:"",x=fn[v],w=/[defgprs%]/.test(v);function C(t){var r,s,l,d=_,C=b;if("c"===v)C=x(t)+C,t="";else{var A=(t=+t)<0||1/t<0;if(t=isNaN(t)?c:x(Math.abs(t),g),y&&(t=function(t){t:for(var e,n=t.length,i=1,r=-1;i<n;++i)switch(t[i]){case".":r=e=i;break;case"0":0===r&&(r=i),e=i;break;default:if(!+t[i])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),A&&0==+t&&"+"!==h&&(A=!1),d=(A?"("===h?h:u:"-"===h||"("===h?"":h)+d,C=("s"===v?_n[8+nn/3]:"")+C+(A&&"("===h?")":""),w)for(r=-1,s=t.length;++r<s;)if(48>(l=t.charCodeAt(r))||l>57){C=(46===l?o+t.slice(r+1):t.slice(r))+C,t=t.slice(0,r);break}}m&&!f&&(t=i(t,1/0));var E=d.length+t.length+C.length,k=E<p?new Array(p-E+1).join(e):"";switch(m&&f&&(t=i(k+t,k.length?p-C.length:1/0),k=""),n){case"<":t=d+t+C+k;break;case"=":t=d+k+t+C;break;case"^":t=k.slice(0,E=k.length>>1)+d+t+C+k.slice(E);break;default:t=k+d+t+C}return a(t)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),C.toString=function(){return t+""},C}return{format:h,formatPrefix:function(t,e){var n=h(((t=sn(t)).type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(ln(e)/3))),r=Math.pow(10,-i),s=_n[8+i/3];return function(t){return n(r*t)+s}}}}mn=bn({thousands:",",grouping:[3],currency:["$",""]}),gn=mn.format,yn=mn.formatPrefix;var xn=new Date,wn=new Date;function Cn(t,e,n,i){function r(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return r.floor=function(e){return t(e=new Date(+e)),e},r.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},r.round=function(t){var e=r(t),n=r.ceil(t);return t-e<n-t?e:n},r.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},r.range=function(n,i,s){var o,a=[];if(n=r.ceil(n),s=null==s?1:Math.floor(s),!(n<i&&s>0))return a;do{a.push(o=new Date(+n)),e(n,s),t(n)}while(o<n&&n<i);return a},r.filter=function(n){return Cn(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,i){if(t>=t)if(i<0)for(;++i<=0;)for(;e(t,-1),!n(t););else for(;--i>=0;)for(;e(t,1),!n(t););})},n&&(r.count=function(e,i){return xn.setTime(+e),wn.setTime(+i),t(xn),t(wn),Math.floor(n(xn,wn))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(i?function(e){return i(e)%t==0}:function(e){return r.count(0,e)%t==0}):r:null}),r}const An=1e3,En=6e4,kn=36e5,Dn=864e5,Sn=6048e5,Fn=31536e6,On=Cn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*En)/Dn,t=>t.getDate()-1);function Mn(t){return Cn(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*En)/Sn})}var Tn=Mn(0),Pn=Mn(1),Rn=(Mn(2),Mn(3),Mn(4));const Bn=(Mn(5),Mn(6),Cn(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/Dn},function(t){return t.getUTCDate()-1}));function In(t){return Cn(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Sn})}var Nn=In(0),Ln=In(1),$n=(In(2),In(3),In(4)),zn=(In(5),In(6),Cn(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));zn.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Cn(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};const jn=zn,Un=Cn(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),Vn=Cn(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*An-t.getMinutes()*En)},function(t,e){t.setTime(+t+e*kn)},function(t,e){return(e-t)/kn},function(t){return t.getHours()}),qn=Cn(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*An)},function(t,e){t.setTime(+t+e*En)},function(t,e){return(e-t)/En},function(t){return t.getMinutes()}),Hn=Cn(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*An)},function(t,e){return(e-t)/An},function(t){return t.getUTCSeconds()});var Wn=Cn(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});Wn.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Cn(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):Wn:null};const Gn=Wn;var Xn=Cn(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Xn.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Cn(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};const Yn=Xn,Kn=Cn(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),Zn=Cn(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*kn)},function(t,e){return(e-t)/kn},function(t){return t.getUTCHours()}),Qn=Cn(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*En)},function(t,e){return(e-t)/En},function(t){return t.getUTCMinutes()});function Jn(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function ti(t){let e=t,n=t;function i(t,e,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){const s=i+r>>>1;n(t[s],e)<0?i=s+1:r=s}return i}return 1===t.length&&(e=(e,n)=>t(e)-n,n=function(t){return(e,n)=>Jn(t(e),n)}(t)),{left:i,center:function(t,n,r,s){null==r&&(r=0),null==s&&(s=t.length);const o=i(t,n,r,s-1);return o>r&&e(t[o-1],n)>-e(t[o],n)?o-1:o},right:function(t,e,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){const s=i+r>>>1;n(t[s],e)>0?r=s:i=s+1}return i}}}const ei="year",ni="quarter",ii="month",ri="week",si="date",oi="day",ai="dayofyear",li="hours",ui="minutes",ci="seconds",hi="milliseconds",di=[ei,ni,ii,ri,si,oi,ai,li,ui,ci,hi],fi=di.reduce((t,e,n)=>(t[e]=1+n,t),{});function pi(t){const e=(0,de.IX)(t).slice(),n={};return e.length||(0,de.vU)("Missing time unit."),e.forEach(t=>{(0,de.nr)(fi,t)?n[t]=1:(0,de.vU)("Invalid time unit: ".concat(t,"."))}),(n[ri]||n[oi]?1:0)+(n[ni]||n[ii]||n[si]?1:0)+(n[ai]?1:0)>1&&(0,de.vU)("Incompatible time units: ".concat(t)),e.sort((t,e)=>fi[t]-fi[e]),e}const mi={[ei]:"%Y ",[ni]:"Q%q ",[ii]:"%b ",[si]:"%d ",[ri]:"W%U ",[oi]:"%a ",[ai]:"%j ",[li]:"%H:00",[ui]:"00:%M",[ci]:":%S",[hi]:".%L",["".concat(ei,"-").concat(ii)]:"%Y-%m ",["".concat(ei,"-").concat(ii,"-").concat(si)]:"%Y-%m-%d ",["".concat(li,"-").concat(ui)]:"%H:%M"};function gi(t,e){const n=(0,de.l7)({},mi,e),i=pi(t),r=i.length;let s,o,a="",l=0;for(l=0;l<r;)for(s=i.length;s>l;--s)if(o=i.slice(l,s).join("-"),null!=n[o]){a+=n[o],l=s;break}return a.trim()}const yi=new Date;function vi(t){return yi.setFullYear(t),yi.setMonth(0),yi.setDate(1),yi.setHours(0,0,0,0),yi}function _i(t){return xi(new Date(t))}function bi(t){return wi(new Date(t))}function xi(t){return On.count(vi(t.getFullYear())-1,t)}function wi(t){return Tn.count(vi(t.getFullYear())-1,t)}function Ci(t){return vi(t).getDay()}function Ai(t,e,n,i,r,s,o){if(0<=t&&t<100){const a=new Date(-1,e,n,i,r,s,o);return a.setFullYear(t),a}return new Date(t,e,n,i,r,s,o)}function Ei(t){return Di(new Date(t))}function ki(t){return Si(new Date(t))}function Di(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return Bn.count(e-1,t)}function Si(t){const e=Date.UTC(t.getUTCFullYear(),0,1);return Nn.count(e-1,t)}function Fi(t){return yi.setTime(Date.UTC(t,0,1)),yi.getUTCDay()}function Oi(t,e,n,i,r,s,o){if(0<=t&&t<100){const t=new Date(Date.UTC(-1,e,n,i,r,s,o));return t.setUTCFullYear(n.y),t}return new Date(Date.UTC(t,e,n,i,r,s,o))}function Mi(t,e,n,i,r){const s=e||1,o=(0,de.fj)(t),a=(t,e,r)=>function(t,e,n,i){const r=n<=1?t:i?(e,r)=>i+n*Math.floor((t(e,r)-i)/n):(e,i)=>n*Math.floor(t(e,i)/n);return e?(t,n)=>e(r(t,n),n):r}(n[r=r||t],i[r],t===o&&s,e),l=new Date,u=(0,de.Rg)(t),c=u[ei]?a(ei):(0,de.a9)(2012),h=u[ii]?a(ii):u[ni]?a(ni):de.bM,d=u[ri]&&u[oi]?a(oi,1,ri+oi):u[ri]?a(ri,1):u[oi]?a(oi,1):u[si]?a(si,1):u[ai]?a(ai,1):de.kX,f=u[li]?a(li):de.bM,p=u[ui]?a(ui):de.bM,m=u[ci]?a(ci):de.bM,g=u[hi]?a(hi):de.bM;return function(t){l.setTime(+t);const e=c(l);return r(e,h(l),d(l,e),f(l),p(l),m(l),g(l))}}function Ti(t,e,n){return e+7*t-(n+6)%7}const Pi={[ei]:t=>t.getFullYear(),[ni]:t=>Math.floor(t.getMonth()/3),[ii]:t=>t.getMonth(),[si]:t=>t.getDate(),[li]:t=>t.getHours(),[ui]:t=>t.getMinutes(),[ci]:t=>t.getSeconds(),[hi]:t=>t.getMilliseconds(),[ai]:t=>xi(t),[ri]:t=>wi(t),[ri+oi]:(t,e)=>Ti(wi(t),t.getDay(),Ci(e)),[oi]:(t,e)=>Ti(1,t.getDay(),Ci(e))},Ri={[ni]:t=>3*t,[ri]:(t,e)=>Ti(t,0,Ci(e))};function Bi(t,e){return Mi(t,e||1,Pi,Ri,Ai)}const Ii={[ei]:t=>t.getUTCFullYear(),[ni]:t=>Math.floor(t.getUTCMonth()/3),[ii]:t=>t.getUTCMonth(),[si]:t=>t.getUTCDate(),[li]:t=>t.getUTCHours(),[ui]:t=>t.getUTCMinutes(),[ci]:t=>t.getUTCSeconds(),[hi]:t=>t.getUTCMilliseconds(),[ai]:t=>Di(t),[ri]:t=>Si(t),[oi]:(t,e)=>Ti(1,t.getUTCDay(),Fi(e)),[ri+oi]:(t,e)=>Ti(Si(t),t.getUTCDay(),Fi(e))},Ni={[ni]:t=>3*t,[ri]:(t,e)=>Ti(t,0,Fi(e))};function Li(t,e){return Mi(t,e||1,Ii,Ni,Oi)}const $i={[ei]:jn,[ni]:Un.every(3),[ii]:Un,[ri]:Tn,[si]:On,[oi]:On,[ai]:On,[li]:Vn,[ui]:qn,[ci]:Hn,[hi]:Gn},zi={[ei]:Yn,[ni]:Kn.every(3),[ii]:Kn,[ri]:Nn,[si]:Bn,[oi]:Bn,[ai]:Bn,[li]:Zn,[ui]:Qn,[ci]:Hn,[hi]:Gn};function ji(t){return $i[t]}function Ui(t){return zi[t]}function Vi(t,e,n){return t?t.offset(e,n):void 0}function qi(t,e,n){return Vi(ji(t),e,n)}function Hi(t,e,n){return Vi(Ui(t),e,n)}function Wi(t,e,n,i){return t?t.range(e,n,i):void 0}function Gi(t,e,n,i){return Wi(ji(t),e,n,i)}function Xi(t,e,n,i){return Wi(Ui(t),e,n,i)}const Yi=31536e6,Ki=[ei,ii,si,li,ui,ci,hi],Zi=Ki.slice(0,-1),Qi=Zi.slice(0,-1),Ji=Qi.slice(0,-1),tr=Ji.slice(0,-1),er=[ei,ii],nr=[ei],ir=[[Zi,1,1e3],[Zi,5,5e3],[Zi,15,15e3],[Zi,30,3e4],[Qi,1,6e4],[Qi,5,3e5],[Qi,15,9e5],[Qi,30,18e5],[Ji,1,36e5],[Ji,3,108e5],[Ji,6,216e5],[Ji,12,432e5],[tr,1,864e5],[[ei,ri],1,6048e5],[er,1,2592e6],[er,3,7776e6],[nr,1,Yi]];function rr(t){const e=t.extent,n=t.maxbins||40,i=Math.abs((0,de.yP)(e))/n;let r,s,o=ti(t=>t[2]).right(ir,i);return o===ir.length?(r=nr,s=en(e[0]/Yi,e[1]/Yi,n)):o?(o=ir[i/ir[o-1][2]<ir[o][2]/i?o-1:o],r=o[0],s=o[1]):(r=Ki,s=Math.max(en(e[0],e[1],n),1)),{units:r,step:s}}function sr(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function or(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ar(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function lr(t){var e=t.dateTime,n=t.date,i=t.time,r=t.periods,s=t.days,o=t.shortDays,a=t.months,l=t.shortMonths,u=br(r),c=xr(r),h=br(s),d=xr(s),f=br(o),p=xr(o),m=br(a),g=xr(a),y=br(l),v=xr(l),_={a:function(t){return o[t.getDay()]},A:function(t){return s[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:Ur,e:Ur,f:Gr,g:rs,G:os,H:Vr,I:qr,j:Hr,L:Wr,m:Xr,M:Yr,p:function(t){return r[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Fs,s:Os,S:Kr,u:Zr,U:Qr,V:ts,w:es,W:ns,x:null,X:null,y:is,Y:ss,Z:as,"%":Ss},b={a:function(t){return o[t.getUTCDay()]},A:function(t){return s[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:ls,e:ls,f:fs,g:As,G:ks,H:us,I:cs,j:hs,L:ds,m:ps,M:ms,p:function(t){return r[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Fs,s:Os,S:gs,u:ys,U:vs,V:bs,w:xs,W:ws,x:null,X:null,y:Cs,Y:Es,Z:Ds,"%":Ss},x={a:function(t,e,n){var i=f.exec(e.slice(n));return i?(t.w=p.get(i[0].toLowerCase()),n+i[0].length):-1},A:function(t,e,n){var i=h.exec(e.slice(n));return i?(t.w=d.get(i[0].toLowerCase()),n+i[0].length):-1},b:function(t,e,n){var i=y.exec(e.slice(n));return i?(t.m=v.get(i[0].toLowerCase()),n+i[0].length):-1},B:function(t,e,n){var i=m.exec(e.slice(n));return i?(t.m=g.get(i[0].toLowerCase()),n+i[0].length):-1},c:function(t,n,i){return A(t,e,n,i)},d:Tr,e:Tr,f:Lr,g:Sr,G:Dr,H:Rr,I:Rr,j:Pr,L:Nr,m:Mr,M:Br,p:function(t,e,n){var i=u.exec(e.slice(n));return i?(t.p=c.get(i[0].toLowerCase()),n+i[0].length):-1},q:Or,Q:zr,s:jr,S:Ir,u:Cr,U:Ar,V:Er,w:wr,W:kr,x:function(t,e,i){return A(t,n,e,i)},X:function(t,e,n){return A(t,i,e,n)},y:Sr,Y:Dr,Z:Fr,"%":$r};function w(t,e){return function(n){var i,r,s,o=[],a=-1,l=0,u=t.length;for(n instanceof Date||(n=new Date(+n));++a<u;)37===t.charCodeAt(a)&&(o.push(t.slice(l,a)),null!=(r=pr[i=t.charAt(++a)])?i=t.charAt(++a):r="e"===i?" ":"0",(s=e[i])&&(i=s(n,r)),o.push(i),l=a+1);return o.push(t.slice(l,a)),o.join("")}}function C(t,e){return function(n){var i,r,s=ar(1900,void 0,1);if(A(s,t,n+="",0)!=n.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(e&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(r=(i=or(ar(s.y,0,1))).getUTCDay(),i=r>4||0===r?Ln.ceil(i):Ln(i),i=Bn.offset(i,7*(s.V-1)),s.y=i.getUTCFullYear(),s.m=i.getUTCMonth(),s.d=i.getUTCDate()+(s.w+6)%7):(r=(i=sr(ar(s.y,0,1))).getDay(),i=r>4||0===r?Pn.ceil(i):Pn(i),i=On.offset(i,7*(s.V-1)),s.y=i.getFullYear(),s.m=i.getMonth(),s.d=i.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),r="Z"in s?or(ar(s.y,0,1)).getUTCDay():sr(ar(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(r+5)%7:s.w+7*s.U-(r+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,or(s)):sr(s)}}function A(t,e,n,i){for(var r,s,o=0,a=e.length,l=n.length;o<a;){if(i>=l)return-1;if(37===(r=e.charCodeAt(o++))){if(r=e.charAt(o++),!(s=x[r in pr?e.charAt(o++):r])||(i=s(t,n,i))<0)return-1}else if(r!=n.charCodeAt(i++))return-1}return i}return _.x=w(n,_),_.X=w(i,_),_.c=w(e,_),b.x=w(n,b),b.X=w(i,b),b.c=w(e,b),{format:function(t){var e=w(t+="",_);return e.toString=function(){return t},e},parse:function(t){var e=C(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=C(t+="",!0);return e.toString=function(){return t},e}}}var ur,cr,hr,dr,fr,pr={"-":"",_:" ",0:"0"},mr=/^\s*\d+/,gr=/^%/,yr=/[\\^$*+?|[\]().{}]/g;function vr(t,e,n){var i=t<0?"-":"",r=(i?-t:t)+"",s=r.length;return i+(s<n?new Array(n-s+1).join(e)+r:r)}function _r(t){return t.replace(yr,"\\$&")}function br(t){return new RegExp("^(?:"+t.map(_r).join("|")+")","i")}function xr(t){return new Map(t.map((t,e)=>[t.toLowerCase(),e]))}function wr(t,e,n){var i=mr.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function Cr(t,e,n){var i=mr.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function Ar(t,e,n){var i=mr.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function Er(t,e,n){var i=mr.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function kr(t,e,n){var i=mr.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function Dr(t,e,n){var i=mr.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function Sr(t,e,n){var i=mr.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function Fr(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function Or(t,e,n){var i=mr.exec(e.slice(n,n+1));return i?(t.q=3*i[0]-3,n+i[0].length):-1}function Mr(t,e,n){var i=mr.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function Tr(t,e,n){var i=mr.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function Pr(t,e,n){var i=mr.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function Rr(t,e,n){var i=mr.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function Br(t,e,n){var i=mr.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function Ir(t,e,n){var i=mr.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function Nr(t,e,n){var i=mr.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function Lr(t,e,n){var i=mr.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function $r(t,e,n){var i=gr.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function zr(t,e,n){var i=mr.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function jr(t,e,n){var i=mr.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function Ur(t,e){return vr(t.getDate(),e,2)}function Vr(t,e){return vr(t.getHours(),e,2)}function qr(t,e){return vr(t.getHours()%12||12,e,2)}function Hr(t,e){return vr(1+On.count(jn(t),t),e,3)}function Wr(t,e){return vr(t.getMilliseconds(),e,3)}function Gr(t,e){return Wr(t,e)+"000"}function Xr(t,e){return vr(t.getMonth()+1,e,2)}function Yr(t,e){return vr(t.getMinutes(),e,2)}function Kr(t,e){return vr(t.getSeconds(),e,2)}function Zr(t){var e=t.getDay();return 0===e?7:e}function Qr(t,e){return vr(Tn.count(jn(t)-1,t),e,2)}function Jr(t){var e=t.getDay();return e>=4||0===e?Rn(t):Rn.ceil(t)}function ts(t,e){return t=Jr(t),vr(Rn.count(jn(t),t)+(4===jn(t).getDay()),e,2)}function es(t){return t.getDay()}function ns(t,e){return vr(Pn.count(jn(t)-1,t),e,2)}function is(t,e){return vr(t.getFullYear()%100,e,2)}function rs(t,e){return vr((t=Jr(t)).getFullYear()%100,e,2)}function ss(t,e){return vr(t.getFullYear()%1e4,e,4)}function os(t,e){var n=t.getDay();return vr((t=n>=4||0===n?Rn(t):Rn.ceil(t)).getFullYear()%1e4,e,4)}function as(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+vr(e/60|0,"0",2)+vr(e%60,"0",2)}function ls(t,e){return vr(t.getUTCDate(),e,2)}function us(t,e){return vr(t.getUTCHours(),e,2)}function cs(t,e){return vr(t.getUTCHours()%12||12,e,2)}function hs(t,e){return vr(1+Bn.count(Yn(t),t),e,3)}function ds(t,e){return vr(t.getUTCMilliseconds(),e,3)}function fs(t,e){return ds(t,e)+"000"}function ps(t,e){return vr(t.getUTCMonth()+1,e,2)}function ms(t,e){return vr(t.getUTCMinutes(),e,2)}function gs(t,e){return vr(t.getUTCSeconds(),e,2)}function ys(t){var e=t.getUTCDay();return 0===e?7:e}function vs(t,e){return vr(Nn.count(Yn(t)-1,t),e,2)}function _s(t){var e=t.getUTCDay();return e>=4||0===e?$n(t):$n.ceil(t)}function bs(t,e){return t=_s(t),vr($n.count(Yn(t),t)+(4===Yn(t).getUTCDay()),e,2)}function xs(t){return t.getUTCDay()}function ws(t,e){return vr(Ln.count(Yn(t)-1,t),e,2)}function Cs(t,e){return vr(t.getUTCFullYear()%100,e,2)}function As(t,e){return vr((t=_s(t)).getUTCFullYear()%100,e,2)}function Es(t,e){return vr(t.getUTCFullYear()%1e4,e,4)}function ks(t,e){var n=t.getUTCDay();return vr((t=n>=4||0===n?$n(t):$n.ceil(t)).getUTCFullYear()%1e4,e,4)}function Ds(){return"+0000"}function Ss(){return"%"}function Fs(t){return+t}function Os(t){return Math.floor(+t/1e3)}function Ms(t){const e={};return n=>e[n]||(e[n]=t(n))}function Ts(t){const e=Ms(t.format),n=t.formatPrefix;return{format:e,formatPrefix:n,formatFloat(t){const n=sn(t||",");if(null==n.precision){switch(n.precision=12,n.type){case"%":n.precision-=2;break;case"e":n.precision-=1}return i=e(n),r=e(".1f")(1)[1],t=>{const e=i(t),n=e.indexOf(r);if(n<0)return e;let s=function(t,e){let n,i=t.lastIndexOf("e");if(i>0)return i;for(i=t.length;--i>e;)if(n=t.charCodeAt(i),n>=48&&n<=57)return i+1}(e,n);const o=s<e.length?e.slice(s):"";for(;--s>n;)if("0"!==e[s]){++s;break}return e.slice(0,s)+o}}return e(n);var i,r},formatSpan(t,i,r,s){s=sn(null==s?",f":s);const o=en(t,i,r),a=Math.max(Math.abs(t),Math.abs(i));let l;if(null==s.precision)switch(s.type){case"s":return isNaN(l=un(o,a))||(s.precision=l),n(s,a);case"":case"e":case"g":case"p":case"r":isNaN(l=cn(o,a))||(s.precision=l-("e"===s.type));break;case"f":case"%":isNaN(l=hn(o))||(s.precision=l-2*("%"===s.type))}return e(s)}}}let Ps,Rs;function Bs(){return Ps=Ts({format:gn,formatPrefix:yn})}function Is(t){return Ts(bn(t))}function Ns(t){return arguments.length?Ps=Is(t):Ps}function Ls(t,e,n){(0,de.Kn)(n=n||{})||(0,de.vU)("Invalid time multi-format specifier: ".concat(n));const i=e(ci),r=e(ui),s=e(li),o=e(si),a=e(ri),l=e(ii),u=e(ni),c=e(ei),h=t(n[hi]||".%L"),d=t(n[ci]||":%S"),f=t(n[ui]||"%I:%M"),p=t(n[li]||"%I %p"),m=t(n[si]||n[oi]||"%a %d"),g=t(n[ri]||"%b %d"),y=t(n[ii]||"%B"),v=t(n[ni]||"%B"),_=t(n[ei]||"%Y");return t=>(i(t)<t?h:r(t)<t?d:s(t)<t?f:o(t)<t?p:l(t)<t?a(t)<t?m:g:c(t)<t?u(t)<t?y:v:_)(t)}function $s(t){const e=Ms(t.format),n=Ms(t.utcFormat);return{timeFormat:t=>(0,de.HD)(t)?e(t):Ls(e,ji,t),utcFormat:t=>(0,de.HD)(t)?n(t):Ls(n,Ui,t),timeParse:Ms(t.parse),utcParse:Ms(t.utcParse)}}function zs(){return Rs=$s({format:cr,parse:hr,utcFormat:dr,utcParse:fr})}function js(t){return $s(lr(t))}function Us(t){return arguments.length?Rs=js(t):Rs}ur=lr({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),cr=ur.format,hr=ur.parse,dr=ur.utcFormat,fr=ur.utcParse,Bs(),zs();const Vs=(t,e)=>(0,de.l7)({},t,e);function qs(t,e){const n=t?Is(t):Ns(),i=e?js(e):Us();return Vs(n,i)}function Hs(t,e){const n=arguments.length;return n&&2!==n&&(0,de.vU)("defaultLocale expects either zero or two arguments."),n?Vs(Ns(t),Us(e)):Vs(Ns(),Us())}function Ws(){return Bs(),zs(),Hs()}function Gs(t,e,n,i){const r=Xe((e=e||{}).type||"json");return r||(0,de.vU)("Unknown data format type: "+e.type),t=r(t,e),e.parse&&function(t,e,n,i){if(!t.length)return;const r=Us();n=n||r.timeParse,i=i||r.utcParse;let s,o,a,l,u,c,h=t.columns||Object.keys(t[0]);"auto"===e&&(e=Se(t,h)),h=Object.keys(e);const d=h.map(t=>{const r=e[t];let s,o;if(r&&(r.startsWith("date:")||r.startsWith("utc:")))return s=r.split(/:(.+)?/,2),o=s[1],("'"===o[0]&&"'"===o[o.length-1]||'"'===o[0]&&'"'===o[o.length-1])&&(o=o.slice(1,-1)),("utc"===s[0]?i:n)(o);if(!Ae[r])throw Error("Illegal format pattern: "+t+":"+r);return Ae[r]});for(a=0,u=t.length,c=h.length;a<u;++a)for(s=t[a],l=0;l<c;++l)o=h[l],s[o]=d[l](s[o])}(t,e.parse,n,i),(0,de.nr)(t,"columns")&&delete t.columns,t}const Xs=function(t,e){return e=>({options:e||{},sanitize:ve,load:ye,fileAccess:!1,file:_e(null),http:xe(t)})}("undefined"!=typeof fetch&&fetch);function Ys(t){const e=t||ee,n=[],i={};return n.add=t=>{const r=e(t);return i[r]||(i[r]=1,n.push(t)),n},n.remove=t=>{const r=e(t);if(i[r]){i[r]=0;const e=n.indexOf(t);e>=0&&n.splice(e,1)}return n},n}async function Ks(t,e){try{await e(t)}catch(n){t.error(n)}}const Zs=Symbol("vega_id");let Qs=1;function Js(t){return!(!t||!to(t))}function to(t){return t[Zs]}function eo(t,e){return t[Zs]=e,t}function no(t){const e=t===Object(t)?t:{data:t};return to(e)?e:eo(e,Qs++)}function io(t){return ro(t,no({}))}function ro(t,e){for(const n in t)e[n]=t[n];return e}function so(t,e){return eo(e,to(t))}function oo(t,e){return t?e?(n,i)=>t(n,i)||to(e(n))-to(e(i)):(e,n)=>t(e,n)||to(e)-to(n):null}function ao(t){return t&&t.constructor===lo}function lo(){const t=[],e=[],n=[],i=[],r=[];let s=null,o=!1;return{constructor:lo,insert(e){const n=se(e),i=n.length;for(let r=0;r<i;++r)t.push(n[r]);return this},remove(t){const n=oe(t)?i:e,r=se(t),s=r.length;for(let e=0;e<s;++e)n.push(r[e]);return this},modify(t,e,i){const s={field:e,value:ae(i)};return oe(t)?(s.filter=t,r.push(s)):(s.tuple=t,n.push(s)),this},encode(t,e){return oe(t)?r.push({filter:t,field:e}):n.push({tuple:t,field:e}),this},clean(t){return s=t,this},reflow(){return o=!0,this},pulse(a,l){const u={},c={};let h,d,f,p,m,g;for(h=0,d=l.length;h<d;++h)u[to(l[h])]=1;for(h=0,d=e.length;h<d;++h)m=e[h],u[to(m)]=-1;for(h=0,d=i.length;h<d;++h)p=i[h],l.forEach(t=>{p(t)&&(u[to(t)]=-1)});for(h=0,d=t.length;h<d;++h)m=t[h],g=to(m),u[g]?u[g]=1:a.add.push(no(t[h]));for(h=0,d=l.length;h<d;++h)m=l[h],u[to(m)]<0&&a.rem.push(m);function y(t,e,n){n?t[e]=n(t):a.encode=e,o||(c[to(t)]=t)}for(h=0,d=n.length;h<d;++h)f=n[h],m=f.tuple,p=f.field,g=u[to(m)],g>0&&(y(m,p,f.value),a.modifies(p));for(h=0,d=r.length;h<d;++h)f=r[h],p=f.filter,l.forEach(t=>{p(t)&&u[to(t)]>0&&y(t,f.field,f.value)}),a.modifies(f.field);if(o)a.mod=e.length||i.length?l.filter(t=>u[to(t)]>0):l.slice();else for(g in c)a.mod.push(c[g]);return(s||null==s&&(e.length||i.length))&&a.clean(!0),a}}}const uo="_:mod:_";function co(){Object.defineProperty(this,uo,{writable:!0,value:{}})}co.prototype={set(t,e,n,i){const r=this,s=r[t],o=r[uo];return null!=e&&e>=0?(s[e]!==n||i)&&(s[e]=n,o[e+":"+t]=-1,o[t]=-1):(s!==n||i)&&(r[t]=n,o[t]=re(n)?1+n.length:-1),r},modified(t,e){const n=this[uo];if(!arguments.length){for(const t in n)if(n[t])return!0;return!1}if(re(t)){for(let e=0;e<t.length;++e)if(n[t[e]])return!0;return!1}return null!=e&&e>=0?e+1<n[t]||!!n[e+":"+t]:!!n[t]},clear(){return this[uo]={},this}};let ho=0;const fo=new co;function po(t,e,n,i){this.id=++ho,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,i)}function mo(t){return function(e){const n=this.flags;return 0===arguments.length?!!(n&t):(this.flags=e?n|t:n&~t,this)}}po.prototype={targets(){return this._targets||(this._targets=Ys(te))},set(t){return this.value!==t?(this.value=t,1):0},skip:mo(1),modified:mo(2),parameters(t,e,n){e=!1!==e;const i=this._argval=this._argval||new co,r=this._argops=this._argops||[],s=[];let o,a,l,u;const c=(t,n,o)=>{o instanceof po?(o!==this&&(e&&o.targets().add(this),s.push(o)),r.push({op:o,name:t,index:n})):i.set(t,n,o)};for(o in t)if(a=t[o],"pulse"===o)se(a).forEach(t=>{t instanceof po?t!==this&&(t.targets().add(this),s.push(t)):Jt("Pulse parameters must be operator instances.")}),this.source=a;else if(re(a))for(i.set(o,-1,Array(l=a.length)),u=0;u<l;++u)c(o,u,a[u]);else c(o,-1,a);return this.marshall().clear(),n&&(r.initonly=!0),s},marshall(t){const e=this._argval||fo,n=this._argops;let i,r,s,o;if(n){const a=n.length;for(r=0;r<a;++r)i=n[r],s=i.op,o=s.modified()&&s.stamp===t,e.set(i.name,i.index,s.value,o);if(n.initonly){for(r=0;r<a;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return e},detach(){const t=this._argops;let e,n,i,r;if(t)for(e=0,n=t.length;e<n;++e)i=t[e],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(t){const e=this._update;if(e){const n=this.marshall(t.stamp),i=e.call(this,n,t);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return t.StopPropagation}},run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.pulse=e||t}};let go=0;function yo(t,e,n){this.id=++go,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e)}function vo(t,e,n){return new yo(t,e,n)}yo.prototype={_filter:ne,_apply:ee,targets(){return this._targets||(this._targets=Ys(te))},consume(t){return arguments.length?(this._consume=!!t,this):!!this._consume},receive(t){if(this._filter(t)){const e=this.value=this._apply(t),n=this._targets,i=n?n.length:0;for(let t=0;t<i;++t)n[t].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},filter(t){const e=vo(t);return this.targets().add(e),e},apply(t){const e=vo(null,t);return this.targets().add(e),e},merge(){const t=vo();this.targets().add(t);for(let e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t},throttle(t){let e=-1;return this.filter(()=>{const n=Date.now();return n-e>t?(e=n,1):0})},debounce(t){const e=vo();return this.targets().add(vo(null,null,function(t,n){let i;return n=>{i&&clearTimeout(i),i=setTimeout(()=>((t=>{const n=t.dataflow;e.receive(t),n&&n.run&&n.run()})(n),i=null),t)}}(t))),e},between(t,e){let n=!1;return t.targets().add(vo(null,null,()=>n=!0)),e.targets().add(vo(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=ne,this._targets=null}};const _o={skip:!0};function bo(t,e,n,i,r,s){const o=le({},s,_o);let a,l;oe(n)||(n=ae(n)),void 0===i?a=e=>t.touch(n(e)):oe(i)?(l=new po(null,i,r,!1),a=e=>{l.evaluate(e);const i=n(e),r=l.value;ao(r)?t.pulse(i,r,s):t.update(i,r,o)}):a=e=>t.update(n(e),i,o),e.apply(a)}function xo(t,e,n,i,r,s){if(void 0===i)e.targets().add(n);else{const o=s||{},a=new po(null,function(t,e){return e=oe(e)?e:ae(e),t?function(n,i){const r=e(n,i);return t.skip()||(t.skip(r!==this.value).value=r),r}:e}(n,i),r,!1);a.modified(o.force),a.rank=e.rank,e.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),t.connect(n,[a]))}}const wo={};function Co(t,e,n){this.dataflow=t,this.stamp=null==e?-1:e,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Ao(t,e){const n=[];return he(t,e,t=>n.push(t)),n}function Eo(t,e){const n={};return t.visit(e,t=>{n[to(t)]=1}),t=>n[to(t)]?null:t}function ko(t,e){return t?(n,i)=>t(n,i)&&e(n,i):e}function Do(t,e,n,i){const r=this,s=n.length;let o=0;this.dataflow=t,this.stamp=e,this.fields=null,this.encode=i||null,this.pulses=n;for(let a=0;a<s;++a){const t=n[a];if(t.stamp===e){if(t.fields){const e=r.fields||(r.fields={});for(const n in t.fields)e[n]=1}t.changed(r.ADD)&&(o|=r.ADD),t.changed(r.REM)&&(o|=r.REM),t.changed(r.MOD)&&(o|=r.MOD)}}this.changes=o}function So(t){return t.error("Dataflow already running. Use runAsync() to chain invocations."),t}Co.prototype={StopPropagation:wo,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork(t){return new Co(this.dataflow).init(this,t)},clone(){const t=this.fork(7);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(23)},addAll(){let t=this;return!t.source||t.add===t.rem||!t.rem.length&&t.source.length===t.add.length||(t=new Co(this.dataflow).init(this),t.add=t.source,t.rem=[]),t},init(t,e){const n=this;return n.stamp=t.stamp,n.encode=t.encode,!t.fields||64&e||(n.fields=t.fields),1&e?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),2&e?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),4&e?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),32&e?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source,t.cleans&&(n.cleans=t.cleans)),n},runAfter(t){this.dataflow.runAfter(t)},changed(t){const e=t||7;return 1&e&&this.add.length||2&e&&this.rem.length||4&e&&this.mod.length},reflow(t){if(t)return this.fork(7).reflow();const e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter(4,Eo(this,1))),this},clean(t){return arguments.length?(this.cleans=!!t,this):this.cleans},modifies(t){const e=this.fields||(this.fields={});return re(t)?t.forEach(t=>e[t]=!0):e[t]=!0,this},modified(t,e){const n=this.fields;return!(!e&&!this.mod.length||!n)&&(arguments.length?re(t)?t.some(t=>n[t]):n[t]:!!n)},filter(t,e){const n=this;return 1&t&&(n.addF=ko(n.addF,e)),2&t&&(n.remF=ko(n.remF,e)),4&t&&(n.modF=ko(n.modF,e)),16&t&&(n.srcF=ko(n.srcF,e)),n},materialize(t){const e=this;return 1&(t=t||7)&&e.addF&&(e.add=Ao(e.add,e.addF),e.addF=null),2&t&&e.remF&&(e.rem=Ao(e.rem,e.remF),e.remF=null),4&t&&e.modF&&(e.mod=Ao(e.mod,e.modF),e.modF=null),16&t&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},visit(t,e){const n=this,i=e;if(16&t)return he(n.source,n.srcF,i),n;1&t&&he(n.add,n.addF,i),2&t&&he(n.rem,n.remF,i),4&t&&he(n.mod,n.modF,i);const r=n.source;if(8&t&&r){const t=n.add.length+n.mod.length;t===r.length||he(r,t?Eo(n,5):n.srcF,i)}return n}},ce(Do,Co,{fork(t){const e=new Co(this.dataflow).init(this,t&this.NO_FIELDS);return void 0!==t&&(t&e.ADD&&this.visit(e.ADD,t=>e.add.push(t)),t&e.REM&&this.visit(e.REM,t=>e.rem.push(t)),t&e.MOD&&this.visit(e.MOD,t=>e.mod.push(t))),e},changed(t){return this.changes&t},modified(t){const e=this,n=e.fields;return n&&e.changes&e.MOD?re(t)?t.some(t=>n[t]):n[t]:0},filter(){Jt("MultiPulse does not support filtering.")},materialize(){Jt("MultiPulse does not support materialization.")},visit(t,e){const n=this,i=n.pulses,r=i.length;let s=0;if(t&n.SOURCE)for(;s<r;++s)i[s].visit(t,e);else for(;s<r;++s)i[s].stamp===n.stamp&&i[s].visit(t,e);return n}});const Fo={skip:!1,force:!1};function Oo(t,e,n,i){let r,s;const o=t[n];for(;n>e&&(s=n-1>>1,r=t[s],i(o,r)<0);)t[n]=r,n=s;return t[n]=o}function Mo(){this.logger(function(t,e){let n=0;return{level(t){return arguments.length?(n=+t,this):n},error(){return n>=1&&ie("error","ERROR",arguments),this},warn(){return n>=2&&ie("warn","WARN",arguments),this},info(){return n>=3&&ie("log","INFO",arguments),this},debug(){return n>=4&&ie("log","DEBUG",arguments),this}}}()),this.logLevel(1),this._clock=0,this._rank=0,this._locale=Hs();try{this._loader=Xs()}catch(t){}this._touched=Ys(te),this._input={},this._pulse=null,this._heap=function(t){let e=[];return{clear:()=>e=[],size:()=>e.length,peek:()=>e[0],push:n=>(e.push(n),Oo(e,0,e.length-1,t)),pop:()=>{const n=e.pop();let i;return e.length?(i=e[0],e[0]=n,function(t,e,n){const i=e,r=t.length,s=t[e];let o,a=1+(e<<1);for(;a<r;)o=a+1,o<r&&n(t[a],t[o])>=0&&(a=o),t[e]=t[a],a=1+((e=a)<<1);t[e]=s,Oo(t,i,e,n)}(e,0,t)):i=n,i}}}((t,e)=>t.qrank-e.qrank),this._postrun=[]}function To(t){return function(){return this._log[t].apply(this,arguments)}}function Po(t,e){po.call(this,t,null,e)}Mo.prototype={stamp(){return this._clock},loader(t){return arguments.length?(this._loader=t,this):this._loader},locale(t){return arguments.length?(this._locale=t,this):this._locale},logger(t){return arguments.length?(this._log=t,this):this._log},error:To("error"),warn:To("warn"),info:To("info"),debug:To("debug"),logLevel:To("level"),cleanThreshold:1e4,add:function(t,e,n,i){let r,s=1;return t instanceof po?r=t:t&&t.prototype instanceof po?r=new t:oe(t)?r=new po(null,t):(s=0,r=new po(t,e)),this.rank(r),s&&(i=n,n=e),n&&this.connect(r,r.parameters(n,i)),this.touch(r),r},connect:function(t,e){const n=t.rank,i=e.length;for(let r=0;r<i;++r)if(n<e[r].rank)return void this.rerank(t)},rank:function(t){t.rank=++this._rank},rerank:function(t){const e=[t];let n,i,r;for(;e.length;)if(this.rank(n=e.pop()),i=n._targets)for(r=i.length;--r>=0;)e.push(n=i[r]),n===t&&Jt("Cycle detected in dataflow graph.")},pulse:function(t,e,n){this.touch(t,n||Fo);const i=new Co(this,this._clock+(this._pulse?0:1)),r=t.pulse&&t.pulse.source||[];return i.target=t,this._input[t.id]=e.pulse(i,r),this},touch:function(t,e){const n=e||Fo;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this},update:function(t,e,n){const i=n||Fo;return(t.set(e)||i.force)&&this.touch(t,i),this},changeset:lo,ingest:function(t,e,n){return e=this.parse(e,n),this.pulse(t,this.changeset().insert(e))},parse:function(t,e){const n=this.locale();return Gs(t,e,n.timeParse,n.utcParse)},preload:async function(t,e,n){const i=this,r=i._pending||function(t){let e;const n=new Promise(t=>e=t);return n.requests=0,n.done=()=>{0==--n.requests&&(t._pending=null,e(t))},t._pending=n}(i);r.requests+=1;const s=await i.request(e,n);return i.pulse(t,i.changeset().remove(ne).insert(s.data||[])),r.done(),s},request:async function(t,e){const n=this;let i,r=0;try{i=await n.loader().load(t,{context:"dataflow",response:Ye(e&&e.type)});try{i=n.parse(i,e)}catch(s){r=-2,n.warn("Data ingestion failed",t,s)}}catch(s){r=-1,n.warn("Loading failed",t,s)}return{data:i,status:r}},events:function(t,e,n,i){const r=this,s=vo(n,i),o=function(t){t.dataflow=r;try{s.receive(t)}catch(e){r.error(e)}finally{r.run()}};let a;a="string"==typeof t&&"undefined"!=typeof document?document.querySelectorAll(t):se(t);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(e,o);return s},on:function(t,e,n,i,r){return(t instanceof po?xo:bo)(this,t,e,n,i,r),this},evaluate:async function(t,e,n){const i=this,r=[];if(i._pulse)return So(i);if(i._pending&&await i._pending,e&&await Ks(i,e),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const s=++i._clock;i._pulse=new Co(i,s,t),i._touched.forEach(t=>i._enqueue(t,!0)),i._touched=Ys(te);let o,a,l,u=0;try{for(;i._heap.size()>0;)o=i._heap.pop(),o.rank===o.qrank?(a=o.run(i._getPulse(o,t)),a.then?a=await a:a.async&&(r.push(a.async),a=wo),a!==wo&&o._targets&&o._targets.forEach(t=>i._enqueue(t)),++u):i._enqueue(o,!0)}catch(c){i._heap.clear(),l=c}if(i._input={},i._pulse=null,i.debug(`Pulse ${s}: ${u} operators`),l&&(i._postrun=[],i.error(l)),i._postrun.length){const t=i._postrun.sort((t,e)=>e.priority-t.priority);i._postrun=[];for(let e=0;e<t.length;++e)await Ks(i,t[e].callback)}return n&&await Ks(i,n),r.length&&Promise.all(r).then(t=>i.runAsync(null,()=>{t.forEach(t=>{try{t(i)}catch(c){i.error(c)}})})),i},run:function(t,e,n){return this._pulse?So(this):(this.evaluate(t,e,n),this)},runAsync:async function(t,e,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(t,e,n)).then(i,i),this._running},runAfter:function(t,e,n){if(this._pulse||e)this._postrun.push({priority:n||0,callback:t});else try{t(this)}catch(i){this.error(i)}},_enqueue:function(t,e){const n=t.stamp<this._clock;n&&(t.stamp=this._clock),(n||e)&&(t.qrank=t.rank,this._heap.push(t))},_getPulse:function(t,e){const n=t.source,i=this._clock;return n&&re(n)?new Do(this,i,n.map(t=>t.pulse),e):this._input[t.id]||function(t,e){return e&&e.stamp===t.stamp?e:(t=t.fork(),e&&e!==wo&&(t.source=e.source),t)}(this._pulse,n&&n.pulse)}},ce(Po,po,{run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?this.skip(!1):e=this.evaluate(t),e=e||t,e.then?e=e.then(t=>this.pulse=t):e!==t.StopPropagation&&(this.pulse=e),e},evaluate(t){const e=this.marshall(t.stamp),n=this.transform(e,t);return e.clear(),n},transform(){}});const Ro={};function Bo(t){const e=Io(t);return e&&e.Definition||null}function Io(t){return t=t&&t.toLowerCase(),function(t,e){return ue.call(t,e)}(Ro,t)?Ro[t]:null}function No(t,e,n){return t.fields=e||[],t.fname=n,t}function Lo(t){return null==t?null:t.fname}function $o(t){return null==t?null:t.fields}function zo(t){return 1===t.length?jo(t[0]):Uo(t)}const jo=t=>function(e){return e[t]},Uo=t=>{const e=t.length;return function(n){for(let i=0;i<e;++i)n=n[t[i]];return n}};function Vo(t){throw Error(t)}function qo(t){const e=[],n=t.length;let i,r,s,o=null,a=0,l="";function u(){e.push(l+t.substring(i,r)),l="",i=r+1}for(t+="",i=r=0;r<n;++r)if(s=t[r],"\\"===s)l+=t.substring(i,r),l+=t.substring(++r,++r),i=r;else if(s===o)u(),o=null,a=-1;else{if(o)continue;i===a&&'"'===s||i===a&&"'"===s?(i=r+1,o=s):"."!==s||a?"["===s?(r>i&&u(),a=i=r+1):"]"===s&&(a||Vo("Access path missing open bracket: "+t),a>0&&u(),a=0,i=r+1):r>i?u():i=r+1}return a&&Vo("Access path missing closing bracket: "+t),o&&Vo("Access path missing closing quote: "+t),r>i&&(r++,u()),e}function Ho(t,e,n){const i=qo(t);return t=1===i.length?i[0]:t,No((n&&n.get||zo)(i),[t],e||t)}Ho("id");const Wo=No(t=>t,[],"identity"),Go=No(()=>0,[],"zero"),Xo=(No(()=>1,[],"one"),No(()=>!0,[],"true"));No(()=>!1,[],"false");var Yo=Array.isArray;function Ko(t){return t[t.length-1]}function Zo(t){return null==t||""===t?null:+t}function Qo(t){return null!=t?Yo(t)?t:[t]:[]}function Jo(t){return"function"==typeof t}const ta=(t,e)=>(t<e||null==t)&&null!=e?-1:(t>e||null==e)&&null!=t?1:(e=e instanceof Date?+e:e,(t=t instanceof Date?+t:t)!==t&&e==e?-1:e!=e&&t==t?1:0),ea=(t,e)=>1===t.length?na(t[0],e[0]):ia(t,e,t.length),na=(t,e)=>function(n,i){return ta(t(n),t(i))*e},ia=(t,e,n)=>(e.push(0),function(i,r){let s,o=0,a=-1;for(;0===o&&++a<n;)s=t[a],o=ta(s(i),s(r));return o*e[a]});function ra(t){return Jo(t)?t:()=>t}function sa(t){for(let e,n,i=1,r=arguments.length;i<r;++i)for(n in e=arguments[i],e)t[n]=e[n];return t}function oa(t,e){let n,i,r,s,o=0;if(t&&(n=t.length))if(null==e){for(i=t[o];o<n&&(null==i||i!=i);i=t[++o]);for(r=s=i;o<n;++o)i=t[o],null!=i&&(i<r&&(r=i),i>s&&(s=i))}else{for(i=e(t[o]);o<n&&(null==i||i!=i);i=e(t[++o]));for(r=s=i;o<n;++o)i=e(t[o]),null!=i&&(i<r&&(r=i),i>s&&(s=i))}return[r,s]}const aa=Object.prototype.hasOwnProperty;function la(t,e){return aa.call(t,e)}const ua={};function ca(t){let e,n={};function i(t){return la(n,t)&&n[t]!==ua}const r={size:0,empty:0,object:n,has:i,get:t=>i(t)?n[t]:void 0,set(t,e){return i(t)||(++r.size,n[t]===ua&&--r.empty),n[t]=e,this},delete(t){return i(t)&&(--r.size,++r.empty,n[t]=ua),this},clear(){r.size=r.empty=0,r.object=n={}},test(t){return arguments.length?(e=t,r):e},clean(){const t={};let i=0;for(const r in n){const s=n[r];s===ua||e&&e(s)||(t[r]=s,++i)}r.size=i,r.empty=0,r.object=n=t}};return t&&Object.keys(t).forEach(e=>{r.set(e,t[e])}),r}function ha(t,e,n){const i=t.prototype=Object.create(e.prototype);return Object.defineProperty(i,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),sa(i,n)}function da(t,e){let n;if(void 0===e)for(const i of t)null!=i&&(n<i||void 0===n&&i>=i)&&(n=i);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(n<r||void 0===n&&r>=r)&&(n=r)}return n}function fa(t,e){let n;if(void 0===e)for(const i of t)null!=i&&(n>i||void 0===n&&i>=i)&&(n=i);else{let i=-1;for(let r of t)null!=(r=e(r,++i,t))&&(n>r||void 0===n&&r>=r)&&(n=r)}return n}function pa(t,e,n=0,i=t.length-1,r=Jn){for(;i>n;){if(i-n>600){const s=i-n+1,o=e-n+1,a=Math.log(s),l=.5*Math.exp(2*a/3),u=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1);pa(t,e,Math.max(n,Math.floor(e-o*l/s+u)),Math.min(i,Math.floor(e+(s-o)*l/s+u)),r)}const s=t[e];let o=n,a=i;for(ma(t,n,e),r(t[i],s)>0&&ma(t,n,i);o<a;){for(ma(t,o,a),++o,--a;r(t[o],s)<0;)++o;for(;r(t[a],s)>0;)--a}0===r(t[n],s)?ma(t,n,a):(++a,ma(t,a,i)),a<=e&&(n=a+1),e<=a&&(i=a-1)}return t}function ma(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function ga(t){return null===t?NaN:+t}function ya(t,e,n){if(i=(t=Float64Array.from(function*(t,e){if(void 0===e)for(let n of t)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)null!=(i=e(i,++n,t))&&(i=+i)>=i&&(yield i)}}(t,n))).length){if((e=+e)<=0||i<2)return fa(t);if(e>=1)return da(t);var i,r=(i-1)*e,s=Math.floor(r),o=da(pa(t,s).subarray(0,s+1));return o+(fa(t.subarray(s+1))-o)*(r-s)}}function va(t,e,n=ga){if(i=t.length){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,r=(i-1)*e,s=Math.floor(r),o=+n(t[s],s,t);return o+(+n(t[s+1],s+1,t)-o)*(r-s)}}function _a(t,e){return ya(t,.5,e)}function*ba(t,e){if(null==e)for(let n of t)null!=n&&""!==n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of t)i=e(i,++n,t),null!=i&&""!==i&&(i=+i)>=i&&(yield i)}}function xa(t,e,n){const i=Float64Array.from(ba(t,n));return i.sort(Jn),e.map(t=>va(i,t))}function wa(t,e){return xa(t,[.25,.5,.75],e)}function Ca(t,e){const n=t.length,i=function(t,e){const n=function(t,e){let n,i=0,r=0,s=0;if(void 0===e)for(let o of t)null!=o&&(o=+o)>=o&&(n=o-r,r+=n/++i,s+=n*(o-r));else{let o=-1;for(let a of t)null!=(a=e(a,++o,t))&&(a=+a)>=a&&(n=a-r,r+=n/++i,s+=n*(a-r))}if(i>1)return s/(i-1)}(t,e);return n?Math.sqrt(n):n}(t,e),r=wa(t,e);return 1.06*(Math.min(i,(r[2]-r[0])/1.34)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function Aa(t){const e=t.maxbins||20,n=t.base||10,i=Math.log(n),r=t.divide||[5,2];let s,o,a,l,u,c,h=t.extent[0],d=t.extent[1];const f=t.span||d-h||Math.abs(h)||1;if(t.step)s=t.step;else if(t.steps){for(l=f/e,u=0,c=t.steps.length;u<c&&t.steps[u]<l;++u);s=t.steps[Math.max(0,u-1)]}else{for(o=Math.ceil(Math.log(e)/i),a=t.minstep||0,s=Math.max(a,Math.pow(n,Math.round(Math.log(f)/i)-o));Math.ceil(f/s)>e;)s*=n;for(u=0,c=r.length;u<c;++u)l=s/r[u],l>=a&&f/l<=e&&(s=l)}l=Math.log(s);const p=Math.pow(n,-(l>=0?0:1+~~(-l/i))-1);return(t.nice||void 0===t.nice)&&(l=Math.floor(h/s+p)*s,h=h<l?l-s:l,d=Math.ceil(d/s)*s),{start:h,stop:d===h?h+s:d,step:s}}var Ea=Math.random;function ka(t){Ea=t}function Da(t,e,n,i){if(!t.length)return[void 0,void 0];const r=Float64Array.from(ba(t,i)),s=r.length,o=e;let a,l,u,c;for(u=0,c=Array(o);u<o;++u){for(a=0,l=0;l<s;++l)a+=r[~~(Ea()*s)];c[u]=a/s}return c.sort(Jn),[ya(c,n/2),ya(c,1-n/2)]}function Sa(t,e,n,i){i=i||(t=>t);const r=t.length,s=new Float64Array(r);let o,a=0,l=1,u=i(t[0]),c=u,h=u+e;for(;l<r;++l){if(o=i(t[l]),o>=h){for(c=(u+c)/2;a<l;++a)s[a]=c;h=o+e,u=o}c=o}for(c=(u+c)/2;a<l;++a)s[a]=c;return n?function(t,e){const n=t.length;let i,r,s=0,o=1;for(;t[s]===t[o];)++o;for(;o<n;){for(i=o+1;t[o]===t[i];)++i;if(t[o]-t[o-1]<e){for(r=o+(s+i-o-o>>1);r<o;)t[r++]=t[o];for(;r>o;)t[r--]=t[s]}s=o,o=i}return t}(s,e+e/4):s}function Fa(t){return function(){return(t=(1103515245*t+12345)%2147483647)/2147483647}}function Oa(t,e){let n,i,r;null==e&&(e=t,t=0);const s={min(t){return arguments.length?(n=t||0,r=i-n,s):n},max(t){return arguments.length?(i=t||0,r=i-n,s):i},sample:()=>n+Math.floor(r*Ea()),pdf:t=>t===Math.floor(t)&&t>=n&&t<i?1/r:0,cdf(t){const e=Math.floor(t);return e<n?0:e>=i?1:(e-n+1)/r},icdf:t=>t>=0&&t<=1?n-1+Math.floor(t*r):NaN};return s.min(t).max(e)}const Ma=Math.sqrt(2*Math.PI),Ta=Math.SQRT2;let Pa=NaN;function Ra(t,e){t=t||0,e=null==e?1:e;let n,i,r=0,s=0;if(Pa==Pa)r=Pa,Pa=NaN;else{do{r=2*Ea()-1,s=2*Ea()-1,n=r*r+s*s}while(0===n||n>1);i=Math.sqrt(-2*Math.log(n)/n),r*=i,Pa=s*i}return t+r*e}function Ba(t,e,n){const i=(t-(e||0))/(n=null==n?1:n);return Math.exp(-.5*i*i)/(n*Ma)}function Ia(t,e,n){const i=(t-(e=e||0))/(n=null==n?1:n),r=Math.abs(i);let s;if(r>37)s=0;else{const t=Math.exp(-r*r/2);let e;r<7.07106781186547?(e=.0352624965998911*r+.700383064443688,e=e*r+6.37396220353165,e=e*r+33.912866078383,e=e*r+112.079291497871,e=e*r+221.213596169931,e=e*r+220.206867912376,s=t*e,e=.0883883476483184*r+1.75566716318264,e=e*r+16.064177579207,e=e*r+86.7807322029461,e=e*r+296.564248779674,e=e*r+637.333633378831,e=e*r+793.826512519948,e=e*r+440.413735824752,s/=e):(e=r+.65,e=r+4/e,e=r+3/e,e=r+2/e,e=r+1/e,s=t/e/2.506628274631)}return i>0?1-s:s}function Na(t,e,n){return t<0||t>1?NaN:(e||0)+(null==n?1:n)*Ta*function(t){let e,n=-Math.log((1-t)*(1+t));return n<6.25?(n-=3.125,e=-364441206401782e-35,e=e*n-16850591381820166e-35,e=128584807152564e-32+e*n,e=11157877678025181e-33+e*n,e=e*n-1333171662854621e-31,e=20972767875968562e-33+e*n,e=6637638134358324e-30+e*n,e=e*n-4054566272975207e-29,e=e*n-8151934197605472e-29,e=26335093153082323e-28+e*n,e=e*n-12975133253453532e-27,e=e*n-5415412054294628e-26,e=1.0512122733215323e-9+e*n,e=e*n-4.112633980346984e-9,e=e*n-2.9070369957882005e-8,e=4.2347877827932404e-7+e*n,e=e*n-13654692000834679e-22,e=e*n-13882523362786469e-21,e=.00018673420803405714+e*n,e=e*n-.000740702534166267,e=e*n-.006033670871430149,e=.24015818242558962+e*n,e=1.6536545626831027+e*n):n<16?(n=Math.sqrt(n)-3.25,e=2.2137376921775787e-9,e=9.075656193888539e-8+e*n,e=e*n-2.7517406297064545e-7,e=1.8239629214389228e-8+e*n,e=15027403968909828e-22+e*n,e=e*n-4013867526981546e-21,e=29234449089955446e-22+e*n,e=12475304481671779e-21+e*n,e=e*n-47318229009055734e-21,e=6828485145957318e-20+e*n,e=24031110387097894e-21+e*n,e=e*n-.0003550375203628475,e=.0009532893797373805+e*n,e=e*n-.0016882755560235047,e=.002491442096107851+e*n,e=e*n-.003751208507569241,e=.005370914553590064+e*n,e=1.0052589676941592+e*n,e=3.0838856104922208+e*n):Number.isFinite(n)?(n=Math.sqrt(n)-5,e=-27109920616438573e-27,e=e*n-2.555641816996525e-10,e=1.5076572693500548e-9+e*n,e=e*n-3.789465440126737e-9,e=7.61570120807834e-9+e*n,e=e*n-1.496002662714924e-8,e=2.914795345090108e-8+e*n,e=e*n-6.771199775845234e-8,e=2.2900482228026655e-7+e*n,e=e*n-9.9298272942317e-7,e=4526062597223154e-21+e*n,e=e*n-1968177810553167e-20,e=7599527703001776e-20+e*n,e=e*n-.00021503011930044477,e=e*n-.00013871931833623122,e=1.0103004648645344+e*n,e=4.849906401408584+e*n):e=1/0,e*t}(2*t-1)}function La(t,e){let n,i;const r={mean(t){return arguments.length?(n=t||0,r):n},stdev(t){return arguments.length?(i=null==t?1:t,r):i},sample:()=>Ra(n,i),pdf:t=>Ba(t,n,i),cdf:t=>Ia(t,n,i),icdf:t=>Na(t,n,i)};return r.mean(t).stdev(e)}function $a(t,e){const n=La();let i=0;const r={data(n){return arguments.length?(t=n,i=n?n.length:0,r.bandwidth(e)):t},bandwidth(n){return arguments.length?(!(e=n)&&t&&(e=Ca(t)),r):e},sample:()=>t[~~(Ea()*i)]+e*n.sample(),pdf(r){let s=0,o=0;for(;o<i;++o)s+=n.pdf((r-t[o])/e);return s/e/i},cdf(r){let s=0,o=0;for(;o<i;++o)s+=n.cdf((r-t[o])/e);return s/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(t)}function za(t,e){return t=t||0,e=null==e?1:e,Math.exp(t+Ra()*e)}function ja(t,e,n){if(t<=0)return 0;e=e||0,n=null==n?1:n;const i=(Math.log(t)-e)/n;return Math.exp(-.5*i*i)/(n*Ma*t)}function Ua(t,e,n){return Ia(Math.log(t),e,n)}function Va(t,e,n){return Math.exp(Na(t,e,n))}function qa(t,e){let n,i;const r={mean(t){return arguments.length?(n=t||0,r):n},stdev(t){return arguments.length?(i=null==t?1:t,r):i},sample:()=>za(n,i),pdf:t=>ja(t,n,i),cdf:t=>Ua(t,n,i),icdf:t=>Va(t,n,i)};return r.mean(t).stdev(e)}function Ha(t,e){let n,i=0;const r={weights(t){return arguments.length?(n=function(t){const e=[];let n,r=0;for(n=0;n<i;++n)r+=e[n]=null==t[n]?1:+t[n];for(n=0;n<i;++n)e[n]/=r;return e}(e=t||[]),r):e},distributions(n){return arguments.length?(n?(i=n.length,t=n):(i=0,t=[]),r.weights(e)):t},sample(){const e=Ea();let r=t[i-1],s=n[0],o=0;for(;o<i-1;s+=n[++o])if(e<s){r=t[o];break}return r.sample()},pdf(e){let r=0,s=0;for(;s<i;++s)r+=n[s]*t[s].pdf(e);return r},cdf(e){let r=0,s=0;for(;s<i;++s)r+=n[s]*t[s].cdf(e);return r},icdf(){throw Error("Mixture icdf not supported.")}};return r.distributions(t).weights(e)}function Wa(t,e){return null==e&&(e=null==t?1:t,t=0),t+(e-t)*Ea()}function Ga(t,e,n){return null==n&&(n=null==e?1:e,e=0),t>=e&&t<=n?1/(n-e):0}function Xa(t,e,n){return null==n&&(n=null==e?1:e,e=0),t<e?0:t>n?1:(t-e)/(n-e)}function Ya(t,e,n){return null==n&&(n=null==e?1:e,e=0),t>=0&&t<=1?e+t*(n-e):NaN}function Ka(t,e){let n,i;const r={min(t){return arguments.length?(n=t||0,r):n},max(t){return arguments.length?(i=null==t?1:t,r):i},sample:()=>Wa(n,i),pdf:t=>Ga(t,n,i),cdf:t=>Xa(t,n,i),icdf:t=>Ya(t,n,i)};return null==e&&(e=null==t?1:t,t=0),r.min(t).max(e)}function Za(t,e,n,i){const r=i-t*t,s=Math.abs(r)<1e-24?0:(n-t*e)/r;return[e-s*t,s]}function Qa(t,e,n,i){t=t.filter(t=>{let i=e(t),r=n(t);return null!=i&&(i=+i)>=i&&null!=r&&(r=+r)>=r}),i&&t.sort((t,n)=>e(t)-e(n));const r=t.length,s=new Float64Array(r),o=new Float64Array(r);let a,l,u,c=0,h=0,d=0;for(u of t)s[c]=a=+e(u),o[c]=l=+n(u),++c,h+=(a-h)/c,d+=(l-d)/c;for(c=0;c<r;++c)s[c]-=h,o[c]-=d;return[s,o,h,d]}function Ja(t,e,n,i){let r,s,o=-1;for(const a of t)r=e(a),s=n(a),null!=r&&(r=+r)>=r&&null!=s&&(s=+s)>=s&&i(r,s,++o)}function tl(t,e,n,i,r){let s=0,o=0;return Ja(t,e,n,(t,e)=>{const n=e-r(t),a=e-i;s+=n*n,o+=a*a}),1-s/o}function el(t,e,n){let i=0,r=0,s=0,o=0,a=0;Ja(t,e,n,(t,e)=>{++a,i+=(t-i)/a,r+=(e-r)/a,s+=(t*e-s)/a,o+=(t*t-o)/a});const l=Za(i,r,s,o),u=t=>l[0]+l[1]*t;return{coef:l,predict:u,rSquared:tl(t,e,n,r,u)}}function nl(t,e,n){let i=0,r=0,s=0,o=0,a=0;Ja(t,e,n,(t,e)=>{++a,t=Math.log(t),i+=(t-i)/a,r+=(e-r)/a,s+=(t*e-s)/a,o+=(t*t-o)/a});const l=Za(i,r,s,o),u=t=>l[0]+l[1]*Math.log(t);return{coef:l,predict:u,rSquared:tl(t,e,n,r,u)}}function il(t,e,n){const[i,r,s,o]=Qa(t,e,n);let a,l,u,c=0,h=0,d=0,f=0,p=0;Ja(t,e,n,(t,e)=>{a=i[p++],l=Math.log(e),u=a*e,c+=(e*l-c)/p,h+=(u-h)/p,d+=(u*l-d)/p,f+=(a*u-f)/p});const[m,g]=Za(h/o,c/o,d/o,f/o),y=t=>Math.exp(m+g*(t-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:tl(t,e,n,o,y)}}function rl(t,e,n){let i=0,r=0,s=0,o=0,a=0,l=0;Ja(t,e,n,(t,e)=>{const n=Math.log(t),u=Math.log(e);++l,i+=(n-i)/l,r+=(u-r)/l,s+=(n*u-s)/l,o+=(n*n-o)/l,a+=(e-a)/l});const u=Za(i,r,s,o),c=t=>u[0]*Math.pow(t,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:tl(t,e,n,a,c)}}function sl(t,e,n){const[i,r,s,o]=Qa(t,e,n),a=i.length;let l,u,c,h,d=0,f=0,p=0,m=0,g=0;for(l=0;l<a;)u=i[l],c=r[l++],h=u*u,d+=(h-d)/l,f+=(h*u-f)/l,p+=(h*h-p)/l,m+=(u*c-m)/l,g+=(h*c-g)/l;const y=p-d*d,v=d*y-f*f,_=(g*d-m*f)/v,b=(m*y-g*f)/v,x=-_*d,w=t=>_*(t-=s)*t+b*t+x+o;return{coef:[x-b*s+_*s*s+o,b-2*_*s,_],predict:w,rSquared:tl(t,e,n,o,w)}}function ol(t,e,n,i){if(1===i)return el(t,e,n);if(2===i)return sl(t,e,n);const[r,s,o,a]=Qa(t,e,n),l=r.length,u=[],c=[],h=i+1;let d,f,p,m,g;for(d=0;d<h;++d){for(p=0,m=0;p<l;++p)m+=Math.pow(r[p],d)*s[p];for(u.push(m),g=new Float64Array(h),f=0;f<h;++f){for(p=0,m=0;p<l;++p)m+=Math.pow(r[p],d+f);g[f]=m}c.push(g)}c.push(u);const y=function(t){const e=t.length-1,n=[];let i,r,s,o,a;for(i=0;i<e;++i){for(o=i,r=i+1;r<e;++r)Math.abs(t[i][r])>Math.abs(t[i][o])&&(o=r);for(s=i;s<e+1;++s)a=t[s][i],t[s][i]=t[s][o],t[s][o]=a;for(r=i+1;r<e;++r)for(s=e;s>=i;s--)t[s][r]-=t[s][i]*t[i][r]/t[i][i]}for(r=e-1;r>=0;--r){for(a=0,s=r+1;s<e;++s)a+=t[s][r]*n[s];n[r]=(t[e][r]-a)/t[r][r]}return n}(c),v=t=>{let e=a+y[0]+y[1]*(t-=o)+y[2]*t*t;for(d=3;d<h;++d)e+=y[d]*Math.pow(t,d);return e};return{coef:al(h,y,-o,a),predict:v,rSquared:tl(t,e,n,a,v)}}function al(t,e,n,i){const r=Array(t);let s,o,a,l;for(s=0;s<t;++s)r[s]=0;for(s=t-1;s>=0;--s)for(a=e[s],l=1,r[s]+=a,o=1;o<=s;++o)l*=(s+1-o)/o,r[s-o]+=a*Math.pow(n,o)*l;return r[0]+=i,r}function ll(t,e,n,i){const[r,s,o,a]=Qa(t,e,n,!0),l=r.length,u=Math.max(2,~~(i*l)),c=new Float64Array(l),h=new Float64Array(l),d=new Float64Array(l).fill(1);for(let f=-1;++f<=2;){const t=[0,u-1];for(let n=0;n<l;++n){const e=r[n],i=t[0],o=t[1];let a=0,l=0,u=0,f=0,p=0;const m=1/Math.abs(r[e-r[i]>r[o]-e?i:o]-e||1);for(let t=i;t<=o;++t){const n=r[t],i=s[t],o=ul(Math.abs(e-n)*m)*d[t],c=n*o;a+=o,l+=c,u+=i*o,f+=i*c,p+=n*c}const[g,y]=Za(l/a,u/a,f/a,p/a);c[n]=g+y*e,h[n]=Math.abs(s[n]-c[n]),cl(r,n+1,t)}if(2===f)break;const e=_a(h);if(Math.abs(e)<1e-12)break;for(let n,i,r=0;r<l;++r)n=h[r]/(6*e),d[r]=n>=1?1e-12:(i=1-n*n)*i}return function(t,e,n,i){const r=t.length,s=[];let o,a=0,l=0,u=[];for(;a<r;++a)o=t[a]+n,u[0]===o?u[1]+=(e[a]-u[1])/++l:(l=0,u[1]+=i,u=[o,e[a]],s.push(u));return u[1]+=i,s}(r,c,o,a)}function ul(t){return(t=1-t*t*t)*t*t}function cl(t,e,n){const i=t[e];let r=n[0],s=n[1]+1;if(!(s>=t.length))for(;e>r&&t[s]-i<=i-t[r];)n[0]=++r,n[1]=s,++s}const hl=.1*Math.PI/180;function dl(t,e,n,i){n=n||25,i=Math.max(n,i||200);const r=e=>[e,t(e)],s=e[0],o=e[1],a=o-s,l=a/i,u=[r(s)],c=[];if(n===i){for(let t=1;t<i;++t)u.push(r(s+t/n*a));return u.push(r(o)),u}c.push(r(o));for(let f=n;--f>0;)c.push(r(s+f/n*a));let h=u[0],d=c[c.length-1];for(;d;){const t=r((h[0]+d[0])/2);t[0]-h[0]>=l&&fl(h,t,d)>hl?c.push(t):(h=d,u.push(d),c.pop()),d=c[c.length-1]}return u}function fl(t,e,n){const i=Math.atan2(n[1]-t[1],n[0]-t[0]),r=Math.atan2(e[1]-t[1],e[0]-t[0]);return Math.abs(i-r)}function pl(t,e,n){t=+t,e=+e,n=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+n;for(var i=-1,r=0|Math.max(0,Math.ceil((e-t)/n)),s=new Array(r);++i<r;)s[i]=t+i*n;return s}function ml(t){return t&&t.length?1===t.length?t[0]:(e=t,t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}):function(){return""};var e}function gl(t,e,n){return n||t+(e?"_"+e:"")}const yl=()=>{},vl={init:yl,add:yl,rem:yl,idx:0},_l={values:{init:t=>t.cell.store=!0,value:t=>t.cell.data.values(),idx:-1},count:{value:t=>t.cell.num},__count__:{value:t=>t.missing+t.valid},missing:{value:t=>t.missing},valid:{value:t=>t.valid},sum:{init:t=>t.sum=0,value:t=>t.sum,add:(t,e)=>t.sum+=+e,rem:(t,e)=>t.sum-=e},product:{init:t=>t.product=1,value:t=>t.valid?t.product:void 0,add:(t,e)=>t.product*=e,rem:(t,e)=>t.product/=e},mean:{init:t=>t.mean=0,value:t=>t.valid?t.mean:void 0,add:(t,e)=>(t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid),rem:(t,e)=>(t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean)},average:{value:t=>t.valid?t.mean:void 0,req:["mean"],idx:1},variance:{init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):void 0,add:(t,e)=>t.dev+=t.mean_d*(e-t.mean),rem:(t,e)=>t.dev-=t.mean_d*(e-t.mean),req:["mean"],idx:1},variancep:{value:t=>t.valid>1?t.dev/t.valid:void 0,req:["variance"],idx:2},stdev:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):void 0,req:["variance"],idx:2},stderr:{value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid*(t.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:t=>t.cell.data.distinct(t.get),req:["values"],idx:3},ci0:{value:t=>t.cell.data.ci0(t.get),req:["values"],idx:3},ci1:{value:t=>t.cell.data.ci1(t.get),req:["values"],idx:3},median:{value:t=>t.cell.data.q2(t.get),req:["values"],idx:3},q1:{value:t=>t.cell.data.q1(t.get),req:["values"],idx:3},q3:{value:t=>t.cell.data.q3(t.get),req:["values"],idx:3},min:{init:t=>t.min=void 0,value:t=>t.min=Number.isNaN(t.min)?t.cell.data.min(t.get):t.min,add:(t,e)=>{(e<t.min||void 0===t.min)&&(t.min=e)},rem:(t,e)=>{e<=t.min&&(t.min=NaN)},req:["values"],idx:4},max:{init:t=>t.max=void 0,value:t=>t.max=Number.isNaN(t.max)?t.cell.data.max(t.get):t.max,add:(t,e)=>{(e>t.max||void 0===t.max)&&(t.max=e)},rem:(t,e)=>{e>=t.max&&(t.max=NaN)},req:["values"],idx:4},argmin:{init:t=>t.argmin=void 0,value:t=>t.argmin||t.cell.data.argmin(t.get),add:(t,e,n)=>{e<t.min&&(t.argmin=n)},rem:(t,e)=>{e<=t.min&&(t.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:t=>t.argmax=void 0,value:t=>t.argmax||t.cell.data.argmax(t.get),add:(t,e,n)=>{e>t.max&&(t.argmax=n)},rem:(t,e)=>{e>=t.max&&(t.argmax=void 0)},req:["max","values"],idx:3}},bl=Object.keys(_l);function xl(t,e){return _l[t](e)}function wl(t,e){return t.idx-e.idx}function Cl(){this.valid=0,this.missing=0,this._ops.forEach(t=>t.init(this))}function Al(t,e){null!=t&&""!==t?t==t&&(++this.valid,this._ops.forEach(n=>n.add(this,t,e))):++this.missing}function El(t,e){null!=t&&""!==t?t==t&&(--this.valid,this._ops.forEach(n=>n.rem(this,t,e))):--this.missing}function kl(t){return this._out.forEach(e=>t[e.out]=e.value(this)),t}function Dl(t,e){const n=e||Wo,i=function(t){const e={};t.forEach(t=>e[t.name]=t);const n=t=>{t.req&&t.req.forEach(t=>{e[t]||n(e[t]=_l[t]())})};return t.forEach(n),Object.values(e).sort(wl)}(t),r=t.slice().sort(wl);function s(t){this._ops=i,this._out=r,this.cell=t,this.init()}return s.prototype.init=Cl,s.prototype.add=Al,s.prototype.rem=El,s.prototype.set=kl,s.prototype.get=n,s.fields=t.map(t=>t.out),s}function Sl(t){this._key=t?Ho(t):to,this.reset()}bl.forEach(t=>{_l[t]=function(t,e){return n=>sa({name:t,out:n||t},vl,e)}(t,_l[t])});const Fl=Sl.prototype;function Ol(t){Po.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function Ml(t){Po.call(this,null,t)}function Tl(t,e,n){const i=t;let r=e||[],s=n||[],o={},a=0;return{add:t=>s.push(t),remove:t=>o[i(t)]=++a,size:()=>r.length,data:(t,e)=>(a&&(r=r.filter(t=>!o[i(t)]),o={},a=0),e&&t&&r.sort(t),s.length&&(r=t?function(t,e,n,i){const r=e.length,s=n.length;if(!s)return e;if(!r)return n;const o=new e.constructor(r+s);let a=0,l=0,u=0;for(;a<r&&l<s;++u)o[u]=t(e[a],n[l])>0?n[l++]:e[a++];for(;a<r;++a,++u)o[u]=e[a];for(;l<s;++l,++u)o[u]=n[l];return o}(t,r,s.sort(t)):r.concat(s),s=[]),r)}}function Pl(t){Po.call(this,[],t)}function Rl(t){po.call(this,null,Bl,t)}function Bl(t){return this.value&&!t.modified()?this.value:function(t,e,n){n=n||{},e=Qo(e)||[];const i=[],r=[],s={},o=n.comparator||ea;return Qo(t).forEach((t,o)=>{null!=t&&(i.push("descending"===e[o]?-1:1),r.push(t=Jo(t)?t:Ho(t,null,n)),($o(t)||[]).forEach(t=>s[t]=1))}),0===r.length?null:No(o(r,i),Object.keys(s))}(t.fields,t.orders)}function Il(t){Po.call(this,null,t)}function Nl(t){Po.call(this,null,t)}Fl.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},Fl.add=function(t){this._add.push(t)},Fl.rem=function(t){this._rem.push(t)},Fl.values=function(){if(this._get=null,0===this._rem.length)return this._add;const t=this._add,e=this._rem,n=this._key,i=t.length,r=e.length,s=Array(i-r),o={};let a,l,u;for(a=0;a<r;++a)o[n(e[a])]=1;for(a=0,l=0;a<i;++a)o[n(u=t[a])]?o[n(u)]=0:s[l++]=u;return this._rem=[],this._add=s},Fl.distinct=function(t){const e=this.values(),n={};let i,r=e.length,s=0;for(;--r>=0;)i=t(e[r])+"",la(n,i)||(n[i]=1,++s);return s},Fl.extent=function(t){if(this._get!==t||!this._ext){const e=this.values(),n=function(t,e){const n=t.length;let i,r,s,o,a,l=-1;if(null==e){for(;++l<n;)if(r=t[l],null!=r&&r>=r){i=s=r;break}if(l===n)return[-1,-1];for(o=a=l;++l<n;)r=t[l],null!=r&&(i>r&&(i=r,o=l),s<r&&(s=r,a=l))}else{for(;++l<n;)if(r=e(t[l],l,t),null!=r&&r>=r){i=s=r;break}if(l===n)return[-1,-1];for(o=a=l;++l<n;)r=e(t[l],l,t),null!=r&&(i>r&&(i=r,o=l),s<r&&(s=r,a=l))}return[o,a]}(e,t);this._ext=[e[n[0]],e[n[1]]],this._get=t}return this._ext},Fl.argmin=function(t){return this.extent(t)[0]||{}},Fl.argmax=function(t){return this.extent(t)[1]||{}},Fl.min=function(t){const e=this.extent(t)[0];return null!=e?t(e):void 0},Fl.max=function(t){const e=this.extent(t)[1];return null!=e?t(e):void 0},Fl.quartile=function(t){return this._get===t&&this._q||(this._q=wa(this.values(),t),this._get=t),this._q},Fl.q1=function(t){return this.quartile(t)[0]},Fl.q2=function(t){return this.quartile(t)[1]},Fl.q3=function(t){return this.quartile(t)[2]},Fl.ci=function(t){return this._get===t&&this._ci||(this._ci=Da(this.values(),1e3,.05,t),this._get=t),this._ci},Fl.ci0=function(t){return this.ci(t)[0]},Fl.ci1=function(t){return this.ci(t)[1]},Ol.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:bl},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},ha(Ol,Po,{transform(t,e){const n=this,i=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=t.modified();return n.stamp=i.stamp,n.value&&(r||e.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(t):{},e.visit(e.SOURCE,t=>n.add(t))):(n.value=n.value||n.init(t),e.visit(e.REM,t=>n.rem(t)),e.visit(e.ADD,t=>n.add(t))),i.modifies(n._outputs),n._drop=!1!==t.drop,t.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),e.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const t=this,e=t.value,n=t._dnames,i=n.map(()=>({})),r=n.length;function s(t){let e,s,o,a;for(e in t)for(o=t[e].tuple,s=0;s<r;++s)i[s][a=o[n[s]]]=a}s(t._prev),s(e),function s(o,a,l){const u=n[l],c=i[l++];for(const n in c){const i=o?o+"|"+n:n;a[u]=c[n],l<r?s(i,a,l):e[i]||t.cell(i,a)}}("",{},0)},init(t){const e=this._inputs=[],n=this._outputs=[],i={};function r(t){const n=Qo($o(t)),r=n.length;let s,o=0;for(;o<r;++o)i[s=n[o]]||(i[s]=1,e.push(s))}this._dims=Qo(t.groupby),this._dnames=this._dims.map(t=>{const e=Lo(t);return r(t),n.push(e),e}),this.cellkey=t.key?t.key:ml(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=t.fields||[null],o=t.ops||["count"],a=t.as||[],l=s.length,u={};let c,h,d,f,p,m;for(l!==o.length&&Vo("Unmatched number of fields and aggregate ops."),m=0;m<l;++m)c=s[m],h=o[m],null==c&&"count"!==h&&Vo("Null aggregate field specified."),f=Lo(c),p=gl(h,f,a[m]),n.push(p),"count"!==h?(d=u[f],d||(r(c),d=u[f]=[],d.field=c,this._measures.push(d)),"count"!==h&&(this._countOnly=!1),d.push(xl(h,p))):this._counts.push(p);return this._measures=this._measures.map(t=>Dl(t,t.field)),{}},cellkey:ml(),cell(t,e){let n=this.value[t];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=n),n},newcell(t,e){const n={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){const t=this._measures,e=t.length;n.agg=Array(e);for(let i=0;i<e;++i)n.agg[i]=new t[i](n)}return n.store&&(n.data=new Sl),n},newtuple(t,e){const n=this._dnames,i=this._dims,r=i.length,s={};for(let o=0;o<r;++o)s[n[o]]=i[o](t);return e?so(e.tuple,s):no(s)},clean(){const t=this.value;for(const e in t)0===t[e].num&&delete t[e]},add(t){const e=this.cellkey(t),n=this.cell(e,t);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(t);const i=n.agg;for(let r=0,s=i.length;r<s;++r)i[r].add(i[r].get(t),t)},rem(t){const e=this.cellkey(t),n=this.cell(e,t);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(t);const i=n.agg;for(let r=0,s=i.length;r<s;++r)i[r].rem(i[r].get(t),t)},celltuple(t){const e=t.tuple,n=this._counts;t.store&&t.data.values();for(let i=0,r=n.length;i<r;++i)e[n[i]]=t.num;if(!this._countOnly){const n=t.agg;for(let t=0,i=n.length;t<i;++t)n[t].set(e)}return e},changes(t){const e=this._adds,n=this._mods,i=this._prev,r=this._drop,s=t.add,o=t.rem,a=t.mod;let l,u,c,h;if(i)for(u in i)l=i[u],r&&!l.num||o.push(l.tuple);for(c=0,h=this._alen;c<h;++c)s.push(this.celltuple(e[c])),e[c]=null;for(c=0,h=this._mlen;c<h;++c)l=n[c],(0===l.num&&r?o:a).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,t}}),Ml.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},ha(Ml,Po,{transform(t,e){const n=!1!==t.interval,i=this._bins(t),r=i.start,s=i.step,o=t.as||["bin0","bin1"],a=o[0],l=o[1];let u;return u=t.modified()?(e=e.reflow(!0)).SOURCE:e.modified($o(t.field))?e.ADD_MOD:e.ADD,e.visit(u,n?t=>{const e=i(t);t[a]=e,t[l]=null==e?null:r+s*(1+(e-r)/s)}:t=>t[a]=i(t)),e.modifies(n?o:a)},_bins(t){if(this.value&&!t.modified())return this.value;const e=t.field,n=Aa(t),i=n.step;let r,s,o=n.start,a=o+Math.ceil((n.stop-o)/i)*i;null!=(r=t.anchor)&&(s=r-(o+i*Math.floor((r-o)/i)),o+=s,a+=s);const l=function(t){let n=Zo(e(t));return null==n?null:n<o?-1/0:n>a?1/0:(n=Math.max(o,Math.min(n,a-i)),o+i*Math.floor(1e-14+(n-o)/i))};return l.start=o,l.stop=n.stop,l.step=i,this.value=No(l,$o(e),t.name||"bin_"+Lo(e))}}),Pl.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},ha(Pl,Po,{transform(t,e){const n=e.fork(e.ALL),i=Tl(to,this.value,n.materialize(n.ADD).add),r=t.sort,s=e.changed()||r&&(t.modified("sort")||e.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(s),this.value=n.source=i.data(oo(r),s),e.source&&e.source.root&&(this.value.root=e.source.root),n}}),ha(Rl,po),Il.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},ha(Il,Po,{transform(t,e){const n=e=>n=>{for(var i,r=function(t,e,n){switch(e){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase()}return t.match(n)}(a(n),t.case,s)||[],l=0,u=r.length;l<u;++l)o.test(i=r[l])||e(i)},i=this._parameterCheck(t,e),r=this._counts,s=this._match,o=this._stop,a=t.field,l=t.as||["text","count"],u=n(t=>r[t]=1+(r[t]||0)),c=n(t=>r[t]-=1);return i?e.visit(e.SOURCE,u):(e.visit(e.ADD,u),e.visit(e.REM,c)),this._finish(e,l)},_parameterCheck(t,e){let n=!1;return!t.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),n=!0),!t.modified("pattern")&&this._match||(this._match=new RegExp(t.pattern||"[\\w']+","g"),n=!0),(t.modified("field")||e.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(t,e){const n=this._counts,i=this._tuples||(this._tuples={}),r=e[0],s=e[1],o=t.fork(t.NO_SOURCE|t.NO_FIELDS);let a,l,u;for(a in n)l=i[a],u=n[a]||0,!l&&u?(i[a]=l=no({}),l[r]=a,l[s]=u,o.add.push(l)):0===u?(l&&o.rem.push(l),n[a]=null,i[a]=null):l[s]!==u&&(l[s]=u,o.mod.push(l));return o.modifies(e)}}),Nl.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},ha(Nl,Po,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.as||["a","b"],r=i[0],s=i[1],o=!this.value||e.changed(e.ADD_REM)||t.modified("as")||t.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=e.materialize(e.SOURCE).source,n.add=this.value=function(t,e,n,i){for(var r,s,o=[],a={},l=t.length,u=0;u<l;++u)for(a[e]=s=t[u],r=0;r<l;++r)a[n]=t[r],i(a)&&(o.push(no(a)),(a={})[e]=s);return o}(a,r,s,t.filter||Xo)):n.mod=a,n.source=this.value,n.modifies(i)}});const Ll={kde:$a,mixture:Ha,normal:La,lognormal:qa,uniform:Ka};function $l(t,e){const n=t.function;la(Ll,n)||Vo("Unknown distribution function: "+n);const i=Ll[n]();for(const r in t)"field"===r?i.data((t.from||e()).map(t[r])):"distributions"===r?i[r](t[r].map(t=>$l(t,e))):"function"==typeof i[r]&&i[r](t[r]);return i}function zl(t){Po.call(this,null,t)}const jl=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}];function Ul(t,e){return t?t.map((t,n)=>e[n]||Lo(t)):null}function Vl(t,e,n){const i=[],r=t=>t(l);let s,o,a,l,u,c;if(null==e)i.push(t.map(n));else for(s={},o=0,a=t.length;o<a;++o)l=t[o],u=e.map(r),c=s[u],c||(s[u]=c=[],c.dims=u,i.push(c)),c.push(n(l));return i}function ql(t){Po.call(this,null,t)}function Hl(t){po.call(this,null,Wl,t),this.modified(!0)}function Wl(t){const e=t.expr;return this.value&&!t.modified("expr")?this.value:No(n=>e(n,t),$o(e),Lo(e))}function Gl(t){Po.call(this,[void 0,void 0],t)}function Xl(t,e){po.call(this,t),this.parent=e,this.count=0}function Yl(t){Po.call(this,{},t),this._keys=ca();const e=this._targets=[];e.active=0,e.forEach=t=>{for(let n=0,i=e.active;n<i;++n)t(e[n],n,e)}}function Kl(t){po.call(this,null,Zl,t)}function Zl(t){return this.value&&!t.modified()?this.value:Yo(t.name)?Qo(t.name).map(t=>Ho(t)):Ho(t.name,t.as)}function Ql(t){Po.call(this,ca(),t)}function Jl(t){Po.call(this,[],t)}function tu(t){Po.call(this,[],t)}function eu(t){Po.call(this,null,t)}function nu(t){Po.call(this,[],t)}zl.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:jl.concat({key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:jl},{name:"weights",type:"number",array:!0}]})},{name:"as",type:"string",array:!0,default:["value","density"]}]},ha(zl,Po,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const i=$l(t.distribution,function(t){return()=>t.materialize(t.SOURCE).source}(e)),r=t.steps||t.minsteps||25,s=t.steps||t.maxsteps||200;let o=t.method||"pdf";"pdf"!==o&&"cdf"!==o&&Vo("Invalid density method: "+o),t.extent||i.data||Vo("Missing density extent parameter."),o=i[o];const a=t.as||["value","density"],l=dl(o,t.extent||oa(i.data()),r,s).map(t=>{const e={};return e[a[0]]=t[0],e[a[1]]=t[1],no(e)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}}),ql.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]},ha(ql,Po,{transform(t,e){if(this.value&&!t.modified()&&!e.changed())return e;const n=e.materialize(e.SOURCE).source,i=Vl(e.source,t.groupby,Wo),r=t.smooth||!1,s=t.field,o=t.step||((t,e)=>function(t){return t&&Ko(t)-t[0]||0}(oa(t,e))/30)(n,s),a=oo((t,e)=>s(t)-s(e)),l=t.as||"bin",u=i.length;let c,h=1/0,d=-1/0,f=0;for(;f<u;++f){const t=i[f].sort(a);c=-1;for(const e of Sa(t,o,r,s))e<h&&(h=e),e>d&&(d=e),t[++c][l]=e}return this.value={start:h,stop:d,step:o},e.reflow(!0).modifies(l)}}),ha(Hl,po),Gl.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},ha(Gl,Po,{transform(t,e){const n=this.value,i=t.field,r=e.changed()||e.modified(i.fields)||t.modified("field");let s=n[0],o=n[1];if((r||null==s)&&(s=1/0,o=-1/0),e.visit(r?e.SOURCE:e.ADD,t=>{const e=Zo(i(t));null!=e&&(e<s&&(s=e),e>o&&(o=e))}),!Number.isFinite(s)||!Number.isFinite(o)){let t=Lo(i);t&&(t=` for field "${t}"`),e.dataflow.warn(`Infinite extent${t}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}}),ha(Xl,po,{connect(t){return this.detachSubflow=t.detachSubflow,this.targets().add(t),t.source=this},add(t){this.count+=1,this.value.add.push(t)},rem(t){this.count-=1,this.value.rem.push(t)},mod(t){this.value.mod.push(t)},init(t){this.value.init(t,t.NO_SOURCE)},evaluate(){return this.value}}),ha(Yl,Po,{activate(t){this._targets[this._targets.active++]=t},subflow(t,e,n,i){const r=this.value;let s,o,a=la(r,t)&&r[t];return a?a.value.stamp<n.stamp&&(a.init(n),this.activate(a)):(o=i||(o=this._group[t])&&o.tuple,s=n.dataflow,a=new Xl(n.fork(n.NO_SOURCE),this),s.add(a).connect(e(s,t,o)),r[t]=a,this.activate(a)),a},clean(){const t=this.value;let e=0;for(const n in t)if(0===t[n].count){const i=t[n].detachSubflow;i&&i(),delete t[n],++e}if(e){const t=this._targets.filter(t=>t&&t.count>0);this.initTargets(t)}},initTargets(t){const e=this._targets,n=e.length,i=t?t.length:0;let r=0;for(;r<i;++r)e[r]=t[r];for(;r<n&&null!=e[r];++r)e[r]=null;e.active=i},transform(t,e){const n=e.dataflow,i=t.key,r=t.subflow,s=this._keys,o=t.modified("key"),a=t=>this.subflow(t,r,e);return this._group=t.group||{},this.initTargets(),e.visit(e.REM,t=>{const e=to(t),n=s.get(e);void 0!==n&&(s.delete(e),a(n).rem(t))}),e.visit(e.ADD,t=>{const e=i(t);s.set(to(t),e),a(e).add(t)}),o||e.modified(i.fields)?e.visit(e.MOD,t=>{const e=to(t),n=s.get(e),r=i(t);n===r?a(r).mod(t):(s.set(e,r),a(n).rem(t),a(r).add(t))}):e.changed(e.MOD)&&e.visit(e.MOD,t=>{a(s.get(to(t))).mod(t)}),o&&e.visit(e.REFLOW,t=>{const e=to(t),n=s.get(e),r=i(t);n!==r&&(s.set(e,r),a(n).rem(t),a(r).add(t))}),e.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),e}}),ha(Kl,po),Ql.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},ha(Ql,Po,{transform(t,e){const n=e.dataflow,i=this.value,r=e.fork(),s=r.add,o=r.rem,a=r.mod,l=t.expr;let u=!0;function c(e){const n=to(e),r=l(e,t),c=i.get(n);r&&c?(i.delete(n),s.push(e)):r||c?u&&r&&!c&&a.push(e):(i.set(n,1),o.push(e))}return e.visit(e.REM,t=>{const e=to(t);i.has(e)?i.delete(e):o.push(t)}),e.visit(e.ADD,e=>{l(e,t)?s.push(e):i.set(to(e),1)}),e.visit(e.MOD,c),t.modified()&&(u=!1,e.visit(e.REFLOW,c)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}}),Jl.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},ha(Jl,Po,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.fields,r=Ul(i,t.as||[]),s=t.index||null,o=r.length;return n.rem=this.value,e.visit(e.SOURCE,t=>{const e=i.map(e=>e(t)),a=e.reduce((t,e)=>Math.max(t,e.length),0);let l,u,c,h=0;for(;h<a;++h){for(u=io(t),l=0;l<o;++l)u[r[l]]=null==(c=e[l][h])?null:c;s&&(u[s]=h),n.add.push(u)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(r)}}),tu.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},ha(tu,Po,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.fields,r=i.map(Lo),s=t.as||["key","value"],o=s[0],a=s[1],l=i.length;return n.rem=this.value,e.visit(e.SOURCE,t=>{for(let e,s=0;s<l;++s)e=io(t),e[o]=r[s],e[a]=i[s](t),n.add.push(e)}),this.value=n.source=n.add,n.modifies(s)}}),eu.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},ha(eu,Po,{transform(t,e){const n=t.expr,i=t.as,r=t.modified(),s=t.initonly?e.ADD:r?e.SOURCE:e.modified(n.fields)||e.modified(i)?e.ADD_MOD:e.ADD;return r&&(e=e.materialize().reflow(!0)),t.initonly||e.modifies(i),e.visit(s,e=>e[i]=n(e,t))}}),ha(nu,Po,{transform(t,e){const n=e.fork(e.ALL),i=t.generator;let r,s,o,a=this.value,l=t.size-a.length;if(l>0){for(r=[];--l>=0;)r.push(o=no(i(t))),a.push(o);n.add=n.add.length?n.materialize(n.ADD).add.concat(r):r}else s=a.slice(0,-l),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(s):s,a=a.slice(-l);return n.source=this.value=a,n}});const iu={value:"value",median:_a,mean:function(t,e){let n=0,i=0;if(void 0===e)for(let r of t)null!=r&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let s of t)null!=(s=e(s,++r,t))&&(s=+s)>=s&&(++n,i+=s)}if(n)return i/n},min:fa,max:da},ru=[];function su(t){Po.call(this,[],t)}function ou(t){Ol.call(this,t)}function au(t){Po.call(this,null,t)}function lu(t){po.call(this,null,uu,t)}function uu(t){return this.value&&!t.modified()?this.value:function(t,e,n){t&&(t=e?Qo(t).map(t=>t.replace(/\\(.)/g,"$1")):Qo(t));const i=t&&t.length,r=zo,s=t=>r(e?[t]:qo(t));let o;if(i)if(1===i){const e=s(t[0]);o=function(t){return""+e(t)}}else{const e=t.map(s);o=function(t){let n=""+e[0](t),r=0;for(;++r<i;)n+="|"+e[r](t);return n}}else o=function(){return""};return No(o,t,"key")}(t.fields,t.flat)}function cu(t){Po.call(this,[],t),this._pending=null}function hu(t,e,n){n.forEach(no);const i=e.fork(e.NO_FIELDS&e.NO_SOURCE);return i.rem=t.value,t.value=i.source=i.add=n,t._pending=null,i.rem.length&&i.clean(!0),i}function du(t){Po.call(this,{},t)}function fu(t){po.call(this,null,pu,t)}function pu(t){if(this.value&&!t.modified())return this.value;const e=t.extents,n=e.length;let i,r,s=1/0,o=-1/0;for(i=0;i<n;++i)r=e[i],r[0]<s&&(s=r[0]),r[1]>o&&(o=r[1]);return[s,o]}function mu(t){po.call(this,null,gu,t)}function gu(t){return this.value&&!t.modified()?this.value:t.values.reduce((t,e)=>t.concat(e),[])}function yu(t){Po.call(this,null,t)}function vu(t){Ol.call(this,t)}function _u(t){Yl.call(this,t)}function bu(t){Po.call(this,null,t)}function xu(t){Po.call(this,null,t)}function wu(t){Po.call(this,null,t)}function Cu(t){Po.call(this,null,t)}function Au(t){Po.call(this,[],t),this.count=0}function Eu(t){Po.call(this,null,t)}function ku(t){Po.call(this,null,t),this.modified(!0)}function Du(t){Po.call(this,null,t)}su.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},ha(su,Po,{transform(t,e){var n,i,r,s,o,a,l,u,c,h,d=e.fork(e.ALL),f=function(t){var e,n=t.method||iu.value;if(null!=iu[n])return n===iu.value?(e=void 0!==t.value?t.value:0,()=>e):iu[n];Vo("Unrecognized imputation method: "+n)}(t),p=function(t){const e=t.field;return t=>t?e(t):NaN}(t),m=Lo(t.field),g=Lo(t.key),y=(t.groupby||[]).map(Lo),v=function(t,e,n,i){var r,s,o,a,l,u,c,h,d=t=>t(h),f=[],p=i?i.slice():[],m={},g={};for(p.forEach((t,e)=>m[t]=e+1),a=0,c=t.length;a<c;++a)u=n(h=t[a]),l=m[u]||(m[u]=p.push(u)),(o=g[s=(r=e?e.map(d):ru)+""])||(o=g[s]=[],f.push(o),o.values=r),o[l-1]=h;return f.domain=p,f}(e.source,t.groupby,t.key,t.keyvals),_=[],b=this.value,x=v.domain.length;for(o=0,u=v.length;o<u;++o)for(r=(n=v[o]).values,i=NaN,l=0;l<x;++l)if(null==n[l]){for(s=v.domain[l],h={_impute:!0},a=0,c=r.length;a<c;++a)h[y[a]]=r[a];h[g]=s,h[m]=Number.isNaN(i)?i=f(n,p):i,_.push(no(h))}return _.length&&(d.add=d.materialize(d.ADD).add.concat(_)),b.length&&(d.rem=d.materialize(d.REM).rem.concat(b)),this.value=_,d}}),ou.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:bl},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},ha(ou,Ol,{transform(t,e){const n=this,i=t.modified();let r;return n.value&&(i||e.modified(n._inputs,!0))?(r=n.value=i?n.init(t):{},e.visit(e.SOURCE,t=>n.add(t))):(r=n.value=n.value||this.init(t),e.visit(e.REM,t=>n.rem(t)),e.visit(e.ADD,t=>n.add(t))),n.changes(),e.visit(e.SOURCE,t=>{sa(t,r[n.cellkey(t)].tuple)}),e.reflow(i).modifies(this._outputs)},changes(){const t=this._adds,e=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(t[n]),t[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(e[n]),e[n]=null;this._alen=this._mlen=0}}),au.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},ha(au,Po,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const i=e.materialize(e.SOURCE).source,r=Vl(i,t.groupby,t.field),s=(t.groupby||[]).map(Lo),o=t.bandwidth,a=t.cumulative?"cdf":"pdf",l=t.as||["value","density"],u=[];let c=t.extent,h=t.steps||t.minsteps||25,d=t.steps||t.maxsteps||200;"pdf"!==a&&"cdf"!==a&&Vo("Invalid density method: "+a),"shared"===t.resolve&&(c||(c=oa(i,t.field)),h=d=t.steps||d),r.forEach(e=>{const n=$a(e,o)[a],i=t.counts?e.length:1;dl(n,c||oa(e),h,d).forEach(t=>{const n={};for(let i=0;i<s.length;++i)n[s[i]]=e.dims[i];n[l[0]]=t[0],n[l[1]]=t[1]*i,u.push(no(n))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}}),ha(lu,po),ha(cu,Po,{transform(t,e){const n=e.dataflow;return this._pending?hu(this,e,this._pending):function(t){return t.modified("async")&&!(t.modified("values")||t.modified("url")||t.modified("format"))}(t)?e.StopPropagation:t.values?hu(this,e,n.parse(t.values,t.format)):t.async?{async:n.request(t.url,t.format).then(t=>(this._pending=Qo(t.data),t=>t.touch(this)))}:n.request(t.url,t.format).then(t=>hu(this,e,Qo(t.data)))}}),du.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},ha(du,Po,{transform(t,e){const n=t.fields,i=t.index,r=t.values,s=null==t.default?null:t.default,o=t.modified(),a=n.length;let l,u,c,h=o?e.SOURCE:e.ADD,d=e,f=t.as;return r?(u=r.length,a>1&&!f&&Vo('Multi-field lookup requires explicit "as" parameter.'),f&&f.length!==a*u&&Vo('The "as" parameter has too few output field names.'),f=f||r.map(Lo),l=function(t){for(var e,o,l=0,c=0;l<a;++l)if(null==(o=i.get(n[l](t))))for(e=0;e<u;++e,++c)t[f[c]]=s;else for(e=0;e<u;++e,++c)t[f[c]]=r[e](o)}):(f||Vo("Missing output field names."),l=function(t){for(var e,r=0;r<a;++r)e=i.get(n[r](t)),t[f[r]]=null==e?s:e}),o?d=e.reflow(!0):(c=n.some(t=>e.modified(t.fields)),h|=c?e.MOD:0),e.visit(h,l),d.modifies(f)}}),ha(fu,po),ha(mu,po),ha(yu,Po,{transform(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)}}),vu.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:bl,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},ha(vu,Ol,{_transform:Ol.prototype.transform,transform(t,e){return this._transform(function(t,e){const n=t.field,i=t.value,r=("count"===t.op?"__count__":t.op)||"sum",s=$o(n).concat($o(i)),o=function(t,e,n){const i={},r=[];return n.visit(n.SOURCE,e=>{const n=t(e);i[n]||(i[n]=1,r.push(n))}),r.sort(ta),e?r.slice(0,e):r}(n,t.limit||0,e);return e.changed()&&t.set("__pivot__",null,null,!0),{key:t.key,groupby:t.groupby,ops:o.map(()=>r),fields:o.map(t=>function(t,e,n,i){return No(i=>e(i)===t?n(i):NaN,i,t+"")}(t,n,i,s)),as:o.map(t=>t+""),modified:t.modified.bind(t)}}(t,e),e)}}),ha(_u,Yl,{transform(t,e){const n=t.subflow,i=t.field,r=t=>this.subflow(to(t),n,e,t);return(t.modified("field")||i&&e.modified($o(i)))&&Vo("PreFacet does not support field modification."),this.initTargets(),i?(e.visit(e.MOD,t=>{const e=r(t);i(t).forEach(t=>e.mod(t))}),e.visit(e.ADD,t=>{const e=r(t);i(t).forEach(t=>e.add(no(t)))}),e.visit(e.REM,t=>{const e=r(t);i(t).forEach(t=>e.rem(t))})):(e.visit(e.MOD,t=>r(t).mod(t)),e.visit(e.ADD,t=>r(t).add(t)),e.visit(e.REM,t=>r(t).rem(t))),e.clean()&&e.runAfter(()=>this.clean()),e}}),bu.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},ha(bu,Po,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.fields,r=Ul(t.fields,t.as||[]),s=i?(t,e)=>function(t,e,n,i){for(let r=0,s=n.length;r<s;++r)e[i[r]]=n[r](t);return e}(t,e,i,r):ro;let o;return this.value?o=this.value:(e=e.addAll(),o=this.value={}),e.visit(e.REM,t=>{const e=to(t);n.rem.push(o[e]),o[e]=null}),e.visit(e.ADD,t=>{const e=s(t,no({}));o[to(t)]=e,n.add.push(e)}),e.visit(e.MOD,t=>{n.mod.push(s(t,o[to(t)]))}),n}}),ha(xu,Po,{transform(t,e){return this.value=t.value,t.modified("value")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}}),wu.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]},ha(wu,Po,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.as||["prob","value"];if(this.value&&!t.modified()&&!e.changed())return n.source=this.value,n;const r=Vl(e.materialize(e.SOURCE).source,t.groupby,t.field),s=(t.groupby||[]).map(Lo),o=[],a=t.step||.01,l=t.probs||pl(a/2,1-1e-14,a),u=l.length;return r.forEach(t=>{const e=xa(t,l);for(let n=0;n<u;++n){const r={};for(let e=0;e<s.length;++e)r[s[e]]=t.dims[e];r[i[0]]=l[n],r[i[1]]=e[n],o.push(no(r))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=o,n}}),ha(Cu,Po,{transform(t,e){let n,i;return this.value?i=this.value:(n=e=e.addAll(),i=this.value={}),t.derive&&(n=e.fork(e.NO_SOURCE),e.visit(e.REM,t=>{const e=to(t);n.rem.push(i[e]),i[e]=null}),e.visit(e.ADD,t=>{const e=io(t);i[to(t)]=e,n.add.push(e)}),e.visit(e.MOD,t=>{const e=i[to(t)];for(const i in t)e[i]=t[i],n.modifies(i);n.mod.push(e)})),n}}),Au.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},ha(Au,Po,{transform(t,e){const n=e.fork(e.NO_SOURCE),i=t.modified("size"),r=t.size,s=this.value.reduce((t,e)=>(t[to(e)]=1,t),{});let o=this.value,a=this.count,l=0;function u(t){let e,i;o.length<r?o.push(t):(i=~~((a+1)*Ea()),i<o.length&&i>=l&&(e=o[i],s[to(e)]&&n.rem.push(e),o[i]=t)),++a}if(e.rem.length&&(e.visit(e.REM,t=>{const e=to(t);s[e]&&(s[e]=-1,n.rem.push(t)),--a}),o=o.filter(t=>-1!==s[to(t)])),(e.rem.length||i)&&o.length<r&&e.source&&(l=a=o.length,e.visit(e.SOURCE,t=>{s[to(t)]||u(t)}),l=-1),i&&o.length>r){const t=o.length-r;for(let e=0;e<t;++e)s[to(o[e])]=-1,n.rem.push(o[e]);o=o.slice(t)}return e.mod.length&&e.visit(e.MOD,t=>{s[to(t)]&&n.mod.push(t)}),e.add.length&&e.visit(e.ADD,u),(e.add.length||l<0)&&(n.add=o.filter(t=>!s[to(t)])),this.count=a,this.value=n.source=o,n}}),Eu.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},ha(Eu,Po,{transform(t,e){if(this.value&&!t.modified())return;const n=e.materialize().fork(e.MOD),i=t.as||"data";return n.rem=this.value?e.rem.concat(this.value):e.rem,this.value=pl(t.start,t.stop,t.step||1).map(t=>{const e={};return e[i]=t,no(e)}),n.add=e.add.concat(this.value),n}}),ha(ku,Po,{transform(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation}});const Su=["unit0","unit1"];function Fu(t){Po.call(this,ca(),t)}function Ou(t){Po.call(this,null,t)}Du.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:di,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:Su}]},ha(Du,Po,{transform(t,e){const n=t.field,i=!1!==t.interval,r="utc"===t.timezone,s=this._floor(t,e),o=(r?Ui:ji)(s.unit).offset,a=t.as||Su,l=a[0],u=a[1],c=s.step;let h=s.start||1/0,d=s.stop||-1/0,f=e.ADD;return(t.modified()||e.modified($o(n)))&&(f=(e=e.reflow(!0)).SOURCE,h=1/0,d=-1/0),e.visit(f,t=>{const e=n(t);let r,a;null==e?(t[l]=null,i&&(t[u]=null)):(t[l]=r=a=s(e),i&&(t[u]=a=o(r,c)),r<h&&(h=r),a>d&&(d=a))}),s.start=h,s.stop=d,e.modifies(i?a:l)},_floor(t,e){const n="utc"===t.timezone,{units:i,step:r}=t.units?{units:t.units,step:t.step||1}:rr({extent:t.extent||oa(e.materialize(e.SOURCE).source,t.field),maxbins:t.maxbins}),s=pi(i),o=this.value||{},a=(n?Li:Bi)(s,r);return a.unit=Ko(s),a.units=s,a.step=r,a.start=o.start,a.stop=o.stop,this.value=a}}),ha(Fu,Po,{transform(t,e){const n=e.dataflow,i=t.field,r=this.value,s=t=>r.set(i(t),t);let o=!0;return t.modified("field")||e.modified(i.fields)?(r.clear(),e.visit(e.SOURCE,s)):e.changed()?(e.visit(e.REM,t=>r.delete(i(t))),e.visit(e.ADD,s)):o=!1,this.modified(o),r.empty>n.cleanThreshold&&n.runAfter(r.clean),e.fork()}}),ha(Ou,Po,{transform(t,e){(!this.value||t.modified("field")||t.modified("sort")||e.changed()||t.sort&&e.modified(t.sort.fields))&&(this.value=(t.sort?e.source.slice().sort(oo(t.sort)):e.source).map(t.field))}});const Mu={row_number:function(){return{next:t=>t.index+1}},rank:function(){let t;return{init:()=>t=1,next:e=>{const n=e.index,i=e.data;return n&&e.compare(i[n-1],i[n])?t=n+1:t}}},dense_rank:function(){let t;return{init:()=>t=1,next:e=>{const n=e.index,i=e.data;return n&&e.compare(i[n-1],i[n])?++t:t}}},percent_rank:function(){const t=Mu.rank(),e=t.next;return{init:t.init,next:t=>(e(t)-1)/(t.data.length-1)}},cume_dist:function(){let t;return{init:()=>t=0,next:e=>{const n=e.data,i=e.compare;let r=e.index;if(t<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;t=r}return(1+t)/n.length}}},ntile:function(t,e){(e=+e)>0||Vo("ntile num must be greater than zero.");const n=Mu.cume_dist(),i=n.next;return{init:n.init,next:t=>Math.ceil(e*i(t))}},lag:function(t,e){return e=+e||1,{next:n=>{const i=n.index-e;return i>=0?t(n.data[i]):null}}},lead:function(t,e){return e=+e||1,{next:n=>{const i=n.index+e,r=n.data;return i<r.length?t(r[i]):null}}},first_value:function(t){return{next:e=>t(e.data[e.i0])}},last_value:function(t){return{next:e=>t(e.data[e.i1-1])}},nth_value:function(t,e){return(e=+e)>0||Vo("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(e-1);return i<n.i1?t(n.data[i]):null}}},prev_value:function(t){let e;return{init:()=>e=null,next:n=>{const i=t(n.data[n.index]);return null!=i?e=i:e}}},next_value:function(t){let e,n;return{init:()=>(e=null,n=-1),next:i=>{const r=i.data;return i.index<=n?e:(n=function(t,e,n){for(let i=e.length;n<i;++n)if(null!=t(e[n]))return n;return-1}(t,r,i.index))<0?(n=r.length,e=null):e=t(r[n])}}}},Tu=Object.keys(Mu);function Pu(t){const e=Qo(t.ops),n=Qo(t.fields),i=Qo(t.params),r=Qo(t.as),s=this.outputs=[],o=this.windows=[],a={},l={},u=[],c=[];let h=!0;function d(t){Qo($o(t)).forEach(t=>a[t]=1)}d(t.sort),e.forEach((t,e)=>{const a=n[e],f=Lo(a),p=gl(t,f,r[e]);if(d(a),s.push(p),la(Mu,t))o.push(function(t,e,n,i){const r=Mu[t](e,n);return{init:r.init||Go,update:function(t,e){e[i]=r.next(t)}}}(t,n[e],i[e],p));else{if(null==a&&"count"!==t&&Vo("Null aggregate field specified."),"count"===t)return void u.push(p);h=!1;let e=l[f];e||(e=l[f]=[],e.field=a,c.push(e)),e.push(xl(t,p))}}),(u.length||c.length)&&(this.cell=function(t,e,n){t=t.map(t=>Dl(t,t.field));const i={num:0,agg:null,store:!1,count:e};if(!n)for(var r=t.length,s=i.agg=Array(r),o=0;o<r;++o)s[o]=new t[o](i);if(i.store)var a=i.data=new Sl;return i.add=function(t){if(i.num+=1,!n){a&&a.add(t);for(let e=0;e<r;++e)s[e].add(s[e].get(t),t)}},i.rem=function(t){if(i.num-=1,!n){a&&a.rem(t);for(let e=0;e<r;++e)s[e].rem(s[e].get(t),t)}},i.set=function(t){let r,o;for(a&&a.values(),r=0,o=e.length;r<o;++r)t[e[r]]=i.num;if(!n)for(r=0,o=s.length;r<o;++r)s[r].set(t)},i.init=function(){i.num=0,a&&a.reset();for(let t=0;t<r;++t)s[t].init()},i}(c,u,h)),this.inputs=Object.keys(a)}const Ru=Pu.prototype;function Bu(t){Po.call(this,{},t),this._mlen=0,this._mods=[]}function Iu(t,e,n,i){const r=i.sort,s=r&&!i.ignorePeers,o=i.frame||[null,0],a=t.data(n),l=a.length,u=s?ti(r):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:r||ra(-1)};e.init();for(let h=0;h<l;++h)Nu(c,o,h,l),s&&Lu(c,u),e.update(c,a[h])}function Nu(t,e,n,i){t.p0=t.i0,t.p1=t.i1,t.i0=null==e[0]?0:Math.max(0,n-Math.abs(e[0])),t.i1=null==e[1]?i:Math.min(i,n+Math.abs(e[1])+1),t.index=n}function Lu(t,e){const n=t.i0,i=t.i1-1,r=t.compare,s=t.data,o=s.length-1;n>0&&!r(s[n],s[n-1])&&(t.i0=e.left(s,s[n])),i<o&&!r(s[i],s[i+1])&&(t.i1=e.right(s,s[i]))}function $u(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function zu(t){this._context=t}function ju(){}function Uu(t){this._context=t}function Vu(t){this._context=t}function qu(t,e){this._basis=new zu(t),this._beta=e}Ru.init=function(){this.windows.forEach(t=>t.init()),this.cell&&this.cell.init()},Ru.update=function(t,e){const n=this.cell,i=this.windows,r=t.data,s=i&&i.length;let o;if(n){for(o=t.p0;o<t.i0;++o)n.rem(r[o]);for(o=t.p1;o<t.i1;++o)n.add(r[o]);n.set(e)}for(o=0;o<s;++o)i[o].update(t,e)},Bu.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Tu.concat(bl)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},ha(Bu,Po,{transform(t,e){this.stamp=e.stamp;const n=t.modified(),i=oo(t.sort),r=ml(t.groupby),s=t=>this.group(r(t));let o=this.state;o&&!n||(o=this.state=new Pu(t)),n||e.modified(o.inputs)?(this.value={},e.visit(e.SOURCE,t=>s(t).add(t))):(e.visit(e.REM,t=>s(t).remove(t)),e.visit(e.ADD,t=>s(t).add(t)));for(let a=0,l=this._mlen;a<l;++a)Iu(this._mods[a],o,i,t);return this._mlen=0,this._mods=[],e.reflow(n).modifies(o.outputs)},group(t){let e=this.value[t];return e||(e=this.value[t]=Tl(to),e.stamp=-1),e.stamp<this.stamp&&(e.stamp=this.stamp,this._mods[this._mlen++]=e),e}}),zu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:$u(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:$u(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Uu.prototype={areaStart:ju,areaEnd:ju,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:$u(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Vu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:$u(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},qu.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i,r=t[0],s=e[0],o=t[n]-r,a=e[n]-s,l=-1;++l<=n;)this._basis.point(this._beta*t[l]+(1-this._beta)*(r+(i=l/n)*o),this._beta*e[l]+(1-this._beta)*(s+i*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const Hu=function t(e){function n(t){return 1===e?new zu(t):new qu(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function Wu(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Gu(t,e){this._context=t,this._k=(1-e)/6}Gu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Wu(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Wu(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Xu=function t(e){function n(t){return new Gu(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Yu(t,e){this._context=t,this._k=(1-e)/6}Yu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Wu(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Ku=function t(e){function n(t){return new Yu(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Zu(t,e){this._context=t,this._k=(1-e)/6}Zu.prototype={areaStart:ju,areaEnd:ju,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Wu(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Qu=function t(e){function n(t){return new Zu(t,e)}return n.tension=function(e){return t(+e)},n}(0);var Ju=Math.abs,tc=Math.atan2,ec=Math.cos,nc=Math.max,ic=Math.min,rc=Math.sin,sc=Math.sqrt,oc=1e-12,ac=Math.PI,lc=ac/2,uc=2*ac;function cc(t){return t>1?0:t<-1?ac:Math.acos(t)}function hc(t){return t>=1?lc:t<=-1?-lc:Math.asin(t)}function dc(t,e,n){var i=t._x1,r=t._y1,s=t._x2,o=t._y2;if(t._l01_a>oc){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,r=(r*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>oc){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);s=(s*u+t._x1*t._l23_2a-e*t._l12_2a)/c,o=(o*u+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(i,r,s,o,t._x2,t._y2)}function fc(t,e){this._context=t,this._alpha=e}fc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:dc(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const pc=function t(e){function n(t){return e?new fc(t,e):new Gu(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function mc(t,e){this._context=t,this._alpha=e}mc.prototype={areaStart:ju,areaEnd:ju,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:dc(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const gc=function t(e){function n(t){return e?new mc(t,e):new Zu(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function yc(t,e){this._context=t,this._alpha=e}yc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:dc(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const vc=function t(e){function n(t){return e?new yc(t,e):new Yu(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function _c(t){this._context=t}function bc(t){return new _c(t)}function xc(t){this._context=t}function wc(t){return t<0?-1:1}function Cc(t,e,n){var i=t._x1-t._x0,r=e-t._x1,s=(t._y1-t._y0)/(i||r<0&&-0),o=(n-t._y1)/(r||i<0&&-0),a=(s*r+o*i)/(i+r);return(wc(s)+wc(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Ac(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Ec(t,e,n){var i=t._x0,r=t._x1,s=t._y1,o=(r-i)/3;t._context.bezierCurveTo(i+o,t._y0+o*e,r-o,s-o*n,r,s)}function kc(t){this._context=t}function Dc(t){this._context=new Sc(t)}function Sc(t){this._context=t}function Fc(t){this._context=t}function Oc(t){var e,n,i=t.length-1,r=new Array(i),s=new Array(i),o=new Array(i);for(r[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<i-1;++e)r[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(r[i-1]=2,s[i-1]=7,o[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)s[e]-=n=r[e]/s[e-1],o[e]-=n*o[e-1];for(r[i-1]=o[i-1]/s[i-1],e=i-2;e>=0;--e)r[e]=(o[e]-r[e+1])/s[e];for(s[i-1]=(t[i]+r[i-1])/2,e=0;e<i-1;++e)s[e]=2*t[e+1]-r[e+1];return[r,s]}function Mc(t,e){this._context=t,this._t=e}_c.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},xc.prototype={areaStart:ju,areaEnd:ju,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},kc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ec(this,this._t0,Ac(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Ec(this,Ac(this,n=Cc(this,t,e)),n);break;default:Ec(this,this._t0,n=Cc(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Dc.prototype=Object.create(kc.prototype)).point=function(t,e){kc.prototype.point.call(this,e,t)},Sc.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,s){this._context.bezierCurveTo(e,t,i,n,s,r)}},Fc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=Oc(t),r=Oc(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(i[0][s],r[0][s],i[1][s],r[1][s],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},Mc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};const Tc=Math.PI,Pc=2*Tc,Rc=1e-6,Bc=Pc-Rc;function Ic(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Nc(){return new Ic}Ic.prototype=Nc.prototype={constructor:Ic,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,s){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+s)},arcTo:function(t,e,n,i,r){var s=this._x1,o=this._y1,a=(n=+n)-(t=+t),l=(i=+i)-(e=+e),u=s-t,c=o-e,h=u*u+c*c;if((r=+r)<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>Rc)if(Math.abs(c*a-l*u)>Rc&&r){var d=n-s,f=i-o,p=a*a+l*l,m=d*d+f*f,g=Math.sqrt(p),y=Math.sqrt(h),v=r*Math.tan((Tc-Math.acos((p+h-m)/(2*g*y)))/2),_=v/y,b=v/g;Math.abs(_-1)>Rc&&(this._+="L"+(t+_*u)+","+(e+_*c)),this._+="A"+r+","+r+",0,0,"+ +(c*d>u*f)+","+(this._x1=t+b*a)+","+(this._y1=e+b*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,i,r,s){t=+t,e=+e,s=!!s;var o=(n=+n)*Math.cos(i),a=n*Math.sin(i),l=t+o,u=e+a,c=1^s,h=s?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+l+","+u:(Math.abs(this._x1-l)>Rc||Math.abs(this._y1-u)>Rc)&&(this._+="L"+l+","+u),n&&(h<0&&(h=h%Pc+Pc),h>Bc?this._+="A"+n+","+n+",0,1,"+c+","+(t-o)+","+(e-a)+"A"+n+","+n+",0,1,"+c+","+(this._x1=l)+","+(this._y1=u):h>Rc&&(this._+="A"+n+","+n+",0,"+ +(h>=Tc)+","+c+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};const Lc=Nc;function $c(t){return function(){return t}}function zc(t){return t.innerRadius}function jc(t){return t.outerRadius}function Uc(t){return t.startAngle}function Vc(t){return t.endAngle}function qc(t){return t&&t.padAngle}function Hc(t,e,n,i,r,s,o,a){var l=n-t,u=i-e,c=o-r,h=a-s,d=h*l-c*u;if(!(d*d<oc))return[t+(d=(c*(e-s)-h*(t-r))/d)*l,e+d*u]}function Wc(t,e,n,i,r,s,o){var a=t-n,l=e-i,u=(o?s:-s)/sc(a*a+l*l),c=u*l,h=-u*a,d=t+c,f=e+h,p=n+c,m=i+h,g=(d+p)/2,y=(f+m)/2,v=p-d,_=m-f,b=v*v+_*_,x=r-s,w=d*m-p*f,C=(_<0?-1:1)*sc(nc(0,x*x*b-w*w)),A=(w*_-v*C)/b,E=(-w*v-_*C)/b,k=(w*_+v*C)/b,D=(-w*v+_*C)/b,S=A-g,F=E-y,O=k-g,M=D-y;return S*S+F*F>O*O+M*M&&(A=k,E=D),{cx:A,cy:E,x01:-c,y01:-h,x11:A*(r/x-1),y11:E*(r/x-1)}}function Gc(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function Xc(t){return t[0]}function Yc(t){return t[1]}function Kc(t,e){var n=$c(!0),i=null,r=bc,s=null;function o(o){var a,l,u,c=(o=Gc(o)).length,h=!1;for(null==i&&(s=r(u=Lc())),a=0;a<=c;++a)!(a<c&&n(l=o[a],a,o))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+t(l,a,o),+e(l,a,o));if(u)return s=null,u+""||null}return t="function"==typeof t?t:void 0===t?Xc:$c(t),e="function"==typeof e?e:void 0===e?Yc:$c(e),o.x=function(e){return arguments.length?(t="function"==typeof e?e:$c(+e),o):t},o.y=function(t){return arguments.length?(e="function"==typeof t?t:$c(+t),o):e},o.defined=function(t){return arguments.length?(n="function"==typeof t?t:$c(!!t),o):n},o.curve=function(t){return arguments.length?(r=t,null!=i&&(s=r(i)),o):r},o.context=function(t){return arguments.length?(null==t?i=s=null:s=r(i=t),o):i},o}function Zc(t,e,n){var i=null,r=$c(!0),s=null,o=bc,a=null;function l(l){var u,c,h,d,f,p=(l=Gc(l)).length,m=!1,g=new Array(p),y=new Array(p);for(null==s&&(a=o(f=Lc())),u=0;u<=p;++u){if(!(u<p&&r(d=l[u],u,l))===m)if(m=!m)c=u,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),h=u-1;h>=c;--h)a.point(g[h],y[h]);a.lineEnd(),a.areaEnd()}m&&(g[u]=+t(d,u,l),y[u]=+e(d,u,l),a.point(i?+i(d,u,l):g[u],n?+n(d,u,l):y[u]))}if(f)return a=null,f+""||null}function u(){return Kc().defined(r).curve(o).context(s)}return t="function"==typeof t?t:void 0===t?Xc:$c(+t),e="function"==typeof e?e:$c(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?Yc:$c(+n),l.x=function(e){return arguments.length?(t="function"==typeof e?e:$c(+e),i=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:$c(+e),l):t},l.x1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:$c(+t),l):i},l.y=function(t){return arguments.length?(e="function"==typeof t?t:$c(+t),n=null,l):e},l.y0=function(t){return arguments.length?(e="function"==typeof t?t:$c(+t),l):e},l.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:$c(+t),l):n},l.lineX0=l.lineY0=function(){return u().x(t).y(e)},l.lineY1=function(){return u().x(t).y(n)},l.lineX1=function(){return u().x(i).y(e)},l.defined=function(t){return arguments.length?(r="function"==typeof t?t:$c(!!t),l):r},l.curve=function(t){return arguments.length?(o=t,null!=s&&(a=o(s)),l):o},l.context=function(t){return arguments.length?(null==t?s=a=null:a=o(s=t),l):s},l}const Qc={draw:function(t,e){var n=Math.sqrt(e/ac);t.moveTo(n,0),t.arc(0,0,n,0,uc)}};function Jc(t,e){if("undefined"!=typeof document&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=t,n.height=e,n}return null}Math.sqrt(1/3),Math.sin(ac/10),Math.sin(7*ac/10),Math.sin(uc/10),Math.cos(uc/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12);const th=()=>"undefined"!=typeof Image?Image:null,eh=ti(Jn),nh=eh.right,ih=eh.left,rh=(ti(ga),nh);function sh(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function oh(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}const ah=Symbol("implicit");function lh(){var t=new Map,e=[],n=[],i=ah;function r(r){var s=r+"",o=t.get(s);if(!o){if(i!==ah)return i;t.set(s,o=e.push(r))}return n[(o-1)%n.length]}return r.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Map;for(const i of n){const n=i+"";t.has(n)||t.set(n,e.push(i))}return r},r.range=function(t){return arguments.length?(n=Array.from(t),r):n.slice()},r.unknown=function(t){return arguments.length?(i=t,r):i},r.copy=function(){return lh(e,n).unknown(i)},sh.apply(r,arguments),r}function uh(t,e,n,i){var r,s=en(t,e,n);switch((i=sn(null==i?",f":i)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=i.precision||isNaN(r=un(s,o))||(i.precision=r),yn(i,o);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(r=cn(s,Math.max(Math.abs(t),Math.abs(e))))||(i.precision=r-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(r=hn(s))||(i.precision=r-2*("%"===i.type))}return gn(i)}function ch(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function hh(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function dh(){}var fh=.7,ph=1/fh,mh="\\s*([+-]?\\d+)\\s*",gh="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",yh="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vh=/^#([0-9a-f]{3,8})$/,_h=new RegExp("^rgb\\("+[mh,mh,mh]+"\\)$"),bh=new RegExp("^rgb\\("+[yh,yh,yh]+"\\)$"),xh=new RegExp("^rgba\\("+[mh,mh,mh,gh]+"\\)$"),wh=new RegExp("^rgba\\("+[yh,yh,yh,gh]+"\\)$"),Ch=new RegExp("^hsl\\("+[gh,yh,yh]+"\\)$"),Ah=new RegExp("^hsla\\("+[gh,yh,yh,gh]+"\\)$"),Eh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function kh(){return this.rgb().formatHex()}function Dh(){return this.rgb().formatRgb()}function Sh(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=vh.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Fh(e):3===n?new Ph(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Oh(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Oh(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=_h.exec(t))?new Ph(e[1],e[2],e[3],1):(e=bh.exec(t))?new Ph(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=xh.exec(t))?Oh(e[1],e[2],e[3],e[4]):(e=wh.exec(t))?Oh(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Ch.exec(t))?Nh(e[1],e[2]/100,e[3]/100,1):(e=Ah.exec(t))?Nh(e[1],e[2]/100,e[3]/100,e[4]):Eh.hasOwnProperty(t)?Fh(Eh[t]):"transparent"===t?new Ph(NaN,NaN,NaN,0):null}function Fh(t){return new Ph(t>>16&255,t>>8&255,255&t,1)}function Oh(t,e,n,i){return i<=0&&(t=e=n=NaN),new Ph(t,e,n,i)}function Mh(t){return t instanceof dh||(t=Sh(t)),t?new Ph((t=t.rgb()).r,t.g,t.b,t.opacity):new Ph}function Th(t,e,n,i){return 1===arguments.length?Mh(t):new Ph(t,e,n,null==i?1:i)}function Ph(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}function Rh(){return"#"+Ih(this.r)+Ih(this.g)+Ih(this.b)}function Bh(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Ih(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Nh(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new zh(t,e,n,i)}function Lh(t){if(t instanceof zh)return new zh(t.h,t.s,t.l,t.opacity);if(t instanceof dh||(t=Sh(t)),!t)return new zh;if(t instanceof zh)return t;var e=(t=t.rgb()).r/255,n=t.g/255,i=t.b/255,r=Math.min(e,n,i),s=Math.max(e,n,i),o=NaN,a=s-r,l=(s+r)/2;return a?(o=e===s?(n-i)/a+6*(n<i):n===s?(i-e)/a+2:(e-n)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new zh(o,a,l,t.opacity)}function $h(t,e,n,i){return 1===arguments.length?Lh(t):new zh(t,e,n,null==i?1:i)}function zh(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function jh(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Uh(t,e,n,i,r){var s=t*t,o=s*t;return((1-3*t+3*s-o)*e+(4-6*s+3*o)*n+(1+3*t+3*s-3*o)*i+o*r)/6}function Vh(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),r=t[i],s=t[i+1];return Uh((n-i/e)*e,i>0?t[i-1]:2*r-s,r,s,i<e-1?t[i+2]:2*s-r)}}function qh(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e);return Uh((n-i/e)*e,t[(i+e-1)%e],t[i%e],t[(i+1)%e],t[(i+2)%e])}}ch(dh,Sh,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:kh,formatHex:kh,formatHsl:function(){return Lh(this).formatHsl()},formatRgb:Dh,toString:Dh}),ch(Ph,Th,hh(dh,{brighter:function(t){return t=null==t?ph:Math.pow(ph,t),new Ph(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?fh:Math.pow(fh,t),new Ph(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Rh,formatHex:Rh,formatRgb:Bh,toString:Bh})),ch(zh,$h,hh(dh,{brighter:function(t){return t=null==t?ph:Math.pow(ph,t),new zh(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?fh:Math.pow(fh,t),new zh(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,r=2*n-i;return new Ph(jh(t>=240?t-240:t+120,r,i),jh(t,r,i),jh(t<120?t+240:t-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));const Hh=t=>()=>t;function Wh(t,e){return function(n){return t+n*e}}function Gh(t,e){var n=e-t;return n?Wh(t,n>180||n<-180?n-360*Math.round(n/360):n):Hh(isNaN(t)?e:t)}function Xh(t,e){var n=e-t;return n?Wh(t,n):Hh(isNaN(t)?e:t)}const Yh=function t(e){var n=function(t){return 1==(t=+t)?Xh:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):Hh(isNaN(e)?n:e)}}(e);function i(t,e){var i=n((t=Th(t)).r,(e=Th(e)).r),r=n(t.g,e.g),s=n(t.b,e.b),o=Xh(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=r(e),t.b=s(e),t.opacity=o(e),t+""}}return i.gamma=t,i}(1);function Kh(t){return function(e){var n,i,r=e.length,s=new Array(r),o=new Array(r),a=new Array(r);for(n=0;n<r;++n)i=Th(e[n]),s[n]=i.r||0,o[n]=i.g||0,a[n]=i.b||0;return s=t(s),o=t(o),a=t(a),i.opacity=1,function(t){return i.r=s(t),i.g=o(t),i.b=a(t),i+""}}}var Zh=Kh(Vh),Qh=Kh(qh);function Jh(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(s){for(n=0;n<i;++n)r[n]=t[n]*(1-s)+e[n]*s;return r}}function td(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function ed(t,e){return(td(e)?Jh:nd)(t,e)}function nd(t,e){var n,i=e?e.length:0,r=t?Math.min(i,t.length):0,s=new Array(r),o=new Array(i);for(n=0;n<r;++n)s[n]=ud(t[n],e[n]);for(;n<i;++n)o[n]=e[n];return function(t){for(n=0;n<r;++n)o[n]=s[n](t);return o}}function id(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function rd(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function sd(t,e){var n,i={},r={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?i[n]=ud(t[n],e[n]):r[n]=e[n];return function(t){for(n in i)r[n]=i[n](t);return r}}var od=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ad=new RegExp(od.source,"g");function ld(t,e){var n,i,r,s=od.lastIndex=ad.lastIndex=0,o=-1,a=[],l=[];for(t+="",e+="";(n=od.exec(t))&&(i=ad.exec(e));)(r=i.index)>s&&(r=e.slice(s,r),a[o]?a[o]+=r:a[++o]=r),(n=n[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:rd(n,i)})),s=ad.lastIndex;return s<e.length&&(r=e.slice(s),a[o]?a[o]+=r:a[++o]=r),a.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,i=0;i<e;++i)a[(n=l[i]).i]=n.x(t);return a.join("")})}function ud(t,e){var n,i=typeof e;return null==e||"boolean"===i?Hh(e):("number"===i?rd:"string"===i?(n=Sh(e))?(e=n,Yh):ld:e instanceof Sh?Yh:e instanceof Date?id:td(e)?Jh:Array.isArray(e)?nd:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?sd:rd)(t,e)}function cd(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function hd(t){return+t}var dd=[0,1];function fd(t){return t}function pd(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function md(t,e,n){var i=t[0],r=t[1],s=e[0],o=e[1];return r<i?(i=pd(r,i),s=n(o,s)):(i=pd(i,r),s=n(s,o)),function(t){return s(i(t))}}function gd(t,e,n){var i=Math.min(t.length,e.length)-1,r=new Array(i),s=new Array(i),o=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<i;)r[o]=pd(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(e){var n=rh(t,e,1,i)-1;return s[n](r[n](e))}}function yd(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function vd(){var t,e,n,i,r,s,o=dd,a=dd,l=ud,u=fd;function c(){var t=Math.min(o.length,a.length);return u!==fd&&(u=function(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}(o[0],o[t-1])),i=t>2?gd:md,r=s=null,h}function h(e){return null==e||isNaN(e=+e)?n:(r||(r=i(o.map(t),a,l)))(t(u(e)))}return h.invert=function(n){return u(e((s||(s=i(a,o.map(t),rd)))(n)))},h.domain=function(t){return arguments.length?(o=Array.from(t,hd),c()):o.slice()},h.range=function(t){return arguments.length?(a=Array.from(t),c()):a.slice()},h.rangeRound=function(t){return a=Array.from(t),l=cd,c()},h.clamp=function(t){return arguments.length?(u=!!t||fd,c()):u!==fd},h.interpolate=function(t){return arguments.length?(l=t,c()):l},h.unknown=function(t){return arguments.length?(n=t,h):n},function(n,i){return t=n,e=i,c()}}function _d(){return vd()(fd,fd)}function bd(t){var e=t.domain;return t.ticks=function(t){var n=e();return Je(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var i=e();return uh(i[0],i[i.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var i,r,s=e(),o=0,a=s.length-1,l=s[o],u=s[a],c=10;for(u<l&&(r=l,l=u,u=r,r=o,o=a,a=r);c-- >0;){if((r=tn(l,u,n))===i)return s[o]=l,s[a]=u,e(s);if(r>0)l=Math.floor(l/r)*r,u=Math.ceil(u/r)*r;else{if(!(r<0))break;l=Math.ceil(l*r)/r,u=Math.floor(u*r)/r}i=r}return t},t}function xd(t,e){var n,i=0,r=(t=t.slice()).length-1,s=t[i],o=t[r];return o<s&&(n=i,i=r,r=n,n=s,s=o,o=n),t[i]=e.floor(s),t[r]=e.ceil(o),t}function wd(t){return Math.log(t)}function Cd(t){return Math.exp(t)}function Ad(t){return-Math.log(-t)}function Ed(t){return-Math.exp(-t)}function kd(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Dd(t){return function(e){return-t(-e)}}function Sd(t){var e,n,i=t(wd,Cd),r=i.domain,s=10;function o(){return e=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}(s),n=function(t){return 10===t?kd:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}(s),r()[0]<0?(e=Dd(e),n=Dd(n),t(Ad,Ed)):t(wd,Cd),i}return i.base=function(t){return arguments.length?(s=+t,o()):s},i.domain=function(t){return arguments.length?(r(t),o()):r()},i.ticks=function(t){var i,o=r(),a=o[0],l=o[o.length-1];(i=l<a)&&(d=a,a=l,l=d);var u,c,h,d=e(a),f=e(l),p=null==t?10:+t,m=[];if(!(s%1)&&f-d<p){if(d=Math.floor(d),f=Math.ceil(f),a>0){for(;d<=f;++d)for(c=1,u=n(d);c<s;++c)if(!((h=u*c)<a)){if(h>l)break;m.push(h)}}else for(;d<=f;++d)for(c=s-1,u=n(d);c>=1;--c)if(!((h=u*c)<a)){if(h>l)break;m.push(h)}2*m.length<p&&(m=Je(a,l,p))}else m=Je(d,f,Math.min(f-d,p)).map(n);return i?m.reverse():m},i.tickFormat=function(t,r){if(null==r&&(r=10===s?".0e":","),"function"!=typeof r&&(r=gn(r)),t===1/0)return r;null==t&&(t=10);var o=Math.max(1,s*t/i.ticks().length);return function(t){var i=t/n(Math.round(e(t)));return i*s<s-.5&&(i*=s),i<=o?r(t):""}},i.nice=function(){return r(xd(r(),{floor:function(t){return n(Math.floor(e(t)))},ceil:function(t){return n(Math.ceil(e(t)))}}))},i}function Fd(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Od(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Md(t){return t<0?-t*t:t*t}function Td(t){var e=t(fd,fd),n=1;function i(){return 1===n?t(fd,fd):.5===n?t(Od,Md):t(Fd(n),Fd(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,i()):n},bd(e)}function Pd(){var t=Td(vd());return t.copy=function(){return yd(t,Pd()).exponent(t.exponent())},sh.apply(t,arguments),t}function Rd(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function Bd(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function Id(t){var e=1,n=t(Rd(e),Bd(e));return n.constant=function(n){return arguments.length?t(Rd(e=+n),Bd(e)):e},bd(n)}function Nd(t,e,n,i,r,s){const o=[[Hn,1,An],[Hn,5,5e3],[Hn,15,15e3],[Hn,30,3e4],[s,1,En],[s,5,3e5],[s,15,9e5],[s,30,18e5],[r,1,kn],[r,3,108e5],[r,6,216e5],[r,12,432e5],[i,1,Dn],[i,2,1728e5],[n,1,Sn],[e,1,2592e6],[e,3,7776e6],[t,1,Fn]];function a(e,n,i){const r=Math.abs(n-e)/i,s=ti(([,,t])=>t).right(o,r);if(s===o.length)return t.every(en(e/Fn,n/Fn,i));if(0===s)return Gn.every(Math.max(en(e,n,i),1));const[a,l]=o[r/o[s-1][2]<o[s][2]/r?s-1:s];return a.every(l)}return[function(t,e,n){const i=e<t;i&&([t,e]=[e,t]);const r=n&&"function"==typeof n.range?n:a(t,e,n),s=r?r.range(t,+e+1):[];return i?s.reverse():s},a]}const[Ld,$d]=Nd(Yn,Kn,Nn,Bn,Zn,Qn),[zd,jd]=Nd(jn,Un,Tn,On,Vn,qn);function Ud(t){return new Date(t)}function Vd(t){return t instanceof Date?+t:+new Date(+t)}function qd(t,e,n,i,r,s,o,a,l,u){var c=_d(),h=c.invert,d=c.domain,f=u(".%L"),p=u(":%S"),m=u("%I:%M"),g=u("%I %p"),y=u("%a %d"),v=u("%b %d"),_=u("%B"),b=u("%Y");function x(t){return(l(t)<t?f:a(t)<t?p:o(t)<t?m:s(t)<t?g:i(t)<t?r(t)<t?y:v:n(t)<t?_:b)(t)}return c.invert=function(t){return new Date(h(t))},c.domain=function(t){return arguments.length?d(Array.from(t,Vd)):d().map(Ud)},c.ticks=function(e){var n=d();return t(n[0],n[n.length-1],null==e?10:e)},c.tickFormat=function(t,e){return null==e?x:u(e)},c.nice=function(t){var n=d();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?d(xd(n,t)):c},c.copy=function(){return yd(c,qd(t,e,n,i,r,s,o,a,l,u))},c}function Hd(){var t,e,n,i,r,s=0,o=1,a=fd,l=!1;function u(e){return null==e||isNaN(e=+e)?r:a(0===n?.5:(e=(i(e)-t)*n,l?Math.max(0,Math.min(1,e)):e))}function c(t){return function(e){var n,i;return arguments.length?([n,i]=e,a=t(n,i),u):[a(0),a(1)]}}return u.domain=function(r){return arguments.length?([s,o]=r,t=i(s=+s),e=i(o=+o),n=t===e?0:1/(e-t),u):[s,o]},u.clamp=function(t){return arguments.length?(l=!!t,u):l},u.interpolator=function(t){return arguments.length?(a=t,u):a},u.range=c(ud),u.rangeRound=c(cd),u.unknown=function(t){return arguments.length?(r=t,u):r},function(r){return i=r,t=r(s),e=r(o),n=t===e?0:1/(e-t),u}}function Wd(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Gd(){var t=bd(Hd()(fd));return t.copy=function(){return Wd(t,Gd())},oh.apply(t,arguments)}function Xd(){var t=Td(Hd());return t.copy=function(){return Wd(t,Xd()).exponent(t.exponent())},oh.apply(t,arguments)}function Yd(t,e){void 0===e&&(e=t,t=ud);for(var n=0,i=e.length-1,r=e[0],s=new Array(i<0?0:i);n<i;)s[n]=t(r,r=e[++n]);return function(t){var e=Math.max(0,Math.min(i-1,Math.floor(t*=i)));return s[e](t-e)}}function Kd(){var t,e,n,i,r,s,o,a=0,l=.5,u=1,c=1,h=fd,d=!1;function f(t){return isNaN(t=+t)?o:(t=.5+((t=+s(t))-e)*(c*t<c*e?i:r),h(d?Math.max(0,Math.min(1,t)):t))}function p(t){return function(e){var n,i,r;return arguments.length?([n,i,r]=e,h=Yd(t,[n,i,r]),f):[h(0),h(.5),h(1)]}}return f.domain=function(o){return arguments.length?([a,l,u]=o,t=s(a=+a),e=s(l=+l),n=s(u=+u),i=t===e?0:.5/(e-t),r=e===n?0:.5/(n-e),c=e<t?-1:1,f):[a,l,u]},f.clamp=function(t){return arguments.length?(d=!!t,f):d},f.interpolator=function(t){return arguments.length?(h=t,f):h},f.range=p(ud),f.rangeRound=p(cd),f.unknown=function(t){return arguments.length?(o=t,f):o},function(o){return s=o,t=o(a),e=o(l),n=o(u),i=t===e?0:.5/(e-t),r=e===n?0:.5/(n-e),c=e<t?-1:1,f}}function Zd(){var t=Td(Kd());return t.copy=function(){return Wd(t,Zd()).exponent(t.exponent())},oh.apply(t,arguments)}function Qd(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function Jd(t,e){var n=Gh(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}}var tf,ef=180/Math.PI,nf={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function rf(t,e,n,i,r,s){var o,a,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*i)&&(n-=t*l,i-=e*l),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,l/=a),t*i<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:r,translateY:s,rotate:Math.atan2(e,t)*ef,skewX:Math.atan(l)*ef,scaleX:o,scaleY:a}}function sf(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(s,o){var a=[],l=[];return s=t(s),o=t(o),function(t,i,r,s,o,a){if(t!==r||i!==s){var l=o.push("translate(",null,e,null,n);a.push({i:l-4,x:rd(t,r)},{i:l-2,x:rd(i,s)})}else(r||s)&&o.push("translate("+r+e+s+n)}(s.translateX,s.translateY,o.translateX,o.translateY,a,l),function(t,e,n,s){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),s.push({i:n.push(r(n)+"rotate(",null,i)-2,x:rd(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}(s.rotate,o.rotate,a,l),function(t,e,n,s){t!==e?s.push({i:n.push(r(n)+"skewX(",null,i)-2,x:rd(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}(s.skewX,o.skewX,a,l),function(t,e,n,i,s,o){if(t!==n||e!==i){var a=s.push(r(s)+"scale(",null,",",null,")");o.push({i:a-4,x:rd(t,n)},{i:a-2,x:rd(e,i)})}else 1===n&&1===i||s.push(r(s)+"scale("+n+","+i+")")}(s.scaleX,s.scaleY,o.scaleX,o.scaleY,a,l),s=o=null,function(t){for(var e,n=-1,i=l.length;++n<i;)a[(e=l[n]).i]=e.x(t);return a.join("")}}}var of=sf(function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?nf:rf(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),af=sf(function(t){return null==t?nf:(tf||(tf=document.createElementNS("http://www.w3.org/2000/svg","g")),tf.setAttribute("transform",t),(t=tf.transform.baseVal.consolidate())?rf((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):nf)},", ",")",")");function lf(t){return((t=Math.exp(t))+1/t)/2}const uf=function t(e,n,i){function r(t,r){var s,o,a=t[0],l=t[1],u=t[2],c=r[2],h=r[0]-a,d=r[1]-l,f=h*h+d*d;if(f<1e-12)o=Math.log(c/u)/e,s=function(t){return[a+t*h,l+t*d,u*Math.exp(e*t*o)]};else{var p=Math.sqrt(f),m=(c*c-u*u+i*f)/(2*u*n*p),g=(c*c-u*u-i*f)/(2*c*n*p),y=Math.log(Math.sqrt(m*m+1)-m),v=Math.log(Math.sqrt(g*g+1)-g);o=(v-y)/e,s=function(t){var i=t*o,r=lf(y),s=u/(n*p)*(r*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(e*i+y)-function(t){return((t=Math.exp(t))-1/t)/2}(y));return[a+s*h,l+s*d,u*r/lf(e*i+y)]}}return s.duration=1e3*o*e/Math.SQRT2,s}return r.rho=function(e){var n=Math.max(.001,+e),i=n*n;return t(n,i,i*i)},r}(Math.SQRT2,2,4);function cf(t){return function(e,n){var i=t((e=$h(e)).h,(n=$h(n)).h),r=Xh(e.s,n.s),s=Xh(e.l,n.l),o=Xh(e.opacity,n.opacity);return function(t){return e.h=i(t),e.s=r(t),e.l=s(t),e.opacity=o(t),e+""}}}const hf=cf(Gh);var df=cf(Xh);const ff=Math.PI/180,pf=180/Math.PI,mf=.96422,gf=.82521,yf=4/29,vf=6/29,_f=3*vf*vf;function bf(t){if(t instanceof wf)return new wf(t.l,t.a,t.b,t.opacity);if(t instanceof Ff)return Of(t);t instanceof Ph||(t=Mh(t));var e,n,i=kf(t.r),r=kf(t.g),s=kf(t.b),o=Cf((.2225045*i+.7168786*r+.0606169*s)/1);return i===r&&r===s?e=n=o:(e=Cf((.4360747*i+.3850649*r+.1430804*s)/mf),n=Cf((.0139322*i+.0971045*r+.7141733*s)/gf)),new wf(116*o-16,500*(e-o),200*(o-n),t.opacity)}function xf(t,e,n,i){return 1===arguments.length?bf(t):new wf(t,e,n,null==i?1:i)}function wf(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}function Cf(t){return t>.008856451679035631?Math.pow(t,1/3):t/_f+yf}function Af(t){return t>vf?t*t*t:_f*(t-yf)}function Ef(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function kf(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Df(t){if(t instanceof Ff)return new Ff(t.h,t.c,t.l,t.opacity);if(t instanceof wf||(t=bf(t)),0===t.a&&0===t.b)return new Ff(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*pf;return new Ff(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Sf(t,e,n,i){return 1===arguments.length?Df(t):new Ff(t,e,n,null==i?1:i)}function Ff(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function Of(t){if(isNaN(t.h))return new wf(t.l,0,0,t.opacity);var e=t.h*ff;return new wf(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}function Mf(t,e){var n=Xh((t=xf(t)).l,(e=xf(e)).l),i=Xh(t.a,e.a),r=Xh(t.b,e.b),s=Xh(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=i(e),t.b=r(e),t.opacity=s(e),t+""}}function Tf(t){return function(e,n){var i=t((e=Sf(e)).h,(n=Sf(n)).h),r=Xh(e.c,n.c),s=Xh(e.l,n.l),o=Xh(e.opacity,n.opacity);return function(t){return e.h=i(t),e.c=r(t),e.l=s(t),e.opacity=o(t),e+""}}}ch(wf,xf,hh(dh,{brighter:function(t){return new wf(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new wf(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new Ph(Ef(3.1338561*(e=mf*Af(e))-1.6168667*(t=1*Af(t))-.4906146*(n=gf*Af(n))),Ef(-.9787684*e+1.9161415*t+.033454*n),Ef(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),ch(Ff,Sf,hh(dh,{brighter:function(t){return new Ff(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Ff(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return Of(this).rgb()}}));const Pf=Tf(Gh);var Rf=Tf(Xh),Bf=-.14861,If=1.78277,Nf=-.29227,Lf=-.90649,$f=1.97294,zf=$f*Lf,jf=$f*If,Uf=If*Nf-Lf*Bf;function Vf(t){if(t instanceof Hf)return new Hf(t.h,t.s,t.l,t.opacity);t instanceof Ph||(t=Mh(t));var e=t.g/255,n=t.b/255,i=(Uf*n+zf*(t.r/255)-jf*e)/(Uf+zf-jf),r=n-i,s=($f*(e-i)-Nf*r)/Lf,o=Math.sqrt(s*s+r*r)/($f*i*(1-i)),a=o?Math.atan2(s,r)*pf-120:NaN;return new Hf(a<0?a+360:a,o,i,t.opacity)}function qf(t,e,n,i){return 1===arguments.length?Vf(t):new Hf(t,e,n,null==i?1:i)}function Hf(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}function Wf(t){return function e(n){function i(e,i){var r=t((e=qf(e)).h,(i=qf(i)).h),s=Xh(e.s,i.s),o=Xh(e.l,i.l),a=Xh(e.opacity,i.opacity);return function(t){return e.h=r(t),e.s=s(t),e.l=o(Math.pow(t,n)),e.opacity=a(t),e+""}}return n=+n,i.gamma=e,i}(1)}ch(Hf,qf,hh(dh,{brighter:function(t){return t=null==t?ph:Math.pow(ph,t),new Hf(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?fh:Math.pow(fh,t),new Hf(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*ff,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),r=Math.sin(t);return new Ph(255*(e+n*(Bf*i+If*r)),255*(e+n*(Nf*i+Lf*r)),255*(e+n*($f*i)),this.opacity)}}));const Gf=Wf(Gh);var Xf=Wf(Xh);function Yf(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}function Kf(t,e,n){const i=t-e+2*n;return t?i>0?i:1:0}const Zf="linear",Qf="log",Jf="pow",tp="sqrt",ep="symlog",np="time",ip="utc",rp="sequential",sp="diverging",op="quantile",ap="quantize",lp="threshold",up="ordinal",cp="point",hp="band",dp="bin-ordinal",fp="continuous",pp="discrete",mp="discretizing",gp="interpolating",yp="temporal";function vp(){const t=lh().unknown(void 0),e=t.domain,n=t.range;let i,r,s=[0,1],o=!1,a=0,l=0,u=.5;function c(){const t=e().length,c=s[1]<s[0],h=s[1-c],d=Kf(t,a,l);let f=s[c-0];i=(h-f)/(d||1),o&&(i=Math.floor(i)),f+=(h-f-i*(t-a))*u,r=i*(1-a),o&&(f=Math.round(f),r=Math.round(r));const p=pl(t).map(t=>f+i*t);return n(c?p.reverse():p)}return delete t.unknown,t.domain=function(t){return arguments.length?(e(t),c()):e()},t.range=function(t){return arguments.length?(s=[+t[0],+t[1]],c()):s.slice()},t.rangeRound=function(t){return s=[+t[0],+t[1]],o=!0,c()},t.bandwidth=function(){return r},t.step=function(){return i},t.round=function(t){return arguments.length?(o=!!t,c()):o},t.padding=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),a=l,c()):a},t.paddingInner=function(t){return arguments.length?(a=Math.max(0,Math.min(1,t)),c()):a},t.paddingOuter=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),c()):l},t.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),c()):u},t.invertRange=function(t){if(null==t[0]||null==t[1])return;const i=s[1]<s[0],o=i?n().reverse():n(),a=o.length-1;let l,u,c,h=+t[0],d=+t[1];return h!=h||d!=d||(d<h&&(c=h,h=d,d=c),d<o[0]||h>s[1-i])?void 0:(l=Math.max(0,nh(o,h)-1),u=h===d?l:nh(o,d)-1,h-o[l]>r+1e-10&&++l,i&&(c=l,l=a-u,u=a-c),l>u?void 0:e().slice(l,u+1))},t.invert=function(e){const n=t.invertRange([e,e]);return n?n[0]:n},t.copy=function(){return vp().domain(e()).range(s).round(o).paddingInner(a).paddingOuter(l).align(u)},c()}function _p(t){const e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return _p(e())},t}var bp=Array.prototype.map;function xp(t){return bp.call(t,de.He)}const wp=Array.prototype.slice,Cp={};function Ap(t,e,n){const i=function(){const n=e();return n.invertRange||(n.invertRange=n.invert?(i=n,function(t){let e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),[i.invert(n),i.invert(r)]}):n.invertExtent?function(t){return function(e){const n=t.range();let i,r,s,o,a=e[0],l=e[1],u=-1;for(l<a&&(r=a,a=l,l=r),s=0,o=n.length;s<o;++s)n[s]>=a&&n[s]<=l&&(u<0&&(u=s),i=s);if(!(u<0))return a=t.invertExtent(n[u]),l=t.invertExtent(n[i]),[void 0===a[0]?a[1]:a[0],void 0===l[1]?l[0]:l[1]]}}(n):void 0),n.type=t,n;var i};return i.metadata=(0,de.Rg)((0,de.IX)(n)),i}function Ep(t,e,n){return arguments.length>1?(Cp[t]=Ap(t,e,n),this):kp(t)?Cp[t]:void 0}function kp(t){return(0,de.nr)(Cp,t)}function Dp(t,e){const n=Cp[t];return n&&n.metadata[e]}function Sp(t){return Dp(t,fp)}function Fp(t){return Dp(t,pp)}function Op(t){return Dp(t,mp)}function Mp(t){return Dp(t,Qf)}function Tp(t){return Dp(t,gp)}function Pp(t){return Dp(t,op)}Ep("identity",function t(e){var n;function i(t){return null==t||isNaN(t=+t)?n:t}return i.invert=i,i.domain=i.range=function(t){return arguments.length?(e=Array.from(t,hd),i):e.slice()},i.unknown=function(t){return arguments.length?(n=t,i):n},i.copy=function(){return t(e).unknown(n)},e=arguments.length?Array.from(e,hd):[0,1],bd(i)}),Ep(Zf,function t(){var e=_d();return e.copy=function(){return yd(e,t())},sh.apply(e,arguments),bd(e)},fp),Ep(Qf,function t(){var e=Sd(vd()).domain([1,10]);return e.copy=function(){return yd(e,t()).base(e.base())},sh.apply(e,arguments),e},[fp,Qf]),Ep(Jf,Pd,fp),Ep(tp,function(){return Pd.apply(null,arguments).exponent(.5)},fp),Ep(ep,function t(){var e=Id(vd());return e.copy=function(){return yd(e,t()).constant(e.constant())},sh.apply(e,arguments)},fp),Ep(np,function(){return sh.apply(qd(zd,jd,jn,Un,Tn,On,Vn,qn,Hn,cr).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},[fp,yp]),Ep(ip,function(){return sh.apply(qd(Ld,$d,Yn,Kn,Nn,Bn,Zn,Qn,Hn,dr).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},[fp,yp]),Ep(rp,Gd,[fp,gp]),Ep("".concat(rp,"-").concat(Zf),Gd,[fp,gp]),Ep("".concat(rp,"-").concat(Qf),function t(){var e=Sd(Hd()).domain([1,10]);return e.copy=function(){return Wd(e,t()).base(e.base())},oh.apply(e,arguments)},[fp,gp,Qf]),Ep("".concat(rp,"-").concat(Jf),Xd,[fp,gp]),Ep("".concat(rp,"-").concat(tp),function(){return Xd.apply(null,arguments).exponent(.5)},[fp,gp]),Ep("".concat(rp,"-").concat(ep),function t(){var e=Id(Hd());return e.copy=function(){return Wd(e,t()).constant(e.constant())},oh.apply(e,arguments)},[fp,gp]),Ep("".concat(sp,"-").concat(Zf),function t(){var e=bd(Kd()(fd));return e.copy=function(){return Wd(e,t())},oh.apply(e,arguments)},[fp,gp]),Ep("".concat(sp,"-").concat(Qf),function t(){var e=Sd(Kd()).domain([.1,1,10]);return e.copy=function(){return Wd(e,t()).base(e.base())},oh.apply(e,arguments)},[fp,gp,Qf]),Ep("".concat(sp,"-").concat(Jf),Zd,[fp,gp]),Ep("".concat(sp,"-").concat(tp),function(){return Zd.apply(null,arguments).exponent(.5)},[fp,gp]),Ep("".concat(sp,"-").concat(ep),function t(){var e=Id(Kd());return e.copy=function(){return Wd(e,t()).constant(e.constant())},oh.apply(e,arguments)},[fp,gp]),Ep(op,function t(){var e,n=[],i=[],r=[];function s(){var t=0,e=Math.max(1,i.length);for(r=new Array(e-1);++t<e;)r[t-1]=va(n,t/e);return o}function o(t){return null==t||isNaN(t=+t)?e:i[rh(r,t)]}return o.invertExtent=function(t){var e=i.indexOf(t);return e<0?[NaN,NaN]:[e>0?r[e-1]:n[0],e<r.length?r[e]:n[n.length-1]]},o.domain=function(t){if(!arguments.length)return n.slice();n=[];for(let e of t)null==e||isNaN(e=+e)||n.push(e);return n.sort(Jn),s()},o.range=function(t){return arguments.length?(i=Array.from(t),s()):i.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return r.slice()},o.copy=function(){return t().domain(n).range(i).unknown(e)},sh.apply(o,arguments)},[mp,op]),Ep(ap,function t(){var e,n=0,i=1,r=1,s=[.5],o=[0,1];function a(t){return null!=t&&t<=t?o[rh(s,t,0,r)]:e}function l(){var t=-1;for(s=new Array(r);++t<r;)s[t]=((t+1)*i-(t-r)*n)/(r+1);return a}return a.domain=function(t){return arguments.length?([n,i]=t,n=+n,i=+i,l()):[n,i]},a.range=function(t){return arguments.length?(r=(o=Array.from(t)).length-1,l()):o.slice()},a.invertExtent=function(t){var e=o.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,s[0]]:e>=r?[s[r-1],i]:[s[e-1],s[e]]},a.unknown=function(t){return arguments.length?(e=t,a):a},a.thresholds=function(){return s.slice()},a.copy=function(){return t().domain([n,i]).range(o).unknown(e)},sh.apply(bd(a),arguments)},mp),Ep(lp,function t(){var e,n=[.5],i=[0,1],r=1;function s(t){return null!=t&&t<=t?i[rh(n,t,0,r)]:e}return s.domain=function(t){return arguments.length?(n=Array.from(t),r=Math.min(n.length,i.length-1),s):n.slice()},s.range=function(t){return arguments.length?(i=Array.from(t),r=Math.min(n.length,i.length-1),s):i.slice()},s.invertExtent=function(t){var e=i.indexOf(t);return[n[e-1],n[e]]},s.unknown=function(t){return arguments.length?(e=t,s):e},s.copy=function(){return t().domain(n).range(i).unknown(e)},sh.apply(s,arguments)},mp),Ep(dp,function t(){let e=[],n=[];function i(t){return null==t||t!=t?void 0:n[(rh(e,t)-1)%n.length]}return i.domain=function(t){return arguments.length?(e=xp(t),i):e.slice()},i.range=function(t){return arguments.length?(n=wp.call(t),i):n.slice()},i.tickFormat=function(t,n){return uh(e[0],(0,de.fj)(e),null==t?10:t,n)},i.copy=function(){return t().domain(i.domain()).range(i.range())},i},[pp,mp]),Ep(up,lh,pp),Ep(hp,vp,pp),Ep(cp,function(){return _p(vp().paddingInner(1))},pp);const Rp=["clamp","base","constant","exponent"];function Bp(t,e){const n=e[0],i=(0,de.fj)(e)-n;return function(e){return t(n+e*i)}}function Ip(t,e,n){return Yd($p(e||"rgb",n),t)}function Np(t,e){const n=new Array(e),i=e+1;for(let r=0;r<e;)n[r]=t(++r/i);return n}function Lp(t,e,n){const i=n-e;let r,s,o;return i&&Number.isFinite(i)?(r=(s=t.type).indexOf("-"),s=r<0?s:s.slice(r+1),o=Ep(s)().domain([e,n]).range([0,1]),Rp.forEach(e=>t[e]?o[e](t[e]()):0),o):(0,de.a9)(.5)}function $p(t,e){const n=r[function(t){return"interpolate"+t.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}(t)];return null!=e&&n&&n.gamma?n.gamma(e):n}function zp(t){const e=t.length/6|0,n=new Array(e);for(let i=0;i<e;)n[i]="#"+t.slice(6*i,6*++i);return n}function jp(t,e){for(const n in t)Vp(n,e(t[n]))}const Up={};function Vp(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(Up[t]=e,this):Up[t]}jp({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},zp),jp({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},t=>Ip(zp(t)));const qp="symbol",Hp=t=>(0,de.kJ)(t)?t.map(t=>String(t)):String(t),Wp=(t,e)=>t[1]-e[1],Gp=(t,e)=>e[1]-t[1];function Xp(t,e,n){let i;return(0,de.hj)(e)&&(t.bins&&(e=Math.max(e,t.bins.length)),null!=n&&(e=Math.min(e,Math.floor((0,de.yP)(t.domain())/n||1)))),(0,de.Kn)(e)&&(i=e.step,e=e.interval),(0,de.HD)(e)&&(e=t.type===np?ji(e):t.type==ip?Ui(e):(0,de.vU)("Only time and utc scales accept interval strings."),i&&(e=e.every(i))),e}function Yp(t,e,n){let i=t.range(),r=i[0],s=(0,de.fj)(i),o=Wp;if(r>s&&(i=s,s=r,r=i,o=Gp),r=Math.floor(r),s=Math.ceil(s),e=e.map(e=>[e,t(e)]).filter(t=>r<=t[1]&&t[1]<=s).sort(o).map(t=>t[0]),n>0&&e.length>1){const t=[e[0],(0,de.fj)(e)];for(;e.length>n&&e.length>=3;)e=e.filter((t,e)=>!(e%2));e.length<3&&(e=t)}return e}function Kp(t,e){return t.bins?Yp(t,t.bins):t.ticks?t.ticks(e):t.domain()}function Zp(t,e,n,i,r,s){const o=e.type;let a=Hp;if(o===np||r===np)a=t.timeFormat(i);else if(o===ip||r===ip)a=t.utcFormat(i);else if(Mp(o)){const r=t.formatFloat(i);if(s||e.bins)a=r;else{const t=Qp(e,n,!1);a=e=>t(e)?r(e):""}}else if(e.tickFormat){const r=e.domain();a=t.formatSpan(r[0],r[r.length-1],n,i)}else i&&(a=t.format(i));return a}function Qp(t,e,n){const i=Kp(t,e),r=t.base(),s=Math.log(r),o=Math.max(1,r*e/i.length),a=t=>{let e=t/Math.pow(r,Math.round(Math.log(t)/s));return e*r<r-.5&&(e*=r),e<=o};return n?i.filter(a):a}const Jp={[op]:"quantiles",[ap]:"thresholds",[lp]:"domain"},tm={[op]:"quantiles",[ap]:"domain"};function em(t,e){return t.bins?function(t){const e=t.slice(0,-1);return e.max=(0,de.fj)(t),e}(t.bins):t.type===Qf?Qp(t,e,!0):Jp[t.type]?function(t){const e=[-1/0].concat(t);return e.max=1/0,e}(t[Jp[t.type]]()):Kp(t,e)}function nm(t,e,n,i,r,s,o){const a=tm[e.type]&&s!==np&&s!==ip?function(t,e,n){const i=e[tm[e.type]](),r=i.length;let s,o=r>1?i[1]-i[0]:i[0];for(s=1;s<r;++s)o=Math.min(o,i[s]-i[s-1]);return t.formatSpan(0,o,30,n)}(t,e,r):Zp(t,e,n,r,s,o);return i===qp&&(t=>Jp[t.type]||t.bins)(e)?im(a):"discrete"===i?sm(a):om(a)}const im=t=>(e,n,i)=>{const r=rm(i[n+1],rm(i.max,1/0)),s=am(e,t),o=am(r,t);return s&&o?s+" \u2013 "+o:o?"< "+o:"\u2265 "+s},rm=(t,e)=>null!=t?t:e,sm=t=>(e,n)=>n?t(e):null,om=t=>e=>t(e),am=(t,e)=>Number.isFinite(t)?e(t):null;function lm(t,e,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=function(t,e,n,i){const r=i||e.type;return(0,de.HD)(n)&&function(t){return Dp(t,yp)}(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||r!==np?n||r!==ip?nm(t,e,5,null,n,i,!0):t.utcFormat("%A, %d %B %Y, %X UTC"):t.timeFormat("%A, %d %B %Y, %X")}(t,e,n.format,n.formatType);if(Op(e.type)){const t=em(e).slice(1).map(r),n=t.length;return"".concat(n," boundar").concat(1===n?"y":"ies",": ").concat(t.join(", "))}if(Fp(e.type)){const t=e.domain(),n=t.length,s=n>i?t.slice(0,i-2).map(r).join(", ")+", ending with "+t.slice(-1).map(r):t.map(r).join(", ");return"".concat(n," value").concat(1===n?"":"s",": ").concat(s)}{const t=e.domain();return"values from ".concat(r(t[0])," to ").concat(r((0,de.fj)(t)))}}let um=0;const cm="p_";function hm(t){return t&&t.gradient}function dm(t,e,n){const i=t.gradient;let r=t.id,s="radial"===i?cm:"";return r||(r=t.id="gradient_"+um++,"radial"===i?(t.x1=fm(t.x1,.5),t.y1=fm(t.y1,.5),t.r1=fm(t.r1,0),t.x2=fm(t.x2,.5),t.y2=fm(t.y2,.5),t.r2=fm(t.r2,.5),s=cm):(t.x1=fm(t.x1,0),t.y1=fm(t.y1,0),t.x2=fm(t.x2,1),t.y2=fm(t.y2,0))),e[r]=t,"url("+(n||"")+"#"+s+r+")"}function fm(t,e){return null!=t?t:e}function pm(t,e){var n,i=[];return n={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:i,stop:function(t,e){return i.push({offset:t,color:e}),n}}}const mm={basis:{curve:function(t){return new zu(t)}},"basis-closed":{curve:function(t){return new Uu(t)}},"basis-open":{curve:function(t){return new Vu(t)}},bundle:{curve:Hu,tension:"beta",value:.85},cardinal:{curve:Xu,tension:"tension",value:0},"cardinal-open":{curve:Ku,tension:"tension",value:0},"cardinal-closed":{curve:Qu,tension:"tension",value:0},"catmull-rom":{curve:pc,tension:"alpha",value:.5},"catmull-rom-closed":{curve:gc,tension:"alpha",value:.5},"catmull-rom-open":{curve:vc,tension:"alpha",value:.5},linear:{curve:bc},"linear-closed":{curve:function(t){return new xc(t)}},monotone:{horizontal:function(t){return new Dc(t)},vertical:function(t){return new kc(t)}},natural:{curve:function(t){return new Fc(t)}},step:{curve:function(t){return new Mc(t,.5)}},"step-after":{curve:function(t){return new Mc(t,1)}},"step-before":{curve:function(t){return new Mc(t,0)}}};function gm(t,e,n){var i=(0,de.nr)(mm,t)&&mm[t],r=null;return i&&(r=i.curve||i[e||"vertical"],i.tension&&null!=n&&(r=r[i.tension](n))),r}const ym={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},vm=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];function _m(t){const e=[];let n,i,r,s,o,a,l,u,c,h;const d=t.slice().replace(vm[0],"###$1").split(vm[1]).slice(1);for(l=0,c=d.length;l<c;++l){for(n=d[l],i=n.slice(1).trim().replace(vm[2],"$1###$2").replace(vm[3],"$1###$2").split(vm[4]),o=n.charAt(0),r=[o],u=0,h=i.length;u<h;++u)(s=+i[u])===s&&r.push(s);if(a=ym[o.toLowerCase()],r.length-1>a){const t=r.length;for(u=1,e.push([o].concat(r.slice(u,u+=a))),o="M"===o?"L":"m"===o?"l":o;u<t;u+=a)e.push([o].concat(r.slice(u,u+a)))}else e.push(r)}return e}const bm=Math.PI/180,xm=Math.PI/2,wm=2*Math.PI,Cm=Math.sqrt(3)/2;var Am={},Em={},km=[].join;function Dm(t){const e=km.call(t);if(Em[e])return Em[e];var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7];const c=u*o,h=-l*a,d=l*o,f=u*a,p=Math.cos(r),m=Math.sin(r),g=Math.cos(s),y=Math.sin(s),v=.5*(s-r),_=Math.sin(.5*v),b=8/3*_*_/Math.sin(v),x=n+p-b*m,w=i+m+b*p,C=n+g,A=i+y,E=C+b*y,k=A-b*g;return Em[e]=[c*x+h*w,d*x+f*w,c*E+h*k,d*E+f*k,c*C+h*A,d*C+f*A]}const Sm=["l",0,0,0,0,0,0,0];function Fm(t,e,n){const i=Sm[0]=t[0];if("a"===i||"A"===i)Sm[1]=e*t[1],Sm[2]=n*t[2],Sm[3]=t[3],Sm[4]=t[4],Sm[5]=t[5],Sm[6]=e*t[6],Sm[7]=n*t[7];else if("h"===i||"H"===i)Sm[1]=e*t[1];else if("v"===i||"V"===i)Sm[1]=n*t[1];else for(var r=1,s=t.length;r<s;++r)Sm[r]=(r%2==1?e:n)*t[r];return Sm}function Om(t,e,n,i,r,s){var o,a,l,u,c,h=null,d=0,f=0,p=0,m=0;null==n&&(n=0),null==i&&(i=0),null==r&&(r=1),null==s&&(s=r),t.beginPath&&t.beginPath();for(var g=0,y=e.length;g<y;++g){switch(o=e[g],1===r&&1===s||(o=Fm(o,r,s)),o[0]){case"l":t.lineTo((d+=o[1])+n,(f+=o[2])+i);break;case"L":t.lineTo((d=o[1])+n,(f=o[2])+i);break;case"h":t.lineTo((d+=o[1])+n,f+i);break;case"H":t.lineTo((d=o[1])+n,f+i);break;case"v":t.lineTo(d+n,(f+=o[1])+i);break;case"V":t.lineTo(d+n,(f=o[1])+i);break;case"m":t.moveTo((d+=o[1])+n,(f+=o[2])+i);break;case"M":t.moveTo((d=o[1])+n,(f=o[2])+i);break;case"c":t.bezierCurveTo(d+o[1]+n,f+o[2]+i,(p=d+o[3])+n,(m=f+o[4])+i,(a=d+o[5])+n,(l=f+o[6])+i),d=a,f=l;break;case"C":t.bezierCurveTo(o[1]+n,o[2]+i,(p=o[3])+n,(m=o[4])+i,(d=o[5])+n,(f=o[6])+i);break;case"s":t.bezierCurveTo((p=2*d-p)+n,(m=2*f-m)+i,d+o[1]+n,f+o[2]+i,(a=d+o[3])+n,(l=f+o[4])+i),p=d+o[1],m=f+o[2],d=a,f=l;break;case"S":t.bezierCurveTo((p=2*d-p)+n,(m=2*f-m)+i,o[1]+n,o[2]+i,(a=o[3])+n,(l=o[4])+i),d=a,f=l,p=o[1],m=o[2];break;case"q":t.quadraticCurveTo((p=d+o[1])+n,(m=f+o[2])+i,(a=d+o[3])+n,(l=f+o[4])+i),d=a,f=l;break;case"Q":t.quadraticCurveTo(o[1]+n,o[2]+i,(a=o[3])+n,(l=o[4])+i),d=a,f=l,p=o[1],m=o[2];break;case"t":a=d+o[1],l=f+o[2],null===h[0].match(/[QqTt]/)?(p=d,m=f):"t"===h[0]?(p=2*d-u,m=2*f-c):"q"===h[0]&&(p=2*d-p,m=2*f-m),u=p,c=m,t.quadraticCurveTo(p+n,m+i,a+n,l+i),p=(d=a)+o[1],m=(f=l)+o[2];break;case"T":t.quadraticCurveTo((p=2*d-p)+n,(m=2*f-m)+i,(a=o[1])+n,(l=o[2])+i),d=a,f=l;break;case"a":Mm(t,d+n,f+i,[o[1],o[2],o[3],o[4],o[5],o[6]+d+n,o[7]+f+i]),d+=o[6],f+=o[7];break;case"A":Mm(t,d+n,f+i,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+i]),d=o[6],f=o[7];break;case"z":case"Z":t.closePath()}h=o}}function Mm(t,e,n,i){const r=function(t,e,n,i,r,s,o,a,l){const u=km.call(arguments);if(Am[u])return Am[u];const c=o*bm,h=Math.sin(c),d=Math.cos(c),f=d*(a-t)*.5+h*(l-e)*.5,p=d*(l-e)*.5-h*(a-t)*.5;let m=f*f/((n=Math.abs(n))*n)+p*p/((i=Math.abs(i))*i);m>1&&(m=Math.sqrt(m),n*=m,i*=m);const g=d/n,y=h/n,v=-h/i,_=d/i,b=g*a+y*l,x=v*a+_*l,w=g*t+y*e,C=v*t+_*e;let A=1/((w-b)*(w-b)+(C-x)*(C-x))-.25;A<0&&(A=0);let E=Math.sqrt(A);s==r&&(E=-E);const k=.5*(b+w)-E*(C-x),D=.5*(x+C)+E*(w-b),S=Math.atan2(x-D,b-k);let F=Math.atan2(C-D,w-k)-S;F<0&&1===s?F+=wm:F>0&&0===s&&(F-=wm);const O=Math.ceil(Math.abs(F/(xm+.001))),M=[];for(let T=0;T<O;++T)M[T]=[k,D,S+T*F/O,S+(T+1)*F/O,n,i,h,d];return Am[u]=M}(i[5],i[6],i[0],i[1],i[3],i[4],i[2],e,n);for(let s=0;s<r.length;++s){const e=Dm(r[s]);t.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5])}}const Tm=.5773502691896257,Pm={circle:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,wm)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,i=n/2.5;t.moveTo(-n,-i),t.lineTo(-n,i),t.lineTo(-i,i),t.lineTo(-i,n),t.lineTo(i,n),t.lineTo(i,i),t.lineTo(n,i),t.lineTo(n,-i),t.lineTo(i,-i),t.lineTo(i,-n),t.lineTo(-i,-n),t.lineTo(-i,-i),t.closePath()}},diamond:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}},arrow:{draw:function(t,e){var n=Math.sqrt(e)/2,i=n/7,r=n/2.5,s=n/8;t.moveTo(-i,n),t.lineTo(i,n),t.lineTo(i,-s),t.lineTo(r,-s),t.lineTo(0,-n),t.lineTo(-r,-s),t.lineTo(-i,-s),t.closePath()}},wedge:{draw:function(t,e){var n=Math.sqrt(e)/2,i=Cm*n,r=i-n*Tm,s=n/4;t.moveTo(0,-i-r),t.lineTo(-s,i-r),t.lineTo(s,i-r),t.closePath()}},triangle:{draw:function(t,e){var n=Math.sqrt(e)/2,i=Cm*n,r=i-n*Tm;t.moveTo(0,-i-r),t.lineTo(-n,i-r),t.lineTo(n,i-r),t.closePath()}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,i=Cm*n;t.moveTo(0,-i),t.lineTo(-n,i),t.lineTo(n,i),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,i=Cm*n;t.moveTo(0,i),t.lineTo(-n,-i),t.lineTo(n,-i),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,i=Cm*n;t.moveTo(i,0),t.lineTo(-i,-n),t.lineTo(-i,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,i=Cm*n;t.moveTo(-i,0),t.lineTo(i,-n),t.lineTo(i,n),t.closePath()}},stroke:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};function Rm(t){return(0,de.nr)(Pm,t)?Pm[t]:function(t){if(!(0,de.nr)(Bm,t)){const e=_m(t);Bm[t]={draw:function(t,n){Om(t,e,0,0,Math.sqrt(n)/2)}}}return Bm[t]}(t)}var Bm={};const Im=.448084975506;function Nm(t){return t.x}function Lm(t){return t.y}function $m(t){return t.width}function zm(t){return t.height}function jm(t){return"function"==typeof t?t:()=>+t}function Um(t,e,n){return Math.max(e,Math.min(t,n))}function Vm(){var t=Nm,e=Lm,n=$m,i=zm,r=jm(0),s=r,o=r,a=r,l=null;function u(u,c,h){var d,f=null!=c?c:+t.call(this,u),p=null!=h?h:+e.call(this,u),m=+n.call(this,u),g=+i.call(this,u),y=Math.min(m,g)/2,v=Um(+r.call(this,u),0,y),_=Um(+s.call(this,u),0,y),b=Um(+o.call(this,u),0,y),x=Um(+a.call(this,u),0,y);if(l||(l=d=Lc()),v<=0&&_<=0&&b<=0&&x<=0)l.rect(f,p,m,g);else{var w=f+m,C=p+g;l.moveTo(f+v,p),l.lineTo(w-_,p),l.bezierCurveTo(w-Im*_,p,w,p+Im*_,w,p+_),l.lineTo(w,C-x),l.bezierCurveTo(w,C-Im*x,w-Im*x,C,w-x,C),l.lineTo(f+b,C),l.bezierCurveTo(f+Im*b,C,f,C-Im*b,f,C-b),l.lineTo(f,p+v),l.bezierCurveTo(f,p+Im*v,f+Im*v,p,f+v,p),l.closePath()}if(d)return l=null,d+""||null}return u.x=function(e){return arguments.length?(t=jm(e),u):t},u.y=function(t){return arguments.length?(e=jm(t),u):e},u.width=function(t){return arguments.length?(n=jm(t),u):n},u.height=function(t){return arguments.length?(i=jm(t),u):i},u.cornerRadius=function(t,e,n,i){return arguments.length?(r=jm(t),s=null!=e?jm(e):r,a=null!=n?jm(n):r,o=null!=i?jm(i):s,u):r},u.context=function(t){return arguments.length?(l=null==t?null:t,u):l},u}function qm(){var t,e,n,i,r,s,o,a,l=null;function u(t,e,n){const i=n/2;if(r){var u=o-e,c=t-s;if(u||c){var h=Math.sqrt(u*u+c*c),d=(u/=h)*a,f=(c/=h)*a,p=Math.atan2(c,u);l.moveTo(s-d,o-f),l.lineTo(t-u*i,e-c*i),l.arc(t,e,i,p-Math.PI,p),l.lineTo(s+d,o+f),l.arc(s,o,a,p,p+Math.PI)}else l.arc(t,e,i,0,wm);l.closePath()}else r=1;s=t,o=e,a=i}function c(s){var o,a,c,h=s.length,d=!1;for(null==l&&(l=c=Lc()),o=0;o<=h;++o)!(o<h&&i(a=s[o],o,s))===d&&(d=!d)&&(r=0),d&&u(+t(a,o,s),+e(a,o,s),+n(a,o,s));if(c)return l=null,c+""||null}return c.x=function(e){return arguments.length?(t=e,c):t},c.y=function(t){return arguments.length?(e=t,c):e},c.size=function(t){return arguments.length?(n=t,c):n},c.defined=function(t){return arguments.length?(i=t,c):i},c.context=function(t){return arguments.length?(l=null==t?null:t,c):l},c}function Hm(t,e){return null!=t?t:e}const Wm=t=>t.x||0,Gm=t=>t.y||0,Xm=t=>!(!1===t.defined),Ym=function(){var t=zc,e=jc,n=$c(0),i=null,r=Uc,s=Vc,o=qc,a=null;function l(){var l,u,c=+t.apply(this,arguments),h=+e.apply(this,arguments),d=r.apply(this,arguments)-lc,f=s.apply(this,arguments)-lc,p=Ju(f-d),m=f>d;if(a||(a=l=Lc()),h<c&&(u=h,h=c,c=u),h>oc)if(p>uc-oc)a.moveTo(h*ec(d),h*rc(d)),a.arc(0,0,h,d,f,!m),c>oc&&(a.moveTo(c*ec(f),c*rc(f)),a.arc(0,0,c,f,d,m));else{var g,y,v=d,_=f,b=d,x=f,w=p,C=p,A=o.apply(this,arguments)/2,E=A>oc&&(i?+i.apply(this,arguments):sc(c*c+h*h)),k=ic(Ju(h-c)/2,+n.apply(this,arguments)),D=k,S=k;if(E>oc){var F=hc(E/c*rc(A)),O=hc(E/h*rc(A));(w-=2*F)>oc?(b+=F*=m?1:-1,x-=F):(w=0,b=x=(d+f)/2),(C-=2*O)>oc?(v+=O*=m?1:-1,_-=O):(C=0,v=_=(d+f)/2)}var M=h*ec(v),T=h*rc(v),P=c*ec(x),R=c*rc(x);if(k>oc){var B,I=h*ec(_),N=h*rc(_),L=c*ec(b),$=c*rc(b);if(p<ac&&(B=Hc(M,T,L,$,I,N,P,R))){var z=M-B[0],j=T-B[1],U=I-B[0],V=N-B[1],q=1/rc(cc((z*U+j*V)/(sc(z*z+j*j)*sc(U*U+V*V)))/2),H=sc(B[0]*B[0]+B[1]*B[1]);D=ic(k,(c-H)/(q-1)),S=ic(k,(h-H)/(q+1))}}C>oc?S>oc?(g=Wc(L,$,M,T,h,S,m),y=Wc(I,N,P,R,h,S,m),a.moveTo(g.cx+g.x01,g.cy+g.y01),S<k?a.arc(g.cx,g.cy,S,tc(g.y01,g.x01),tc(y.y01,y.x01),!m):(a.arc(g.cx,g.cy,S,tc(g.y01,g.x01),tc(g.y11,g.x11),!m),a.arc(0,0,h,tc(g.cy+g.y11,g.cx+g.x11),tc(y.cy+y.y11,y.cx+y.x11),!m),a.arc(y.cx,y.cy,S,tc(y.y11,y.x11),tc(y.y01,y.x01),!m))):(a.moveTo(M,T),a.arc(0,0,h,v,_,!m)):a.moveTo(M,T),c>oc&&w>oc?D>oc?(g=Wc(P,R,I,N,c,-D,m),y=Wc(M,T,L,$,c,-D,m),a.lineTo(g.cx+g.x01,g.cy+g.y01),D<k?a.arc(g.cx,g.cy,D,tc(g.y01,g.x01),tc(y.y01,y.x01),!m):(a.arc(g.cx,g.cy,D,tc(g.y01,g.x01),tc(g.y11,g.x11),!m),a.arc(0,0,c,tc(g.cy+g.y11,g.cx+g.x11),tc(y.cy+y.y11,y.cx+y.x11),m),a.arc(y.cx,y.cy,D,tc(y.y11,y.x11),tc(y.y01,y.x01),!m))):a.arc(0,0,c,x,b,m):a.lineTo(P,R)}else a.moveTo(0,0);if(a.closePath(),l)return a=null,l+""||null}return l.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+r.apply(this,arguments)+ +s.apply(this,arguments))/2-ac/2;return[ec(i)*n,rc(i)*n]},l.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:$c(+e),l):t},l.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:$c(+t),l):e},l.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:$c(+t),l):n},l.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:$c(+t),l):i},l.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:$c(+t),l):r},l.endAngle=function(t){return arguments.length?(s="function"==typeof t?t:$c(+t),l):s},l.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:$c(+t),l):o},l.context=function(t){return arguments.length?(a=null==t?null:t,l):a},l}().startAngle(t=>t.startAngle||0).endAngle(t=>t.endAngle||0).padAngle(t=>t.padAngle||0).innerRadius(t=>t.innerRadius||0).outerRadius(t=>t.outerRadius||0).cornerRadius(t=>t.cornerRadius||0),Km=Zc().x(Wm).y1(Gm).y0(t=>(t.y||0)+(t.height||0)).defined(Xm),Zm=Zc().y(Gm).x1(Wm).x0(t=>(t.x||0)+(t.width||0)).defined(Xm),Qm=Kc().x(Wm).y(Gm).defined(Xm),Jm=Vm().x(Wm).y(Gm).width(t=>t.width||0).height(t=>t.height||0).cornerRadius(t=>Hm(t.cornerRadiusTopLeft,t.cornerRadius)||0,t=>Hm(t.cornerRadiusTopRight,t.cornerRadius)||0,t=>Hm(t.cornerRadiusBottomRight,t.cornerRadius)||0,t=>Hm(t.cornerRadiusBottomLeft,t.cornerRadius)||0),tg=function(t,e){var n=null;function i(){var i;if(n||(n=i=Lc()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return t="function"==typeof t?t:$c(t||Qc),e="function"==typeof e?e:$c(void 0===e?64:+e),i.type=function(e){return arguments.length?(t="function"==typeof e?e:$c(e),i):t},i.size=function(t){return arguments.length?(e="function"==typeof t?t:$c(+t),i):e},i.context=function(t){return arguments.length?(n=null==t?null:t,i):n},i}().type(t=>Rm(t.shape||"circle")).size(t=>Hm(t.size,64)),eg=qm().x(Wm).y(Gm).defined(Xm).size(t=>t.size||1);function ng(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function ig(t,e,n,i){return Jm.context(t)(e,n,i)}var rg=1;function sg(){rg=1}function og(t,e,n){var i=e.clip,r=t._defs,s=e.clip_id||(e.clip_id="clip"+rg++),o=r.clipping[s]||(r.clipping[s]={id:s});return(0,de.mf)(i)?o.path=i(null):ng(n)?o.path=ig(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function ag(t){this.clear(),t&&this.union(t)}function lg(t){this.mark=t,this.bounds=this.bounds||new ag}function ug(t){lg.call(this,t),this.items=this.items||[]}function cg(t){this._pending=0,this._loader=t||Xs()}function hg(t){t._pending+=1}function dg(t){t._pending-=1}function fg(t,e,n){if(e.stroke&&0!==e.opacity&&0!==e.strokeOpacity){const i=null!=e.strokeWidth?+e.strokeWidth:1;t.expand(i+(n?function(t,e){return t.strokeJoin&&"miter"!==t.strokeJoin?0:e}(e,i):0))}return t}ag.prototype={clone(){return new ag(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set(t,e,n,i){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),i<e?(this.y2=e,this.y1=i):(this.y1=e,this.y2=i),this},add(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},rotate(t,e,n){const i=this.rotatedPoints(t,e,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(t,e,n){var{x1:i,y1:r,x2:s,y2:o}=this,a=Math.cos(t),l=Math.sin(t),u=e-e*a+n*l,c=n-e*l-n*a;return[a*i-l*r+u,l*i+a*r+c,a*i-l*o+u,l*i+a*o+c,a*s-l*r+u,l*s+a*r+c,a*s-l*o+u,l*s+a*o+c]},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}},(0,de.XW)(ug,lg),cg.prototype={pending(){return this._pending},sanitizeURL(t){const e=this;return hg(e),e._loader.sanitize(t,{context:"href"}).then(t=>(dg(e),t)).catch(()=>(dg(e),null))},loadImage(t){const e=this,n=th();return hg(e),e._loader.sanitize(t,{context:"image"}).then(t=>{const i=t.href;if(!i||!n)throw{url:i};const r=new n,s=(0,de.nr)(t,"crossOrigin")?t.crossOrigin:"anonymous";return null!=s&&(r.crossOrigin=s),r.onload=()=>dg(e),r.onerror=()=>dg(e),r.src=i,r}).catch(t=>(dg(e),{complete:!1,width:0,height:0,src:t&&t.url||""}))},ready(){const t=this;return new Promise(e=>{!function n(i){t.pending()?setTimeout(()=>{n(!0)},10):e(i)}(!1)})}};const pg=wm-1e-8;let mg,gg,yg,vg,_g,bg,xg,wg;const Cg=(t,e)=>mg.add(t,e),Ag=(t,e)=>Cg(gg=t,yg=e),Eg=t=>Cg(t,mg.y1),kg=t=>Cg(mg.x1,t),Dg=(t,e)=>_g*t+xg*e,Sg=(t,e)=>bg*t+wg*e,Fg=(t,e)=>Cg(Dg(t,e),Sg(t,e)),Og=(t,e)=>Ag(Dg(t,e),Sg(t,e));function Mg(t,e){return mg=t,e?(vg=e*bm,_g=wg=Math.cos(vg),bg=Math.sin(vg),xg=-bg):(_g=wg=1,vg=bg=xg=0),Tg}const Tg={beginPath(){},closePath(){},moveTo:Og,lineTo:Og,rect(t,e,n,i){vg?(Fg(t+n,e),Fg(t+n,e+i),Fg(t,e+i),Og(t,e)):(Cg(t+n,e+i),Ag(t,e))},quadraticCurveTo(t,e,n,i){const r=Dg(t,e),s=Sg(t,e),o=Dg(n,i),a=Sg(n,i);Pg(gg,r,o,Eg),Pg(yg,s,a,kg),Ag(o,a)},bezierCurveTo(t,e,n,i,r,s){const o=Dg(t,e),a=Sg(t,e),l=Dg(n,i),u=Sg(n,i),c=Dg(r,s),h=Sg(r,s);Rg(gg,o,l,c,Eg),Rg(yg,a,u,h,kg),Ag(c,h)},arc(t,e,n,i,r,s){if(i+=vg,r+=vg,gg=n*Math.cos(r)+t,yg=n*Math.sin(r)+e,Math.abs(r-i)>pg)Cg(t-n,e-n),Cg(t+n,e+n);else{const o=i=>Cg(n*Math.cos(i)+t,n*Math.sin(i)+e);let a,l;if(o(i),o(r),r!==i)if((i%=wm)<0&&(i+=wm),(r%=wm)<0&&(r+=wm),r<i&&(s=!s,a=i,i=r,r=a),s)for(r-=wm,a=i-i%xm,l=0;l<4&&a>r;++l,a-=xm)o(a);else for(a=i-i%xm+xm,l=0;l<4&&a<r;++l,a+=xm)o(a)}}};function Pg(t,e,n,i){const r=(t-e)/(t+n-2*e);0<r&&r<1&&i(t+(e-t)*r)}function Rg(t,e,n,i,r){const s=i-t+3*e-3*n,o=t+n-2*e,a=t-e;let l,u=0,c=0;Math.abs(s)>1e-14?(l=o*o+a*s,l>=0&&(l=Math.sqrt(l),u=(-o+l)/s,c=(-o-l)/s)):u=.5*a/o,0<u&&u<1&&r(Bg(u,t,e,n,i)),0<c&&c<1&&r(Bg(c,t,e,n,i))}function Bg(t,e,n,i,r){const s=1-t,o=s*s,a=t*t;return o*s*e+3*o*t*n+3*s*a*i+a*t*r}var Ig=(Ig=Jc(1,1))?Ig.getContext("2d"):null;const Ng=new ag;function Lg(t){return function(e,n){if(!Ig)return!0;t(Ig,e),Ng.clear().union(e.bounds).intersect(n).round();const{x1:i,y1:r,x2:s,y2:o}=Ng;for(let t=r;t<=o;++t)for(let e=i;e<=s;++e)if(Ig.isPointInPath(e,t))return!0;return!1}}function $g(t,e){return e.contains(t.x||0,t.y||0)}function zg(t,e){const n=t.x||0,i=t.y||0;return e.intersects(Ng.set(n,i,n+(t.width||0),i+(t.height||0)))}function jg(t,e){const n=t.x||0,i=t.y||0;return Ug(e,n,i,null!=t.x2?t.x2:n,null!=t.y2?t.y2:i)}function Ug(t,e,n,i,r){const{x1:s,y1:o,x2:a,y2:l}=t,u=i-e,c=r-n;let h,d,f,p,m=0,g=1;for(p=0;p<4;++p){if(0===p&&(h=-u,d=-(s-e)),1===p&&(h=u,d=a-e),2===p&&(h=-c,d=-(o-n)),3===p&&(h=c,d=l-n),Math.abs(h)<1e-10&&d<0)return!1;if(f=d/h,h<0){if(f>g)return!1;f>m&&(m=f)}else if(h>0){if(f<m)return!1;f<g&&(g=f)}}return!0}function Vg(t,e){t.globalCompositeOperation=e.blend||"source-over"}function qg(t,e){return null==t?e:t}function Hg(t,e){const n=e.length;for(let i=0;i<n;++i)t.addColorStop(e[i].offset,e[i].color);return t}function Wg(t,e,n){return hm(n)?function(t,e,n){const i=n.width(),r=n.height();let s;if("radial"===e.gradient)s=t.createRadialGradient(n.x1+qg(e.x1,.5)*i,n.y1+qg(e.y1,.5)*r,Math.max(i,r)*qg(e.r1,0),n.x1+qg(e.x2,.5)*i,n.y1+qg(e.y2,.5)*r,Math.max(i,r)*qg(e.r2,.5));else{const o=qg(e.x1,0),a=qg(e.y1,0),l=qg(e.x2,1),u=qg(e.y2,0);if(o!==l&&a!==u&&i!==r){const n=Jc(Math.ceil(i),Math.ceil(r)),s=n.getContext("2d");return s.scale(i,r),s.fillStyle=Hg(s.createLinearGradient(o,a,l,u),e.stops),s.fillRect(0,0,i,r),t.createPattern(n,"no-repeat")}s=t.createLinearGradient(n.x1+o*i,n.y1+a*r,n.x1+l*i,n.y1+u*r)}return Hg(s,e.stops)}(t,n,e.bounds):n}function Gg(t,e,n){return(n*=null==e.fillOpacity?1:e.fillOpacity)>0&&(t.globalAlpha=n,t.fillStyle=Wg(t,e,e.fill),!0)}var Xg=[];function Yg(t,e,n){var i=null!=(i=e.strokeWidth)?i:1;return!(i<=0)&&(n*=null==e.strokeOpacity?1:e.strokeOpacity)>0&&(t.globalAlpha=n,t.strokeStyle=Wg(t,e,e.stroke),t.lineWidth=i,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||Xg),t.lineDashOffset=e.strokeDashOffset||0),!0)}function Kg(t,e){return t.zindex-e.zindex||t.index-e.index}function Zg(t){if(!t.zdirty)return t.zitems;var e,n,i,r=t.items,s=[];for(n=0,i=r.length;n<i;++n)(e=r[n]).index=n,e.zindex&&s.push(e);return t.zdirty=!1,t.zitems=s.sort(Kg)}function Qg(t,e){var n,i,r=t.items;if(!r||!r.length)return;const s=Zg(t);if(s&&s.length){for(n=0,i=r.length;n<i;++n)r[n].zindex||e(r[n]);r=s}for(n=0,i=r.length;n<i;++n)e(r[n])}function Jg(t,e){var n,i,r=t.items;if(!r||!r.length)return null;const s=Zg(t);for(s&&s.length&&(r=s),i=r.length;--i>=0;)if(n=e(r[i]))return n;if(r===s)for(i=(r=t.items).length;--i>=0;)if(!r[i].zindex&&(n=e(r[i])))return n;return null}function ty(t){return function(e,n,i){Qg(n,n=>{i&&!i.intersects(n.bounds)||ny(t,e,n,n)})}}function ey(t){return function(e,n,i){!n.items.length||i&&!i.intersects(n.bounds)||ny(t,e,n.items[0],n.items)}}function ny(t,e,n,i){var r=null==n.opacity?1:n.opacity;0!==r&&(t(e,i)||(Vg(e,n),n.fill&&Gg(e,n,r)&&e.fill(),n.stroke&&Yg(e,n,r)&&e.stroke()))}function iy(t){return t=t||de.yb,function(e,n,i,r,s,o){return i*=e.pixelRatio,r*=e.pixelRatio,Jg(n,n=>{const a=n.bounds;if((!a||a.contains(s,o))&&a)return t(e,n,i,r,s,o)?n:void 0})}}function ry(t,e){return function(n,i,r,s){var o,a,l=Array.isArray(i)?i[0]:i,u=null==e?l.fill:e,c=l.stroke&&n.isPointInStroke;return c&&(a=l.strokeCap,n.lineWidth=null!=(o=l.strokeWidth)?o:1,n.lineCap=null!=a?a:"butt"),!t(n,i)&&(u&&n.isPointInPath(r,s)||c&&n.isPointInStroke(r,s))}}function sy(t){return iy(ry(t))}function oy(t,e){return"translate("+t+","+e+")"}function ay(t){return"rotate("+t+")"}function ly(t){return oy(t.x||0,t.y||0)}function uy(t,e,n){function i(t,n){var i=n.x||0,r=n.y||0,s=n.angle||0;t.translate(i,r),s&&t.rotate(s*=bm),t.beginPath(),e(t,n),s&&t.rotate(-s),t.translate(-i,-r)}return{type:t,tag:"path",nested:!1,attr:function(t,n){t("transform",function(t){return oy(t.x||0,t.y||0)+(t.angle?" "+ay(t.angle):"")}(n)),t("d",e(null,n))},bound:function(t,n){return e(Mg(t,n.angle),n),fg(t,n).translate(n.x||0,n.y||0)},draw:ty(i),pick:sy(i),isect:n||Lg(i)}}var cy=uy("arc",function(t,e){return Ym.context(t)(e)});function hy(t,e,n){function i(t,n){t.beginPath(),e(t,n)}const r=ry(i);return{type:t,tag:"path",nested:!0,attr:function(t,n){var i=n.mark.items;i.length&&t("d",e(null,i))},bound:function(t,n){var i=n.items;return 0===i.length?t:(e(Mg(t),i),fg(t,i[0]))},draw:ey(i),pick:function(t,e,n,i,s,o){var a=e.items,l=e.bounds;return!a||!a.length||l&&!l.contains(s,o)?null:r(t,a,n*=t.pixelRatio,i*=t.pixelRatio)?a[0]:null},isect:$g,tip:n}}var dy=hy("area",function(t,e){const n=e[0];return("horizontal"===n.orient?Zm:Km).curve(gm(n.interpolate||"linear",n.orient,n.tension)).context(t)(e)},function(t,e){for(var n,i,r="horizontal"===t[0].orient?e[1]:e[0],s="horizontal"===t[0].orient?"y":"x",o=t.length,a=1/0;--o>=0;)!1!==t[o].defined&&(i=Math.abs(t[o][s]-r))<a&&(a=i,n=t[o]);return n});function fy(t,e){t.beginPath(),ng(e)?ig(t,e,0,0):t.rect(0,0,e.width||0,e.height||0),t.clip()}function py(t){const e=qg(t.strokeWidth,1);return null!=t.strokeOffset?t.strokeOffset:t.stroke&&e>.5&&e<1.5?.5-Math.abs(e-1):0}function my(t,e){const n=py(e);t("d",ig(null,e,n,n))}function gy(t,e,n,i){const r=py(e);t.beginPath(),ig(t,e,(n||0)+r,(i||0)+r)}const yy=ry(gy),vy=ry(gy,!1),_y=ry(gy,!0);var by={type:"group",tag:"g",nested:!1,attr:function(t,e){t("transform",ly(e))},bound:function(t,e){if(!e.clip&&e.items){const n=e.items,i=n.length;for(let e=0;e<i;++e)t.union(n[e].bounds)}return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),fg(t,e),t.translate(e.x||0,e.y||0)},draw:function(t,e,n){Qg(e,e=>{const i=e.x||0,r=e.y||0,s=e.strokeForeground,o=null==e.opacity?1:e.opacity;(e.stroke||e.fill)&&o&&(gy(t,e,i,r),Vg(t,e),e.fill&&Gg(t,e,o)&&t.fill(),e.stroke&&!s&&Yg(t,e,o)&&t.stroke()),t.save(),t.translate(i,r),e.clip&&fy(t,e),n&&n.translate(-i,-r),Qg(e,e=>{this.draw(t,e,n)}),n&&n.translate(i,r),t.restore(),s&&e.stroke&&o&&(gy(t,e,i,r),Vg(t,e),Yg(t,e,o)&&t.stroke())})},pick:function(t,e,n,i,r,s){if(e.bounds&&!e.bounds.contains(r,s)||!e.items)return null;const o=n*t.pixelRatio,a=i*t.pixelRatio;return Jg(e,l=>{let u,c,h;const d=l.bounds;if(d&&!d.contains(r,s))return;c=l.x||0,h=l.y||0;const f=l.clip;if(f&&(r<c||r>c+(l.width||0)||s<h||s>h+(l.height||0)))return;if(t.save(),t.translate(c,h),c=r-c,h=s-h,f&&ng(l)&&!_y(t,l,o,a))return t.restore(),null;const p=l.strokeForeground,m=!1!==e.interactive;return m&&p&&l.stroke&&vy(t,l,o,a)?(t.restore(),l):(u=Jg(l,t=>function(t,e,n){return(!1!==t.interactive||"group"===t.marktype)&&t.bounds&&t.bounds.contains(e,n)}(t,c,h)?this.pick(t,n,i,c,h):null),!u&&m&&(l.fill||!p&&l.stroke)&&yy(t,l,o,a)&&(u=l),t.restore(),u||null)})},isect:zg,content:function(t,e,n){t("clip-path",e.clip?og(n,e,e):null)},background:function(t,e){t("class","background"),t("aria-hidden",!0),my(t,e)},foreground:function(t,e){t("class","foreground"),t("aria-hidden",!0),e.strokeForeground?my(t,e):t("d","")}},xy={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function wy(t,e){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},e.loadImage(t.url).then(e=>{t.image=e,t.image.url=t.url})),n}function Cy(t,e){return null!=t.width?t.width:e&&e.width?!1!==t.aspect&&t.height?t.height*e.width/e.height:e.width:0}function Ay(t,e){return null!=t.height?t.height:e&&e.height?!1!==t.aspect&&t.width?t.width*e.height/e.width:e.height:0}function Ey(t,e){return"center"===t?e/2:"right"===t?e:0}function ky(t,e){return"middle"===t?e/2:"bottom"===t?e:0}var Dy={type:"image",tag:"image",nested:!1,attr:function(t,e,n){const i=wy(e,n),r=Cy(e,i),s=Ay(e,i),o=(e.x||0)-Ey(e.align,r),a=(e.y||0)-ky(e.baseline,s);t("href",!i.src&&i.toDataURL?i.toDataURL():i.src||"",xy["xmlns:xlink"],"xlink:href"),t("transform",oy(o,a)),t("width",r),t("height",s),t("preserveAspectRatio",!1===e.aspect?"none":"xMidYMid")},bound:function(t,e){const n=e.image,i=Cy(e,n),r=Ay(e,n),s=(e.x||0)-Ey(e.align,i),o=(e.y||0)-ky(e.baseline,r);return t.set(s,o,s+i,o+r)},draw:function(t,e,n){Qg(e,e=>{if(n&&!n.intersects(e.bounds))return;const i=wy(e,this);let r=Cy(e,i),s=Ay(e,i);if(0===r||0===s)return;let o,a,l,u,c=(e.x||0)-Ey(e.align,r),h=(e.y||0)-ky(e.baseline,s);!1!==e.aspect&&(a=i.width/i.height,l=e.width/e.height,a==a&&l==l&&a!==l&&(l<a?(u=r/a,h+=(s-u)/2,s=u):(u=s*a,c+=(r-u)/2,r=u))),(i.complete||i.toDataURL)&&(Vg(t,e),t.globalAlpha=null!=(o=e.opacity)?o:1,t.imageSmoothingEnabled=!1!==e.smooth,t.drawImage(i,c,h,r,s))})},pick:iy(),isect:de.yb,get:wy,xOffset:Ey,yOffset:ky},Sy=hy("line",function(t,e){const n=e[0];return Qm.curve(gm(n.interpolate||"linear",n.orient,n.tension)).context(t)(e)},function(t,e){for(var n,i,r=Math.pow(t[0].strokeWidth||1,2),s=t.length;--s>=0;)if(!1!==t[s].defined&&(n=t[s].x-e[0])*n+(i=t[s].y-e[1])*i<r)return t[s];return null});function Fy(t,e){var n=e.path;if(null==n)return!0;var i=e.x||0,r=e.y||0,s=e.scaleX||1,o=e.scaleY||1,a=(e.angle||0)*bm,l=e.pathCache;l&&l.path===n||((e.pathCache=l=_m(n)).path=n),a&&t.rotate&&t.translate?(t.translate(i,r),t.rotate(a),Om(t,l,0,0,s,o),t.rotate(-a),t.translate(-i,-r)):Om(t,l,i,r,s,o)}var Oy={type:"path",tag:"path",nested:!1,attr:function(t,e){1===(e.scaleX||1)&&1===(e.scaleY||1)||t("vector-effect","non-scaling-stroke"),t("transform",function(t){return oy(t.x||0,t.y||0)+(t.angle?" "+ay(t.angle):"")+(t.scaleX||t.scaleY?" scale("+(t.scaleX||1)+","+(t.scaleY||1)+")":"")}(e)),t("d",e.path)},bound:function(t,e){return Fy(Mg(t,e.angle),e)?t.set(0,0,0,0):fg(t,e,!0)},draw:ty(Fy),pick:sy(Fy),isect:Lg(Fy)};function My(t,e){t.beginPath(),ig(t,e)}var Ty={type:"rect",tag:"path",nested:!1,attr:function(t,e){t("d",ig(null,e))},bound:function(t,e){var n,i;return fg(t.set(n=e.x||0,i=e.y||0,n+e.width||0,i+e.height||0),e)},draw:ty(My),pick:sy(My),isect:zg};function Py(t,e,n){var i,r,s,o;return!(!e.stroke||!Yg(t,e,n)||(i=e.x||0,r=e.y||0,s=null!=e.x2?e.x2:i,o=null!=e.y2?e.y2:r,t.beginPath(),t.moveTo(i,r),t.lineTo(s,o),0))}var Ry={type:"rule",tag:"line",nested:!1,attr:function(t,e){t("transform",ly(e)),t("x2",null!=e.x2?e.x2-(e.x||0):0),t("y2",null!=e.y2?e.y2-(e.y||0):0)},bound:function(t,e){var n,i;return fg(t.set(n=e.x||0,i=e.y||0,null!=e.x2?e.x2:n,null!=e.y2?e.y2:i),e)},draw:function(t,e,n){Qg(e,e=>{if(!n||n.intersects(e.bounds)){var i=null==e.opacity?1:e.opacity;i&&Py(t,e,i)&&(Vg(t,e),t.stroke())}})},pick:iy(function(t,e,n,i){return!!t.isPointInStroke&&Py(t,e,1)&&t.isPointInStroke(n,i)}),isect:jg},By=uy("shape",function(t,e){return(e.mark.shape||e.shape).context(t)(e)}),Iy=uy("symbol",function(t,e){return tg.context(t)(e)},$g);const Ny=(0,de.$m)();var Ly={height:qy,measureWidth:Uy,estimateWidth:zy,width:zy,canvas:$y};function $y(t){Ly.width=t&&Ig?Uy:zy}function zy(t,e){return jy(Xy(t,e),qy(t))}function jy(t,e){return~~(.8*t.length*e)}function Uy(t,e){return qy(t)<=0||!(e=Xy(t,e))?0:Vy(e,Ky(t))}function Vy(t,e){const n=`(${e}) ${t}`;let i=Ny.get(n);return void 0===i&&(Ig.font=e,i=Ig.measureText(t).width,Ny.set(n,i)),i}function qy(t){return null!=t.fontSize?+t.fontSize||0:11}function Hy(t){return null!=t.lineHeight?t.lineHeight:qy(t)+2}function Wy(t){return e=t.lineBreak&&t.text&&!(0,de.kJ)(t.text)?t.text.split(t.lineBreak):t.text,(0,de.kJ)(e)?e.length>1?e:e[0]:e;var e}function Gy(t){const e=Wy(t);return((0,de.kJ)(e)?e.length-1:0)*Hy(t)}function Xy(t,e){const n=null==e?"":(e+"").trim();return t.limit>0&&n.length?function(t,e){var n=+t.limit,i=function(t){if(Ly.width===Uy){const e=Ky(t);return t=>Vy(t,e)}{const e=qy(t);return t=>jy(t,e)}}(t);if(i(e)<n)return e;var r,s=t.ellipsis||"\u2026",o="rtl"===t.dir,a=0,l=e.length;if(n-=i(s),o){for(;a<l;)i(e.slice(r=a+l>>>1))>n?a=r+1:l=r;return s+e.slice(a)}for(;a<l;)i(e.slice(0,r=1+(a+l>>>1)))<n?a=r:l=r-1;return e.slice(0,a)+s}(t,n):n}function Yy(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Ky(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+qy(t)+"px "+Yy(t,e)}function Zy(t){var e=t.baseline,n=qy(t);return Math.round("top"===e?.79*n:"middle"===e?.3*n:"bottom"===e?-.21*n:"line-top"===e?.29*n+.5*Hy(t):"line-bottom"===e?.29*n-.5*Hy(t):0)}$y(!0);const Qy={left:"start",center:"middle",right:"end"},Jy=new ag;function tv(t){var e,n=t.x||0,i=t.y||0,r=t.radius||0;return r&&(e=(t.theta||0)-xm,n+=r*Math.cos(e),i+=r*Math.sin(e)),Jy.x1=n,Jy.y1=i,Jy}function ev(t,e,n){var i,r=Ly.height(e),s=e.align,o=tv(e),a=o.x1,l=o.y1,u=e.dx||0,c=(e.dy||0)+Zy(e)-Math.round(.8*r),h=Wy(e);if((0,de.kJ)(h)?(r+=Hy(e)*(h.length-1),i=h.reduce((t,n)=>Math.max(t,Ly.width(e,n)),0)):i=Ly.width(e,h),"center"===s?u-=i/2:"right"===s&&(u-=i),t.set(u+=a,c+=l,u+i,c+r),e.angle&&!n)t.rotate(e.angle*bm,a,l);else if(2===n)return t.rotatedPoints(e.angle*bm,a,l);return t}var nv={arc:cy,area:dy,group:by,image:Dy,line:Sy,path:Oy,rect:Ty,rule:Ry,shape:By,symbol:Iy,text:{type:"text",tag:"text",nested:!1,attr:function(t,e){var n,i=e.dx||0,r=(e.dy||0)+Zy(e),s=tv(e),o=s.x1,a=s.y1,l=e.angle||0;t("text-anchor",Qy[e.align]||"start"),l?(n=oy(o,a)+" "+ay(l),(i||r)&&(n+=" "+oy(i,r))):n=oy(o+i,a+r),t("transform",n)},bound:ev,draw:function(t,e,n){Qg(e,e=>{var i,r,s,o,a,l,u,c=null==e.opacity?1:e.opacity;if(!(n&&!n.intersects(e.bounds)||0===c||e.fontSize<=0||null==e.text||0===e.text.length)){if(t.font=Ky(e),t.textAlign=e.align||"left",r=(i=tv(e)).x1,s=i.y1,e.angle&&(t.save(),t.translate(r,s),t.rotate(e.angle*bm),r=s=0),r+=e.dx||0,s+=(e.dy||0)+Zy(e),l=Wy(e),Vg(t,e),(0,de.kJ)(l))for(a=Hy(e),o=0;o<l.length;++o)u=Xy(e,l[o]),e.fill&&Gg(t,e,c)&&t.fillText(u,r,s),e.stroke&&Yg(t,e,c)&&t.strokeText(u,r,s),s+=a;else u=Xy(e,l),e.fill&&Gg(t,e,c)&&t.fillText(u,r,s),e.stroke&&Yg(t,e,c)&&t.strokeText(u,r,s);e.angle&&t.restore()}})},pick:iy(function(t,e,n,i,r,s){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var o=tv(e),a=o.x1,l=o.y1,u=ev(Jy,e,1),c=-e.angle*bm,h=Math.cos(c),d=Math.sin(c);return u.contains(h*r-d*s+(a-h*a+d*l),d*r+h*s+(l-d*a-h*l))}),isect:function(t,e){const n=ev(Jy,t,2);return Ug(e,n[0],n[1],n[2],n[3])||Ug(e,n[0],n[1],n[4],n[5])||Ug(e,n[4],n[5],n[6],n[7])||Ug(e,n[2],n[3],n[6],n[7])}},trail:hy("trail",function(t,e){return eg.context(t)(e)},function(t,e){for(var n,i,r=t.length;--r>=0;)if(!1!==t[r].defined&&(n=t[r].x-e[0])*n+(i=t[r].y-e[1])*i<(n=t[r].size||1)*n)return t[r];return null})};function iv(t,e,n){var i=nv[t.mark.marktype];return i.nested&&(t=t.mark),(e||i.bound)(t.bounds||(t.bounds=new ag),t,n)}var rv={mark:null};function sv(t,e,n){var i,r,s,o,a=nv[t.marktype],l=a.bound,u=t.items,c=u&&u.length;if(a.nested)return c?s=u[0]:(rv.mark=t,s=rv),o=iv(s,l,n),e&&e.union(o)||o;if(e=e||t.bounds&&t.bounds.clear()||new ag,c)for(i=0,r=u.length;i<r;++i)e.union(iv(u[i],l,n));return t.bounds=e}const ov=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function av(t,e){return JSON.stringify(t,ov,e)}function lv(t){return uv("string"==typeof t?JSON.parse(t):t)}function uv(t){var e,n,i,r=t.marktype,s=t.items;if(s)for(n=0,i=s.length;n<i;++n)s[n][e=r?"mark":"group"]=t,s[n].zindex&&(s[n][e].zdirty=!0),"group"===(r||e)&&uv(s[n]);return r&&sv(t),t}function cv(t){arguments.length?this.root=lv(t):(this.root=hv({marktype:"group",name:"root",role:"frame"}),this.root.items=[new ug(this.root)])}function hv(t,e){const n={bounds:new ag,clip:!!t.clip,group:e,interactive:!1!==t.interactive,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0};return null!=t.aria&&(n.aria=t.aria),t.description&&(n.description=t.description),n}function dv(t,e,n){return!t&&"undefined"!=typeof document&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function fv(t,e){e=e.toLowerCase();for(var n=t.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===e)return n[i]}function pv(t,e,n,i){var r,s=t.childNodes[e];return s&&s.tagName.toLowerCase()===n.toLowerCase()||(r=s||null,s=dv(t.ownerDocument,n,i),t.insertBefore(s,r)),s}function mv(t,e){for(var n=t.childNodes,i=n.length;i>e;)t.removeChild(n[--i]);return t}function gv(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function yv(t,e){const n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]}function vv(t,e){this._active=null,this._handlers={},this._loader=t||Xs(),this._tooltip=e||_v}function _v(t,e,n,i){t.element().setAttribute("title",i||"")}function bv(t){this._el=null,this._bgcolor=null,this._loader=new cg(t)}cv.prototype={toJSON(t){return av(this.root,t||0)},mark(t,e,n){const i=hv(t,e=e||this.root.items[0]);return e.items[n]=i,i.zindex&&(i.group.zdirty=!0),i}},vv.prototype={initialize(t,e,n){return this._el=t,this._obj=n||null,this.origin(e)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},scene(t){return arguments.length?(this._scene=t,this):this._scene},on(){},off(){},_handlerIndex(t,e,n){for(let i=t?t.length:0;--i>=0;)if(t[i].type===e&&(!n||t[i].handler===n))return i;return-1},handlers(t){const e=this._handlers,n=[];if(t)n.push(...e[this.eventName(t)]);else for(const i in e)n.push(...e[i]);return n},eventName(t){const e=t.indexOf(".");return e<0?t:t.slice(0,e)},handleHref(t,e,n){this._loader.sanitize(n,{context:"href"}).then(e=>{const n=new MouseEvent(t.type,t),i=dv(null,"a");for(const t in e)i.setAttribute(t,e[t]);i.dispatchEvent(n)}).catch(()=>{})},handleTooltip(t,e,n){e&&null!=e.tooltip&&(e=function(t,e,n,i){var r,s,o=t&&t.mark;if(o&&(r=nv[o.marktype]).tip){for((s=yv(e,n))[0]-=i[0],s[1]-=i[1];t=t.mark.group;)s[0]-=t.x||0,s[1]-=t.y||0;t=r.tip(o.items,s)}return t}(e,t,this.canvas(),this._origin),this._tooltip.call(this._obj,this,t,e,n&&e&&e.tooltip||null))},getItemBoundingClientRect(t){const e=this.canvas();if(!e)return;const n=e.getBoundingClientRect(),i=this._origin,r=t.bounds,s=r.width(),o=r.height();let a=r.x1+i[0]+n.left,l=r.y1+i[1]+n.top;for(;t.mark&&(t=t.mark.group);)a+=t.x||0,l+=t.y||0;return{x:a,y:l,width:s,height:o,left:a,top:l,right:a+s,bottom:l+o}}},bv.prototype={initialize(t,e,n,i,r){return this._el=t,this.resize(e,n,i,r)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)},resize(t,e,n,i){return this._width=t,this._height=e,this._origin=n||[0,0],this._scale=i||1,this},dirty(){},render(t){const e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},_render(){},renderAsync(t){const e=this.render(t);return this._ready?this._ready.then(()=>e):Promise.resolve(e)},_load(t,e){var n=this,i=n._loader[t](e);if(!n._ready){const t=n._call;n._ready=n._loader.ready().then(e=>{e&&t(),n._ready=null})}return i},sanitizeURL(t){return this._load("sanitizeURL",t)},loadImage(t){return this._load("loadImage",t)}};const xv="dragenter",wv="dragleave",Cv="dragover",Av="mousedown",Ev="mousemove",kv="mouseout",Dv="mouseover",Sv="click",Fv="mousewheel",Ov="touchstart",Mv="touchmove",Tv="touchend",Pv=Ev,Rv=kv,Bv=Sv;function Iv(t,e){vv.call(this,t,e),this._down=null,this._touch=null,this._first=!0,this._events={}}function Nv(t,e){(t=>t===Ov||t===Mv||t===Tv?[Ov,Mv,Tv]:[t])(e).forEach(e=>function(t,e){const n=t.canvas();n&&!t._events[e]&&(t._events[e]=1,n.addEventListener(e,t[e]?n=>t[e](n):n=>t.fire(e,n)))}(t,e))}function Lv(t,e,n){return function(i){const r=this._active,s=this.pickEvent(i);s===r||(r&&r.exit||this.fire(n,i),this._active=s,this.fire(e,i)),this.fire(t,i)}}function $v(t){return function(e){this.fire(t,e),this._active=null}}(0,de.XW)(Iv,vv,{initialize(t,e,n){return this._canvas=t&&fv(t,"canvas"),[Sv,Av,Ev,kv,wv].forEach(t=>Nv(this,t)),vv.prototype.initialize.call(this,t,e,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:["keydown","keypress","keyup",xv,wv,Cv,Av,"mouseup",Ev,kv,Dv,Sv,"dblclick","wheel",Fv,Ov,Mv,Tv],DOMMouseScroll(t){this.fire(Fv,t)},mousemove:Lv(Ev,Dv,kv),dragover:Lv(Cv,xv,wv),mouseout:$v(kv),dragleave:$v(wv),mousedown(t){this._down=this._active,this.fire(Av,t)},click(t){this._down===this._active&&(this.fire(Sv,t),this._down=null)},touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Ov,t,!0)},touchmove(t){this.fire(Mv,t,!0)},touchend(t){this.fire(Tv,t,!0),this._touch=null},fire(t,e,n){const i=n?this._touch:this._active,r=this._handlers[t];if(e.vegaType=t,t===Bv&&i&&i.href?this.handleHref(e,i,i.href):t!==Pv&&t!==Rv||this.handleTooltip(e,i,t!==Rv),r)for(let s=0,o=r.length;s<o;++s)r[s].handler.call(this._obj,e,i)},on(t,e){const n=this.eventName(t),i=this._handlers;return this._handlerIndex(i[n],t,e)<0&&(Nv(this,t),(i[n]||(i[n]=[])).push({type:t,handler:e})),this},off(t,e){const n=this.eventName(t),i=this._handlers[n],r=this._handlerIndex(i,t,e);return r>=0&&i.splice(r,1),this},pickEvent(t){const e=yv(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1])},pick(t,e,n,i,r){const s=this.context();return nv[t.marktype].pick.call(this,s,t,e,n,i,r)}});var zv="undefined"!=typeof window&&window.devicePixelRatio||1;function jv(t){bv.call(this,t),this._options={},this._redraw=!1,this._dirty=new ag,this._tempb=new ag}const Uv=bv.prototype;function Vv(t,e){vv.call(this,t,e);const n=this;n._hrefHandler=qv(n,(t,e)=>{e&&e.href&&n.handleHref(t,e,e.href)}),n._tooltipHandler=qv(n,(t,e)=>{n.handleTooltip(t,e,t.type!==Rv)})}(0,de.XW)(jv,bv,{initialize(t,e,n,i,r,s){return this._options=s||{},this._canvas=this._options.externalContext?null:Jc(1,1),t&&this._canvas&&(mv(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),Uv.initialize.call(this,t,e,n,i,r)},resize(t,e,n,i){if(Uv.resize.call(this,t,e,n,i),this._canvas)!function(t,e,n,i,r,s){const o="undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&null!=t.parentNode,a=t.getContext("2d"),l=o?zv:r;t.width=e*l,t.height=n*l;for(const u in s)a[u]=s[u];o&&1!==l&&(t.style.width=e+"px",t.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*i[0],l*i[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const t=this._options.externalContext;t||(0,de.vU)("CanvasRenderer is missing a valid canvas or context"),t.scale(this._scale,this._scale),t.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(t){const e=this._tempb.clear().union(t.bounds);let n=t.mark.group;for(;n;)e.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(e)},_render(t){const e=this.context(),n=this._origin,i=this._width,r=this._height,s=this._dirty,o=((t,e,n)=>(new ag).set(0,0,e,n).translate(-t[0],-t[1]))(n,i,r);e.save();const a=this._redraw||s.empty()?(this._redraw=!1,o.expand(1)):function(t,e,n){return e.expand(1).round(),t.pixelRatio%1&&e.scale(t.pixelRatio).round().scale(1/t.pixelRatio),e.translate(-n[0]%1,-n[1]%1),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}(e,o.intersect(s),n);return this.clear(-n[0],-n[1],i,r),this.draw(e,t,a),e.restore(),s.clear(),this},draw(t,e,n){const i=nv[e.marktype];e.clip&&function(t,e){var n=e.clip;t.save(),(0,de.mf)(n)?(t.beginPath(),n(t),t.clip()):fy(t,e.group)}(t,e),i.draw.call(this,t,e,n),e.clip&&t.restore()},clear(t,e,n,i){const r=this._options,s=this.context();"pdf"===r.type||r.externalContext||s.clearRect(t,e,n,i),null!=this._bgcolor&&(s.fillStyle=this._bgcolor,s.fillRect(t,e,n,i))}});const qv=(t,e)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,e.call(t._obj,n,i)};(0,de.XW)(Vv,vv,{initialize(t,e,n){let i=this._svg;return i&&(i.removeEventListener(Bv,this._hrefHandler),i.removeEventListener(Pv,this._tooltipHandler),i.removeEventListener(Rv,this._tooltipHandler)),this._svg=i=t&&fv(t,"svg"),i&&(i.addEventListener(Bv,this._hrefHandler),i.addEventListener(Pv,this._tooltipHandler),i.addEventListener(Rv,this._tooltipHandler)),vv.prototype.initialize.call(this,t,e,n)},canvas(){return this._svg},on(t,e){const n=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[n],t,e)<0){const r={type:t,handler:e,listener:qv(this,e)};(i[n]||(i[n]=[])).push(r),this._svg&&this._svg.addEventListener(n,r.listener)}return this},off(t,e){const n=this.eventName(t),i=this._handlers[n],r=this._handlerIndex(i,t,e);return r>=0&&(this._svg&&this._svg.removeEventListener(n,i[r].listener),i.splice(r,1)),this}});const Hv="aria-hidden",Wv="aria-label",Gv="role",Xv="aria-roledescription",Yv="graphics-object",Kv="graphics-symbol",Zv=(t,e,n)=>({[Gv]:t,[Xv]:e,[Wv]:n||void 0}),Qv=(0,de.Rg)(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Jv={axis:{desc:"axis",caption:function(t){const e=t.datum,n=t.orient,i=e.title?r_(t):null,r=t.context,s=r.scales[e.scale].value,o=r.dataflow.locale(),a=s.type;return("left"===n||"right"===n?"Y":"X")+"-axis"+(i?` titled '${i}'`:"")+` for a ${Fp(a)?"discrete":a} scale`+` with ${lm(o,s,t)}`}},legend:{desc:"legend",caption:function(t){const e=t.datum,n=e.title?r_(t):null,i=`${e.type||""} legend`.trim(),r=e.scales,s=Object.keys(r),o=t.context,a=o.scales[r[s[0]]].value,l=o.dataflow.locale();return((u=i).length?u[0].toUpperCase()+u.slice(1):u)+(n?` titled '${n}'`:"")+` for ${function(t){return(t=t.map(t=>t+("fill"===t||"stroke"===t?" color":""))).length<2?t[0]:t.slice(0,-1).join(", ")+" and "+(0,de.fj)(t)}(s)}`+` with ${lm(l,a,t)}`;var u}},"title-text":{desc:"title",caption:t=>`Title text '${i_(t)}'`},"title-subtitle":{desc:"subtitle",caption:t=>`Subtitle text '${i_(t)}'`}},t_={ariaRole:Gv,ariaRoleDescription:Xv,description:Wv};function e_(t,e){const n=!1===e.aria;if(t(Hv,n||void 0),n||null==e.description)for(const i in t_)t(t_[i],void 0);else{const n=e.mark.marktype;t(Wv,e.description),t(Gv,e.ariaRole||("group"===n?Yv:Kv)),t(Xv,e.ariaRoleDescription||`${n} mark`)}}function n_(t){return!1===t.aria?{[Hv]:!0}:Qv[t.role]?null:Jv[t.role]?function(t,e){try{const n=t.items[0],i=e.caption||(()=>"");return Zv(e.role||Kv,e.desc,n.description||i(n))}catch(n){return null}}(t,Jv[t.role]):function(t){const e=t.marktype,n="group"===e||"text"===e||t.items.some(t=>null!=t.description&&!1!==t.aria);return Zv(n?Yv:Kv,`${e} mark container`,t.description)}(t)}function i_(t){return(0,de.IX)(t.text).join(" ")}function r_(t){try{return(0,de.IX)((0,de.fj)(t.items).items[0].text).join(" ")}catch(e){return null}}const s_=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");function o_(){let t="",e="",n="";const i=[],r=()=>e=n="",s=(t,n)=>{var i;return null!=n&&(e+=` ${t}="${i=n,s_(i).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")}"`),o},o={open(a,...l){(s=>{e&&(t+=`${e}>${n}`,r()),i.push(s)})(a),e="<"+a;for(const t of l)for(const e in t)s(e,t[e]);return o},close(){const s=i.pop();return t+=e?e+(n?`>${n}</${s}>`:"/>"):`</${s}>`,r(),o},attr:s,text:t=>(n+=s_(t),o),toString:()=>t};return o}const a_=t=>l_(o_(),t)+"";function l_(t,e){if(t.open(e.tagName),e.hasAttributes()){const n=e.attributes,i=n.length;for(let e=0;e<i;++e)t.attr(n[e].name,n[e].value)}if(e.hasChildNodes()){const n=e.childNodes,i=n.length;for(let e=0;e<i;e++){const i=n[e];3===i.nodeType?t.text(i.nodeValue):l_(t,i)}}return t.close()}const u_={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},c_={fill:"none","stroke-miterlimit":10},h_="http://www.w3.org/2000/xmlns/",d_=xy.xmlns;function f_(t){bv.call(this,t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const p_=bv.prototype;function m_(t,e){for(;t&&t.dirty!==e;t=t.mark.group){if(t.dirty=e,!t.mark||t.mark.dirty===e)return;t.mark.dirty=e}}function g_(t,e,n){let i,r,s;if("radial"===e.gradient){let i=pv(t,n++,"pattern",d_);A_(i,{id:cm+e.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),i=pv(i,0,"rect",d_),A_(i,{width:1,height:1,fill:`url(${k_()}#${e.id})`}),A_(t=pv(t,n++,"radialGradient",d_),{id:e.id,fx:e.x1,fy:e.y1,fr:e.r1,cx:e.x2,cy:e.y2,r:e.r2})}else A_(t=pv(t,n++,"linearGradient",d_),{id:e.id,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2});for(i=0,r=e.stops.length;i<r;++i)s=pv(t,i,"stop",d_),s.setAttribute("offset",e.stops[i].offset),s.setAttribute("stop-color",e.stops[i].color);return mv(t,i),n}function y_(t,e,n){let i;return(t=pv(t,n,"clipPath",d_)).setAttribute("id",e.id),e.path?(i=pv(t,0,"path",d_),i.setAttribute("d",e.path)):(i=pv(t,0,"rect",d_),A_(i,{x:0,y:0,width:e.width,height:e.height})),mv(t,1),n+1}function v_(t,e,n,i,r){let s,o=t._svg;if(!o&&(s=e.ownerDocument,o=dv(s,i,d_),t._svg=o,t.mark&&(o.__data__=t,o.__values__={fill:"default"},"g"===i))){const e=dv(s,"path",d_);o.appendChild(e),e.__data__=t;const n=dv(s,"g",d_);o.appendChild(n),n.__data__=t;const i=dv(s,"path",d_);o.appendChild(i),i.__data__=t,i.__values__={fill:"default"}}return(o.ownerSVGElement!==r||function(t,e){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=e}(o,n))&&e.insertBefore(o,n?n.nextSibling:e.firstChild),o}(0,de.XW)(f_,bv,{initialize(t,e,n,i,r){return this._defs={},this._clearDefs(),t&&(this._svg=pv(t,0,"svg",d_),this._svg.setAttributeNS(h_,"xmlns",d_),this._svg.setAttributeNS(h_,"xmlns:xlink",xy["xmlns:xlink"]),this._svg.setAttribute("version",xy.version),this._svg.setAttribute("class","marks"),mv(t,1),this._root=pv(this._svg,0,"g",d_),A_(this._root,c_),mv(this._svg,1)),this.background(this._bgcolor),p_.initialize.call(this,t,e,n,i,r)},background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),p_.background.apply(this,arguments)},resize(t,e,n,i){return p_.resize.call(this,t,e,n,i),this._svg&&(A_(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas(){return this._svg},svg(){const t=this._svg,e=this._bgcolor;if(!t)return null;let n;e&&(t.removeAttribute("style"),n=pv(t,0,"rect",d_),A_(n,{width:this._width,height:this._height,fill:e}));const i=a_(t);return e&&(t.removeChild(n),this._svg.style.setProperty("background-color",e)),i},_render(t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t),mv(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},isDirty(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const e=++this._dirtyID;let n,i,r,s,o,a,l;for(o=0,a=t.length;o<a;++o)n=t[o],i=n.mark,i.marktype!==r&&(r=i.marktype,s=nv[r]),i.zdirty&&i.dirty!==e&&(this._dirtyAll=!1,m_(n,e),i.items.forEach(t=>{t.dirty=e})),i.zdirty||(n.exit?(s.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(s,l._svg,l)):n._svg&&(l=n._svg.parentNode,l&&l.removeChild(n._svg)),n._svg=null):(n=s.nested?i.items[0]:n,n._update!==e&&(n._svg&&n._svg.ownerSVGElement?this._update(s,n._svg,n):(this._dirtyAll=!1,m_(n,e)),n._update=e)));return!this._dirtyAll},mark(t,e,n){if(!this.isDirty(e))return e._svg;const i=this._svg,r=nv[e.marktype],s=!1===e.interactive?"none":null,o="g"===r.tag;let a=null,l=0;const u=v_(e,t,n,"g",i);u.setAttribute("class",gv(e));const c=n_(e);for(const d in c)E_(u,d,c[d]);o||E_(u,"pointer-events",s),E_(u,"clip-path",e.clip?og(this,e,e.group):null);const h=t=>{const e=this.isDirty(t),n=v_(t,u,a,r.tag,i);e&&(this._update(r,n,t),o&&function(t,e,n){e=e.lastChild.previousSibling;let i,r=0;Qg(n,n=>{i=t.mark(e,n,i),++r}),mv(e,1+r)}(this,n,t)),a=n,++l};return r.nested?e.items.length&&h(e.items[0]):Qg(e,h),mv(u,l),u},_update(t,e,n){__=e,b_=e.__values__,e_(w_,n),t.attr(w_,n,this);const i=x_[t.type];i&&i.call(this,t,e,n),__&&this.style(__,n)},style(t,e){if(null!=e)for(const n in u_){let i="font"===n?Yy(e):e[n];if(i===b_[n])continue;const r=u_[n];null==i?t.removeAttribute(r):(hm(i)&&(i=dm(i,this._defs.gradient,k_())),t.setAttribute(r,i+"")),b_[n]=i}},defs(){const t=this._svg,e=this._defs;let n=e.el,i=0;for(const r in e.gradient)n||(e.el=n=pv(t,1,"defs",d_)),i=g_(n,e.gradient[r],i);for(const r in e.clipping)n||(e.el=n=pv(t,1,"defs",d_)),i=y_(n,e.clipping[r],i);n&&(0===i?(t.removeChild(n),e.el=null):mv(n,i))},_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}});let __=null,b_=null;const x_={group(t,e,n){const i=__=e.childNodes[2];b_=i.__values__,t.foreground(w_,n,this),b_=e.__values__,__=e.childNodes[1],t.content(w_,n,this);const r=__=e.childNodes[0];t.background(w_,n,this);const s=!1===n.mark.interactive?"none":null;if(s!==b_.events&&(E_(i,"pointer-events",s),E_(r,"pointer-events",s),b_.events=s),n.strokeForeground&&n.stroke){const t=n.fill;E_(i,"display",null),this.style(r,n),E_(r,"stroke",null),t&&(n.fill=null),b_=i.__values__,this.style(i,n),t&&(n.fill=t),__=null}else E_(i,"display","none")},image(t,e,n){!1===n.smooth?(C_(e,"image-rendering","optimizeSpeed"),C_(e,"image-rendering","pixelated")):C_(e,"image-rendering",null)},text(t,e,n){const i=Wy(n);let r,s,o,a;(0,de.kJ)(i)?(s=i.map(t=>Xy(n,t)),r=s.join("\n"),r!==b_.text&&(mv(e,0),o=e.ownerDocument,a=Hy(n),s.forEach((t,i)=>{const r=dv(o,"tspan",d_);r.__data__=n,r.textContent=t,i&&(r.setAttribute("x",0),r.setAttribute("dy",a)),e.appendChild(r)}),b_.text=r)):(s=Xy(n,i),s!==b_.text&&(e.textContent=s,b_.text=s)),E_(e,"font-family",Yy(n)),E_(e,"font-size",qy(n)+"px"),E_(e,"font-style",n.fontStyle),E_(e,"font-variant",n.fontVariant),E_(e,"font-weight",n.fontWeight)}};function w_(t,e,n){e!==b_[t]&&(n?function(t,e,n,i){null!=n?t.setAttributeNS(i,e,n):t.removeAttributeNS(i,e)}(__,t,e,n):E_(__,t,e),b_[t]=e)}function C_(t,e,n){n!==b_[e]&&(null==n?t.style.removeProperty(e):t.style.setProperty(e,n+""),b_[e]=n)}function A_(t,e){for(const n in e)E_(t,n,e[n])}function E_(t,e,n){null!=n?t.setAttribute(e,n):t.removeAttribute(e)}function k_(){let t;return"undefined"==typeof window?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function D_(t){bv.call(this,t),this._text=null,this._defs={gradient:{},clipping:{}}}(0,de.XW)(D_,bv,{svg(){return this._text},_render(t){const e=o_();e.open("svg",(0,de.l7)({},xy,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&"transparent"!==n&&"none"!==n&&e.open("rect",{width:this._width,height:this._height,fill:n}).close(),e.open("g",c_,{transform:"translate("+this._origin+")"}),this.mark(e,t),e.close(),this.defs(e),this._text=e.close()+"",this},mark(t,e){const n=nv[e.marktype],i=n.tag,r=[e_,n.attr];t.open("g",{class:gv(e),"clip-path":e.clip?og(this,e,e.group):null},n_(e),{"pointer-events":"g"!==i&&!1===e.interactive?"none":null});const s=s=>{const o=this.href(s);if(o&&t.open("a",o),t.open(i,this.attr(e,s,r,"g"!==i?i:null)),"text"===i){const e=Wy(s);if((0,de.kJ)(e)){const n={x:0,dy:Hy(s)};for(let i=0;i<e.length;++i)t.open("tspan",i?n:null).text(Xy(s,e[i])).close()}else t.text(Xy(s,e))}else if("g"===i){const i=s.strokeForeground,r=s.fill,o=s.stroke;i&&o&&(s.stroke=null),t.open("path",this.attr(e,s,n.background,"bgrect")).close(),t.open("g",this.attr(e,s,n.content)),Qg(s,e=>this.mark(t,e)),t.close(),i&&o?(r&&(s.fill=null),s.stroke=o,t.open("path",this.attr(e,s,n.foreground,"bgrect")).close(),r&&(s.fill=r)):t.open("path",this.attr(e,s,n.foreground,"bgfore")).close()}t.close(),o&&t.close()};return n.nested?e.items&&e.items.length&&s(e.items[0]):Qg(e,s),t.close()},href(t){const e=t.href;let n;if(e){if(n=this._hrefs&&this._hrefs[e])return n;this.sanitizeURL(e).then(t=>{t["xlink:href"]=t.href,t.href=null,(this._hrefs||(this._hrefs={}))[e]=t})}return null},attr(t,e,n,i){const r={},s=(t,e,n,i)=>{r[i||t]=e};return Array.isArray(n)?n.forEach(t=>t(s,e,this)):n(s,e,this),i&&function(t,e,n,i,r){if(null==e)return t;if("bgrect"===i&&!1===n.interactive&&(t["pointer-events"]="none"),"bgfore"===i&&(!1===n.interactive&&(t["pointer-events"]="none"),t.display="none",null!==e.fill))return t;"image"===i&&!1===e.smooth&&(t.style="image-rendering: optimizeSpeed; image-rendering: pixelated;"),"text"===i&&(t["font-family"]=Yy(e),t["font-size"]=qy(e)+"px",t["font-style"]=e.fontStyle,t["font-variant"]=e.fontVariant,t["font-weight"]=e.fontWeight);for(const s in u_){let n=e[s];const i=u_[s];("transparent"!==n||"fill"!==i&&"stroke"!==i)&&null!=n&&(hm(n)&&(n=dm(n,r.gradient,"")),t[i]=n)}}(r,e,t,i,this._defs),r},defs(t){const e=this._defs.gradient,n=this._defs.clipping;if(0!==Object.keys(e).length+Object.keys(n).length){t.open("defs");for(const n in e){const i=e[n],r=i.stops;"radial"===i.gradient?(t.open("pattern",{id:cm+n,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+n+")"}).close(),t.close(),t.open("radialGradient",{id:n,fx:i.x1,fy:i.y1,fr:i.r1,cx:i.x2,cy:i.y2,r:i.r2})):t.open("linearGradient",{id:n,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2});for(let e=0;e<r.length;++e)t.open("stop",{offset:r[e].offset,"stop-color":r[e].color}).close();t.close()}for(const e in n){const i=n[e];t.open("clipPath",{id:e}),i.path?t.open("path",{d:i.path}).close():t.open("rect",{x:0,y:0,width:i.width,height:i.height}).close(),t.close()}t.close()}}});const S_={Canvas:"canvas",PNG:"png",SVG:"svg",None:"none"},F_={};function O_(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(F_[t]=e,this):F_[t]}function M_(t,e,n){const i=[],r=(new ag).union(e),s=t.marktype;return s?T_(t,r,n,i):"group"===s?P_(t,r,n,i):(0,de.vU)("Intersect scene must be mark node or group item.")}function T_(t,e,n,i){if(function(t,e,n){return t.bounds&&e.intersects(t.bounds)&&("group"===t.marktype||!1!==t.interactive&&(!n||n(t)))}(t,e,n)){const r=t.items,s=t.marktype,o=r.length;let a=0;if("group"===s)for(;a<o;++a)P_(r[a],e,n,i);else for(const t=nv[s].isect;a<o;++a){const n=r[a];R_(n,e,t)&&i.push(n)}}return i}function P_(t,e,n,i){n&&n(t.mark)&&R_(t,e,nv.group.isect)&&i.push(t);const r=t.items,s=r&&r.length;if(s){const o=t.x||0,a=t.y||0;e.translate(-o,-a);for(let t=0;t<s;++t)T_(r[t],e,n,i);e.translate(o,a)}return i}function R_(t,e,n){const i=t.bounds;return e.encloses(i)||e.intersects(i)&&n(t,e)}F_.canvas=F_.png={renderer:jv,headless:jv,handler:Iv},F_.svg={renderer:f_,headless:D_,handler:Vv},F_.none={};const B_=new ag;function I_(t){const e=t.clip;if((0,de.mf)(e))e(Mg(B_.clear()));else{if(!e)return;B_.set(0,0,t.group.width,t.group.height)}t.bounds.intersect(B_)}function N_(t,e,n){return t===e||("path"===n?L_(t,e):t instanceof Date&&e instanceof Date?+t==+e:(0,de.hj)(t)&&(0,de.hj)(e)?Math.abs(t-e)<=1e-9:t&&e&&((0,de.Kn)(t)||(0,de.Kn)(e))?function(t,e){var n,i,r=Object.keys(t),s=Object.keys(e);if(r.length!==s.length)return!1;for(r.sort(),s.sort(),i=r.length-1;i>=0;i--)if(r[i]!=s[i])return!1;for(i=r.length-1;i>=0;i--)if(!N_(t[n=r[i]],e[n],n))return!1;return typeof t==typeof e}(t,e):t==e)}function L_(t,e){return N_(_m(t),_m(e))}function $_(){sg(),um=0}const z_="top",j_="left",U_="right",V_="bottom",q_="start",H_="middle",W_="end",G_="group",X_="axis",Y_="title",K_="legend",Z_="row-header",Q_="row-footer",J_="row-title",tb="column-header",eb="column-footer",nb="column-title",ib="none",rb="all",sb="each",ob="flush",ab="column",lb="row";function ub(t){Po.call(this,null,t)}function cb(t,e,n){return e(t.bounds.clear(),t,n)}(0,de.XW)(ub,Po,{transform(t,e){const n=e.dataflow,i=t.mark,r=i.marktype,s=nv[r],o=s.bound;let a,l=i.bounds;if(s.nested)i.items.length&&n.dirty(i.items[0]),l=cb(i,o),i.items.forEach(t=>{t.bounds.clear().union(l)});else if(r===G_||t.modified())switch(e.visit(e.MOD,t=>n.dirty(t)),l.clear(),i.items.forEach(t=>l.union(cb(t,o))),i.role){case X_:case K_:case Y_:e.reflow()}else a=e.changed(e.REM),e.visit(e.ADD,t=>{l.union(cb(t,o))}),e.visit(e.MOD,t=>{a=a||l.alignsWith(t.bounds),n.dirty(t),l.union(cb(t,o))}),a&&(l.clear(),i.items.forEach(t=>l.union(t.bounds)));return I_(i),e.modifies("bounds")}});const hb=":vega_identifier:";function db(t){Po.call(this,0,t)}function fb(t){Po.call(this,null,t)}function pb(t){Po.call(this,null,t)}db.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},(0,de.XW)(db,Po,{transform(t,e){const n=(r=e.dataflow)._signals[hb]||(r._signals[hb]=r.add(0)),i=t.as;var r;let s=n.value;return e.visit(e.ADD,t=>t[i]=t[i]||++s),n.set(this.value=s),e}}),(0,de.XW)(fb,Po,{transform(t,e){let n=this.value;n||(n=e.dataflow.scenegraph().mark(t.markdef,function(t){const e=t.groups,n=t.parent;return e&&1===e.size?e.get(Object.keys(e.object)[0]):e&&n?e.lookup(n):null}(t),t.index),n.group.context=t.context,t.context.group||(t.context.group=n.group),n.source=this.source,n.clip=t.clip,n.interactive=t.interactive,this.value=n);const i=n.marktype===G_?ug:lg;return e.visit(e.ADD,t=>i.call(t,n)),(t.modified("clip")||t.modified("interactive"))&&(n.clip=t.clip,n.interactive=!!t.interactive,n.zdirty=!0,e.reflow()),n.items=e.source,e}});const mb={parity:t=>t.filter((t,e)=>e%2?t.opacity=0:1),greedy:(t,e)=>{let n;return t.filter((t,i)=>i&&gb(n.bounds,t.bounds,e)?t.opacity=0:(n=t,1))}},gb=(t,e,n)=>n>Math.max(e.x1-t.x2,t.x1-e.x2,e.y1-t.y2,t.y1-e.y2),yb=(t,e)=>{for(var n,i=1,r=t.length,s=t[0].bounds;i<r;s=n,++i)if(gb(s,n=t[i].bounds,e))return!0},vb=t=>{const e=t.bounds;return e.width()>1&&e.height()>1},_b=t=>(t.forEach(t=>t.opacity=1),t),bb=(t,e)=>t.reflow(e.modified()).modifies("opacity");function xb(t){Po.call(this,null,t)}(0,de.XW)(pb,Po,{transform(t,e){const n=mb[t.method]||mb.parity,i=t.separation||0;let r,s,o=e.materialize(e.SOURCE).source;if(!o||!o.length)return;if(!t.method)return t.modified("method")&&(_b(o),e=bb(e,t)),e;if(o=o.filter(vb),!o.length)return;if(t.sort&&(o=o.slice().sort(t.sort)),r=_b(o),e=bb(e,t),r.length>=3&&yb(r,i)){do{r=n(r,i)}while(r.length>=3&&yb(r,i));r.length<3&&!(0,de.fj)(o).opacity&&(r.length>1&&((0,de.fj)(r).opacity=0),(0,de.fj)(o).opacity=1)}t.boundScale&&t.boundTolerance>=0&&(s=((t,e,n)=>{var i=t.range(),r=new ag;return e===z_||e===V_?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),t=>r.encloses(t.bounds)})(t.boundScale,t.boundOrient,+t.boundTolerance),o.forEach(t=>{s(t)||(t.opacity=0)}));const a=r[0].mark.bounds.clear();return o.forEach(t=>{t.opacity&&a.union(t.bounds)}),e}}),(0,de.XW)(xb,Po,{transform(t,e){const n=e.dataflow;if(e.visit(e.ALL,t=>n.dirty(t)),e.fields&&e.fields.zindex){const t=e.source&&e.source[0];t&&(t.mark.zdirty=!0)}}});const wb=new ag;function Cb(t,e,n){return t[e]===n?0:(t[e]=n,1)}function Ab(t){var e=t.items[0].orient;return e===j_||e===U_}function Eb(t,e,n,i){var r,s,o=e.items[0],a=o.datum,l=null!=o.translate?o.translate:.5,u=o.orient,c=function(t){let e=+t.grid;return[t.ticks?e++:-1,t.labels?e++:-1,e+ +t.domain]}(a),h=o.range,d=o.offset,f=o.position,p=o.minExtent,m=o.maxExtent,g=a.title&&o.items[c[2]].items[0],y=o.titlePadding,v=o.bounds,_=g&&Gy(g),b=0,x=0;switch(wb.clear().union(v),v.clear(),(r=c[0])>-1&&v.union(o.items[r].bounds),(r=c[1])>-1&&v.union(o.items[r].bounds),u){case z_:b=f||0,x=-d,s=Math.max(p,Math.min(m,-v.y1)),v.add(0,-s).add(h,0),g&&kb(t,g,s,y,_,0,-1,v);break;case j_:b=-d,x=f||0,s=Math.max(p,Math.min(m,-v.x1)),v.add(-s,0).add(0,h),g&&kb(t,g,s,y,_,1,-1,v);break;case U_:b=n+d,x=f||0,s=Math.max(p,Math.min(m,v.x2)),v.add(0,0).add(s,h),g&&kb(t,g,s,y,_,1,1,v);break;case V_:b=f||0,x=i+d,s=Math.max(p,Math.min(m,v.y2)),v.add(0,0).add(h,s),g&&kb(t,g,s,y,0,0,1,v);break;default:b=o.x,x=o.y}return fg(v.translate(b,x),o),Cb(o,"x",b+l)|Cb(o,"y",x+l)&&(o.bounds=wb,t.dirty(o),o.bounds=v,t.dirty(o)),o.mark.bounds.clear().union(v)}function kb(t,e,n,i,r,s,o,a){const l=e.bounds;if(e.auto){const a=o*(n+r+i);let u=0,c=0;t.dirty(e),s?u=(e.x||0)-(e.x=a):c=(e.y||0)-(e.y=a),e.mark.bounds.clear().union(l.translate(-u,-c)),t.dirty(e)}a.union(l)}const Db=(t,e)=>Math.floor(Math.min(t,e)),Sb=(t,e)=>Math.ceil(Math.max(t,e));function Fb(t){return(new ag).set(0,0,t.width||0,t.height||0)}function Ob(t){const e=t.bounds.clone();return e.empty()?e.set(0,0,0,0):e.translate(-(t.x||0),-(t.y||0))}function Mb(t,e,n){const i=(0,de.Kn)(t)?t[e]:t;return null!=i?i:void 0!==n?n:0}function Tb(t){return t<0?Math.ceil(-t):0}function Pb(t,e,n){var i,r,s,o,a,l,u,c,h,d,f,p=!n.nodirty,m=n.bounds===ob?Fb:Ob,g=wb.set(0,0,0,0),y=Mb(n.align,ab),v=Mb(n.align,lb),_=Mb(n.padding,ab),b=Mb(n.padding,lb),x=n.columns||e.length,w=x<=0?1:Math.ceil(e.length/x),C=e.length,A=Array(C),E=Array(x),k=0,D=Array(C),S=Array(w),F=0,O=Array(C),M=Array(C),T=Array(C);for(r=0;r<x;++r)E[r]=0;for(r=0;r<w;++r)S[r]=0;for(r=0;r<C;++r)a=T[r]=m(l=e[r]),l.x=l.x||0,O[r]=0,l.y=l.y||0,M[r]=0,s=r%x,o=~~(r/x),k=Math.max(k,u=Math.ceil(a.x2)),F=Math.max(F,c=Math.ceil(a.y2)),E[s]=Math.max(E[s],u),S[o]=Math.max(S[o],c),A[r]=_+Tb(a.x1),D[r]=b+Tb(a.y1),p&&t.dirty(e[r]);for(r=0;r<C;++r)r%x==0&&(A[r]=0),r<x&&(D[r]=0);if(y===sb)for(s=1;s<x;++s){for(f=0,r=s;r<C;r+=x)f<A[r]&&(f=A[r]);for(r=s;r<C;r+=x)A[r]=f+E[s-1]}else if(y===rb){for(f=0,r=0;r<C;++r)r%x&&f<A[r]&&(f=A[r]);for(r=0;r<C;++r)r%x&&(A[r]=f+k)}else for(y=!1,s=1;s<x;++s)for(r=s;r<C;r+=x)A[r]+=E[s-1];if(v===sb)for(o=1;o<w;++o){for(f=0,i=(r=o*x)+x;r<i;++r)f<D[r]&&(f=D[r]);for(r=o*x;r<i;++r)D[r]=f+S[o-1]}else if(v===rb){for(f=0,r=x;r<C;++r)f<D[r]&&(f=D[r]);for(r=x;r<C;++r)D[r]=f+F}else for(v=!1,o=1;o<w;++o)for(i=(r=o*x)+x;r<i;++r)D[r]+=S[o-1];for(h=0,r=0;r<C;++r)O[r]+=(h=A[r]+(r%x?h:0))-e[r].x;for(s=0;s<x;++s)for(d=0,r=s;r<C;r+=x)M[r]+=(d+=D[r])-e[r].y;if(y&&Mb(n.center,ab)&&w>1)for(r=0;r<C;++r)(h=(a=y===rb?k:E[r%x])-T[r].x2-e[r].x-O[r])>0&&(O[r]+=h/2);if(v&&Mb(n.center,lb)&&1!==x)for(r=0;r<C;++r)(d=(a=v===rb?F:S[~~(r/x)])-T[r].y2-e[r].y-M[r])>0&&(M[r]+=d/2);for(r=0;r<C;++r)g.union(T[r].translate(O[r],M[r]));switch(h=Mb(n.anchor,"x"),d=Mb(n.anchor,"y"),Mb(n.anchor,ab)){case W_:h-=g.width();break;case H_:h-=g.width()/2}switch(Mb(n.anchor,lb)){case W_:d-=g.height();break;case H_:d-=g.height()/2}for(h=Math.round(h),d=Math.round(d),g.clear(),r=0;r<C;++r)e[r].mark.bounds.clear();for(r=0;r<C;++r)(l=e[r]).x+=O[r]+=h,l.y+=M[r]+=d,g.union(l.mark.bounds.union(l.bounds.translate(O[r],M[r]))),p&&t.dirty(l);return g}function Rb(t,e){return"x1"===e?t.x||0:"y1"===e?t.y||0:"x2"===e?(t.x||0)+(t.width||0):"y2"===e?(t.y||0)+(t.height||0):void 0}function Bb(t,e){return t.bounds[e]}function Ib(t,e,n,i,r,s,o,a,l,u,c,h,d,f){var p,m,g,y,v,_,b,x,w,C=n.length,A=0,E=0;if(!C)return A;for(p=c;p<C;p+=h)n[p]&&(A=o(A,l(n[p],u)));if(!e.length)return A;for(e.length>r&&(t.warn("Grid headers exceed limit: "+r),e=e.slice(0,r)),A+=s,m=0,y=e.length;m<y;++m)t.dirty(e[m]),e[m].mark.bounds.clear();for(p=c,m=0,y=e.length;m<y;++m,p+=h){for(v=(_=e[m]).mark.bounds,g=p;g>=0&&null==(b=n[g]);g-=d);a?(x=null==f?b.x:Math.round(b.bounds.x1+f*b.bounds.width()),w=A):(x=A,w=null==f?b.y:Math.round(b.bounds.y1+f*b.bounds.height())),v.union(_.bounds.translate(x-(_.x||0),w-(_.y||0))),_.x=x,_.y=w,t.dirty(_),E=o(E,v[u])}return E}function Nb(t,e,n,i,r,s){if(e){t.dirty(e);var o=n,a=n;i?o=Math.round(r.x1+s*r.width()):a=Math.round(r.y1+s*r.height()),e.bounds.translate(o-(e.x||0),a-(e.y||0)),e.mark.bounds.clear().union(e.bounds),e.x=o,e.y=a,t.dirty(e)}}function Lb(t,e,n,i,r,s,o){const a=function(t,e){const n=t[e]||{};return(e,i)=>null!=n[e]?n[e]:null!=t[e]?t[e]:i}(n,e),l=function(t,e){let n=-1/0;return t.forEach(t=>{null!=t.offset&&(n=Math.max(n,t.offset))}),n>-1/0?n:e}(t,a("offset",0)),u=a("anchor",q_),c=u===W_?1:u===H_?.5:0,h={align:sb,bounds:a("bounds",ob),columns:"vertical"===a("direction")?1:t.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(e){case j_:h.anchor={x:Math.floor(i.x1)-l,column:W_,y:c*(o||i.height()+2*i.y1),row:u};break;case U_:h.anchor={x:Math.ceil(i.x2)+l,y:c*(o||i.height()+2*i.y1),row:u};break;case z_:h.anchor={y:Math.floor(r.y1)-l,row:W_,x:c*(s||r.width()+2*r.x1),column:u};break;case V_:h.anchor={y:Math.ceil(r.y2)+l,x:c*(s||r.width()+2*r.x1),column:u};break;case"top-left":h.anchor={x:l,y:l};break;case"top-right":h.anchor={x:s-l,y:l,column:W_};break;case"bottom-left":h.anchor={x:l,y:o-l,row:W_};break;case"bottom-right":h.anchor={x:s-l,y:o-l,column:W_,row:W_}}return h}function $b(t,e){var n,i,r=e.items[0],s=r.datum,o=r.orient,a=r.bounds,l=r.x,u=r.y;return r._bounds?r._bounds.clear().union(a):r._bounds=a.clone(),a.clear(),function(t,e,n){var i=e.padding,r=i-n.x,s=i-n.y;if(e.datum.title){var o=e.items[1].items[0],a=o.anchor,l=e.titlePadding||0,u=i-o.x,c=i-o.y;switch(o.orient){case j_:r+=Math.ceil(o.bounds.width())+l;break;case U_:case V_:break;default:s+=o.bounds.height()+l}switch((r||s)&&jb(t,n,r,s),o.orient){case j_:c+=zb(e,n,o,a,1,1);break;case U_:u+=zb(e,n,o,W_,0,0)+l,c+=zb(e,n,o,a,1,1);break;case V_:u+=zb(e,n,o,a,0,0),c+=zb(e,n,o,W_,-1,0,1)+l;break;default:u+=zb(e,n,o,a,0,0)}(u||c)&&jb(t,o,u,c),(u=Math.round(o.bounds.x1-i))<0&&(jb(t,n,-u,0),jb(t,o,-u,0))}else(r||s)&&jb(t,n,r,s)}(t,r,r.items[0].items[0]),a=function(t,e){return t.items.forEach(t=>e.union(t.bounds)),e.x1=t.padding,e.y1=t.padding,e}(r,a),n=2*r.padding,i=2*r.padding,a.empty()||(n=Math.ceil(a.width()+n),i=Math.ceil(a.height()+i)),"symbol"===s.type&&function(t){const e=t.reduce((t,e)=>(t[e.column]=Math.max(e.bounds.x2-e.x,t[e.column]||0),t),{});t.forEach(t=>{t.width=e[t.column],t.height=t.bounds.y2-t.y})}(r.items[0].items[0].items[0].items),o!==ib&&(r.x=l=0,r.y=u=0),r.width=n,r.height=i,fg(a.set(l,u,l+n,u+i),r),r.mark.bounds.clear().union(a),r}function zb(t,e,n,i,r,s,o){const a=n.datum.vgrad,l=("symbol"===t.datum.type||!s&&a||o?e:e.items[0]).bounds[r?"y2":"x2"]-t.padding,u=a&&s?l:0,c=a&&s?0:l,h=r<=0?0:Gy(n);return Math.round(i===q_?u:i===W_?c-h:.5*(l-h))}function jb(t,e,n,i){e.x+=n,e.y+=i,e.bounds.translate(n,i),e.mark.bounds.translate(n,i),t.dirty(e)}function Ub(t){Po.call(this,null,t)}function Vb(t,e){let n=0;if(void 0===e)for(let i of t)(i=+i)&&(n+=i);else{let i=-1;for(let r of t)(r=+e(r,++i,t))&&(n+=r)}return n}function qb(t){Po.call(this,null,t)}function Hb(t){Po.call(this,null,t)}function Wb(){return no({})}function Gb(t){Po.call(this,null,t)}function Xb(t){Po.call(this,[],t)}(0,de.XW)(Ub,Po,{transform(t,e){const n=e.dataflow;return t.mark.items.forEach(e=>{t.layout&&function(t,e,n){var i,r,s,o,a,l,u,c=function(t){var e,n,i=t.items,r=i.length,s=0;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;s<r;++s)if(n=(e=i[s]).items,e.marktype===G_)switch(e.role){case X_:case K_:case Y_:break;case Z_:o.rowheaders.push(...n);break;case Q_:o.rowfooters.push(...n);break;case tb:o.colheaders.push(...n);break;case eb:o.colfooters.push(...n);break;case J_:o.rowtitle=n[0];break;case nb:o.coltitle=n[0];break;default:o.marks.push(...n)}return o}(e),h=c.marks,d=n.bounds===ob?Rb:Bb,f=n.offset,p=n.columns||h.length,m=p<=0?1:Math.ceil(h.length/p),g=m*p;const y=Pb(t,h,n);y.empty()&&y.set(0,0,0,0),c.rowheaders&&(l=Mb(n.headerBand,lb,null),i=Ib(t,c.rowheaders,h,0,m,-Mb(f,"rowHeader"),Db,0,d,"x1",0,p,1,l)),c.colheaders&&(l=Mb(n.headerBand,ab,null),r=Ib(t,c.colheaders,h,0,p,-Mb(f,"columnHeader"),Db,1,d,"y1",0,1,p,l)),c.rowfooters&&(l=Mb(n.footerBand,lb,null),s=Ib(t,c.rowfooters,h,0,m,Mb(f,"rowFooter"),Sb,0,d,"x2",p-1,p,1,l)),c.colfooters&&(l=Mb(n.footerBand,ab,null),o=Ib(t,c.colfooters,h,0,p,Mb(f,"columnFooter"),Sb,1,d,"y2",g-p,1,p,l)),c.rowtitle&&(a=Mb(n.titleAnchor,lb),u=Mb(f,"rowTitle"),u=a===W_?s+u:i-u,l=Mb(n.titleBand,lb,.5),Nb(t,c.rowtitle,u,0,y,l)),c.coltitle&&(a=Mb(n.titleAnchor,ab),u=Mb(f,"columnTitle"),u=a===W_?o+u:r-u,l=Mb(n.titleBand,ab,.5),Nb(t,c.coltitle,u,1,y,l))}(n,e,t.layout),function(t,e,n){var i,r,s,o,a,l=e.items,u=Math.max(0,e.width||0),c=Math.max(0,e.height||0),h=(new ag).set(0,0,u,c),d=h.clone(),f=h.clone(),p=[];for(o=0,a=l.length;o<a;++o)switch((r=l[o]).role){case X_:(Ab(r)?d:f).union(Eb(t,r,u,c));break;case Y_:i=r;break;case K_:p.push($b(t,r));break;case"frame":case"scope":case Z_:case Q_:case J_:case tb:case eb:case nb:d.union(r.bounds),f.union(r.bounds);break;default:h.union(r.bounds)}if(p.length){const e={};p.forEach(t=>{(s=t.orient||U_)!==ib&&(e[s]||(e[s]=[])).push(t)});for(const i in e){const r=e[i];Pb(t,r,Lb(r,i,n.legends,d,f,u,c))}p.forEach(e=>{const i=e.bounds;if(i.equals(e._bounds)||(e.bounds=e._bounds,t.dirty(e),e.bounds=i,t.dirty(e)),n.autosize&&"fit"===n.autosize.type)switch(e.orient){case j_:case U_:h.add(i.x1,0).add(i.x2,0);break;case z_:case V_:h.add(0,i.y1).add(0,i.y2)}else h.union(i)})}h.union(d).union(f),i&&h.union(function(t,e,n,i,r){var s,o=e.items[0],a=o.orient,l=o.anchor,u=o.offset,c=o.padding,h=o.items[0].items[0],d=o.items[1]&&o.items[1].items[0],f=a===j_||a===U_?i:n,p=0,m=0,g=0,y=0,v=0;if(o.frame!==G_?a===j_?(p=r.y2,f=r.y1):a===U_?(p=r.y1,f=r.y2):(p=r.x1,f=r.x2):a===j_&&(p=i,f=0),s=l===q_?p:l===W_?f:(p+f)/2,d&&d.text){switch(a){case z_:case V_:v=h.bounds.height()+c;break;case j_:y=h.bounds.width()+c;break;case U_:y=-h.bounds.width()-c}wb.clear().union(d.bounds),wb.translate(y-(d.x||0),v-(d.y||0)),Cb(d,"x",y)|Cb(d,"y",v)&&(t.dirty(d),d.bounds.clear().union(wb),d.mark.bounds.clear().union(wb),t.dirty(d)),wb.clear().union(d.bounds)}else wb.clear();switch(wb.union(h.bounds),a){case z_:m=s,g=r.y1-wb.height()-u;break;case j_:m=r.x1-wb.width()-u,g=s;break;case U_:m=r.x2+wb.width()+u,g=s;break;case V_:m=s,g=r.y2+u;break;default:m=o.x,g=o.y}return Cb(o,"x",m)|Cb(o,"y",g)&&(wb.translate(m,g),t.dirty(o),o.bounds.clear().union(wb),e.bounds.clear().union(wb),t.dirty(o)),o.bounds}(t,i,u,c,h)),e.clip&&h.set(0,0,e.width||0,e.height||0),function(t,e,n,i){const r=i.autosize||{},s=r.type;if(t._autosize<1||!s)return;let o=t._width,a=t._height,l=Math.max(0,e.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,e.height||0),h=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-l)),f=Math.max(0,Math.ceil(n.y2-c));if("padding"===r.contains){const e=t.padding();o-=e.left+e.right,a-=e.top+e.bottom}s===ib?(u=0,h=0,l=o,c=a):"fit"===s?(l=Math.max(0,o-u-d),c=Math.max(0,a-h-f)):"fit-x"===s?(l=Math.max(0,o-u-d),a=c+h+f):"fit-y"===s?(o=l+u+d,c=Math.max(0,a-h-f)):"pad"===s&&(o=l+u+d,a=c+h+f),t._resizeView(o,a,l,c,[u,h],r.resize)}(t,e,h,n)}(n,e,t)}),function(t){return t&&"legend-entry"!==t.mark.role}(t.mark.group)?e.reflow():e}}),(0,de.XW)(qb,Po,{transform(t,e){if(this.value&&!t.modified())return e.StopPropagation;var n=e.dataflow.locale(),i=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=this.value,s=t.scale,o=Xp(s,null==t.count?t.values?t.values.length:10:t.count,t.minstep),a=t.format||Zp(n,s,o,t.formatSpecifier,t.formatType,!!t.values),l=t.values?Yp(s,t.values,o):Kp(s,o);return r&&(i.rem=r),r=l.map((t,e)=>no({index:e/(l.length-1||1),value:t,label:a(t)})),t.extra&&r.length&&r.push(no({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}}),(0,de.XW)(Hb,Po,{transform(t,e){var n=e.dataflow,i=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=t.item||Wb,s=t.key||to,o=this.value;return(0,de.kJ)(i.encode)&&(i.encode=null),o&&(t.modified("key")||e.modified(s))&&(0,de.vU)("DataJoin does not support modified key function or fields."),o||(e=e.addAll(),this.value=o=function(t){const e=(0,de.Xr)().test(t=>t.exit);return e.lookup=n=>e.get(t(n)),e}(s)),e.visit(e.ADD,t=>{const e=s(t);let n=o.get(e);n?n.exit?(o.empty--,i.add.push(n)):i.mod.push(n):(n=r(t),o.set(e,n),i.add.push(n)),n.datum=t,n.exit=!1}),e.visit(e.MOD,t=>{const e=s(t),n=o.get(e);n&&(n.datum=t,i.mod.push(n))}),e.visit(e.REM,t=>{const e=s(t),n=o.get(e);t!==n.datum||n.exit||(i.rem.push(n),n.exit=!0,++o.empty)}),e.changed(e.ADD_MOD)&&i.modifies("datum"),(e.clean()||t.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),i}}),(0,de.XW)(Gb,Po,{transform(t,e){var n=e.fork(e.ADD_REM),i=t.mod||!1,r=t.encoders,s=e.encode;if((0,de.kJ)(s)){if(!n.changed()&&!s.every(t=>r[t]))return e.StopPropagation;s=s[0],n.encode=null}var o="enter"===s,a=r.update||de.k,l=r.enter||de.k,u=r.exit||de.k,c=(s&&!o?r[s]:a)||de.k;if(e.changed(e.ADD)&&(e.visit(e.ADD,e=>{l(e,t),a(e,t)}),n.modifies(l.output),n.modifies(a.output),c!==de.k&&c!==a&&(e.visit(e.ADD,e=>{c(e,t)}),n.modifies(c.output))),e.changed(e.REM)&&u!==de.k&&(e.visit(e.REM,e=>{u(e,t)}),n.modifies(u.output)),o||c!==de.k){const r=e.MOD|(t.modified()?e.REFLOW:0);o?(e.visit(r,e=>{const r=l(e,t)||i;(c(e,t)||r)&&n.mod.push(e)}),n.mod.length&&n.modifies(l.output)):e.visit(r,e=>{(c(e,t)||i)&&n.mod.push(e)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:e.StopPropagation}}),(0,de.XW)(Xb,Po,{transform(t,e){if(null!=this.value&&!t.modified())return e.StopPropagation;var n,i,r,s,o,a=e.dataflow.locale(),l=e.fork(e.NO_SOURCE|e.NO_FIELDS),u=this.value,c=t.type||qp,h=t.scale,d=+t.limit,f=Xp(h,null==t.count?5:t.count,t.minstep),p=t.format||nm(a,h,f,c,t.formatSpecifier,t.formatType,!!t.values||c===qp),m=t.values||em(h,f);return u&&(l.rem=u),c===qp?(d&&m.length>d?(e.dataflow.warn("Symbol legend count exceeds limit, filtering items."),u=m.slice(0,d-1),o=!0):u=m,(0,de.mf)(r=t.size)?(t.values||0!==h(u[0])||(u=u.slice(1)),s=u.reduce((e,n)=>Math.max(e,r(n,t)),0)):r=(0,de.a9)(s=r||8),u=u.map((e,n)=>no({index:n,label:p(e,n,u),value:e,offset:s,size:r(e,t)})),o&&(o=m[u.length],u.push(no({index:u.length,label:"\u2026".concat(m.length-u.length," entries"),value:o,offset:s,size:r(o,t)})))):"gradient"===c?(n=h.domain(),i=Lp(h,n[0],(0,de.fj)(n)),m.length<3&&!t.values&&n[0]!==(0,de.fj)(n)&&(m=[n[0],(0,de.fj)(n)]),u=m.map((t,e)=>no({index:e,label:p(t,e,m),value:t,perc:i(t)}))):(r=m.length-1,i=function(t){const e=t.domain(),n=e.length-1;let i=+e[0],r=+(0,de.fj)(e),s=r-i;if(t.type===lp){const t=n?s/n:.1;i-=t,r+=t,s=r-i}return t=>(t-i)/s}(h),u=m.map((t,e)=>no({index:e,label:p(t,e,m),value:t,perc:e?i(t):0,perc2:e===r?1:i(m[e+1])}))),l.source=u,l.add=u,this.value=u,l}});const Yb=t=>t.source.x,Kb=t=>t.source.y,Zb=t=>t.target.x,Qb=t=>t.target.y;function Jb(t){Po.call(this,{},t)}Jb.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},(0,de.XW)(Jb,Po,{transform(t,e){var n=t.sourceX||Yb,i=t.sourceY||Kb,r=t.targetX||Zb,s=t.targetY||Qb,o=t.as||"path",a=t.shape||"line",l=ix.get(a+"-"+(t.orient||"vertical"))||ix.get(a);return l||(0,de.vU)("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),e.visit(e.SOURCE,t=>{t[o]=l(n(t),i(t),r(t),s(t))}),e.reflow(t.modified()).modifies(o)}});const tx=(t,e,n,i)=>"M"+t+","+e+"L"+n+","+i,ex=(t,e,n,i)=>{var r=n-t,s=i-e,o=Math.sqrt(r*r+s*s)/2;return"M"+t+","+e+"A"+o+","+o+" "+180*Math.atan2(s,r)/Math.PI+" 0 1 "+n+","+i},nx=(t,e,n,i)=>{const r=n-t,s=i-e,o=.2*(r+s),a=.2*(s-r);return"M"+t+","+e+"C"+(t+o)+","+(e+a)+" "+(n+a)+","+(i-o)+" "+n+","+i},ix=(0,de.Xr)({line:tx,"line-radial":(t,e,n,i)=>tx(e*Math.cos(t),e*Math.sin(t),i*Math.cos(n),i*Math.sin(n)),arc:ex,"arc-radial":(t,e,n,i)=>ex(e*Math.cos(t),e*Math.sin(t),i*Math.cos(n),i*Math.sin(n)),curve:nx,"curve-radial":(t,e,n,i)=>nx(e*Math.cos(t),e*Math.sin(t),i*Math.cos(n),i*Math.sin(n)),"orthogonal-horizontal":(t,e,n,i)=>"M"+t+","+e+"V"+i+"H"+n,"orthogonal-vertical":(t,e,n,i)=>"M"+t+","+e+"H"+n+"V"+i,"orthogonal-radial":(t,e,n,i)=>{const r=Math.cos(t),s=Math.sin(t),o=Math.cos(n),a=Math.sin(n);return"M"+e*r+","+e*s+"A"+e+","+e+" 0 0,"+((Math.abs(n-t)>Math.PI?n<=t:n>t)?1:0)+" "+e*o+","+e*a+"L"+i*o+","+i*a},"diagonal-horizontal":(t,e,n,i)=>{const r=(t+n)/2;return"M"+t+","+e+"C"+r+","+e+" "+r+","+i+" "+n+","+i},"diagonal-vertical":(t,e,n,i)=>{const r=(e+i)/2;return"M"+t+","+e+"C"+t+","+r+" "+n+","+r+" "+n+","+i},"diagonal-radial":(t,e,n,i)=>{const r=Math.cos(t),s=Math.sin(t),o=Math.cos(n),a=Math.sin(n),l=(e+i)/2;return"M"+e*r+","+e*s+"C"+l*r+","+l*s+" "+l*o+","+l*a+" "+i*o+","+i*a}});function rx(t){Po.call(this,null,t)}function sx(t){return Sp(t)&&t!==rp}rx.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},(0,de.XW)(rx,Po,{transform(t,e){var n,i,r,s=t.as||["startAngle","endAngle"],o=s[0],a=s[1],l=t.startAngle||0,u=null!=t.endAngle?t.endAngle:2*Math.PI,c=e.source,h=c.map(t.field||de.kX),d=h.length,f=l,p=(u-l)/Vb(h),m=pl(d);for(t.sort&&m.sort((t,e)=>h[t]-h[e]),n=0;n<d;++n)r=h[m[n]],(i=c[m[n]])[o]=f,i[a]=f+=r*p;return this.value=h,e.reflow(t.modified()).modifies(s)}});const ox=(0,de.Rg)(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function ax(t){Po.call(this,null,t),this.modified(!0)}function lx(t,e,n){return Mp(t)&&Math.abs(e.reduce((t,e)=>t+(e<0?-1:e>0?1:0),0))!==e.length&&n.warn("Log scale domain includes zero: "+(0,de.m8)(e)),e}function ux(t,e,n){return(0,de.mf)(t)&&(e||n)?Bp(t,cx(e||[0,1],n)):t}function cx(t,e){return e?t.slice().reverse():t}function hx(t){Po.call(this,null,t)}(0,de.XW)(ax,Po,{transform(t,e){var n=e.dataflow,i=this.value,r=function(t){var e,n=t.type,i="";return n===rp?"sequential-linear":(function(t){const e=t.type;return Sp(e)&&e!==np&&e!==ip&&(t.scheme||t.range&&t.range.length&&t.range.every(de.HD))}(t)&&(i=2===(e=t.rawDomain?t.rawDomain.length:t.domain?t.domain.length+ +(null!=t.domainMid):0)?"sequential-":3===e?"diverging-":""),(i+n||Zf).toLowerCase())}(t);for(r in i&&r===i.type||(this.value=i=Ep(r)()),t)if(!ox[r]){if("padding"===r&&sx(i.type))continue;(0,de.mf)(i[r])?i[r](t[r]):n.warn("Unsupported scale property: "+r)}return function(t,e,n){var i=t.type,r=e.round||!1,s=e.range;if(null!=e.rangeStep)s=function(t,e,n){return t!==hp&&t!==cp&&(0,de.vU)("Only band and point scales support rangeStep."),[0,e.rangeStep*Kf(n,t===cp?1:(null!=e.paddingInner?e.paddingInner:e.padding)||0,(null!=e.paddingOuter?e.paddingOuter:e.padding)||0)]}(i,e,n);else if(e.scheme&&(s=function(t,e,n){var i,r=e.schemeExtent;return(0,de.kJ)(e.scheme)?i=Ip(e.scheme,e.interpolate,e.interpolateGamma):(i=Vp(e.scheme.toLowerCase()))||(0,de.vU)("Unrecognized scheme name: ".concat(e.scheme)),n=t===lp?n+1:t===dp?n-1:t===op||t===ap?+e.schemeCount||5:n,Tp(t)?ux(i,r,e.reverse):(0,de.mf)(i)?Np(ux(i,r),n):t===up?i:i.slice(0,n)}(i,e,n),(0,de.mf)(s))){if(t.interpolator)return t.interpolator(s);(0,de.vU)("Scale type ".concat(i," does not support interpolating color schemes."))}if(s&&Tp(i))return t.interpolator(Ip(cx(s,e.reverse),e.interpolate,e.interpolateGamma));s&&e.interpolate&&t.interpolate?t.interpolate($p(e.interpolate,e.interpolateGamma)):(0,de.mf)(t.round)?t.round(r):(0,de.mf)(t.rangeRound)&&t.interpolate(r?cd:ud),s&&t.range(cx(s,e.reverse))}(i,t,function(t,e,n){let i=e.bins;if(i&&!(0,de.kJ)(i)){const e=t.domain(),n=e[0],r=(0,de.fj)(e),s=i.step;let o=null==i.start?n:i.start,a=null==i.stop?r:i.stop;s||(0,de.vU)("Scale bins parameter missing step property."),o<n&&(o=s*Math.ceil(n/s)),a>r&&(a=s*Math.floor(r/s)),i=pl(o,a+s/2,s)}return i?t.bins=i:t.bins&&delete t.bins,t.type===dp&&(i?e.domain||e.domainRaw||(t.domain(i),n=i.length):t.bins=t.domain()),n}(i,t,function(t,e,n){const i=function(t,e,n){return e?(t.domain(lx(t.type,e,n)),e.length):-1}(t,e.domainRaw,n);if(i>-1)return i;var r,s,o=e.domain,a=t.type,l=e.zero||void 0===e.zero&&function(t){const e=t.type;return!t.bins&&(e===Zf||e===Jf||e===tp)}(t);if(!o)return 0;if(sx(a)&&e.padding&&o[0]!==(0,de.fj)(o)&&(o=function(t,e,n,i,r,s){var o=Math.abs((0,de.fj)(n)-n[0]),a=o/(o-2*i),l=t===Qf?(0,de.dH)(e,null,a):t===tp?(0,de.mK)(e,null,a,.5):t===Jf?(0,de.mK)(e,null,a,r||1):t===ep?(0,de.bV)(e,null,a,s||1):(0,de.ay)(e,null,a);return(e=e.slice())[0]=l[0],e[e.length-1]=l[1],e}(a,o,e.range,e.padding,e.exponent,e.constant)),(l||null!=e.domainMin||null!=e.domainMax||null!=e.domainMid)&&(r=(o=o.slice()).length-1||1,l&&(o[0]>0&&(o[0]=0),o[r]<0&&(o[r]=0)),null!=e.domainMin&&(o[0]=e.domainMin),null!=e.domainMax&&(o[r]=e.domainMax),null!=e.domainMid)){const t=(s=e.domainMid)>o[r]?r+1:s<o[0]?0:r;t!==r&&n.warn("Scale domainMid exceeds domain min or max.",s),o.splice(t,0,s)}return t.domain(lx(a,o,n)),a===up&&t.unknown(e.domainImplicit?ah:void 0),e.nice&&t.nice&&t.nice(!0!==e.nice&&Xp(t,e.nice)||null),o.length}(i,t,n))),e.fork(e.NO_SOURCE|e.NO_FIELDS)}}),(0,de.XW)(hx,Po,{transform(t,e){const n=t.modified("sort")||e.changed(e.ADD)||e.modified(t.sort.fields)||e.modified("datum");return n&&e.source.sort(oo(t.sort)),this.modified(n),e}});const dx="zero",fx="center",px="normalize",mx=["y0","y1"];function gx(t){Po.call(this,null,t)}function yx(t,e,n,i,r){for(var s,o=(e-t.sum)/2,a=t.length,l=0;l<a;++l)(s=t[l])[i]=o,s[r]=o+=Math.abs(n(s))}function vx(t,e,n,i,r){for(var s,o=1/t.sum,a=0,l=t.length,u=0,c=0;u<l;++u)(s=t[u])[i]=a,s[r]=a=o*(c+=Math.abs(n(s)))}function _x(t,e,n,i,r){for(var s,o,a=0,l=0,u=t.length,c=0;c<u;++c)(s=+n(o=t[c]))<0?(o[i]=l,o[r]=l+=s):(o[i]=a,o[r]=a+=s)}gx.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:dx,values:[dx,fx,px]},{name:"as",type:"string",array:!0,length:2,default:mx}]},(0,de.XW)(gx,Po,{transform(t,e){var n,i,r,s,o=t.as||mx,a=o[0],l=o[1],u=oo(t.sort),c=t.field||de.kX,h=t.offset===fx?yx:t.offset===px?vx:_x;for(n=function(t,e,n,i){var r,s,o,a,l,u,c,h,d,f=[],p=t=>t(l);if(null==e)f.push(t.slice());else for(r={},s=0,o=t.length;s<o;++s)l=t[s],(c=r[u=e.map(p)])||(r[u]=c=[],f.push(c)),c.push(l);for(u=0,d=0,a=f.length;u<a;++u){for(s=0,h=0,o=(c=f[u]).length;s<o;++s)h+=Math.abs(i(c[s]));c.sum=h,h>d&&(d=h),n&&c.sort(n)}return f.max=d,f}(e.source,t.groupby,u,c),i=0,r=n.length,s=n.max;i<r;++i)h(n[i],s,c,a,l);return e.reflow(t.modified()).modifies(o)}});const bx=t=>t;function xx(t,e){t&&Cx.hasOwnProperty(t.type)&&Cx[t.type](t,e)}var wx={Feature:function(t,e){xx(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)xx(n[i].geometry,e)}},Cx={Sphere:function(t,e){e.sphere()},Point:function(t,e){e.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)e.point((t=n[i])[0],t[1],t[2])},LineString:function(t,e){Ax(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Ax(n[i],e,0)},Polygon:function(t,e){Ex(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)Ex(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)xx(n[i],e)}};function Ax(t,e,n){var i,r=-1,s=t.length-n;for(e.lineStart();++r<s;)e.point((i=t[r])[0],i[1],i[2]);e.lineEnd()}function Ex(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Ax(t[n],e,1);e.polygonEnd()}function kx(t,e){t&&wx.hasOwnProperty(t.type)?wx[t.type](t,e):xx(t,e)}class Dx{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let i=0;i<this._n&&i<32;i++){const r=e[i],s=t+r,o=Math.abs(t)<Math.abs(r)?t-(s-r):r-(s-t);o&&(e[n++]=o),t=s}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,i,r=this._n,s=0;if(r>0){for(s=t[--r];r>0&&(e=s,n=t[--r],s=e+n,i=n-(s-e),!i););r>0&&(i<0&&t[r-1]<0||i>0&&t[r-1]>0)&&(n=2*i,e=s+n,n==e-s&&(s=e))}return s}}var Sx=1e-6,Fx=1e-12,Ox=Math.PI,Mx=Ox/2,Tx=Ox/4,Px=2*Ox,Rx=180/Ox,Bx=Ox/180,Ix=Math.abs,Nx=Math.atan,Lx=Math.atan2,$x=Math.cos,zx=Math.ceil,jx=Math.exp,Ux=(Math,Math.hypot),Vx=Math.log,qx=Math.pow,Hx=Math.sin,Wx=Math.sign||function(t){return t>0?1:t<0?-1:0},Gx=Math.sqrt,Xx=Math.tan;function Yx(t){return t>1?0:t<-1?Ox:Math.acos(t)}function Kx(t){return t>1?Mx:t<-1?-Mx:Math.asin(t)}function Zx(){}var Qx,Jx,tw,ew,nw=new Dx,iw=new Dx,rw={point:Zx,lineStart:Zx,lineEnd:Zx,polygonStart:function(){rw.lineStart=sw,rw.lineEnd=lw},polygonEnd:function(){rw.lineStart=rw.lineEnd=rw.point=Zx,nw.add(Ix(iw)),iw=new Dx},result:function(){var t=nw/2;return nw=new Dx,t}};function sw(){rw.point=ow}function ow(t,e){rw.point=aw,Qx=tw=t,Jx=ew=e}function aw(t,e){iw.add(ew*t-tw*e),tw=t,ew=e}function lw(){aw(Qx,Jx)}const uw=rw;var cw=1/0,hw=cw,dw=-cw,fw=dw;const pw={point:function(t,e){t<cw&&(cw=t),t>dw&&(dw=t),e<hw&&(hw=e),e>fw&&(fw=e)},lineStart:Zx,lineEnd:Zx,polygonStart:Zx,polygonEnd:Zx,result:function(){var t=[[cw,hw],[dw,fw]];return dw=fw=-(hw=cw=1/0),t}};var mw,gw,yw,vw,_w=0,bw=0,xw=0,ww=0,Cw=0,Aw=0,Ew=0,kw=0,Dw=0,Sw={point:Fw,lineStart:Ow,lineEnd:Pw,polygonStart:function(){Sw.lineStart=Rw,Sw.lineEnd=Bw},polygonEnd:function(){Sw.point=Fw,Sw.lineStart=Ow,Sw.lineEnd=Pw},result:function(){var t=Dw?[Ew/Dw,kw/Dw]:Aw?[ww/Aw,Cw/Aw]:xw?[_w/xw,bw/xw]:[NaN,NaN];return _w=bw=xw=ww=Cw=Aw=Ew=kw=Dw=0,t}};function Fw(t,e){_w+=t,bw+=e,++xw}function Ow(){Sw.point=Mw}function Mw(t,e){Sw.point=Tw,Fw(yw=t,vw=e)}function Tw(t,e){var n=t-yw,i=e-vw,r=Gx(n*n+i*i);ww+=r*(yw+t)/2,Cw+=r*(vw+e)/2,Aw+=r,Fw(yw=t,vw=e)}function Pw(){Sw.point=Fw}function Rw(){Sw.point=Iw}function Bw(){Nw(mw,gw)}function Iw(t,e){Sw.point=Nw,Fw(mw=yw=t,gw=vw=e)}function Nw(t,e){var n=t-yw,i=e-vw,r=Gx(n*n+i*i);ww+=r*(yw+t)/2,Cw+=r*(vw+e)/2,Aw+=r,Ew+=(r=vw*t-yw*e)*(yw+t),kw+=r*(vw+e),Dw+=3*r,Fw(yw=t,vw=e)}const Lw=Sw;function $w(t){this._context=t}$w.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,Px)}},result:Zx};var zw,jw,Uw,Vw,qw,Hw=new Dx,Ww={point:Zx,lineStart:function(){Ww.point=Gw},lineEnd:function(){zw&&Xw(jw,Uw),Ww.point=Zx},polygonStart:function(){zw=!0},polygonEnd:function(){zw=null},result:function(){var t=+Hw;return Hw=new Dx,t}};function Gw(t,e){Ww.point=Xw,jw=Vw=t,Uw=qw=e}function Xw(t,e){Hw.add(Gx((Vw-=t)*Vw+(qw-=e)*qw)),Vw=t,qw=e}const Yw=Ww;function Kw(){this._string=[]}function Zw(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Qw(t,e){var n,i,r=4.5;function s(t){return t&&("function"==typeof r&&i.pointRadius(+r.apply(this,arguments)),kx(t,n(i))),i.result()}return s.area=function(t){return kx(t,n(uw)),uw.result()},s.measure=function(t){return kx(t,n(Yw)),Yw.result()},s.bounds=function(t){return kx(t,n(pw)),pw.result()},s.centroid=function(t){return kx(t,n(Lw)),Lw.result()},s.projection=function(e){return arguments.length?(n=null==e?(t=null,bx):(t=e).stream,s):t},s.context=function(t){return arguments.length?(i=null==t?(e=null,new Kw):new $w(e=t),"function"!=typeof r&&i.pointRadius(r),s):e},s.pointRadius=function(t){return arguments.length?(r="function"==typeof t?t:(i.pointRadius(+t),+t),s):r},s.projection(t).context(e)}function Jw(){var t,e=[];return{point:function(e,n,i){t.push([e,n,i])},lineStart:function(){e.push(t=[])},lineEnd:Zx,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function tC(t,e){return Ix(t[0]-e[0])<Sx&&Ix(t[1]-e[1])<Sx}function eC(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function nC(t,e,n,i,r){var s,o,a=[],l=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],o=t[e];if(tC(i,o)){if(!i[2]&&!o[2]){for(r.lineStart(),s=0;s<e;++s)r.point((i=t[s])[0],i[1]);return void r.lineEnd()}o[0]+=2e-6}a.push(n=new eC(i,t,null,!0)),l.push(n.o=new eC(i,null,n,!1)),a.push(n=new eC(o,t,null,!1)),l.push(n.o=new eC(o,null,n,!0))}}),a.length){for(l.sort(e),iC(a),iC(l),s=0,o=l.length;s<o;++s)l[s].e=n=!n;for(var u,c,h=a[0];;){for(var d=h,f=!0;d.v;)if((d=d.n)===h)return;u=d.z,r.lineStart();do{if(d.v=d.o.v=!0,d.e){if(f)for(s=0,o=u.length;s<o;++s)r.point((c=u[s])[0],c[1]);else i(d.x,d.n.x,1,r);d=d.n}else{if(f)for(s=(u=d.p.z).length-1;s>=0;--s)r.point((c=u[s])[0],c[1]);else i(d.x,d.p.x,-1,r);d=d.p}u=(d=d.o).z,f=!f}while(!d.v);r.lineEnd()}}}function iC(t){if(e=t.length){for(var e,n,i=0,r=t[0];++i<e;)r.n=n=t[i],n.p=r,r=n;r.n=n=t[0],n.p=r}}function rC(t){return[Lx(t[1],t[0]),Kx(t[2])]}function sC(t){var e=t[0],n=t[1],i=$x(n);return[i*$x(e),i*Hx(e),Hx(n)]}function oC(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function aC(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function lC(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function uC(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function cC(t){var e=Gx(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function hC(t){return Ix(t[0])<=Ox?t[0]:Wx(t[0])*((Ix(t[0])+Ox)%Px-Ox)}function dC(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function fC(t,e,n,i){return function(r){var s,o,a,l=e(r),u=Jw(),c=e(u),h=!1,d={point:f,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=_,o=[],s=[]},polygonEnd:function(){d.point=f,d.lineStart=m,d.lineEnd=g,o=dC(o);var t=function(t,e){var n=hC(e),i=e[1],r=Hx(i),s=[Hx(n),-$x(n),0],o=0,a=0,l=new Dx;1===r?i=Mx+Sx:-1===r&&(i=-Mx-Sx);for(var u=0,c=t.length;u<c;++u)if(d=(h=t[u]).length)for(var h,d,f=h[d-1],p=hC(f),m=f[1]/2+Tx,g=Hx(m),y=$x(m),v=0;v<d;++v,p=b,g=w,y=C,f=_){var _=h[v],b=hC(_),x=_[1]/2+Tx,w=Hx(x),C=$x(x),A=b-p,E=A>=0?1:-1,k=E*A,D=k>Ox,S=g*w;if(l.add(Lx(S*E*Hx(k),y*C+S*$x(k))),o+=D?A+E*Px:A,D^p>=n^b>=n){var F=aC(sC(f),sC(_));cC(F);var O=aC(s,F);cC(O);var M=(D^A>=0?-1:1)*Kx(O[2]);(i>M||i===M&&(F[0]||F[1]))&&(a+=D^A>=0?1:-1)}}return(o<-1e-6||o<Sx&&l<-1e-12)^1&a}(s,i);o.length?(h||(r.polygonStart(),h=!0),nC(o,mC,t,n,r)):t&&(h||(r.polygonStart(),h=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),h&&(r.polygonEnd(),h=!1),o=s=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function f(e,n){t(e,n)&&r.point(e,n)}function p(t,e){l.point(t,e)}function m(){d.point=p,l.lineStart()}function g(){d.point=f,l.lineEnd()}function y(t,e){a.push([t,e]),c.point(t,e)}function v(){c.lineStart(),a=[]}function _(){y(a[0][0],a[0][1]),c.lineEnd();var t,e,n,i,l=c.clean(),d=u.result(),f=d.length;if(a.pop(),s.push(a),a=null,f)if(1&l){if((e=(n=d[0]).length-1)>0){for(h||(r.polygonStart(),h=!0),r.lineStart(),t=0;t<e;++t)r.point((i=n[t])[0],i[1]);r.lineEnd()}}else f>1&&2&l&&d.push(d.pop().concat(d.shift())),o.push(d.filter(pC))}return d}}function pC(t){return t.length>1}function mC(t,e){return((t=t.x)[0]<0?t[1]-Mx-Sx:Mx-t[1])-((e=e.x)[0]<0?e[1]-Mx-Sx:Mx-e[1])}Kw.prototype={_radius:4.5,_circle:Zw(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Zw(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};const gC=fC(function(){return!0},function(t){var e,n=NaN,i=NaN,r=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(s,o){var a=s>0?Ox:-Ox,l=Ix(s-n);Ix(l-Ox)<Sx?(t.point(n,i=(i+o)/2>0?Mx:-Mx),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),t.point(s,i),e=0):r!==a&&l>=Ox&&(Ix(n-r)<Sx&&(n-=r*Sx),Ix(s-a)<Sx&&(s-=a*Sx),i=function(t,e,n,i){var r,s,o=Hx(t-n);return Ix(o)>Sx?Nx((Hx(e)*(s=$x(i))*Hx(n)-Hx(i)*(r=$x(e))*Hx(t))/(r*s*o)):(e+i)/2}(n,i,s,o),t.point(r,i),t.lineEnd(),t.lineStart(),t.point(a,i),e=0),t.point(n=s,i=o),r=a},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}},function(t,e,n,i){var r;if(null==t)i.point(-Ox,r=n*Mx),i.point(0,r),i.point(Ox,r),i.point(Ox,0),i.point(Ox,-r),i.point(0,-r),i.point(-Ox,-r),i.point(-Ox,0),i.point(-Ox,r);else if(Ix(t[0]-e[0])>Sx){var s=t[0]<e[0]?Ox:-Ox;i.point(-s,r=n*s/2),i.point(0,r),i.point(s,r)}else i.point(e[0],e[1])},[-Ox,-Mx]);function yC(t,e){(e=sC(e))[0]-=t,cC(e);var n=Yx(-e[1]);return((-e[2]<0?-n:n)+Px-Sx)%Px}function vC(t){var e=$x(t),n=6*Bx,i=e>0,r=Ix(e)>Sx;function s(t,n){return $x(t)*$x(n)>e}function o(t,n,i){var r=[1,0,0],s=aC(sC(t),sC(n)),o=oC(s,s),a=s[0],l=o-a*a;if(!l)return!i&&t;var u=e*o/l,c=-e*a/l,h=aC(r,s),d=uC(r,u);lC(d,uC(s,c));var f=h,p=oC(d,f),m=oC(f,f),g=p*p-m*(oC(d,d)-1);if(!(g<0)){var y=Gx(g),v=uC(f,(-p-y)/m);if(lC(v,d),v=rC(v),!i)return v;var _,b=t[0],x=n[0],w=t[1],C=n[1];x<b&&(_=b,b=x,x=_);var A=x-b,E=Ix(A-Ox)<Sx;if(!E&&C<w&&(_=w,w=C,C=_),E||A<Sx?E?w+C>0^v[1]<(Ix(v[0]-b)<Sx?w:C):w<=v[1]&&v[1]<=C:A>Ox^(b<=v[0]&&v[0]<=x)){var k=uC(f,(-p+y)/m);return lC(k,d),[v,rC(k)]}}}function a(e,n){var r=i?t:Ox-t,s=0;return e<-r?s|=1:e>r&&(s|=2),n<-r?s|=4:n>r&&(s|=8),s}return fC(s,function(t){var e,n,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(h,d){var f,p=[h,d],m=s(h,d),g=i?m?0:a(h,d):m?a(h+(h<0?Ox:-Ox),d):0;if(!e&&(u=l=m)&&t.lineStart(),m!==l&&(!(f=o(e,p))||tC(e,f)||tC(p,f))&&(p[2]=1),m!==l)c=0,m?(t.lineStart(),f=o(p,e),t.point(f[0],f[1])):(f=o(e,p),t.point(f[0],f[1],2),t.lineEnd()),e=f;else if(r&&e&&i^m){var y;g&n||!(y=o(p,e,!0))||(c=0,i?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1],3)))}!m||e&&tC(e,p)||t.point(p[0],p[1]),e=p,l=m,n=g},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return c|(u&&l)<<1}}},function(e,i,r,s){!function(t,e,n,i,r,s){if(n){var o=$x(e),a=Hx(e),l=i*n;null==r?(r=e+i*Px,s=e-l/2):(r=yC(o,r),s=yC(o,s),(i>0?r<s:r>s)&&(r+=i*Px));for(var u,c=r;i>0?c>s:c<s;c-=l)u=rC([o,-a*$x(c),-a*Hx(c)]),t.point(u[0],u[1])}}(s,t,n,r,e,i)},i?[0,-t]:[-Ox,t-Ox])}var _C=1e9,bC=-_C;function xC(t,e,n,i){function r(r,s){return t<=r&&r<=n&&e<=s&&s<=i}function s(r,s,a,u){var c=0,h=0;if(null==r||(c=o(r,a))!==(h=o(s,a))||l(r,s)<0^a>0)do{u.point(0===c||3===c?t:n,c>1?i:e)}while((c=(c+a+4)%4)!==h);else u.point(s[0],s[1])}function o(i,r){return Ix(i[0]-t)<Sx?r>0?0:3:Ix(i[0]-n)<Sx?r>0?2:1:Ix(i[1]-e)<Sx?r>0?1:0:r>0?3:2}function a(t,e){return l(t.x,e.x)}function l(t,e){var n=o(t,1),i=o(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){var l,u,c,h,d,f,p,m,g,y,v,_=o,b=Jw(),x={point:w,lineStart:function(){x.point=C,u&&u.push(c=[]),y=!0,g=!1,p=m=NaN},lineEnd:function(){l&&(C(h,d),f&&g&&b.rejoin(),l.push(b.result())),x.point=w,g&&_.lineEnd()},polygonStart:function(){_=b,l=[],u=[],v=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,r=u.length;n<r;++n)for(var s,o,a=u[n],l=1,c=a.length,h=a[0],d=h[0],f=h[1];l<c;++l)s=d,o=f,d=(h=a[l])[0],f=h[1],o<=i?f>i&&(d-s)*(i-o)>(f-o)*(t-s)&&++e:f<=i&&(d-s)*(i-o)<(f-o)*(t-s)&&--e;return e}(),n=v&&e,r=(l=dC(l)).length;(n||r)&&(o.polygonStart(),n&&(o.lineStart(),s(null,null,1,o),o.lineEnd()),r&&nC(l,a,e,s,o),o.polygonEnd()),_=o,l=u=c=null}};function w(t,e){r(t,e)&&_.point(t,e)}function C(s,o){var a=r(s,o);if(u&&c.push([s,o]),y)h=s,d=o,f=a,y=!1,a&&(_.lineStart(),_.point(s,o));else if(a&&g)_.point(s,o);else{var l=[p=Math.max(bC,Math.min(_C,p)),m=Math.max(bC,Math.min(_C,m))],b=[s=Math.max(bC,Math.min(_C,s)),o=Math.max(bC,Math.min(_C,o))];!function(t,e,n,i,r,s){var o,a=t[0],l=t[1],u=0,c=1,h=e[0]-a,d=e[1]-l;if(o=n-a,h||!(o>0)){if(o/=h,h<0){if(o<u)return;o<c&&(c=o)}else if(h>0){if(o>c)return;o>u&&(u=o)}if(o=r-a,h||!(o<0)){if(o/=h,h<0){if(o>c)return;o>u&&(u=o)}else if(h>0){if(o<u)return;o<c&&(c=o)}if(o=i-l,d||!(o>0)){if(o/=d,d<0){if(o<u)return;o<c&&(c=o)}else if(d>0){if(o>c)return;o>u&&(u=o)}if(o=s-l,d||!(o<0)){if(o/=d,d<0){if(o>c)return;o>u&&(u=o)}else if(d>0){if(o<u)return;o<c&&(c=o)}return u>0&&(t[0]=a+u*h,t[1]=l+u*d),c<1&&(e[0]=a+c*h,e[1]=l+c*d),!0}}}}}(l,b,t,e,n,i)?a&&(_.lineStart(),_.point(s,o),v=!1):(g||(_.lineStart(),_.point(l[0],l[1])),_.point(b[0],b[1]),a||_.lineEnd(),v=!1)}p=s,m=o,g=a}return x}}function wC(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function CC(t,e){return[Ix(t)>Ox?t+Math.round(-t/Px)*Px:t,e]}function AC(t,e,n){return(t%=Px)?e||n?wC(kC(t),DC(e,n)):kC(t):e||n?DC(e,n):CC}function EC(t){return function(e,n){return[(e+=t)>Ox?e-Px:e<-Ox?e+Px:e,n]}}function kC(t){var e=EC(t);return e.invert=EC(-t),e}function DC(t,e){var n=$x(t),i=Hx(t),r=$x(e),s=Hx(e);function o(t,e){var o=$x(e),a=$x(t)*o,l=Hx(t)*o,u=Hx(e),c=u*n+a*i;return[Lx(l*r-c*s,a*n-u*i),Kx(c*r+l*s)]}return o.invert=function(t,e){var o=$x(e),a=$x(t)*o,l=Hx(t)*o,u=Hx(e),c=u*r-l*s;return[Lx(l*r+u*s,a*n+c*i),Kx(c*n-a*i)]},o}function SC(t){return function(e){var n=new FC;for(var i in t)n[i]=t[i];return n.stream=e,n}}function FC(){}function OC(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),kx(n,t.stream(pw)),e(pw.result()),null!=i&&t.clipExtent(i),t}function MC(t,e,n){return OC(t,function(n){var i=e[1][0]-e[0][0],r=e[1][1]-e[0][1],s=Math.min(i/(n[1][0]-n[0][0]),r/(n[1][1]-n[0][1])),o=+e[0][0]+(i-s*(n[1][0]+n[0][0]))/2,a=+e[0][1]+(r-s*(n[1][1]+n[0][1]))/2;t.scale(150*s).translate([o,a])},n)}function TC(t,e,n){return MC(t,[[0,0],e],n)}function PC(t,e,n){return OC(t,function(n){var i=+e,r=i/(n[1][0]-n[0][0]),s=(i-r*(n[1][0]+n[0][0]))/2,o=-r*n[0][1];t.scale(150*r).translate([s,o])},n)}function RC(t,e,n){return OC(t,function(n){var i=+e,r=i/(n[1][1]-n[0][1]),s=-r*n[0][0],o=(i-r*(n[1][1]+n[0][1]))/2;t.scale(150*r).translate([s,o])},n)}CC.invert=CC,FC.prototype={constructor:FC,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var BC=$x(30*Bx);function IC(t,e){return+e?function(t,e){function n(i,r,s,o,a,l,u,c,h,d,f,p,m,g){var y=u-i,v=c-r,_=y*y+v*v;if(_>4*e&&m--){var b=o+d,x=a+f,w=l+p,C=Gx(b*b+x*x+w*w),A=Kx(w/=C),E=Ix(Ix(w)-1)<Sx||Ix(s-h)<Sx?(s+h)/2:Lx(x,b),k=t(E,A),D=k[0],S=k[1],F=D-i,O=S-r,M=v*F-y*O;(M*M/_>e||Ix((y*F+v*O)/_-.5)>.3||o*d+a*f+l*p<BC)&&(n(i,r,s,o,a,l,D,S,E,b/=C,x/=C,w,m,g),g.point(D,S),n(D,S,E,b,x,w,u,c,h,d,f,p,m,g))}}return function(e){var i,r,s,o,a,l,u,c,h,d,f,p,m={point:g,lineStart:y,lineEnd:_,polygonStart:function(){e.polygonStart(),m.lineStart=b},polygonEnd:function(){e.polygonEnd(),m.lineStart=y}};function g(n,i){n=t(n,i),e.point(n[0],n[1])}function y(){c=NaN,m.point=v,e.lineStart()}function v(i,r){var s=sC([i,r]),o=t(i,r);n(c,h,u,d,f,p,c=o[0],h=o[1],u=i,d=s[0],f=s[1],p=s[2],16,e),e.point(c,h)}function _(){m.point=g,e.lineEnd()}function b(){y(),m.point=x,m.lineEnd=w}function x(t,e){v(i=t,e),r=c,s=h,o=d,a=f,l=p,m.point=v}function w(){n(c,h,u,d,f,p,r,s,i,o,a,l,16,e),m.lineEnd=_,_()}return m}}(t,e):function(t){return SC({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var NC=SC({point:function(t,e){this.stream.point(t*Bx,e*Bx)}});function LC(t,e,n,i,r,s){if(!s)return function(t,e,n,i,r){function s(s,o){return[e+t*(s*=i),n-t*(o*=r)]}return s.invert=function(s,o){return[(s-e)/t*i,(n-o)/t*r]},s}(t,e,n,i,r);var o=$x(s),a=Hx(s),l=o*t,u=a*t,c=o/t,h=a/t,d=(a*n-o*e)/t,f=(a*e+o*n)/t;function p(t,s){return[l*(t*=i)-u*(s*=r)+e,n-u*t-l*s]}return p.invert=function(t,e){return[i*(c*t-h*e+d),r*(f-h*t-c*e)]},p}function $C(t){return zC(function(){return t})()}function zC(t){var e,n,i,r,s,o,a,l,u,c,h=150,d=480,f=250,p=0,m=0,g=0,y=0,v=0,_=0,b=1,x=1,w=null,C=gC,A=null,E=bx,k=.5;function D(t){return l(t[0]*Bx,t[1]*Bx)}function S(t){return(t=l.invert(t[0],t[1]))&&[t[0]*Rx,t[1]*Rx]}function F(){var t=LC(h,0,0,b,x,_).apply(null,e(p,m)),i=LC(h,d-t[0],f-t[1],b,x,_);return n=AC(g,y,v),a=wC(e,i),l=wC(n,a),o=IC(a,k),O()}function O(){return u=c=null,D}return D.stream=function(t){return u&&c===t?u:u=NC(function(t){return SC({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}(n)(C(o(E(c=t)))))},D.preclip=function(t){return arguments.length?(C=t,w=void 0,O()):C},D.postclip=function(t){return arguments.length?(E=t,A=i=r=s=null,O()):E},D.clipAngle=function(t){return arguments.length?(C=+t?vC(w=t*Bx):(w=null,gC),O()):w*Rx},D.clipExtent=function(t){return arguments.length?(E=null==t?(A=i=r=s=null,bx):xC(A=+t[0][0],i=+t[0][1],r=+t[1][0],s=+t[1][1]),O()):null==A?null:[[A,i],[r,s]]},D.scale=function(t){return arguments.length?(h=+t,F()):h},D.translate=function(t){return arguments.length?(d=+t[0],f=+t[1],F()):[d,f]},D.center=function(t){return arguments.length?(p=t[0]%360*Bx,m=t[1]%360*Bx,F()):[p*Rx,m*Rx]},D.rotate=function(t){return arguments.length?(g=t[0]%360*Bx,y=t[1]%360*Bx,v=t.length>2?t[2]%360*Bx:0,F()):[g*Rx,y*Rx,v*Rx]},D.angle=function(t){return arguments.length?(_=t%360*Bx,F()):_*Rx},D.reflectX=function(t){return arguments.length?(b=t?-1:1,F()):b<0},D.reflectY=function(t){return arguments.length?(x=t?-1:1,F()):x<0},D.precision=function(t){return arguments.length?(o=IC(a,k=t*t),O()):Gx(k)},D.fitExtent=function(t,e){return MC(D,t,e)},D.fitSize=function(t,e){return TC(D,t,e)},D.fitWidth=function(t,e){return PC(D,t,e)},D.fitHeight=function(t,e){return RC(D,t,e)},function(){return e=t.apply(this,arguments),D.invert=e.invert&&S,F()}}function jC(t){var e=0,n=Ox/3,i=zC(t),r=i(e,n);return r.parallels=function(t){return arguments.length?i(e=t[0]*Bx,n=t[1]*Bx):[e*Rx,n*Rx]},r}function UC(t,e){var n=Hx(t),i=(n+Hx(e))/2;if(Ix(i)<Sx)return function(t){var e=$x(t);function n(t,n){return[t*e,Hx(n)/e]}return n.invert=function(t,n){return[t/e,Kx(n*e)]},n}(t);var r=1+n*(2*i-n),s=Gx(r)/i;function o(t,e){var n=Gx(r-2*i*Hx(e))/i;return[n*Hx(t*=i),s-n*$x(t)]}return o.invert=function(t,e){var n=s-e,o=Lx(t,Ix(n))*Wx(n);return n*i<0&&(o-=Ox*Wx(t)*Wx(n)),[o/i,Kx((r-(t*t+n*n)*i*i)/(2*i))]},o}function VC(){return jC(UC).scale(155.424).center([0,33.6442])}function qC(){return VC().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function HC(t){return function(e,n){var i=$x(e),r=$x(n),s=t(i*r);return s===1/0?[2,0]:[s*r*Hx(e),s*Hx(n)]}}function WC(t){return function(e,n){var i=Gx(e*e+n*n),r=t(i),s=Hx(r),o=$x(r);return[Lx(e*s,i*o),Kx(i&&n*s/i)]}}var GC=HC(function(t){return Gx(2/(1+t))});GC.invert=WC(function(t){return 2*Kx(t/2)});var XC=HC(function(t){return(t=Yx(t))&&t/Hx(t)});function YC(t,e){return[t,Vx(Xx((Mx+e)/2))]}function KC(t){var e,n,i,r=$C(t),s=r.center,o=r.scale,a=r.translate,l=r.clipExtent,u=null;function c(){var s=Ox*o(),a=r(function(t){function e(e){return(e=t(e[0]*Bx,e[1]*Bx))[0]*=Rx,e[1]*=Rx,e}return t=AC(t[0]*Bx,t[1]*Bx,t.length>2?t[2]*Bx:0),e.invert=function(e){return(e=t.invert(e[0]*Bx,e[1]*Bx))[0]*=Rx,e[1]*=Rx,e},e}(r.rotate()).invert([0,0]));return l(null==u?[[a[0]-s,a[1]-s],[a[0]+s,a[1]+s]]:t===YC?[[Math.max(a[0]-s,u),e],[Math.min(a[0]+s,n),i]]:[[u,Math.max(a[1]-s,e)],[n,Math.min(a[1]+s,i)]])}return r.scale=function(t){return arguments.length?(o(t),c()):o()},r.translate=function(t){return arguments.length?(a(t),c()):a()},r.center=function(t){return arguments.length?(s(t),c()):s()},r.clipExtent=function(t){return arguments.length?(null==t?u=e=n=i=null:(u=+t[0][0],e=+t[0][1],n=+t[1][0],i=+t[1][1]),c()):null==u?null:[[u,e],[n,i]]},c()}function ZC(t){return Xx((Mx+t)/2)}function QC(t,e){var n=$x(t),i=t===e?Hx(t):Vx(n/$x(e))/Vx(ZC(e)/ZC(t)),r=n*qx(ZC(t),i)/i;if(!i)return YC;function s(t,e){r>0?e<-Mx+Sx&&(e=-Mx+Sx):e>Mx-Sx&&(e=Mx-Sx);var n=r/qx(ZC(e),i);return[n*Hx(i*t),r-n*$x(i*t)]}return s.invert=function(t,e){var n=r-e,s=Wx(i)*Gx(t*t+n*n),o=Lx(t,Ix(n))*Wx(n);return n*i<0&&(o-=Ox*Wx(t)*Wx(n)),[o/i,2*Nx(qx(r/s,1/i))-Mx]},s}function JC(t,e){return[t,e]}function tA(t,e){var n=$x(t),i=t===e?Hx(t):(n-$x(e))/(e-t),r=n/i+t;if(Ix(i)<Sx)return JC;function s(t,e){var n=r-e,s=i*t;return[n*Hx(s),r-n*$x(s)]}return s.invert=function(t,e){var n=r-e,s=Lx(t,Ix(n))*Wx(n);return n*i<0&&(s-=Ox*Wx(t)*Wx(n)),[s/i,r-Wx(i)*Gx(t*t+n*n)]},s}XC.invert=WC(function(t){return t}),YC.invert=function(t,e){return[t,2*Nx(jx(e))-Mx]},JC.invert=JC;var eA=1.340264,nA=-.081106,iA=893e-6,rA=.003796,sA=Gx(3)/2;function oA(t,e){var n=Kx(sA*Hx(e)),i=n*n,r=i*i*i;return[t*$x(n)/(sA*(eA+3*nA*i+r*(7*iA+9*rA*i))),n*(eA+nA*i+r*(iA+rA*i))]}function aA(t,e){var n=$x(e),i=$x(t)*n;return[n*Hx(t)/i,Hx(e)/i]}function lA(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),e*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}function uA(t,e){return[$x(e)*Hx(t),Hx(e)]}function cA(t,e){var n=$x(e),i=1+$x(t)*n;return[n*Hx(t)/i,Hx(e)/i]}function hA(t,e){return[Vx(Xx((Mx+e)/2)),-t]}oA.invert=function(t,e){for(var n,i=e,r=i*i,s=r*r*r,o=0;o<12&&(s=(r=(i-=n=(i*(eA+nA*r+s*(iA+rA*r))-e)/(eA+3*nA*r+s*(7*iA+9*rA*r)))*i)*r*r,!(Ix(n)<Fx));++o);return[sA*t*(eA+3*nA*r+s*(7*iA+9*rA*r))/$x(i),Kx(Hx(i)/sA)]},aA.invert=WC(Nx),lA.invert=function(t,e){var n,i=e,r=25;do{var s=i*i,o=s*s;i-=n=(i*(1.007226+s*(.015085+o*(.028874*s-.044475-.005916*o)))-e)/(1.007226+s*(.045255+o*(.259866*s-.311325-.005916*11*o)))}while(Ix(n)>Sx&&--r>0);return[t/(.8707+(s=i*i)*(s*(s*s*s*(.003971-.001529*s)-.013791)-.131979)),i]},uA.invert=WC(Kx),cA.invert=WC(function(t){return 2*Nx(t)}),hA.invert=function(t,e){return[-e,2*Nx(jx(t))-Mx]};var dA=Math.abs,fA=(Math,Math,Math,Math.cos),pA=(Math,Math,Math,Math,Math,Math,Math,Math,Math.sin),mA=(Math,Math.PI),gA=mA/2,yA=(Math,_A(2));function vA(t){return t>1?gA:t<-1?-gA:Math.asin(t)}function _A(t){return t>0?Math.sqrt(t):0}function bA(t,e){var n,i=t*pA(e),r=30;do{e-=n=(e+pA(e)-i)/(1+fA(e))}while(dA(n)>1e-6&&--r>0);return e/2}_A(mA);var xA=function(t,e,n){function i(i,r){return[t*i*fA(r=bA(n,r)),e*pA(r)]}return i.invert=function(i,r){return r=vA(r/e),[i/(t*fA(r)),vA((2*r+pA(2*r))/n)]},i}(yA/gA,yA,mA);const wA=Qw(),CA=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function AA(t,e){return function n(){const i=e();return i.type=t,i.path=Qw().projection(i),i.copy=i.copy||function(){const t=n();return CA.forEach(e=>{i[e]&&t[e](i[e]())}),t.path.pointRadius(i.path.pointRadius()),t},i}}function EA(t,e){if(!t||"string"!=typeof t)throw new Error("Projection type must be a name string.");return t=t.toLowerCase(),arguments.length>1?(DA[t]=AA(t,e),this):DA[t]||null}function kA(t){return t&&t.path||wA}const DA={albers:qC,albersusa:function(){var t,e,n,i,r,s,o=qC(),a=VC().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=VC().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(t,e){s=[t,e]}};function c(t){var e=t[0],o=t[1];return s=null,n.point(e,o),s||(i.point(e,o),s)||(r.point(e,o),s)}function h(){return t=e=null,c}return c.invert=function(t){var e=o.scale(),n=o.translate(),i=(t[0]-n[0])/e,r=(t[1]-n[1])/e;return(r>=.12&&r<.234&&i>=-.425&&i<-.214?a:r>=.166&&r<.234&&i>=-.214&&i<-.115?l:o).invert(t)},c.stream=function(n){return t&&e===n?t:(i=[o.stream(e=n),a.stream(n),l.stream(n)],r=i.length,t={point:function(t,e){for(var n=-1;++n<r;)i[n].point(t,e)},sphere:function(){for(var t=-1;++t<r;)i[t].sphere()},lineStart:function(){for(var t=-1;++t<r;)i[t].lineStart()},lineEnd:function(){for(var t=-1;++t<r;)i[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<r;)i[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<r;)i[t].polygonEnd()}});var i,r},c.precision=function(t){return arguments.length?(o.precision(t),a.precision(t),l.precision(t),h()):o.precision()},c.scale=function(t){return arguments.length?(o.scale(t),a.scale(.35*t),l.scale(t),c.translate(o.translate())):o.scale()},c.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),s=+t[0],c=+t[1];return n=o.translate(t).clipExtent([[s-.455*e,c-.238*e],[s+.455*e,c+.238*e]]).stream(u),i=a.translate([s-.307*e,c+.201*e]).clipExtent([[s-.425*e+Sx,c+.12*e+Sx],[s-.214*e-Sx,c+.234*e-Sx]]).stream(u),r=l.translate([s-.205*e,c+.212*e]).clipExtent([[s-.214*e+Sx,c+.166*e+Sx],[s-.115*e-Sx,c+.234*e-Sx]]).stream(u),h()},c.fitExtent=function(t,e){return MC(c,t,e)},c.fitSize=function(t,e){return TC(c,t,e)},c.fitWidth=function(t,e){return PC(c,t,e)},c.fitHeight=function(t,e){return RC(c,t,e)},c.scale(1070)},azimuthalequalarea:function(){return $C(GC).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return $C(XC).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return jC(QC).scale(109.5).parallels([30,30])},conicequalarea:VC,conicequidistant:function(){return jC(tA).scale(131.154).center([0,13.9389])},equalEarth:function(){return $C(oA).scale(177.158)},equirectangular:function(){return $C(JC).scale(152.63)},gnomonic:function(){return $C(aA).scale(144.049).clipAngle(60)},identity:function(){var t,e,n,i,r,s,o,a=1,l=0,u=0,c=1,h=1,d=0,f=null,p=1,m=1,g=SC({point:function(t,e){var n=_([t,e]);this.stream.point(n[0],n[1])}}),y=bx;function v(){return p=a*c,m=a*h,s=o=null,_}function _(n){var i=n[0]*p,r=n[1]*m;if(d){var s=r*t-i*e;i=i*t+r*e,r=s}return[i+l,r+u]}return _.invert=function(n){var i=n[0]-l,r=n[1]-u;if(d){var s=r*t+i*e;i=i*t-r*e,r=s}return[i/p,r/m]},_.stream=function(t){return s&&o===t?s:s=g(y(o=t))},_.postclip=function(t){return arguments.length?(y=t,f=n=i=r=null,v()):y},_.clipExtent=function(t){return arguments.length?(y=null==t?(f=n=i=r=null,bx):xC(f=+t[0][0],n=+t[0][1],i=+t[1][0],r=+t[1][1]),v()):null==f?null:[[f,n],[i,r]]},_.scale=function(t){return arguments.length?(a=+t,v()):a},_.translate=function(t){return arguments.length?(l=+t[0],u=+t[1],v()):[l,u]},_.angle=function(n){return arguments.length?(e=Hx(d=n%360*Bx),t=$x(d),v()):d*Rx},_.reflectX=function(t){return arguments.length?(c=t?-1:1,v()):c<0},_.reflectY=function(t){return arguments.length?(h=t?-1:1,v()):h<0},_.fitExtent=function(t,e){return MC(_,t,e)},_.fitSize=function(t,e){return TC(_,t,e)},_.fitWidth=function(t,e){return PC(_,t,e)},_.fitHeight=function(t,e){return RC(_,t,e)},_},mercator:function(){return KC(YC).scale(961/Px)},mollweide:function(){return $C(xA).scale(169.529)},naturalEarth1:function(){return $C(lA).scale(175.295)},orthographic:function(){return $C(uA).scale(249.5).clipAngle(90.000001)},stereographic:function(){return $C(cA).scale(250).clipAngle(142)},transversemercator:function(){var t=KC(hA),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)}};for(const UN in DA)EA(UN,DA[UN]);function SA(t,e,n){var i=pl(t,e-Sx,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function FA(t,e,n){var i=pl(t,e-Sx,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function OA(){}const MA=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function TA(){var t=1,e=1,n=o;function i(t,e){return e.map(e=>r(t,e))}function r(i,r){var o=[],a=[];return function(n,i,r){var o,a,l,u,c,h=new Array,d=new Array;for(o=a=-1,MA[(l=n[0]>=i)<<1].forEach(f);++o<t-1;)MA[l|(l=n[o+1]>=i)<<1].forEach(f);for(MA[l<<0].forEach(f);++a<e-1;){for(o=-1,MA[(l=n[a*t+t]>=i)<<1|(u=n[a*t]>=i)<<2].forEach(f);++o<t-1;)c=u,MA[l|(l=n[a*t+t+o+1]>=i)<<1|(u=n[a*t+o+1]>=i)<<2|c<<3].forEach(f);MA[l|u<<3].forEach(f)}for(o=-1,MA[(u=n[a*t]>=i)<<2].forEach(f);++o<t-1;)c=u,MA[(u=n[a*t+o+1]>=i)<<2|c<<3].forEach(f);function f(t){var e,n,i=[t[0][0]+o,t[0][1]+a],l=[t[1][0]+o,t[1][1]+a],u=s(i),c=s(l);(e=d[u])?(n=h[c])?(delete d[e.end],delete h[n.start],e===n?(e.ring.push(l),r(e.ring)):h[e.start]=d[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete d[e.end],e.ring.push(l),d[e.end=c]=e):(e=h[c])?(n=d[u])?(delete h[e.start],delete d[n.end],e===n?(e.ring.push(l),r(e.ring)):h[n.start]=d[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete h[e.start],e.ring.unshift(i),h[e.start=u]=e):h[u]=d[c]={start:u,end:c,ring:[i,l]}}MA[u<<3].forEach(f)}(i,r,t=>{n(t,i,r),function(t){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return i}(t)>0?o.push([t]):a.push(t)}),a.forEach(t=>{for(var e,n=0,i=o.length;n<i;++n)if(-1!==PA((e=o[n])[0],t))return void e.push(t)}),{type:"MultiPolygon",value:r,coordinates:o}}function s(e){return 2*e[0]+e[1]*(t+1)*4}function o(n,i,r){n.forEach(n=>{var s,o=n[0],a=n[1],l=0|o,u=0|a,c=i[u*t+l];o>0&&o<t&&l===o&&(n[0]=o+(r-(s=i[u*t+l-1]))/(c-s)-.5),a>0&&a<e&&u===a&&(n[1]=a+(r-(s=i[(u-1)*t+l]))/(c-s)-.5)})}return i.contour=r,i.size=function(n){if(!arguments.length)return[t,e];var r=Math.floor(n[0]),s=Math.floor(n[1]);return r>=0&&s>=0||(0,de.vU)("invalid size"),t=r,e=s,i},i.smooth=function(t){return arguments.length?(n=t?o:OA,i):n===o},i}function PA(t,e){for(var n,i=-1,r=e.length;++i<r;)if(n=RA(t,e[i]))return n;return 0}function RA(t,e){for(var n=e[0],i=e[1],r=-1,s=0,o=t.length,a=o-1;s<o;a=s++){var l=t[s],u=l[0],c=l[1],h=t[a],d=h[0],f=h[1];if(BA(l,h,e))return 0;c>i!=f>i&&n<(d-u)*(i-c)/(f-c)+u&&(r=-r)}return r}function BA(t,e,n){var i,r,s,o;return function(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}(t,e,n)&&(r=t[i=+(t[0]===e[0])],o=e[i],r<=(s=n[i])&&s<=o||o<=s&&s<=r)}function IA(t,e,n){return function(i){var r=(0,de.We)(i),s=n?Math.min(r[0],0):r[0],o=r[1],a=o-s,l=e?en(s,o,t):a/(t+1);return pl(s+l,o,l)}}function NA(t){Po.call(this,null,t)}function LA(t,e,n,i,r){const s=t.x1||0,o=t.y1||0,a=e*n<0;function l(t){t.forEach(u)}function u(t){a&&t.reverse(),t.forEach(c)}function c(t){t[0]=(t[0]-s)*e+i,t[1]=(t[1]-o)*n+r}return function(t){return t.coordinates.forEach(l),t}}function $A(t,e,n){const i=t>=0?t:Ca(e,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function zA(t){return(0,de.mf)(t)?t:(0,de.a9)(+t)}function jA(){var t=t=>t[0],e=t=>t[1],n=de.kX,i=[-1,-1],r=960,s=500,o=2;function a(a,l){const u=$A(i[0],a,t)>>o,c=$A(i[1],a,e)>>o,h=u?u+2:0,d=c?c+2:0,f=2*h+(r>>o),p=2*d+(s>>o),m=new Float32Array(f*p),g=new Float32Array(f*p);let y=m;a.forEach(i=>{const r=h+(+t(i)>>o),s=d+(+e(i)>>o);r>=0&&r<f&&s>=0&&s<p&&(m[r+s*f]+=+n(i))}),u>0&&c>0?(UA(f,p,m,g,u),VA(f,p,g,m,c),UA(f,p,m,g,u),VA(f,p,g,m,c),UA(f,p,m,g,u),VA(f,p,g,m,c)):u>0?(UA(f,p,m,g,u),UA(f,p,g,m,u),UA(f,p,m,g,u),y=g):c>0&&(VA(f,p,m,g,c),VA(f,p,g,m,c),VA(f,p,m,g,c),y=g);const v=l?Math.pow(2,-2*o):1/Vb(y);for(let t=0,e=f*p;t<e;++t)y[t]*=v;return{values:y,scale:1<<o,width:f,height:p,x1:h,y1:d,x2:h+(r>>o),y2:d+(s>>o)}}return a.x=function(e){return arguments.length?(t=zA(e),a):t},a.y=function(t){return arguments.length?(e=zA(t),a):e},a.weight=function(t){return arguments.length?(n=zA(t),a):n},a.size=function(t){if(!arguments.length)return[r,s];var e=+t[0],n=+t[1];return e>=0&&n>=0||(0,de.vU)("invalid size"),r=e,s=n,a},a.cellSize=function(t){return arguments.length?((t=+t)>=1||(0,de.vU)("invalid cell size"),o=Math.floor(Math.log(t)/Math.LN2),a):1<<o},a.bandwidth=function(t){return arguments.length?(1===(t=(0,de.IX)(t)).length&&(t=[+t[0],+t[0]]),2!==t.length&&(0,de.vU)("invalid bandwidth"),i=t,a):i},a}function UA(t,e,n,i,r){const s=1+(r<<1);for(let o=0;o<e;++o)for(let e=0,a=0;e<t+r;++e)e<t&&(a+=n[e+o*t]),e>=r&&(e>=s&&(a-=n[e-s+o*t]),i[e-r+o*t]=a/Math.min(e+1,t-1+s-e,s))}function VA(t,e,n,i,r){const s=1+(r<<1);for(let o=0;o<t;++o)for(let a=0,l=0;a<e+r;++a)a<e&&(l+=n[o+a*t]),a>=r&&(a>=s&&(l-=n[o+(a-s)*t]),i[o+(a-r)*t]=l/Math.min(a+1,e-1+s-a,s))}function qA(t){Po.call(this,null,t)}NA.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},(0,de.XW)(NA,Po,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=e.materialize(e.SOURCE).source,r=t.field||de.yR,s=TA().smooth(!1!==t.smooth),o=t.thresholds||function(t,e,n){const i=IA(n.levels||10,n.nice,!1!==n.zero);return"shared"!==n.resolve?i:i(t.map(t=>da(e(t).values)))}(i,r,t),a=null===t.as?null:t.as||"contour",l=[];return i.forEach(e=>{const n=r(e),i=s.size([n.width,n.height])(n.values,(0,de.kJ)(o)?o:o(n.values));!function(t,e,n,i){let r=i.scale||e.scale,s=i.translate||e.translate;if((0,de.mf)(r)&&(r=r(n,i)),(0,de.mf)(s)&&(s=s(n,i)),(1===r||null==r)&&!s)return;const o=((0,de.hj)(r)?r:r[0])||1,a=((0,de.hj)(r)?r:r[1])||1;t.forEach(LA(e,o,a,s&&s[0]||0,s&&s[1]||0))}(i,n,e,t),i.forEach(t=>{l.push(ro(e,no(null!=a?{[a]:t}:t)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}}),qA.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const HA=["x","y","weight","size","cellSize","bandwidth"];function WA(t,e){return HA.forEach(n=>null!=e[n]?t[n](e[n]):0),t}function GA(t){Po.call(this,null,t)}(0,de.XW)(qA,Po,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n,i=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=function(t,e){var n,i,r,s,o,a,l=[],u=t=>t(s);if(null==e)l.push(t);else for(n={},i=0,r=t.length;i<r;++i)s=t[i],(a=n[o=e.map(u)])||(n[o]=a=[],a.dims=o,l.push(a)),a.push(s);return l}(e.materialize(e.SOURCE).source,t.groupby),s=(t.groupby||[]).map(de.el),o=WA(jA(),t),a=t.as||"grid";return n=r.map(e=>no(function(t,e){for(let n=0;n<s.length;++n)t[s[n]]=e[n];return t}({[a]:o(e,t.counts)},e.dims))),this.value&&(i.rem=this.value),this.value=i.source=i.add=n,i}}),GA.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},(0,de.XW)(GA,Po,{transform(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n,i,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),s=TA().smooth(!1!==t.smooth),o=t.values,a=t.thresholds||IA(t.count||10,t.nice,!!o),l=t.size;return o||(o=e.materialize(e.SOURCE).source,i=LA(n=WA(jA(),t)(o,!0),n.scale||1,n.scale||1,0,0),l=[n.width,n.height],o=n.values),a=(0,de.kJ)(a)?a:a(o),o=s.size(l)(o,a),i&&o.forEach(i),this.value&&(r.rem=this.value),this.value=r.source=r.add=(o||[]).map(no),r}});const XA="Feature",YA="FeatureCollection";function KA(t){Po.call(this,null,t)}function ZA(t){Po.call(this,null,t)}function QA(t){Po.call(this,null,t)}function JA(t){Po.call(this,null,t)}function tE(t){Po.call(this,[],t),this.generator=function(){var t,e,n,i,r,s,o,a,l,u,c,h,d=10,f=d,p=90,m=360,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return pl(zx(i/p)*p,n,p).map(c).concat(pl(zx(a/m)*m,o,m).map(h)).concat(pl(zx(e/d)*d,t,d).filter(function(t){return Ix(t%p)>Sx}).map(l)).concat(pl(zx(s/f)*f,r,f).filter(function(t){return Ix(t%m)>Sx}).map(u))}return y.lines=function(){return v().map(function(t){return{type:"LineString",coordinates:t}})},y.outline=function(){return{type:"Polygon",coordinates:[c(i).concat(h(o).slice(1),c(n).reverse().slice(1),h(a).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.extentMajor(t).extentMinor(t):y.extentMinor()},y.extentMajor=function(t){return arguments.length?(a=+t[0][1],o=+t[1][1],(i=+t[0][0])>(n=+t[1][0])&&(t=i,i=n,n=t),a>o&&(t=a,a=o,o=t),y.precision(g)):[[i,a],[n,o]]},y.extentMinor=function(n){return arguments.length?(s=+n[0][1],r=+n[1][1],(e=+n[0][0])>(t=+n[1][0])&&(n=e,e=t,t=n),s>r&&(n=s,s=r,r=n),y.precision(g)):[[e,s],[t,r]]},y.step=function(t){return arguments.length?y.stepMajor(t).stepMinor(t):y.stepMinor()},y.stepMajor=function(t){return arguments.length?(p=+t[0],m=+t[1],y):[p,m]},y.stepMinor=function(t){return arguments.length?(d=+t[0],f=+t[1],y):[d,f]},y.precision=function(d){return arguments.length?(g=+d,l=SA(s,r,90),u=FA(e,t,g),c=SA(a,o,90),h=FA(i,n,g),y):g},y.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}()}function eE(t){Po.call(this,null,t)}function nE(t){if(!(0,de.mf)(t))return!1;const e=(0,de.Rg)((0,de.Oj)(t));return e.$x||e.$y||e.$value||e.$max}function iE(t){Po.call(this,null,t),this.modified(!0)}function rE(t,e,n){(0,de.mf)(t[e])&&t[e](n)}function sE(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,s,o,a,l,u,c,h,d,f=t._root,p={data:i},m=t._x0,g=t._y0,y=t._x1,v=t._y1;if(!f)return t._root=p,t;for(;f.length;)if((u=e>=(s=(m+y)/2))?m=s:y=s,(c=n>=(o=(g+v)/2))?g=o:v=o,r=f,!(f=f[h=c<<1|u]))return r[h]=p,t;if(a=+t._x.call(null,f.data),l=+t._y.call(null,f.data),e===a&&n===l)return p.next=f,r?r[h]=p:t._root=p,t;do{r=r?r[h]=new Array(4):t._root=new Array(4),(u=e>=(s=(m+y)/2))?m=s:y=s,(c=n>=(o=(g+v)/2))?g=o:v=o}while((h=c<<1|u)==(d=(l>=o)<<1|a>=s));return r[d]=f,r[h]=p,t}function oE(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}function aE(t){return t[0]}function lE(t){return t[1]}function uE(t,e,n){var i=new cE(null==e?aE:e,null==n?lE:n,NaN,NaN,NaN,NaN);return null==t?i:i.addAll(t)}function cE(t,e,n,i,r,s){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=s,this._root=void 0}function hE(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}KA.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},(0,de.XW)(KA,Po,{transform(t,e){var n,i=this._features,r=this._points,s=t.fields,o=s&&s[0],a=s&&s[1],l=t.geojson||!s&&de.yR,u=e.ADD;n=t.modified()||e.changed(e.REM)||e.modified((0,de.Oj)(l))||o&&e.modified((0,de.Oj)(o))||a&&e.modified((0,de.Oj)(a)),this.value&&!n||(u=e.SOURCE,this._features=i=[],this._points=r=[]),l&&e.visit(u,t=>i.push(l(t))),o&&a&&(e.visit(u,t=>{var e=o(t),n=a(t);null!=e&&null!=n&&(e=+e)===e&&(n=+n)===n&&r.push([e,n])}),i=i.concat({type:XA,geometry:{type:"MultiPoint",coordinates:r}})),this.value={type:YA,features:i}}}),ZA.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},(0,de.XW)(ZA,Po,{transform(t,e){var n=e.fork(e.ALL),i=this.value,r=t.field||de.yR,s=t.as||"path",o=n.SOURCE;!i||t.modified()?(this.value=i=kA(t.projection),n.materialize().reflow()):o=r===de.yR||e.modified(r.fields)?n.ADD_MOD:n.ADD;const a=function(t,e){const n=t.pointRadius();return t.context(null),null!=e&&t.pointRadius(e),n}(i,t.pointRadius);return n.visit(o,t=>t[s]=i(r(t))),i.pointRadius(a),n.modifies(s)}}),QA.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},(0,de.XW)(QA,Po,{transform(t,e){var n,i=t.projection,r=t.fields[0],s=t.fields[1],o=t.as||["x","y"],a=o[0],l=o[1];function u(t){const e=i([r(t),s(t)]);e?(t[a]=e[0],t[l]=e[1]):(t[a]=void 0,t[l]=void 0)}return t.modified()?e=e.materialize().reflow(!0).visit(e.SOURCE,u):(n=e.modified(r.fields)||e.modified(s.fields),e.visit(n?e.ADD_MOD:e.ADD,u)),e.modifies(o)}}),JA.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},(0,de.XW)(JA,Po,{transform(t,e){var n=e.fork(e.ALL),i=this.value,r=t.as||"shape",s=n.ADD;return i&&!t.modified()||(this.value=i=function(t,e,n){const i=null==n?n=>t(e(n)):i=>{var r=t.pointRadius(),s=t.pointRadius(n)(e(i));return t.pointRadius(r),s};return i.context=e=>(t.context(e),i),i}(kA(t.projection),t.field||(0,de.EP)("datum"),t.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,t=>t[r]=i),n.modifies(r)}}),tE.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},(0,de.XW)(tE,Po,{transform(t,e){var n,i=this.value,r=this.generator;if(!i.length||t.modified())for(const s in t)(0,de.mf)(r[s])&&r[s](t[s]);return n=r(),i.length?e.mod.push(so(i[0],n)):e.add.push(no(n)),i[0]=n,e}}),eE.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},(0,de.XW)(eE,Po,{transform(t,e){if(!e.changed()&&!t.modified())return e.StopPropagation;var n=e.materialize(e.SOURCE).source,i="shared"===t.resolve,r=t.field||de.yR,s=function(t,e){let n;return(0,de.mf)(t)?(n=n=>t(n,e),n.dep=nE(t)):t?n=(0,de.a9)(t):(n=t=>t.$value/t.$max||0,n.dep=!0),n}(t.opacity,t),o=function(t,e){let n;return(0,de.mf)(t)?(n=n=>Th(t(n,e)),n.dep=nE(t)):n=(0,de.a9)(Th(t||"#888")),n}(t.color,t),a=t.as||"image",l={$x:0,$y:0,$value:0,$max:i?da(n.map(t=>da(r(t).values))):0};return n.forEach(t=>{const e=r(t),n=(0,de.l7)({},t,l);i||(n.$max=da(e.values||[])),t[a]=function(t,e,n,i){const r=t.width,s=t.x1||0,o=t.y1||0,a=t.x2||r,l=t.y2||t.height,u=t.values,c=u?t=>u[t]:de.bM,h=Jc(a-s,l-o),d=h.getContext("2d"),f=d.getImageData(0,0,a-s,l-o),p=f.data;for(let m=o,g=0;m<l;++m){e.$y=m-o;for(let t=s,o=m*r;t<a;++t,g+=4){e.$x=t-s,e.$value=c(t+o);const r=n(e);p[g+0]=r.r,p[g+1]=r.g,p[g+2]=r.b,p[g+3]=~~(255*i(e))}}return d.putImageData(f,0,0),h}(e,n,o.dep?o:(0,de.a9)(o(n)),s.dep?s:(0,de.a9)(s(n)))}),e.reflow(!0).modifies(a)}}),(0,de.XW)(iE,Po,{transform(t,e){let n=this.value;return!n||t.modified("type")?(this.value=n=function(t){const e=EA((t||"mercator").toLowerCase());return e||(0,de.vU)("Unrecognized projection type: "+t),e()}(t.type),CA.forEach(e=>{null!=t[e]&&rE(n,e,t[e])})):CA.forEach(e=>{t.modified(e)&&rE(n,e,t[e])}),null!=t.pointRadius&&n.path.pointRadius(t.pointRadius),t.fit&&function(t,e){const n=function(t){return 1===(t=(0,de.IX)(t)).length?t[0]:{type:YA,features:t.reduce((t,e)=>t.concat(function(t){return t.type===YA?t.features:(0,de.IX)(t).filter(t=>null!=t).map(t=>t.type===XA?t:{type:XA,geometry:t})}(e)),[])}}(e.fit);e.extent?t.fitExtent(e.extent,n):e.size&&t.fitSize(e.size,n)}(n,t),e.fork(e.NO_SOURCE|e.NO_FIELDS)}});var dE=uE.prototype=cE.prototype;function fE(t){return function(){return t}}function pE(t){return 1e-6*(t()-.5)}function mE(t){return t.x+t.vx}function gE(t){return t.y+t.vy}dE.copy=function(){var t,e,n=new cE(this._x,this._y,this._x0,this._y0,this._x1,this._y1),i=this._root;if(!i)return n;if(!i.length)return n._root=hE(i),n;for(t=[{source:i,target:n._root=new Array(4)}];i=t.pop();)for(var r=0;r<4;++r)(e=i.source[r])&&(e.length?t.push({source:e,target:i.target[r]=new Array(4)}):i.target[r]=hE(e));return n},dE.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return sE(this.cover(e,n),e,n,t)},dE.addAll=function(t){var e,n,i,r,s=t.length,o=new Array(s),a=new Array(s),l=1/0,u=1/0,c=-1/0,h=-1/0;for(n=0;n<s;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(r=+this._y.call(null,e))||(o[n]=i,a[n]=r,i<l&&(l=i),i>c&&(c=i),r<u&&(u=r),r>h&&(h=r));if(l>c||u>h)return this;for(this.cover(l,u).cover(c,h),n=0;n<s;++n)sE(this,o[n],a[n],t[n]);return this},dE.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,s=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,s=(i=Math.floor(e))+1;else{for(var o,a,l=r-n||1,u=this._root;n>t||t>=r||i>e||e>=s;)switch(a=(e<i)<<1|t<n,(o=new Array(4))[a]=u,u=o,l*=2,a){case 0:r=n+l,s=i+l;break;case 1:n=r-l,s=i+l;break;case 2:r=n+l,i=s-l;break;case 3:n=r-l,i=s-l}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=i,this._x1=r,this._y1=s,this},dE.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},dE.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},dE.find=function(t,e,n){var i,r,s,o,a,l,u,c=this._x0,h=this._y0,d=this._x1,f=this._y1,p=[],m=this._root;for(m&&p.push(new oE(m,c,h,d,f)),null==n?n=1/0:(c=t-n,h=e-n,d=t+n,f=e+n,n*=n);l=p.pop();)if(!(!(m=l.node)||(r=l.x0)>d||(s=l.y0)>f||(o=l.x1)<c||(a=l.y1)<h))if(m.length){var g=(r+o)/2,y=(s+a)/2;p.push(new oE(m[3],g,y,o,a),new oE(m[2],r,y,g,a),new oE(m[1],g,s,o,y),new oE(m[0],r,s,g,y)),(u=(e>=y)<<1|t>=g)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-u],p[p.length-1-u]=l)}else{var v=t-+this._x.call(null,m.data),_=e-+this._y.call(null,m.data),b=v*v+_*_;if(b<n){var x=Math.sqrt(n=b);c=t-x,h=e-x,d=t+x,f=e+x,i=m.data}}return i},dE.remove=function(t){if(isNaN(s=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,i,r,s,o,a,l,u,c,h,d,f=this._root,p=this._x0,m=this._y0,g=this._x1,y=this._y1;if(!f)return this;if(f.length)for(;;){if((u=s>=(a=(p+g)/2))?p=a:g=a,(c=o>=(l=(m+y)/2))?m=l:y=l,e=f,!(f=f[h=c<<1|u]))return this;if(!f.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,d=h)}for(;f.data!==t;)if(i=f,!(f=f.next))return this;return(r=f.next)&&delete f.next,i?(r?i.next=r:delete i.next,this):e?(r?e[h]=r:delete e[h],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[d]=f:this._root=f),this):(this._root=r,this)},dE.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},dE.root=function(){return this._root},dE.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},dE.visit=function(t){var e,n,i,r,s,o,a=[],l=this._root;for(l&&a.push(new oE(l,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(l=e.node,i=e.x0,r=e.y0,s=e.x1,o=e.y1)&&l.length){var u=(i+s)/2,c=(r+o)/2;(n=l[3])&&a.push(new oE(n,u,c,s,o)),(n=l[2])&&a.push(new oE(n,i,c,u,o)),(n=l[1])&&a.push(new oE(n,u,r,s,c)),(n=l[0])&&a.push(new oE(n,i,r,u,c))}return this},dE.visitAfter=function(t){var e,n=[],i=[];for(this._root&&n.push(new oE(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var r=e.node;if(r.length){var s,o=e.x0,a=e.y0,l=e.x1,u=e.y1,c=(o+l)/2,h=(a+u)/2;(s=r[0])&&n.push(new oE(s,o,a,c,h)),(s=r[1])&&n.push(new oE(s,c,a,l,h)),(s=r[2])&&n.push(new oE(s,o,h,c,u)),(s=r[3])&&n.push(new oE(s,c,h,l,u))}i.push(e)}for(;e=i.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},dE.x=function(t){return arguments.length?(this._x=t,this):this._x},dE.y=function(t){return arguments.length?(this._y=t,this):this._y};var yE={value:()=>{}};function vE(){for(var t,e=0,n=arguments.length,i={};e<n;++e){if(!(t=arguments[e]+"")||t in i||/[\s.]/.test(t))throw new Error("illegal type: "+t);i[t]=[]}return new _E(i)}function _E(t){this._=t}function bE(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",i=t.indexOf(".");if(i>=0&&(n=t.slice(i+1),t=t.slice(0,i)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function xE(t,e){for(var n,i=0,r=t.length;i<r;++i)if((n=t[i]).name===e)return n.value}function wE(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=yE,t=t.slice(0,i).concat(t.slice(i+1));break}return null!=n&&t.push({name:e,value:n}),t}_E.prototype=vE.prototype={constructor:_E,on:function(t,e){var n,i=this._,r=bE(t+"",i),s=-1,o=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<o;)if(n=(t=r[s]).type)i[n]=wE(i[n],t.name,e);else if(null==e)for(n in i)i[n]=wE(i[n],t.name,null);return this}for(;++s<o;)if((n=(t=r[s]).type)&&(n=xE(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new _E(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,i,r=new Array(n),s=0;s<n;++s)r[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,n=(i=this._[t]).length;s<n;++s)i[s].value.apply(e,r)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)}};const CE=vE;var AE,EE,kE=0,DE=0,SE=0,FE=0,OE=0,ME=0,TE="object"==typeof performance&&performance.now?performance:Date,PE="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function RE(){return OE||(PE(BE),OE=TE.now()+ME)}function BE(){OE=0}function IE(){this._call=this._time=this._next=null}function NE(t,e,n){var i=new IE;return i.restart(t,e,n),i}function LE(){OE=(FE=TE.now())+ME,kE=DE=0;try{!function(){RE(),++kE;for(var t,e=AE;e;)(t=OE-e._time)>=0&&e._call.call(null,t),e=e._next;--kE}()}finally{kE=0,function(){for(var t,e,n=AE,i=1/0;n;)n._call?(i>n._time&&(i=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:AE=e);EE=t,zE(i)}(),OE=0}}function $E(){var t=TE.now(),e=t-FE;e>1e3&&(ME-=e,FE=t)}function zE(t){kE||(DE&&(DE=clearTimeout(DE)),t-OE>24?(t<1/0&&(DE=setTimeout(LE,t-TE.now()-ME)),SE&&(SE=clearInterval(SE))):(SE||(FE=TE.now(),SE=setInterval($E,1e3)),kE=1,PE(LE)))}IE.prototype=NE.prototype={constructor:IE,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?RE():+n)+(null==e?0:+e),this._next||EE===this||(EE?EE._next=this:AE=this,EE=this),this._call=t,this._time=n,zE()},stop:function(){this._call&&(this._call=null,this._time=1/0,zE())}};const jE=4294967296;function UE(t){return t.x}function VE(t){return t.y}var qE=Math.PI*(3-Math.sqrt(5));function HE(t){return t.index}function WE(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}const GE={center:function(t,e){var n,i=1;function r(){var r,s,o=n.length,a=0,l=0;for(r=0;r<o;++r)a+=(s=n[r]).x,l+=s.y;for(a=(a/o-t)*i,l=(l/o-e)*i,r=0;r<o;++r)(s=n[r]).x-=a,s.y-=l}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r.strength=function(t){return arguments.length?(i=+t,r):i},r},collide:function(t){var e,n,i,r=1,s=1;function o(){for(var t,o,l,u,c,h,d,f=e.length,p=0;p<s;++p)for(o=uE(e,mE,gE).visitAfter(a),t=0;t<f;++t)d=(h=n[(l=e[t]).index])*h,u=l.x+l.vx,c=l.y+l.vy,o.visit(m);function m(t,e,n,s,o){var a=t.data,f=t.r,p=h+f;if(!a)return e>u+p||s<u-p||n>c+p||o<c-p;if(a.index>l.index){var m=u-a.x-a.vx,g=c-a.y-a.vy,y=m*m+g*g;y<p*p&&(0===m&&(y+=(m=pE(i))*m),0===g&&(y+=(g=pE(i))*g),y=(p-(y=Math.sqrt(y)))/y*r,l.vx+=(m*=y)*(p=(f*=f)/(d+f)),l.vy+=(g*=y)*p,a.vx-=m*(p=1-p),a.vy-=g*p)}}}function a(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function l(){if(e){var i,r,s=e.length;for(n=new Array(s),i=0;i<s;++i)n[(r=e[i]).index]=+t(r,i,e)}}return"function"!=typeof t&&(t=fE(null==t?1:+t)),o.initialize=function(t,n){e=t,i=n,l()},o.iterations=function(t){return arguments.length?(s=+t,o):s},o.strength=function(t){return arguments.length?(r=+t,o):r},o.radius=function(e){return arguments.length?(t="function"==typeof e?e:fE(+e),l(),o):t},o},nbody:function(){var t,e,n,i,r,s=fE(-30),o=1,a=1/0,l=.81;function u(n){var r,s=t.length,o=uE(t,UE,VE).visitAfter(h);for(i=n,r=0;r<s;++r)e=t[r],o.visit(d)}function c(){if(t){var e,n,i=t.length;for(r=new Array(i),e=0;e<i;++e)r[(n=t[e]).index]=+s(n,e,t)}}function h(t){var e,n,i,s,o,a=0,l=0;if(t.length){for(i=s=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(a+=e.value,l+=n,i+=n*e.x,s+=n*e.y);t.x=i/l,t.y=s/l}else{(e=t).x=e.data.x,e.y=e.data.y;do{a+=r[e.data.index]}while(e=e.next)}t.value=a}function d(t,s,u,c){if(!t.value)return!0;var h=t.x-e.x,d=t.y-e.y,f=c-s,p=h*h+d*d;if(f*f/l<p)return p<a&&(0===h&&(p+=(h=pE(n))*h),0===d&&(p+=(d=pE(n))*d),p<o&&(p=Math.sqrt(o*p)),e.vx+=h*t.value*i/p,e.vy+=d*t.value*i/p),!0;if(!(t.length||p>=a)){(t.data!==e||t.next)&&(0===h&&(p+=(h=pE(n))*h),0===d&&(p+=(d=pE(n))*d),p<o&&(p=Math.sqrt(o*p)));do{t.data!==e&&(e.vx+=h*(f=r[t.data.index]*i/p),e.vy+=d*f)}while(t=t.next)}}return u.initialize=function(e,i){t=e,n=i,c()},u.strength=function(t){return arguments.length?(s="function"==typeof t?t:fE(+t),c(),u):s},u.distanceMin=function(t){return arguments.length?(o=t*t,u):Math.sqrt(o)},u.distanceMax=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.theta=function(t){return arguments.length?(l=t*t,u):Math.sqrt(l)},u},link:function(t){var e,n,i,r,s,o,a=HE,l=function(t){return 1/Math.min(r[t.source.index],r[t.target.index])},u=fE(30),c=1;function h(i){for(var r=0,a=t.length;r<c;++r)for(var l,u,h,d,f,p,m,g=0;g<a;++g)d=(h=(l=t[g]).target).x+h.vx-(u=l.source).x-u.vx||pE(o),f=h.y+h.vy-u.y-u.vy||pE(o),f*=p=((p=Math.sqrt(d*d+f*f))-n[g])/p*i*e[g],h.vx-=(d*=p)*(m=s[g]),h.vy-=f*m,u.vx+=d*(m=1-m),u.vy+=f*m}function d(){if(i){var o,l,u=i.length,c=t.length,h=new Map(i.map((t,e)=>[a(t,e,i),t]));for(o=0,r=new Array(u);o<c;++o)(l=t[o]).index=o,"object"!=typeof l.source&&(l.source=WE(h,l.source)),"object"!=typeof l.target&&(l.target=WE(h,l.target)),r[l.source.index]=(r[l.source.index]||0)+1,r[l.target.index]=(r[l.target.index]||0)+1;for(o=0,s=new Array(c);o<c;++o)s[o]=r[(l=t[o]).source.index]/(r[l.source.index]+r[l.target.index]);e=new Array(c),f(),n=new Array(c),p()}}function f(){if(i)for(var n=0,r=t.length;n<r;++n)e[n]=+l(t[n],n,t)}function p(){if(i)for(var e=0,r=t.length;e<r;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),h.initialize=function(t,e){i=t,o=e,d()},h.links=function(e){return arguments.length?(t=e,d(),h):t},h.id=function(t){return arguments.length?(a=t,h):a},h.iterations=function(t){return arguments.length?(c=+t,h):c},h.strength=function(t){return arguments.length?(l="function"==typeof t?t:fE(+t),f(),h):l},h.distance=function(t){return arguments.length?(u="function"==typeof t?t:fE(+t),p(),h):u},h},x:function(t){var e,n,i,r=fE(.1);function s(t){for(var r,s=0,o=e.length;s<o;++s)(r=e[s]).vx+=(i[s]-r.x)*n[s]*t}function o(){if(e){var s,o=e.length;for(n=new Array(o),i=new Array(o),s=0;s<o;++s)n[s]=isNaN(i[s]=+t(e[s],s,e))?0:+r(e[s],s,e)}}return"function"!=typeof t&&(t=fE(null==t?0:+t)),s.initialize=function(t){e=t,o()},s.strength=function(t){return arguments.length?(r="function"==typeof t?t:fE(+t),o(),s):r},s.x=function(e){return arguments.length?(t="function"==typeof e?e:fE(+e),o(),s):t},s},y:function(t){var e,n,i,r=fE(.1);function s(t){for(var r,s=0,o=e.length;s<o;++s)(r=e[s]).vy+=(i[s]-r.y)*n[s]*t}function o(){if(e){var s,o=e.length;for(n=new Array(o),i=new Array(o),s=0;s<o;++s)n[s]=isNaN(i[s]=+t(e[s],s,e))?0:+r(e[s],s,e)}}return"function"!=typeof t&&(t=fE(null==t?0:+t)),s.initialize=function(t){e=t,o()},s.strength=function(t){return arguments.length?(r="function"==typeof t?t:fE(+t),o(),s):r},s.y=function(e){return arguments.length?(t="function"==typeof e?e:fE(+e),o(),s):t},s}},XE="forces",YE=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],KE=["static","iterations"],ZE=["x","y","vx","vy"];function QE(t){Po.call(this,null,t)}function JE(t,e,n,i){var r,s,o,a,l=(0,de.IX)(e.forces);for(r=0,s=YE.length;r<s;++r)(o=YE[r])!==XE&&e.modified(o)&&t[o](e[o]);for(r=0,s=l.length;r<s;++r)a=XE+r,(o=n||e.modified(XE,r)?ek(l[r]):i&&tk(l[r],i)?t.force(a):null)&&t.force(a,o);for(s=t.numForces||0;r<s;++r)t.force(XE+r,null);return t.numForces=l.length,t}function tk(t,e){var n,i;for(n in t)if((0,de.mf)(i=t[n])&&e.modified((0,de.Oj)(i)))return 1;return 0}function ek(t){var e,n;for(n in(0,de.nr)(GE,t.force)||(0,de.vU)("Unrecognized force: "+t.force),e=GE[t.force](),t)(0,de.mf)(e[n])&&nk(e[n],t[n],t);return e}function nk(t,e,n){t((0,de.mf)(e)?t=>e(t,n):e)}function ik(t){var e=0,n=t.children,i=n&&n.length;if(i)for(;--i>=0;)e+=n[i].value;else e=1;t.value=e}function rk(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=ok)):void 0===e&&(e=sk);for(var n,i,r,s,o,a=new uk(t),l=[a];n=l.pop();)if((r=e(n.data))&&(o=(r=Array.from(r)).length))for(n.children=r,s=o-1;s>=0;--s)l.push(i=r[s]=new uk(r[s])),i.parent=n,i.depth=n.depth+1;return a.eachBefore(lk)}function sk(t){return t.children}function ok(t){return Array.isArray(t)?t[1]:null}function ak(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function lk(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function uk(t){this.data=t,this.depth=this.height=0,this.parent=null}function ck(t,e){var n,i;if(fk(e,t))return[e];for(n=0;n<t.length;++n)if(hk(e,t[n])&&fk(mk(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(hk(mk(t[n],t[i]),e)&&hk(mk(t[n],e),t[i])&&hk(mk(t[i],e),t[n])&&fk(gk(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}function hk(t,e){var n=t.r-e.r,i=e.x-t.x,r=e.y-t.y;return n<0||n*n<i*i+r*r}function dk(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),i=e.x-t.x,r=e.y-t.y;return n>0&&n*n>i*i+r*r}function fk(t,e){for(var n=0;n<e.length;++n)if(!dk(t,e[n]))return!1;return!0}function pk(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return mk(t[0],t[1]);case 3:return gk(t[0],t[1],t[2])}var e}function mk(t,e){var n=t.x,i=t.y,r=t.r,s=e.x,o=e.y,a=e.r,l=s-n,u=o-i,c=a-r,h=Math.sqrt(l*l+u*u);return{x:(n+s+l/h*c)/2,y:(i+o+u/h*c)/2,r:(h+r+a)/2}}function gk(t,e,n){var i=t.x,r=t.y,s=t.r,o=e.x,a=e.y,l=e.r,u=n.x,c=n.y,h=n.r,d=i-o,f=i-u,p=r-a,m=r-c,g=l-s,y=h-s,v=i*i+r*r-s*s,_=v-o*o-a*a+l*l,b=v-u*u-c*c+h*h,x=f*p-d*m,w=(p*b-m*_)/(2*x)-i,C=(m*g-p*y)/x,A=(f*_-d*b)/(2*x)-r,E=(d*y-f*g)/x,k=C*C+E*E-1,D=2*(s+w*C+A*E),S=w*w+A*A-s*s,F=-(k?(D+Math.sqrt(D*D-4*k*S))/(2*k):S/D);return{x:i+w+C*F,y:r+A+E*F,r:F}}function yk(t,e,n){var i,r,s,o,a=t.x-e.x,l=t.y-e.y,u=a*a+l*l;u?(r=e.r+n.r,o=t.r+n.r,(r*=r)>(o*=o)?(i=(u+o-r)/(2*u),s=Math.sqrt(Math.max(0,o/u-i*i)),n.x=t.x-i*a-s*l,n.y=t.y-i*l+s*a):(i=(u+r-o)/(2*u),s=Math.sqrt(Math.max(0,r/u-i*i)),n.x=e.x+i*a-s*l,n.y=e.y+i*l+s*a)):(n.x=e.x+n.r,n.y=e.y)}function vk(t,e){var n=t.r+e.r-1e-6,i=e.x-t.x,r=e.y-t.y;return n>0&&n*n>i*i+r*r}function _k(t){var e=t._,n=t.next._,i=e.r+n.r,r=(e.x*n.r+n.x*e.r)/i,s=(e.y*n.r+n.y*e.r)/i;return r*r+s*s}function bk(t){this._=t,this.next=null,this.previous=null}function xk(t){return null==t?null:wk(t)}function wk(t){if("function"!=typeof t)throw new Error;return t}function Ck(){return 0}function Ak(t){return function(){return t}}function Ek(t){return Math.sqrt(t.value)}function kk(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Dk(t,e){return function(n){if(i=n.children){var i,r,s,o=i.length,a=t(n)*e||0;if(a)for(r=0;r<o;++r)i[r].r+=a;if(s=function(t){if(!(r=(t=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(t)).length))return 0;var e,n,i,r,s,o,a,l,u,c,h;if((e=t[0]).x=0,e.y=0,!(r>1))return e.r;if(e.x=-(n=t[1]).r,n.x=e.r,n.y=0,!(r>2))return e.r+n.r;yk(n,e,i=t[2]),e=new bk(e),n=new bk(n),i=new bk(i),e.next=i.previous=n,n.next=e.previous=i,i.next=n.previous=e;t:for(a=3;a<r;++a){yk(e._,n._,i=t[a]),i=new bk(i),l=n.next,u=e.previous,c=n._.r,h=e._.r;do{if(c<=h){if(vk(l._,i._)){e.next=n=l,n.previous=e,--a;continue t}c+=l._.r,l=l.next}else{if(vk(u._,i._)){(e=u).next=n,n.previous=e,--a;continue t}h+=u._.r,u=u.previous}}while(l!==u.next);for(i.previous=e,i.next=n,e.next=n.previous=n=i,s=_k(e);(i=i.next)!==n;)(o=_k(i))<s&&(e=i,s=o);n=e.next}for(e=[n._],i=n;(i=i.next)!==n;)e.push(i._);for(i=function(t){for(var e,n,i=0,r=(t=function(t){for(var e,n,i=t.length;i;)n=Math.random()*i--|0,e=t[i],t[i]=t[n],t[n]=e;return t}(Array.from(t))).length,s=[];i<r;)e=t[i],n&&dk(n,e)?++i:(n=pk(s=ck(s,e)),i=0);return n}(e),a=0;a<r;++a)(e=t[a]).x-=i.x,e.y-=i.y;return i.r}(i),a)for(r=0;r<o;++r)i[r].r-=a;n.r=s+a}}}function Sk(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function Fk(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Ok(t,e,n,i,r){for(var s,o=t.children,a=-1,l=o.length,u=t.value&&(i-e)/t.value;++a<l;)(s=o[a]).y0=n,s.y1=r,s.x0=e,s.x1=e+=s.value*u}QE.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:ZE}]},(0,de.XW)(QE,Po,{transform(t,e){var n,i,r=this.value,s=e.changed(e.ADD_REM),o=t.modified(YE),a=t.iterations||300;if(r?(s&&(e.modifies("index"),r.nodes(e.source)),(o||e.changed(e.MOD))&&JE(r,t,0,e)):(this.value=r=function(t,e){const n=function(t){var e,n=1,i=.001,r=1-Math.pow(i,1/300),s=0,o=.6,a=new Map,l=NE(h),u=CE("tick","end"),c=function(){let t=1;return()=>(t=(1664525*t+1013904223)%jE)/jE}();function h(){d(),u.call("tick",e),n<i&&(l.stop(),u.call("end",e))}function d(i){var l,u,c=t.length;void 0===i&&(i=1);for(var h=0;h<i;++h)for(n+=(s-n)*r,a.forEach(function(t){t(n)}),l=0;l<c;++l)null==(u=t[l]).fx?u.x+=u.vx*=o:(u.x=u.fx,u.vx=0),null==u.fy?u.y+=u.vy*=o:(u.y=u.fy,u.vy=0);return e}function f(){for(var e,n=0,i=t.length;n<i;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var r=10*Math.sqrt(.5+n),s=n*qE;e.x=r*Math.cos(s),e.y=r*Math.sin(s)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,c),e}return null==t&&(t=[]),f(),e={tick:d,restart:function(){return l.restart(h),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,f(),a.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(i=+t,e):i},alphaDecay:function(t){return arguments.length?(r=+t,e):+r},alphaTarget:function(t){return arguments.length?(s=+t,e):s},velocityDecay:function(t){return arguments.length?(o=1-t,e):1-o},randomSource:function(t){return arguments.length?(c=t,a.forEach(p),e):c},force:function(t,n){return arguments.length>1?(null==n?a.delete(t):a.set(t,p(n)),e):a.get(t)},find:function(e,n,i){var r,s,o,a,l,u=0,c=t.length;for(null==i?i=1/0:i*=i,u=0;u<c;++u)(o=(r=e-(a=t[u]).x)*r+(s=n-a.y)*s)<i&&(l=a,i=o);return l},on:function(t,n){return arguments.length>1?(u.on(t,n),e):u.on(t)}}}(t),i=n.stop,r=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,r()),n.stop=()=>(s=!0,i()),JE(n,e,!0).on("end",()=>s=!0)}(e.source,t),r.on("tick",(n=e.dataflow,i=this,()=>n.touch(i).run())),t.static||(s=!0,r.tick()),e.modifies("index")),o||s||t.modified(KE)||e.changed()&&t.restart)if(r.alpha(Math.max(r.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(r.alphaMin(),1/a)),t.static)for(r.stop();--a>=0;)r.tick();else if(r.stopped()&&r.restart(),!s)return e.StopPropagation;return this.finish(t,e)},finish(t,e){const n=e.dataflow;for(let a,l=this._argops,u=0,c=l.length;u<c;++u)if(a=l[u],a.name===XE&&"link"===a.op._argval.force)for(var i,r=a.op._argops,s=0,o=r.length;s<o;++s)if("links"===r[s].name&&(i=r[s].op.source)){n.pulse(i,n.changeset().reflow());break}return e.reflow(t.modified()).modifies(ZE)}}),uk.prototype=rk.prototype={constructor:uk,count:function(){return this.eachAfter(ik)},each:function(t,e){let n=-1;for(const i of this)t.call(e,i,++n,this);return this},eachAfter:function(t,e){for(var n,i,r,s=this,o=[s],a=[],l=-1;s=o.pop();)if(a.push(s),n=s.children)for(i=0,r=n.length;i<r;++i)o.push(n[i]);for(;s=a.pop();)t.call(e,s,++l,this);return this},eachBefore:function(t,e){for(var n,i,r=this,s=[r],o=-1;r=s.pop();)if(t.call(e,r,++o,this),n=r.children)for(i=n.length-1;i>=0;--i)s.push(n[i]);return this},find:function(t,e){let n=-1;for(const i of this)if(t.call(e,i,++n,this))return i},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,r=i&&i.length;--r>=0;)n+=i[r].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),r=null;for(t=n.pop(),e=i.pop();t===e;)r=t,t=n.pop(),e=i.pop();return r}(e,t),i=[e];e!==n;)i.push(e=e.parent);for(var r=i.length;t!==n;)i.splice(r,0,t),t=t.parent;return i},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return rk(this).eachBefore(ak)},[Symbol.iterator]:function*(){var t,e,n,i,r=this,s=[r];do{for(t=s.reverse(),s=[];r=t.pop();)if(yield r,e=r.children)for(n=0,i=e.length;n<i;++n)s.push(e[n])}while(s.length)}};var Mk={depth:-1},Tk={};function Pk(t){return t.id}function Rk(t){return t.parentId}function Bk(){var t=Pk,e=Rk;function n(n){var i,r,s,o,a,l,u,c=Array.from(n),h=c.length,d=new Map;for(r=0;r<h;++r)a=c[r]=new uk(i=c[r]),null!=(l=t(i,r,n))&&(l+="")&&(u=a.id=l,d.set(u,d.has(u)?Tk:a)),null!=(l=e(i,r,n))&&(l+="")&&(a.parent=l);for(r=0;r<h;++r)if(l=(a=c[r]).parent){if(!(o=d.get(l)))throw new Error("missing: "+l);if(o===Tk)throw new Error("ambiguous: "+l);o.children?o.children.push(a):o.children=[a],a.parent=o}else{if(s)throw new Error("multiple roots");s=a}if(!s)throw new Error("no root");if(s.parent=Mk,s.eachBefore(function(t){t.depth=t.parent.depth+1,--h}).eachBefore(lk),s.parent=null,h>0)throw new Error("cycle");return s}return n.id=function(e){return arguments.length?(t=wk(e),n):t},n.parentId=function(t){return arguments.length?(e=wk(t),n):e},n}function Ik(t,e){return t.parent===e.parent?1:2}function Nk(t){var e=t.children;return e?e[0]:t.t}function Lk(t){var e=t.children;return e?e[e.length-1]:t.t}function $k(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function zk(t,e,n){return t.a.parent===e.parent?t.a:n}function jk(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function Uk(t,e){return t.parent===e.parent?1:2}function Vk(t,e){return t+e.x}function qk(t,e){return Math.max(t,e.y)}function Hk(t,e,n,i,r){for(var s,o=t.children,a=-1,l=o.length,u=t.value&&(r-n)/t.value;++a<l;)(s=o[a]).x0=e,s.x1=i,s.y0=n,s.y1=n+=s.value*u}jk.prototype=Object.create(uk.prototype);var Wk=(1+Math.sqrt(5))/2;function Gk(t,e,n,i,r,s){for(var o,a,l,u,c,h,d,f,p,m,g,y=[],v=e.children,_=0,b=0,x=v.length,w=e.value;_<x;){l=r-n,u=s-i;do{c=v[b++].value}while(!c&&b<x);for(h=d=c,g=c*c*(m=Math.max(u/l,l/u)/(w*t)),p=Math.max(d/g,g/h);b<x;++b){if(c+=a=v[b].value,a<h&&(h=a),a>d&&(d=a),g=c*c*m,(f=Math.max(d/g,g/h))>p){c-=a;break}p=f}y.push(o={value:c,dice:l<u,children:v.slice(_,b)}),o.dice?Ok(o,n,i,r,w?i+=u*c/w:s):Hk(o,n,i,w?n+=l*c/w:r,s),w-=c,_=b}return y}const Xk=function t(e){function n(t,n,i,r,s){Gk(e,t,n,i,r,s)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Wk),Yk=function t(e){function n(t,n,i,r,s){if((o=t._squarify)&&o.ratio===e)for(var o,a,l,u,c,h=-1,d=o.length,f=t.value;++h<d;){for(l=(a=o[h]).children,u=a.value=0,c=l.length;u<c;++u)a.value+=l[u].value;a.dice?Ok(a,n,i,r,f?i+=(s-i)*a.value/f:s):Hk(a,n,i,f?n+=(r-n)*a.value/f:r,s),f-=a.value}else t._squarify=o=Gk(e,t,n,i,r,s),o.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(Wk);function Kk(t,e,n){const i={};return t.each(t=>{const r=t.data;n(r)&&(i[e(r)]=t)}),t.lookup=i,t}function Zk(t){Po.call(this,null,t)}Zk.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const Qk=t=>t.values;function Jk(){const t=[],e={entries:t=>i(n(t,0),0),key:n=>(t.push(n),e)};function n(e,i){if(i>=t.length)return e;const r=e.length,s=t[i++],o={},a={};let l,u,c,h=-1;for(;++h<r;)l=s(u=e[h])+"",(c=o[l])?c.push(u):o[l]=[u];for(l in o)a[l]=n(o[l],i);return a}function i(e,n){if(++n>t.length)return e;const r=[];for(const t in e)r.push({key:t,values:i(e[t],n)});return r}return e}function tD(t){Po.call(this,null,t)}(0,de.XW)(Zk,Po,{transform(t,e){e.source||(0,de.vU)("Nest transform requires an upstream data source.");var n=t.generate,i=t.modified(),r=e.clone(),s=this.value;return(!s||i||e.changed())&&(s&&s.each(t=>{t.children&&Js(t.data)&&r.rem.push(t.data)}),this.value=s=rk({values:(0,de.IX)(t.keys).reduce((t,e)=>(t.key(e),t),Jk()).entries(r.source)},Qk),n&&s.each(t=>{t.children&&(t=no(t.data),r.add.push(t),r.source.push(t))}),Kk(s,to,to)),r.source.root=s,r}});const eD=(t,e)=>t.parent===e.parent?1:2;(0,de.XW)(tD,Po,{transform(t,e){e.source&&e.source.root||(0,de.vU)(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(t.method),i=this.fields,r=e.source.root,s=t.as||i;t.field?r.sum(t.field):r.count(),t.sort&&r.sort(oo(t.sort,t=>t.data)),function(t,e,n){for(let i,r=0,s=e.length;r<s;++r)i=e[r],i in n&&t[i](n[i])}(n,this.params,t),n.separation&&n.separation(!1!==t.separation?eD:de.kX);try{this.value=n(r)}catch(o){(0,de.vU)(o)}return r.each(t=>function(t,e,n){const i=t.data,r=e.length-1;for(let s=0;s<r;++s)i[n[s]]=t[e[s]];i[n[r]]=t.children?t.children.length:0}(t,i,s)),e.reflow(t.modified()).modifies(s).modifies("leaf")}});const nD=["x","y","r","depth","children"];function iD(t){tD.call(this,t)}iD.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:nD.length,default:nD}]},(0,de.XW)(iD,tD,{layout:function(){var t=null,e=1,n=1,i=Ck;function r(r){return r.x=e/2,r.y=n/2,t?r.eachBefore(kk(t)).eachAfter(Dk(i,.5)).eachBefore(Sk(1)):r.eachBefore(kk(Ek)).eachAfter(Dk(Ck,1)).eachAfter(Dk(i,r.r/Math.min(e,n))).eachBefore(Sk(Math.min(e,n)/(2*r.r))),r}return r.radius=function(e){return arguments.length?(t=xk(e),r):t},r.size=function(t){return arguments.length?(e=+t[0],n=+t[1],r):[e,n]},r.padding=function(t){return arguments.length?(i="function"==typeof t?t:Ak(+t),r):i},r},params:["radius","size","padding"],fields:nD});const rD=["x0","y0","x1","y1","depth","children"];function sD(t){tD.call(this,t)}function oD(t){Po.call(this,null,t)}sD.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:rD.length,default:rD}]},(0,de.XW)(sD,tD,{layout:function(){var t=1,e=1,n=0,i=!1;function r(r){var s=r.height+1;return r.x0=r.y0=n,r.x1=t,r.y1=e/s,r.eachBefore(function(t,e){return function(i){i.children&&Ok(i,i.x0,t*(i.depth+1)/e,i.x1,t*(i.depth+2)/e);var r=i.x0,s=i.y0,o=i.x1-n,a=i.y1-n;o<r&&(r=o=(r+o)/2),a<s&&(s=a=(s+a)/2),i.x0=r,i.y0=s,i.x1=o,i.y1=a}}(e,s)),i&&r.eachBefore(Fk),r}return r.round=function(t){return arguments.length?(i=!!t,r):i},r.size=function(n){return arguments.length?(t=+n[0],e=+n[1],r):[t,e]},r.padding=function(t){return arguments.length?(n=+t,r):n},r},params:["size","round","padding"],fields:rD}),oD.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},(0,de.XW)(oD,Po,{transform(t,e){e.source||(0,de.vU)("Stratify transform requires an upstream data source.");let n=this.value;const i=t.modified(),r=e.fork(e.ALL).materialize(e.SOURCE),s=!n||i||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields);return r.source=r.source.slice(),s&&(n=r.source.length?Kk(Bk().id(t.key).parentId(t.parentKey)(r.source),t.key,de.yb):Kk(Bk()([{}]),t.key,t.key)),r.source.root=this.value=n,r}});const aD={tidy:function(){var t=Ik,e=1,n=1,i=null;function r(r){var l=function(t){for(var e,n,i,r,s,o=new jk(t,0),a=[o];e=a.pop();)if(i=e._.children)for(e.children=new Array(s=i.length),r=s-1;r>=0;--r)a.push(n=e.children[r]=new jk(i[r],r)),n.parent=e;return(o.parent=new jk(null,0)).children=[o],o}(r);if(l.eachAfter(s),l.parent.m=-l.z,l.eachBefore(o),i)r.eachBefore(a);else{var u=r,c=r,h=r;r.eachBefore(function(t){t.x<u.x&&(u=t),t.x>c.x&&(c=t),t.depth>h.depth&&(h=t)});var d=u===c?1:t(u,c)/2,f=d-u.x,p=e/(c.x+d+f),m=n/(h.depth||1);r.eachBefore(function(t){t.x=(t.x+f)*p,t.y=t.depth*m})}return r}function s(e){var n=e.children,i=e.parent.children,r=e.i?i[e.i-1]:null;if(n){!function(t){for(var e,n=0,i=0,r=t.children,s=r.length;--s>=0;)(e=r[s]).z+=n,e.m+=n,n+=e.s+(i+=e.c)}(e);var s=(n[0].z+n[n.length-1].z)/2;r?(e.z=r.z+t(e._,r._),e.m=e.z-s):e.z=s}else r&&(e.z=r.z+t(e._,r._));e.parent.A=function(e,n,i){if(n){for(var r,s=e,o=e,a=n,l=s.parent.children[0],u=s.m,c=o.m,h=a.m,d=l.m;a=Lk(a),s=Nk(s),a&&s;)l=Nk(l),(o=Lk(o)).a=e,(r=a.z+h-s.z-u+t(a._,s._))>0&&($k(zk(a,e,i),e,r),u+=r,c+=r),h+=a.m,u+=s.m,d+=l.m,c+=o.m;a&&!Lk(o)&&(o.t=a,o.m+=h-c),s&&!Nk(l)&&(l.t=s,l.m+=u-d,i=e)}return i}(e,r,e.parent.A||i[0])}function o(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function a(t){t.x*=e,t.y=t.depth*n}return r.separation=function(e){return arguments.length?(t=e,r):t},r.size=function(t){return arguments.length?(i=!1,e=+t[0],n=+t[1],r):i?null:[e,n]},r.nodeSize=function(t){return arguments.length?(i=!0,e=+t[0],n=+t[1],r):i?[e,n]:null},r},cluster:function(){var t=Uk,e=1,n=1,i=!1;function r(r){var s,o=0;r.eachAfter(function(e){var n=e.children;n?(e.x=function(t){return t.reduce(Vk,0)/t.length}(n),e.y=function(t){return 1+t.reduce(qk,0)}(n)):(e.x=s?o+=t(e,s):0,e.y=0,s=e)});var a=function(t){for(var e;e=t.children;)t=e[0];return t}(r),l=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(r),u=a.x-t(a,l)/2,c=l.x+t(l,a)/2;return r.eachAfter(i?function(t){t.x=(t.x-r.x)*e,t.y=(r.y-t.y)*n}:function(t){t.x=(t.x-u)/(c-u)*e,t.y=(1-(r.y?t.y/r.y:1))*n})}return r.separation=function(e){return arguments.length?(t=e,r):t},r.size=function(t){return arguments.length?(i=!1,e=+t[0],n=+t[1],r):i?null:[e,n]},r.nodeSize=function(t){return arguments.length?(i=!0,e=+t[0],n=+t[1],r):i?[e,n]:null},r}},lD=["x","y","depth","children"];function uD(t){tD.call(this,t)}function cD(t){Po.call(this,[],t)}uD.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:lD.length,default:lD}]},(0,de.XW)(uD,tD,{layout(t){const e=t||"tidy";if((0,de.nr)(aD,e))return aD[e]();(0,de.vU)("Unrecognized Tree layout method: "+e)},params:["size","nodeSize"],fields:lD}),cD.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},(0,de.XW)(cD,Po,{transform(t,e){const n=this.value,i=e.source&&e.source.root,r=e.fork(e.NO_SOURCE),s={};return i||(0,de.vU)("TreeLinks transform requires a tree data source."),e.changed(e.ADD_REM)?(r.rem=n,e.visit(e.SOURCE,t=>s[to(t)]=1),i.each(t=>{const e=t.data,n=t.parent&&t.parent.data;n&&s[to(e)]&&s[to(n)]&&r.add.push(no({source:n,target:e}))}),this.value=r.add):e.changed(e.MOD)&&(e.visit(e.MOD,t=>s[to(t)]=1),n.forEach(t=>{(s[to(t.source)]||s[to(t.target)])&&r.mod.push(t)})),r}});const hD={binary:function(t,e,n,i,r){var s,o,a=t.children,l=a.length,u=new Array(l+1);for(u[0]=o=s=0;s<l;++s)u[s+1]=o+=a[s].value;!function t(e,n,i,r,s,o,l){if(e>=n-1){var c=a[e];return c.x0=r,c.y0=s,c.x1=o,void(c.y1=l)}for(var h=u[e],d=i/2+h,f=e+1,p=n-1;f<p;){var m=f+p>>>1;u[m]<d?f=m+1:p=m}d-u[f-1]<u[f]-d&&e+1<f&&--f;var g=u[f]-h,y=i-g;if(o-r>l-s){var v=i?(r*y+o*g)/i:o;t(e,f,g,r,s,v,l),t(f,n,y,v,s,o,l)}else{var _=i?(s*y+l*g)/i:l;t(e,f,g,r,s,o,_),t(f,n,y,r,_,o,l)}}(0,l,t.value,e,n,i,r)},dice:Ok,slice:Hk,slicedice:function(t,e,n,i,r){(1&t.depth?Hk:Ok)(t,e,n,i,r)},squarify:Xk,resquarify:Yk},dD=["x0","y0","x1","y1","depth","children"];function fD(t){tD.call(this,t)}function pD(t,e,n,i){const r=t.width,s=t.height,o=n||i,a=Jc(r,s).getContext("2d");e.forEach(t=>mD(a,t,o));const l=new Uint32Array(a.getImageData(0,0,r,s).data.buffer),u=t.bitmap(),c=o&&t.bitmap();let h,d,f,p,m;for(d=0;d<s;++d)for(h=0;h<r;++h)m=4278190080&l[d*r+h],m&&(f=t(h),p=t(d),i||u.set(f,p),o&&268435456^m&&c.set(f,p));return[u,c]}function mD(t,e,n){if(!e.length)return;const i=e[0].mark.marktype;"group"===i?e.forEach(e=>{e.items.forEach(e=>mD(t,e.items,n))}):nv[i].draw(t,{items:n?e.map(gD):e})}function gD(t){const e=ro(t,{});return e.stroke&&(e.strokeOpacity=1),e.fill&&(e.fillOpacity=.0625,e.stroke="#000",e.strokeOpacity=1,e.strokeWidth=2),e}fD.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:dD.length,default:dD}]},(0,de.XW)(fD,tD,{layout(){const t=function(){var t=Xk,e=!1,n=1,i=1,r=[0],s=Ck,o=Ck,a=Ck,l=Ck,u=Ck;function c(t){return t.x0=t.y0=0,t.x1=n,t.y1=i,t.eachBefore(h),r=[0],e&&t.eachBefore(Fk),t}function h(e){var n=r[e.depth],i=e.x0+n,c=e.y0+n,h=e.x1-n,d=e.y1-n;h<i&&(i=h=(i+h)/2),d<c&&(c=d=(c+d)/2),e.x0=i,e.y0=c,e.x1=h,e.y1=d,e.children&&(n=r[e.depth+1]=s(e)/2,i+=u(e)-n,c+=o(e)-n,(h-=a(e)-n)<i&&(i=h=(i+h)/2),(d-=l(e)-n)<c&&(c=d=(c+d)/2),t(e,i,c,h,d))}return c.round=function(t){return arguments.length?(e=!!t,c):e},c.size=function(t){return arguments.length?(n=+t[0],i=+t[1],c):[n,i]},c.tile=function(e){return arguments.length?(t=wk(e),c):t},c.padding=function(t){return arguments.length?c.paddingInner(t).paddingOuter(t):c.paddingInner()},c.paddingInner=function(t){return arguments.length?(s="function"==typeof t?t:Ak(+t),c):s},c.paddingOuter=function(t){return arguments.length?c.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):c.paddingTop()},c.paddingTop=function(t){return arguments.length?(o="function"==typeof t?t:Ak(+t),c):o},c.paddingRight=function(t){return arguments.length?(a="function"==typeof t?t:Ak(+t),c):a},c.paddingBottom=function(t){return arguments.length?(l="function"==typeof t?t:Ak(+t),c):l},c.paddingLeft=function(t){return arguments.length?(u="function"==typeof t?t:Ak(+t),c):u},c}();return t.ratio=e=>{const n=t.tile();n.ratio&&t.tile(n.ratio(e))},t.method=e=>{(0,de.nr)(hD,e)?t.tile(hD[e]):(0,de.vU)("Unrecognized Treemap layout method: "+e)},t},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:dD});const yD=31,vD=new Uint32Array(33),_D=new Uint32Array(33);_D[0]=0,vD[0]=~_D[0];for(let UN=1;UN<=32;++UN)_D[UN]=_D[UN-1]<<1|1,vD[UN]=~_D[UN];function bD(t,e,n,i,r,s){let o=n/2;return t-o<0||t+o>r||e-(o=i/2)<0||e+o>s}function xD(t,e,n,i,r,s,o,a){const l=r*s/(2*i),u=t(e-l),c=t(e+l),h=t(n-(s/=2)),d=t(n+s);return o.outOfBounds(u,h,c,d)||o.getRange(u,h,c,d)||a&&a.getRange(u,h,c,d)}const wD=[-1,-1,1,1],CD=[-1,1,-1,1],AD=["right","center","left"],ED=["bottom","middle","top"];function kD(t,e,n,i,r,s,o,a,l,u,c,h){return!(r.outOfBounds(t,n,e,i)||(h&&s?s.getRange(t,n,e,i)||!function(t,e,n,i,r){return r[0]<=t&&n<=r[2]&&r[3]<=e&&i<=r[5]}(o,l,a,u,c):r.getRange(t,n,e,i)))}const DD={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},SD={naive:function(t,e,n,i){const r=t.width,s=t.height;return function(t){const e=t.datum.datum.items[i].items,n=e.length,o=t.datum.fontSize,a=Ly.width(t.datum,t.datum.text);let l,u,c,h,d,f,p,m=0;for(let i=0;i<n;++i)l=e[i].x,c=e[i].y,u=void 0===e[i].x2?l:e[i].x2,h=void 0===e[i].y2?c:e[i].y2,d=(l+u)/2,f=(c+h)/2,p=Math.abs(u-l+h-c),p>=m&&(m=p,t.x=d,t.y=f);return d=a/2,f=o/2,l=t.x-d,u=t.x+d,c=t.y-f,h=t.y+f,t.align="center",l<0&&u<=r?t.align="left":0<=l&&r<u&&(t.align="right"),t.baseline="middle",c<0&&h<=s?t.baseline="top":0<=c&&s<h&&(t.baseline="bottom"),!0}},"reduced-search":function(t,e,n,i){const r=t.width,s=t.height,o=e[0],a=e[1];function l(e,n,i,l,u){const c=t.invert(e),h=t.invert(n);let d,f=i,p=s;if(!bD(c,h,l,u,r,s)&&!xD(t,c,h,u,l,f,o,a)&&!xD(t,c,h,u,l,u,o,null)){for(;p-f>=1;)d=(f+p)/2,xD(t,c,h,u,l,d,o,a)?p=d:f=d;if(f>i)return[c,h,f,!0]}}return function(e){const a=e.datum.datum.items[i].items,u=a.length,c=e.datum.fontSize,h=Ly.width(e.datum,e.datum.text);let d,f,p,m,g,y,v,_,b,x,w,C,A,E,k,D,S,F=n?c:0,O=!1,M=!1,T=0;for(let i=0;i<u;++i){for(d=a[i].x,p=a[i].y,f=void 0===a[i].x2?d:a[i].x2,m=void 0===a[i].y2?p:a[i].y2,d>f&&(S=d,d=f,f=S),p>m&&(S=p,p=m,m=S),b=t(d),w=t(f),x=~~((b+w)/2),C=t(p),E=t(m),A=~~((C+E)/2),v=x;v>=b;--v)for(_=A;_>=C;--_)D=l(v,_,F,h,c),D&&([e.x,e.y,F,O]=D);for(v=x;v<=w;++v)for(_=A;_<=E;++_)D=l(v,_,F,h,c),D&&([e.x,e.y,F,O]=D);O||n||(k=Math.abs(f-d+m-p),g=(d+f)/2,y=(p+m)/2,k>=T&&!bD(g,y,h,c,r,s)&&!xD(t,g,y,c,h,c,o,null)&&(T=k,e.x=g,e.y=y,M=!0))}return!(!O&&!M||(g=h/2,y=c/2,o.setRange(t(e.x-g),t(e.y-y),t(e.x+g),t(e.y+y)),e.align="center",e.baseline="middle",0))}},floodfill:function(t,e,n,i){const r=t.width,s=t.height,o=e[0],a=e[1],l=t.bitmap();return function(e){const u=e.datum.datum.items[i].items,c=u.length,h=e.datum.fontSize,d=Ly.width(e.datum,e.datum.text),f=[];let p,m,g,y,v,_,b,x,w,C,A,E,k=n?h:0,D=!1,S=!1,F=0;for(let i=0;i<c;++i){for(p=u[i].x,g=u[i].y,m=void 0===u[i].x2?p:u[i].x2,y=void 0===u[i].y2?g:u[i].y2,f.push([t((p+m)/2),t((g+y)/2)]);f.length;)if([b,x]=f.pop(),!(o.get(b,x)||a.get(b,x)||l.get(b,x))){l.set(b,x);for(let t=0;t<4;++t)v=b+wD[t],_=x+CD[t],l.outOfBounds(v,_,v,_)||f.push([v,_]);if(v=t.invert(b),_=t.invert(x),w=k,C=s,!bD(v,_,d,h,r,s)&&!xD(t,v,_,h,d,w,o,a)&&!xD(t,v,_,h,d,h,o,null)){for(;C-w>=1;)A=(w+C)/2,xD(t,v,_,h,d,A,o,a)?C=A:w=A;w>k&&(e.x=v,e.y=_,k=w,D=!0)}}D||n||(E=Math.abs(m-p+y-g),v=(p+m)/2,_=(g+y)/2,E>=F&&!bD(v,_,d,h,r,s)&&!xD(t,v,_,h,d,h,o,null)&&(F=E,e.x=v,e.y=_,S=!0))}return!(!D&&!S||(v=d/2,_=h/2,o.setRange(t(e.x-v),t(e.y-_),t(e.x+v),t(e.y+_)),e.align="center",e.baseline="middle",0))}}};const FD=["x","y","opacity","align","baseline"],OD=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function MD(t){Po.call(this,null,t)}function TD(t,e){var n,i,r,s,o,a,l=[],u=function(t){return t(s)};if(null==e)l.push(t);else for(n={},i=0,r=t.length;i<r;++i)s=t[i],(a=n[o=e.map(u)])||(n[o]=a=[],a.dims=o,l.push(a)),a.push(s);return l}function PD(t){Po.call(this,null,t)}MD.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:OD},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:FD.length,default:FD}]},(0,de.XW)(MD,Po,{transform(t,e){const n=t.modified();if(!(n||e.changed(e.ADD_REM)||function(n){const i=t.sort;return(0,de.mf)(i)&&e.modified(i.fields)}()))return;t.size&&2===t.size.length||(0,de.vU)("Size parameter should be specified as a [width, height] array.");const i=t.as||FD;return function(t,e,n,i,r,s,o,a,l,u,c){if(!t.length)return t;const h=Math.max(i.length,r.length),d=function(t,e){const n=new Float64Array(e),i=t.length;for(let r=0;r<i;++r)n[r]=t[r]||0;for(let r=i;r<e;++r)n[r]=n[i-1];return n}(i,h),f=function(t,e){const n=new Int8Array(e),i=t.length;for(let r=0;r<i;++r)n[r]|=DD[t[r]];for(let r=i;r<e;++r)n[r]=n[i-1];return n}(r,h),p=(b=t[0].datum)&&b.mark&&b.mark.marktype,m="group"===p&&t[0].datum.items[l].marktype,g="area"===m,y=function(t,e,n,i){const r=t=>[t.x,t.x,t.x,t.y,t.y,t.y];return t?"line"===t||"area"===t?t=>r(t.datum):"line"===e?t=>{const e=t.datum.items[i].items;return r(e.length?e["start"===n?0:e.length-1]:{x:NaN,y:NaN})}:t=>{const e=t.datum.bounds;return[e.x1,(e.x1+e.x2)/2,e.x2,e.y1,(e.y1+e.y2)/2,e.y2]}:r}(p,m,a,l),v=function(t,e,n){const i=Math.max(1,Math.sqrt(t*e/1e6)),r=~~((t+2*n+i)/i),s=~~((e+2*n+i)/i),o=t=>~~((t+n)/i);return o.invert=t=>t*i-n,o.bitmap=()=>function(t,e){const n=new Uint32Array(~~((t*e+32)/32));function i(t,e){n[t]|=e}function r(t,e){n[t]&=e}return{array:n,get:(e,i)=>{const r=i*t+e;return n[r>>>5]&1<<(r&yD)},set:(e,n)=>{const r=n*t+e;i(r>>>5,1<<(r&yD))},clear:(e,n)=>{const i=n*t+e;r(i>>>5,~(1<<(i&yD)))},getRange:(e,i,r,s)=>{let o,a,l,u,c=s;for(;c>=i;--c)if(o=c*t+e,a=c*t+r,l=o>>>5,u=a>>>5,l===u){if(n[l]&vD[o&yD]&_D[1+(a&yD)])return!0}else{if(n[l]&vD[o&yD])return!0;if(n[u]&_D[1+(a&yD)])return!0;for(let t=l+1;t<u;++t)if(n[t])return!0}return!1},setRange:(e,n,r,s)=>{let o,a,l,u,c;for(;n<=s;++n)if(o=n*t+e,a=n*t+r,l=o>>>5,u=a>>>5,l===u)i(l,vD[o&yD]&_D[1+(a&yD)]);else for(i(l,vD[o&yD]),i(u,_D[1+(a&yD)]),c=l+1;c<u;++c)i(c,4294967295)},clearRange:(e,n,i,s)=>{let o,a,l,u,c;for(;n<=s;++n)if(o=n*t+e,a=n*t+i,l=o>>>5,u=a>>>5,l===u)r(l,_D[o&yD]|vD[1+(a&yD)]);else for(r(l,_D[o&yD]),r(u,vD[1+(a&yD)]),c=l+1;c<u;++c)r(c,0)},outOfBounds:(n,i,r,s)=>n<0||i<0||s>=e||r>=t}}(r,s),o.ratio=i,o.padding=n,o.width=t,o.height=e,o}(e[0],e[1],u),_=g&&"naive"===c;var b;const x=t.map(t=>({datum:t,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(t)}));let w;if(!_){n&&x.sort((t,e)=>n(t.datum,e.datum));let e=!1;for(let t=0;t<f.length&&!e;++t)e=5===f[t]||d[t]<0;p&&(o||g)&&(s=[t.map(t=>t.datum)].concat(s)),w=s.length?pD(v,s,e,g):function(t,e){const n=t.bitmap();return(e||[]).forEach(e=>n.set(t(e.boundary[0]),t(e.boundary[3]))),[n,void 0]}(v,o&&x)}const C=g?SD[c](v,w,o,l):function(t,e,n,i){const r=t.width,s=t.height,o=e[0],a=e[1],l=i.length;return function(e){const u=e.boundary,c=e.datum.fontSize;if(u[2]<0||u[5]<0||u[0]>r||u[3]>s)return!1;let h,d,f,p,m,g,y,v,_,b,x,w,C,A,E,k=0;for(let r=0;r<l;++r){if(h=(3&n[r])-1,d=(n[r]>>>2&3)-1,f=0===h&&0===d||i[r]<0,p=h&&d?Math.SQRT1_2:1,m=i[r]<0?-1:1,g=u[1+h]+i[r]*h*p,x=u[4+d]+m*c*d/2+i[r]*d*p,v=x-c/2,_=x+c/2,w=t(g),A=t(v),E=t(_),!k){if(!kD(w,w,A,E,o,a,g,g,v,_,u,f))continue;k=Ly.width(e.datum,e.datum.text)}if(b=g+m*k*h/2,g=b-k/2,y=b+k/2,w=t(g),C=t(y),kD(w,C,A,E,o,a,g,y,v,_,u,f))return e.x=h?h*m<0?y:g:b,e.y=d?d*m<0?_:v:x,e.align=AD[h*m+1],e.baseline=ED[d*m+1],o.setRange(w,A,C,E),!0}return!1}}(v,w,f,d);return x.forEach(t=>t.opacity=+C(t)),x}(e.materialize(e.SOURCE).source,t.size,t.sort,(0,de.IX)(t.offset||1),(0,de.IX)(t.anchor||OD),t.avoidMarks||[],!1!==t.avoidBaseMark,t.lineAnchor||"end",t.markIndex||0,t.padding||0,t.method||"naive").forEach(t=>{const e=t.datum;e[i[0]]=t.x,e[i[1]]=t.y,e[i[2]]=t.opacity,e[i[3]]=t.align,e[i[4]]=t.baseline}),e.reflow(n).modifies(i)}}),PD.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},(0,de.XW)(PD,Po,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const i=TD(e.materialize(e.SOURCE).source,t.groupby),r=(t.groupby||[]).map(de.el),s=r.length,o=t.as||[(0,de.el)(t.x),(0,de.el)(t.y)],a=[];i.forEach(e=>{ll(e,t.x,t.y,t.bandwidth||.3).forEach(t=>{const n={};for(let i=0;i<s;++i)n[r[i]]=e.dims[i];n[o[0]]=t[0],n[o[1]]=t[1],a.push(no(n))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a}return n}});const RD={linear:el,log:nl,exp:il,pow:rl,quad:sl,poly:ol};function BD(t){Po.call(this,null,t)}BD.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(RD)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},(0,de.XW)(BD,Po,{transform(t,e){const n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){const i=TD(e.materialize(e.SOURCE).source,t.groupby),r=(t.groupby||[]).map(de.el),s=t.method||"linear",o=t.order||3,a=((t,e)=>"poly"===t?e:"quad"===t?2:1)(s,o),l=t.as||[(0,de.el)(t.x),(0,de.el)(t.y)],u=RD[s],c=[];let h=t.extent;(0,de.nr)(RD,s)||(0,de.vU)("Invalid regression method: "+s),null!=h&&"log"===s&&h[0]<=0&&(e.dataflow.warn("Ignoring extent with values <= 0 for log regression."),h=null),i.forEach(n=>{if(n.length<=a)return void e.dataflow.warn("Skipping regression with more parameters than data points.");const i=u(n,t.x,t.y,o);if(t.params)return void c.push(no({keys:n.dims,coef:i.coef,rSquared:i.rSquared}));const d=h||(0,de.We)(n,t.x),f=t=>{const e={};for(let i=0;i<r.length;++i)e[r[i]]=n.dims[i];e[l[0]]=t[0],e[l[1]]=t[1],c.push(no(e))};"linear"===s?d.forEach(t=>f([t,i.predict(t)])):dl(i.predict,d,25,200).forEach(f)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});const ID=Math.pow(2,-52),ND=new Uint32Array(512);class LD{static from(t,e=WD,n=GD){const i=t.length,r=new Float64Array(2*i);for(let s=0;s<i;s++){const i=t[s];r[2*s]=e(i),r[2*s+1]=n(i)}return new LD(r)}constructor(t){const e=t.length>>1;if(e>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const n=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:n,_hullTri:i,_hullHash:r}=this,s=t.length>>1;let o=1/0,a=1/0,l=-1/0,u=-1/0;for(let E=0;E<s;E++){const e=t[2*E],n=t[2*E+1];e<o&&(o=e),n<a&&(a=n),e>l&&(l=e),n>u&&(u=n),this._ids[E]=E}const c=(o+l)/2,h=(a+u)/2;let d,f,p,m=1/0;for(let E=0;E<s;E++){const e=$D(c,h,t[2*E],t[2*E+1]);e<m&&(d=E,m=e)}const g=t[2*d],y=t[2*d+1];m=1/0;for(let E=0;E<s;E++){if(E===d)continue;const e=$D(g,y,t[2*E],t[2*E+1]);e<m&&e>0&&(f=E,m=e)}let v=t[2*f],_=t[2*f+1],b=1/0;for(let E=0;E<s;E++){if(E===d||E===f)continue;const e=VD(g,y,v,_,t[2*E],t[2*E+1]);e<b&&(p=E,b=e)}let x=t[2*p],w=t[2*p+1];if(b===1/0){for(let i=0;i<s;i++)this._dists[i]=t[2*i]-t[0]||t[2*i+1]-t[1];qD(this._ids,this._dists,0,s-1);const e=new Uint32Array(s);let n=0;for(let t=0,i=-1/0;t<s;t++){const r=this._ids[t];this._dists[r]>i&&(e[n++]=r,i=this._dists[r])}return this.hull=e.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(jD(g,y,v,_,x,w)){const t=f,e=v,n=_;f=p,v=x,_=w,p=t,x=e,w=n}const C=function(t,e,n,i,r,s){const o=n-t,a=i-e,l=r-t,u=s-e,c=o*o+a*a,h=l*l+u*u,d=.5/(o*u-a*l);return{x:t+(u*c-a*h)*d,y:e+(o*h-l*c)*d}}(g,y,v,_,x,w);this._cx=C.x,this._cy=C.y;for(let E=0;E<s;E++)this._dists[E]=$D(t[2*E],t[2*E+1],C.x,C.y);qD(this._ids,this._dists,0,s-1),this._hullStart=d;let A=3;n[d]=e[p]=f,n[f]=e[d]=p,n[p]=e[f]=d,i[d]=0,i[f]=1,i[p]=2,r.fill(-1),r[this._hashKey(g,y)]=d,r[this._hashKey(v,_)]=f,r[this._hashKey(x,w)]=p,this.trianglesLen=0,this._addTriangle(d,f,p,-1,-1,-1);for(let E,k,D=0;D<this._ids.length;D++){const s=this._ids[D],o=t[2*s],a=t[2*s+1];if(D>0&&Math.abs(o-E)<=ID&&Math.abs(a-k)<=ID)continue;if(E=o,k=a,s===d||s===f||s===p)continue;let l=0;for(let t=0,e=this._hashKey(o,a);t<this._hashSize&&(l=r[(e+t)%this._hashSize],-1===l||l===n[l]);t++);l=e[l];let u,c=l;for(;u=n[c],!jD(o,a,t[2*c],t[2*c+1],t[2*u],t[2*u+1]);)if(c=u,c===l){c=-1;break}if(-1===c)continue;let h=this._addTriangle(c,s,n[c],-1,-1,i[c]);i[s]=this._legalize(h+2),i[c]=h,A++;let m=n[c];for(;u=n[m],jD(o,a,t[2*m],t[2*m+1],t[2*u],t[2*u+1]);)h=this._addTriangle(m,s,u,i[s],-1,i[m]),i[s]=this._legalize(h+2),n[m]=m,A--,m=u;if(c===l)for(;u=e[c],jD(o,a,t[2*u],t[2*u+1],t[2*c],t[2*c+1]);)h=this._addTriangle(u,s,c,-1,i[c],i[u]),this._legalize(h+2),i[u]=h,n[c]=c,A--,c=u;this._hullStart=e[s]=c,n[c]=e[m]=s,n[s]=m,r[this._hashKey(o,a)]=s,r[this._hashKey(t[2*c],t[2*c+1])]=c}this.hull=new Uint32Array(A);for(let E=0,k=this._hullStart;E<A;E++)this.hull[E]=k,k=n[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(function(t,e){const n=t/(Math.abs(t)+Math.abs(e));return(e>0?3-n:1+n)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:n,coords:i}=this;let r=0,s=0;for(;;){const o=n[t],a=t-t%3;if(s=a+(t+2)%3,-1===o){if(0===r)break;t=ND[--r];continue}const l=o-o%3,u=l+(o+2)%3,c=e[s],h=e[t],d=e[a+(t+1)%3],f=e[u];if(UD(i[2*c],i[2*c+1],i[2*h],i[2*h+1],i[2*d],i[2*d+1],i[2*f],i[2*f+1])){e[t]=f,e[o]=c;const i=n[u];if(-1===i){let e=this._hullStart;do{if(this._hullTri[e]===u){this._hullTri[e]=t;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(t,i),this._link(o,n[s]),this._link(s,u);const a=l+(o+1)%3;r<ND.length&&(ND[r++]=a)}else{if(0===r)break;t=ND[--r]}}return s}_link(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}_addTriangle(t,e,n,i,r,s){const o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=e,this._triangles[o+2]=n,this._link(o,i),this._link(o+1,r),this._link(o+2,s),this.trianglesLen+=3,o}}function $D(t,e,n,i){const r=t-n,s=e-i;return r*r+s*s}function zD(t,e,n,i,r,s){const o=(i-e)*(r-t),a=(n-t)*(s-e);return Math.abs(o-a)>=33306690738754716e-32*Math.abs(o+a)?o-a:0}function jD(t,e,n,i,r,s){return(zD(r,s,t,e,n,i)||zD(t,e,n,i,r,s)||zD(n,i,r,s,t,e))<0}function UD(t,e,n,i,r,s,o,a){const l=t-o,u=e-a,c=n-o,h=i-a,d=r-o,f=s-a,p=c*c+h*h,m=d*d+f*f;return l*(h*m-p*f)-u*(c*m-p*d)+(l*l+u*u)*(c*f-h*d)<0}function VD(t,e,n,i,r,s){const o=n-t,a=i-e,l=r-t,u=s-e,c=o*o+a*a,h=l*l+u*u,d=.5/(o*u-a*l),f=(u*c-a*h)*d,p=(o*h-l*c)*d;return f*f+p*p}function qD(t,e,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const i=t[r],s=e[i];let o=r-1;for(;o>=n&&e[t[o]]>s;)t[o+1]=t[o--];t[o+1]=i}else{let r=n+1,s=i;HD(t,n+i>>1,r),e[t[n]]>e[t[i]]&&HD(t,n,i),e[t[r]]>e[t[i]]&&HD(t,r,i),e[t[n]]>e[t[r]]&&HD(t,n,r);const o=t[r],a=e[o];for(;;){do{r++}while(e[t[r]]<a);do{s--}while(e[t[s]]>a);if(s<r)break;HD(t,r,s)}t[n+1]=t[s],t[s]=o,i-r+1>=s-n?(qD(t,e,r,i),qD(t,e,n,s-1)):(qD(t,e,n,s-1),qD(t,e,r,i))}}function HD(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function WD(t){return t[0]}function GD(t){return t[1]}const XD=1e-6;class YD{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,e){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,e){this._+=`L${this._x1=+t},${this._y1=+e}`}arc(t,e,n){const i=(t=+t)+(n=+n),r=e=+e;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${i},${r}`:(Math.abs(this._x1-i)>XD||Math.abs(this._y1-r)>XD)&&(this._+="L"+i+","+r),n&&(this._+=`A${n},${n},0,1,1,${t-n},${e}A${n},${n},0,1,1,${this._x1=i},${this._y1=r}`)}rect(t,e,n,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${+n}v${+i}h${-n}Z`}value(){return this._||null}}class KD{constructor(){this._=[]}moveTo(t,e){this._.push([t,e])}closePath(){this._.push(this._[0].slice())}lineTo(t,e){this._.push([t,e])}value(){return this._.length?this._:null}}class ZD{constructor(t,[e,n,i,r]=[0,0,960,500]){if(!((i=+i)>=(e=+e)&&(r=+r)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=i,this.xmin=e,this.ymax=r,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:e,triangles:n},vectors:i}=this,r=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let d,f,p=0,m=0,g=n.length;p<g;p+=3,m+=2){const e=2*n[p],i=2*n[p+1],s=2*n[p+2],o=t[e],a=t[e+1],l=t[s],u=t[s+1],c=t[i]-o,h=t[i+1]-a,g=l-o,y=u-a,v=c*c+h*h,_=g*g+y*y,b=2*(c*y-h*g);if(b)if(Math.abs(b)<1e-8)d=(o+l)/2,f=(a+u)/2;else{const t=1/b;d=o+(y*v-h*_)*t,f=a+(c*_-g*v)*t}else d=(o+l)/2-1e8*y,f=(a+u)/2+1e8*g;r[m]=d,r[m+1]=f}let s,o,a,l=e[e.length-1],u=4*l,c=t[2*l],h=t[2*l+1];i.fill(0);for(let d=0;d<e.length;++d)l=e[d],s=u,o=c,a=h,u=4*l,c=t[2*l],h=t[2*l+1],i[s+2]=i[u]=a-h,i[s+3]=i[u+1]=c-o}render(t){const e=null==t?t=new YD:void 0,{delaunay:{halfedges:n,inedges:i,hull:r},circumcenters:s,vectors:o}=this;if(r.length<=1)return null;for(let u=0,c=n.length;u<c;++u){const e=n[u];if(e<u)continue;const i=2*Math.floor(u/3),r=2*Math.floor(e/3);this._renderSegment(s[i],s[i+1],s[r],s[r+1],t)}let a,l=r[r.length-1];for(let u=0;u<r.length;++u){a=l,l=r[u];const e=2*Math.floor(i[l]/3),n=s[e],c=s[e+1],h=4*a,d=this._project(n,c,o[h+2],o[h+3]);d&&this._renderSegment(n,c,d[0],d[1],t)}return e&&e.value()}renderBounds(t){const e=null==t?t=new YD:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}renderCell(t,e){const n=null==e?e=new YD:void 0,i=this._clip(t);if(null===i||!i.length)return;e.moveTo(i[0],i[1]);let r=i.length;for(;i[0]===i[r-2]&&i[1]===i[r-1]&&r>1;)r-=2;for(let s=2;s<r;s+=2)i[s]===i[s-2]&&i[s+1]===i[s-1]||e.lineTo(i[s],i[s+1]);return e.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let e=0,n=t.length/2;e<n;++e){const t=this.cellPolygon(e);t&&(t.index=e,yield t)}}cellPolygon(t){const e=new KD;return this.renderCell(t,e),e.value()}_renderSegment(t,e,n,i,r){let s;const o=this._regioncode(t,e),a=this._regioncode(n,i);0===o&&0===a?(r.moveTo(t,e),r.lineTo(n,i)):(s=this._clipSegment(t,e,n,i,o,a))&&(r.moveTo(s[0],s[1]),r.lineTo(s[2],s[3]))}contains(t,e,n){return(e=+e)==e&&(n=+n)==n&&this.delaunay._step(t,e,n)===t}*neighbors(t){const e=this._clip(t);if(e)for(const n of this.delaunay.neighbors(t)){const t=this._clip(n);if(t)t:for(let i=0,r=e.length;i<r;i+=2)for(let s=0,o=t.length;s<o;s+=2)if(e[i]==t[s]&&e[i+1]==t[s+1]&&e[(i+2)%r]==t[(s+o-2)%o]&&e[(i+3)%r]==t[(s+o-1)%o]){yield n;break t}}}_cell(t){const{circumcenters:e,delaunay:{inedges:n,halfedges:i,triangles:r}}=this,s=n[t];if(-1===s)return null;const o=[];let a=s;do{const n=Math.floor(a/3);if(o.push(e[2*n],e[2*n+1]),a=a%3==2?a-2:a+1,r[a]!==t)break;a=i[a]}while(a!==s&&-1!==a);return o}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const e=this._cell(t);if(null===e)return null;const{vectors:n}=this,i=4*t;return n[i]||n[i+1]?this._clipInfinite(t,e,n[i],n[i+1],n[i+2],n[i+3]):this._clipFinite(t,e)}_clipFinite(t,e){const n=e.length;let i,r,s,o,a,l=null,u=e[n-2],c=e[n-1],h=this._regioncode(u,c);for(let d=0;d<n;d+=2)if(i=u,r=c,u=e[d],c=e[d+1],s=h,h=this._regioncode(u,c),0===s&&0===h)o=a,a=0,l?l.push(u,c):l=[u,c];else{let e,n,d,f,p;if(0===s){if(null===(e=this._clipSegment(i,r,u,c,s,h)))continue;[n,d,f,p]=e}else{if(null===(e=this._clipSegment(u,c,i,r,h,s)))continue;[f,p,n,d]=e,o=a,a=this._edgecode(n,d),o&&a&&this._edge(t,o,a,l,l.length),l?l.push(n,d):l=[n,d]}o=a,a=this._edgecode(f,p),o&&a&&this._edge(t,o,a,l,l.length),l?l.push(f,p):l=[f,p]}if(l)o=a,a=this._edgecode(l[0],l[1]),o&&a&&this._edge(t,o,a,l,l.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return l}_clipSegment(t,e,n,i,r,s){for(;;){if(0===r&&0===s)return[t,e,n,i];if(r&s)return null;let o,a,l=r||s;8&l?(o=t+(n-t)*(this.ymax-e)/(i-e),a=this.ymax):4&l?(o=t+(n-t)*(this.ymin-e)/(i-e),a=this.ymin):2&l?(a=e+(i-e)*(this.xmax-t)/(n-t),o=this.xmax):(a=e+(i-e)*(this.xmin-t)/(n-t),o=this.xmin),r?r=this._regioncode(t=o,e=a):s=this._regioncode(n=o,i=a)}}_clipInfinite(t,e,n,i,r,s){let o,a=Array.from(e);if((o=this._project(a[0],a[1],n,i))&&a.unshift(o[0],o[1]),(o=this._project(a[a.length-2],a[a.length-1],r,s))&&a.push(o[0],o[1]),a=this._clipFinite(t,a))for(let l,u=0,c=a.length,h=this._edgecode(a[c-2],a[c-1]);u<c;u+=2)l=h,h=this._edgecode(a[u],a[u+1]),l&&h&&(u=this._edge(t,l,h,a,u),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,e,n,i,r){for(;e!==n;){let n,s;switch(e){case 5:e=4;continue;case 4:e=6,n=this.xmax,s=this.ymin;break;case 6:e=2;continue;case 2:e=10,n=this.xmax,s=this.ymax;break;case 10:e=8;continue;case 8:e=9,n=this.xmin,s=this.ymax;break;case 9:e=1;continue;case 1:e=5,n=this.xmin,s=this.ymin}i[r]===n&&i[r+1]===s||!this.contains(t,n,s)||(i.splice(r,0,n,s),r+=2)}if(i.length>4)for(let s=0;s<i.length;s+=2){const t=(s+2)%i.length,e=(s+4)%i.length;(i[s]===i[t]&&i[t]===i[e]||i[s+1]===i[t+1]&&i[t+1]===i[e+1])&&(i.splice(t,2),s-=2)}return r}_project(t,e,n,i){let r,s,o,a=1/0;if(i<0){if(e<=this.ymin)return null;(r=(this.ymin-e)/i)<a&&(o=this.ymin,s=t+(a=r)*n)}else if(i>0){if(e>=this.ymax)return null;(r=(this.ymax-e)/i)<a&&(o=this.ymax,s=t+(a=r)*n)}if(n>0){if(t>=this.xmax)return null;(r=(this.xmax-t)/n)<a&&(s=this.xmax,o=e+(a=r)*i)}else if(n<0){if(t<=this.xmin)return null;(r=(this.xmin-t)/n)<a&&(s=this.xmin,o=e+(a=r)*i)}return[s,o]}_edgecode(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}_regioncode(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}}const QD=2*Math.PI,JD=Math.pow;function tS(t){return t[0]}function eS(t){return t[1]}function nS(t,e,n){return[t+Math.sin(t+e)*n,e+Math.cos(t-e)*n]}class iS{static from(t,e=tS,n=eS,i){return new iS("length"in t?function(t,e,n,i){const r=t.length,s=new Float64Array(2*r);for(let o=0;o<r;++o){const r=t[o];s[2*o]=e.call(i,r,o,t),s[2*o+1]=n.call(i,r,o,t)}return s}(t,e,n,i):Float64Array.from(function*(t,e,n,i){let r=0;for(const s of t)yield e.call(i,s,r,t),yield n.call(i,s,r,t),++r}(t,e,n,i)))}constructor(t){this._delaunator=new LD(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&function(t){const{triangles:e,coords:n}=t;for(let i=0;i<e.length;i+=3){const t=2*e[i],r=2*e[i+1],s=2*e[i+2];if((n[s]-n[t])*(n[r+1]-n[t+1])-(n[r]-n[t])*(n[s+1]-n[t+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:e.length/2},(t,e)=>e).sort((t,n)=>e[2*t]-e[2*n]||e[2*t+1]-e[2*n+1]);const t=this.collinear[0],n=this.collinear[this.collinear.length-1],i=[e[2*t],e[2*t+1],e[2*n],e[2*n+1]],r=1e-8*Math.hypot(i[3]-i[1],i[2]-i[0]);for(let s=0,o=e.length/2;s<o;++s){const t=nS(e[2*s],e[2*s+1],r);e[2*s]=t[0],e[2*s+1]=t[1]}this._delaunator=new LD(e)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,r=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let a=0,l=n.length;a<l;++a){const t=r[a%3==2?a-2:a+1];-1!==n[a]&&-1!==s[t]||(s[t]=a)}for(let a=0,l=i.length;a<l;++a)o[i[a]]=a;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],this.triangles[1]=i[1],this.triangles[2]=i[1],s[i[0]]=1,2===i.length&&(s[i[1]]=0))}voronoi(t){return new ZD(this,t)}*neighbors(t){const{inedges:e,hull:n,_hullIndex:i,halfedges:r,triangles:s,collinear:o}=this;if(o){const e=o.indexOf(t);return e>0&&(yield o[e-1]),void(e<o.length-1&&(yield o[e+1]))}const a=e[t];if(-1===a)return;let l=a,u=-1;do{if(yield u=s[l],l=l%3==2?l-2:l+1,s[l]!==t)return;if(l=r[l],-1===l){const e=n[(i[t]+1)%n.length];return void(e!==u&&(yield e))}}while(l!==a)}find(t,e,n=0){if((t=+t)!=t||(e=+e)!=e)return-1;const i=n;let r;for(;(r=this._step(n,t,e))>=0&&r!==n&&r!==i;)n=r;return r}_step(t,e,n){const{inedges:i,hull:r,_hullIndex:s,halfedges:o,triangles:a,points:l}=this;if(-1===i[t]||!l.length)return(t+1)%(l.length>>1);let u=t,c=JD(e-l[2*t],2)+JD(n-l[2*t+1],2);const h=i[t];let d=h;do{let i=a[d];const h=JD(e-l[2*i],2)+JD(n-l[2*i+1],2);if(h<c&&(c=h,u=i),d=d%3==2?d-2:d+1,a[d]!==t)break;if(d=o[d],-1===d){if(d=r[(s[t]+1)%r.length],d!==i&&JD(e-l[2*d],2)+JD(n-l[2*d+1],2)<c)return d;break}}while(d!==h);return u}render(t){const e=null==t?t=new YD:void 0,{points:n,halfedges:i,triangles:r}=this;for(let s=0,o=i.length;s<o;++s){const e=i[s];if(e<s)continue;const o=2*r[s],a=2*r[e];t.moveTo(n[o],n[o+1]),t.lineTo(n[a],n[a+1])}return this.renderHull(t),e&&e.value()}renderPoints(t,e=2){const n=null==t?t=new YD:void 0,{points:i}=this;for(let r=0,s=i.length;r<s;r+=2){const n=i[r],s=i[r+1];t.moveTo(n+e,s),t.arc(n,s,e,0,QD)}return n&&n.value()}renderHull(t){const e=null==t?t=new YD:void 0,{hull:n,points:i}=this,r=2*n[0],s=n.length;t.moveTo(i[r],i[r+1]);for(let o=1;o<s;++o){const e=2*n[o];t.lineTo(i[e],i[e+1])}return t.closePath(),e&&e.value()}hullPolygon(){const t=new KD;return this.renderHull(t),t.value()}renderTriangle(t,e){const n=null==e?e=new YD:void 0,{points:i,triangles:r}=this,s=2*r[t*=3],o=2*r[t+1],a=2*r[t+2];return e.moveTo(i[s],i[s+1]),e.lineTo(i[o],i[o+1]),e.lineTo(i[a],i[a+1]),e.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:t}=this;for(let e=0,n=t.length/3;e<n;++e)yield this.trianglePolygon(e)}trianglePolygon(t){const e=new KD;return this.renderTriangle(t,e),e.value()}}function rS(t){Po.call(this,null,t)}rS.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const sS=[-1e5,-1e5,1e5,1e5];function oS(t){const e=t[0][0],n=t[0][1];let i=t.length-1;for(;t[i][0]===e&&t[i][1]===n;--i);return"M"+t.slice(0,i+1).join("L")+"Z"}(0,de.XW)(rS,Po,{transform(t,e){const n=t.as||"path",i=e.source;if(!i||!i.length)return e;let r=t.size;r=r?[0,0,r[0],r[1]]:(r=t.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:sS;const s=this.value=iS.from(i,t.x,t.y).voronoi(r);for(let o=0,a=i.length;o<a;++o){const t=s.cellPolygon(o);i[o][n]=t?oS(t):null}return e.reflow(t.modified()).modifies(n)}});var aS=Math.PI/180,lS=2048;function uS(t,e,n,i){if(!e.sprite){var r=t.context,s=t.ratio;r.clearRect(0,0,2048/s,lS/s);var o,a,l,u,c,h=0,d=0,f=0,p=n.length;for(--i;++i<p;){if(e=n[i],r.save(),r.font=e.style+" "+e.weight+" "+~~((e.size+1)/s)+"px "+e.font,o=r.measureText(e.text+"m").width*s,l=e.size<<1,e.rotate){var m=Math.sin(e.rotate*aS),g=Math.cos(e.rotate*aS),y=o*g,v=o*m,_=l*g,b=l*m;o=Math.max(Math.abs(y+b),Math.abs(y-b))+31>>5<<5,l=~~Math.max(Math.abs(v+_),Math.abs(v-_))}else o=o+31>>5<<5;if(l>f&&(f=l),h+o>=2048&&(h=0,d+=f,f=0),d+l>=lS)break;r.translate((h+(o>>1))/s,(d+(l>>1))/s),e.rotate&&r.rotate(e.rotate*aS),r.fillText(e.text,0,0),e.padding&&(r.lineWidth=2*e.padding,r.strokeText(e.text,0,0)),r.restore(),e.width=o,e.height=l,e.xoff=h,e.yoff=d,e.x1=o>>1,e.y1=l>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,h+=o}for(var x=r.getImageData(0,0,2048/s,lS/s).data,w=[];--i>=0;)if((e=n[i]).hasText){for(a=(o=e.width)>>5,l=e.y1-e.y0,u=0;u<l*a;u++)w[u]=0;if(null==(h=e.xoff))return;d=e.yoff;var C=0,A=-1;for(c=0;c<l;c++){for(u=0;u<o;u++){var E=x[2048*(d+c)+(h+u)<<2]?1<<31-u%32:0;w[a*c+(u>>5)]|=E,C|=E}C?A=c:(e.y0++,l--,c--,d++)}e.y1=e.y0+A,e.sprite=w.slice(0,(e.y1-e.y0)*a)}}}function cS(t,e,n){for(var i,r=t.sprite,s=t.width>>5,o=t.x-(s<<4),a=127&o,l=32-a,u=t.y1-t.y0,c=(t.y+t.y0)*(n>>=5)+(o>>5),h=0;h<u;h++){i=0;for(var d=0;d<=s;d++)if((i<<l|(d<s?(i=r[h*s+d])>>>a:0))&e[c+d])return!0;c+=n}return!1}function hS(t,e){var n=t[0],i=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>i.x&&(i.x=e.x+e.x1),e.y+e.y1>i.y&&(i.y=e.y+e.y1)}function dS(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function fS(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function pS(t){return"function"==typeof t?t:function(){return t}}var mS={archimedean:fS,rectangular:function(t){var e=4*t[0]/t[1],n=0,i=0;return function(t){var r=t<0?-1:1;switch(Math.sqrt(1+4*r*t)-r&3){case 0:n+=e;break;case 1:i+=4;break;case 2:n-=e;break;default:i-=4}return[n,i]}}};const gS=["x","y","font","fontSize","fontStyle","fontWeight","angle"],yS=["text","font","rotate","fontSize","fontStyle","fontWeight"];function vS(t){Po.call(this,function(){var t,e,n,i,r,s,o,a=[256,256],l=fS,u=[],c=Math.random,h={};function d(t,e,n){for(var i,r,s,o=e.x,u=e.y,h=Math.sqrt(a[0]*a[0]+a[1]*a[1]),d=l(a),f=c()<.5?1:-1,p=-f;(i=d(p+=f))&&(r=~~i[0],s=~~i[1],!(Math.min(Math.abs(r),Math.abs(s))>=h));)if(e.x=o+r,e.y=u+s,!(e.x+e.x0<0||e.y+e.y0<0||e.x+e.x1>a[0]||e.y+e.y1>a[1])&&(!n||!cS(e,t,a[0]))&&(!n||dS(e,n))){for(var m,g=e.sprite,y=e.width>>5,v=a[0]>>5,_=e.x-(y<<4),b=127&_,x=32-b,w=e.y1-e.y0,C=(e.y+e.y0)*v+(_>>5),A=0;A<w;A++){m=0;for(var E=0;E<=y;E++)t[C+E]|=m<<x|(E<y?(m=g[A*y+E])>>>b:0);C+=v}return e.sprite=null,!0}return!1}return h.layout=function(){for(var l=function(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=2048/e,t.height=lS/e;var n=t.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:e}}(Jc()),h=function(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}((a[0]>>5)*a[1]),f=null,p=u.length,m=-1,g=[],y=u.map(a=>({text:t(a),font:e(a),style:i(a),weight:r(a),rotate:s(a),size:~~(n(a)+1e-14),padding:o(a),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:a})).sort((t,e)=>e.size-t.size);++m<p;){var v=y[m];v.x=a[0]*(c()+.5)>>1,v.y=a[1]*(c()+.5)>>1,uS(l,v,y,m),v.hasText&&d(h,v,f)&&(g.push(v),f?hS(f,v):f=[{x:v.x+v.x0,y:v.y+v.y0},{x:v.x+v.x1,y:v.y+v.y1}],v.x-=a[0]>>1,v.y-=a[1]>>1)}return g},h.words=function(t){return arguments.length?(u=t,h):u},h.size=function(t){return arguments.length?(a=[+t[0],+t[1]],h):a},h.font=function(t){return arguments.length?(e=pS(t),h):e},h.fontStyle=function(t){return arguments.length?(i=pS(t),h):i},h.fontWeight=function(t){return arguments.length?(r=pS(t),h):r},h.rotate=function(t){return arguments.length?(s=pS(t),h):s},h.text=function(e){return arguments.length?(t=pS(e),h):t},h.spiral=function(t){return arguments.length?(l=mS[t]||t,h):l},h.fontSize=function(t){return arguments.length?(n=pS(t),h):n},h.padding=function(t){return arguments.length?(o=pS(t),h):o},h.random=function(t){return arguments.length?(c=t,h):c},h}(),t)}vS.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:gS}]},(0,de.XW)(vS,Po,{transform(t,e){!t.size||t.size[0]&&t.size[1]||(0,de.vU)("Wordcloud size dimensions must be non-zero.");const n=t.modified();if(!(n||e.changed(e.ADD_REM)||yS.some(function(n){const i=t[n];return(0,de.mf)(i)&&e.modified(i.fields)})))return;const i=e.materialize(e.SOURCE).source,r=this.value,s=t.as||gS;let o,a=t.fontSize||14;if((0,de.mf)(a)?o=t.fontSizeRange:a=(0,de.a9)(a),o){const t=a,e=Ep("sqrt")().domain((0,de.We)(i,t)).range(o);a=n=>e(t(n))}i.forEach(t=>{t[s[0]]=NaN,t[s[1]]=NaN,t[s[3]]=0});const l=r.words(i).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(a).random(Ea).layout(),u=r.size(),c=u[0]>>1,h=u[1]>>1,d=l.length;for(let f,p,m=0;m<d;++m)f=l[m],p=f.datum,p[s[0]]=f.x+c,p[s[1]]=f.y+h,p[s[2]]=f.font,p[s[3]]=f.size,p[s[4]]=f.style,p[s[5]]=f.weight,p[s[6]]=f.rotate;return e.reflow(n).modifies(s)}});const _S=t=>new Uint8Array(t),bS=t=>new Uint16Array(t),xS=t=>new Uint32Array(t);function wS(t,e,n){const i=(e<257?_S:e<65537?bS:xS)(t);return n&&i.set(n),i}function CS(t,e,n){const i=1<<e;return{one:i,zero:~i,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd(t,e){const n=this,r=n.bisect(n.range,t.value),s=t.index,o=r[0],a=r[1],l=s.length;let u;for(u=0;u<o;++u)e[s[u]]|=i;for(u=a;u<l;++u)e[s[u]]|=i;return n}}}function AS(){let t=xS(0),e=[],n=0;return{insert:function(i,r,s){if(!r.length)return[];const o=n,a=r.length,l=xS(a);let u,c,h,d=Array(a);for(h=0;h<a;++h)d[h]=i(r[h]),l[h]=h;if(d=function(t,e){return t.sort.call(e,(e,n)=>{const i=t[e],r=t[n];return i<r?-1:i>r?1:0}),function(t,e){return Array.from(e,e=>t[e])}(t,e)}(d,l),o)u=e,c=t,e=Array(o+a),t=xS(o+a),function(t,e,n,i,r,s,o,a,l){let u,c=0,h=0;for(u=0;c<i&&h<o;++u)e[c]<r[h]?(a[u]=e[c],l[u]=n[c++]):(a[u]=r[h],l[u]=s[h++]+t);for(;c<i;++c,++u)a[u]=e[c],l[u]=n[c];for(;h<o;++h,++u)a[u]=r[h],l[u]=s[h]+t}(s,u,c,o,d,l,a,e,t);else{if(s>0)for(h=0;h<a;++h)l[h]+=s;e=d,t=l}return n=o+a,{index:l,value:d}},remove:function(i,r){const s=n;let o,a,l;for(a=0;!r[t[a]]&&a<s;++a);for(l=a;a<s;++a)r[o=t[a]]||(t[l]=o,e[l]=e[a],++l);n=s-i},bisect:function(t,i){let r;return i?r=i.length:(i=e,r=n),[ih(i,t[0],0,r),nh(i,t[1],0,r)]},reindex:function(e){for(let i=0,r=n;i<r;++i)t[i]=e[t[i]]},index:()=>t,size:()=>n}}function ES(t){Po.call(this,function(){let t=8,e=[],n=xS(0),i=wS(0,t),r=wS(0,t);return{data:()=>e,seen:()=>n=function(t,e,n){return t.length>=e?t:((n=n||new t.constructor(e)).set(t),n)}(n,e.length),add(t){for(let n,i=0,r=e.length,s=t.length;i<s;++i)n=t[i],n._index=r++,e.push(n)},remove(t,n){const s=e.length,o=Array(s-t),a=e;let l,u,c;for(u=0;!n[u]&&u<s;++u)o[u]=e[u],a[u]=u;for(c=u;u<s;++u)l=e[u],n[u]?a[u]=-1:(a[u]=c,i[c]=i[u],r[c]=r[u],o[c]=l,l._index=c++),i[u]=0;return e=o,a},size:()=>e.length,curr:()=>i,prev:()=>r,reset:t=>r[t]=i[t],all:()=>t<257?255:t<65537?65535:4294967295,set(t,e){i[t]|=e},clear(t,e){i[t]&=~e},resize(e,n){(e>i.length||n>t)&&(t=Math.max(n,t),i=wS(e,t,i),r=wS(e,t))}}}(),t),this._indices=null,this._dims=null}function kS(t){Po.call(this,null,t)}function DS(t,e,n){return t.fields=e||[],t.fname=n,t}function SS(t){return 1===t.length?FS(t[0]):OS(t)}ES.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},(0,de.XW)(ES,Po,{transform(t,e){return this._dims?t.modified("fields")||t.fields.some(t=>e.modified(t.fields))?this.reinit(t,e):this.eval(t,e):this.init(t,e)},init(t,e){const n=t.fields,i=t.query,r=this._indices={},s=this._dims=[],o=i.length;let a,l,u=0;for(;u<o;++u)a=n[u].fname,l=r[a]||(r[a]=AS()),s.push(CS(l,u,i[u]));return this.eval(t,e)},reinit(t,e){const n=e.materialize().fork(),i=t.fields,r=t.query,s=this._indices,o=this._dims,a=this.value,l=a.curr(),u=a.prev(),c=a.all(),h=n.rem=n.add,d=n.mod,f=r.length,p={};let m,g,y,v,_,b,x,w,C;if(u.set(l),e.rem.length&&(_=this.remove(t,e,n)),e.add.length&&a.add(e.add),e.mod.length)for(b={},v=e.mod,x=0,w=v.length;x<w;++x)b[v[x]._index]=1;for(x=0;x<f;++x)C=i[x],(!o[x]||t.modified("fields",x)||e.modified(C.fields))&&(y=C.fname,(m=p[y])||(s[y]=g=AS(),p[y]=m=g.insert(C,e.source,0)),o[x]=CS(g,x,r[x]).onAdd(m,l));for(x=0,w=a.data().length;x<w;++x)_[x]||(u[x]!==l[x]?h.push(x):b[x]&&l[x]!==c&&d.push(x));return a.mask=(1<<f)-1,n},eval(t,e){const n=e.materialize().fork(),i=this._dims.length;let r=0;return e.rem.length&&(this.remove(t,e,n),r|=(1<<i)-1),t.modified("query")&&!t.modified("fields")&&(r|=this.update(t,e,n)),e.add.length&&(this.insert(t,e,n),r|=(1<<i)-1),e.mod.length&&(this.modify(e,n),r|=(1<<i)-1),this.value.mask=r,n},insert(t,e,n){const i=e.add,r=this.value,s=this._dims,o=this._indices,a=t.fields,l={},u=n.add,c=r.size()+i.length,h=s.length;let d,f,p,m=r.size();r.resize(c,h),r.add(i);const g=r.curr(),y=r.prev(),v=r.all();for(d=0;d<h;++d)f=a[d].fname,p=l[f]||(l[f]=o[f].insert(a[d],i,m)),s[d].onAdd(p,g);for(;m<c;++m)y[m]=v,g[m]!==v&&u.push(m)},modify(t,e){const n=e.mod,i=this.value,r=i.curr(),s=i.all(),o=t.mod;let a,l,u;for(a=0,l=o.length;a<l;++a)u=o[a]._index,r[u]!==s&&n.push(u)},remove(t,e,n){const i=this._indices,r=this.value,s=r.curr(),o=r.prev(),a=r.all(),l={},u=n.rem,c=e.rem;let h,d,f,p;for(h=0,d=c.length;h<d;++h)f=c[h]._index,l[f]=1,o[f]=p=s[f],s[f]=a,p!==a&&u.push(f);for(f in i)i[f].remove(d,l);return this.reindex(e,d,l),l},reindex(t,e,n){const i=this._indices,r=this.value;t.runAfter(()=>{const t=r.remove(e,n);for(const e in i)i[e].reindex(t)})},update(t,e,n){const i=this._dims,r=t.query,s=e.stamp,o=i.length;let a,l,u=0;for(n.filters=0,l=0;l<o;++l)t.modified("query",l)&&(a=l,++u);if(1===u)u=i[a].one,this.incrementOne(i[a],r[a],n.add,n.rem);else for(l=0,u=0;l<o;++l)t.modified("query",l)&&(u|=i[l].one,this.incrementAll(i[l],r[l],s,n.add),n.rem=n.add);return u},incrementAll(t,e,n,i){const r=this.value,s=r.seen(),o=r.curr(),a=r.prev(),l=t.index(),u=t.bisect(t.range),c=t.bisect(e),h=c[0],d=c[1],f=u[0],p=u[1],m=t.one;let g,y,v;if(h<f)for(g=h,y=Math.min(f,d);g<y;++g)v=l[g],s[v]!==n&&(a[v]=o[v],s[v]=n,i.push(v)),o[v]^=m;else if(h>f)for(g=f,y=Math.min(h,p);g<y;++g)v=l[g],s[v]!==n&&(a[v]=o[v],s[v]=n,i.push(v)),o[v]^=m;if(d>p)for(g=Math.max(h,p),y=d;g<y;++g)v=l[g],s[v]!==n&&(a[v]=o[v],s[v]=n,i.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(f,d),y=p;g<y;++g)v=l[g],s[v]!==n&&(a[v]=o[v],s[v]=n,i.push(v)),o[v]^=m;t.range=e.slice()},incrementOne(t,e,n,i){const r=this.value.curr(),s=t.index(),o=t.bisect(t.range),a=t.bisect(e),l=a[0],u=a[1],c=o[0],h=o[1],d=t.one;let f,p,m;if(l<c)for(f=l,p=Math.min(c,u);f<p;++f)m=s[f],r[m]^=d,n.push(m);else if(l>c)for(f=c,p=Math.min(l,h);f<p;++f)m=s[f],r[m]^=d,i.push(m);if(u>h)for(f=Math.max(l,h),p=u;f<p;++f)m=s[f],r[m]^=d,n.push(m);else if(u<h)for(f=Math.max(c,u),p=h;f<p;++f)m=s[f],r[m]^=d,i.push(m);t.range=e.slice()}}),kS.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},(0,de.XW)(kS,Po,{transform(t,e){const n=~(t.ignore||0),i=t.filter,r=i.mask;if(0==(r&n))return e.StopPropagation;const s=e.fork(e.ALL),o=i.data(),a=i.curr(),l=i.prev(),u=t=>a[t]&n?null:o[t];return s.filter(s.MOD,u),r&r-1?(s.filter(s.ADD,t=>{const e=a[t]&n;return!e&&e^l[t]&n?o[t]:null}),s.filter(s.REM,t=>{const e=a[t]&n;return!e||e^e^l[t]&n?null:o[t]})):(s.filter(s.ADD,u),s.filter(s.REM,t=>(a[t]&n)===r?o[t]:null)),s.filter(s.SOURCE,t=>u(t._index))}});const FS=t=>function(e){return e[t]},OS=t=>{const e=t.length;return function(n){for(let i=0;i<e;++i)n=n[t[i]];return n}};function MS(t){throw Error(t)}(function(t,e,n){const i=function(t){const e=[],n=t.length;let i,r,s,o=null,a=0,l="";function u(){e.push(l+t.substring(i,r)),l="",i=r+1}for(t+="",i=r=0;r<n;++r)if(s=t[r],"\\"===s)l+=t.substring(i,r),l+=t.substring(++r,++r),i=r;else if(s===o)u(),o=null,a=-1;else{if(o)continue;i===a&&'"'===s||i===a&&"'"===s?(i=r+1,o=s):"."!==s||a?"["===s?(r>i&&u(),a=i=r+1):"]"===s&&(a||MS("Access path missing open bracket: "+t),a>0&&u(),a=0,i=r+1):r>i?u():i=r+1}return a&&MS("Access path missing closing bracket: "+t),o&&MS("Access path missing closing quote: "+t),r>i&&(r++,u()),e}(t);t=1===i.length?i[0]:t,DS(SS(i),[t],t)})("id"),DS(t=>t,[],"identity"),DS(()=>0,[],"zero"),DS(()=>1,[],"one");const TS=DS(()=>!0,[],"true");DS(()=>!1,[],"false");var PS=Array.isArray;function RS(t){return t===Object(t)}function BS(t){return function(t){return"function"==typeof t}(t)?t:()=>t}function IS(t){for(let e,n,i=1,r=arguments.length;i<r;++i)for(n in e=arguments[i],e)t[n]=e[n];return t}const NS=Object.prototype.hasOwnProperty;function LS(t,e){return NS.call(t,e)}function $S(t){return"[object Date]"===Object.prototype.toString.call(t)}function zS(t){return"string"==typeof t}function jS(t){return PS(t)?"["+t.map(jS)+"]":RS(t)||zS(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}const US="Literal",VS="CallExpression";function qS(t){this.type=t}var HS,WS,GS,XS,YS;qS.prototype.visit=function(t){let e,n,i;if(t(this))return 1;for(e=function(t){switch(t.type){case"ArrayExpression":return t.elements;case"BinaryExpression":case"LogicalExpression":return[t.left,t.right];case VS:return[t.callee].concat(t.arguments);case"ConditionalExpression":return[t.test,t.consequent,t.alternate];case"MemberExpression":return[t.object,t.property];case"ObjectExpression":return t.properties;case"Property":return[t.key,t.value];case"UnaryExpression":return[t.argument];case"Identifier":case US:case"RawCode":default:return[]}}(this),n=0,i=e.length;n<i;++n)if(e[n].visit(t))return 1},(HS={})[1]="Boolean",HS[2]="<end>",HS[3]="Identifier",HS[4]="Keyword",HS[5]="Null",HS[6]="Numeric",HS[7]="Punctuator",HS[8]="String",HS[9]="RegularExpression";var KS="Identifier",ZS="Unexpected token %0",QS="Invalid regular expression",JS="Invalid regular expression: missing /",tF="Octal literals are not allowed in strict mode.",eF="ILLEGAL",nF="Disabled.",iF=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),rF=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function sF(t,e){if(!t)throw new Error("ASSERT: "+e)}function oF(t){return t>=48&&t<=57}function aF(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function lF(t){return"01234567".indexOf(t)>=0}function uF(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function cF(t){return 10===t||13===t||8232===t||8233===t}function hF(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||t>=128&&iF.test(String.fromCharCode(t))}function dF(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||t>=128&&rF.test(String.fromCharCode(t))}const fF={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function pF(){for(;GS<XS;){const t=WS.charCodeAt(GS);if(!uF(t)&&!cF(t))break;++GS}}function mF(t){var e,n,i,r=0;for(n="u"===t?4:2,e=0;e<n;++e)GS<XS&&aF(WS[GS])?(i=WS[GS++],r=16*r+"0123456789abcdef".indexOf(i.toLowerCase())):FF({},ZS,eF);return String.fromCharCode(r)}function gF(){var t,e;for(e=0,"}"===(t=WS[GS])&&FF({},ZS,eF);GS<XS&&aF(t=WS[GS++]);)e=16*e+"0123456789abcdef".indexOf(t.toLowerCase());return(e>1114111||"}"!==t)&&FF({},ZS,eF),e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}function yF(){var t,e;for(t=WS.charCodeAt(GS++),e=String.fromCharCode(t),92===t&&(117!==WS.charCodeAt(GS)&&FF({},ZS,eF),++GS,(t=mF("u"))&&"\\"!==t&&hF(t.charCodeAt(0))||FF({},ZS,eF),e=t);GS<XS&&dF(t=WS.charCodeAt(GS));)++GS,e+=String.fromCharCode(t),92===t&&(e=e.substr(0,e.length-1),117!==WS.charCodeAt(GS)&&FF({},ZS,eF),++GS,(t=mF("u"))&&"\\"!==t&&dF(t.charCodeAt(0))||FF({},ZS,eF),e+=t);return e}function vF(){var t,e,n,i,r=GS,s=WS.charCodeAt(GS),o=WS[GS];switch(s){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++GS,{type:7,value:String.fromCharCode(s),start:r,end:GS};default:if(61===(t=WS.charCodeAt(GS+1)))switch(s){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return GS+=2,{type:7,value:String.fromCharCode(s)+String.fromCharCode(t),start:r,end:GS};case 33:case 61:return 61===WS.charCodeAt(GS+=2)&&++GS,{type:7,value:WS.slice(r,GS),start:r,end:GS}}}return">>>="===(i=WS.substr(GS,4))?{type:7,value:i,start:r,end:GS+=4}:">>>"===(n=i.substr(0,3))||"<<="===n||">>="===n?{type:7,value:n,start:r,end:GS+=3}:o===(e=n.substr(0,2))[1]&&"+-<>&|".indexOf(o)>=0||"=>"===e?{type:7,value:e,start:r,end:GS+=2}:("//"===e&&FF({},ZS,eF),"<>=!+-*%&|^/".indexOf(o)>=0?{type:7,value:o,start:r,end:++GS}:void FF({},ZS,eF))}function _F(){var t,e,n;if(sF(oF((n=WS[GS]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),e=GS,t="","."!==n){if(t=WS[GS++],n=WS[GS],"0"===t){if("x"===n||"X"===n)return++GS,function(t){let e="";for(;GS<XS&&aF(WS[GS]);)e+=WS[GS++];return 0===e.length&&FF({},ZS,eF),hF(WS.charCodeAt(GS))&&FF({},ZS,eF),{type:6,value:parseInt("0x"+e,16),start:t,end:GS}}(e);if(lF(n))return function(t){let e="0"+WS[GS++];for(;GS<XS&&lF(WS[GS]);)e+=WS[GS++];return(hF(WS.charCodeAt(GS))||oF(WS.charCodeAt(GS)))&&FF({},ZS,eF),{type:6,value:parseInt(e,8),octal:!0,start:t,end:GS}}(e);n&&oF(n.charCodeAt(0))&&FF({},ZS,eF)}for(;oF(WS.charCodeAt(GS));)t+=WS[GS++];n=WS[GS]}if("."===n){for(t+=WS[GS++];oF(WS.charCodeAt(GS));)t+=WS[GS++];n=WS[GS]}if("e"===n||"E"===n)if(t+=WS[GS++],"+"!==(n=WS[GS])&&"-"!==n||(t+=WS[GS++]),oF(WS.charCodeAt(GS)))for(;oF(WS.charCodeAt(GS));)t+=WS[GS++];else FF({},ZS,eF);return hF(WS.charCodeAt(GS))&&FF({},ZS,eF),{type:6,value:parseFloat(t),start:e,end:GS}}function bF(){if(pF(),GS>=XS)return{type:2,start:GS,end:GS};const t=WS.charCodeAt(GS);return hF(t)?function(){var t,e;return t=GS,{type:1===(e=92===WS.charCodeAt(GS)?yF():function(){var t,e;for(t=GS++;GS<XS;){if(92===(e=WS.charCodeAt(GS)))return GS=t,yF();if(!dF(e))break;++GS}return WS.slice(t,GS)}()).length?3:fF.hasOwnProperty(e)?4:"null"===e?5:"true"===e||"false"===e?1:3,value:e,start:t,end:GS}}():40===t||41===t||59===t?vF():39===t||34===t?function(){var t,e,n,i,r="",s=!1;for(sF("'"===(t=WS[GS])||'"'===t,"String literal must starts with a quote"),e=GS,++GS;GS<XS;){if((n=WS[GS++])===t){t="";break}if("\\"===n)if((n=WS[GS++])&&cF(n.charCodeAt(0)))"\r"===n&&"\n"===WS[GS]&&++GS;else switch(n){case"u":case"x":"{"===WS[GS]?(++GS,r+=gF()):r+=mF(n);break;case"n":r+="\n";break;case"r":r+="\r";break;case"t":r+="\t";break;case"b":r+="\b";break;case"f":r+="\f";break;case"v":r+="\v";break;default:lF(n)?(0!==(i="01234567".indexOf(n))&&(s=!0),GS<XS&&lF(WS[GS])&&(s=!0,i=8*i+"01234567".indexOf(WS[GS++]),"0123".indexOf(n)>=0&&GS<XS&&lF(WS[GS])&&(i=8*i+"01234567".indexOf(WS[GS++]))),r+=String.fromCharCode(i)):r+=n}else{if(cF(n.charCodeAt(0)))break;r+=n}}return""!==t&&FF({},ZS,eF),{type:8,value:r,octal:s,start:e,end:GS}}():46===t?oF(WS.charCodeAt(GS+1))?_F():vF():oF(t)?_F():vF()}function xF(){const t=YS;return GS=t.end,YS=bF(),GS=t.end,t}function wF(){const t=GS;YS=bF(),GS=t}function CF(t,e,n){const i=new qS("||"===t||"&&"===t?"LogicalExpression":"BinaryExpression");return i.operator=t,i.left=e,i.right=n,i}function AF(t,e){const n=new qS("CallExpression");return n.callee=t,n.arguments=e,n}function EF(t){const e=new qS(KS);return e.name=t,e}function kF(t){const e=new qS("Literal");return e.value=t.value,e.raw=WS.slice(t.start,t.end),t.regex&&("//"===e.raw&&(e.raw="/(?:)/"),e.regex=t.regex),e}function DF(t,e,n){const i=new qS("MemberExpression");return i.computed="["===t,i.object=e,i.property=n,i.computed||(n.member=!0),i}function SF(t,e,n){const i=new qS("Property");return i.key=e,i.value=n,i.kind=t,i}function FF(t,e){var n,i=Array.prototype.slice.call(arguments,2),r=e.replace(/%(\d)/g,(t,e)=>(sF(e<i.length,"Message reference must be in range"),i[e]));throw(n=new Error(r)).index=GS,n.description=r,n}function OF(t){2===t.type&&FF(t,"Unexpected end of input"),6===t.type&&FF(t,"Unexpected number"),8===t.type&&FF(t,"Unexpected string"),3===t.type&&FF(t,"Unexpected identifier"),4===t.type&&FF(t,"Unexpected reserved word"),FF(t,ZS,t.value)}function MF(t){const e=xF();7===e.type&&e.value===t||OF(e)}function TF(t){return 7===YS.type&&YS.value===t}function PF(t){return 4===YS.type&&YS.value===t}function RF(){GS=YS.start;const t=xF();return 8===t.type||6===t.type?(t.octal&&FF(t,tF),kF(t)):EF(t.value)}function BF(){var t,e,n;return GS=YS.start,3===(t=YS).type?(n=RF(),MF(":"),SF("init",n,UF())):2!==t.type&&7!==t.type?(e=RF(),MF(":"),SF("init",e,UF())):void OF(t)}const IF={if:1};function NF(){const t=[];if(MF("("),!TF(")"))for(;GS<XS&&(t.push(UF()),!TF(")"));)MF(",");return MF(")"),t}function LF(){MF("[");const t=VF();return MF("]"),t}function $F(){const t=function(){var t;for(t=function(){var t,e,n;if(TF("("))return function(){MF("(");const t=VF();return MF(")"),t}();if(TF("["))return function(){const t=[];for(GS=YS.start,MF("[");!TF("]");)TF(",")?(xF(),t.push(null)):(t.push(UF()),TF("]")||MF(","));return xF(),function(t){const e=new qS("ArrayExpression");return e.elements=t,e}(t)}();if(TF("{"))return function(){var t,e,n=[],i={},r=String;for(GS=YS.start,MF("{");!TF("}");)e="$"+((t=BF()).key.type===KS?t.key.name:r(t.key.value)),Object.prototype.hasOwnProperty.call(i,e)?FF({},"Duplicate data property in object literal not allowed in strict mode"):i[e]=!0,n.push(t),TF("}")||MF(",");return MF("}"),function(t){const e=new qS("ObjectExpression");return e.properties=t,e}(n)}();if(GS=YS.start,3===(t=YS.type)||IF[YS.value])n=EF(xF().value);else if(8===t||6===t)YS.octal&&FF(YS,tF),n=kF(xF());else{if(4===t)throw new Error(nF);1===t?((e=xF()).value="true"===e.value,n=kF(e)):5===t?((e=xF()).value=null,n=kF(e)):TF("/")||TF("/=")?(n=kF(function(){var t,e,n,i;return YS=null,pF(),t=GS,e=function(){var t,e,n,i;for(sF("/"===(t=WS[GS]),"Regular expression literal must start with a slash"),e=WS[GS++],n=!1,i=!1;GS<XS;)if(e+=t=WS[GS++],"\\"===t)cF((t=WS[GS++]).charCodeAt(0))&&FF({},JS),e+=t;else if(cF(t.charCodeAt(0)))FF({},JS);else if(n)"]"===t&&(n=!1);else{if("/"===t){i=!0;break}"["===t&&(n=!0)}return i||FF({},JS),{value:e.substr(1,e.length-2),literal:e}}(),n=function(){var t,e,n;for(e="",n="";GS<XS&&dF((t=WS[GS]).charCodeAt(0));)++GS,"\\"===t&&GS<XS?FF({},ZS,eF):(n+=t,e+=t);return n.search(/[^gimuy]/g)>=0&&FF({},QS,n),{value:n,literal:e}}(),i=function(t,e){let n=t;e.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(t,e)=>{if(parseInt(e,16)<=1114111)return"x";FF({},QS)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(i){FF({},QS)}try{return new RegExp(t,e)}catch(r){return null}}(e.value,n.value),{literal:e.literal+n.literal,value:i,regex:{pattern:e.value,flags:n.value},start:t,end:GS}}()),wF()):OF(xF())}return n}();;)if(TF("."))t=DF(".",t,(MF("."),function(){GS=YS.start;const t=xF();return function(t){return 3===t.type||4===t.type||1===t.type||5===t.type}(t)||OF(t),EF(t.value)}()));else if(TF("("))t=AF(t,NF());else{if(!TF("["))break;t=DF("[",t,LF())}return t}();if(7===YS.type&&(TF("++")||TF("--")))throw new Error(nF);return t}function zF(){var t,e;if(7!==YS.type&&4!==YS.type)e=$F();else{if(TF("++")||TF("--"))throw new Error(nF);if(TF("+")||TF("-")||TF("~")||TF("!"))t=xF(),e=zF(),e=function(t,e){const n=new qS("UnaryExpression");return n.operator=t,n.argument=e,n.prefix=!0,n}(t.value,e);else{if(PF("delete")||PF("void")||PF("typeof"))throw new Error(nF);e=$F()}}return e}function jF(t){let e=0;if(7!==t.type&&4!==t.type)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11}return e}function UF(){var t,e;return t=function(){var t,e,n,i,r,s,o,a,l,u;if(t=YS,l=zF(),0===(r=jF(i=YS)))return l;for(i.prec=r,xF(),e=[t,YS],s=[l,i,o=zF()];(r=jF(YS))>0;){for(;s.length>2&&r<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,l=s.pop(),e.pop(),n=CF(a,l,o),s.push(n);(i=xF()).prec=r,s.push(i),e.push(YS),n=zF(),s.push(n)}for(n=s[u=s.length-1],e.pop();u>1;)e.pop(),n=CF(s[u-1].value,s[u-2],n),u-=2;return n}(),TF("?")&&(xF(),e=UF(),MF(":"),t=function(t,e,n){const i=new qS("ConditionalExpression");return i.test=t,i.consequent=e,i.alternate=n,i}(t,e,UF())),t}function VF(){const t=UF();if(TF(","))throw new Error(nF);return t}var qF={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function HF(t){function e(e,n,i){return r=>function(e,n,i,r){let s=t(n[0]);return i&&(s=i+"("+s+")",0===i.lastIndexOf("new ",0)&&(s="("+s+")")),s+"."+e+(r<0?"":0===r?"()":"("+n.slice(1).map(t).join(",")+")")}(e,r,n,i)}const n="new Date",i="String",r="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(e){e.length<3&&x("Missing arguments to clamp function."),e.length>3&&x("Too many arguments to clamp function.");const n=e.map(t);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:e("getDate",n,0),day:e("getDay",n,0),year:e("getFullYear",n,0),month:e("getMonth",n,0),hours:e("getHours",n,0),minutes:e("getMinutes",n,0),seconds:e("getSeconds",n,0),milliseconds:e("getMilliseconds",n,0),time:e("getTime",n,0),timezoneoffset:e("getTimezoneOffset",n,0),utcdate:e("getUTCDate",n,0),utcday:e("getUTCDay",n,0),utcyear:e("getUTCFullYear",n,0),utcmonth:e("getUTCMonth",n,0),utchours:e("getUTCHours",n,0),utcminutes:e("getUTCMinutes",n,0),utcseconds:e("getUTCSeconds",n,0),utcmilliseconds:e("getUTCMilliseconds",n,0),length:e("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:e("toUpperCase",i,0),lower:e("toLowerCase",i,0),substring:e("substring",i),split:e("split",i),trim:e("trim",i,0),regexp:r,test:e("test",r),if:function(e){e.length<3&&x("Missing arguments to if function."),e.length>3&&x("Too many arguments to if function.");const n=e.map(t);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}var WF,GF,XF,YF,KF,ZF,QF,JF,tO,eO,nO,iO,rO,sO,oO,aO,lO=new Dx,uO=new Dx,cO={point:Zx,lineStart:Zx,lineEnd:Zx,polygonStart:function(){lO=new Dx,cO.lineStart=hO,cO.lineEnd=dO},polygonEnd:function(){var t=+lO;uO.add(t<0?Px+t:t),this.lineStart=this.lineEnd=this.point=Zx},sphere:function(){uO.add(Px)}};function hO(){cO.point=fO}function dO(){pO(WF,GF)}function fO(t,e){cO.point=pO,WF=t,GF=e,XF=t*=Bx,YF=$x(e=(e*=Bx)/2+Tx),KF=Hx(e)}function pO(t,e){var n=(t*=Bx)-XF,i=n>=0?1:-1,r=i*n,s=$x(e=(e*=Bx)/2+Tx),o=Hx(e),a=KF*o,l=YF*s+a*$x(r),u=a*i*Hx(r);lO.add(Lx(u,l)),XF=t,YF=s,KF=o}var mO,gO,yO,vO,_O,bO,xO,wO,CO,AO,EO,kO,DO,SO,FO,OO,MO={point:TO,lineStart:RO,lineEnd:BO,polygonStart:function(){MO.point=IO,MO.lineStart=NO,MO.lineEnd=LO,sO=new Dx,cO.polygonStart()},polygonEnd:function(){cO.polygonEnd(),MO.point=TO,MO.lineStart=RO,MO.lineEnd=BO,lO<0?(ZF=-(JF=180),QF=-(tO=90)):sO>Sx?tO=90:sO<-1e-6&&(QF=-90),aO[0]=ZF,aO[1]=JF},sphere:function(){ZF=-(JF=180),QF=-(tO=90)}};function TO(t,e){oO.push(aO=[ZF=t,JF=t]),e<QF&&(QF=e),e>tO&&(tO=e)}function PO(t,e){var n=sC([t*Bx,e*Bx]);if(rO){var i=aC(rO,n),r=aC([i[1],-i[0],0],i);cC(r),r=rC(r);var s,o=t-eO,a=o>0?1:-1,l=r[0]*Rx*a,u=Ix(o)>180;u^(a*eO<l&&l<a*t)?(s=r[1]*Rx)>tO&&(tO=s):u^(a*eO<(l=(l+360)%360-180)&&l<a*t)?(s=-r[1]*Rx)<QF&&(QF=s):(e<QF&&(QF=e),e>tO&&(tO=e)),u?t<eO?$O(ZF,t)>$O(ZF,JF)&&(JF=t):$O(t,JF)>$O(ZF,JF)&&(ZF=t):JF>=ZF?(t<ZF&&(ZF=t),t>JF&&(JF=t)):t>eO?$O(ZF,t)>$O(ZF,JF)&&(JF=t):$O(t,JF)>$O(ZF,JF)&&(ZF=t)}else oO.push(aO=[ZF=t,JF=t]);e<QF&&(QF=e),e>tO&&(tO=e),rO=n,eO=t}function RO(){MO.point=PO}function BO(){aO[0]=ZF,aO[1]=JF,MO.point=TO,rO=null}function IO(t,e){if(rO){var n=t-eO;sO.add(Ix(n)>180?n+(n>0?360:-360):n)}else nO=t,iO=e;cO.point(t,e),PO(t,e)}function NO(){cO.lineStart()}function LO(){IO(nO,iO),cO.lineEnd(),Ix(sO)>Sx&&(ZF=-(JF=180)),aO[0]=ZF,aO[1]=JF,rO=null}function $O(t,e){return(e-=t)<0?e+360:e}function zO(t,e){return t[0]-e[0]}function jO(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var UO={sphere:Zx,point:VO,lineStart:HO,lineEnd:XO,polygonStart:function(){UO.lineStart=YO,UO.lineEnd=KO},polygonEnd:function(){UO.lineStart=HO,UO.lineEnd=XO}};function VO(t,e){t*=Bx;var n=$x(e*=Bx);qO(n*$x(t),n*Hx(t),Hx(e))}function qO(t,e,n){++mO,yO+=(t-yO)/mO,vO+=(e-vO)/mO,_O+=(n-_O)/mO}function HO(){UO.point=WO}function WO(t,e){t*=Bx;var n=$x(e*=Bx);SO=n*$x(t),FO=n*Hx(t),OO=Hx(e),UO.point=GO,qO(SO,FO,OO)}function GO(t,e){t*=Bx;var n=$x(e*=Bx),i=n*$x(t),r=n*Hx(t),s=Hx(e),o=Lx(Gx((o=FO*s-OO*r)*o+(o=OO*i-SO*s)*o+(o=SO*r-FO*i)*o),SO*i+FO*r+OO*s);gO+=o,bO+=o*(SO+(SO=i)),xO+=o*(FO+(FO=r)),wO+=o*(OO+(OO=s)),qO(SO,FO,OO)}function XO(){UO.point=VO}function YO(){UO.point=ZO}function KO(){QO(kO,DO),UO.point=VO}function ZO(t,e){kO=t,DO=e,t*=Bx,e*=Bx,UO.point=QO;var n=$x(e);SO=n*$x(t),FO=n*Hx(t),OO=Hx(e),qO(SO,FO,OO)}function QO(t,e){t*=Bx;var n=$x(e*=Bx),i=n*$x(t),r=n*Hx(t),s=Hx(e),o=FO*s-OO*r,a=OO*i-SO*s,l=SO*r-FO*i,u=Ux(o,a,l),c=Kx(u),h=u&&-c/u;CO.add(h*o),AO.add(h*a),EO.add(h*l),gO+=c,bO+=c*(SO+(SO=i)),xO+=c*(FO+(FO=r)),wO+=c*(OO+(OO=s)),qO(SO,FO,OO)}var JO;(JO={})[1]="Boolean",JO[2]="<end>",JO[3]="Identifier",JO[4]="Keyword",JO[5]="Null",JO[6]="Numeric",JO[7]="Punctuator",JO[8]="String",JO[9]="RegularExpression";const tM="intersect",eM="union",nM="index:unit";function iM(t,e){for(var n,i,r=e.fields,s=e.values,o=r.length,a=0;a<o;++a)if((i=r[a]).getter=de.EP.getter||(0,de.EP)(i.field),n=i.getter(t),(0,de.J_)(n)&&(n=(0,de.He)(n)),(0,de.J_)(s[a])&&(s[a]=(0,de.He)(s[a])),(0,de.J_)(s[a][0])&&(s[a]=s[a].map(de.He)),"E"===i.type){if((0,de.kJ)(s[a])?s[a].indexOf(n)<0:n!==s[a])return!1}else if("R"===i.type){if(!(0,de.u5)(n,s[a]))return!1}else if("R-RE"===i.type){if(!(0,de.u5)(n,s[a],!0,!1))return!1}else if("R-E"===i.type){if(!(0,de.u5)(n,s[a],!1,!1))return!1}else if("R-LE"===i.type&&!(0,de.u5)(n,s[a],!1,!0))return!1;return!0}const rM=(0,de.EP)("_vgsid_"),sM=function(t){let e=t,n=t;function i(t,e,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){const s=i+r>>>1;n(t[s],e)<0?i=s+1:r=s}return i}return 1===t.length&&(e=(e,n)=>t(e)-n,n=function(t){return(e,n)=>function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}(t(e),n)}(t)),{left:i,center:function(t,n,r,s){null==r&&(r=0),null==s&&(s=t.length);const o=i(t,n,r,s-1);return o>r&&e(t[o-1],n)>-e(t[o],n)?o-1:o},right:function(t,e,i,r){for(null==i&&(i=0),null==r&&(r=t.length);i<r;){const s=i+r>>>1;n(t[s],e)>0?r=s:i=s+1}return i}}}(rM),oM=sM.left,aM=sM.right;var lM={E_union:function(t,e){if(!t.length)return e;for(var n=0,i=e.length;n<i;++n)t.indexOf(e[n])<0&&t.push(e[n]);return t},E_intersect:function(t,e){return t.length?t.filter(t=>e.indexOf(t)>=0):e},R_union:function(t,e){var n=(0,de.He)(e[0]),i=(0,de.He)(e[1]);return n>i&&(n=e[1],i=e[0]),t.length?(t[0]>n&&(t[0]=n),t[1]<i&&(t[1]=i),t):[n,i]},R_intersect:function(t,e){var n=(0,de.He)(e[0]),i=(0,de.He)(e[1]);return n>i&&(n=e[1],i=e[0]),t.length?i<t[0]||t[1]<n?[]:(t[0]<n&&(t[0]=n),t[1]>i&&(t[1]=i),t):[n,i]}};function uM(t,e,n,i){"Literal"!==e[0].type&&(0,de.vU)("First argument to selection functions must be a string literal.");const r=e[0].value,s=":"+r;(e.length>=2&&(0,de.fj)(e).value)!==tM||(0,de.nr)(i,"@unit")||(i["@unit"]=n.getData(r).indataRef(n,"unit")),(0,de.nr)(i,s)||(i[s]=n.getData(r).tuplesRef())}function cM(t){const e=this.context.data[t];return e?e.values.value:[]}const hM=t=>function(e,n){return this.context.dataflow.locale()[t](n)(e)},dM=hM("format"),fM=hM("timeFormat"),pM=hM("utcFormat"),mM=hM("timeParse"),gM=hM("utcParse"),yM=new Date(2e3,0,1);function vM(t,e,n){return Number.isInteger(t)&&Number.isInteger(e)?(yM.setYear(2e3),yM.setMonth(t),yM.setDate(e),fM.call(this,yM,n)):""}function _M(t,e,n,i){e[0].type!==US&&(0,de.vU)("First argument to data functions must be a string literal.");const r=e[0].value,s=":"+r;if(!(0,de.nr)(s,i))try{i[s]=n.getData(r).tuplesRef()}catch(o){}}function bM(t,e,n,i){if(e[0].type===US)xM(n,i,e[0].value);else for(t in n.scales)xM(n,i,t)}function xM(t,e,n){const i="%"+n;if(!(0,de.nr)(e,i))try{e[i]=t.scaleRef(n)}catch(r){}}function wM(t,e){let n;return(0,de.mf)(t)?t:(0,de.HD)(t)?(n=e.scales[t])&&n.value:void 0}function CM(t,e){return function(n,i,r){if(n){const e=wM(n,(r||this).context);return e&&e.path[t](i)}return e(i)}}const AM=CM("area",function(t){return uO=new Dx,kx(t,cO),2*uO}),EM=CM("bounds",function(t){var e,n,i,r,s,o,a;if(tO=JF=-(ZF=QF=1/0),oO=[],kx(t,MO),n=oO.length){for(oO.sort(zO),e=1,s=[i=oO[0]];e<n;++e)jO(i,(r=oO[e])[0])||jO(i,r[1])?($O(i[0],r[1])>$O(i[0],i[1])&&(i[1]=r[1]),$O(r[0],i[1])>$O(i[0],i[1])&&(i[0]=r[0])):s.push(i=r);for(o=-1/0,e=0,i=s[n=s.length-1];e<=n;i=r,++e)(a=$O(i[1],(r=s[e])[0]))>o&&(o=a,ZF=r[0],JF=i[1])}return oO=aO=null,ZF===1/0||QF===1/0?[[NaN,NaN],[NaN,NaN]]:[[ZF,QF],[JF,tO]]}),kM=CM("centroid",function(t){mO=gO=yO=vO=_O=bO=xO=wO=0,CO=new Dx,AO=new Dx,EO=new Dx,kx(t,UO);var e=+CO,n=+AO,i=+EO,r=Ux(e,n,i);return r<Fx&&(e=bO,n=xO,i=wO,gO<Sx&&(e=yO,n=vO,i=_O),(r=Ux(e,n,i))<Fx)?[NaN,NaN]:[Lx(n,e)*Rx,Kx(i/r)*Rx]});function DM(t,e,n){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(i){t.warn(i)}return n[n.length-1]}function SM(t){const e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function FM(t){const e=Th(t);return.2126*SM(e.r)+.7152*SM(e.g)+.0722*SM(e.b)}function OM(t,e){return t===e||t!=t&&e!=e||((0,de.kJ)(t)?!(!(0,de.kJ)(e)||t.length!==e.length)&&function(t,e){for(let n=0,i=t.length;n<i;++n)if(!OM(t[n],e[n]))return!1;return!0}(t,e):!(!(0,de.Kn)(t)||!(0,de.Kn)(e))&&MM(t,e))}function MM(t,e){for(const n in t)if(!OM(t[n],e[n]))return!1;return!0}function TM(t){return e=>MM(t,e)}const PM={};function RM(t){return(0,de.kJ)(t)||ArrayBuffer.isView(t)?t:null}function BM(t){return RM(t)||((0,de.HD)(t)?t:null)}const IM=t=>t.data;function NM(t,e){const n=cM.call(e,t);return n.root&&n.root.lookup||{}}const LM=()=>"undefined"!=typeof window&&window||null,$M={random:()=>Ea(),cumulativeNormal:Ia,cumulativeLogNormal:Ua,cumulativeUniform:Xa,densityNormal:Ba,densityLogNormal:ja,densityUniform:Ga,quantileNormal:Na,quantileLogNormal:Va,quantileUniform:Ya,sampleNormal:Ra,sampleLogNormal:za,sampleUniform:Wa,isArray:de.kJ,isBoolean:de.jn,isDate:de.J_,isDefined:t=>void 0!==t,isNumber:de.hj,isObject:de.Kn,isRegExp:de.Kj,isString:de.HD,isTuple:Js,isValid:t=>null!=t&&t==t,toBoolean:de.sw,toDate:de.ZU,toNumber:de.He,toString:de.BB,indexof:function(t,...e){return BM(t).indexOf(...e)},join:function(t,...e){return RM(t).join(...e)},lastindexof:function(t,...e){return BM(t).lastIndexOf(...e)},replace:function(t,e,n){return(0,de.mf)(n)&&(0,de.vU)("Function argument passed to replace."),String(t).replace(e,n)},reverse:function(t){return RM(t).slice().reverse()},slice:function(t,...e){return BM(t).slice(...e)},flush:de.yl,lerp:de.t7,merge:function(){const t=[].slice.call(arguments);return t.unshift({}),(0,de.l7)(...t)},pad:de.vk,peek:de.fj,pluck:function(t,e){const n=PM[e]||(PM[e]=(0,de.EP)(e));return(0,de.kJ)(t)?t.map(n):n(t)},span:de.yP,inrange:de.u5,truncate:de.$G,rgb:Th,lab:xf,hcl:Sf,hsl:$h,luminance:FM,contrast:function(t,e){const n=FM(t),i=FM(e);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)},sequence:pl,format:dM,utcFormat:pM,utcParse:gM,utcOffset:Hi,utcSequence:Xi,timeFormat:fM,timeParse:mM,timeOffset:qi,timeSequence:Gi,timeUnitSpecifier:gi,monthFormat:function(t){return vM.call(this,t,1,"%B")},monthAbbrevFormat:function(t){return vM.call(this,t,1,"%b")},dayFormat:function(t){return vM.call(this,0,2+t,"%A")},dayAbbrevFormat:function(t){return vM.call(this,0,2+t,"%a")},quarter:de.mS,utcquarter:de.N3,week:bi,utcweek:ki,dayofyear:_i,utcdayofyear:Ei,warn:function(){return DM(this.context.dataflow,"warn",arguments)},info:function(){return DM(this.context.dataflow,"info",arguments)},debug:function(){return DM(this.context.dataflow,"debug",arguments)},extent:de.We,inScope:function(t){const e=this.context.group;let n=!1;if(e)for(;t;){if(t===e){n=!0;break}t=t.mark.group}return n},intersect:function(t,e,n){if(!t)return[];const[i,r]=t,s=(new ag).set(i[0],i[1],r[0],r[1]);return M_(n||this.context.dataflow.scenegraph().root,s,function(t){let e=null;if(t){const n=(0,de.IX)(t.marktype),i=(0,de.IX)(t.markname);e=t=>(!n.length||n.some(e=>t.marktype===e))&&(!i.length||i.some(e=>t.name===e))}return e}(e))},clampRange:de.l$,pinchDistance:function(t){const e=t.touches,n=e[0].clientX-e[1].clientX,i=e[0].clientY-e[1].clientY;return Math.sqrt(n*n+i*i)},pinchAngle:function(t){const e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)},screen:function(){const t=LM();return t?t.screen:{}},containerSize:function(){const t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]},windowSize:function(){const t=LM();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0]},bandspace:function(t,e,n){return Kf(t||0,e||0,n||0)},setdata:function(t,e){const n=this.context.dataflow;return n.pulse(this.context.data[t].input,n.changeset().remove(de.yb).insert(e)),1},pathShape:function(t){let e=null;return function(n){return n?Om(n,e=e||_m(t)):t}},panLinear:de.Dw,panLog:de.mJ,panPow:de.QA,panSymlog:de.Zw,zoomLinear:de.ay,zoomLog:de.dH,zoomPow:de.mK,zoomSymlog:de.bV,encode:function(t,e,n){if(t){const n=this.context.dataflow;n.pulse(t.mark.source,n.changeset().encode(t,e))}return void 0!==n?n:t},modify:function(t,e,n,i,r,s){const o=this.context.dataflow,a=this.context.data[t],l=a.input,u=o.stamp();let c,h,d=a.changes;if(!1===o._trigger||!(l.value.length||e||i))return 0;if((!d||d.stamp<u)&&(a.changes=d=o.changeset(),d.stamp=u,o.runAfter(()=>{a.modified=!0,o.pulse(l,d).run()},!0,1)),n&&(c=!0===n?de.yb:(0,de.kJ)(n)||Js(n)?n:TM(n),d.remove(c)),e&&d.insert(e),i&&(c=TM(i),l.value.some(c)?d.remove(c):d.insert(i)),r)for(h in s)d.modify(r,h,s[h]);return 1}},zM=["view","item","group","xy","x","y"],jM="this.",UM={},VM={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:t=>"_[".concat((0,de.m8)("$"+t),"]"),functions:function(t){const e=HF(t);zM.forEach(t=>e[t]="event.vega."+t);for(const n in $M)e[n]=jM+n;return(0,de.l7)(e,function(t,e,n){e.__bandwidth=t=>t&&t.bandwidth?t.bandwidth():0,n._bandwidth=bM,n._range=bM,n._scale=bM;const i=e=>"_["+(e.type===US?(0,de.m8)("%"+e.value):(0,de.m8)("%")+"+"+t(e))+"]";return{_bandwidth:t=>"this.__bandwidth(".concat(i(t[0]),")"),_range:t=>"".concat(i(t[0]),".range()"),_scale:e=>"".concat(i(e[0]),"(").concat(t(e[1]),")")}}(t,$M,UM)),e},constants:qF,visitors:UM},qM=function(t){const e=(t=t||{}).allowed?Wt(t.allowed):{},n=t.forbidden?Wt(t.forbidden):{},i=t.constants||qF,r=(t.functions||HF)(h),s=t.globalvar,o=t.fieldvar,a=ct(s)?s:t=>"".concat(s,'["').concat(t,'"]');let l={},u={},c=0;function h(t){if(Pt(t))return t;const e=d[t.type];return null==e&&x("Unsupported type: "+t.type),e(t)}const d={Literal:t=>t.raw,Identifier:t=>{const r=t.name;return c>0?r:wt(n,r)?x("Illegal identifier: "+r):wt(i,r)?i[r]:wt(e,r)?r:(l[r]=1,a(r))},MemberExpression:t=>{const e=!t.computed,n=h(t.object);e&&(c+=1);const i=h(t.property);return n===o&&(u[function(t){const e=t&&t.length-1;return e&&('"'===t[0]&&'"'===t[e]||"'"===t[0]&&"'"===t[e])?t.slice(1,-1):t}(i)]=1),e&&(c-=1),n+(e?"."+i:"["+i+"]")},CallExpression:t=>{"Identifier"!==t.callee.type&&x("Illegal callee type: "+t.callee.type);const e=t.callee.name,n=t.arguments,i=wt(r,e)&&r[e];return i||x("Unrecognized function: "+e),ct(i)?i(n):i+"("+n.map(h).join(",")+")"},ArrayExpression:t=>"["+t.elements.map(h).join(",")+"]",BinaryExpression:t=>"("+h(t.left)+" "+t.operator+" "+h(t.right)+")",UnaryExpression:t=>"("+t.operator+h(t.argument)+")",ConditionalExpression:t=>"("+h(t.test)+"?"+h(t.consequent)+":"+h(t.alternate)+")",LogicalExpression:t=>"("+h(t.left)+t.operator+h(t.right)+")",ObjectExpression:t=>"{"+t.properties.map(h).join(",")+"}",Property:t=>{c+=1;const e=h(t.key);return c-=1,e+":"+h(t.value)}};function f(t){const e={code:h(t),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},e}return f.functions=r,f.constants=i,f}(VM);function HM(t,e,n){return 1===arguments.length?$M[t]:($M[t]=e,n&&(UM[t]=n),qM&&(qM.functions[t]=jM+t),this)}function WM(t,e){const n={};let i;try{i=function(t){GS=0,XS=(WS=t).length,YS=null,wF();const e=VF();if(2!==YS.type)throw new Error("Unexpect token after expression.");return e}(t=(0,de.HD)(t)?t:(0,de.m8)(t)+"")}catch(s){(0,de.vU)("Expression parse error: "+t)}i.visit(t=>{if(t.type!==VS)return;const i=t.callee.name,r=VM.visitors[i];r&&r(i,t.arguments,e,n)});const r=qM(i);return r.globals.forEach(t=>{const i="$"+t;!(0,de.nr)(n,i)&&e.getSignal(t)&&(n[i]=e.signalRef(t))}),{$expr:(0,de.l7)({code:r.code},e.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}HM("bandwidth",function(t,e){const n=wM(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0},bM),HM("copy",function(t,e){const n=wM(t,(e||this).context);return n?n.copy():void 0},bM),HM("domain",function(t,e){const n=wM(t,(e||this).context);return n?n.domain():[]},bM),HM("range",function(t,e){const n=wM(t,(e||this).context);return n&&n.range?n.range():[]},bM),HM("invert",function(t,e,n){const i=wM(t,(n||this).context);return i?(0,de.kJ)(e)?(i.invertRange||i.invert)(e):(i.invert||i.invertExtent)(e):void 0},bM),HM("scale",function(t,e,n){const i=wM(t,(n||this).context);return i?i(e):void 0},bM),HM("gradient",function(t,e,n,i,r){t=wM(t,(r||this).context);const s=pm(e,n);let o=t.domain(),a=o[0],l=(0,de.fj)(o),u=de.yR;return l-a?u=Lp(t,a,l):t=(t.interpolator?Ep("sequential")().interpolator(t.interpolator()):Ep("linear")().interpolate(t.interpolate()).range(t.range())).domain([a=0,l=1]),t.ticks&&(o=t.ticks(+i||15),a!==o[0]&&o.unshift(a),l!==(0,de.fj)(o)&&o.push(l)),o.forEach(e=>s.stop(u(e),t(e))),s},bM),HM("geoArea",AM,bM),HM("geoBounds",EM,bM),HM("geoCentroid",kM,bM),HM("geoShape",function(t,e,n){const i=wM(t,(n||this).context);return function(t){return i?i.path.context(t)(e):""}},bM),HM("indata",function(t,e,n){const i=this.context.data[t]["index:"+e],r=i?i.value.get(n):void 0;return r?r.count:r},function(t,e,n,i){e[0].type!==US&&(0,de.vU)("First argument to indata must be a string literal."),e[1].type!==US&&(0,de.vU)("Second argument to indata must be a string literal.");const r=e[0].value,s=e[1].value,o="@"+s;(0,de.nr)(o,i)||(i[o]=n.getData(r).indataRef(n,s))}),HM("data",cM,_M),HM("treePath",function(t,e,n){const i=NM(t,this),r=i[e],s=i[n];return r&&s?r.path(s).map(IM):void 0},_M),HM("treeAncestors",function(t,e){const n=NM(t,this)[e];return n?n.ancestors().map(IM):void 0},_M),HM("vlSelectionTest",function(t,e,n){for(var i,r,s,o,a,l=this.context.data[t],u=l?l.values.value:[],c=l?l[nM]&&l[nM].value:void 0,h=n===tM,d=u.length,f=0;f<d;++f)if(i=u[f],c&&h){if(-1===(s=(r=r||{})[o=i.unit]||0))continue;if(a=iM(e,i),r[o]=a?-1:++s,a&&1===c.size)return!0;if(!a&&s===c.get(o).count)return!1}else if(h^(a=iM(e,i)))return a;return d&&h},uM),HM("vlSelectionIdTest",function(t,e,n){const i=this.context.data[t],r=i?i.values.value:[],s=i?i[nM]&&i[nM].value:void 0,o=n===tM,a=rM(e),l=oM(r,a);if(l===r.length)return!1;if(rM(r[l])!==a)return!1;if(s&&o){if(1===s.size)return!0;if(aM(r,a)-l<s.size)return!1}return!0},uM),HM("vlSelectionResolve",function(t,e,n,i){for(var r,s,o,a,l,u,c,h,d,f,p=this.context.data[t],m=p?p.values.value:[],g={},y={},v={},_=m.length,b=0;b<_;++b){for(a=(r=m[b]).unit,o=r.values,d=0,f=(s=r.fields).length;d<f;++d)c=(u=g[(l=s[d]).field]||(g[l.field]={}))[a]||(u[a]=[]),v[l.field]=h=l.type.charAt(0),u[a]=(0,lM[h+"_union"])(c,(0,de.IX)(o[d]));n&&(c=y[a]||(y[a]=[])).push((0,de.IX)(o).reduce((t,e,n)=>(t[s[n].field]=e,t),{}))}return e=e||eM,Object.keys(g).forEach(t=>{g[t]=Object.keys(g[t]).map(e=>g[t][e]).reduce((n,i)=>void 0===n?i:lM[v[t]+"_"+e](n,i))}),m=Object.keys(y),n&&m.length&&(g[i?"vlPoint":"vlMulti"]=e===eM?{or:m.reduce((t,e)=>(t.push(...y[e]),t),[])}:{and:m.map(t=>({or:y[t]}))}),g},uM),HM("vlSelectionTuples",function(t,e){return t.map(t=>(0,de.l7)({values:e.fields.map(e=>(e.getter||(e.getter=(0,de.EP)(e.field)))(t.datum))},e))});const GM=(0,de.Rg)(["rule"]),XM=(0,de.Rg)(["group","image","rect"]);function YM(t){return(t+"").toLowerCase()}function KM(t,e,n){";"!==n[n.length-1]&&(n="return("+n+");");const i=Function(...e.concat(n));return t&&t.functions?i.bind(t.functions):i}var ZM={operator:(t,e)=>KM(t,["_"],e.code),parameter:(t,e)=>KM(t,["datum","_"],e.code),event:(t,e)=>KM(t,["event"],e.code),handler:(t,e)=>KM(t,["_","event"],"var datum=event.item&&event.item.datum;return ".concat(e.code,";")),encode:(t,e)=>{const{marktype:n,channels:i}=e;let r="var o=item,datum=o.datum,m=0,$;";for(const s in i){const t="o["+(0,de.m8)(s)+"]";r+="$=".concat(i[s].code,";if(").concat(t,"!==$)").concat(t,"=$,m=1;")}return r+=function(t,e){let n="";return GM[e]||(t.x2&&(t.x?(XM[e]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),t.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),t.y2&&(t.y?(XM[e]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),t.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}(i,n),r+="return m;",KM(t,["item","_"],r)},codegen:{get(t){const e="[".concat(t.map(de.m8).join("]["),"]"),n=Function("_","return _".concat(e,";"));return n.path=e,n},comparator(t,e){let n;const i=Function("a","b","var u, v; return "+t.map((t,i)=>{const r=e[i];let s,o;return t.path?(s="a".concat(t.path),o="b".concat(t.path)):((n=n||{})["f"+i]=t,s="this.f".concat(i,"(a)"),o="this.f".concat(i,"(b)")),function(t,e,n,i){return"((u = ".concat(t,") < (v = ").concat(e,") || u == null) && v != null ? ").concat(n,"\n  : (u > v || v == null) && u != null ? ").concat(i,"\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ").concat(n,"\n  : v !== v && u === u ? ").concat(i," : ")}(s,o,-r,r)}).join("")+"0;");return n?i.bind(n):i}}};function QM(t,e,n){if(!t||!(0,de.Kn)(t))return t;for(let i,r=0,s=JM.length;r<s;++r)if(i=JM[r],(0,de.nr)(t,i.key))return i.parse(t,e,n);return t}var JM=[{key:"$ref",parse:function(t,e){return e.get(t.$ref)||(0,de.vU)("Operator not defined: "+t.$ref)}},{key:"$key",parse:function(t,e){const n="k:"+t.$key+"_"+!!t.$flat;return e.fn[n]||(e.fn[n]=(0,de.Jy)(t.$key,t.$flat,e.expr.codegen))}},{key:"$expr",parse:function(t,e,n){t.$params&&e.parseParameters(t.$params,n);const i="e:"+t.$expr.code+"_"+t.$name;return e.fn[i]||(e.fn[i]=(0,de.ZE)(e.parameterExpression(t.$expr),t.$fields,t.$name))}},{key:"$field",parse:function(t,e){if(!t.$field)return null;const n="f:"+t.$field+"_"+t.$name;return e.fn[n]||(e.fn[n]=(0,de.EP)(t.$field,t.$name,e.expr.codegen))}},{key:"$encode",parse:function(t,e){const n=t.$encode,i={};for(const r in n){const t=n[r];i[r]=(0,de.ZE)(e.encodeExpression(t.$expr),t.$fields),i[r].output=t.$output}return i}},{key:"$compare",parse:function(t,e){const n="c:"+t.$compare+"_"+t.$order,i=(0,de.IX)(t.$compare).map(t=>t&&t.$tupleid?to:t);return e.fn[n]||(e.fn[n]=(0,de.qu)(i,t.$order,e.expr.codegen))}},{key:"$context",parse:function(t,e){return e}},{key:"$subflow",parse:function(t,e){const n=t.$subflow;return function(t,i,r){const s=e.fork().parse(n),o=s.get(n.operators[0].id),a=s.signals.parent;return a&&a.set(r),o.detachSubflow=()=>e.detach(s),o}}},{key:"$tupleid",parse:function(){return to}}];const tT={skip:!0};function eT(t,e,n,i){return new nT(t,e,n,i)}function nT(t,e,n,i){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.expr=i||ZM,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function iT(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.events=t.events,this.expr=t.expr,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}function rT(t,e){t&&(null==e?t.removeAttribute("aria-label"):t.setAttribute("aria-label",e))}nT.prototype=iT.prototype={fork(){const t=new iT(this);return(this.subcontext||(this.subcontext=[])).push(t),t},detach(t){this.subcontext=this.subcontext.filter(e=>e!==t);const e=Object.keys(t.nodes);for(const n of e)t.nodes[n]._targets=null;for(const n of e)t.nodes[n].detach();t.nodes=null},get(t){return this.nodes[t]},set(t,e){return this.nodes[t]=e},add(t,e){const n=this,i=n.dataflow,r=t.value;if(n.set(t.id,e),"collect"===YM(t.type)&&r&&(r.$ingest?i.ingest(e,r.$ingest,r.$format):r.$request?i.preload(e,r.$request,r.$format):i.pulse(e,i.changeset().insert(r))),t.root&&(n.root=e),t.parent){let r=n.get(t.parent.$ref);r?(i.connect(r,[e]),e.targets().add(r)):(n.unresolved=n.unresolved||[]).push(()=>{r=n.get(t.parent.$ref),i.connect(r,[e]),e.targets().add(r)})}if(t.signal&&(n.signals[t.signal]=e),t.scale&&(n.scales[t.scale]=e),t.data)for(const s in t.data){const i=n.data[s]||(n.data[s]={});t.data[s].forEach(t=>i[t]=e)}},resolve(){return(this.unresolved||[]).forEach(t=>t()),delete this.unresolved,this},operator(t,e){this.add(t,this.dataflow.add(t.value,e))},transform(t,e){this.add(t,this.dataflow.add(this.transforms[YM(e)]))},stream(t,e){this.set(t.id,e)},update(t,e,n,i,r){this.dataflow.on(e,n,i,r,t.options)},operatorExpression(t){return this.expr.operator(this,t)},parameterExpression(t){return this.expr.parameter(this,t)},eventExpression(t){return this.expr.event(this,t)},handlerExpression(t){return this.expr.handler(this,t)},encodeExpression(t){return this.expr.encode(this,t)},parse:function(t){const e=this,n=t.operators||[];return t.background&&(e.background=t.background),t.eventConfig&&(e.eventConfig=t.eventConfig),t.locale&&(e.locale=t.locale),n.forEach(t=>e.parseOperator(t)),n.forEach(t=>e.parseOperatorParameters(t)),(t.streams||[]).forEach(t=>e.parseStream(t)),(t.updates||[]).forEach(t=>e.parseUpdate(t)),e.resolve()},parseOperator:function(t){const e=this;"operator"!==YM(t.type)&&t.type?e.transform(t,t.type):e.operator(t,t.update?e.operatorExpression(t.update):null)},parseOperatorParameters:function(t){const e=this;if(t.params){const n=e.get(t.id);n||(0,de.vU)("Invalid operator id: "+t.id),e.dataflow.connect(n,n.parameters(e.parseParameters(t.params),t.react,t.initonly))}},parseParameters:function(t,e){e=e||{};const n=this;for(const i in t){const r=t[i];e[i]=(0,de.kJ)(r)?r.map(t=>QM(t,n,e)):QM(r,n,e)}return e},parseStream:function(t){var e,n=this,i=null!=t.filter?n.eventExpression(t.filter):void 0,r=null!=t.stream?n.get(t.stream):void 0;t.source?r=n.events(t.source,t.type,i):t.merge&&(r=(e=t.merge.map(t=>n.get(t)))[0].merge.apply(e[0],e.slice(1))),t.between&&(e=t.between.map(t=>n.get(t)),r=r.between(e[0],e[1])),t.filter&&(r=r.filter(i)),null!=t.throttle&&(r=r.throttle(+t.throttle)),null!=t.debounce&&(r=r.debounce(+t.debounce)),null==r&&(0,de.vU)("Invalid stream definition: "+JSON.stringify(t)),t.consume&&r.consume(!0),n.stream(t,r)},parseUpdate:function(t){var e,n=this,i=(0,de.Kn)(i=t.source)?i.$ref:i,r=n.get(i),s=t.update,o=void 0;r||(0,de.vU)("Source not defined: "+t.source),e=t.target&&t.target.$expr?n.eventExpression(t.target.$expr):n.get(t.target),s&&s.$expr&&(s.$params&&(o=n.parseParameters(s.$params)),s=n.handlerExpression(s.$expr)),n.update(t,r,e,s,o)},getState:function(t){var e=this,n={};if(t.signals){var i=n.signals={};Object.keys(e.signals).forEach(n=>{const r=e.signals[n];t.signals(n,r)&&(i[n]=r.value)})}if(t.data){var r=n.data={};Object.keys(e.data).forEach(n=>{const i=e.data[n];t.data(n,i)&&(r[n]=i.input.value)})}return e.subcontext&&!1!==t.recurse&&(n.subcontext=e.subcontext.map(e=>e.getState(t))),n},setState:function(t){var e=this,n=e.dataflow,i=t.data,r=t.signals;Object.keys(r||{}).forEach(t=>{n.update(e.signals[t],r[t],tT)}),Object.keys(i||{}).forEach(t=>{n.pulse(e.data[t].input,n.changeset().remove(de.yb).insert(i[t]))}),(t.subcontext||[]).forEach((t,n)=>{const i=e.subcontext[n];i&&i.setState(t)})}};const sT="default";function oT(t,e){const n=t.globalCursor()?"undefined"!=typeof document&&document.body:t.container();if(n)return null==e?n.style.removeProperty("cursor"):n.style.cursor=e}function aT(t,e){var n=t._runtime.data;return LS(n,e)||MS("Unrecognized data set: "+e),n[e]}function lT(t,e){ao(e)||MS("Second argument to changes must be a changeset.");const n=aT(this,t);return n.modified=!0,this.pulse(n.input,e)}function uT(t){var e=t.padding();return Math.max(0,t._viewWidth+e.left+e.right)}function cT(t){var e=t.padding();return Math.max(0,t._viewHeight+e.top+e.bottom)}function hT(t){var e=t.padding(),n=t._origin;return[e.left+n[0],e.top+n[1]]}const dT="view",fT={trap:!1};function pT(t,e,n,i){var r;t._eventListeners.push({type:n,sources:(r=e,null!=r?PS(r)?r:[r]:[]),handler:i})}function mT(t,e,n){const i=t._eventConfig&&t._eventConfig[e];return!(!1===i||RS(i)&&!i[n])||(t.warn(`Blocked ${e} ${n} event listener.`),!1)}function gT(t){return t.item}function yT(t){return t.item.mark.source}function vT(t){return function(e,n){return n.vega.view().changeset().encode(n.item,t)}}function _T(t,e,n){const i=document.createElement(t);for(const r in e)i.setAttribute(r,e[r]);return null!=n&&(i.textContent=n),i}function bT(t,e,n){if(!e)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:e=>{e!=t.signal(i.signal)&&t.runAsync(null,()=>{r.source=!0,t.signal(i.signal,e)})}},i.debounce&&(r.update=function(t,e){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(e(i),n=null),t)}}(i.debounce,r.update))),(null==i.input&&i.element?xT:wT)(r,e,i,t),r.active||(t.on(t._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(t.signal(i.signal))}),r.active=!0),r}function xT(t,e,n,i){const r=n.event||"input",s=()=>t.update(e.value);i.signal(n.signal,e.value),e.addEventListener(r,s),pT(i,e,r,s),t.set=t=>{e.value=t,e.dispatchEvent(function(t){return"undefined"!=typeof Event?new Event(t):{type:t}}(r))}}function wT(t,e,n,i){const r=i.signal(n.signal),s=_T("div",{class:"vega-bind"}),o="radio"===n.input?s:s.appendChild(_T("label"));o.appendChild(_T("span",{class:"vega-bind-name"},n.name||n.signal)),e.appendChild(s);let a=CT;switch(n.input){case"checkbox":a=AT;break;case"select":a=ET;break;case"radio":a=kT;break;case"range":a=DT}a(t,o,n,r)}function CT(t,e,n,i){const r=_T("input");for(const s in n)"signal"!==s&&"element"!==s&&r.setAttribute("input"===s?"type":s,n[s]);r.setAttribute("name",n.signal),r.value=i,e.appendChild(r),r.addEventListener("input",()=>t.update(r.value)),t.elements=[r],t.set=t=>r.value=t}function AT(t,e,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const s=_T("input",r);e.appendChild(s),s.addEventListener("change",()=>t.update(s.checked)),t.elements=[s],t.set=t=>s.checked=!!t||null}function ET(t,e,n,i){const r=_T("select",{name:n.signal}),s=n.labels||[];n.options.forEach((t,e)=>{const n={value:t};ST(t,i)&&(n.selected=!0),r.appendChild(_T("option",n,(s[e]||t)+""))}),e.appendChild(r),r.addEventListener("change",()=>{t.update(n.options[r.selectedIndex])}),t.elements=[r],t.set=t=>{for(let e=0,i=n.options.length;e<i;++e)if(ST(n.options[e],t))return void(r.selectedIndex=e)}}function kT(t,e,n,i){const r=_T("span",{class:"vega-bind-radio"}),s=n.labels||[];e.appendChild(r),t.elements=n.options.map((e,o)=>{const a={type:"radio",name:n.signal,value:e};ST(e,i)&&(a.checked=!0);const l=_T("input",a);l.addEventListener("change",()=>t.update(e));const u=_T("label",{},(s[o]||e)+"");return u.prepend(l),r.appendChild(u),l}),t.set=e=>{const n=t.elements,i=n.length;for(let t=0;t<i;++t)ST(n[t].value,e)&&(n[t].checked=!0)}}function DT(t,e,n,i){i=void 0!==i?i:(+n.max+ +n.min)/2;const r=null!=n.max?n.max:Math.max(100,+i)||100,s=n.min||Math.min(0,r,+i)||0,o=n.step||en(s,r,100),a=_T("input",{type:"range",name:n.signal,min:s,max:r,step:o});a.value=i;const l=_T("span",{},+i);e.appendChild(a),e.appendChild(l);const u=()=>{l.textContent=a.value,t.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),t.elements=[a],t.set=t=>{a.value=t,l.textContent=t}}function ST(t,e){return t===e||t+""==e+""}function FT(t,e,n,i,r,s){return(e=e||new i(t.loader())).initialize(n,uT(t),cT(t),hT(t),r,s).background(t.background())}function OT(t,e){return e?function(){try{e.apply(this,arguments)}catch(n){t.error(n)}}:null}function MT(t,e,n){if("string"==typeof e){if("undefined"==typeof document)return t.error("DOM document instance not found."),null;if(!(e=document.querySelector(e)))return t.error("Signal bind element not found: "+e),null}if(e&&n)try{e.innerHTML=""}catch(i){e=null,t.error(i)}return e}const TT=t=>+t||0;function PT(t){return RS(t)?{top:TT(t.top),bottom:TT(t.bottom),left:TT(t.left),right:TT(t.right)}:(t=>({top:t,bottom:t,left:t,right:t}))(TT(t))}async function RT(t,e,n,i){const r=O_(e),s=r&&r.headless;return s||MS("Unrecognized renderer type: "+e),await t.runAsync(),FT(t,null,null,s,n,i).renderAsync(t._scenegraph.root)}var BT="padding",IT={skip:!0};function NT(t,e){var n=t.autosize(),i=t.padding();return e-(n&&n.contains===BT?i.left+i.right:0)}function LT(t,e){var n=t.autosize(),i=t.padding();return e-(n&&n.contains===BT?i.top+i.bottom:0)}function $T(t,e){return e.modified&&PS(e.input.value)&&t.indexOf("_:vega:_")}function zT(t,e){return!("parent"===t||e instanceof Ro.proxy)}function jT(t,e,n,i){const r=t.element();r&&r.setAttribute("title",function(t){return null==t?"":PS(t)?UT(t):RS(t)&&!$S(t)?(e=t,Object.keys(e).map(t=>{const n=e[t];return t+": "+(PS(n)?UT(n):VT(n))}).join("\n")):t+"";var e}(i))}function UT(t){return"["+t.map(VT).join(", ")+"]"}function VT(t){return PS(t)?"[\u2026]":RS(t)&&!$S(t)?"{\u2026}":t}function qT(t,e){const n=this;if(e=e||{},Mo.call(n),e.loader&&n.loader(e.loader),e.logger&&n.logger(e.logger),null!=e.logLevel&&n.logLevel(e.logLevel),e.locale||t.locale){const i=IS({},t.locale,e.locale);n.locale(qs(i.number,i.time))}n._el=null,n._elBind=null,n._renderType=e.renderer||S_.Canvas,n._scenegraph=new cv;const i=n._scenegraph.root;n._renderer=null,n._tooltip=e.tooltip||jT,n._redraw=!0,n._handler=(new Iv).scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=function(t){const e=IS({defaults:{}},t),n=(t,e)=>{e.forEach(e=>{PS(t[e])&&(t[e]=function(t){const e={},n=t.length;for(let i=0;i<n;++i)e[t[i]]=!0;return e}(t[e]))})};return n(e.defaults,["prevent","allow"]),n(e,["view","window","selector"]),e}(t.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=function(t,e,n){return eT(t,Ro,$M,n).parse(e)}(n,t,e.expr);n._runtime=r,n._signals=r.signals,n._bind=(t.bindings||[]).map(t=>({state:null,param:IS({},t)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=NT(n,n._width),n._viewHeight=LT(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,function(t){var e=t._signals,n=e.width,i=e.height,r=e.padding;function s(){t._autosize=t._resize=1}t._resizeWidth=t.add(null,e=>{t._width=e.size,t._viewWidth=NT(t,e.size),s()},{size:n}),t._resizeHeight=t.add(null,e=>{t._height=e.size,t._viewHeight=LT(t,e.size),s()},{size:i});const o=t.add(null,s,{pad:r});t._resizeWidth.rank=n.rank+1,t._resizeHeight.rank=i.rank+1,o.rank=r.rank+1}(n),function(t){t.add(null,e=>(t._background=e.bg,t._resize=1,e.bg),{bg:t._signals.background})}(n),function(t){const e=t._signals.cursor||(t._signals.cursor=t.add({user:sT,item:null}));t.on(t.events("view","mousemove"),e,(t,n)=>{const i=e.value,r=i?zS(i)?i:i.user:sT,s=n.item&&n.item.cursor||null;return i&&r===i.user&&s==i.item?i:{user:r,item:s}}),t.add(null,function(e){let n=e.cursor,i=this.value;return zS(n)||(i=n.item,n=n.user),oT(t,n&&n!==sT?n:i||n),i},{cursor:e})}(n),n.description(t.description),e.hover&&n.hover(),e.container&&n.initialize(e.container,e.bind)}function HT(t,e){return LS(t._signals,e)?t._signals[e]:MS("Unrecognized signal name: "+jS(e))}function WT(t,e){const n=(t._targets||[]).filter(t=>t._update&&t._update.handler===e);return n.length?n[0]:null}function GT(t,e,n,i){let r=WT(n,i);return r||(r=OT(t,()=>i(e,n.value)),r.handler=i,t.on(n,null,r)),t}function XT(t,e,n){const i=WT(e,n);return i&&e._targets.remove(i),t}!function(t,e,n){const i=t.prototype=Object.create(e.prototype);Object.defineProperty(i,"constructor",{value:t,writable:!0,enumerable:!0,configurable:!0}),IS(i,n)}(qT,Mo,{async evaluate(t,e,n){if(await Mo.prototype.evaluate.call(this,t,e),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,r=hT(i=this),s=uT(i),o=cT(i),i._renderer.background(i.background()),i._renderer.resize(s,o,r),i._handler.origin(r),i._resizeListeners.forEach(t=>{try{t(s,o)}catch(e){i.error(e)}})),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(a){this.error(a)}var i,r,s,o;return n&&Ks(this,n),this},dirty(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},description(t){if(arguments.length){const e=null!=t?t+"":null;return e!==this._desc&&rT(this._el,this._desc=e),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(t,e,n){const i=HT(this,t);return 1===arguments.length?i.value:this.update(i,e,n)},width(t){return arguments.length?this.signal("width",t):this.signal("width")},height(t){return arguments.length?this.signal("height",t):this.signal("height")},padding(t){return arguments.length?this.signal("padding",PT(t)):PT(this.signal("padding"))},autosize(t){return arguments.length?this.signal("autosize",t):this.signal("autosize")},background(t){return arguments.length?this.signal("background",t):this.signal("background")},renderer(t){return arguments.length?(O_(t)||MS("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._resetRenderer()),this):this._renderType},tooltip(t){return arguments.length?(t!==this._tooltip&&(this._tooltip=t,this._resetRenderer()),this):this._tooltip},loader(t){return arguments.length?(t!==this._loader&&(Mo.prototype.loader.call(this,t),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(HT(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function(t,e,n,i,r,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal("width",n,IT),o._resizeWidth.skip(!0)),o.height()!==i&&(a=1,o.signal("height",i,IT),o._resizeHeight.skip(!0)),o._viewWidth!==t&&(o._resize=1,o._viewWidth=t),o._viewHeight!==e&&(o._resize=1,o._viewHeight=e),o._origin[0]===r[0]&&o._origin[1]===r[1]||(o._resize=1,o._origin=r),a&&o.run("enter"),s&&o.runAfter(t=>t.resize())},!1,1)},addEventListener(t,e,n){let i=e;return n&&!1===n.trap||(i=OT(this,e),i.raw=e),this._handler.on(t,i),this},removeEventListener(t,e){for(var n,i,r=this._handler.handlers(t),s=r.length;--s>=0;)if(n=r[s].handler,t===(i=r[s].type)&&(e===n||e===n.raw)){this._handler.off(i,n);break}return this},addResizeListener(t){const e=this._resizeListeners;return e.indexOf(t)<0&&e.push(t),this},removeResizeListener(t){var e=this._resizeListeners,n=e.indexOf(t);return n>=0&&e.splice(n,1),this},addSignalListener(t,e){return GT(this,t,HT(this,t),e)},removeSignalListener(t,e){return XT(this,HT(this,t),e)},addDataListener(t,e){return GT(this,t,aT(this,t).values,e)},removeDataListener(t,e){return XT(this,aT(this,t).values,e)},globalCursor(t){if(arguments.length){if(this._globalCursor!==!!t){const e=oT(this,null);this._globalCursor=!!t,e&&oT(this,e)}return this}return this._globalCursor},preventDefault(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},timer:function(t,e){this._timers.push(function(t,e,n){var i=new IE,r=e;return null==e?(i.restart(t,e,n),i):(i._restart=i.restart,i.restart=function(t,e,n){e=+e,n=null==n?RE():+n,i._restart(function s(o){o+=r,i._restart(s,r+=e,n),t(o)},e,n)},i.restart(t,e,n),i)}(function(e){t({timestamp:Date.now(),elapsed:e})},e))},events:function(t,e,n){var i,r=this,s=new yo(n),o=function(n,i){r.runAsync(null,()=>{t===dT&&function(t,e){var n=t._eventConfig.defaults,i=n.prevent,r=n.allow;return!1!==i&&!0!==r&&(!0===i||!1===r||(i?i[e]:r?!r[e]:t.preventDefault()))}(r,e)&&n.preventDefault(),s.receive(function(t,e,n){var i,r,s=t._renderer,o=s&&s.canvas();return o&&(r=hT(t),(i=yv(e.changedTouches?e.changedTouches[0]:e,o))[0]-=r[0],i[1]-=r[1]),e.dataflow=t,e.item=n,e.vega=function(t,e,n){const i=e?"group"===e.mark.marktype?e:e.mark.group:null;function r(t){var n,r=i;if(t)for(n=e;n;n=n.mark.group)if(n.mark.name===t){r=n;break}return r&&r.mark&&r.mark.interactive?r:{}}function s(t){if(!t)return n;zS(t)&&(t=r(t));const e=n.slice();for(;t;)e[0]-=t.x||0,e[1]-=t.y||0,t=t.mark&&t.mark.group;return e}return{view:BS(t),item:BS(e||{}),group:r,xy:s,x:t=>s(t)[0],y:t=>s(t)[1]}}(t,n,i),e}(r,n,i))})};if("timer"===t)mT(r,"timer",e)&&r.timer(o,e);else if(t===dT)mT(r,"view",e)&&r.addEventListener(e,o,fT);else if("window"===t?mT(r,"window",e)&&"undefined"!=typeof window&&(i=[window]):"undefined"!=typeof document&&mT(r,"selector",e)&&(i=document.querySelectorAll(t)),i){for(var a=0,l=i.length;a<l;++a)i[a].addEventListener(e,o);pT(r,i,e,o)}else r.warn("Can not resolve event source: "+t);return s},finalize:function(){var t,e,n,i=this._tooltip,r=this._timers,s=this._eventListeners;for(t=r.length;--t>=0;)r[t].stop();for(t=s.length;--t>=0;)for(e=(n=s[t]).sources.length;--e>=0;)n.sources[e].removeEventListener(n.type,n.handler);return i&&i.call(this,this._handler,null,null,null),this},hover:function(t,e){return e=[e||"update",(t=[t||"hover"])[0]],this.on(this.events("view","mouseover",gT),yT,vT(t)),this.on(this.events("view","mouseout",gT),yT,vT(e)),this},data:function(t,e){return arguments.length<2?aT(this,t).values.value:lT.call(this,t,lo().remove(TS).insert(e))},change:lT,insert:function(t,e){return lT.call(this,t,lo().insert(e))},remove:function(t,e){return lT.call(this,t,lo().remove(e))},scale:function(t){var e=this._runtime.scales;return LS(e,t)||MS("Unrecognized scale or projection: "+t),e[t].value},initialize:function(t,e){const n=this,i=n._renderType,r=n._eventConfig.bind,s=O_(i);t=n._el=t?MT(n,t,!0):null,function(t){const e=t.container();e&&(e.setAttribute("role","graphics-document"),e.setAttribute("aria-roleDescription","visualization"),rT(e,t.description()))}(n),s||n.error("Unrecognized renderer type: "+i);const o=s.handler||Iv,a=t?s.renderer:s.headless;return n._renderer=a?FT(n,n._renderer,t,a):null,n._handler=function(t,e,n,i){const r=new i(t.loader(),OT(t,t.tooltip())).scene(t.scenegraph().root).initialize(n,hT(t),t);return e&&e.handlers().forEach(t=>{r.on(t.type,t.handler)}),r}(n,n._handler,t,o),n._redraw=!0,t&&"none"!==r&&(e=e?n._elBind=MT(n,e,!0):t.appendChild(_T("form",{class:"vega-bindings"})),n._bind.forEach(t=>{t.param.element&&"container"!==r&&(t.element=MT(n,t.param.element,!!t.param.input))}),n._bind.forEach(t=>{bT(n,t.element||e,t)})),n},toImageURL:async function(t,e){t!==S_.Canvas&&t!==S_.SVG&&t!==S_.PNG&&MS("Unrecognized image type: "+t);const n=await RT(this,t,e);return t===S_.SVG?function(t,e){const n=new Blob([t],{type:"image/svg+xml"});return window.URL.createObjectURL(n)}(n.svg()):n.canvas().toDataURL("image/png")},toCanvas:async function(t,e){return(await RT(this,S_.Canvas,t,e)).canvas()},toSVG:async function(t){return(await RT(this,S_.SVG,t)).svg()},getState:function(t){return this._runtime.getState(t||{data:$T,signals:zT,recurse:!0})},setState:function(t){return this.runAsync(null,e=>{e._trigger=!1,e._runtime.setState(t)},t=>{t._trigger=!0}),this}});const YT=/[[\]{}]/,KT={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let ZT,QT;function JT(t,e,n){return ZT=e||"view",QT=n||KT,eP(t.trim()).map(nP)}function tP(t,e,n,i,r){const s=t.length;let o,a=0;for(;e<s;++e){if(o=t[e],!a&&o===n)return e;r&&r.indexOf(o)>=0?--a:i&&i.indexOf(o)>=0&&++a}return e}function eP(t){const e=[],n=t.length;let i=0,r=0;for(;r<n;)r=tP(t,r,",","[{","]}"),e.push(t.substring(i,r).trim()),i=++r;if(0===e.length)throw"Empty event selector: "+t;return e}function nP(t){return"["===t[0]?function(t){const e=t.length;let n,i=1;if(i=tP(t,i,"]","[","]"),i===e)throw"Empty between selector: "+t;if(n=eP(t.substring(1,i)),2!==n.length)throw"Between selector must have two elements: "+t;if(">"!==(t=t.slice(i+1).trim())[0])throw"Expected '>' after between selector: "+t;n=n.map(nP);const r=nP(t.slice(1).trim());return r.between?{between:n,stream:r}:(r.between=n,r)}(t):function(t){const e={source:ZT},n=[];let i,r,s=[0,0],o=0,a=0,l=t.length,u=0;if("}"===t[l-1]){if(u=t.lastIndexOf("{"),!(u>=0))throw"Unmatched right brace: "+t;try{s=function(t){const e=t.split(",");if(!t.length||e.length>2)throw t;return e.map(e=>{const n=+e;if(n!=n)throw t;return n})}(t.substring(u+1,l-1))}catch(c){throw"Invalid throttle specification: "+t}l=(t=t.slice(0,u).trim()).length,u=0}if(!l)throw t;if("@"===t[0]&&(o=++u),i=tP(t,u,":"),i<l&&(n.push(t.substring(a,i).trim()),a=u=++i),u=tP(t,u,"["),u===l)n.push(t.substring(a,l).trim());else if(n.push(t.substring(a,u).trim()),r=[],a=++u,a===l)throw"Unmatched left bracket: "+t;for(;u<l;){if(u=tP(t,u,"]"),u===l)throw"Unmatched left bracket: "+t;if(r.push(t.substring(a,u).trim()),u<l-1&&"["!==t[++u])throw"Expected left bracket: "+t;a=++u}if(!(l=n.length)||YT.test(n[l-1]))throw"Invalid event selector: "+t;return l>1?(e.type=n[1],o?e.markname=n[0].slice(1):QT[n[0]]?e.marktype=n[0]:e.source=n[0]):e.type=n[0],"!"===e.type.slice(-1)&&(e.consume=!0,e.type=e.type.slice(0,-1)),null!=r&&(e.filter=r),s[0]&&(e.throttle=s[0]),s[1]&&(e.debounce=s[1]),e}(t)}function iP(t){return(0,de.Kn)(t)?t:{type:t||"pad"}}const rP=t=>+t||0;function sP(t){return(0,de.Kn)(t)?t.signal?t:{top:rP(t.top),bottom:rP(t.bottom),left:rP(t.left),right:rP(t.right)}:{top:e=rP(t),bottom:e,left:e,right:e};var e}const oP=t=>(0,de.Kn)(t)&&!(0,de.kJ)(t)?(0,de.l7)({},t):{value:t};function aP(t,e,n,i){return null!=n?((0,de.Kn)(n)&&!(0,de.kJ)(n)||(0,de.kJ)(n)&&n.length&&(0,de.Kn)(n[0])?t.update[e]=n:t[i||"enter"][e]={value:n},1):0}function lP(t,e,n){for(const i in e)aP(t,i,e[i]);for(const i in n)aP(t,i,n[i],"update")}function uP(t,e,n){for(const i in e)n&&(0,de.nr)(n,i)||(t[i]=(0,de.l7)(t[i]||{},e[i]));return t}function cP(t,e){return e&&(e.enter&&e.enter[t]||e.update&&e.update[t])}const hP="mark",dP="frame",fP="scope",pP="legend-label";function mP(t,e,n){t[e]=n&&n.signal?{signal:n.signal}:{value:n}}const gP=t=>(0,de.HD)(t)?(0,de.m8)(t):t.signal?"(".concat(t.signal,")"):bP(t);function yP(t){if(null!=t.gradient)return function(t){const e=[t.start,t.stop,t.count].map(t=>null==t?null:(0,de.m8)(t));for(;e.length&&null==(0,de.fj)(e);)e.pop();return e.unshift(gP(t.gradient)),"gradient(".concat(e.join(","),")")}(t);let e=t.signal?"(".concat(t.signal,")"):t.color?function(t){return t.c?vP("hcl",t.h,t.c,t.l):t.h||t.s?vP("hsl",t.h,t.s,t.l):t.l||t.a?vP("lab",t.l,t.a,t.b):t.r||t.g||t.b?vP("rgb",t.r,t.g,t.b):null}(t.color):null!=t.field?bP(t.field):void 0!==t.value?(0,de.m8)(t.value):void 0;return null!=t.scale&&(e=function(t,e){const n=gP(t.scale);return null!=t.range?e="lerp(_range(".concat(n,"), ").concat(+t.range,")"):(void 0!==e&&(e="_scale(".concat(n,", ").concat(e,")")),t.band&&(e=(e?e+"+":"")+"_bandwidth(".concat(n,")")+(1==+t.band?"":"*"+_P(t.band)),t.extra&&(e="(datum.extra ? _scale(".concat(n,", datum.extra.value) : ").concat(e,")"))),null==e&&(e="0")),e}(t,e)),void 0===e&&(e=null),null!=t.exponent&&(e="pow(".concat(e,",").concat(_P(t.exponent),")")),null!=t.mult&&(e+="*".concat(_P(t.mult))),null!=t.offset&&(e+="+".concat(_P(t.offset))),t.round&&(e="round(".concat(e,")")),e}const vP=(t,e,n,i)=>"(".concat(t,"(").concat([e,n,i].map(yP).join(","),")+'')");function _P(t){return(0,de.Kn)(t)?"("+yP(t)+")":t}function bP(t){return xP((0,de.Kn)(t)?t:{datum:t})}function xP(t){let e,n,i;if(t.signal)e="datum",i=t.signal;else if(t.group||t.parent){for(n=Math.max(1,t.level||1),e="item";n-- >0;)e+=".mark.group";t.parent?(i=t.parent,e+=".datum"):i=t.group}else t.datum?(e="datum",i=t.datum):(0,de.vU)("Invalid field reference: "+(0,de.m8)(t));return t.signal||(i=(0,de.HD)(i)?(0,de._k)(i).map(de.m8).join("]["):xP(i)),e+"["+i+"]"}function wP(t,e,n,i,r,s){const o={};(s=s||{}).encoders={$encode:o},t=function(t,e,n,i,r){const s={},o={};let a,l,u,c;for(l in l="lineBreak","text"!==e||null==r[l]||cP(l,t)||mP(s,l,r[l]),("legend"==n||String(n).startsWith("axis"))&&(n=null),c=n===dP?r.group:n===hP?(0,de.l7)({},r.mark,r[e]):null,c)u=cP(l,t)||("fill"===l||"stroke"===l)&&(cP("fill",t)||cP("stroke",t)),u||mP(s,l,c[l]);for(l in(0,de.IX)(i).forEach(e=>{const n=r.style&&r.style[e];for(const i in n)cP(i,t)||mP(s,i,n[i])}),t=(0,de.l7)({},t),s)c=s[l],c.signal?(a=a||{})[l]=c:o[l]=c;return t.enter=(0,de.l7)(o,t.enter),a&&(t.update=(0,de.l7)(a,t.update)),t}(t,e,n,i,r.config);for(const a in t)o[a]=CP(t[a],e,s,r);return s}function CP(t,e,n,i){const r={},s={};for(const a in t)null!=t[a]&&(r[a]=AP((0,de.kJ)(o=t[a])?function(t){let e="";return t.forEach(t=>{const n=yP(t);e+=t.test?"(".concat(t.test,")?").concat(n,":"):n}),":"===(0,de.fj)(e)&&(e+="null"),e}(o):yP(o),i,n,s));var o;return{$expr:{marktype:e,channels:r},$fields:Object.keys(s),$output:Object.keys(t)}}function AP(t,e,n,i){const r=WM(t,e);return r.$fields.forEach(t=>i[t]=1),(0,de.l7)(n,r.$params),r.$expr}const EP=["value","update","init","react","bind"];function kP(t,e){(0,de.vU)(t+' for "outer" push: '+(0,de.m8)(e))}function DP(t,e){const n=t.name;if("outer"===t.push)e.signals[n]||kP("No prior signal definition",n),EP.forEach(e=>{void 0!==t[e]&&kP("Invalid property ",e)});else{const i=e.addSignal(n,t.value);!1===t.react&&(i.react=!1),t.bind&&e.addBinding(n,t.bind)}}function SP(t,e,n,i){this.id=-1,this.type=t,this.value=e,this.params=n,i&&(this.parent=i)}function FP(t,e,n,i){return new SP(t,e,n,i)}function OP(t,e){return FP("operator",t,e)}function MP(t){const e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}function TP(t,e){return e?{$field:t,$name:e}:{$field:t}}const PP=TP("key");function RP(t,e){return{$compare:t,$order:e}}function BP(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"")}const IP="scope",NP="view";function LP(t){return t&&t.signal}function $P(t){if(LP(t))return!0;if((0,de.Kn)(t))for(const e in t)if($P(t[e]))return!0;return!1}function zP(t,e){return null!=t?t:e}function jP(t){return t&&t.signal||t}const UP="timer";function VP(t,e){return(t.merge?qP:t.stream?HP:t.type?WP:(0,de.vU)("Invalid stream specification: "+(0,de.m8)(t)))(t,e)}function qP(t,e){const n=GP({merge:t.merge.map(t=>VP(t,e))},t,e);return e.addStream(n).id}function HP(t,e){const n=GP({stream:VP(t.stream,e)},t,e);return e.addStream(n).id}function WP(t,e){let n;var i;t.type===UP?(n=e.event(UP,t.throttle),t={between:t.between,filter:t.filter}):n=e.event((i=t.source)===IP?NP:i||NP,t.type);const r=GP({stream:n},t,e);return 1===Object.keys(r).length?n:e.addStream(r).id}function GP(t,e,n){let i=e.between;return i&&(2!==i.length&&(0,de.vU)('Stream "between" parameter must have 2 entries: '+(0,de.m8)(e)),t.between=[VP(i[0],n),VP(i[1],n)]),i=e.filter?[].concat(e.filter):[],(e.marktype||e.markname||e.markrole)&&i.push(function(t,e,n){const i="event.item";return i+(t&&"*"!==t?"&&"+i+".mark.marktype==='"+t+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(e?"&&"+i+".mark.name==='"+e+"'":"")}(e.marktype,e.markname,e.markrole)),e.source===IP&&i.push("inScope(event.item)"),i.length&&(t.filter=WM("("+i.join(")&&(")+")",n).$expr),null!=(i=e.throttle)&&(t.throttle=+i),null!=(i=e.debounce)&&(t.debounce=+i),e.consume&&(t.consume=!0),t}const XP={code:"_.$value",ast:{type:"Identifier",value:"value"}};function YP(t){return{signal:"["+t.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}const KP=t=>(e,n,i)=>FP(t,n,e||void 0,i),ZP=KP("aggregate"),QP=KP("axisticks"),JP=KP("bound"),tR=KP("collect"),eR=KP("compare"),nR=KP("datajoin"),iR=KP("encode"),rR=KP("expression"),sR=KP("facet"),oR=KP("field"),aR=KP("key"),lR=KP("legendentries"),uR=KP("load"),cR=KP("mark"),hR=KP("multiextent"),dR=KP("multivalues"),fR=KP("overlap"),pR=KP("params"),mR=KP("prefacet"),gR=KP("projection"),yR=KP("proxy"),vR=KP("relay"),_R=KP("render"),bR=KP("scale"),xR=KP("sieve"),wR=KP("sortitems"),CR=KP("viewlayout"),AR=KP("values");let ER=0;const kR={min:"min",max:"max",count:"sum"};function DR(t,e){const n=e.getScale(t.name).params;let i;for(i in n.domain=MR(t.domain,t,e),null!=t.range&&(n.range=$R(t,e,n)),null!=t.interpolate&&function(t,e){e.interpolate=SR(t.type||t),null!=t.gamma&&(e.interpolateGamma=SR(t.gamma))}(t.interpolate,n),null!=t.nice&&(n.nice=function(t){return(0,de.Kn)(t)?{interval:SR(t.interval),step:SR(t.step)}:SR(t)}(t.nice)),null!=t.bins&&(n.bins=function(t,e){return t.signal||(0,de.kJ)(t)?FR(t,e):e.objectProperty(t)}(t.bins,e)),t)(0,de.nr)(n,i)||"name"===i||(n[i]=SR(t[i],e))}function SR(t,e){return(0,de.Kn)(t)?t.signal?e.signalRef(t.signal):(0,de.vU)("Unsupported object: "+(0,de.m8)(t)):t}function FR(t,e){return t.signal?e.signalRef(t.signal):t.map(t=>SR(t,e))}function OR(t){(0,de.vU)("Can not find data set: "+(0,de.m8)(t))}function MR(t,e,n){if(t)return t.signal?n.signalRef(t.signal):((0,de.kJ)(t)?TR:t.fields?RR:PR)(t,e,n);null==e.domainMin&&null==e.domainMax||(0,de.vU)("No scale domain defined for domainMin/domainMax to override.")}function TR(t,e,n){return t.map(t=>SR(t,n))}function PR(t,e,n){const i=n.getData(t.data);return i||OR(t.data),Fp(e.type)?i.valuesRef(n,t.field,IR(t.sort,!1)):Pp(e.type)?i.domainRef(n,t.field):i.extentRef(n,t.field)}function RR(t,e,n){const i=t.data,r=t.fields.reduce((t,e)=>(e=(0,de.HD)(e)?{data:i,field:e}:(0,de.kJ)(e)||e.signal?function(t,e){const n="_:vega:_"+ER++,i=tR({});if((0,de.kJ)(t))i.value={$ingest:t};else if(t.signal){const r="setdata("+(0,de.m8)(n)+","+t.signal+")";i.params.input=e.signalRef(r)}return e.addDataPipeline(n,[i,xR({})]),{data:n,field:"data"}}(e,n):e,t.push(e),t),[]);return(Fp(e.type)?BR:Pp(e.type)?NR:LR)(t,n,r)}function BR(t,e,n){const i=IR(t.sort,!0);let r,s;const o=n.map(t=>{const n=e.getData(t.data);return n||OR(t.data),n.countsRef(e,t.field,i)}),a={groupby:PP,pulse:o};i&&(r=i.op||"count",s=i.field?BP(r,i.field):"count",a.ops=[kR[r]],a.fields=[e.fieldRef(s)],a.as=[s]),r=e.add(ZP(a));const l=e.add(tR({pulse:MP(r)}));return s=e.add(AR({field:PP,sort:e.sortRef(i),pulse:MP(l)})),MP(s)}function IR(t,e){return t&&(t.field||t.op?t.field||"count"===t.op?e&&t.field&&t.op&&!kR[t.op]&&(0,de.vU)("Multiple domain scales can not be sorted using "+t.op):(0,de.vU)("No field provided for sort aggregate op: "+t.op):(0,de.Kn)(t)?t.field="key":t={field:"key"}),t}function NR(t,e,n){const i=n.map(t=>{const n=e.getData(t.data);return n||OR(t.data),n.domainRef(e,t.field)});return MP(e.add(dR({values:i})))}function LR(t,e,n){const i=n.map(t=>{const n=e.getData(t.data);return n||OR(t.data),n.extentRef(e,t.field)});return MP(e.add(hR({extents:i})))}function $R(t,e,n){const i=e.config.range;let r=t.range;if(r.signal)return e.signalRef(r.signal);if((0,de.HD)(r)){if(i&&(0,de.nr)(i,r))return $R(t=(0,de.l7)({},t,{range:i[r]}),e,n);"width"===r?r=[0,{signal:"width"}]:"height"===r?r=Fp(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:(0,de.vU)("Unrecognized scale range value: "+(0,de.m8)(r))}else{if(r.scheme)return n.scheme=(0,de.kJ)(r.scheme)?FR(r.scheme,e):SR(r.scheme,e),r.extent&&(n.schemeExtent=FR(r.extent,e)),void(r.count&&(n.schemeCount=SR(r.count,e)));if(r.step)return void(n.rangeStep=SR(r.step,e));if(Fp(t.type)&&!(0,de.kJ)(r))return MR(r,t,e);(0,de.kJ)(r)||(0,de.vU)("Unsupported range type: "+(0,de.m8)(r))}return r.map(t=>((0,de.kJ)(t)?FR:SR)(t,e))}function zR(t,e,n){return(0,de.kJ)(t)?t.map(t=>zR(t,e,n)):(0,de.Kn)(t)?t.signal?n.signalRef(t.signal):"fit"===e?t:(0,de.vU)("Unsupported parameter object: "+(0,de.m8)(t)):t}const jR="top",UR="left",VR="right",qR="bottom",HR="center",WR="index",GR="label",XR="perc",YR="value",KR="guide-label",ZR="guide-title",QR="symbol",JR="gradient",tB="discrete",eB="size",nB=[eB,"shape","fill","stroke","strokeWidth","strokeDash","opacity"],iB={name:1,style:1,interactive:1},rB={value:0},sB={value:1},oB="group",aB="rect",lB="rule",uB="text";function cB(t){return t.type=oB,t.interactive=t.interactive||!1,t}function hB(t,e){const n=(n,i)=>zP(t[n],zP(e[n],i));return n.isVertical=n=>"vertical"===zP(t.direction,e.direction||(n?e.symbolDirection:e.gradientDirection)),n.gradientLength=()=>zP(t.gradientLength,e.gradientLength||e.gradientWidth),n.gradientThickness=()=>zP(t.gradientThickness,e.gradientThickness||e.gradientHeight),n.entryColumns=()=>zP(t.columns,zP(e.columns,+n.isVertical(!0))),n}function dB(t,e){const n=e&&(e.update&&e.update[t]||e.enter&&e.enter[t]);return n&&n.signal?n:n?n.value:null}function fB(t,e,n){return"item.anchor === '".concat("start","' ? ").concat(t," : item.anchor === '").concat("end","' ? ").concat(e," : ").concat(n)}const pB=fB((0,de.m8)(UR),(0,de.m8)(VR),(0,de.m8)(HR));function mB(t,e){return e?t?(0,de.Kn)(t)?Object.assign({},t,{offset:mB(t.offset,e)}):{value:t,offset:e}:e:t}function gB(t,e){return e?(t.name=e.name,t.style=e.style||t.style,t.interactive=!!e.interactive,t.encode=uP(t.encode,e,iB)):t.interactive=!1,t}function yB(t,e,n,i){const r=hB(t,n),s=r.isVertical(),o=r.gradientThickness(),a=r.gradientLength();let l,u,c,h,d;s?(u=[0,1],c=[0,0],h=o,d=a):(u=[0,0],c=[1,0],h=a,d=o);const f={enter:l={opacity:rB,x:rB,y:rB,width:oP(h),height:oP(d)},update:(0,de.l7)({},l,{opacity:sB,fill:{gradient:e,start:u,stop:c}}),exit:{opacity:rB}};return lP(f,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),gB({type:aB,role:"legend-gradient",encode:f},i)}function vB(t,e,n,i,r){const s=hB(t,n),o=s.isVertical(),a=s.gradientThickness(),l=s.gradientLength();let u,c,h,d,f="";o?(u="y",h="y2",c="x",d="width",f="1-"):(u="x",h="x2",c="y",d="height");const p={opacity:rB,fill:{scale:e,field:YR}};p[u]={signal:f+"datum."+XR,mult:l},p[c]=rB,p[h]={signal:f+"datum.perc2",mult:l},p[d]=oP(a);const m={enter:p,update:(0,de.l7)({},p,{opacity:sB}),exit:{opacity:rB}};return lP(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),gB({type:aB,role:"legend-band",key:YR,from:r,encode:m},i)}const _B="datum.".concat(XR,'<=0?"').concat(UR,'":datum.').concat(XR,'>=1?"').concat(VR,'":"').concat(HR,'"'),bB="datum.".concat(XR,'<=0?"').concat(qR,'":datum.').concat(XR,'>=1?"').concat(jR,'":"').concat("middle",'"');function xB(t,e,n,i){const r=hB(t,e),s=r.isVertical(),o=oP(r.gradientThickness()),a=r.gradientLength();let l,u,c,h,d=r("labelOverlap"),f="";const p={enter:l={opacity:rB},update:u={opacity:sB,text:{field:GR}},exit:{opacity:rB}};return lP(p,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:zP(t.labelLimit,e.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=u.baseline={signal:bB},c="y",h="x",f="1-"):(l.align=u.align={signal:_B},l.baseline={value:"top"},c="x",h="y"),l[c]=u[c]={signal:f+"datum."+XR,mult:a},l[h]=u[h]=o,o.offset=zP(t.labelOffset,e.gradientLabelOffset)||0,d=d?{separation:r("labelSeparation"),method:d,order:"datum.index"}:void 0,gB({type:uB,role:pP,style:KR,key:YR,from:i,encode:p,overlap:d},n)}function wB(t,e,n,i,r){const s=hB(t,e),o=n.entries,a=!(!o||!o.interactive),l=o?o.name:void 0,u=s("clipHeight"),c=s("symbolOffset"),h={data:"value"},d="(".concat(r,") ? datum.").concat("offset"," : datum.").concat(eB),f=u?oP(u):{field:eB},p="datum.".concat(WR),m="max(1, ".concat(r,")");let g,y,v,_,b;f.mult=.5,g={enter:y={opacity:rB,x:{signal:d,mult:.5,offset:c},y:f},update:v={opacity:sB,x:y.x,y:y.y},exit:{opacity:rB}};let x=null,w=null;t.fill||(x=e.symbolBaseFillColor,w=e.symbolBaseStrokeColor),lP(g,{fill:s("symbolFillColor",x),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",w),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),nB.forEach(e=>{t[e]&&(v[e]=y[e]={scale:t[e],field:YR})});const C=gB({type:"symbol",role:"legend-symbol",key:YR,from:h,clip:!!u||void 0,encode:g},n.symbols),A=oP(c);A.offset=s("labelOffset"),g={enter:y={opacity:rB,x:{signal:d,offset:A},y:f},update:v={opacity:sB,text:{field:GR},x:y.x,y:y.y},exit:{opacity:rB}},lP(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const E=gB({type:uB,role:pP,style:KR,key:YR,from:h,encode:g},n.labels);return g={enter:{noBound:{value:!u},width:rB,height:u?oP(u):rB,opacity:rB},exit:{opacity:rB},update:v={opacity:sB,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(_="ceil(item.mark.items.length / ".concat(m,")"),v.row.signal="".concat(p,"%").concat(_),v.column.signal="floor(".concat(p," / ").concat(_,")"),b={field:["row",p]}):(v.row.signal="floor(".concat(p," / ").concat(m,")"),v.column.signal="".concat(p," % ").concat(m),b={field:p}),v.column.signal="(".concat(r,")?").concat(v.column.signal,":").concat(p),cB({role:fP,from:i={facet:{data:i,name:"value",groupby:WR}},encode:uP(g,o,iB),marks:[C,E],name:l,interactive:a,sort:b})}const CB='item.orient === "left"',AB='item.orient === "right"',EB="(".concat(CB," || ").concat(AB,")"),kB="datum.vgrad && ".concat(EB),DB=fB('"top"','"bottom"','"middle"'),SB=fB('"right"','"left"','"center"'),FB="datum.vgrad && ".concat(AB," ? (").concat(SB,") : (").concat(EB," && !(datum.vgrad && ").concat(CB,')) ? "left" : ').concat(pB),OB="item._anchor || (".concat(EB,' ? "middle" : "start")'),MB="".concat(kB," ? (").concat(CB," ? -90 : 90) : 0"),TB="".concat(EB," ? (datum.vgrad ? (").concat(AB,' ? "bottom" : "top") : ').concat(DB,') : "top"');function PB(t,e){let n;return(0,de.Kn)(t)&&(t.signal?n=t.signal:t.path?n="pathShape("+RB(t.path)+")":t.sphere&&(n="geoShape("+RB(t.sphere)+', {type: "Sphere"})')),n?e.signalRef(n):!!t}function RB(t){return(0,de.Kn)(t)&&t.signal?t.signal:(0,de.m8)(t)}function BB(t){const e=t.role||"";return e.indexOf("axis")&&e.indexOf("legend")&&e.indexOf("title")?t.type===oB?fP:e||hP:e}function IB(t){return{marktype:t.type,name:t.name||void 0,role:t.role||BB(t),zindex:+t.zindex||void 0,aria:t.aria,description:t.description}}function NB(t,e){return t&&t.signal?e.signalRef(t.signal):!1!==t}function LB(t,e){const n=Bo(t.type);n||(0,de.vU)("Unrecognized transform type: "+(0,de.m8)(t.type));const i=FP(n.type.toLowerCase(),null,$B(n,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(i)),i.metadata=n.metadata||{},i}function $B(t,e,n){const i={},r=t.params.length;for(let s=0;s<r;++s){const r=t.params[s];i[r.name]=zB(r,e,n)}return i}function zB(t,e,n){const i=t.type,r=e[t.name];return"index"===i?function(t,e,n){return(0,de.HD)(e.from)||(0,de.vU)('Lookup "from" parameter must be a string literal.'),n.getData(e.from).lookupRef(n,e.key)}(0,e,n):void 0!==r?"param"===i?function(t,e,n){const i=e[t.name];return t.array?((0,de.kJ)(i)||(0,de.vU)("Expected an array of sub-parameters. Instead: "+(0,de.m8)(i)),i.map(e=>UB(t,e,n))):UB(t,i,n)}(t,e,n):"projection"===i?n.projectionRef(e[t.name]):t.array&&!LP(r)?r.map(e=>jB(t,e,n)):jB(t,r,n):void(t.required&&(0,de.vU)("Missing required "+(0,de.m8)(e.type)+" parameter: "+(0,de.m8)(t.name)))}function jB(t,e,n){const i=t.type;if(LP(e))return WB(i)?(0,de.vU)("Expression references can not be signals."):GB(i)?n.fieldRef(e):XB(i)?n.compareRef(e):n.signalRef(e.signal);{const r=t.expr||GB(i);return r&&VB(e)?n.exprRef(e.expr,e.as):r&&qB(e)?TP(e.field,e.as):WB(i)?WM(e,n):HB(i)?MP(n.getData(e).values):GB(i)?TP(e):XB(i)?n.compareRef(e):e}}function UB(t,e,n){const i=t.params.length;let r;for(let o=0;o<i;++o){r=t.params[o];for(const t in r.key)if(r.key[t]!==e[t]){r=null;break}if(r)break}r||(0,de.vU)("Unsupported parameter: "+(0,de.m8)(e));const s=(0,de.l7)($B(r,e,n),r.key);return MP(n.add(pR(s)))}const VB=t=>t&&t.expr,qB=t=>t&&t.field,HB=t=>"data"===t,WB=t=>"expr"===t,GB=t=>"field"===t,XB=t=>"compare"===t;function YB(t,e){return t.$ref?t:t.data&&t.data.$ref?t.data:MP(e.getData(t.data).output)}function KB(t,e,n,i,r){this.scope=t,this.input=e,this.output=n,this.values=i,this.aggregate=r,this.index={}}function ZB(t){return(0,de.HD)(t)?t:null}function QB(t,e,n){const i=BP(n.op,n.field);let r;if(e.ops){for(let s=0,o=e.as.length;s<o;++s)if(e.as[s]===i)return}else e.ops=["count"],e.fields=[null],e.as=["count"];n.op&&(e.ops.push((r=n.op.signal)?t.signalRef(r):n.op),e.fields.push(t.fieldRef(n.field)),e.as.push(i))}function JB(t,e,n,i,r,s,o){const a=e[n]||(e[n]={}),l=function(t){return(0,de.Kn)(t)?("descending"===t.order?"-":"+")+BP(t.op,t.field):""}(s);let u,c,h=ZB(r);if(null!=h&&(t=e.scope,h+=l?"|"+l:"",u=a[h]),!u){const n=s?{field:PP,pulse:e.countsRef(t,r,s)}:{field:t.fieldRef(r),pulse:MP(e.output)};l&&(n.sort=t.sortRef(s)),c=t.add(FP(i,void 0,n)),o&&(e.index[r]=c),u=MP(c),null!=h&&(a[h]=u)}return u}function tI(t,e,n){const i=t.remove,r=t.insert,s=t.toggle,o=t.modify,a=t.values,l=e.add(OP()),u=WM("if("+t.trigger+',modify("'+n+'",'+[r,i,s,o,a].map(t=>null==t?"null":t).join(",")+"),0)",e);l.update=u.$expr,l.params=u.$params}function eI(t,e){const n=BB(t),i=t.type===oB,r=t.from&&t.from.facet,s=t.overlap;let o,a,l,u,c,h,d,f=t.layout||n===fP||n===dP;const p=n===hP||f||r,m=function(t,e,n){let i,r,s,o,a;return t?(i=t.facet)&&(e||(0,de.vU)("Only group marks can be faceted."),null!=i.field?o=a=YB(i,n):(t.data?a=MP(n.getData(t.data).aggregate):(s=LB((0,de.l7)({type:"aggregate",groupby:(0,de.IX)(i.groupby)},i.aggregate),n),s.params.key=n.keyRef(i.groupby),s.params.pulse=YB(i,n),o=a=MP(n.add(s))),r=n.keyRef(i.groupby,!0))):o=MP(n.add(tR(null,[{}]))),o||(o=YB(t,n)),{key:r,pulse:o,parent:a}}(t.from,i,e);a=e.add(nR({key:m.key||(t.key?TP(t.key):void 0),pulse:m.pulse,clean:!i}));const g=MP(a);a=l=e.add(tR({pulse:g})),a=e.add(cR({markdef:IB(t),interactive:NB(t.interactive,e),clip:PB(t.clip,e),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:MP(a)}));const y=MP(a);a=u=e.add(iR(wP(t.encode,t.type,n,t.style,e,{mod:!1,pulse:y}))),a.params.parent=e.encode(),t.transform&&t.transform.forEach(t=>{const n=LB(t,e),i=n.metadata;(i.generates||i.changes)&&(0,de.vU)("Mark transforms should not generate new data."),i.nomod||(u.params.mod=!0),n.params.pulse=MP(a),e.add(a=n)}),t.sort&&(a=e.add(wR({sort:e.compareRef(t.sort),pulse:MP(a)})));const v=MP(a);(r||f)&&(f=e.add(CR({layout:e.objectProperty(t.layout),legends:e.legends,mark:y,pulse:v})),h=MP(f));const _=e.add(JP({mark:y,pulse:h||v}));d=MP(_),i&&(p&&(o=e.operators,o.pop(),f&&o.pop()),e.pushState(v,h||d,g),r?function(t,e,n){const i=t.from.facet,r=i.name,s=YB(i,e);let o;i.name||(0,de.vU)("Facet must have a name: "+(0,de.m8)(i)),i.data||(0,de.vU)("Facet must reference a data set: "+(0,de.m8)(i)),i.field?o=e.add(mR({field:e.fieldRef(i.field),pulse:s})):i.groupby?o=e.add(sR({key:e.keyRef(i.groupby),group:MP(e.proxy(n.parent)),pulse:s})):(0,de.vU)("Facet must specify groupby or field: "+(0,de.m8)(i));const a=e.fork(),l=a.add(tR()),u=a.add(xR({pulse:MP(l)}));a.addData(r,new KB(a,l,l,u)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(t).toRuntime()}}(t,e,m):p?function(t,e,n){const i=e.add(mR({pulse:n.pulse})),r=e.fork();r.add(xR()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(t).toRuntime()}}(t,e,m):e.parse(t),e.popState(),p&&(f&&o.push(f),o.push(_))),s&&(d=function(t,e,n){const i=t.method,r=t.bound,s=t.separation,o={separation:LP(s)?n.signalRef(s.signal):s,method:LP(i)?n.signalRef(i.signal):i,pulse:e};if(t.order&&(o.sort=n.compareRef({field:t.order})),r){const t=r.tolerance;o.boundTolerance=LP(t)?n.signalRef(t.signal):+t,o.boundScale=n.scaleRef(r.scale),o.boundOrient=r.orient}return MP(n.add(fR(o)))}(s,d,e));const b=e.add(_R({pulse:d})),x=e.add(xR({pulse:MP(b)},void 0,e.parent()));null!=t.name&&(c=t.name,e.addData(c,new KB(e,l,b,x)),t.on&&t.on.forEach(t=>{(t.insert||t.remove||t.toggle)&&(0,de.vU)("Marks only support modify triggers."),tI(t,e,c)}))}function nI(t,e,n){const i={enter:{},update:{}};return lP(i,{orient:t("orient"),offset:t("offset"),padding:t("padding"),titlePadding:t("titlePadding"),cornerRadius:t("cornerRadius"),fill:t("fillColor"),stroke:t("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:t("legendX"),y:t("legendY"),format:e.format,formatType:e.formatType}),i}function iI(t,e,n){return e[t]?'scale("'.concat(e[t],'",datum)'):dB(t,n[0].encode)}KB.fromEntries=function(t,e){const n=e.length,i=e[n-1],r=e[n-2];let s=e[0],o=null,a=1;for(s&&"load"===s.type&&(s=e[1]),t.add(e[0]);a<n;++a)e[a].params.pulse=MP(e[a-1]),t.add(e[a]),"aggregate"===e[a].type&&(o=e[a]);return new KB(t,s,r,i,o)},KB.prototype={countsRef(t,e,n){const i=this,r=i.counts||(i.counts={}),s=ZB(e);let o,a,l;return null!=s&&(t=i.scope,o=r[s]),o?n&&n.field&&QB(t,o.agg.params,n):(l={groupby:t.fieldRef(e,"key"),pulse:MP(i.output)},n&&n.field&&QB(t,l,n),a=t.add(ZP(l)),o=t.add(tR({pulse:MP(a)})),o={agg:a,ref:MP(o)},null!=s&&(r[s]=o)),o.ref},tuplesRef(){return MP(this.values)},extentRef(t,e){return JB(t,this,"extent","extent",e,!1)},domainRef(t,e){return JB(t,this,"domain","values",e,!1)},valuesRef(t,e,n){return JB(t,this,"vals","values",e,n||!0)},lookupRef(t,e){return JB(t,this,"lookup","tupleindex",e,!1)},indataRef(t,e){return JB(t,this,"indata","tupleindex",e,!0,!0)}};const rI='item.orient==="'.concat(UR,'"?-90:item.orient==="').concat(VR,'"?90:0');function sI(t,e){const n={enter:{},update:{}};return lP(n,{orient:t("orient"),anchor:t("anchor"),align:{signal:pB},angle:{signal:rI},limit:t("limit"),frame:t("frame"),offset:t("offset")||0,padding:t("subtitlePadding")}),uP(n,e,iB)}function oI(t){const e=tR({},t);return e.metadata={source:!0},e}function aI(t,e){return uR({url:e.url?t.property(e.url):void 0,async:e.async?t.property(e.async):void 0,values:e.values?t.property(e.values):void 0,format:t.objectProperty(e.format)})}const lI=t=>t===qR||t===jR,uI=(t,e,n)=>LP(t)?mI(t.signal,e,n):t===UR||t===jR?e:n,cI=(t,e,n)=>LP(t)?fI(t.signal,e,n):lI(t)?e:n,hI=(t,e,n)=>LP(t)?pI(t.signal,e,n):lI(t)?n:e,dI=(t,e,n)=>LP(t)?gI(t.signal,e,n):t===jR?{value:e}:{value:n},fI=(t,e,n)=>yI("".concat(t," === '").concat(jR,"' || ").concat(t," === '").concat(qR,"'"),e,n),pI=(t,e,n)=>yI("".concat(t," !== '").concat(jR,"' && ").concat(t," !== '").concat(qR,"'"),e,n),mI=(t,e,n)=>_I("".concat(t," === '").concat(UR,"' || ").concat(t," === '").concat(jR,"'"),e,n),gI=(t,e,n)=>_I("".concat(t," === '").concat(jR,"'"),e,n),yI=(t,e,n)=>(e=null!=e?oP(e):e,n=null!=n?oP(n):n,vI(e)&&vI(n)?(e=e?e.signal||(0,de.m8)(e.value):null,n=n?n.signal||(0,de.m8)(n.value):null,{signal:"".concat(t," ? (").concat(e,") : (").concat(n,")")}):[(0,de.l7)({test:t},e)].concat(n||[])),vI=t=>null==t||1===Object.keys(t).length,_I=(t,e,n)=>({signal:"".concat(t," ? (").concat(xI(e),") : (").concat(xI(n),")")}),bI=(t,e,n,i,r)=>({signal:(null!=i?"".concat(t," === '").concat(UR,"' ? (").concat(xI(i),") : "):"")+(null!=n?"".concat(t," === '").concat(qR,"' ? (").concat(xI(n),") : "):"")+(null!=r?"".concat(t," === '").concat(VR,"' ? (").concat(xI(r),") : "):"")+(null!=e?"".concat(t," === '").concat(jR,"' ? (").concat(xI(e),") : "):"")+"(null)"}),xI=t=>LP(t)?t.signal:null==t?null:(0,de.m8)(t),wI=(t,e)=>{const n=t.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+e.signal}:t};function CI(t,e,n,i){let r;if(e&&(0,de.nr)(e,t))return e[t];if((0,de.nr)(n,t))return n[t];if(t.startsWith("title")){switch(t){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=t[5].toLowerCase()+t.slice(6)}return i["guide-title"][r]}if(t.startsWith("label")){switch(t){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=t[5].toLowerCase()+t.slice(6)}return i["guide-label"][r]}return null}function AI(t){const e={};for(const n of t)if(n)for(const t in n)e[t]=1;return Object.keys(e)}function EI(t,e){return{scale:t.scale,range:e}}function kI(t,e,n,i,r){return{signal:'flush(range("'+t+'"), scale("'+t+'", datum.value), '+e+","+n+","+i+","+r+")"}}function DI(t,e){const n=function(t,e){var n,i,r,s=e.config,o=s.style,a=s.axis,l="band"===e.scaleType(t.scale)&&s.axisBand,u=t.orient;if(LP(u)){const t=AI([s.axisX,s.axisY]),e=AI([s.axisTop,s.axisBottom,s.axisLeft,s.axisRight]);for(r of(n={},t))n[r]=cI(u,CI(r,s.axisX,a,o),CI(r,s.axisY,a,o));for(r of(i={},e))i[r]=bI(u.signal,CI(r,s.axisTop,a,o),CI(r,s.axisBottom,a,o),CI(r,s.axisLeft,a,o),CI(r,s.axisRight,a,o))}else n=u===jR||u===qR?s.axisX:s.axisY,i=s["axis"+u[0].toUpperCase()+u.slice(1)];return n||i||l?(0,de.l7)({},a,n,i,l):a}(t,e),i=t.encode||{},r=i.axis||{},s=r.name||void 0,o=r.interactive,a=r.style,l=hB(t,n),u=function(t){const e=t("tickBand");let n,i,r=t("tickOffset");return e?e.signal?(n={signal:"(".concat(e.signal,") === 'extent' ? 1 : 0.5")},i={signal:"(".concat(e.signal,") === 'extent'")},(0,de.Kn)(r)||(r={signal:"(".concat(e.signal,") === 'extent' ? 0 : ").concat(r)})):"extent"===e?(n=1,i=!0,r=0):(n=.5,i=!1):(n=t("bandPosition"),i=t("tickExtra")),{extra:i,band:n,offset:r}}(l),c={scale:t.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:null!=t.title},h=MP(e.add(tR({},[c]))),d=MP(e.add(QP({scale:e.scaleRef(t.scale),extra:e.property(u.extra),count:e.objectProperty(t.tickCount),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)}))),f=[];let p;return c.grid&&f.push(function(t,e,n,i,r){const s=hB(t,e),o=t.orient,a=t.gridScale,l=uI(o,1,-1),u=function(t,e){if(1===e);else if((0,de.Kn)(t)){let n=t=(0,de.l7)({},t);for(;null!=n.mult;){if(!(0,de.Kn)(n.mult))return n.mult=LP(e)?{signal:"(".concat(n.mult,") * (").concat(e.signal,")")}:n.mult*e,t;n=n.mult=(0,de.l7)({},n.mult)}n.mult=e}else t=LP(e)?{signal:"(".concat(e.signal,") * (").concat(t||0,")")}:e*(t||0);return t}(t.offset,l);let c,h,d;const f={enter:c={opacity:rB},update:d={opacity:sB},exit:h={opacity:rB}};lP(f,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:t.scale,field:YR,band:r.band,extra:r.extra,offset:r.offset,round:s("tickRound")},m=cI(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},y=a?{scale:a,range:1,mult:l,offset:u}:(0,de.l7)(m,{mult:l,offset:u});return c.x=d.x=cI(o,p,g),c.y=d.y=hI(o,p,g),c.x2=d.x2=hI(o,y),c.y2=d.y2=cI(o,y),h.x=cI(o,p),h.y=hI(o,p),gB({type:lB,role:"axis-grid",key:YR,from:i,encode:f},n)}(t,n,i.grid,d,u)),c.ticks&&(p=l("tickSize"),f.push(function(t,e,n,i,r,s){const o=hB(t,e),a=t.orient,l=uI(a,-1,1);let u,c,h;const d={enter:u={opacity:rB},update:h={opacity:sB},exit:c={opacity:rB}};lP(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const f=oP(r);f.mult=l;const p={scale:t.scale,field:YR,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return h.y=u.y=cI(a,rB,p),h.y2=u.y2=cI(a,f),c.x=cI(a,p),h.x=u.x=hI(a,rB,p),h.x2=u.x2=hI(a,f),c.y=hI(a,p),gB({type:lB,role:"axis-tick",key:YR,from:i,encode:d},n)}(t,n,i.ticks,d,p,u))),c.labels&&(p=c.ticks?p:0,f.push(function(t,e,n,i,r,s){const o=hB(t,e),a=t.orient,l=t.scale,u=uI(a,-1,1),c=jP(o("labelFlush")),h=jP(o("labelFlushOffset")),d=o("labelAlign"),f=o("labelBaseline");let p,m=0===c||!!c;const g=oP(r);g.mult=u,g.offset=oP(o("labelPadding")||0),g.offset.mult=u;const y={scale:l,field:YR,band:.5,offset:mB(s.offset,o("labelOffset"))},v=cI(a,m?kI(l,c,'"left"','"right"','"center"'):{value:"center"},((t,e,n)=>LP(t)?_I("".concat(t.signal," === '").concat(VR,"'"),"left","right"):t===VR?{value:e}:{value:n})(a,"left","right")),_=cI(a,dI(a,"bottom","top"),m?kI(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),b=kI(l,c,"-(".concat(h,")"),h,0);m=m&&h;const x={opacity:rB,x:cI(a,y,g),y:hI(a,y,g)},w={enter:x,update:p={opacity:sB,text:{field:GR},x:x.x,y:x.y,align:v,baseline:_},exit:{opacity:rB,x:x.x,y:x.y}};lP(w,{dx:!d&&m?cI(a,b):null,dy:!f&&m?hI(a,b):null}),lP(w,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:f});const C=o("labelBound");let A=o("labelOverlap");return A=A||C?{separation:o("labelSeparation"),method:A,order:"datum.index",bound:C?{scale:l,orient:a,tolerance:C}:null}:void 0,p.align!==v&&(p.align=wI(p.align,v)),p.baseline!==_&&(p.baseline=wI(p.baseline,_)),gB({type:uB,role:"axis-label",style:KR,key:YR,from:i,encode:w,overlap:A},n)}(t,n,i.labels,d,p,u))),c.domain&&f.push(function(t,e,n,i){const r=hB(t,e),s=t.orient;let o,a;const l={enter:o={opacity:rB},update:a={opacity:sB},exit:{opacity:rB}};lP(l,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const u=EI(t,0),c=EI(t,1);return o.x=a.x=cI(s,u,rB),o.x2=a.x2=cI(s,c),o.y=a.y=hI(s,u,rB),o.y2=a.y2=hI(s,c),gB({type:lB,role:"axis-domain",from:i,encode:l},n)}(t,n,i.domain,h)),c.title&&f.push(function(t,e,n,i){const r=hB(t,e),s=t.orient,o=uI(s,-1,1);let a,l;const u={enter:a={opacity:rB,anchor:oP(r("titleAnchor",null)),align:{signal:pB}},update:l=(0,de.l7)({},a,{opacity:sB,text:oP(t.title)}),exit:{opacity:rB}},c={signal:'lerp(range("'.concat(t.scale,'"), ').concat(fB(0,1,.5),")")};return l.x=cI(s,c),l.y=hI(s,c),a.angle=cI(s,rB,((t,e)=>LP(t)?{signal:"(".concat(t.signal,") * ").concat(90)}:{value:90*t})(o)),a.baseline=cI(s,dI(s,qR,jR),{value:qR}),l.angle=a.angle,l.baseline=a.baseline,lP(u,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),function(t,e,n,i){const r=(t,e)=>null!=t?(n.update[e]=wI(oP(t),n.update[e]),!1):!cP(e,i),s=r(t("titleX"),"x"),o=r(t("titleY"),"y");n.enter.auto=o===s?oP(o):cI(e,oP(o),oP(s))}(r,s,u,n),u.update.align=wI(u.update.align,a.align),u.update.angle=wI(u.update.angle,a.angle),u.update.baseline=wI(u.update.baseline,a.baseline),gB({type:uB,role:"axis-title",style:ZR,from:i,encode:u},n)}(t,n,i.title,h)),eI(cB({role:"axis",from:h,encode:uP(SI(l,t),r,iB),marks:f,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:s,interactive:o,style:a}),e)}function SI(t,e){const n={enter:{},update:{}};return lP(n,{orient:t("orient"),offset:t("offset")||0,position:zP(e.position,0),titlePadding:t("titlePadding"),minExtent:t("minExtent"),maxExtent:t("maxExtent"),range:{signal:'abs(span(range("'.concat(e.scale,'")))')},translate:t("translate"),format:e.format,formatType:e.formatType}),n}function FI(t,e,n){const i=(0,de.IX)(t.signals),r=(0,de.IX)(t.scales);return n||i.forEach(t=>DP(t,e)),(0,de.IX)(t.projections).forEach(t=>function(t,e){const n=e.config.projection||{},i={};for(const r in t)"name"!==r&&(i[r]=zR(t[r],r,e));for(const r in n)null==i[r]&&(i[r]=zR(n[r],r,e));e.addProjection(t.name,i)}(t,e)),r.forEach(t=>function(t,e){const n=t.type||"linear";kp(n)||(0,de.vU)("Unrecognized scale type: "+(0,de.m8)(n)),e.addScale(t.name,{type:n,domain:void 0})}(t,e)),(0,de.IX)(t.data).forEach(t=>function(t,e){const n=[];t.transform&&t.transform.forEach(t=>{n.push(LB(t,e))}),t.on&&t.on.forEach(n=>{tI(n,e,t.name)}),e.addDataPipeline(t.name,function(t,e,n){const i=[];let r,s,o,a,l,u=null,c=!1,h=!1;for(t.values?LP(t.values)||$P(t.format)?(i.push(aI(e,t)),i.push(u=oI())):i.push(u=oI({$ingest:t.values,$format:t.format})):t.url?$P(t.url)||$P(t.format)?(i.push(aI(e,t)),i.push(u=oI())):i.push(u=oI({$request:t.url,$format:t.format})):t.source&&(u=r=(0,de.IX)(t.source).map(t=>MP(e.getData(t).output)),i.push(null)),s=0,o=n.length;s<o;++s)a=n[s],l=a.metadata,u||l.source||i.push(u=oI()),i.push(a),l.generates&&(h=!0),l.modifies&&!h&&(c=!0),l.source?u=a:l.changes&&(u=null);return r&&(o=r.length-1,i[0]=vR({derive:c,pulse:o?r:r[0]}),(c||o)&&i.splice(1,0,oI())),u||i.push(oI()),i.push(xR({})),i}(t,e,n))}(t,e)),r.forEach(t=>DR(t,e)),(n||i).forEach(t=>function(t,e){const n=e.getSignal(t.name);let i=t.update;t.init&&(i?(0,de.vU)("Signals can not include both init and update expressions."):(i=t.init,n.initonly=!0)),i&&(i=WM(i,e),n.update=i.$expr,n.params=i.$params),t.on&&t.on.forEach(t=>function(t,e,n){const i=t.encode,r={target:n};let s=t.events,o=t.update,a=[];s||(0,de.vU)("Signal update missing events specification."),(0,de.HD)(s)&&(s=JT(s,e.isSubscope()?IP:NP)),s=(0,de.IX)(s).filter(t=>t.signal||t.scale?(a.push(t),0):1),a.length>1&&(a=[YP(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),null!=i&&(o&&(0,de.vU)("Signal encode and update are mutually exclusive."),o="encode(item(),"+(0,de.m8)(i)+")"),r.update=(0,de.HD)(o)?WM(o,e):null!=o.expr?WM(o.expr,e):null!=o.value?o.value:null!=o.signal?{$expr:XP,$params:{$value:e.signalRef(o.signal)}}:(0,de.vU)("Invalid signal update specification."),t.force&&(r.options={force:!0}),a.forEach(t=>e.addUpdate((0,de.l7)(function(t,e){return{source:t.signal?e.signalRef(t.signal):t.scale?e.scaleRef(t.scale):VP(t,e)}}(t,e),r)))}(t,e,n.id))}(t,e)),(0,de.IX)(t.axes).forEach(t=>DI(t,e)),(0,de.IX)(t.marks).forEach(t=>eI(t,e)),(0,de.IX)(t.legends).forEach(t=>function(t,e){const n=e.config.legend,i=t.encode||{},r=hB(t,n),s=i.legend||{},o=s.name||void 0,a=s.interactive,l=s.style,u={};let c,h,d,f=0;nB.forEach(e=>t[e]?(u[e]=t[e],f=f||t[e]):0),f||(0,de.vU)("Missing valid scale for legend.");const p=function(t,e){let n=t.type||QR;return t.type||1!==function(t){return nB.reduce((e,n)=>e+(t[n]?1:0),0)}(t)||!t.fill&&!t.stroke||(n=Sp(e)?JR:Op(e)?tB:QR),n!==JR?n:Op(e)?tB:JR}(t,e.scaleType(f)),m={title:null!=t.title,scales:u,type:p,vgrad:"symbol"!==p&&r.isVertical()},g=MP(e.add(tR(null,[m]))),y=MP(e.add(lR(h={type:p,scale:e.scaleRef(f),count:e.objectProperty(r("tickCount")),limit:e.property(r("symbolLimit")),values:e.objectProperty(t.values),minstep:e.property(t.tickMinStep),formatType:e.property(t.formatType),formatSpecifier:e.property(t.format)})));return p===JR?(d=[yB(t,f,n,i.gradient),xB(t,n,i.labels,y)],h.count=h.count||e.signalRef("max(2,2*floor((".concat(jP(r.gradientLength()),")/100))"))):p===tB?d=[vB(t,f,n,i.gradient,y),xB(t,n,i.labels,y)]:(c=function(t,e){const n=hB(t,e);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}(t,n),d=[wB(t,n,i,y,jP(c.columns))],h.size=function(t,e,n){const i=jP(iI("size",t,n)),r=jP(iI("strokeWidth",t,n)),s=jP(function(t,e,n){return dB("fontSize",t)||function(t,e,n){const i=e.config.style["guide-label"];return i&&i.fontSize}(0,e)}(n[1].encode,e));return WM("max(ceil(sqrt(".concat(i,")+").concat(r,"),").concat(s,")"),e)}(t,e,d[0].marks)),d=[cB({role:"legend-entry",from:g,encode:{enter:{x:{value:0},y:{value:0}}},marks:d,layout:c,interactive:a})],m.title&&d.push(function(t,e,n,i){const r=hB(t,e),s={enter:{opacity:rB},update:{opacity:sB,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:rB}};return lP(s,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:OB},angle:{signal:MB},align:{signal:FB},baseline:{signal:TB},text:t.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),gB({type:uB,role:"legend-title",style:ZR,from:i,encode:s},n)}(t,n,i.title,g)),eI(cB({role:"legend",from:g,encode:uP(nI(r,t,n),s,iB),marks:d,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:o,interactive:a,style:l}),e)}(t,e)),t.title&&function(t,e){const n=hB(t=(0,de.HD)(t)?{text:t}:t,e.config.title),i=t.encode||{},r=i.group||{},s=r.name||void 0,o=r.interactive,a=r.style,l=[],u=MP(e.add(tR(null,[{}])));l.push(function(t,e,n,i){const r={value:0},s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return lP(s,{text:t.text,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("color"),font:e("font"),fontSize:e("fontSize"),fontStyle:e("fontStyle"),fontWeight:e("fontWeight"),lineHeight:e("lineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),gB({type:uB,role:"title-text",style:"group-title",from:i,encode:s},n)}(t,n,function(t){const e=t.encode;return e&&e.title||(0,de.l7)({name:t.name,interactive:t.interactive,style:t.style},e)}(t),u)),t.subtitle&&l.push(function(t,e,n,i){const r={value:0},s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return lP(s,{text:t.subtitle,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:e("dx"),dy:e("dy"),fill:e("subtitleColor"),font:e("subtitleFont"),fontSize:e("subtitleFontSize"),fontStyle:e("subtitleFontStyle"),fontWeight:e("subtitleFontWeight"),lineHeight:e("subtitleLineHeight")},{align:e("align"),angle:e("angle"),baseline:e("baseline")}),gB({type:uB,role:"title-subtitle",style:"group-subtitle",from:i,encode:s},n)}(t,n,i.subtitle,u)),eI(cB({role:"title",from:u,encode:sI(n,r),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),e)}(t.title,e),e.parseLambdas(),e}function OI(t,e){return e&&e.signal?{name:t,update:e.signal}:{name:t,value:e}}function MI(t,e){this.config=t||{},this.options=e||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function TI(t){this.config=t.config,this.options=t.options,this.legends=t.legends,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}function PI(t){return((0,de.kJ)(t)?RI:BI)(t)}function RI(t){const e=t.length;let n="[";for(let i=0;i<e;++i){const e=t[i];n+=(i>0?",":"")+((0,de.Kn)(e)?e.signal||PI(e):(0,de.m8)(e))}return n+"]"}function BI(t){let e,n,i="{",r=0;for(e in t)n=t[e],i+=(++r>1?",":"")+(0,de.m8)(e)+":"+((0,de.Kn)(n)?n.signal||PI(n):(0,de.m8)(n));return i+"}"}function II(t,e,n){return(0,de.Kn)(t)||(0,de.vU)("Input Vega specification must be an object."),function(t,e){const n=e.config,i=MP(e.root=e.add(OP())),r=function(t,e){const n=n=>zP(t[n],e[n]),i=[OI("background",n("background")),OI("autosize",iP(n("autosize"))),OI("padding",sP(n("padding"))),OI("width",n("width")||0),OI("height",n("height")||0)],r=i.reduce((t,e)=>(t[e.name]=e,t),{}),s={};return(0,de.IX)(t.signals).forEach(t=>{(0,de.nr)(r,t.name)?t=(0,de.l7)(r[t.name],t):i.push(t),s[t.name]=t}),(0,de.IX)(e.signals).forEach(t=>{(0,de.nr)(s,t.name)||(0,de.nr)(r,t.name)||i.push(t)}),i}(t,n);r.forEach(t=>DP(t,e)),e.description=t.description||n.description,e.eventConfig=n.events,e.legends=e.objectProperty(n.legend&&n.legend.layout),e.locale=n.locale;const s=e.add(tR()),o=e.add(iR(wP((t=>uP({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t))(t.encode),oB,dP,t.style,e,{pulse:MP(s)}))),a=e.add(CR({layout:e.objectProperty(t.layout),legends:e.legends,autosize:e.signalRef("autosize"),mark:i,pulse:MP(o)}));e.operators.pop(),e.pushState(MP(o),MP(a),null),FI(t,e,r),e.operators.push(a);let l=e.add(JP({mark:i,pulse:MP(a)}));return l=e.add(_R({pulse:MP(l)})),l=e.add(xR({pulse:MP(l)})),e.addData("root",new KB(e,s,s,l)),e}(t,new MI(e=(0,de.fE)(function(){const t="sans-serif",e="#4c78a8",n="#000",i="#888",r="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:e},area:{fill:e},image:null,line:{stroke:e,strokeWidth:2},path:{stroke:e},rect:{fill:e},rule:{stroke:n},shape:{stroke:e},symbol:{fill:e,size:64},text:{fill:n,font:t,fontSize:11},trail:{fill:e,size:2},style:{"guide-label":{fill:n,font:t,fontSize:10},"guide-title":{fill:n,font:t,fontSize:11,fontWeight:"bold"},"group-title":{fill:n,font:t,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:n,font:t,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:r}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:i,grid:!1,gridWidth:1,gridColor:r,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:i,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:r,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:i,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}(),e,t.config),n)).toRuntime()}function NI(t){this.type=t}var LI,$I,zI,jI,UI;MI.prototype=TI.prototype={parse(t){return FI(t,this)},fork(){return new TI(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(e=>{e.$ref=t.id}),t.refs=null),t},proxy(t){const e=t instanceof SP?MP(t):t;return this.add(yR({value:e}))},addStream(t){return this.streams.push(t),t.id=this.id(),t},addUpdate(t){return this.updates.push(t),t},finish(){let t,e;for(t in this.root&&(this.root.root=!0),this.signals)this.signals[t].signal=t;for(t in this.scales)this.scales[t].scale=t;function n(t,e,n){let i,r;t&&(i=t.data||(t.data={}),r=i[e]||(i[e]=[]),r.push(n))}for(t in this.data){e=this.data[t],n(e.input,t,"input"),n(e.output,t,"output"),n(e.values,t,"values");for(const i in e.index)n(e.index[i],t,"index:"+i)}return this},pushState(t,e,n){this._encode.push(MP(this.add(xR({pulse:t})))),this._parent.push(e),this._lookup.push(n?MP(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return(0,de.fj)(this._parent)},encode(){return(0,de.fj)(this._encode)},lookup(){return(0,de.fj)(this._lookup)},markpath(){const t=this._markpath;return++t[t.length-1]},fieldRef(t,e){if((0,de.HD)(t))return TP(t,e);t.signal||(0,de.vU)("Unsupported field reference: "+(0,de.m8)(t));const n=t.signal;let i=this.field[n];if(!i){const t={name:this.signalRef(n)};e&&(t.as=e),this.field[n]=i=MP(this.add(oR(t)))}return i},compareRef(t){let e=!1;const n=t=>LP(t)?(e=!0,this.signalRef(t.signal)):function(t){return t&&t.expr}(t)?(e=!0,this.exprRef(t.expr)):t,i=(0,de.IX)(t.field).map(n),r=(0,de.IX)(t.order).map(n);return e?MP(this.add(eR({fields:i,orders:r}))):RP(i,r)},keyRef(t,e){let n=!1;const i=this.signals;return t=(0,de.IX)(t).map(t=>LP(t)?(n=!0,MP(i[t.signal])):t),n?MP(this.add(aR({fields:t,flat:e}))):function(t,e){const n={$key:t};return e&&(n.$flat=!0),n}(t,e)},sortRef(t){if(!t)return t;const e=BP(t.op,t.field),n=t.order||"ascending";return n.signal?MP(this.add(eR({fields:e,orders:this.signalRef(n.signal)}))):RP(e,n)},event(t,e){const n=t+":"+e;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:t,type:e}),this.events[n]=i}return this.events[n]},hasOwnSignal(t){return(0,de.nr)(this.signals,t)},addSignal(t,e){this.hasOwnSignal(t)&&(0,de.vU)("Duplicate signal name: "+(0,de.m8)(t));const n=e instanceof SP?e:this.add(OP(e));return this.signals[t]=n},getSignal(t){return this.signals[t]||(0,de.vU)("Unrecognized signal name: "+(0,de.m8)(t)),this.signals[t]},signalRef(t){return this.signals[t]?MP(this.signals[t]):((0,de.nr)(this.lambdas,t)||(this.lambdas[t]=this.add(OP(null))),MP(this.lambdas[t]))},parseLambdas(){const t=Object.keys(this.lambdas);for(let e=0,n=t.length;e<n;++e){const n=t[e],i=WM(n,this),r=this.lambdas[n];r.params=i.$params,r.update=i.$expr}},property(t){return t&&t.signal?this.signalRef(t.signal):t},objectProperty(t){return t&&(0,de.Kn)(t)?this.signalRef(t.signal||PI(t)):t},exprRef(t,e){const n={expr:WM(t,this)};return e&&(n.expr.$name=e),MP(this.add(rR(n)))},addBinding(t,e){this.bindings||(0,de.vU)("Nested signals do not support binding: "+(0,de.m8)(t)),this.bindings.push((0,de.l7)({signal:t},e))},addScaleProj(t,e){(0,de.nr)(this.scales,t)&&(0,de.vU)("Duplicate scale or projection name: "+(0,de.m8)(t)),this.scales[t]=this.add(e)},addScale(t,e){this.addScaleProj(t,bR(e))},addProjection(t,e){this.addScaleProj(t,gR(e))},getScale(t){return this.scales[t]||(0,de.vU)("Unrecognized scale name: "+(0,de.m8)(t)),this.scales[t]},scaleRef(t){return MP(this.getScale(t))},scaleType(t){return this.getScale(t).params.type},projectionRef(t){return this.scaleRef(t)},projectionType(t){return this.scaleType(t)},addData(t,e){return(0,de.nr)(this.data,t)&&(0,de.vU)("Duplicate data set name: "+(0,de.m8)(t)),this.data[t]=e},getData(t){return this.data[t]||(0,de.vU)("Undefined data set name: "+(0,de.m8)(t)),this.data[t]},addDataPipeline(t,e){return(0,de.nr)(this.data,t)&&(0,de.vU)("Duplicate data set name: "+(0,de.m8)(t)),this.addData(t,KB.fromEntries(this,e))}},NI.prototype.visit=function(t){let e,n,i;if(t(this))return 1;for(e=function(t){switch(t.type){case"ArrayExpression":return t.elements;case"BinaryExpression":case"LogicalExpression":return[t.left,t.right];case"CallExpression":return[t.callee].concat(t.arguments);case"ConditionalExpression":return[t.test,t.consequent,t.alternate];case"MemberExpression":return[t.object,t.property];case"ObjectExpression":return t.properties;case"Property":return[t.key,t.value];case"UnaryExpression":return[t.argument];case"Identifier":case"Literal":case"RawCode":default:return[]}}(this),n=0,i=e.length;n<i;++n)if(e[n].visit(t))return 1},(LI={})[1]="Boolean",LI[2]="<end>",LI[3]="Identifier",LI[4]="Keyword",LI[5]="Null",LI[6]="Numeric",LI[7]="Punctuator",LI[8]="String",LI[9]="RegularExpression";var VI="Identifier",qI="Unexpected token %0",HI="Invalid regular expression",WI="Invalid regular expression: missing /",GI="Octal literals are not allowed in strict mode.",XI="ILLEGAL",YI="Disabled.",KI=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),ZI=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function QI(t,e){if(!t)throw new Error("ASSERT: "+e)}function JI(t){return t>=48&&t<=57}function tN(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function eN(t){return"01234567".indexOf(t)>=0}function nN(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function iN(t){return 10===t||13===t||8232===t||8233===t}function rN(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||t>=128&&KI.test(String.fromCharCode(t))}function sN(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||t>=128&&ZI.test(String.fromCharCode(t))}const oN={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function aN(){for(;zI<jI;){const t=$I.charCodeAt(zI);if(!nN(t)&&!iN(t))break;++zI}}function lN(t){var e,n,i,r=0;for(n="u"===t?4:2,e=0;e<n;++e)zI<jI&&tN($I[zI])?(i=$I[zI++],r=16*r+"0123456789abcdef".indexOf(i.toLowerCase())):wN({},qI,XI);return String.fromCharCode(r)}function uN(){var t,e;for(e=0,"}"===(t=$I[zI])&&wN({},qI,XI);zI<jI&&tN(t=$I[zI++]);)e=16*e+"0123456789abcdef".indexOf(t.toLowerCase());return(e>1114111||"}"!==t)&&wN({},qI,XI),e<=65535?String.fromCharCode(e):String.fromCharCode(55296+(e-65536>>10),56320+(e-65536&1023))}function cN(){var t,e;for(t=$I.charCodeAt(zI++),e=String.fromCharCode(t),92===t&&(117!==$I.charCodeAt(zI)&&wN({},qI,XI),++zI,(t=lN("u"))&&"\\"!==t&&rN(t.charCodeAt(0))||wN({},qI,XI),e=t);zI<jI&&sN(t=$I.charCodeAt(zI));)++zI,e+=String.fromCharCode(t),92===t&&(e=e.substr(0,e.length-1),117!==$I.charCodeAt(zI)&&wN({},qI,XI),++zI,(t=lN("u"))&&"\\"!==t&&sN(t.charCodeAt(0))||wN({},qI,XI),e+=t);return e}function hN(){var t,e,n,i,r=zI,s=$I.charCodeAt(zI),o=$I[zI];switch(s){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++zI,{type:7,value:String.fromCharCode(s),start:r,end:zI};default:if(61===(t=$I.charCodeAt(zI+1)))switch(s){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return zI+=2,{type:7,value:String.fromCharCode(s)+String.fromCharCode(t),start:r,end:zI};case 33:case 61:return 61===$I.charCodeAt(zI+=2)&&++zI,{type:7,value:$I.slice(r,zI),start:r,end:zI}}}return">>>="===(i=$I.substr(zI,4))?{type:7,value:i,start:r,end:zI+=4}:">>>"===(n=i.substr(0,3))||"<<="===n||">>="===n?{type:7,value:n,start:r,end:zI+=3}:o===(e=n.substr(0,2))[1]&&"+-<>&|".indexOf(o)>=0||"=>"===e?{type:7,value:e,start:r,end:zI+=2}:("//"===e&&wN({},qI,XI),"<>=!+-*%&|^/".indexOf(o)>=0?{type:7,value:o,start:r,end:++zI}:void wN({},qI,XI))}function dN(){var t,e,n;if(QI(JI((n=$I[zI]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),e=zI,t="","."!==n){if(t=$I[zI++],n=$I[zI],"0"===t){if("x"===n||"X"===n)return++zI,function(t){let e="";for(;zI<jI&&tN($I[zI]);)e+=$I[zI++];return 0===e.length&&wN({},qI,XI),rN($I.charCodeAt(zI))&&wN({},qI,XI),{type:6,value:parseInt("0x"+e,16),start:t,end:zI}}(e);if(eN(n))return function(t){let e="0"+$I[zI++];for(;zI<jI&&eN($I[zI]);)e+=$I[zI++];return(rN($I.charCodeAt(zI))||JI($I.charCodeAt(zI)))&&wN({},qI,XI),{type:6,value:parseInt(e,8),octal:!0,start:t,end:zI}}(e);n&&JI(n.charCodeAt(0))&&wN({},qI,XI)}for(;JI($I.charCodeAt(zI));)t+=$I[zI++];n=$I[zI]}if("."===n){for(t+=$I[zI++];JI($I.charCodeAt(zI));)t+=$I[zI++];n=$I[zI]}if("e"===n||"E"===n)if(t+=$I[zI++],"+"!==(n=$I[zI])&&"-"!==n||(t+=$I[zI++]),JI($I.charCodeAt(zI)))for(;JI($I.charCodeAt(zI));)t+=$I[zI++];else wN({},qI,XI);return rN($I.charCodeAt(zI))&&wN({},qI,XI),{type:6,value:parseFloat(t),start:e,end:zI}}function fN(){if(aN(),zI>=jI)return{type:2,start:zI,end:zI};const t=$I.charCodeAt(zI);return rN(t)?function(){var t,e;return t=zI,{type:1===(e=92===$I.charCodeAt(zI)?cN():function(){var t,e;for(t=zI++;zI<jI;){if(92===(e=$I.charCodeAt(zI)))return zI=t,cN();if(!sN(e))break;++zI}return $I.slice(t,zI)}()).length?3:oN.hasOwnProperty(e)?4:"null"===e?5:"true"===e||"false"===e?1:3,value:e,start:t,end:zI}}():40===t||41===t||59===t?hN():39===t||34===t?function(){var t,e,n,i,r="",s=!1;for(QI("'"===(t=$I[zI])||'"'===t,"String literal must starts with a quote"),e=zI,++zI;zI<jI;){if((n=$I[zI++])===t){t="";break}if("\\"===n)if((n=$I[zI++])&&iN(n.charCodeAt(0)))"\r"===n&&"\n"===$I[zI]&&++zI;else switch(n){case"u":case"x":"{"===$I[zI]?(++zI,r+=uN()):r+=lN(n);break;case"n":r+="\n";break;case"r":r+="\r";break;case"t":r+="\t";break;case"b":r+="\b";break;case"f":r+="\f";break;case"v":r+="\v";break;default:eN(n)?(0!==(i="01234567".indexOf(n))&&(s=!0),zI<jI&&eN($I[zI])&&(s=!0,i=8*i+"01234567".indexOf($I[zI++]),"0123".indexOf(n)>=0&&zI<jI&&eN($I[zI])&&(i=8*i+"01234567".indexOf($I[zI++]))),r+=String.fromCharCode(i)):r+=n}else{if(iN(n.charCodeAt(0)))break;r+=n}}return""!==t&&wN({},qI,XI),{type:8,value:r,octal:s,start:e,end:zI}}():46===t?JI($I.charCodeAt(zI+1))?dN():hN():JI(t)?dN():hN()}function pN(){const t=UI;return zI=t.end,UI=fN(),zI=t.end,t}function mN(){const t=zI;UI=fN(),zI=t}function gN(t,e,n){const i=new NI("||"===t||"&&"===t?"LogicalExpression":"BinaryExpression");return i.operator=t,i.left=e,i.right=n,i}function yN(t,e){const n=new NI("CallExpression");return n.callee=t,n.arguments=e,n}function vN(t){const e=new NI(VI);return e.name=t,e}function _N(t){const e=new NI("Literal");return e.value=t.value,e.raw=$I.slice(t.start,t.end),t.regex&&("//"===e.raw&&(e.raw="/(?:)/"),e.regex=t.regex),e}function bN(t,e,n){const i=new NI("MemberExpression");return i.computed="["===t,i.object=e,i.property=n,i.computed||(n.member=!0),i}function xN(t,e,n){const i=new NI("Property");return i.key=e,i.value=n,i.kind=t,i}function wN(t,e){var n,i=Array.prototype.slice.call(arguments,2),r=e.replace(/%(\d)/g,(t,e)=>(QI(e<i.length,"Message reference must be in range"),i[e]));throw(n=new Error(r)).index=zI,n.description=r,n}function CN(t){2===t.type&&wN(t,"Unexpected end of input"),6===t.type&&wN(t,"Unexpected number"),8===t.type&&wN(t,"Unexpected string"),3===t.type&&wN(t,"Unexpected identifier"),4===t.type&&wN(t,"Unexpected reserved word"),wN(t,qI,t.value)}function AN(t){const e=pN();7===e.type&&e.value===t||CN(e)}function EN(t){return 7===UI.type&&UI.value===t}function kN(t){return 4===UI.type&&UI.value===t}function DN(){zI=UI.start;const t=pN();return 8===t.type||6===t.type?(t.octal&&wN(t,GI),_N(t)):vN(t.value)}function SN(){var t,e,n;return zI=UI.start,3===(t=UI).type?(n=DN(),AN(":"),xN("init",n,BN())):2!==t.type&&7!==t.type?(e=DN(),AN(":"),xN("init",e,BN())):void CN(t)}const FN={if:1};function ON(){const t=[];if(AN("("),!EN(")"))for(;zI<jI&&(t.push(BN()),!EN(")"));)AN(",");return AN(")"),t}function MN(){AN("[");const t=IN();return AN("]"),t}function TN(){const t=function(){var t;for(t=function(){var t,e,n;if(EN("("))return function(){AN("(");const t=IN();return AN(")"),t}();if(EN("["))return function(){const t=[];for(zI=UI.start,AN("[");!EN("]");)EN(",")?(pN(),t.push(null)):(t.push(BN()),EN("]")||AN(","));return pN(),function(t){const e=new NI("ArrayExpression");return e.elements=t,e}(t)}();if(EN("{"))return function(){var t,e,n=[],i={},r=String;for(zI=UI.start,AN("{");!EN("}");)e="$"+((t=SN()).key.type===VI?t.key.name:r(t.key.value)),Object.prototype.hasOwnProperty.call(i,e)?wN({},"Duplicate data property in object literal not allowed in strict mode"):i[e]=!0,n.push(t),EN("}")||AN(",");return AN("}"),function(t){const e=new NI("ObjectExpression");return e.properties=t,e}(n)}();if(zI=UI.start,3===(t=UI.type)||FN[UI.value])n=vN(pN().value);else if(8===t||6===t)UI.octal&&wN(UI,GI),n=_N(pN());else{if(4===t)throw new Error(YI);1===t?((e=pN()).value="true"===e.value,n=_N(e)):5===t?((e=pN()).value=null,n=_N(e)):EN("/")||EN("/=")?(n=_N(function(){var t,e,n,i;return UI=null,aN(),t=zI,e=function(){var t,e,n,i;for(QI("/"===(t=$I[zI]),"Regular expression literal must start with a slash"),e=$I[zI++],n=!1,i=!1;zI<jI;)if(e+=t=$I[zI++],"\\"===t)iN((t=$I[zI++]).charCodeAt(0))&&wN({},WI),e+=t;else if(iN(t.charCodeAt(0)))wN({},WI);else if(n)"]"===t&&(n=!1);else{if("/"===t){i=!0;break}"["===t&&(n=!0)}return i||wN({},WI),{value:e.substr(1,e.length-2),literal:e}}(),n=function(){var t,e,n;for(e="",n="";zI<jI&&sN((t=$I[zI]).charCodeAt(0));)++zI,"\\"===t&&zI<jI?wN({},qI,XI):(n+=t,e+=t);return n.search(/[^gimuy]/g)>=0&&wN({},HI,n),{value:n,literal:e}}(),i=function(t,e){let n=t;e.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(t,e)=>{if(parseInt(e,16)<=1114111)return"x";wN({},HI)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(i){wN({},HI)}try{return new RegExp(t,e)}catch(r){return null}}(e.value,n.value),{literal:e.literal+n.literal,value:i,regex:{pattern:e.value,flags:n.value},start:t,end:zI}}()),mN()):CN(pN())}return n}();;)if(EN("."))t=bN(".",t,(AN("."),function(){zI=UI.start;const t=pN();return function(t){return 3===t.type||4===t.type||1===t.type||5===t.type}(t)||CN(t),vN(t.value)}()));else if(EN("("))t=yN(t,ON());else{if(!EN("["))break;t=bN("[",t,MN())}return t}();if(7===UI.type&&(EN("++")||EN("--")))throw new Error(YI);return t}function PN(){var t,e;if(7!==UI.type&&4!==UI.type)e=TN();else{if(EN("++")||EN("--"))throw new Error(YI);if(EN("+")||EN("-")||EN("~")||EN("!"))t=pN(),e=PN(),e=function(t,e){const n=new NI("UnaryExpression");return n.operator=t,n.argument=e,n.prefix=!0,n}(t.value,e);else{if(kN("delete")||kN("void")||kN("typeof"))throw new Error(YI);e=TN()}}return e}function RN(t){let e=0;if(7!==t.type&&4!==t.type)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11}return e}function BN(){var t,e;return t=function(){var t,e,n,i,r,s,o,a,l,u;if(t=UI,l=PN(),0===(r=RN(i=UI)))return l;for(i.prec=r,pN(),e=[t,UI],s=[l,i,o=PN()];(r=RN(UI))>0;){for(;s.length>2&&r<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,l=s.pop(),e.pop(),n=gN(a,l,o),s.push(n);(i=pN()).prec=r,s.push(i),e.push(UI),n=PN(),s.push(n)}for(n=s[u=s.length-1],e.pop();u>1;)e.pop(),n=gN(s[u-1].value,s[u-2],n),u-=2;return n}(),EN("?")&&(pN(),e=BN(),AN(":"),t=function(t,e,n){const i=new NI("ConditionalExpression");return i.test=t,i.consequent=e,i.alternate=n,i}(t,e,BN())),t}function IN(){const t=BN();if(EN(","))throw new Error(YI);return t}function NN(t){zI=0,jI=($I=t).length,UI=null,mN();const e=IN();if(2!==UI.type)throw new Error("Unexpect token after expression.");return e}var LN={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function $N(t){function e(e,n,i){return r=>function(e,n,i,r){let s=t(n[0]);return i&&(s=i+"("+s+")",0===i.lastIndexOf("new ",0)&&(s="("+s+")")),s+"."+e+(r<0?"":0===r?"()":"("+n.slice(1).map(t).join(",")+")")}(e,r,n,i)}const n="new Date",i="String",r="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(e){e.length<3&&x("Missing arguments to clamp function."),e.length>3&&x("Too many arguments to clamp function.");const n=e.map(t);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:e("getDate",n,0),day:e("getDay",n,0),year:e("getFullYear",n,0),month:e("getMonth",n,0),hours:e("getHours",n,0),minutes:e("getMinutes",n,0),seconds:e("getSeconds",n,0),milliseconds:e("getMilliseconds",n,0),time:e("getTime",n,0),timezoneoffset:e("getTimezoneOffset",n,0),utcdate:e("getUTCDate",n,0),utcday:e("getUTCDay",n,0),utcyear:e("getUTCFullYear",n,0),utcmonth:e("getUTCMonth",n,0),utchours:e("getUTCHours",n,0),utcminutes:e("getUTCMinutes",n,0),utcseconds:e("getUTCSeconds",n,0),utcmilliseconds:e("getUTCMilliseconds",n,0),length:e("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:e("toUpperCase",i,0),lower:e("toLowerCase",i,0),substring:e("substring",i),split:e("split",i),trim:e("trim",i,0),regexp:r,test:e("test",r),if:function(e){e.length<3&&x("Missing arguments to if function."),e.length>3&&x("Too many arguments to if function.");const n=e.map(t);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}function zN(t){const e=(t=t||{}).allowed?Wt(t.allowed):{},n=t.forbidden?Wt(t.forbidden):{},i=t.constants||LN,r=(t.functions||$N)(h),s=t.globalvar,o=t.fieldvar,a=ct(s)?s:t=>"".concat(s,'["').concat(t,'"]');let l={},u={},c=0;function h(t){if(Pt(t))return t;const e=d[t.type];return null==e&&x("Unsupported type: "+t.type),e(t)}const d={Literal:t=>t.raw,Identifier:t=>{const r=t.name;return c>0?r:wt(n,r)?x("Illegal identifier: "+r):wt(i,r)?i[r]:wt(e,r)?r:(l[r]=1,a(r))},MemberExpression:t=>{const e=!t.computed,n=h(t.object);e&&(c+=1);const i=h(t.property);return n===o&&(u[function(t){const e=t&&t.length-1;return e&&('"'===t[0]&&'"'===t[e]||"'"===t[0]&&"'"===t[e])?t.slice(1,-1):t}(i)]=1),e&&(c-=1),n+(e?"."+i:"["+i+"]")},CallExpression:t=>{"Identifier"!==t.callee.type&&x("Illegal callee type: "+t.callee.type);const e=t.callee.name,n=t.arguments,i=wt(r,e)&&r[e];return i||x("Unrecognized function: "+e),ct(i)?i(n):i+"("+n.map(h).join(",")+")"},ArrayExpression:t=>"["+t.elements.map(h).join(",")+"]",BinaryExpression:t=>"("+h(t.left)+" "+t.operator+" "+h(t.right)+")",UnaryExpression:t=>"("+t.operator+h(t.argument)+")",ConditionalExpression:t=>"("+h(t.test)+"?"+h(t.consequent)+":"+h(t.alternate)+")",LogicalExpression:t=>"("+h(t.left)+t.operator+h(t.right)+")",ObjectExpression:t=>"{"+t.properties.map(h).join(",")+"}",Property:t=>{c+=1;const e=h(t.key);return c-=1,e+":"+h(t.value)}};function f(t){const e={code:h(t),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},e}return f.functions=r,f.constants=i,f}vt(Ro,i,s,o,a,l,c,u,h,d,f,p);const jN="5.20.2"},2316:t=>{"use strict";t.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}},9377:(t,e,n)=>{"use strict";function i(t){var e=this;if(e instanceof i||(e=new i),e.tail=null,e.head=null,e.length=0,t&&"function"==typeof t.forEach)t.forEach(function(t){e.push(t)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)e.push(arguments[n]);return e}function r(t,e,n){var i=e===t.head?new a(n,null,e,t):new a(n,e,e.next,t);return null===i.next&&(t.tail=i),null===i.prev&&(t.head=i),t.length++,i}function s(t,e){t.tail=new a(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function o(t,e){t.head=new a(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function a(t,e,n,i){if(!(this instanceof a))return new a(t,e,n,i);this.list=i,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}t.exports=i,i.Node=a,i.create=i,i.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,n=t.prev;return e&&(e.prev=n),n&&(n.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=n),t.list.length--,t.next=null,t.prev=null,t.list=null,e},i.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}},i.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}},i.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)s(this,arguments[t]);return this.length},i.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)o(this,arguments[t]);return this.length},i.prototype.pop=function(){if(this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}},i.prototype.shift=function(){if(this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}},i.prototype.forEach=function(t,e){e=e||this;for(var n=this.head,i=0;null!==n;i++)t.call(e,n.value,i,this),n=n.next},i.prototype.forEachReverse=function(t,e){e=e||this;for(var n=this.tail,i=this.length-1;null!==n;i--)t.call(e,n.value,i,this),n=n.prev},i.prototype.get=function(t){for(var e=0,n=this.head;null!==n&&e<t;e++)n=n.next;if(e===t&&null!==n)return n.value},i.prototype.getReverse=function(t){for(var e=0,n=this.tail;null!==n&&e<t;e++)n=n.prev;if(e===t&&null!==n)return n.value},i.prototype.map=function(t,e){e=e||this;for(var n=new i,r=this.head;null!==r;)n.push(t.call(e,r.value,this)),r=r.next;return n},i.prototype.mapReverse=function(t,e){e=e||this;for(var n=new i,r=this.tail;null!==r;)n.push(t.call(e,r.value,this)),r=r.prev;return n},i.prototype.reduce=function(t,e){var n,i=this.head;if(arguments.length>1)n=e;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");i=this.head.next,n=this.head.value}for(var r=0;null!==i;r++)n=t(n,i.value,r),i=i.next;return n},i.prototype.reduceReverse=function(t,e){var n,i=this.tail;if(arguments.length>1)n=e;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");i=this.tail.prev,n=this.tail.value}for(var r=this.length-1;null!==i;r--)n=t(n,i.value,r),i=i.prev;return n},i.prototype.toArray=function(){for(var t=new Array(this.length),e=0,n=this.head;null!==n;e++)t[e]=n.value,n=n.next;return t},i.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,n=this.tail;null!==n;e++)t[e]=n.value,n=n.prev;return t},i.prototype.slice=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var n=new i;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=0,s=this.head;null!==s&&r<t;r++)s=s.next;for(;null!==s&&r<e;r++,s=s.next)n.push(s.value);return n},i.prototype.sliceReverse=function(t,e){(e=e||this.length)<0&&(e+=this.length),(t=t||0)<0&&(t+=this.length);var n=new i;if(e<t||e<0)return n;t<0&&(t=0),e>this.length&&(e=this.length);for(var r=this.length,s=this.tail;null!==s&&r>e;r--)s=s.prev;for(;null!==s&&r>t;r--,s=s.prev)n.push(s.value);return n},i.prototype.splice=function(t,e,...n){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var i=0,s=this.head;null!==s&&i<t;i++)s=s.next;var o=[];for(i=0;s&&i<e;i++)o.push(s.value),s=this.removeNode(s);for(null===s&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev),i=0;i<n.length;i++)s=r(this,s,n[i]);return o},i.prototype.reverse=function(){for(var t=this.head,e=this.tail,n=t;null!==n;n=n.prev){var i=n.prev;n.prev=n.next,n.next=i}return this.head=e,this.tail=t,this};try{n(2316)(i)}catch(l){}},9734:(t,e,n)=>{"use strict";var i={};n.r(i),n.d(i,{JsonPatchError:()=>$D,_areEquals:()=>YD,applyOperation:()=>qD,applyPatch:()=>HD,applyReducer:()=>WD,deepClone:()=>zD,getValueByPointer:()=>VD,validate:()=>XD,validator:()=>GD});var r={};n.r(r),n.d(r,{compare:()=>iS,generate:()=>eS,observe:()=>tS,unobserve:()=>JD});var s={};function o(t){return"function"==typeof t}n.r(s),n.d(s,{dark:()=>cS,excel:()=>dS,fivethirtyeight:()=>yS,ggplot2:()=>_S,googlecharts:()=>zS,latimes:()=>ES,quartz:()=>SS,urbaninstitute:()=>IS,version:()=>jS,vox:()=>OS});let a=!1;const l={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else a&&console.log("RxJS: Back to a better error behavior. Thank you. <3");a=t},get useDeprecatedSynchronousErrorHandling(){return a}};function u(t){setTimeout(()=>{throw t},0)}const c={closed:!0,next(t){},error(t){if(l.useDeprecatedSynchronousErrorHandling)throw t;u(t)},complete(){}},h=Array.isArray||(t=>t&&"number"==typeof t.length);function d(t){return null!==t&&"object"==typeof t}const f=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();class p{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:e,_ctorUnsubscribe:n,_unsubscribe:i,_subscriptions:r}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,e instanceof p)e.remove(this);else if(null!==e)for(let o=0;o<e.length;++o)e[o].remove(this);if(o(i)){n&&(this._unsubscribe=void 0);try{i.call(this)}catch(s){t=s instanceof f?m(s.errors):[s]}}if(h(r)){let e=-1,n=r.length;for(;++e<n;){const n=r[e];if(d(n))try{n.unsubscribe()}catch(s){t=t||[],s instanceof f?t=t.concat(m(s.errors)):t.push(s)}}}if(t)throw new f(t)}add(t){let e=t;if(!t)return p.EMPTY;switch(typeof t){case"function":e=new p(t);case"object":if(e===this||e.closed||"function"!=typeof e.unsubscribe)return e;if(this.closed)return e.unsubscribe(),e;if(!(e instanceof p)){const t=e;e=new p,e._subscriptions=[t]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:n}=e;if(null===n)e._parentOrParents=this;else if(n instanceof p){if(n===this)return e;e._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return e;n.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[e]:i.push(e),e}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}function m(t){return t.reduce((t,e)=>t.concat(e instanceof f?e.errors:e),[])}p.EMPTY=function(t){return t.closed=!0,t}(new p);const g="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class y extends p{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=c;break;case 1:if(!t){this.destination=c;break}if("object"==typeof t){t instanceof y?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new v(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new v(this,t,e,n)}}[g](){return this}static create(t,e,n){const i=new y(t,e,n);return i.syncErrorThrowable=!1,i}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class v extends y{constructor(t,e,n,i){let r;super(),this._parentSubscriber=t;let s=this;o(e)?r=e:e&&(r=e.next,n=e.error,i=e.complete,e!==c&&(s=Object.create(e),o(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=r,this._error=n,this._complete=i}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;l.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=l;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):u(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;u(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);l.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),l.useDeprecatedSynchronousErrorHandling)throw n;u(n)}}__tryOrSetError(t,e,n){if(!l.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(i){return l.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=i,t.syncErrorThrown=!0,!0):(u(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const _="function"==typeof Symbol&&Symbol.observable||"@@observable";function b(t){return t}let x=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:i}=this,r=function(t,e,n){if(t){if(t instanceof y)return t;if(t[g])return t[g]()}return t||e||n?new y(t,e,n):new y(c)}(t,e,n);if(r.add(i?i.call(r,this.source):this.source||l.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),l.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r}_trySubscribe(t){try{return this._subscribe(t)}catch(e){l.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof y?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=w(e))((e,n)=>{let i;i=this.subscribe(e=>{try{t(e)}catch(r){n(r),i&&i.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[_](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?b:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=w(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function w(t){if(t||(t=l.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const C=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class A extends p{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class E extends y{constructor(t){super(t),this.destination=t}}let k=(()=>{class t extends x{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[g](){return new E(this)}lift(t){const e=new D(this,this);return e.operator=t,e}next(t){if(this.closed)throw new C;if(!this.isStopped){const{observers:e}=this,n=e.length,i=e.slice();for(let r=0;r<n;r++)i[r].next(t)}}error(t){if(this.closed)throw new C;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,i=e.slice();for(let r=0;r<n;r++)i[r].error(t);this.observers.length=0}complete(){if(this.closed)throw new C;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let i=0;i<e;i++)n[i].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new C;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new C;return this.hasError?(t.error(this.thrownError),p.EMPTY):this.isStopped?(t.complete(),p.EMPTY):(this.observers.push(t),new A(this,t))}asObservable(){const t=new x;return t.source=this,t}}return t.create=(t,e)=>new D(t,e),t})();class D extends k{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):p.EMPTY}}function S(t){return t&&"function"==typeof t.schedule}function F(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new O(t,e))}}class O{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new M(t,this.project,this.thisArg))}}class M extends y{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const T=t=>e=>{for(let n=0,i=t.length;n<i&&!e.closed;n++)e.next(t[n]);e.complete()},P="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",R=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function B(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const I=t=>{if(t&&"function"==typeof t[_])return n=t,t=>{const e=n[_]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(R(t))return T(t);if(B(t))return(t=>e=>(t.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,u),e))(t);if(t&&"function"==typeof t[P])return e=t,t=>{const n=e[P]();for(;;){let e;try{e=n.next()}catch(i){return t.error(i),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=d(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n};function N(t,e){return new x(n=>{const i=new p;let r=0;return i.add(e.schedule(function(){r!==t.length?(n.next(t[r++]),n.closed||i.add(this.schedule())):n.complete()})),i})}function L(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[_]}(t))return function(t,e){return new x(n=>{const i=new p;return i.add(e.schedule(()=>{const r=t[_]();i.add(r.subscribe({next(t){i.add(e.schedule(()=>n.next(t)))},error(t){i.add(e.schedule(()=>n.error(t)))},complete(){i.add(e.schedule(()=>n.complete()))}}))})),i})}(t,e);if(B(t))return function(t,e){return new x(n=>{const i=new p;return i.add(e.schedule(()=>t.then(t=>{i.add(e.schedule(()=>{n.next(t),i.add(e.schedule(()=>n.complete()))}))},t=>{i.add(e.schedule(()=>n.error(t)))}))),i})}(t,e);if(R(t))return N(t,e);if(function(t){return t&&"function"==typeof t[P]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new x(n=>{const i=new p;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(()=>{r=t[P](),i.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=r.next();t=n.value,e=n.done}catch(i){return void n.error(i)}e?n.complete():(n.next(t),this.schedule())}))})),i})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof x?t:new x(I(t))}class $ extends y{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class z extends y{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function j(t,e){if(e.closed)return;if(t instanceof x)return t.subscribe(e);let n;try{n=I(t)(e)}catch(i){e.error(i)}return n}function U(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?i=>i.pipe(U((n,i)=>L(t(n,i)).pipe(F((t,r)=>e(n,t,i,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new V(t,n)))}class V{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new q(t,this.project,this.concurrent))}}class q extends z{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(e)}_innerSub(t){const e=new $(this),n=this.destination;n.add(e);const i=j(t,e);i!==e&&n.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function H(t=Number.POSITIVE_INFINITY){return U(b,t)}function W(t,e){return e?N(t,e):new x(T(t))}function G(...t){let e=Number.POSITIVE_INFINITY,n=null,i=t[t.length-1];return S(i)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof i&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof x?t[0]:H(e)(W(t,n))}function X(){return function(t){return t.lift(new Y(t))}}class Y{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const i=new K(t,n),r=e.subscribe(i);return i.closed||(i.connection=n.connect()),r}}class K extends y{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,i=t._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}class Z extends x{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new p,t.add(this.source.subscribe(new J(this.getSubject(),this))),t.closed&&(this._connection=null,t=p.EMPTY)),t}refCount(){return X()(this)}}const Q=(()=>{const t=Z.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class J extends E{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function tt(){return new k}function et(){return t=>{return X()((e=tt,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,Q);return i.source=t,i.subjectFactory=n,i})(t));var e}}function nt(t){for(let e in t)if(t[e]===nt)return e;throw Error("Could not find renamed property on target object.")}function it(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function rt(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(rt).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function st(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const ot=nt({__forward_ref__:nt});function at(t){return t.__forward_ref__=at,t.toString=function(){return rt(this())},t}function lt(t){return ut(t)?t():t}function ut(t){return"function"==typeof t&&t.hasOwnProperty(ot)&&t.__forward_ref__===at}class ct extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function ht(t){return"string"==typeof t?t:null==t?"":String(t)}function dt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ht(t)}function ft(t,e){const n=e?` in ${e}`:"";throw new ct("201",`No provider for ${dt(t)} found${n}`)}function pt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function mt(t){return{providers:t.providers||[],imports:t.imports||[]}}function gt(t){return yt(t,_t)||yt(t,xt)}function yt(t,e){return t.hasOwnProperty(e)?t[e]:null}function vt(t){return t&&(t.hasOwnProperty(bt)||t.hasOwnProperty(wt))?t[bt]:null}const _t=nt({"\u0275prov":nt}),bt=nt({"\u0275inj":nt}),xt=nt({ngInjectableDef:nt}),wt=nt({ngInjectorDef:nt});var Ct=(()=>((Ct=Ct||{})[Ct.Default=0]="Default",Ct[Ct.Host=1]="Host",Ct[Ct.Self=2]="Self",Ct[Ct.SkipSelf=4]="SkipSelf",Ct[Ct.Optional=8]="Optional",Ct))();let At;function Et(t){const e=At;return At=t,e}function kt(t,e,n){const i=gt(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&Ct.Optional?null:void 0!==e?e:void ft(rt(t),"Injector")}function Dt(t){return{toString:t}.toString()}var St=(()=>((St=St||{})[St.OnPush=0]="OnPush",St[St.Default=1]="Default",St))(),Ft=(()=>((Ft=Ft||{})[Ft.Emulated=0]="Emulated",Ft[Ft.None=2]="None",Ft[Ft.ShadowDom=3]="ShadowDom",Ft))();const Ot="undefined"!=typeof globalThis&&globalThis,Mt="undefined"!=typeof window&&window,Tt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Pt="undefined"!=typeof global&&global,Rt=Ot||Pt||Mt||Tt,Bt={},It=[],Nt=nt({"\u0275cmp":nt}),Lt=nt({"\u0275dir":nt}),$t=nt({"\u0275pipe":nt}),zt=nt({"\u0275mod":nt}),jt=nt({"\u0275loc":nt}),Ut=nt({"\u0275fac":nt}),Vt=nt({__NG_ELEMENT_ID__:nt});let qt=0;function Ht(t){return Dt(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===St.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||It,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Ft.Emulated,id:"c",styles:t.styles||It,_:null,setInput:null,schemas:t.schemas||null,tView:null},i=t.directives,r=t.features,s=t.pipes;return n.id+=qt++,n.inputs=Kt(t.inputs,e),n.outputs=Kt(t.outputs),r&&r.forEach(t=>t(n)),n.directiveDefs=i?()=>("function"==typeof i?i():i).map(Wt):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(Gt):null,n})}function Wt(t){return Jt(t)||function(t){return t[Lt]||null}(t)}function Gt(t){return function(t){return t[$t]||null}(t)}const Xt={};function Yt(t){return Dt(()=>{const e={type:t.type,bootstrap:t.bootstrap||It,declarations:t.declarations||It,imports:t.imports||It,exports:t.exports||It,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Xt[t.id]=t.type),e})}function Kt(t,e){if(null==t)return Bt;const n={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),n[r]=i,e&&(e[r]=s)}return n}const Zt=Ht;function Qt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Jt(t){return t[Nt]||null}function te(t,e){const n=t[zt]||null;if(!n&&!0===e)throw new Error(`Type ${rt(t)} does not have '\u0275mod' property.`);return n}const ee=20,ne=10;function ie(t){return Array.isArray(t)&&"object"==typeof t[1]}function re(t){return Array.isArray(t)&&!0===t[1]}function se(t){return 0!=(8&t.flags)}function oe(t){return 2==(2&t.flags)}function ae(t){return 1==(1&t.flags)}function le(t){return null!==t.template}function ue(t,e){return t.hasOwnProperty(Ut)?t[Ut]:null}class ce{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function he(){return de}function de(t){return t.type.prototype.ngOnChanges&&(t.setInput=pe),fe}function fe(){const t=me(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===Bt)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function pe(t,e,n,i){const r=me(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:Bt,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[n],l=o[a];s[a]=new ce(l&&l.currentValue,e,o===Bt),t[i]=e}function me(t){return t.__ngSimpleChanges__||null}he.ngInherit=!0;const ge="http://www.w3.org/2000/svg";let ye;function ve(t){return!!t.listen}const _e={createRenderer:(t,e)=>void 0!==ye?ye:"undefined"!=typeof document?document:void 0};function be(t){for(;Array.isArray(t);)t=t[0];return t}function xe(t,e){return be(e[t])}function we(t,e){return be(e[t.index])}function Ce(t,e){return t.data[e]}function Ae(t,e){return t[e]}function Ee(t,e){const n=e[t];return ie(n)?n:n[0]}function ke(t){return 4==(4&t[2])}function De(t){return 128==(128&t[2])}function Se(t,e){return null==e?null:t[e]}function Fe(t){t[18]=0}function Oe(t,e){t[5]+=e;let n=t,i=t[3];for(;null!==i&&(1===e&&1===n[5]||-1===e&&0===n[5]);)i[5]+=e,n=i,i=i[3]}const Me={lFrame:en(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Te(){return Me.bindingsEnabled}function Pe(){return Me.lFrame.lView}function Re(){return Me.lFrame.tView}function Be(t){return Me.lFrame.contextLView=t,t[8]}function Ie(){let t=Ne();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ne(){return Me.lFrame.currentTNode}function Le(t,e){const n=Me.lFrame;n.currentTNode=t,n.isParent=e}function $e(){return Me.lFrame.isParent}function ze(){Me.lFrame.isParent=!1}function je(){return Me.isInCheckNoChangesMode}function Ue(t){Me.isInCheckNoChangesMode=t}function Ve(){const t=Me.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function qe(){return Me.lFrame.bindingIndex++}function He(t){const e=Me.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function We(t,e){const n=Me.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ge(e)}function Ge(t){Me.lFrame.currentDirectiveIndex=t}function Xe(t){const e=Me.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function Ye(){return Me.lFrame.currentQueryIndex}function Ke(t){Me.lFrame.currentQueryIndex=t}function Ze(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Qe(t,e,n){if(n&Ct.SkipSelf){let i=e,r=t;for(;i=i.parent,!(null!==i||n&Ct.Host||(i=Ze(r),null===i)||(r=r[15],10&i.type)););if(null===i)return!1;e=i,t=r}const i=Me.lFrame=tn();return i.currentTNode=e,i.lView=t,!0}function Je(t){const e=tn(),n=t[1];Me.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function tn(){const t=Me.lFrame,e=null===t?null:t.child;return null===e?en(t):e}function en(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function nn(){const t=Me.lFrame;return Me.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const rn=nn;function sn(){const t=nn();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function on(){return Me.lFrame.selectedIndex}function an(t){Me.lFrame.selectedIndex=t}function ln(){const t=Me.lFrame;return Ce(t.tView,t.selectedIndex)}function un(){Me.lFrame.currentNamespace=ge}function cn(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:i,ngAfterContentChecked:r,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=e;i&&(t.contentHooks||(t.contentHooks=[])).push(-n,i),r&&((t.contentHooks||(t.contentHooks=[])).push(n,r),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,r)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),o&&((t.viewHooks||(t.viewHooks=[])).push(n,o),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,o)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function hn(t,e,n){pn(t,e,3,n)}function dn(t,e,n,i){(3&t[2])===n&&pn(t,e,n,i)}function fn(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function pn(t,e,n,i){const r=null!=i?i:-1,s=e.length-1;let o=0;for(let a=void 0!==i?65535&t[18]:0;a<s;a++)if("number"==typeof e[a+1]){if(o=e[a],null!=i&&o>=i)break}else e[a]<0&&(t[18]+=65536),(o<r||-1==r)&&(mn(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function mn(t,e,n,i){const r=n[i]<0,s=n[i+1],o=t[r?-n[i]:n[i]];if(r){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}const gn=-1;class yn{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function vn(t,e,n){const i=ve(t);let r=0;for(;r<n.length;){const s=n[r];if("number"==typeof s){if(0!==s)break;r++;const o=n[r++],a=n[r++],l=n[r++];i?t.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=n[++r];bn(o)?i&&t.setProperty(e,o,a):i?t.setAttribute(e,o,a):e.setAttribute(o,a),r++}}return r}function _n(t){return 3===t||4===t||6===t}function bn(t){return 64===t.charCodeAt(0)}function xn(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?n=r:0===n||wn(t,n,r,null,-1===n||2===n?e[++i]:null)}}return t}function wn(t,e,n,i,r){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const n=t[s++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=s-1;break}}}for(;s<t.length;){const e=t[s];if("number"==typeof e)break;if(e===n){if(null===i)return void(null!==r&&(t[s+1]=r));if(i===t[s+1])return void(t[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==i&&t.splice(s++,0,i),null!==r&&t.splice(s++,0,r)}function Cn(t){return t!==gn}function An(t){return 32767&t}function En(t,e){let n=t>>16,i=e;for(;n>0;)i=i[15],n--;return i}let kn=!0;function Dn(t){const e=kn;return kn=t,e}let Sn=0;function Fn(t,e){const n=Mn(t,e);if(-1!==n)return n;const i=e[1];i.firstCreatePass&&(t.injectorIndex=e.length,On(i.data,t),On(e,null),On(i.blueprint,null));const r=Tn(t,e),s=t.injectorIndex;if(Cn(r)){const t=An(r),n=En(r,e),i=n[1].data;for(let r=0;r<8;r++)e[s+r]=n[t+r]|i[t+r]}return e[s+8]=r,s}function On(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Mn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Tn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;null!==r;){const t=r[1],e=t.type;if(i=2===e?t.declTNode:1===e?r[6]:null,null===i)return gn;if(n++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return gn}function Pn(t,e,n){!function(t,e,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty(Vt)&&(i=n[Vt]),null==i&&(i=n[Vt]=Sn++);const r=255&i;e.data[t+(r>>5)]|=1<<r}(t,e,n)}function Rn(t,e,n){if(n&Ct.Optional)return t;ft(e,"NodeInjector")}function Bn(t,e,n,i){if(n&Ct.Optional&&void 0===i&&(i=null),0==(n&(Ct.Self|Ct.Host))){const r=t[9],s=Et(void 0);try{return r?r.get(e,i,n&Ct.Optional):kt(e,i,n&Ct.Optional)}finally{Et(s)}}return Rn(i,e,n)}function In(t,e,n,i=Ct.Default,r){if(null!==t){const s=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Vt)?t[Vt]:void 0;return"number"==typeof e?e>=0?255&e:Ln:e}(n);if("function"==typeof s){if(!Qe(e,t,i))return i&Ct.Host?Rn(r,n,i):Bn(e,n,i,r);try{const t=s(i);if(null!=t||i&Ct.Optional)return t;ft(n)}finally{rn()}}else if("number"==typeof s){let r=null,o=Mn(t,e),a=gn,l=i&Ct.Host?e[16][6]:null;for((-1===o||i&Ct.SkipSelf)&&(a=-1===o?Tn(t,e):e[o+8],a!==gn&&Vn(i,!1)?(r=e[1],o=An(a),e=En(a,e)):o=-1);-1!==o;){const t=e[1];if(Un(s,o,t.data)){const t=$n(o,e,n,r,i,l);if(t!==Nn)return t}a=e[o+8],a!==gn&&Vn(i,e[1].data[o+8]===l)&&Un(s,o,e)?(r=t,o=An(a),e=En(a,e)):o=-1}}}return Bn(e,n,i,r)}const Nn={};function Ln(){return new qn(Ie(),Pe())}function $n(t,e,n,i,r,s){const o=e[1],a=o.data[t+8],l=zn(a,o,n,null==i?oe(a)&&kn:i!=o&&0!=(3&a.type),r&Ct.Host&&s===a);return null!==l?jn(e,o,l,a):Nn}function zn(t,e,n,i,r){const s=t.providerIndexes,o=e.data,a=1048575&s,l=t.directiveStart,u=s>>20,c=r?a+u:t.directiveEnd;for(let h=i?a:a+u;h<c;h++){const t=o[h];if(h<l&&n===t||h>=l&&t.type===n)return h}if(r){const t=o[l];if(t&&le(t)&&t.type===n)return l}return null}function jn(t,e,n,i){let r=t[n];const s=e.data;if(r instanceof yn){const o=r;o.resolving&&function(t,e){throw new ct("200",`Circular dependency in DI detected for ${t}`)}(dt(s[n]));const a=Dn(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Et(o.injectImpl):null;Qe(t,i,Ct.Default);try{r=t[n]=o.factory(void 0,s,t,i),e.firstCreatePass&&n>=i.directiveStart&&function(t,e,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const i=de(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,i)}r&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,r),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==l&&Et(l),Dn(a),o.resolving=!1,rn()}}return r}function Un(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Vn(t,e){return!(t&Ct.Self||t&Ct.Host&&e)}class qn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return In(this._tNode,this._lView,t,void 0,e)}}function Hn(t){return Dt(()=>{const e=t.prototype.constructor,n=e[Ut]||Wn(e),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const t=r[Ut]||Wn(r);if(t&&t!==n)return t;r=Object.getPrototypeOf(r)}return t=>new t})}function Wn(t){return ut(t)?()=>{const e=Wn(lt(t));return e&&e()}:ue(t)}function Gn(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let i=0;for(;i<t;){const r=n[i];if(_n(r))break;if(0===r)i+=2;else if("number"==typeof r)for(i++;i<t&&"string"==typeof n[i];)i++;else{if(r===e)return n[i+1];i+=2}}}return null}(Ie(),t)}const Xn="__parameters__";function Yn(t,e,n){return Dt(()=>{const i=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function r(...t){if(this instanceof r)return i.apply(this,t),this;const e=new r(...t);return n.annotation=e,n;function n(t,n,i){const r=t.hasOwnProperty(Xn)?t[Xn]:Object.defineProperty(t,Xn,{value:[]})[Xn];for(;r.length<=i;)r.push(null);return(r[i]=r[i]||[]).push(e),t}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}class Kn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=pt({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Zn=new Kn("AnalyzeForEntryComponents"),Qn=Function;function Jn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let i=t[n];Array.isArray(i)?(e===t&&(e=t.slice(0,n)),Jn(i,e)):e!==t&&e.push(i)}return e}function ti(t,e){t.forEach(t=>Array.isArray(t)?ti(t,e):e(t))}function ei(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ni(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function ii(t,e){const n=[];for(let i=0;i<t;i++)n.push(e);return n}function ri(t,e,n){let i=oi(t,e);return i>=0?t[1|i]=n:(i=~i,function(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(1===r)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;)t[r]=t[r-2],r--;t[e]=n,t[e+1]=i}}(t,i,e,n)),i}function si(t,e){const n=oi(t,e);if(n>=0)return t[1|n]}function oi(t,e){return function(t,e,n){let i=0,r=t.length>>1;for(;r!==i;){const n=i+(r-i>>1),s=t[n<<1];if(e===s)return n<<1;s>e?r=n:i=n+1}return~(r<<1)}(t,e)}const ai={},li=/\n/gm,ui="__source",ci=nt({provide:String,useValue:nt});let hi;function di(t){const e=hi;return hi=t,e}function fi(t,e=Ct.Default){if(void 0===hi)throw new Error("inject() must be called from an injection context");return null===hi?kt(t,void 0,e):hi.get(t,e&Ct.Optional?null:void 0,e)}function pi(t,e=Ct.Default){return(At||fi)(lt(t),e)}const mi=pi;function gi(t){const e=[];for(let n=0;n<t.length;n++){const i=lt(t[n]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let t,n=Ct.Default;for(let e=0;e<i.length;e++){const r=i[e],s=r.__NG_DI_FLAG__;"number"==typeof s?-1===s?t=r.token:n|=s:t=r}e.push(pi(t,n))}else e.push(pi(i))}return e}function yi(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const vi=yi(Yn("Inject",t=>({token:t})),-1),_i=yi(Yn("Optional"),8),bi=yi(Yn("SkipSelf"),4);let xi;function wi(t){var e;return(null===(e=function(){if(void 0===xi&&(xi=null,Rt.trustedTypes))try{xi=Rt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return xi}())||void 0===e?void 0:e.createHTML(t))||t}class Ci{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Ai extends Ci{getTypeName(){return"HTML"}}class Ei extends Ci{getTypeName(){return"Style"}}class ki extends Ci{getTypeName(){return"Script"}}class Di extends Ci{getTypeName(){return"URL"}}class Si extends Ci{getTypeName(){return"ResourceURL"}}function Fi(t){return t instanceof Ci?t.changingThisBreaksApplicationSecurity:t}function Oi(t,e){const n=Mi(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function Mi(t){return t instanceof Ci&&t.getTypeName()||null}class Ti{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(wi(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Pi{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=wi(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=wi(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let i=e.length-1;0<i;i--){const n=e.item(i).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Ri=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Bi=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ii(t){return(t=String(t)).match(Ri)||t.match(Bi)?t:"unsafe:"+t}function Ni(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Li(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const $i=Ni("area,br,col,hr,img,wbr"),zi=Ni("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ji=Ni("rp,rt"),Ui=Li(ji,zi),Vi=Li($i,Li(zi,Ni("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Li(ji,Ni("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Ui),qi=Ni("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Hi=Ni("srcset"),Wi=Li(qi,Hi,Ni("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ni("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Gi=Ni("script,style,template");class Xi{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Vi.hasOwnProperty(e))return this.sanitizedSomething=!0,!Gi.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let r=0;r<n.length;r++){const t=n.item(r),e=t.name,s=e.toLowerCase();if(!Wi.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=t.value;qi[s]&&(o=Ii(o)),Hi[s]&&(i=o,o=(i=String(i)).split(",").map(t=>Ii(t.trim())).join(", ")),this.buf.push(" ",e,'="',Zi(o),'"')}var i;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Vi.hasOwnProperty(e)&&!$i.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Zi(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const Yi=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ki=/([^\#-~ |!])/g;function Zi(t){return t.replace(/&/g,"&amp;").replace(Yi,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Ki,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Qi;function Ji(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var tr=(()=>((tr=tr||{})[tr.NONE=0]="NONE",tr[tr.HTML=1]="HTML",tr[tr.STYLE=2]="STYLE",tr[tr.SCRIPT=3]="SCRIPT",tr[tr.URL=4]="URL",tr[tr.RESOURCE_URL=5]="RESOURCE_URL",tr))();function er(t){const e=function(){const t=Pe();return t&&t[12]}();return e?e.sanitize(tr.URL,t)||"":Oi(t,"URL")?Fi(t):Ii(ht(t))}function nr(t,e){t.__ngContext__=e}function ir(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function rr(t){return t.ngOriginalError}function sr(t,...e){t.error(...e)}class or{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),i=function(t){return t&&t.ngErrorLogger||sr}(t);i(this._console,"ERROR",t),e&&i(this._console,"ORIGINAL ERROR",e),n&&i(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?function(t){return t.ngDebugContext}(t)||this._findContext(rr(t)):null}_findOriginalError(t){let e=t&&rr(t);for(;e&&rr(e);)e=rr(e);return e||null}}const ar=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Rt))();function lr(t){return t instanceof Function?t():t}var ur=(()=>((ur=ur||{})[ur.Important=1]="Important",ur[ur.DashCase=2]="DashCase",ur))();function cr(t,e){return(void 0)(t,e)}function hr(t){const e=t[3];return re(e)?e[3]:e}function dr(t){return pr(t[13])}function fr(t){return pr(t[4])}function pr(t){for(;null!==t&&!re(t);)t=t[4];return t}function mr(t,e,n,i,r){if(null!=i){let s,o=!1;re(i)?s=i:ie(i)&&(o=!0,i=i[0]);const a=be(i);0===t&&null!==n?null==r?Cr(e,n,a):wr(e,n,a,r||null,!0):1===t&&null!==n?wr(e,n,a,r||null,!0):2===t?function(t,e,n){const i=Er(t,e);i&&function(t,e,n,i){ve(t)?t.removeChild(e,n,i):e.removeChild(n)}(t,i,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function(t,e,n,i,r){const s=n[7];s!==be(n)&&mr(e,t,i,s,r);for(let o=ne;o<n.length;o++){const r=n[o];Pr(r[1],r,t,e,i,s)}}(e,t,s,n,r)}}function gr(t,e,n){return ve(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function yr(t,e){const n=t[9],i=n.indexOf(e),r=e[3];1024&e[2]&&(e[2]&=-1025,Oe(r,-1)),n.splice(i,1)}function vr(t,e){if(t.length<=ne)return;const n=ne+e,i=t[n];if(i){const s=i[17];null!==s&&s!==t&&yr(s,i),e>0&&(t[n-1][4]=i[4]);const o=ni(t,ne+e);Pr(i[1],r=i,r[11],2,null,null),r[0]=null,r[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),i[3]=null,i[4]=null,i[2]&=-129}var r;return i}function _r(t,e){if(!(256&e[2])){const n=e[11];ve(n)&&n.destroyNode&&Pr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return br(t[1],t);for(;e;){let n=null;if(ie(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ie(e)&&br(e[1],e),e=e[3];null===e&&(e=t),ie(e)&&br(e[1],e),n=e&&e[4]}e=n}}(e)}}function br(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let i=0;i<n.length;i+=2){const t=e[n[i]];if(!(t instanceof yn)){const e=n[i+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const i=t[e[n]],r=e[n+1];try{r.call(i)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,i=e[7];let r=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const t=n[s+1],o="function"==typeof t?t(e):be(e[t]),a=i[r=n[s+2]],l=n[s+3];"boolean"==typeof l?o.removeEventListener(n[s],a,l):l>=0?i[r=l]():i[r=-l].unsubscribe(),s+=2}else{const t=i[r=n[s+1]];n[s].call(t)}if(null!==i){for(let t=r+1;t<i.length;t++)(0,i[t])();e[7]=null}}(t,e),1===e[1].type&&ve(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&re(e[3])){n!==e[3]&&yr(n,e);const i=e[19];null!==i&&i.detachView(t)}}}function xr(t,e,n){return function(t,e,n){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return n[0];if(2&i.flags){const e=t.data[i.directiveStart].encapsulation;if(e===Ft.None||e===Ft.Emulated)return null}return we(i,n)}(t,e.parent,n)}function wr(t,e,n,i,r){ve(t)?t.insertBefore(e,n,i,r):e.insertBefore(n,i,r)}function Cr(t,e,n){ve(t)?t.appendChild(e,n):e.appendChild(n)}function Ar(t,e,n,i,r){null!==i?wr(t,e,n,i,r):Cr(t,e,n)}function Er(t,e){return ve(t)?t.parentNode(e):e.parentNode}function kr(t,e,n){return Dr(t,e,n)}let Dr=function(t,e,n){return 40&t.type?we(t,n):null};function Sr(t,e,n,i){const r=xr(t,i,e),s=e[11],o=kr(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(n))for(let a=0;a<n.length;a++)Ar(s,r,n[a],o,!1);else Ar(s,r,n,o,!1)}function Fr(t,e){if(null!==e){const n=e.type;if(3&n)return we(e,t);if(4&n)return Mr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Fr(t,n);{const n=t[e.index];return re(n)?Mr(-1,n):be(n)}}if(32&n)return cr(e,t)()||be(t[e.index]);{const n=Or(t,e);return null!==n?Array.isArray(n)?n[0]:Fr(hr(t[16]),n):Fr(t,e.next)}}return null}function Or(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Mr(t,e){const n=ne+t+1;if(n<e.length){const t=e[n],i=t[1].firstChild;if(null!==i)return Fr(t,i)}return e[7]}function Tr(t,e,n,i,r,s,o){for(;null!=n;){const a=i[n.index],l=n.type;if(o&&0===e&&(a&&nr(be(a),i),n.flags|=4),64!=(64&n.flags))if(8&l)Tr(t,e,n.child,i,r,s,!1),mr(e,t,r,a,s);else if(32&l){const o=cr(n,i);let l;for(;l=o();)mr(e,t,r,l,s);mr(e,t,r,a,s)}else 16&l?Rr(t,e,i,n,r,s):mr(e,t,r,a,s);n=o?n.projectionNext:n.next}}function Pr(t,e,n,i,r,s){Tr(n,i,t.firstChild,e,r,s,!1)}function Rr(t,e,n,i,r,s){const o=n[16],a=o[6].projection[i.projection];if(Array.isArray(a))for(let l=0;l<a.length;l++)mr(e,t,r,a[l],s);else Tr(t,e,a,o[3],r,s,!0)}function Br(t,e,n){ve(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Ir(t,e,n){ve(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Nr(t,e,n){let i=t.length;for(;;){const r=t.indexOf(e,n);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const n=e.length;if(r+n===i||t.charCodeAt(r+n)<=32)return r}n=r+1}}const Lr="ng-template";function $r(t,e,n){let i=0;for(;i<t.length;){let r=t[i++];if(n&&"class"===r){if(r=t[i],-1!==Nr(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<t.length&&"string"==typeof(r=t[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function zr(t){return 4===t.type&&t.value!==Lr}function jr(t,e,n){return e===(4!==t.type||n?t.value:Lr)}function Ur(t,e,n){let i=4;const r=t.attrs||[],s=function(t){for(let e=0;e<t.length;e++)if(_n(t[e]))return e;return t.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!jr(t,l,n)||""===l&&1===e.length){if(Vr(i))return!1;o=!0}}else{const u=8&i?l:e[++a];if(8&i&&null!==t.attrs){if(!$r(t.attrs,u,n)){if(Vr(i))return!1;o=!0}continue}const c=qr(8&i?"class":l,r,zr(t),n);if(-1===c){if(Vr(i))return!1;o=!0;continue}if(""!==u){let t;t=c>s?"":r[c+1].toLowerCase();const e=8&i?t:null;if(e&&-1!==Nr(e,u,0)||2&i&&u!==t){if(Vr(i))return!1;o=!0}}}}else{if(!o&&!Vr(i)&&!Vr(l))return!1;if(o&&Vr(l))continue;o=!1,i=l|1&i}}return Vr(i)||o}function Vr(t){return 0==(1&t)}function qr(t,e,n,i){if(null===e)return-1;let r=0;if(i||!n){let n=!1;for(;r<e.length;){const i=e[r];if(i===t)return r;if(3===i||6===i)n=!0;else{if(1===i||2===i){let t=e[++r];for(;"string"==typeof t;)t=e[++r];continue}if(4===i)break;if(0===i){r+=4;continue}}r+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const i=t[n];if("number"==typeof i)return-1;if(i===e)return n;n++}return-1}(e,t)}function Hr(t,e,n=!1){for(let i=0;i<e.length;i++)if(Ur(t,e[i],n))return!0;return!1}function Wr(t,e){t:for(let n=0;n<e.length;n++){const i=e[n];if(t.length===i.length){for(let e=0;e<t.length;e++)if(t[e]!==i[e])continue t;return!0}}return!1}function Gr(t,e){return t?":not("+e.trim()+")":e}function Xr(t){let e=t[0],n=1,i=2,r="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&i){const e=t[++n];r+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""===r||Vr(o)||(e+=Gr(s,r),r=""),i=o,s=s||!Vr(i);n++}return""!==r&&(e+=Gr(s,r)),e}const Yr={};function Kr(t){Zr(Re(),Pe(),on()+t,je())}function Zr(t,e,n,i){if(!i)if(3==(3&e[2])){const i=t.preOrderCheckHooks;null!==i&&hn(e,i,n)}else{const i=t.preOrderHooks;null!==i&&dn(e,i,0,n)}an(n)}function Qr(t,e){return t<<17|e<<2}function Jr(t){return t>>17&32767}function ts(t){return 2|t}function es(t){return(131068&t)>>2}function ns(t,e){return-131069&t|e<<2}function is(t){return 1|t}function rs(t,e){const n=t.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const r=n[i],s=n[i+1];if(-1!==s){const n=t.data[s];Ke(r),n.contentQueries(2,e[s],s)}}}function ss(t,e,n,i,r,s,o,a,l,u){const c=e.blueprint.slice();return c[0]=r,c[2]=140|i,Fe(c),c[3]=c[15]=t,c[8]=n,c[10]=o||t&&t[10],c[11]=a||t&&t[11],c[12]=l||t&&t[12]||null,c[9]=u||t&&t[9]||null,c[6]=s,c[16]=2==e.type?t[16]:c,c}function os(t,e,n,i,r){let s=t.data[e];if(null===s)s=function(t,e,n,i,r){const s=Ne(),o=$e(),a=t.data[e]=function(t,e,n,i,r,s){return{type:n,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,i,r);return null===t.firstChild&&(t.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}(t,e,n,i,r),Me.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=i,s.attrs=r;const t=function(){const t=Me.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===t?-1:t.injectorIndex}return Le(s,!0),s}function as(t,e,n,i){if(0===n)return-1;const r=e.length;for(let s=0;s<n;s++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function ls(t,e,n){Je(e);try{const i=t.viewQuery;null!==i&&Ls(1,i,n);const r=t.template;null!==r&&hs(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&rs(t,e),t.staticViewQueries&&Ls(2,t.viewQuery,n);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)Ps(t,e[n])}(e,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),i}finally{e[2]&=-5,sn()}}function us(t,e,n,i){const r=e[2];if(256==(256&r))return;Je(e);const s=je();try{Fe(e),Me.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&hs(t,e,n,2,i);const o=3==(3&r);if(!s)if(o){const n=t.preOrderCheckHooks;null!==n&&hn(e,n,null)}else{const n=t.preOrderHooks;null!==n&&dn(e,n,0,null),fn(e,0)}if(function(t){for(let e=dr(t);null!==e;e=fr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],i=n[3];0==(1024&n[2])&&Oe(i,1),n[2]|=1024}}}(e),function(t){for(let e=dr(t);null!==e;e=fr(e))for(let t=ne;t<e.length;t++){const n=e[t],i=n[1];De(n)&&us(i,n,i.template,n[8])}}(e),null!==t.contentQueries&&rs(t,e),!s)if(o){const n=t.contentCheckHooks;null!==n&&hn(e,n)}else{const n=t.contentHooks;null!==n&&dn(e,n,1),fn(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const i=n[t];if(i<0)an(~i);else{const r=i,s=n[++t],o=n[++t];We(s,r),o(2,e[r])}}}finally{an(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Ms(t,e[n])}(e,a);const l=t.viewQuery;if(null!==l&&Ls(2,l,i),!s)if(o){const n=t.viewCheckHooks;null!==n&&hn(e,n)}else{const n=t.viewHooks;null!==n&&dn(e,n,2),fn(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Oe(e[3],-1))}finally{sn()}}function cs(t,e,n,i){const r=e[10],s=!je(),o=ke(e);try{s&&!o&&r.begin&&r.begin(),o&&ls(t,e,i),us(t,e,n,i)}finally{s&&!o&&r.end&&r.end()}}function hs(t,e,n,i,r){const s=on(),o=2&i;try{an(-1),o&&e.length>ee&&Zr(t,e,ee,je()),n(i,r)}finally{an(s)}}function ds(t,e,n){if(se(e)){const i=e.directiveEnd;for(let r=e.directiveStart;r<i;r++){const e=t.data[r];e.contentQueries&&e.contentQueries(1,n[r],r)}}}function fs(t,e,n){Te()&&(function(t,e,n,i){const r=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||Fn(n,e),nr(i,e);const o=n.initialInputs;for(let a=r;a<s;a++){const i=t.data[a],s=le(i);s&&Ds(e,n,i);const l=jn(e,t,a,n);nr(l,e),null!==o&&Ss(0,a-r,l,i,0,o),s&&(Ee(n.index,e)[8]=l)}}(t,e,n,we(n,e)),128==(128&n.flags)&&function(t,e,n){const i=n.directiveStart,r=n.directiveEnd,s=n.index,o=Me.lFrame.currentDirectiveIndex;try{an(s);for(let n=i;n<r;n++){const i=t.data[n],r=e[n];Ge(n),null===i.hostBindings&&0===i.hostVars&&null===i.hostAttrs||ws(i,r)}}finally{an(-1),Ge(o)}}(t,e,n))}function ps(t,e,n=we){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?n(e,t):t[o];t[r++]=a}}}function ms(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=gs(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function gs(t,e,n,i,r,s,o,a,l,u){const c=ee+i,h=c+r,d=function(t,e){const n=[];for(let i=0;i<e;i++)n.push(i<t?null:Yr);return n}(c,h),f="function"==typeof u?u():u;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function ys(t,e,n,i){const r=zs(e);null===n?r.push(i):(r.push(n),t.firstCreatePass&&js(t).push(i,r.length-1))}function vs(t,e,n){for(let i in t)if(t.hasOwnProperty(i)){const r=t[i];(n=null===n?{}:n).hasOwnProperty(i)?n[i].push(e,r):n[i]=[e,r]}return n}function _s(t,e,n,i,r,s,o,a){const l=we(e,n);let u,c=e.inputs;var h;!a&&null!=c&&(u=c[i])?(qs(t,n,u,i,r),oe(e)&&function(t,e){const n=Ee(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(i="class"===(h=i)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,r=null!=o?o(r,e.value||"",i):r,ve(s)?s.setProperty(l,i,r):bn(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function bs(t,e,n,i){let r=!1;if(Te()){const s=function(t,e,n){const i=t.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];Hr(n,o.selectors,!1)&&(r||(r=[]),Pn(Fn(n,e),t,o.type),le(o)?(Cs(t,n),r.unshift(o)):r.push(o))}return r}(t,e,n),o=null===i?null:{"":-1};if(null!==s){r=!0,Es(n,t.data.length,s.length);for(let t=0;t<s.length;t++){const e=s[t];e.providersResolver&&e.providersResolver(e)}let i=!1,a=!1,l=as(t,e,s.length,null);for(let r=0;r<s.length;r++){const u=s[r];n.mergedAttrs=xn(n.mergedAttrs,u.hostAttrs),ks(t,n,e,l,u),As(l,u,o),null!==u.contentQueries&&(n.flags|=8),null===u.hostBindings&&null===u.hostAttrs&&0===u.hostVars||(n.flags|=128);const c=u.type.prototype;!i&&(c.ngOnChanges||c.ngOnInit||c.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),i=!0),a||!c.ngOnChanges&&!c.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function(t,e){const n=e.directiveEnd,i=t.data,r=e.attrs,s=[];let o=null,a=null;for(let l=e.directiveStart;l<n;l++){const t=i[l],n=t.inputs,u=null===r||zr(e)?null:Fs(n,r);s.push(u),o=vs(n,l,o),a=vs(t.outputs,l,a)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=o,e.outputs=a}(t,n)}o&&function(t,e,n){if(e){const i=t.localNames=[];for(let t=0;t<e.length;t+=2){const r=n[e[t+1]];if(null==r)throw new ct("301",`Export of name '${e[t+1]}' not found!`);i.push(e[t],r)}}}(n,i,o)}return n.mergedAttrs=xn(n.mergedAttrs,n.attrs),r}function xs(t,e,n,i,r,s){const o=s.hostBindings;if(o){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const s=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(i,r,o)}}function ws(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Cs(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function As(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;le(e)&&(n[""]=t)}}function Es(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ks(t,e,n,i,r){t.data[i]=r;const s=r.factory||(r.factory=ue(r.type)),o=new yn(s,le(r),null);t.blueprint[i]=o,n[i]=o,xs(t,e,0,i,as(t,n,r.hostVars,Yr),r)}function Ds(t,e,n){const i=we(e,t),r=ms(n),s=t[10],o=Rs(t,ss(t,r,null,n.onPush?64:16,i,e,s,s.createRenderer(i,n),null,null));t[e.index]=o}function Ss(t,e,n,i,r,s){const o=s[e];if(null!==o){const t=i.setInput;for(let e=0;e<o.length;){const r=o[e++],s=o[e++],a=o[e++];null!==t?i.setInput(n,a,r,s):n[s]=a}}}function Fs(t,e){let n=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;t.hasOwnProperty(r)&&(null===n&&(n=[]),n.push(r,t[r],e[i+1])),i+=2}else i+=2;else i+=4}return n}function Os(t,e,n,i){return new Array(t,!0,!1,e,null,0,i,n,null,null)}function Ms(t,e){const n=Ee(e,t);if(De(n)){const t=n[1];80&n[2]?us(t,n,t.template,n[8]):n[5]>0&&Ts(n)}}function Ts(t){for(let n=dr(t);null!==n;n=fr(n))for(let t=ne;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];us(t,e,t.template,e[8])}else e[5]>0&&Ts(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const i=Ee(e[n],t);De(i)&&i[5]>0&&Ts(i)}}function Ps(t,e){const n=Ee(e,t),i=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(i,n),ls(i,n,n[8])}function Rs(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Bs(t){for(;t;){t[2]|=64;const e=hr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Is(t,e,n){const i=e[10];i.begin&&i.begin();try{us(t,e,t.template,n)}catch(r){throw Vs(e,r),r}finally{i.end&&i.end()}}function Ns(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],i=ir(n),r=i[1];cs(r,i,r.template,n)}}(t[8])}function Ls(t,e,n){Ke(0),e(t,n)}const $s=(()=>Promise.resolve(null))();function zs(t){return t[7]||(t[7]=[])}function js(t){return t.cleanup||(t.cleanup=[])}function Us(t,e,n){return(null===t||le(t))&&(n=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(n[e.index])),n[11]}function Vs(t,e){const n=t[9],i=n?n.get(or,null):null;i&&i.handleError(e)}function qs(t,e,n,i,r){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],l=e[o],u=t.data[o];null!==u.setInput?u.setInput(l,r,i,a):l[a]=r}}function Hs(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?s=t:1==s?r=st(r,t):2==s&&(i=st(i,t+": "+e[++o]+";"))}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}const Ws=new Kn("INJECTOR",-1);class Gs{get(t,e=ai){if(e===ai){const e=new Error(`NullInjectorError: No provider for ${rt(t)}!`);throw e.name="NullInjectorError",e}return e}}const Xs=new Kn("Set Injector scope."),Ys={},Ks={};let Zs;function Qs(){return void 0===Zs&&(Zs=new Gs),Zs}function Js(t,e=null,n=null,i){return new to(t,n,e||Qs(),i)}class to{constructor(t,e,n,i=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const r=[];e&&ti(e,n=>this.processProvider(n,t,e)),ti([t],t=>this.processInjectorType(t,[],r)),this.records.set(Ws,io(void 0,this));const s=this.records.get(Xs);this.scope=null!=s?s.value:null,this.source=i||("object"==typeof t?null:rt(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=ai,n=Ct.Default){this.assertNotDestroyed();const i=di(this),r=Et(void 0);try{if(!(n&Ct.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(s=t)||"object"==typeof s&&s instanceof Kn)&&gt(t);e=n&&this.injectableDefInScope(n)?io(eo(t),Ys):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&Ct.Self?Qs():this.parent).get(t,e=n&Ct.Optional&&e===ai?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(rt(t)),i)throw o;return function(t,e,n,i){const r=t.ngTempTokenPath;throw e[ui]&&r.unshift(e[ui]),t.message=function(t,e,n,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let r=rt(e);if(Array.isArray(e))r=e.map(rt).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let i=e[n];t.push(n+":"+("string"==typeof i?JSON.stringify(i):rt(i)))}r=`{${t.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(li,"\n  ")}`}("\n"+t.message,r,n,i),t.ngTokenPath=r,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{Et(r),di(i)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(rt(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=lt(t)))return!1;let i=vt(t);const r=null==i&&t.ngModule||void 0,s=void 0===r?t:r,o=-1!==n.indexOf(s);if(void 0!==r&&(i=vt(r)),null==i)return!1;if(null!=i.imports&&!o){let t;n.push(s);try{ti(i.imports,i=>{this.processInjectorType(i,e,n)&&(void 0===t&&(t=[]),t.push(i))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:i}=t[e];ti(i,t=>this.processProvider(t,n,i||It))}}this.injectorDefTypes.add(s);const a=ue(s)||(()=>new s);this.records.set(s,io(a,Ys));const l=i.providers;if(null!=l&&!o){const e=t;ti(l,t=>this.processProvider(t,e,l))}return void 0!==r&&void 0!==t.providers}processProvider(t,e,n){let i=so(t=lt(t))?t:lt(t&&t.provide);const r=function(t,e,n){return ro(t)?io(void 0,t.useValue):io(no(t),Ys)}(t);if(so(t)||!0!==t.multi)this.records.get(i);else{let e=this.records.get(i);e||(e=io(void 0,Ys,!0),e.factory=()=>gi(e.multi),this.records.set(i,e)),i=t,e.multi.push(t)}this.records.set(i,r)}hydrate(t,e){var n;return e.value===Ys&&(e.value=Ks,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=lt(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function eo(t){const e=gt(t),n=null!==e?e.factory:ue(t);if(null!==n)return n;if(t instanceof Kn)throw new Error(`Token ${rt(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=ii(e,"?");throw new Error(`Can't resolve all parameters for ${rt(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[_t]||t[xt]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function no(t,e,n){let i;if(so(t)){const e=lt(t);return ue(e)||eo(e)}if(ro(t))i=()=>lt(t.useValue);else if((r=t)&&r.useFactory)i=()=>t.useFactory(...gi(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))i=()=>pi(lt(t.useExisting));else{const e=lt(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return ue(e)||eo(e);i=()=>new e(...gi(t.deps))}var r;return i}function io(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ro(t){return null!==t&&"object"==typeof t&&ci in t}function so(t){return"function"==typeof t}const oo=function(t,e,n){return function(t,e=null,n=null,i){const r=Js(t,e,n,i);return r._resolveInjectorDefTypes(),r}({name:n},e,t,n)};class ao{static create(t,e){return Array.isArray(t)?oo(t,e,""):oo(t.providers,t.parent,t.name||"")}}function lo(t,e){cn(ir(t)[1],Ie())}function uo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const i=[t];for(;e;){let r;if(le(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");r=e.\u0275dir}if(r){if(n){i.push(r);const e=t;e.inputs=co(t.inputs),e.declaredInputs=co(t.declaredInputs),e.outputs=co(t.outputs);const n=r.hostBindings;n&&po(t,n);const s=r.viewQuery,o=r.contentQueries;if(s&&ho(t,s),o&&fo(t,o),it(t.inputs,r.inputs),it(t.declaredInputs,r.declaredInputs),it(t.outputs,r.outputs),le(r)&&r.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(r.data.animation)}}const e=r.features;if(e)for(let i=0;i<e.length;i++){const r=e[i];r&&r.ngInherit&&r(t),r===uo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=xn(r.hostAttrs,n=xn(n,r.hostAttrs))}}(i)}function co(t){return t===Bt?{}:t===It?[]:t}function ho(t,e){const n=t.viewQuery;t.viewQuery=n?(t,i)=>{e(t,i),n(t,i)}:e}function fo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,i,r)=>{e(t,i,r),n(t,i,r)}:e}function po(t,e){const n=t.hostBindings;t.hostBindings=n?(t,i)=>{e(t,i),n(t,i)}:e}ao.THROW_IF_NOT_FOUND=ai,ao.NULL=new Gs,ao.\u0275prov=pt({token:ao,providedIn:"any",factory:()=>pi(Ws)}),ao.__NG_ELEMENT_ID__=-1;let mo=null;function go(){if(!mo){const t=Rt.Symbol;if(t&&t.iterator)mo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(mo=n)}}}return mo}class yo{constructor(t){this.wrapped=t}static wrap(t){return new yo(t)}static unwrap(t){return yo.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof yo}}function vo(t){return!!_o(t)&&(Array.isArray(t)||!(t instanceof Map)&&go()in t)}function _o(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function bo(t,e,n){return t[e]=n}function xo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function wo(t,e,n,i){const r=Pe();return xo(r,qe(),e)&&(Re(),function(t,e,n,i,r,s){const o=we(t,e);!function(t,e,n,i,r,s,o){if(null==s)ve(t)?t.removeAttribute(e,r,n):e.removeAttribute(r);else{const a=null==o?ht(s):o(s,i||"",r);ve(t)?t.setAttribute(e,r,a,n):n?e.setAttributeNS(n,r,a):e.setAttribute(r,a)}}(e[11],o,s,t.value,n,i,r)}(ln(),r,t,e,n,i)),wo}function Co(t,e,n,i){return xo(t,qe(),n)?e+ht(n)+i:Yr}function Ao(t,e,n,i,r,s,o,a){const l=Pe(),u=Re(),c=t+ee,h=u.firstCreatePass?function(t,e,n,i,r,s,o,a,l){const u=e.consts,c=os(e,t,4,o||null,Se(u,a));bs(e,n,c,Se(u,l)),cn(e,c);const h=c.tViews=gs(2,c,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u);return null!==e.queries&&(e.queries.template(e,c),h.queries=e.queries.embeddedTView(c)),c}(c,u,l,e,n,i,r,s,o):u.data[c];Le(h,!1);const d=l[11].createComment("");Sr(u,l,d,h),nr(d,l),Rs(l,l[c]=Os(d,l,d,h)),ae(h)&&fs(u,l,h),null!=o&&ps(l,h,a)}function Eo(t){return Ae(Me.lFrame.contextLView,ee+t)}function ko(t,e=Ct.Default){const n=Pe();return null===n?pi(t,e):In(Ie(),n,lt(t),e)}function Do(t,e,n){const i=Pe();return xo(i,qe(),e)&&_s(Re(),ln(),i,t,e,i[11],n,!1),Do}function So(t,e,n,i,r){const s=r?"class":"style";qs(t,n,e.inputs[s],s,i)}function Fo(t,e,n,i){const r=Pe(),s=Re(),o=ee+t,a=r[11],l=r[o]=gr(a,e,Me.lFrame.currentNamespace),u=s.firstCreatePass?function(t,e,n,i,r,s,o){const a=e.consts,l=os(e,t,2,r,Se(a,s));return bs(e,n,l,Se(a,o)),null!==l.attrs&&Hs(l,l.attrs,!1),null!==l.mergedAttrs&&Hs(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,r,0,e,n,i):s.data[o];Le(u,!0);const c=u.mergedAttrs;null!==c&&vn(a,l,c);const h=u.classes;null!==h&&Ir(a,l,h);const d=u.styles;null!==d&&Br(a,l,d),64!=(64&u.flags)&&Sr(s,r,l,u),0===Me.lFrame.elementDepthCount&&nr(l,r),Me.lFrame.elementDepthCount++,ae(u)&&(fs(s,r,u),ds(s,u,r)),null!==i&&ps(r,u)}function Oo(){let t=Ie();$e()?ze():(t=t.parent,Le(t,!1));const e=t;Me.lFrame.elementDepthCount--;const n=Re();n.firstCreatePass&&(cn(n,t),se(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&So(n,e,Pe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&So(n,e,Pe(),e.stylesWithoutHost,!1)}function Mo(t,e,n,i){Fo(t,e,n,i),Oo()}function To(t,e,n){const i=Pe(),r=Re(),s=t+ee,o=r.firstCreatePass?function(t,e,n,i,r){const s=e.consts,o=Se(s,i),a=os(e,t,8,"ng-container",o);return null!==o&&Hs(a,o,!0),bs(e,n,a,Se(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,n):r.data[s];Le(o,!0);const a=i[s]=i[11].createComment("");Sr(r,i,a,o),nr(a,i),ae(o)&&(fs(r,i,o),ds(r,o,i)),null!=n&&ps(i,o)}function Po(){let t=Ie();const e=Re();$e()?ze():(t=t.parent,Le(t,!1)),e.firstCreatePass&&(cn(e,t),se(t)&&e.queries.elementEnd(t))}function Ro(){return Pe()}function Bo(t){return!!t&&"function"==typeof t.then}function Io(t){return!!t&&"function"==typeof t.subscribe}const No=Io;function Lo(t,e,n,i){const r=Pe(),s=Re(),o=Ie();return zo(s,r,r[11],o,t,e,!!n,i),Lo}function $o(t,e){const n=Ie(),i=Pe(),r=Re();return zo(r,i,Us(Xe(r.data),n,i),n,t,e,!1),$o}function zo(t,e,n,i,r,s,o,a){const l=ae(i),u=t.firstCreatePass&&js(t),c=zs(e);let h=!0;if(3&i.type||a){const d=we(i,e),f=a?a(d):d,p=c.length,m=a?t=>a(be(t[i.index])):i.index;if(ve(n)){let o=null;if(!a&&l&&(o=function(t,e,n,i){const r=t.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const t=r[s];if(t===n&&r[s+1]===i){const t=e[7],n=r[s+2];return t.length>n?t[n]:null}"string"==typeof t&&(s+=2)}return null}(t,e,r,i.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=Uo(i,e,0,s,!1);const t=n.listen(f,r,s);c.push(s,t),u&&u.push(r,m,p,p+1)}}else s=Uo(i,e,0,s,!0),f.addEventListener(r,s,o),c.push(s),u&&u.push(r,m,p,o)}else s=Uo(i,e,0,s,!1);const d=i.outputs;let f;if(h&&null!==d&&(f=d[r])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(s),o=c.length;c.push(s,t),u&&u.push(r,i.index,o,-(o+1))}}}function jo(t,e,n,i){try{return!1!==n(i)}catch(r){return Vs(t,r),!1}}function Uo(t,e,n,i,r){return function n(s){if(s===Function)return i;const o=2&t.flags?Ee(t.index,e):e;0==(32&e[2])&&Bs(o);let a=jo(e,0,i,s),l=n.__ngNextListenerFn__;for(;l;)a=jo(e,0,l,s)&&a,l=l.__ngNextListenerFn__;return r&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function Vo(t=1){return function(t){return(Me.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Me.lFrame.contextLView))[8]}(t)}function qo(t,e){let n=null;const i=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?Hr(t,s,!0):Wr(i,s))return r}else n=r}return n}function Ho(t){const e=Pe()[16][6];if(!e.projection){const n=e.projection=ii(t?t.length:1,null),i=n.slice();let r=e.child;for(;null!==r;){const e=t?qo(r,t):0;null!==e&&(i[e]?i[e].projectionNext=r:n[e]=r,i[e]=r),r=r.next}}}function Wo(t,e=0,n){const i=Pe(),r=Re(),s=os(r,ee+t,16,null,n||null);null===s.projection&&(s.projection=e),ze(),64!=(64&s.flags)&&function(t,e,n){Rr(e[11],0,e,n,xr(t,n,e),kr(n.parent||e[6],n,e))}(r,i,s)}function Go(t,e,n,i,r){const s=t[n+1],o=null===e;let a=i?Jr(s):es(s),l=!1;for(;0!==a&&(!1===l||o);){const n=t[a+1];Xo(t[a],e)&&(l=!0,t[a+1]=i?is(n):ts(n)),a=i?Jr(n):es(n)}l&&(t[n+1]=i?ts(s):is(s))}function Xo(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&oi(t,e)>=0}const Yo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Ko(t){return t.substring(Yo.key,Yo.keyEnd)}function Zo(t,e){const n=Yo.textEnd;return n===e?-1:(e=Yo.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,Yo.key=e,n),Qo(t,e,n))}function Qo(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Jo(t,e,n){return ia(t,e,n,!1),Jo}function ta(t,e){return ia(t,e,null,!0),ta}function ea(t){ra(ri,na,t,!0)}function na(t,e){for(let n=function(t){return function(t){Yo.key=0,Yo.keyEnd=0,Yo.value=0,Yo.valueEnd=0,Yo.textEnd=t.length}(t),Zo(t,Qo(t,0,Yo.textEnd))}(e);n>=0;n=Zo(e,n))ri(t,Ko(e),!0)}function ia(t,e,n,i){const r=Pe(),s=Re(),o=He(2);s.firstUpdatePass&&oa(s,t,o,i),e!==Yr&&xo(r,o,e)&&ua(s,s.data[on()],r,r[11],t,r[o+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=rt(Fi(t)))),t}(e,n),i,o)}function ra(t,e,n,i){const r=Re(),s=He(2);r.firstUpdatePass&&oa(r,null,s,i);const o=Pe();if(n!==Yr&&xo(o,s,n)){const a=r.data[on()];if(da(a,i)&&!sa(r,s)){let t=i?a.classesWithoutHost:a.stylesWithoutHost;null!==t&&(n=st(t,n||"")),So(r,a,o,n,i)}else!function(t,e,n,i,r,s,o,a){r===Yr&&(r=It);let l=0,u=0,c=0<r.length?r[0]:null,h=0<s.length?s[0]:null;for(;null!==c||null!==h;){const d=l<r.length?r[l+1]:void 0,f=u<s.length?s[u+1]:void 0;let p,m=null;c===h?(l+=2,u+=2,d!==f&&(m=h,p=f)):null===h||null!==c&&c<h?(l+=2,m=c):(u+=2,m=h,p=f),null!==m&&ua(t,e,n,i,m,p,o,a),c=l<r.length?r[l]:null,h=u<s.length?s[u]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function(t,e,n){if(null==n||""===n)return It;const i=[],r=Fi(n);if(Array.isArray(r))for(let s=0;s<r.length;s++)t(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&t(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(t,e,n),i,s)}}function sa(t,e){return e>=t.expandoStartIndex}function oa(t,e,n,i){const r=t.data;if(null===r[n+1]){const s=r[on()],o=sa(t,n);da(s,i)&&null===e&&!o&&(e=!1),e=function(t,e,n,i){const r=Xe(t);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(n=la(n=aa(null,t,e,n,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==r)if(n=aa(r,t,e,n,i),null===s){let n=function(t,e,n){const i=n?e.classBindings:e.styleBindings;if(0!==es(i))return t[Jr(i)]}(t,e,i);void 0!==n&&Array.isArray(n)&&(n=aa(null,t,e,n[1],i),n=la(n,e.attrs,i),function(t,e,n,i){t[Jr(n?e.classBindings:e.styleBindings)]=i}(t,e,i,n))}else s=function(t,e,n){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=la(i,t[s].hostAttrs,n);return la(i,e.attrs,n)}(t,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),n}(r,s,e,i),function(t,e,n,i,r,s){let o=s?e.classBindings:e.styleBindings,a=Jr(o),l=es(o);t[i]=n;let u,c=!1;if(Array.isArray(n)){const t=n;u=t[1],(null===u||oi(t,u)>0)&&(c=!0)}else u=n;if(r)if(0!==l){const e=Jr(t[a+1]);t[i+1]=Qr(e,a),0!==e&&(t[e+1]=ns(t[e+1],i)),t[a+1]=131071&t[a+1]|i<<17}else t[i+1]=Qr(a,0),0!==a&&(t[a+1]=ns(t[a+1],i)),a=i;else t[i+1]=Qr(l,0),0===a?a=i:t[l+1]=ns(t[l+1],i),l=i;c&&(t[i+1]=ts(t[i+1])),Go(t,u,i,!0),Go(t,u,i,!1),function(t,e,n,i,r){const s=r?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&oi(s,e)>=0&&(n[i+1]=is(n[i+1]))}(e,u,t,i,s),o=Qr(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,n,o,i)}}function aa(t,e,n,i,r){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],i=la(i,s.hostAttrs,r),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),i}function la(t,e,n){const i=n?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ri(t,o,!!n||e[++s]))}return void 0===t?null:t}function ua(t,e,n,i,r,s,o,a){if(!(3&e.type))return;const l=t.data,u=l[a+1];ha(1==(1&u)?ca(l,e,n,r,es(u),o):void 0)||(ha(s)||2==(2&u)&&(s=ca(l,null,n,r,a,o)),function(t,e,n,i,r){const s=ve(t);if(e)r?s?t.addClass(n,i):n.classList.add(i):s?t.removeClass(n,i):n.classList.remove(i);else{let e=-1===i.indexOf("-")?void 0:ur.DashCase;if(null==r)s?t.removeStyle(n,i,e):n.style.removeProperty(i);else{const o="string"==typeof r&&r.endsWith("!important");o&&(r=r.slice(0,-10),e|=ur.Important),s?t.setStyle(n,i,r,e):n.style.setProperty(i,r,o?"important":"")}}}(i,o,xe(on(),n),r,s))}function ca(t,e,n,i,r,s){const o=null===e;let a;for(;r>0;){const e=t[r],s=Array.isArray(e),l=s?e[1]:e,u=null===l;let c=n[r+1];c===Yr&&(c=u?It:void 0);let h=u?si(c,i):l===i?c:void 0;if(s&&!ha(h)&&(h=si(e,i)),ha(h)&&(a=h,o))return a;const d=t[r+1];r=o?Jr(d):es(d)}if(null!==e){let t=s?e.residualClasses:e.residualStyles;null!=t&&(a=si(t,i))}return a}function ha(t){return void 0!==t}function da(t,e){return 0!=(t.flags&(e?16:32))}function fa(t,e=""){const n=Pe(),i=Re(),r=t+ee,s=i.firstCreatePass?os(i,r,1,e,null):i.data[r],o=n[r]=function(t,e){return ve(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Sr(i,n,o,s),Le(s,!1)}function pa(t){return ma("",t,""),pa}function ma(t,e,n){const i=Pe(),r=Co(i,t,e,n);return r!==Yr&&function(t,e,n){const i=xe(e,t);!function(t,e,n){ve(t)?t.setValue(e,n):e.textContent=n}(t[11],i,n)}(i,on(),r),ma}function ga(t,e,n){const i=Pe();return xo(i,qe(),e)&&_s(Re(),ln(),i,t,e,i[11],n,!0),ga}function ya(t,e,n){const i=Pe();if(xo(i,qe(),e)){const r=Re(),s=ln();_s(r,s,i,t,e,Us(Xe(r.data),s,i),n,!0)}return ya}const va=void 0;var _a=["en",[["a","p"],["AM","PM"],va],[["AM","PM"],va,va],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],va,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],va,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",va,"{1} 'at' {0}",va],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ba={};function xa(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=wa(e);if(n)return n;const i=e.split("-")[0];if(n=wa(i),n)return n;if("en"===i)return _a;throw new Error(`Missing locale data for the locale "${t}".`)}function wa(t){return t in ba||(ba[t]=Rt.ng&&Rt.ng.common&&Rt.ng.common.locales&&Rt.ng.common.locales[t]),ba[t]}var Ca=(()=>((Ca=Ca||{})[Ca.LocaleId=0]="LocaleId",Ca[Ca.DayPeriodsFormat=1]="DayPeriodsFormat",Ca[Ca.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ca[Ca.DaysFormat=3]="DaysFormat",Ca[Ca.DaysStandalone=4]="DaysStandalone",Ca[Ca.MonthsFormat=5]="MonthsFormat",Ca[Ca.MonthsStandalone=6]="MonthsStandalone",Ca[Ca.Eras=7]="Eras",Ca[Ca.FirstDayOfWeek=8]="FirstDayOfWeek",Ca[Ca.WeekendRange=9]="WeekendRange",Ca[Ca.DateFormat=10]="DateFormat",Ca[Ca.TimeFormat=11]="TimeFormat",Ca[Ca.DateTimeFormat=12]="DateTimeFormat",Ca[Ca.NumberSymbols=13]="NumberSymbols",Ca[Ca.NumberFormats=14]="NumberFormats",Ca[Ca.CurrencyCode=15]="CurrencyCode",Ca[Ca.CurrencySymbol=16]="CurrencySymbol",Ca[Ca.CurrencyName=17]="CurrencyName",Ca[Ca.Currencies=18]="Currencies",Ca[Ca.Directionality=19]="Directionality",Ca[Ca.PluralCase=20]="PluralCase",Ca[Ca.ExtraData=21]="ExtraData",Ca))();const Aa="en-US";let Ea=Aa;function ka(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,i){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Ea=t.toLowerCase().replace(/_/g,"-"))}function Da(t,e,n,i,r){if(t=lt(t),Array.isArray(t))for(let s=0;s<t.length;s++)Da(t[s],e,n,i,r);else{const s=Re(),o=Pe();let a=so(t)?t:lt(t.provide),l=no(t);const u=Ie(),c=1048575&u.providerIndexes,h=u.directiveStart,d=u.providerIndexes>>20;if(so(t)||!t.multi){const i=new yn(l,r,ko),f=Oa(a,e,r?c:c+d,h);-1===f?(Pn(Fn(u,o),s,a),Sa(s,t,e.length),e.push(a),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=1048576),n.push(i),o.push(i)):(n[f]=i,o[f]=i)}else{const f=Oa(a,e,c+d,h),p=Oa(a,e,c,c+d),m=f>=0&&n[f],g=p>=0&&n[p];if(r&&!g||!r&&!m){Pn(Fn(u,o),s,a);const c=function(t,e,n,i,r){const s=new yn(t,n,ko);return s.multi=[],s.index=e,s.componentProviders=0,Fa(s,r,i&&!n),s}(r?Ta:Ma,n.length,r,i,l);!r&&g&&(n[p].providerFactory=c),Sa(s,t,e.length,0),e.push(a),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=1048576),n.push(c),o.push(c)}else Sa(s,t,f>-1?f:p,Fa(n[r?p:f],l,!r&&i));!r&&i&&g&&n[p].componentProviders++}}}function Sa(t,e,n,i){const r=so(e);if(r||e.useClass){const s=(e.useClass||e).prototype.ngOnDestroy;if(s){const o=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){const t=o.indexOf(n);-1===t?o.push(n,[i,s]):o[t+1].push(i,s)}else o.push(n,s)}}}function Fa(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Oa(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function Ma(t,e,n,i){return Pa(this.multi,[])}function Ta(t,e,n,i){const r=this.multi;let s;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=jn(n,n[1],this.providerFactory.index,i);s=e.slice(0,t),Pa(r,s);for(let n=t;n<e.length;n++)s.push(e[n])}else s=[],Pa(r,s);return s}function Pa(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Ra(t,e=[]){return n=>{n.providersResolver=(n,i)=>function(t,e,n){const i=Re();if(i.firstCreatePass){const r=le(t);Da(n,i.data,i.blueprint,r,!0),Da(e,i.data,i.blueprint,r,!1)}}(n,i?i(t):t,e)}}class Ba{}class Ia{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${rt(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}class Na{}function La(...t){}function $a(t,e){return new ja(we(t,e))}Na.NULL=new Ia;const za=function(){return $a(Ie(),Pe())};let ja=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=za,t})();function Ua(t){return t instanceof ja?t.nativeElement:t}class Va{}let qa=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ha(),t})();const Ha=function(){const t=Pe(),e=Ee(Ie().index,t);return function(t){return t[11]}(ie(e)?e:t)};let Wa=(()=>{class t{}return t.\u0275prov=pt({token:t,providedIn:"root",factory:()=>null}),t})();class Ga{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Xa=new Ga("12.1.4");class Ya{constructor(){}supports(t){return vo(t)}create(t){return new Za(t)}}const Ka=(t,e)=>e;class Za{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ka}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,i=0,r=null;for(;e||n;){const s=!n||e&&e.currentIndex<el(n,i,r)?e:n,o=el(s,i,r),a=s.currentIndex;if(s===n)i--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)i++;else{r||(r=[]);const t=o-i,e=a-i;if(t!=e){for(let n=0;n<t;n++){const i=n<r.length?r[n]:r[n]=0,s=i+n;e<=s&&s<t&&(r[n]=i+1)}r[s.previousIndex]=e-t}}o!==a&&t(s,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!vo(t))throw new Error(`Error trying to diff '${rt(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,i,r=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],i=this._trackByFn(e,n),null!==r&&Object.is(r.trackById,i)?(s&&(r=this._verifyReinsertion(r,n,i,e)),Object.is(r.item,n)||this._addIdentityChange(r,n)):(r=this._mismatch(r,n,i,e),s=!0),r=r._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[go()]();let i;for(;!(i=n.next()).done;)e(i.value)}}(t,t=>{i=this._trackByFn(e,t),null!==r&&Object.is(r.trackById,i)?(s&&(r=this._verifyReinsertion(r,t,i,e)),Object.is(r.item,t)||this._addIdentityChange(r,t)):(r=this._mismatch(r,t,i,e),s=!0),r=r._next,e++}),this.length=e;return this._truncate(r),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,i){let r;return null===t?r=this._itTail:(r=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,r,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,r,i)):t=this._addAfter(new Qa(e,n),r,i),t}_verifyReinsertion(t,e,n,i){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?t=this._reinsertAfter(r,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,r=t._nextRemoved;return null===i?this._removalsHead=r:i._nextRemoved=r,null===r?this._removalsTail=i:r._prevRemoved=i,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const i=null===e?this._itHead:e._next;return t._next=i,t._prev=e,null===i?this._itTail=t:i._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new tl),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new tl),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Qa{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ja{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class tl{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Ja,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function el(t,e,n){const i=t.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}class nl{constructor(){}supports(t){return t instanceof Map||_o(t)}create(){return new il}}class il{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||_o(t)))throw new Error(`Error trying to diff '${rt(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const i=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,i)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const i=n._prev,r=n._next;return i&&(i._next=r),r&&(r._prev=i),n._next=null,n._prev=null,n}const n=new rl(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class rl{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sl(){return new ol([new Ya])}let ol=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||sl()),deps:[[t,new bi,new _i]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=pt({token:t,providedIn:"root",factory:sl}),t})();function al(){return new ll([new nl])}let ll=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||al()),deps:[[t,new bi,new _i]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=pt({token:t,providedIn:"root",factory:al}),t})();function ul(t,e,n,i,r=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&i.push(be(s)),re(s))for(let t=ne;t<s.length;t++){const e=s[t],n=e[1].firstChild;null!==n&&ul(e[1],e,n,i)}const o=n.type;if(8&o)ul(t,e,n.child,i);else if(32&o){const t=cr(n,e);let r;for(;r=t();)i.push(r)}else if(16&o){const t=Or(e,n);if(Array.isArray(t))i.push(...t);else{const n=hr(e[16]);ul(n[1],n,t,i,!0)}}n=r?n.projectionNext:n.next}return i}class cl{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return ul(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(re(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(vr(t,n),ni(e,n))}this._attachedToViewContainer=!1}_r(this._lView[1],this._lView)}onDestroy(t){ys(this._lView[1],this._lView,null,t)}markForCheck(){Bs(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Is(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Ue(!0);try{Is(t,e,n)}finally{Ue(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Pr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class hl extends cl{constructor(t){super(t),this._view=t}detectChanges(){Ns(this._view)}checkNoChanges(){!function(t){Ue(!0);try{Ns(t)}finally{Ue(!1)}}(this._view)}get context(){return null}}const dl=function(t){return function(t,e,n){if(oe(t)&&!n){const n=Ee(t.index,e);return new cl(n,n)}return 47&t.type?new cl(e[16],e):null}(Ie(),Pe(),16==(16&t))};let fl=(()=>{class t{}return t.__NG_ELEMENT_ID__=dl,t})();const pl=[new nl],ml=new ol([new Ya]),gl=new ll(pl),yl=function(){return xl(Ie(),Pe())};let vl=(()=>{class t{}return t.__NG_ELEMENT_ID__=yl,t})();const _l=vl,bl=class extends _l{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=ss(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const i=this._declarationLView[19];return null!==i&&(n[19]=i.createEmbeddedView(e)),ls(e,n,t),new cl(n)}};function xl(t,e){return 4&t.type?new bl(e,t,$a(t,e)):null}class wl{}class Cl{}const Al=function(){return Ol(Ie(),Pe())};let El=(()=>{class t{}return t.__NG_ELEMENT_ID__=Al,t})();const kl=El,Dl=class extends kl{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return $a(this._hostTNode,this._hostLView)}get injector(){return new qn(this._hostTNode,this._hostLView)}get parentInjector(){const t=Tn(this._hostTNode,this._hostLView);if(Cn(t)){const e=En(t,this._hostLView),n=An(t);return new qn(e[1].data[n+8],e)}return new qn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Sl(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ne}createEmbeddedView(t,e,n){const i=t.createEmbeddedView(e||{});return this.insert(i,n),i}createComponent(t,e,n,i,r){const s=n||this.parentInjector;if(!r&&null==t.ngModule&&s){const t=s.get(wl,null);t&&(r=t)}const o=t.create(s,i,void 0,r);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,i=n[1];if(re(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],i=new Dl(e,e[6],e[3]);i.detach(i.indexOf(t))}}const r=this._adjustIndex(e),s=this._lContainer;!function(t,e,n,i){const r=ne+i,s=n.length;i>0&&(n[r-1][4]=e),i<s-ne?(e[4]=n[r],ei(n,ne+i,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(i,n,s,r);const o=Mr(r,s),a=n[11],l=Er(a,s[7]);return null!==l&&function(t,e,n,i,r,s){i[0]=r,i[6]=e,Pr(t,i,n,1,r,s)}(i,s[6],a,n,l,o),t.attachToViewContainerRef(),ei(Fl(s),r,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Sl(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=vr(this._lContainer,e);n&&(ni(Fl(this._lContainer),e),_r(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=vr(this._lContainer,e);return n&&null!=ni(Fl(this._lContainer),e)?new cl(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Sl(t){return t[8]}function Fl(t){return t[8]||(t[8]=[])}function Ol(t,e){let n;const i=e[t.index];if(re(i))n=i;else{let r;if(8&t.type)r=be(i);else{const n=e[11];r=n.createComment("");const i=we(t,e);wr(n,Er(n,i),r,function(t,e){return ve(t)?t.nextSibling(e):e.nextSibling}(n,i),!1)}e[t.index]=n=Os(i,e,r,t),Rs(e,n)}return new Dl(n,t,e)}const Ml={};class Tl extends Na{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Jt(t);return new Bl(e,this.ngModule)}}function Pl(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Rl=new Kn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>ar});class Bl extends Ba{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Xr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Pl(this.componentDef.inputs)}get outputs(){return Pl(this.componentDef.outputs)}create(t,e,n,i){const r=(i=i||this.ngModule)?function(t,e){return{get:(n,i,r)=>{const s=t.get(n,Ml,r);return s!==Ml||i===Ml?s:e.get(n,i,r)}}}(t,i.injector):t,s=r.get(Va,_e),o=r.get(Wa,null),a=s.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",u=n?function(t,e,n){if(ve(t))return t.selectRootElement(e,n===Ft.ShadowDom);let i="string"==typeof e?t.querySelector(e):e;return i.textContent="",i}(a,n,this.componentDef.encapsulation):gr(s.createRenderer(null,this.componentDef),l,function(t){const e=t.toLowerCase();return"svg"===e?ge:"math"===e?"http://www.w3.org/1998/MathML/":null}(l)),c=this.componentDef.onPush?576:528,h={components:[],scheduler:ar,clean:$s,playerHandler:null,flags:0},d=gs(0,null,null,1,0,null,null,null,null,null),f=ss(null,d,h,c,null,null,s,a,o,r);let p,m;Je(f);try{const t=function(t,e,n,i,r,s){const o=n[1];n[20]=t;const a=os(o,20,2,"#host",null),l=a.mergedAttrs=e.hostAttrs;null!==l&&(Hs(a,l,!0),null!==t&&(vn(r,t,l),null!==a.classes&&Ir(r,t,a.classes),null!==a.styles&&Br(r,t,a.styles)));const u=i.createRenderer(t,e),c=ss(n,ms(e),null,e.onPush?64:16,n[20],a,i,u,null,null);return o.firstCreatePass&&(Pn(Fn(a,n),o,e.type),Cs(o,a),Es(a,n.length,1)),Rs(n,c),n[20]=c}(u,this.componentDef,f,s,a);if(u)if(n)vn(a,u,["ng-version",Xa.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let i=1,r=2;for(;i<t.length;){let s=t[i];if("string"==typeof s)2===r?""!==s&&e.push(s,t[++i]):8===r&&n.push(s);else{if(!Vr(r))break;r=s}i++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&vn(a,u,t),e&&e.length>0&&Ir(a,u,e.join(" "))}if(m=Ce(d,ee),void 0!==e){const t=m.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const i=e[n];t.push(null!=i?Array.from(i):null)}}p=function(t,e,n,i,r){const s=n[1],o=function(t,e,n){const i=Ie();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ks(t,i,e,as(t,e,1,null),n));const r=jn(e,t,i.directiveStart,i);nr(r,e);const s=we(i,e);return s&&nr(s,e),r}(s,n,e);if(i.components.push(o),t[8]=o,r&&r.forEach(t=>t(o,e)),e.contentQueries){const t=Ie();e.contentQueries(1,o,t.directiveStart)}const a=Ie();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(an(a.index),xs(n[1],a,0,a.directiveStart,a.directiveEnd,e),ws(e,o)),o}(t,this.componentDef,f,h,[lo]),ls(d,f,null)}finally{sn()}return new Il(this.componentType,p,$a(m,f),f,m)}}class Il extends class{}{constructor(t,e,n,i,r){super(),this.location=n,this._rootLView=i,this._tNode=r,this.instance=e,this.hostView=this.changeDetectorRef=new hl(i),this.componentType=t}get injector(){return new qn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Nl=new Map;class Ll extends wl{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Tl(this);const n=te(t),i=t[jt]||null;i&&ka(i),this._bootstrapComponents=lr(n.bootstrap),this._r3Injector=Js(t,e,[{provide:wl,useValue:this},{provide:Na,useValue:this.componentFactoryResolver}],rt(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=ao.THROW_IF_NOT_FOUND,n=Ct.Default){return t===ao||t===wl||t===Ws?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class $l extends Cl{constructor(t){super(),this.moduleType=t,null!==te(t)&&function(t){const e=new Set;!function t(n){const i=te(n,!0),r=i.id;null!==r&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${rt(e)} vs ${rt(e.name)}`)}(r,Nl.get(r),n),Nl.set(r,n));const s=lr(i.imports);for(const o of s)e.has(o)||(e.add(o),t(o))}(t)}(t)}create(t){return new Ll(this.moduleType,t)}}function zl(t,e,n){const i=Ve()+t,r=Pe();return r[i]===Yr?bo(r,i,n?e.call(n):e()):function(t,e){return t[e]}(r,i)}function jl(t,e){const n=t[e];return n===Yr?void 0:n}function Ul(t,e,n,i,r,s){const o=e+n;return xo(t,o,r)?bo(t,o+1,s?i.call(s,r):i(r)):jl(t,o+1)}function Vl(t,e){const n=Re();let i;const r=t+ee;n.firstCreatePass?(i=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const i=e[n];if(t===i.name)return i}throw new ct("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(r,i.onDestroy)):i=n.data[r];const s=i.factory||(i.factory=ue(i.type)),o=Et(ko);try{const t=Dn(!1),e=s();return Dn(t),function(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}(n,Pe(),r,e),e}finally{Et(o)}}function ql(t,e,n){const i=t+ee,r=Pe(),s=Ae(r,i);return Gl(r,Wl(r,i)?Ul(r,Ve(),e,s.transform,n,s):s.transform(n))}function Hl(t,e,n,i){const r=t+ee,s=Pe(),o=Ae(s,r);return Gl(s,Wl(s,r)?function(t,e,n,i,r,s,o){const a=e+n;return function(t,e,n,i){const r=xo(t,e,n);return xo(t,e+1,i)||r}(t,a,r,s)?bo(t,a+2,o?i.call(o,r,s):i(r,s)):jl(t,a+2)}(s,Ve(),e,o.transform,n,i,o):o.transform(n,i))}function Wl(t,e){return t[1].data[e].pure}function Gl(t,e){return yo.isWrapped(e)&&(e=yo.unwrap(e),t[Me.lFrame.bindingIndex]=Yr),e}function Xl(t){return e=>{setTimeout(t,void 0,e)}}const Yl=class extends k{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var i,r,s;let o=t,a=e||(()=>null),l=n;if(t&&"object"==typeof t){const e=t;o=null===(i=e.next)||void 0===i?void 0:i.bind(e),a=null===(r=e.error)||void 0===r?void 0:r.bind(e),l=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(a=Xl(a),o&&(o=Xl(o)),l&&(l=Xl(l)));const u=super.subscribe({next:o,error:a,complete:l});return t instanceof p&&t.add(u),u}};function Kl(){return this._results[go()]()}class Zl{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=go(),n=Zl.prototype;n[e]||(n[e]=Kl)}get changes(){return this._changes||(this._changes=new Yl)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const i=Jn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],s=e[i];if(n&&(r=n(r),s=n(s)),s!==r)return!1}return!0}(n._results,i,e))&&(n._results=i,n.length=i.length,n.last=i[this.length-1],n.first=i[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Ql{constructor(t){this.queryList=t,this.matches=null}clone(){return new Ql(this.queryList)}setDirty(){this.queryList.setDirty()}}class Jl{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,i=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);i.push(this.queries[n.indexInDeclarationView].clone())}return new Jl(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==fu(t,e).matches&&this.queries[e].setDirty()}}class tu{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class eu{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const i=null!==e?e.length:0,r=this.getByIndex(n).embeddedTView(t,i);r&&(r.indexInDeclarationView=n,null!==e?e.push(r):e=[r])}return null!==e?new eu(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class nu{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new nu(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let i=0;i<n.length;i++){const r=n[i];this.matchTNodeWithReadOption(t,e,iu(e,r)),this.matchTNodeWithReadOption(t,e,zn(e,t,r,!1,!1))}else n===vl?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,zn(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const i=this.metadata.read;if(null!==i)if(i===ja||i===El||i===vl&&4&e.type)this.addMatch(e.index,-2);else{const n=zn(e,t,i,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function iu(t,e){const n=t.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1];return null}function ru(t,e,n,i){return-1===n?function(t,e){return 11&t.type?$a(t,e):4&t.type?xl(t,e):null}(e,t):-2===n?function(t,e,n){return n===ja?$a(e,t):n===vl?xl(e,t):n===El?Ol(e,t):void 0}(t,e,i):jn(t,t[1],n,e)}function su(t,e,n,i){const r=e[19].queries[i];if(null===r.matches){const i=t.data,s=n.matches,o=[];for(let t=0;t<s.length;t+=2){const r=s[t];o.push(r<0?null:ru(e,i[r],s[t+1],n.metadata.read))}r.matches=o}return r.matches}function ou(t,e,n,i){const r=t.queries.getByIndex(n),s=r.matches;if(null!==s){const o=su(t,e,r,n);for(let t=0;t<s.length;t+=2){const n=s[t];if(n>0)i.push(o[t/2]);else{const r=s[t+1],o=e[-n];for(let t=ne;t<o.length;t++){const e=o[t];e[17]===e[3]&&ou(e[1],e,r,i)}if(null!==o[9]){const t=o[9];for(let e=0;e<t.length;e++){const n=t[e];ou(n[1],n,r,i)}}}}}return i}function au(t){const e=Pe(),n=Re(),i=Ye();Ke(i+1);const r=fu(n,i);if(t.dirty&&ke(e)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const s=r.crossesNgTemplate?ou(n,e,i,[]):su(n,e,r,i);t.reset(s,Ua),t.notifyOnChanges()}return!0}return!1}function lu(t,e,n){const i=Re();i.firstCreatePass&&(du(i,new tu(t,e,n),-1),2==(2&e)&&(i.staticViewQueries=!0)),hu(i,Pe(),e)}function uu(t,e,n,i){const r=Re();if(r.firstCreatePass){const s=Ie();du(r,new tu(e,n,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(r,t),2==(2&n)&&(r.staticContentQueries=!0)}hu(r,Pe(),n)}function cu(){return t=Pe(),e=Ye(),t[19].queries[e].queryList;var t,e}function hu(t,e,n){const i=new Zl(4==(4&n));ys(t,e,i,i.destroy),null===e[19]&&(e[19]=new Jl),e[19].queries.push(new Ql(i))}function du(t,e,n){null===t.queries&&(t.queries=new eu),t.queries.track(new nu(e,n))}function fu(t,e){return t.queries.getByIndex(e)}function pu(t,e){return xl(t,e)}const mu=new Kn("Application Initializer");let gu=(()=>{class t{constructor(t){this.appInits=t,this.resolve=La,this.reject=La,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(Bo(e))t.push(e);else if(No(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(pi(mu,8))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const yu=new Kn("AppId"),vu={provide:yu,useFactory:function(){return`${_u()}${_u()}${_u()}`},deps:[]};function _u(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const bu=new Kn("Platform Initializer"),xu=new Kn("Platform ID"),wu=new Kn("appBootstrapListener");let Cu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const Au=new Kn("LocaleId"),Eu=new Kn("DefaultCurrencyCode");class ku{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Du=function(t){return new $l(t)},Su=Du,Fu=function(t){return Promise.resolve(Du(t))},Ou=function(t){const e=Du(t),n=lr(te(t).declarations).reduce((t,e)=>{const n=Jt(e);return n&&t.push(new Bl(n)),t},[]);return new ku(e,n)},Mu=Ou,Tu=function(t){return Promise.resolve(Ou(t))};let Pu=(()=>{class t{constructor(){this.compileModuleSync=Su,this.compileModuleAsync=Fu,this.compileModuleAndAllComponentsSync=Mu,this.compileModuleAndAllComponentsAsync=Tu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const Ru=new Kn("compilerOptions"),Bu=(()=>Promise.resolve(0))();function Iu(t){"undefined"==typeof Zone?Bu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Nu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Yl(!1),this.onMicrotaskEmpty=new Yl(!1),this.onStable=new Yl(!1),this.onError=new Yl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!n&&e,i.shouldCoalesceRunChangeDetection=n,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function(){let t=Rt.requestAnimationFrame,e=Rt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Rt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,zu(t),t.isCheckStableRunning=!0,$u(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),zu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,s,o,a)=>{try{return ju(t),n.invokeTask(r,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),Uu(t)}},onInvoke:(n,i,r,s,o,a,l)=>{try{return ju(t),n.invoke(r,s,o,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),Uu(t)}},onHasTask:(e,n,i,r)=>{e.hasTask(i,r),n===i&&("microTask"==r.change?(t._hasPendingMicrotasks=r.microTask,zu(t),$u(t)):"macroTask"==r.change&&(t.hasPendingMacrotasks=r.macroTask))},onHandleError:(e,n,i,r)=>(e.handleError(i,r),t.runOutsideAngular(()=>t.onError.emit(r)),!1)})}(i)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Nu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Nu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,i){const r=this._inner,s=r.scheduleEventTask("NgZoneEvent: "+i,t,Lu,La,La);try{return r.runTask(s,e,n)}finally{r.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Lu={};function $u(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function zu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function ju(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Uu(t){t._nesting--,$u(t)}class Vu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Yl,this.onMicrotaskEmpty=new Yl,this.onStable=new Yl,this.onError=new Yl}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,i){return t.apply(e,n)}}let qu=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Nu.assertNotInAngularZone(),Iu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Iu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let i=-1;e&&e>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==i),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(pi(Nu))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),Hu=(()=>{class t{constructor(){this._applications=new Map,Xu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Xu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();class Wu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let Gu,Xu=new Wu,Yu=!0,Ku=!1;function Zu(){return Ku=!0,Yu}const Qu=new Kn("AllowMultipleToken");class Ju{constructor(t,e){this.name=t,this.token=e}}function tc(t,e,n=[]){const i=`Platform: ${e}`,r=new Kn(i);return(e=[])=>{let s=ec();if(!s||s.injector.get(Qu,!1))if(t)t(n.concat(e).concat({provide:r,useValue:!0}));else{const t=n.concat(e).concat({provide:r,useValue:!0},{provide:Xs,useValue:"platform"});!function(t){if(Gu&&!Gu.destroyed&&!Gu.injector.get(Qu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Gu=t.get(nc);const e=t.get(bu,null);e&&e.forEach(t=>t())}(ao.create({providers:t,name:i}))}return function(t){const e=ec();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(r)}}function ec(){return Gu&&!Gu.destroyed?Gu:null}let nc=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Vu:("zone.js"===t?void 0:t)||new Nu({enableLongStackTrace:Zu(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),i=[{provide:Nu,useValue:n}];return n.run(()=>{const e=ao.create({providers:i,parent:this.injector,name:t.moduleType.name}),r=t.create(e),s=r.injector.get(or,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{s.handleError(t)}});r.onDestroy(()=>{sc(this._modules,r),t.unsubscribe()})}),function(t,e,n){try{const i=n();return Bo(i)?i.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}(s,n,()=>{const t=r.injector.get(gu);return t.runInitializers(),t.donePromise.then(()=>(ka(r.injector.get(Au,Aa)||Aa),this._moduleDoBootstrap(r),r))})})}bootstrapModule(t,e=[]){const n=ic({},e);return function(t,e,n){const i=new $l(n);return Promise.resolve(i)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(rc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${rt(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(pi(ao))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();function ic(t,e){return Array.isArray(e)?e.reduce(ic,t):Object.assign(Object.assign({},t),e)}let rc=(()=>{class t{constructor(t,e,n,i,r){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=i,this._initStatus=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new x(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),o=new x(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Nu.assertNotInAngularZone(),Iu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Nu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=G(s,o.pipe(et()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Ba?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const i=n.isBoundToModule?void 0:this._injector.get(wl),r=n.create(ao.NULL,[],e||n.selector,i),s=r.location.nativeElement,o=r.injector.get(qu,null),a=o&&r.injector.get(Hu);return o&&a&&a.registerApplication(s,o),r.onDestroy(()=>{this.detachView(r.hostView),sc(this.components,r),a&&a.unregisterApplication(s)}),this._loadComponent(r),r}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;sc(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(wu,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(pi(Nu),pi(ao),pi(or),pi(Na),pi(gu))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();function sc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class oc{}class ac{}const lc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let uc=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||lc}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,i]=t.split("#");return void 0===i&&(i="default"),n(8255)(e).then(t=>t[i]).then(t=>cc(t,e,i)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,i]=t.split("#"),r="NgFactory";return void 0===i&&(i="default",r=""),n(8255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[i+r]).then(t=>cc(t,e,i))}}return t.\u0275fac=function(e){return new(e||t)(pi(Pu),pi(ac,8))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();function cc(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const hc=tc(null,"core",[{provide:xu,useValue:"unknown"},{provide:nc,deps:[ao]},{provide:Hu,deps:[]},{provide:Cu,deps:[]}]),dc=[{provide:rc,useClass:rc,deps:[Nu,ao,or,Na,gu]},{provide:Rl,deps:[Nu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:gu,useClass:gu,deps:[[new _i,mu]]},{provide:Pu,useClass:Pu,deps:[]},vu,{provide:ol,useFactory:function(){return ml},deps:[]},{provide:ll,useFactory:function(){return gl},deps:[]},{provide:Au,useFactory:function(t){return ka(t=t||"undefined"!=typeof $localize&&$localize.locale||Aa),t},deps:[[new vi(Au),new _i,new bi]]},{provide:Eu,useValue:"USD"}];let fc=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(pi(rc))},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({providers:dc}),t})(),pc=null;function mc(){return pc}const gc=new Kn("DocumentToken");let yc=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({factory:vc,token:t,providedIn:"platform"}),t})();function vc(){return pi(bc)}const _c=new Kn("Location Initialized");let bc=(()=>{class t extends yc{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return mc().getBaseHref(this._doc)}onPopState(t){const e=mc().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=mc().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){xc()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){xc()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(pi(gc))},t.\u0275prov=pt({factory:wc,token:t,providedIn:"platform"}),t})();function xc(){return!!window.history.pushState}function wc(){return new bc(pi(gc))}function Cc(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function Ac(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Ec(t){return t&&"?"!==t[0]?"?"+t:t}let kc=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({factory:Dc,token:t,providedIn:"root"}),t})();function Dc(t){const e=pi(gc).location;return new Fc(pi(yc),e&&e.origin||"")}const Sc=new Kn("appBaseHref");let Fc=(()=>{class t extends kc{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Cc(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+Ec(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,i){const r=this.prepareExternalUrl(n+Ec(i));this._platformLocation.pushState(t,e,r)}replaceState(t,e,n,i){const r=this.prepareExternalUrl(n+Ec(i));this._platformLocation.replaceState(t,e,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(pi(yc),pi(Sc,8))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),Oc=(()=>{class t extends kc{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=Cc(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,i){let r=this.prepareExternalUrl(n+Ec(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.pushState(t,e,r)}replaceState(t,e,n,i){let r=this.prepareExternalUrl(n+Ec(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(pi(yc),pi(Sc,8))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),Mc=(()=>{class t{constructor(t,e){this._subject=new Yl,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=Ac(Pc(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+Ec(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,Pc(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ec(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ec(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(pi(kc),pi(yc))},t.normalizeQueryParams=Ec,t.joinWithSlash=Cc,t.stripTrailingSlash=Ac,t.\u0275prov=pt({factory:Tc,token:t,providedIn:"root"}),t})();function Tc(){return new Mc(pi(kc),pi(yc))}function Pc(t){return t.replace(/\/index.html$/,"")}var Rc=(()=>((Rc=Rc||{})[Rc.Zero=0]="Zero",Rc[Rc.One=1]="One",Rc[Rc.Two=2]="Two",Rc[Rc.Few=3]="Few",Rc[Rc.Many=4]="Many",Rc[Rc.Other=5]="Other",Rc))(),Bc=(()=>((Bc=Bc||{})[Bc.Format=0]="Format",Bc[Bc.Standalone=1]="Standalone",Bc))(),Ic=(()=>((Ic=Ic||{})[Ic.Narrow=0]="Narrow",Ic[Ic.Abbreviated=1]="Abbreviated",Ic[Ic.Wide=2]="Wide",Ic[Ic.Short=3]="Short",Ic))(),Nc=(()=>((Nc=Nc||{})[Nc.Short=0]="Short",Nc[Nc.Medium=1]="Medium",Nc[Nc.Long=2]="Long",Nc[Nc.Full=3]="Full",Nc))(),Lc=(()=>((Lc=Lc||{})[Lc.Decimal=0]="Decimal",Lc[Lc.Group=1]="Group",Lc[Lc.List=2]="List",Lc[Lc.PercentSign=3]="PercentSign",Lc[Lc.PlusSign=4]="PlusSign",Lc[Lc.MinusSign=5]="MinusSign",Lc[Lc.Exponential=6]="Exponential",Lc[Lc.SuperscriptingExponent=7]="SuperscriptingExponent",Lc[Lc.PerMille=8]="PerMille",Lc[Lc[1/0]=9]="Infinity",Lc[Lc.NaN=10]="NaN",Lc[Lc.TimeSeparator=11]="TimeSeparator",Lc[Lc.CurrencyDecimal=12]="CurrencyDecimal",Lc[Lc.CurrencyGroup=13]="CurrencyGroup",Lc))();function $c(t,e){return qc(xa(t)[Ca.DateFormat],e)}function zc(t,e){return qc(xa(t)[Ca.TimeFormat],e)}function jc(t,e){return qc(xa(t)[Ca.DateTimeFormat],e)}function Uc(t,e){const n=xa(t),i=n[Ca.NumberSymbols][e];if(void 0===i){if(e===Lc.CurrencyDecimal)return n[Ca.NumberSymbols][Lc.Decimal];if(e===Lc.CurrencyGroup)return n[Ca.NumberSymbols][Lc.Group]}return i}function Vc(t){if(!t[Ca.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Ca.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function qc(t,e){for(let n=e;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function Hc(t){const[e,n]=t.split(":");return{hours:+e,minutes:+n}}const Wc=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Gc={},Xc=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Yc=(()=>((Yc=Yc||{})[Yc.Short=0]="Short",Yc[Yc.ShortGMT=1]="ShortGMT",Yc[Yc.Long=2]="Long",Yc[Yc.Extended=3]="Extended",Yc))(),Kc=(()=>((Kc=Kc||{})[Kc.FullYear=0]="FullYear",Kc[Kc.Month=1]="Month",Kc[Kc.Date=2]="Date",Kc[Kc.Hours=3]="Hours",Kc[Kc.Minutes=4]="Minutes",Kc[Kc.Seconds=5]="Seconds",Kc[Kc.FractionalSeconds=6]="FractionalSeconds",Kc[Kc.Day=7]="Day",Kc))(),Zc=(()=>((Zc=Zc||{})[Zc.DayPeriods=0]="DayPeriods",Zc[Zc.Days=1]="Days",Zc[Zc.Months=2]="Months",Zc[Zc.Eras=3]="Eras",Zc))();function Qc(t,e,n,i){let r=function(t){if(hh(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[e,n=1,i=1]=t.split("-").map(t=>+t);return Jc(e,n-1,i)}const e=parseFloat(t);if(!isNaN(t-e))return new Date(e);let n;if(n=t.match(Wc))return function(t){const e=new Date(0);let n=0,i=0;const r=t[8]?e.setUTCFullYear:e.setFullYear,s=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),i=Number(t[9]+t[11])),r.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));const o=Number(t[4]||0)-n,a=Number(t[5]||0)-i,l=Number(t[6]||0),u=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return s.call(e,o,a,l,u),e}(n)}const e=new Date(t);if(!hh(e))throw new Error(`Unable to convert "${t}" into a date`);return e}(t);e=th(n,e)||e;let s,o=[];for(;e;){if(s=Xc.exec(e),!s){o.push(e);break}{o=o.concat(s.slice(1));const t=o.pop();if(!t)break;e=t}}let a=r.getTimezoneOffset();i&&(a=ch(i,a),r=function(t,e,n){const i=t.getTimezoneOffset();return function(t,e){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+e),t}(t,-1*(ch(e,i)-i))}(r,i));let l="";return o.forEach(t=>{const e=function(t){if(uh[t])return uh[t];let e;switch(t){case"G":case"GG":case"GGG":e=rh(Zc.Eras,Ic.Abbreviated);break;case"GGGG":e=rh(Zc.Eras,Ic.Wide);break;case"GGGGG":e=rh(Zc.Eras,Ic.Narrow);break;case"y":e=ih(Kc.FullYear,1,0,!1,!0);break;case"yy":e=ih(Kc.FullYear,2,0,!0,!0);break;case"yyy":e=ih(Kc.FullYear,3,0,!1,!0);break;case"yyyy":e=ih(Kc.FullYear,4,0,!1,!0);break;case"Y":e=lh(1);break;case"YY":e=lh(2,!0);break;case"YYY":e=lh(3);break;case"YYYY":e=lh(4);break;case"M":case"L":e=ih(Kc.Month,1,1);break;case"MM":case"LL":e=ih(Kc.Month,2,1);break;case"MMM":e=rh(Zc.Months,Ic.Abbreviated);break;case"MMMM":e=rh(Zc.Months,Ic.Wide);break;case"MMMMM":e=rh(Zc.Months,Ic.Narrow);break;case"LLL":e=rh(Zc.Months,Ic.Abbreviated,Bc.Standalone);break;case"LLLL":e=rh(Zc.Months,Ic.Wide,Bc.Standalone);break;case"LLLLL":e=rh(Zc.Months,Ic.Narrow,Bc.Standalone);break;case"w":e=ah(1);break;case"ww":e=ah(2);break;case"W":e=ah(1,!0);break;case"d":e=ih(Kc.Date,1);break;case"dd":e=ih(Kc.Date,2);break;case"c":case"cc":e=ih(Kc.Day,1);break;case"ccc":e=rh(Zc.Days,Ic.Abbreviated,Bc.Standalone);break;case"cccc":e=rh(Zc.Days,Ic.Wide,Bc.Standalone);break;case"ccccc":e=rh(Zc.Days,Ic.Narrow,Bc.Standalone);break;case"cccccc":e=rh(Zc.Days,Ic.Short,Bc.Standalone);break;case"E":case"EE":case"EEE":e=rh(Zc.Days,Ic.Abbreviated);break;case"EEEE":e=rh(Zc.Days,Ic.Wide);break;case"EEEEE":e=rh(Zc.Days,Ic.Narrow);break;case"EEEEEE":e=rh(Zc.Days,Ic.Short);break;case"a":case"aa":case"aaa":e=rh(Zc.DayPeriods,Ic.Abbreviated);break;case"aaaa":e=rh(Zc.DayPeriods,Ic.Wide);break;case"aaaaa":e=rh(Zc.DayPeriods,Ic.Narrow);break;case"b":case"bb":case"bbb":e=rh(Zc.DayPeriods,Ic.Abbreviated,Bc.Standalone,!0);break;case"bbbb":e=rh(Zc.DayPeriods,Ic.Wide,Bc.Standalone,!0);break;case"bbbbb":e=rh(Zc.DayPeriods,Ic.Narrow,Bc.Standalone,!0);break;case"B":case"BB":case"BBB":e=rh(Zc.DayPeriods,Ic.Abbreviated,Bc.Format,!0);break;case"BBBB":e=rh(Zc.DayPeriods,Ic.Wide,Bc.Format,!0);break;case"BBBBB":e=rh(Zc.DayPeriods,Ic.Narrow,Bc.Format,!0);break;case"h":e=ih(Kc.Hours,1,-12);break;case"hh":e=ih(Kc.Hours,2,-12);break;case"H":e=ih(Kc.Hours,1);break;case"HH":e=ih(Kc.Hours,2);break;case"m":e=ih(Kc.Minutes,1);break;case"mm":e=ih(Kc.Minutes,2);break;case"s":e=ih(Kc.Seconds,1);break;case"ss":e=ih(Kc.Seconds,2);break;case"S":e=ih(Kc.FractionalSeconds,1);break;case"SS":e=ih(Kc.FractionalSeconds,2);break;case"SSS":e=ih(Kc.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=sh(Yc.Short);break;case"ZZZZZ":e=sh(Yc.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=sh(Yc.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=sh(Yc.Long);break;default:return null}return uh[t]=e,e}(t);l+=e?e(r,n,a):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function Jc(t,e,n){const i=new Date(0);return i.setFullYear(t,e,n),i.setHours(0,0,0),i}function th(t,e){const n=function(t){return xa(t)[Ca.LocaleId]}(t);if(Gc[n]=Gc[n]||{},Gc[n][e])return Gc[n][e];let i="";switch(e){case"shortDate":i=$c(t,Nc.Short);break;case"mediumDate":i=$c(t,Nc.Medium);break;case"longDate":i=$c(t,Nc.Long);break;case"fullDate":i=$c(t,Nc.Full);break;case"shortTime":i=zc(t,Nc.Short);break;case"mediumTime":i=zc(t,Nc.Medium);break;case"longTime":i=zc(t,Nc.Long);break;case"fullTime":i=zc(t,Nc.Full);break;case"short":const e=th(t,"shortTime"),n=th(t,"shortDate");i=eh(jc(t,Nc.Short),[e,n]);break;case"medium":const r=th(t,"mediumTime"),s=th(t,"mediumDate");i=eh(jc(t,Nc.Medium),[r,s]);break;case"long":const o=th(t,"longTime"),a=th(t,"longDate");i=eh(jc(t,Nc.Long),[o,a]);break;case"full":const l=th(t,"fullTime"),u=th(t,"fullDate");i=eh(jc(t,Nc.Full),[l,u])}return i&&(Gc[n][e]=i),i}function eh(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(t,n){return null!=e&&n in e?e[n]:t})),t}function nh(t,e,n="-",i,r){let s="";(t<0||r&&t<=0)&&(r?t=1-t:(t=-t,s=n));let o=String(t);for(;o.length<e;)o="0"+o;return i&&(o=o.substr(o.length-e)),s+o}function ih(t,e,n=0,i=!1,r=!1){return function(s,o){let a=function(t,e){switch(t){case Kc.FullYear:return e.getFullYear();case Kc.Month:return e.getMonth();case Kc.Date:return e.getDate();case Kc.Hours:return e.getHours();case Kc.Minutes:return e.getMinutes();case Kc.Seconds:return e.getSeconds();case Kc.FractionalSeconds:return e.getMilliseconds();case Kc.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,s);if((n>0||a>-n)&&(a+=n),t===Kc.Hours)0===a&&-12===n&&(a=12);else if(t===Kc.FractionalSeconds)return l=e,nh(a,3).substr(0,l);var l;const u=Uc(o,Lc.MinusSign);return nh(a,e,u,i,r)}}function rh(t,e,n=Bc.Format,i=!1){return function(r,s){return function(t,e,n,i,r,s){switch(n){case Zc.Months:return function(t,e,n){const i=xa(t),r=qc([i[Ca.MonthsFormat],i[Ca.MonthsStandalone]],e);return qc(r,n)}(e,r,i)[t.getMonth()];case Zc.Days:return function(t,e,n){const i=xa(t),r=qc([i[Ca.DaysFormat],i[Ca.DaysStandalone]],e);return qc(r,n)}(e,r,i)[t.getDay()];case Zc.DayPeriods:const o=t.getHours(),a=t.getMinutes();if(s){const t=function(t){const e=xa(t);return Vc(e),(e[Ca.ExtraData][2]||[]).map(t=>"string"==typeof t?Hc(t):[Hc(t[0]),Hc(t[1])])}(e),n=function(t,e,n){const i=xa(t);Vc(i);const r=qc([i[Ca.ExtraData][0],i[Ca.ExtraData][1]],e)||[];return qc(r,n)||[]}(e,r,i),s=t.findIndex(t=>{if(Array.isArray(t)){const[e,n]=t,i=o>=e.hours&&a>=e.minutes,r=o<n.hours||o===n.hours&&a<n.minutes;if(e.hours<n.hours){if(i&&r)return!0}else if(i||r)return!0}else if(t.hours===o&&t.minutes===a)return!0;return!1});if(-1!==s)return n[s]}return function(t,e,n){const i=xa(t),r=qc([i[Ca.DayPeriodsFormat],i[Ca.DayPeriodsStandalone]],e);return qc(r,n)}(e,r,i)[o<12?0:1];case Zc.Eras:return function(t,e){return qc(xa(t)[Ca.Eras],e)}(e,i)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(r,s,t,e,n,i)}}function sh(t){return function(e,n,i){const r=-1*i,s=Uc(n,Lc.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(t){case Yc.Short:return(r>=0?"+":"")+nh(o,2,s)+nh(Math.abs(r%60),2,s);case Yc.ShortGMT:return"GMT"+(r>=0?"+":"")+nh(o,1,s);case Yc.Long:return"GMT"+(r>=0?"+":"")+nh(o,2,s)+":"+nh(Math.abs(r%60),2,s);case Yc.Extended:return 0===i?"Z":(r>=0?"+":"")+nh(o,2,s)+":"+nh(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${t}"`)}}}function oh(t){return Jc(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function ah(t,e=!1){return function(n,i){let r;if(e){const t=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,e=n.getDate();r=1+Math.floor((e+t)/7)}else{const t=oh(n),e=function(t){const e=Jc(t,0,1).getDay();return Jc(t,0,1+(e<=4?4:11)-e)}(t.getFullYear()),i=t.getTime()-e.getTime();r=1+Math.round(i/6048e5)}return nh(r,t,Uc(i,Lc.MinusSign))}}function lh(t,e=!1){return function(n,i){return nh(oh(n).getFullYear(),t,Uc(i,Lc.MinusSign),e)}}const uh={};function ch(t,e){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function hh(t){return t instanceof Date&&!isNaN(t.valueOf())}class dh{}let fh=(()=>{class t extends dh{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return xa(t)[Ca.PluralCase]}(e||this.locale)(t)){case Rc.Zero:return"zero";case Rc.One:return"one";case Rc.Two:return"two";case Rc.Few:return"few";case Rc.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(pi(Au))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();function ph(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[i,r]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(i.trim()===e)return decodeURIComponent(r)}return null}let mh=(()=>{class t{constructor(t,e,n,i){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(vo(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${rt(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(ko(ol),ko(ll),ko(ja),ko(qa))},t.\u0275dir=Zt({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class gh{constructor(t,e,n,i){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let yh=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,i)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new gh(null,this._ngForOf,-1,-1),null===i?void 0:i),r=new vh(t,n);e.push(r)}else if(null==i)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const r=this._viewContainer.get(n);this._viewContainer.move(r,i);const s=new vh(t,r);e.push(s)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,i=this._viewContainer.length;n<i;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=i,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(ko(El),ko(vl),ko(ol))},t.\u0275dir=Zt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class vh{constructor(t,e){this.record=t,this.view=e}}let _h=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new bh,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){xh("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){xh("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(ko(El),ko(vl))},t.\u0275dir=Zt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class bh{constructor(){this.$implicit=null,this.ngIf=null}}function xh(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${rt(e)}'.`)}class wh{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Ch=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Zt({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),Ah=(()=>{class t{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new wh(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(ko(El),ko(vl),ko(Ch,9))},t.\u0275dir=Zt({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})(),Eh=(()=>{class t{constructor(t,e,n){n._addDefault(new wh(t,e))}}return t.\u0275fac=function(e){return new(e||t)(ko(El),ko(vl),ko(Ch,9))},t.\u0275dir=Zt({type:t,selectors:[["","ngSwitchDefault",""]]}),t})();function kh(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${rt(t)}'`)}class Dh{createSubscription(t,e){return t.subscribe({next:e,error:t=>{throw t}})}dispose(t){t.unsubscribe()}onDestroy(t){t.unsubscribe()}}class Sh{createSubscription(t,e){return t.then(e,t=>{throw t})}dispose(t){}onDestroy(t){}}const Fh=new Sh,Oh=new Dh;let Mh=(()=>{class t{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,e=>this._updateLatestValue(t,e))}_selectStrategy(e){if(Bo(e))return Fh;if(Io(e))return Oh;throw kh(t,e)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,e){t===this._obj&&(this._latestValue=e,this._ref.markForCheck())}}return t.\u0275fac=function(e){return new(e||t)(ko(fl,16))},t.\u0275pipe=Qt({name:"async",type:t,pure:!1}),t})(),Th=(()=>{class t{transform(e){if(null==e)return null;if("string"!=typeof e)throw kh(t,e);return e.toUpperCase()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=Qt({name:"uppercase",type:t,pure:!0}),t})(),Ph=(()=>{class t{constructor(t){this.locale=t}transform(e,n="mediumDate",i,r){if(null==e||""===e||e!=e)return null;try{return Qc(e,n,r||this.locale,i)}catch(s){throw kh(t,s.message)}}}return t.\u0275fac=function(e){return new(e||t)(ko(Au,16))},t.\u0275pipe=Qt({name:"date",type:t,pure:!0}),t})(),Rh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({providers:[{provide:dh,useClass:fh}]}),t})();function Bh(t){return"browser"===t}function Ih(t){return"server"===t}let Nh=(()=>{class t{}return t.\u0275prov=pt({token:t,providedIn:"root",factory:()=>new Lh(pi(gc),window)}),t})();class Lh{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=n.currentNode;for(;i;){const t=i.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}i=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(n-r[0],i-r[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=$h(this.window.history)||$h(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function $h(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class zh{}class jh extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new jh,pc||(pc=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(Vh=Vh||document.querySelector("base"),Vh?Vh.getAttribute("href"):null);return null==e?null:function(t){Uh=Uh||document.createElement("a"),Uh.setAttribute("href",t);const e=Uh.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){Vh=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return ph(document.cookie,t)}}let Uh,Vh=null;const qh=new Kn("TRANSITION_ID"),Hh=[{provide:mu,useFactory:function(t,e,n){return()=>{n.get(gu).donePromise.then(()=>{const n=mc();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[qh,gc,ao],multi:!0}];class Wh{static init(){var t;t=new Wh,Xu=t}addToWindow(t){Rt.getAngularTestability=(e,n=!0)=>{const i=t.findTestabilityInTree(e,n);if(null==i)throw new Error("Could not find testability for element.");return i},Rt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Rt.getAllAngularRootElements=()=>t.getAllRootElements(),Rt.frameworkStabilizers||(Rt.frameworkStabilizers=[]),Rt.frameworkStabilizers.push(t=>{const e=Rt.getAllAngularTestabilities();let n=e.length,i=!1;const r=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(r)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:n?mc().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let Gh=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const Xh=new Kn("EventManagerPlugins");let Yh=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let i=0;i<n.length;i++){const e=n[i];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(pi(Xh),pi(Nu))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();class Kh{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const i=mc().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,n)}}let Zh=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),Qh=(()=>{class t extends Zh{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const i=this._doc.createElement("style");i.textContent=t,n.push(e.appendChild(i))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(Jh),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Jh))}}return t.\u0275fac=function(e){return new(e||t)(pi(gc))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();function Jh(t){mc().remove(t)}const td={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},ed=/%COMP%/g;function nd(t,e,n){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?nd(t,r,n):(r=r.replace(ed,t),n.push(r))}return n}function id(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let rd=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new sd(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case Ft.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new od(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case Ft.ShadowDom:return new ad(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=nd(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(pi(Yh),pi(Qh),pi(yu))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();class sd{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(td[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,i){if(i){e=i+":"+e;const r=td[i];r?t.setAttributeNS(r,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const i=td[n];i?t.removeAttributeNS(i,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(ur.DashCase|ur.Important)?t.style.setProperty(e,n,i&ur.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&ur.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,id(n)):this.eventManager.addEventListener(t,e,id(n))}}class od extends sd{constructor(t,e,n,i){super(t),this.component=n;const r=nd(i+"-"+n.id,n.styles,[]);e.addStyles(r),this.contentAttr="_ngcontent-%COMP%".replace(ed,i+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(ed,i+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class ad extends sd{constructor(t,e,n,i){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const r=nd(i.id,i.styles,[]);for(let s=0;s<r.length;s++){const t=document.createElement("style");t.textContent=r[s],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ld=(()=>{class t extends Kh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(pi(gc))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const ud=["alt","control","meta","shift"],cd={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hd={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},dd={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let fd=(()=>{class t extends Kh{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,i){const r=t.parseEventName(n),s=t.eventCallback(r.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>mc().onAndCancel(e,r.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),i=n.shift();if(0===n.length||"keydown"!==i&&"keyup"!==i)return null;const r=t._normalizeKey(n.pop());let s="";if(ud.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),s+=t+".")}),s+=r,0!=n.length||0===r.length)return null;const o={};return o.domEventName=i,o.fullKey=s,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&hd.hasOwnProperty(e)&&(e=hd[e]))}return cd[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),ud.forEach(i=>{i!=n&&(0,dd[i])(t)&&(e+=i+".")}),e+=n,e}static eventCallback(e,n,i){return r=>{t.getEventFullKey(r)===e&&i.runGuarded(()=>n(r))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(pi(gc))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),pd=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({factory:function(){return pi(gd)},token:t,providedIn:"root"}),t})();function md(t){return new gd(t.get(gc))}let gd=(()=>{class t extends pd{constructor(t){super(),this._doc=t}sanitize(t,e){if(null==e)return null;switch(t){case tr.NONE:return e;case tr.HTML:return Oi(e,"HTML")?Fi(e):function(t,e){let n=null;try{Qi=Qi||function(t){const e=new Pi(t);return function(){try{return!!(new window.DOMParser).parseFromString(wi(""),"text/html")}catch(t){return!1}}()?new Ti(e):e}(t);let i=e?String(e):"";n=Qi.getInertBodyElement(i);let r=5,s=i;do{if(0===r)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=n.innerHTML,n=Qi.getInertBodyElement(i)}while(i!==s);return wi((new Xi).sanitizeChildren(Ji(n)||n))}finally{if(n){const t=Ji(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}(this._doc,String(e)).toString();case tr.STYLE:return Oi(e,"Style")?Fi(e):e;case tr.SCRIPT:if(Oi(e,"Script"))return Fi(e);throw new Error("unsafe value used in a script context");case tr.URL:return Mi(e),Oi(e,"URL")?Fi(e):Ii(String(e));case tr.RESOURCE_URL:if(Oi(e,"ResourceURL"))return Fi(e);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return new Ai(t)}bypassSecurityTrustStyle(t){return new Ei(t)}bypassSecurityTrustScript(t){return new ki(t)}bypassSecurityTrustUrl(t){return new Di(t)}bypassSecurityTrustResourceUrl(t){return new Si(t)}}return t.\u0275fac=function(e){return new(e||t)(pi(gc))},t.\u0275prov=pt({factory:function(){return md(pi(Ws))},token:t,providedIn:"root"}),t})();const yd=tc(hc,"browser",[{provide:xu,useValue:"browser"},{provide:bu,useValue:function(){jh.makeCurrent(),Wh.init()},multi:!0},{provide:gc,useFactory:function(){return function(t){ye=t}(document),document},deps:[]}]),vd=[[],{provide:Xs,useValue:"root"},{provide:or,useFactory:function(){return new or},deps:[]},{provide:Xh,useClass:ld,multi:!0,deps:[gc,Nu,xu]},{provide:Xh,useClass:fd,multi:!0,deps:[gc]},[],{provide:rd,useClass:rd,deps:[Yh,Qh,yu]},{provide:Va,useExisting:rd},{provide:Zh,useExisting:Qh},{provide:Qh,useClass:Qh,deps:[gc]},{provide:qu,useClass:qu,deps:[Nu]},{provide:Yh,useClass:Yh,deps:[Xh,Nu]},{provide:zh,useClass:Gh,deps:[]},[]];let _d=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:yu,useValue:e.appId},{provide:qh,useExisting:yu},Hh]}}}return t.\u0275fac=function(e){return new(e||t)(pi(t,12))},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({providers:vd,imports:[Rh,fc]}),t})();function bd(...t){let e=t[t.length-1];return S(e)?(t.pop(),N(t,e)):W(t)}function xd(t,e){return U(t,e,1)}function wd(t,e){return function(n){return n.lift(new Cd(t,e))}}"undefined"!=typeof window&&window;class Cd{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Ad(t,this.predicate,this.thisArg))}}class Ad extends y{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}class Ed{}class kd{}class Dd{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),i=n.toLowerCase(),r=t.slice(e+1).trim();this.maybeSetNormalizedName(n,i),this.headers.has(i)?this.headers.get(i).push(r):this.headers.set(i,[r])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const i=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(i,n),this.maybeSetNormalizedName(e,i))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Dd?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Dd;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Dd?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const i=("a"===t.op?this.headers.get(e):void 0)||[];i.push(...n),this.headers.set(e,i);break;case"d":const r=t.value;if(r){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===r.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class Sd{encodeKey(t){return Fd(t)}encodeValue(t){return Fd(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function Fd(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function Od(t){return`${t}`}class Md{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Sd,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const i=t.indexOf("="),[r,s]=-1==i?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,i)),e.decodeValue(t.slice(i+1))],o=n.get(r)||[];o.push(s),n.set(r,o)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const i=t[n];Array.isArray(i)?i.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Md({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(Od(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(Od(t.value));-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class Td{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function Pd(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Rd(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Bd(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Id{constructor(t,e,n,i){let r;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==n?n:null,r=i):r=n,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params)),this.headers||(this.headers=new Dd),this.context||(this.context=new Td),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new Md,this.urlWithParams=e}serializeBody(){return null===this.body?null:Pd(this.body)||Rd(this.body)||Bd(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof Md?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Bd(this.body)?null:Rd(this.body)?this.body.type||null:Pd(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Md?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const n=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,u=t.params||this.params;const c=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),l)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new Id(n,i,s,{params:u,headers:l,context:c,reportProgress:a,responseType:r,withCredentials:o})}}var Nd=(()=>((Nd=Nd||{})[Nd.Sent=0]="Sent",Nd[Nd.UploadProgress=1]="UploadProgress",Nd[Nd.ResponseHeader=2]="ResponseHeader",Nd[Nd.DownloadProgress=3]="DownloadProgress",Nd[Nd.Response=4]="Response",Nd[Nd.User=5]="User",Nd))();class Ld{constructor(t,e=200,n="OK"){this.headers=t.headers||new Dd,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class $d extends Ld{constructor(t={}){super(t),this.type=Nd.ResponseHeader}clone(t={}){return new $d({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class zd extends Ld{constructor(t={}){super(t),this.type=Nd.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new zd({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class jd extends Ld{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function Ud(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Vd=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let i;if(t instanceof Id)i=t;else{let r,s;r=n.headers instanceof Dd?n.headers:new Dd(n.headers),n.params&&(s=n.params instanceof Md?n.params:new Md({fromObject:n.params})),i=new Id(t,e,void 0!==n.body?n.body:null,{headers:r,context:n.context,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const r=bd(i).pipe(xd(t=>this.handler.handle(t)));if(t instanceof Id||"events"===n.observe)return r;const s=r.pipe(wd(t=>t instanceof zd));switch(n.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return s.pipe(F(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return s.pipe(F(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return s.pipe(F(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return s.pipe(F(t=>t.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new Md).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,Ud(n,e))}post(t,e,n={}){return this.request("POST",t,Ud(n,e))}put(t,e,n={}){return this.request("PUT",t,Ud(n,e))}}return t.\u0275fac=function(e){return new(e||t)(pi(Ed))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();class qd{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const Hd=new Kn("HTTP_INTERCEPTORS");let Wd=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const Gd=/^\)\]\}',?\n/;let Xd=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new x(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const i=t.serializeBody();let r=null;const s=()=>{if(null!==r)return r;const e=1223===n.status?204:n.status,i=n.statusText||"OK",s=new Dd(n.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return r=new $d({headers:s,status:e,statusText:i,url:o}),r},o=()=>{let{headers:i,status:r,statusText:o,url:a}=s(),l=null;204!==r&&(l=void 0===n.response?n.responseText:n.response),0===r&&(r=l?200:0);let u=r>=200&&r<300;if("json"===t.responseType&&"string"==typeof l){const t=l;l=l.replace(Gd,"");try{l=""!==l?JSON.parse(l):null}catch(c){l=t,u&&(u=!1,l={error:c,text:l})}}u?(e.next(new zd({body:l,headers:i,status:r,statusText:o,url:a||void 0})),e.complete()):e.error(new jd({error:l,headers:i,status:r,statusText:o,url:a||void 0}))},a=t=>{const{url:i}=s(),r=new jd({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:i||void 0});e.error(r)};let l=!1;const u=i=>{l||(e.next(s()),l=!0);let r={type:Nd.DownloadProgress,loaded:i.loaded};i.lengthComputable&&(r.total=i.total),"text"===t.responseType&&n.responseText&&(r.partialText=n.responseText),e.next(r)},c=t=>{let n={type:Nd.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",o),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",u),null!==i&&n.upload&&n.upload.addEventListener("progress",c)),n.send(i),e.next({type:Nd.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",o),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",u),null!==i&&n.upload&&n.upload.removeEventListener("progress",c)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(pi(zh))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const Yd=new Kn("XSRF_COOKIE_NAME"),Kd=new Kn("XSRF_HEADER_NAME");class Zd{}let Qd,Jd=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ph(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(pi(gc),pi(xu),pi(Yd))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),tf=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const i=this.tokenService.getToken();return null===i||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,i)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(pi(Zd),pi(Kd))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),ef=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(Hd,[]);this.chain=t.reduceRight((t,e)=>new qd(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(pi(kd),pi(ao))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),nf=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:tf,useClass:Wd}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:Yd,useValue:e.cookieName}:[],e.headerName?{provide:Kd,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({providers:[tf,{provide:Hd,useExisting:tf,multi:!0},{provide:Zd,useClass:Jd},{provide:Yd,useValue:"XSRF-TOKEN"},{provide:Kd,useValue:"X-XSRF-TOKEN"}]}),t})(),rf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({providers:[Vd,{provide:Ed,useClass:ef},Xd,{provide:kd,useExisting:Xd}],imports:[[nf.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();try{Qd="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(mR){Qd=!1}let sf,of,af,lf,uf=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?Bh(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!Qd)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(pi(xu))},t.\u0275prov=pt({factory:function(){return new t(pi(xu))},token:t,providedIn:"root"}),t})(),cf=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({}),t})();function hf(t){return function(){if(null==sf&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>sf=!0}))}finally{sf=sf||!1}return sf}()?t:!!t.capture}function df(){if(null==af){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return af=!1,af;if("scrollBehavior"in document.documentElement.style)af=!0;else{const t=Element.prototype.scrollTo;af=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return af}function ff(){if("object"!=typeof document||!document)return 0;if(null==of){const t=document.createElement("div"),e=t.style;t.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const n=document.createElement("div"),i=n.style;i.width="2px",i.height="1px",t.appendChild(n),document.body.appendChild(t),of=0,0===t.scrollLeft&&(t.scrollLeft=1,of=0===t.scrollLeft?1:2),t.parentNode.removeChild(t)}return of}function pf(t){if(function(){if(null==lf){const t="undefined"!=typeof document?document.head:null;lf=!(!t||!t.createShadowRoot&&!t.attachShadow)}return lf}()){const e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function mf(){let t="undefined"!=typeof document&&document?document.activeElement:null;for(;t&&t.shadowRoot;){const e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function gf(t){return t.composedPath?t.composedPath()[0]:t.target}function yf(t){return null!=t&&"false"!=`${t}`}function vf(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function _f(t){return Array.isArray(t)?t:[t]}function bf(t){return null==t?"":"string"==typeof t?t:`${t}px`}function xf(t){return t instanceof ja?t.nativeElement:t}function wf(t,e,n,i){return o(n)&&(i=n,n=void 0),i?wf(t,e,n).pipe(F(t=>h(t)?i(...t):i(t))):new x(i=>{Cf(t,e,function(t){i.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},i,n)})}function Cf(t,e,n,i,r){let s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const i=t;t.addEventListener(e,n,r),s=()=>i.removeEventListener(e,n,r)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const i=t;t.on(e,n),s=()=>i.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const i=t;t.addListener(e,n),s=()=>i.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let s=0,o=t.length;s<o;s++)Cf(t[s],e,n,i,r)}i.add(s)}class Af extends p{constructor(t,e){super()}schedule(t,e=0){return this}}class Ef extends Af{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(i,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,i=!1;try{this.work(t)}catch(r){i=!0,n=!!r&&r||new Error(r)}if(i)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let kf=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class Df extends kf{constructor(t,e=kf.now){super(t,()=>Df.delegate&&Df.delegate!==this?Df.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return Df.delegate&&Df.delegate!==this?Df.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}new class extends Df{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,i=-1,r=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++i<r&&(t=e.shift()));if(this.active=!1,n){for(;++i<r&&(t=e.shift());)t.unsubscribe();throw n}}}(class extends Ef{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame(()=>t.flush(null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(cancelAnimationFrame(e),t.scheduled=void 0)}});let Sf=1;const Ff=Promise.resolve(),Of={};function Mf(t){return t in Of&&(delete Of[t],!0)}const Tf={setImmediate(t){const e=Sf++;return Of[e]=!0,Ff.then(()=>Mf(e)&&t()),e},clearImmediate(t){Mf(t)}};function Pf(t){return!!t&&(t instanceof x||"function"==typeof t.lift&&"function"==typeof t.subscribe)}function Rf(t,e){return n=>n.lift(new Bf(t,e))}new class extends Df{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,i=-1,r=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++i<r&&(t=e.shift()));if(this.active=!1,n){for(;++i<r&&(t=e.shift());)t.unsubscribe();throw n}}}(class extends Ef{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=Tf.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(Tf.clearImmediate(e),t.scheduled=void 0)}});class Bf{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new If(t,this.compare,this.keySelector))}}class If extends y{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(i){return this.destination.error(i)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}const Nf=new Df(Ef);class Lf{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new $f(t,this.durationSelector))}}class $f extends z{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:e}=this;n=e(t)}catch(e){return this.destination.error(e)}const i=j(n,new $(this));!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:t,hasValue:e,throttled:n}=this;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function zf(t){return!h(t)&&t-parseFloat(t)+1>=0}function jf(t){const{index:e,period:n,subscriber:i}=t;if(i.next(e),!i.closed){if(-1===n)return i.complete();t.index=e+1,this.schedule(t,n)}}function Uf(t,e=Nf){return n=()=>function(t=0,e,n){let i=-1;return zf(e)?i=Number(e)<1?1:Number(e):S(e)&&(n=e),S(n)||(n=Nf),new x(e=>{const r=zf(t)?t:+t-n.now();return n.schedule(jf,r,{index:0,period:i,subscriber:e})})}(t,e),function(t){return t.lift(new Lf(n))};var n}function Vf(t){return e=>e.lift(new qf(t))}class qf{constructor(t){this.notifier=t}call(t,e){const n=new Hf(t),i=j(this.notifier,new $(n));return i&&!n.seenValue?(n.add(i),e.subscribe(n)):n}}class Hf extends z{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function Wf(...t){return H(1)(bd(...t))}function Gf(...t){const e=t[t.length-1];return S(e)?(t.pop(),n=>Wf(t,n,e)):e=>Wf(t,e)}function Xf(t,e){return"function"==typeof e?n=>n.pipe(Xf((n,i)=>L(t(n,i)).pipe(F((t,r)=>e(n,t,i,r))))):e=>e.lift(new Yf(t))}class Yf{constructor(t){this.project=t}call(t,e){return e.subscribe(new Kf(t,this.project))}}class Kf extends z{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new $(this),i=this.destination;i.add(n),this.innerSubscription=j(t,n),this.innerSubscription!==n&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Zf=new class extends Df{}(class extends Ef{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}),Qf=new x(t=>t.complete());function Jf(t){return t?function(t){return new x(e=>t.schedule(()=>e.complete()))}(t):Qf}function tp(t,e){return new x(e?n=>e.schedule(ep,0,{error:t,subscriber:n}):e=>e.error(t))}function ep({error:t,subscriber:e}){e.error(t)}class np{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return bd(this.value);case"E":return tp(this.error);case"C":return Jf()}throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new np("N",t):np.undefinedValueNotification}static createError(t){return new np("E",void 0,t)}static createComplete(){return np.completeNotification}}np.completeNotification=new np("C"),np.undefinedValueNotification=new np("N",void 0);class ip extends y{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(ip.dispatch,this.delay,new rp(t,this.destination)))}_next(t){this.scheduleMessage(np.createNext(t))}_error(t){this.scheduleMessage(np.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(np.createComplete()),this.unsubscribe()}}class rp{constructor(t,e){this.notification=t,this.destination=e}}class sp extends k{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new op(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,r=n.length;let s;if(this.closed)throw new C;if(this.isStopped||this.hasError?s=p.EMPTY:(this.observers.push(t),s=new A(this,t)),i&&t.add(t=new ip(t,i)),e)for(let o=0;o<r&&!t.closed;o++)t.next(n[o]);else for(let o=0;o<r&&!t.closed;o++)t.next(n[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),s}_getNow(){return(this.scheduler||Zf).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,i=this._events,r=i.length;let s=0;for(;s<r&&!(t-i[s].time<n);)s++;return r>e&&(s=Math.max(s,r-e)),s>0&&i.splice(0,s),i}}class op{constructor(t,e){this.time=t,this.value=e}}function ap(t,e,n){let i;return i=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:i}){let r,s,o=0,a=!1,l=!1;return function(u){let c;o++,!r||a?(a=!1,r=new sp(t,e,i),c=r.subscribe(this),s=u.subscribe({next(t){r.next(t)},error(t){a=!0,r.error(t)},complete(){l=!0,s=void 0,r.complete()}}),l&&(s=void 0)):c=r.subscribe(this),this.add(()=>{o--,c.unsubscribe(),c=void 0,s&&!l&&n&&0===o&&(s.unsubscribe(),s=void 0,r=void 0)})}}(i))}const lp=new Kn("cdk-dir-doc",{providedIn:"root",factory:function(){return mi(gc)}});let up=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new Yl,t){const e=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||e;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)(pi(lp,8))},t.\u0275prov=pt({factory:function(){return new t(pi(lp,8))},token:t,providedIn:"root"}),t})(),cp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({}),t})();class hp{constructor(t=!1,e,n=!0){this._multiple=t,this._emitChanges=n,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new k,e&&e.length&&(t?e.forEach(t=>this._markSelected(t)):this._markSelected(e[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...t){this._verifyValueAssignment(t),t.forEach(t=>this._markSelected(t)),this._emitChangeEvent()}deselect(...t){this._verifyValueAssignment(t),t.forEach(t=>this._unmarkSelected(t)),this._emitChangeEvent()}toggle(t){this.isSelected(t)?this.deselect(t):this.select(t)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(t){return this._selection.has(t)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){this.isSelected(t)||(this._multiple||this._unmarkAll(),this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){}}let dp=(()=>{class t{constructor(){this._listeners=[]}notify(t,e){for(let n of this._listeners)n(t,e)}listen(t){return this._listeners.push(t),()=>{this._listeners=this._listeners.filter(e=>t!==e)}}ngOnDestroy(){this._listeners=[]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({factory:function(){return new t},token:t,providedIn:"root"}),t})(),fp=(()=>{class t{constructor(t,e,n){this._ngZone=t,this._platform=e,this._scrolled=new k,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new x(e=>{this._globalSubscription||this._addGlobalListener();const n=t>0?this._scrolled.pipe(Uf(t)).subscribe(e):this._scrolled.subscribe(e);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):bd()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,e)=>this.deregister(e)),this._scrolled.complete()}ancestorScrolled(t,e){const n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(wd(t=>!t||n.indexOf(t)>-1))}getAncestorScrollContainers(t){const e=[];return this.scrollContainers.forEach((n,i)=>{this._scrollableContainsElement(i,t)&&e.push(i)}),e}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,e){let n=xf(e),i=t.getElementRef().nativeElement;do{if(n==i)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>wf(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.\u0275fac=function(e){return new(e||t)(pi(Nu),pi(uf),pi(gc,8))},t.\u0275prov=pt({factory:function(){return new t(pi(Nu),pi(uf),pi(gc,8))},token:t,providedIn:"root"}),t})(),pp=(()=>{class t{constructor(t,e,n,i){this.elementRef=t,this.scrollDispatcher=e,this.ngZone=n,this.dir=i,this._destroyed=new k,this._elementScrolled=new x(t=>this.ngZone.runOutsideAngular(()=>wf(this.elementRef.nativeElement,"scroll").pipe(Vf(this._destroyed)).subscribe(t)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const e=this.elementRef.nativeElement,n=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=n?t.end:t.start),null==t.right&&(t.right=n?t.start:t.end),null!=t.bottom&&(t.top=e.scrollHeight-e.clientHeight-t.bottom),n&&0!=ff()?(null!=t.left&&(t.right=e.scrollWidth-e.clientWidth-t.left),2==ff()?t.left=t.right:1==ff()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=e.scrollWidth-e.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const e=this.elementRef.nativeElement;df()?e.scrollTo(t):(null!=t.top&&(e.scrollTop=t.top),null!=t.left&&(e.scrollLeft=t.left))}measureScrollOffset(t){const e="left",n="right",i=this.elementRef.nativeElement;if("top"==t)return i.scrollTop;if("bottom"==t)return i.scrollHeight-i.clientHeight-i.scrollTop;const r=this.dir&&"rtl"==this.dir.value;return"start"==t?t=r?n:e:"end"==t&&(t=r?e:n),r&&2==ff()?t==e?i.scrollWidth-i.clientWidth-i.scrollLeft:i.scrollLeft:r&&1==ff()?t==e?i.scrollLeft+i.scrollWidth-i.clientWidth:-i.scrollLeft:t==e?i.scrollLeft:i.scrollWidth-i.clientWidth-i.scrollLeft}}return t.\u0275fac=function(e){return new(e||t)(ko(ja),ko(fp),ko(Nu),ko(up,8))},t.\u0275dir=Zt({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),t})(),mp=(()=>{class t{constructor(t,e,n){this._platform=t,this._change=new k,this._changeListener=t=>{this._change.next(t)},this._document=n,e.runOutsideAngular(()=>{if(t.isBrowser){const t=this._getWindow();t.addEventListener("resize",this._changeListener),t.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:e,height:n}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+n,right:t.left+e,height:n,width:e}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,e=this._getWindow(),n=t.documentElement,i=n.getBoundingClientRect();return{top:-i.top||t.body.scrollTop||e.scrollY||n.scrollTop||0,left:-i.left||t.body.scrollLeft||e.scrollX||n.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(Uf(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return t.\u0275fac=function(e){return new(e||t)(pi(uf),pi(Nu),pi(gc,8))},t.\u0275prov=pt({factory:function(){return new t(pi(uf),pi(Nu),pi(gc,8))},token:t,providedIn:"root"}),t})(),gp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({}),t})(),yp=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[cp,cf,gp],cp,gp]}),t})();class vp extends k{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new C;return this._value}next(t){super.next(this._value=t)}}function _p(t,...e){return e.length?e.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}function bp(){}function xp(t,e,n){return function(i){return i.lift(new wp(t,e,n))}}class wp{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new Cp(t,this.nextOrObserver,this.error,this.complete))}}class Cp extends y{constructor(t,e,n,i){super(t),this._tapNext=bp,this._tapError=bp,this._tapComplete=bp,this._tapError=n||bp,this._tapComplete=i||bp,o(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||bp,this._tapError=e.error||bp,this._tapComplete=e.complete||bp)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}function Ap(t,e=Nf){return n=>n.lift(new Ep(t,e))}class Ep{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new kp(t,this.dueTime,this.scheduler))}}class kp extends y{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Dp,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function Dp(t){t.debouncedNext()}const Sp=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Fp(t){return e=>0===t?Jf():e.lift(new Op(t))}class Op{constructor(t){if(this.total=t,this.total<0)throw new Sp}call(t,e){return e.subscribe(new Mp(t,this.total))}}class Mp extends y{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}class Tp{constructor(t){this.total=t}call(t,e){return e.subscribe(new Pp(t,this.total))}}class Pp extends y{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}let Rp=(()=>{class t{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({factory:function(){return new t},token:t,providedIn:"root"}),t})(),Bp=(()=>{class t{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,e)=>this._cleanupObserver(e))}observe(t){const e=xf(t);return new x(t=>{const n=this._observeElement(e).subscribe(t);return()=>{n.unsubscribe(),this._unobserveElement(e)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const e=new k,n=this._mutationObserverFactory.create(t=>e.next(t));n&&n.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:n,stream:e,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:e,stream:n}=this._observedElements.get(t);e&&e.disconnect(),n.complete(),this._observedElements.delete(t)}}}return t.\u0275fac=function(e){return new(e||t)(pi(Rp))},t.\u0275prov=pt({factory:function(){return new t(pi(Rp))},token:t,providedIn:"root"}),t})(),Ip=(()=>{class t{constructor(t,e,n){this._contentObserver=t,this._elementRef=e,this._ngZone=n,this.event=new Yl,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=yf(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=vf(t),this._subscribe()}ngAfterContentInit(){this._currentSubscription||this.disabled||this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(Ap(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(ko(Bp),ko(ja),ko(Nu))},t.\u0275dir=Zt({type:t,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),t})(),Np=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({providers:[Rp]}),t})();class Lp{constructor(t){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new k,this._typeaheadSubscription=p.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=t=>t.disabled,this._pressedLetters=[],this.tabOut=new k,this.change=new k,t instanceof Zl&&t.changes.subscribe(t=>{if(this._activeItem){const e=t.toArray().indexOf(this._activeItem);e>-1&&e!==this._activeItemIndex&&(this._activeItemIndex=e)}})}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(xp(t=>this._pressedLetters.push(t)),Ap(t),wd(()=>this._pressedLetters.length>0),F(()=>this._pressedLetters.join(""))).subscribe(t=>{const e=this._getItemsArray();for(let n=1;n<e.length+1;n++){const i=(this._activeItemIndex+n)%e.length,r=e[i];if(!this._skipPredicateFn(r)&&0===r.getLabel().toUpperCase().trim().indexOf(t)){this.setActiveItem(i);break}}this._pressedLetters=[]}),this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}setActiveItem(t){const e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){const e=t.keyCode,n=["altKey","ctrlKey","metaKey","shiftKey"].every(e=>!t[e]||this._allowedModifierKeys.indexOf(e)>-1);switch(e){case 9:return void this.tabOut.next();case 40:if(this._vertical&&n){this.setNextItemActive();break}return;case 38:if(this._vertical&&n){this.setPreviousItemActive();break}return;case 39:if(this._horizontal&&n){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case 37:if(this._horizontal&&n){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case 36:if(this._homeAndEnd&&n){this.setFirstItemActive();break}return;case 35:if(this._homeAndEnd&&n){this.setLastItemActive();break}return;default:return void((n||_p(t,"shiftKey"))&&(t.key&&1===t.key.length?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e))))}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){const e=this._getItemsArray(),n="number"==typeof t?t:e.indexOf(t),i=e[n];this._activeItem=null==i?null:i,this._activeItemIndex=n}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){const e=this._getItemsArray();for(let n=1;n<=e.length;n++){const i=(this._activeItemIndex+t*n+e.length)%e.length;if(!this._skipPredicateFn(e[i]))return void this.setActiveItem(i)}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){const n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(!n[t+=e])return;this.setActiveItem(t)}}_getItemsArray(){return this._items instanceof Zl?this._items.toArray():this._items}}class $p extends Lp{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}}class zp extends Lp{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}}let jp=(()=>{class t{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const e=function(t){try{return t.frameElement}catch(mR){return null}}((n=t).ownerDocument&&n.ownerDocument.defaultView||window);var n;if(e){if(-1===Vp(e))return!1;if(!this.isVisible(e))return!1}let i=t.nodeName.toLowerCase(),r=Vp(t);return t.hasAttribute("contenteditable")?-1!==r:"iframe"!==i&&"object"!==i&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==r:"video"===i?-1!==r&&(null!==r||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,e){return function(t){return!function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||Up(t))}(t)&&!this.isDisabled(t)&&((null==e?void 0:e.ignoreVisibility)||this.isVisible(t))}}return t.\u0275fac=function(e){return new(e||t)(pi(uf))},t.\u0275prov=pt({factory:function(){return new t(pi(uf))},token:t,providedIn:"root"}),t})();function Up(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function Vp(t){if(!Up(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class qp{constructor(t,e,n,i,r=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,r||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);for(let n=0;n<e.length;n++)e[n].hasAttribute(`cdk-focus-${t}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]):e[n].hasAttribute(`cdk-focus-region-${t}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const n=this._getFirstTabbableElement(e);return null==n||n.focus(t),!!n}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=0;n<e.length;n++){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(t)return t}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=e.length-1;n>=0;n--){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(t)return t}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(Fp(1)).subscribe(t)}}let Hp=(()=>{class t{constructor(t,e,n){this._checker=t,this._ngZone=e,this._document=n}create(t,e=!1){return new qp(t,this._checker,this._ngZone,this._document,e)}}return t.\u0275fac=function(e){return new(e||t)(pi(jp),pi(Nu),pi(gc))},t.\u0275prov=pt({factory:function(){return new t(pi(jp),pi(Nu),pi(gc))},token:t,providedIn:"root"}),t})();function Wp(t){return 0===t.offsetX&&0===t.offsetY}function Gp(t){const e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}"undefined"!=typeof Element&&Element;const Xp=new Kn("cdk-input-modality-detector-options"),Yp={ignoreKeys:[18,17,224,91,16]},Kp=hf({passive:!0,capture:!0});let Zp=(()=>{class t{constructor(t,e,n,i){this._platform=t,this._mostRecentTarget=null,this._modality=new vp(null),this._lastTouchMs=0,this._onKeydown=t=>{var e,n;(null===(n=null===(e=this._options)||void 0===e?void 0:e.ignoreKeys)||void 0===n?void 0:n.some(e=>e===t.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=gf(t))},this._onMousedown=t=>{Date.now()-this._lastTouchMs<650||(this._modality.next(Wp(t)?"keyboard":"mouse"),this._mostRecentTarget=gf(t))},this._onTouchstart=t=>{Gp(t)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=gf(t))},this._options=Object.assign(Object.assign({},Yp),i),this.modalityDetected=this._modality.pipe(t=>t.lift(new Tp(1))),this.modalityChanged=this.modalityDetected.pipe(Rf()),t.isBrowser&&e.runOutsideAngular(()=>{n.addEventListener("keydown",this._onKeydown,Kp),n.addEventListener("mousedown",this._onMousedown,Kp),n.addEventListener("touchstart",this._onTouchstart,Kp)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Kp),document.removeEventListener("mousedown",this._onMousedown,Kp),document.removeEventListener("touchstart",this._onTouchstart,Kp))}}return t.\u0275fac=function(e){return new(e||t)(pi(uf),pi(Nu),pi(gc),pi(Xp,8))},t.\u0275prov=pt({factory:function(){return new t(pi(uf),pi(Nu),pi(gc),pi(Xp,8))},token:t,providedIn:"root"}),t})();const Qp=new Kn("liveAnnouncerElement",{providedIn:"root",factory:function(){return null}}),Jp=new Kn("LIVE_ANNOUNCER_DEFAULT_OPTIONS");let tm=(()=>{class t{constructor(t,e,n,i){this._ngZone=e,this._defaultOptions=i,this._document=n,this._liveElement=t||this._createLiveElement()}announce(t,...e){const n=this._defaultOptions;let i,r;return 1===e.length&&"number"==typeof e[0]?r=e[0]:[i,r]=e,this.clear(),clearTimeout(this._previousTimeout),i||(i=n&&n.politeness?n.politeness:"polite"),null==r&&n&&(r=n.duration),this._liveElement.setAttribute("aria-live",i),this._ngZone.runOutsideAngular(()=>new Promise(e=>{clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=t,e(),"number"==typeof r&&(this._previousTimeout=setTimeout(()=>this.clear(),r))},100)}))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement&&this._liveElement.parentNode&&(this._liveElement.parentNode.removeChild(this._liveElement),this._liveElement=null)}_createLiveElement(){const t="cdk-live-announcer-element",e=this._document.getElementsByClassName(t),n=this._document.createElement("div");for(let i=0;i<e.length;i++)e[i].parentNode.removeChild(e[i]);return n.classList.add(t),n.classList.add("cdk-visually-hidden"),n.setAttribute("aria-atomic","true"),n.setAttribute("aria-live","polite"),this._document.body.appendChild(n),n}}return t.\u0275fac=function(e){return new(e||t)(pi(Qp,8),pi(Nu),pi(gc),pi(Jp,8))},t.\u0275prov=pt({factory:function(){return new t(pi(Qp,8),pi(Nu),pi(gc),pi(Jp,8))},token:t,providedIn:"root"}),t})();const em=new Kn("cdk-focus-monitor-default-options"),nm=hf({passive:!0,capture:!0});let im=(()=>{class t{constructor(t,e,n,i,r){this._ngZone=t,this._platform=e,this._inputModalityDetector=n,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new k,this._rootNodeFocusAndBlurListener=t=>{const e=gf(t),n="focus"===t.type?this._onFocus:this._onBlur;for(let i=e;i;i=i.parentElement)n.call(this,t,i)},this._document=i,this._detectionMode=(null==r?void 0:r.detectionMode)||0}monitor(t,e=!1){const n=xf(t);if(!this._platform.isBrowser||1!==n.nodeType)return bd(null);const i=pf(n)||this._getDocument(),r=this._elementInfo.get(n);if(r)return e&&(r.checkChildren=!0),r.subject;const s={checkChildren:e,subject:new k,rootNode:i};return this._elementInfo.set(n,s),this._registerGlobalListeners(s),s.subject}stopMonitoring(t){const e=xf(t),n=this._elementInfo.get(e);n&&(n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(n))}focusVia(t,e,n){const i=xf(t);i===this._getDocument().activeElement?this._getClosestElementsInfo(i).forEach(([t,n])=>this._originChanged(t,e,n)):(this._setOrigin(e),"function"==typeof i.focus&&i.focus(n))}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,e,n){n?t.classList.add(e):t.classList.remove(e)}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,e){this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e)}_setOrigin(t,e=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&e,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,e){const n=this._elementInfo.get(e),i=gf(t);n&&(n.checkChildren||e===i)&&this._originChanged(e,this._getFocusOrigin(i),n)}_onBlur(t,e){const n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}_emitOrigin(t,e){this._ngZone.run(()=>t.next(e))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const e=t.rootNode,n=this._rootNodeFocusListenerCount.get(e)||0;n||this._ngZone.runOutsideAngular(()=>{e.addEventListener("focus",this._rootNodeFocusAndBlurListener,nm),e.addEventListener("blur",this._rootNodeFocusAndBlurListener,nm)}),this._rootNodeFocusListenerCount.set(e,n+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Vf(this._stopInputModalityDetector)).subscribe(t=>{this._setOrigin(t,!0)}))}_removeGlobalListeners(t){const e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){const t=this._rootNodeFocusListenerCount.get(e);t>1?this._rootNodeFocusListenerCount.set(e,t-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,nm),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,nm),this._rootNodeFocusListenerCount.delete(e))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,e,n){this._setClasses(t,e),this._emitOrigin(n.subject,e),this._lastFocusOrigin=e}_getClosestElementsInfo(t){const e=[];return this._elementInfo.forEach((n,i)=>{(i===t||n.checkChildren&&i.contains(t))&&e.push([i,n])}),e}}return t.\u0275fac=function(e){return new(e||t)(pi(Nu),pi(uf),pi(Zp),pi(gc,8),pi(em,8))},t.\u0275prov=pt({factory:function(){return new t(pi(Nu),pi(uf),pi(Zp),pi(gc,8),pi(em,8))},token:t,providedIn:"root"}),t})();const rm="cdk-high-contrast-black-on-white",sm="cdk-high-contrast-white-on-black",om="cdk-high-contrast-active";let am=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,i=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),i){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(om),t.remove(rm),t.remove(sm),this._hasCheckedHighContrastMode=!0;const e=this.getHighContrastMode();1===e?(t.add(om),t.add(rm)):2===e&&(t.add(om),t.add(sm))}}}return t.\u0275fac=function(e){return new(e||t)(pi(uf),pi(gc))},t.\u0275prov=pt({factory:function(){return new t(pi(uf),pi(gc))},token:t,providedIn:"root"}),t})();const lm=new Ga("12.1.4");class um{}const cm="*";function hm(t,e){return{type:7,name:t,definitions:e,options:{}}}function dm(t,e=null){return{type:4,styles:e,timings:t}}function fm(t,e=null){return{type:2,steps:t,options:e}}function pm(t){return{type:6,styles:t,offset:null}}function mm(t,e,n){return{type:0,name:t,styles:e,options:n}}function gm(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function ym(t=null){return{type:9,options:t}}function vm(t,e,n=null){return{type:11,selector:t,animation:e,options:n}}function _m(t){Promise.resolve(null).then(t)}class bm{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){_m(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class xm{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,i=0;const r=this.players.length;0==r?_m(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==r&&this._onFinish()}),t.onDestroy(()=>{++n==r&&this._onDestroy()}),t.onStart(()=>{++i==r&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function wm(){return"undefined"!=typeof window&&void 0!==window.document}function Cm(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Am(t){switch(t.length){case 0:return new bm;case 1:return t[0];default:return new xm(t)}}function Em(t,e,n,i,r={},s={}){const o=[],a=[];let l=-1,u=null;if(i.forEach(t=>{const n=t.offset,i=n==l,c=i&&u||{};Object.keys(t).forEach(n=>{let i=n,a=t[n];if("offset"!==n)switch(i=e.normalizePropertyName(i,o),a){case"!":a=r[n];break;case cm:a=s[n];break;default:a=e.normalizeStyleValue(n,i,a,o)}c[i]=a}),i||a.push(c),u=c,l=n}),o.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${o.join(t)}`)}return a}function km(t,e,n,i){switch(e){case"start":t.onStart(()=>i(n&&Dm(n,"start",t)));break;case"done":t.onDone(()=>i(n&&Dm(n,"done",t)));break;case"destroy":t.onDestroy(()=>i(n&&Dm(n,"destroy",t)))}}function Dm(t,e,n){const i=n.totalTime,r=Sm(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==i?t.totalTime:i,!!n.disabled),s=t._data;return null!=s&&(r._data=s),r}function Sm(t,e,n,i,r="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function Fm(t,e,n){let i;return t instanceof Map?(i=t.get(e),i||t.set(e,i=n)):(i=t[e],i||(i=t[e]=n)),i}function Om(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let Mm=(t,e)=>!1,Tm=(t,e)=>!1,Pm=(t,e,n)=>[];const Rm=Cm();(Rm||"undefined"!=typeof Element)&&(Mm=wm()?(t,e)=>{for(;e&&e!==document.documentElement;){if(e===t)return!0;e=e.parentNode||e.host}return!1}:(t,e)=>t.contains(e),Tm=(()=>{if(Rm||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):Tm}})(),Pm=(t,e,n)=>{let i=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)i.push(n[t])}else{const n=t.querySelector(e);n&&i.push(n)}return i});let Bm=null,Im=!1;function Nm(t){Bm||(Bm=("undefined"!=typeof document?document.body:null)||{},Im=!!Bm.style&&"WebkitAppearance"in Bm.style);let e=!0;return Bm.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in Bm.style,!e&&Im)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in Bm.style),e}const Lm=Tm,$m=Mm,zm=Pm;function jm(t){const e={};return Object.keys(t).forEach(n=>{const i=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[i]=t[n]}),e}let Um=(()=>{class t{validateStyleProperty(t){return Nm(t)}matchesElement(t,e){return Lm(t,e)}containsElement(t,e){return $m(t,e)}query(t,e,n){return zm(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,i,r,s=[],o){return new bm(n,i)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();class Vm{}Vm.NOOP=new Um;const qm="ng-enter",Hm="ng-leave",Wm="ng-trigger",Gm=".ng-trigger",Xm="ng-animating",Ym=".ng-animating";function Km(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Zm(parseFloat(e[1]),e[2])}function Zm(t,e){switch(e){case"s":return 1e3*t;default:return t}}function Qm(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let i,r=0,s="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};i=Zm(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(r=Zm(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else i=t;if(!n){let n=!1,s=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),r<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(s,0,`The provided timing value "${t}" is invalid.`)}return{duration:i,delay:r,easing:s}}(t,e,n)}function Jm(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function tg(t,e,n={}){if(e)for(let i in t)n[i]=t[i];else Jm(t,n);return n}function eg(t,e,n){return n?e+":"+n+";":""}function ng(t){let e="";for(let n=0;n<t.style.length;n++){const i=t.style.item(n);e+=eg(0,i,t.style.getPropertyValue(i))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=eg(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function ig(t,e,n){t.style&&(Object.keys(e).forEach(i=>{const r=hg(i);n&&!n.hasOwnProperty(i)&&(n[i]=t.style[r]),t.style[r]=e[i]}),Cm()&&ng(t))}function rg(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=hg(e);t.style[n]=""}),Cm()&&ng(t))}function sg(t){return Array.isArray(t)?1==t.length?t[0]:fm(t):t}const og=new RegExp("{{\\s*(.+?)\\s*}}","g");function ag(t){let e=[];if("string"==typeof t){let n;for(;n=og.exec(t);)e.push(n[1]);og.lastIndex=0}return e}function lg(t,e,n){const i=t.toString(),r=i.replace(og,(t,i)=>{let r=e[i];return e.hasOwnProperty(i)||(n.push(`Please provide a value for the animation param ${i}`),r=""),r.toString()});return r==i?t:r}function ug(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const cg=/-+([a-z0-9])/g;function hg(t){return t.replace(cg,(...t)=>t[1].toUpperCase())}function dg(t,e){return 0===t||0===e}function fg(t,e,n){const i=Object.keys(n);if(i.length&&e.length){let s=e[0],o=[];if(i.forEach(t=>{s.hasOwnProperty(t)||o.push(t),s[t]=n[t]}),o.length)for(var r=1;r<e.length;r++){let n=e[r];o.forEach(function(e){n[e]=mg(t,e)})}}return e}function pg(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function mg(t,e){return window.getComputedStyle(t)[e]}const gg="*";function yg(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const i=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof i)return void e.push(i);t=i}const i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const r=i[1],s=i[2],o=i[3];e.push(bg(r,o)),"<"!=s[0]||r==gg&&o==gg||e.push(bg(o,r))}(t,n,e)):n.push(t),n}const vg=new Set(["true","1"]),_g=new Set(["false","0"]);function bg(t,e){const n=vg.has(t)||_g.has(t),i=vg.has(e)||_g.has(e);return(r,s)=>{let o=t==gg||t==r,a=e==gg||e==s;return!o&&n&&"boolean"==typeof r&&(o=r?vg.has(t):_g.has(t)),!a&&i&&"boolean"==typeof s&&(a=s?vg.has(e):_g.has(e)),o&&a}}const xg=new RegExp("s*:selfs*,?","g");function wg(t,e,n){return new Cg(t).build(e,n)}class Cg{constructor(t){this._driver=t}build(t,e){const n=new Ag(e);return this._resetContextStyleTimingState(n),pg(this,sg(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,i=e.depCount=0;const r=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,i=n.name;i.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,r.push(this.visitState(n,e))}),n.name=i}else if(1==t.type){const r=this.visitTransition(t,e);n+=r.queryCount,i+=r.depCount,s.push(r)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:r,transitions:s,queryCount:n,depCount:i,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(n.containsDynamicStyles){const r=new Set,s=i||{};if(n.styles.forEach(t=>{if(Eg(t)){const e=t;Object.keys(e).forEach(t=>{ag(e[t]).forEach(t=>{s.hasOwnProperty(t)||r.add(t)})})}}),r.size){const n=ug(r.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=pg(this,sg(t.animation),e);return{type:1,matchers:yg(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:kg(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>pg(this,t,e)),options:kg(t.options)}}visitGroup(t,e){const n=e.currentTime;let i=0;const r=t.steps.map(t=>{e.currentTime=n;const r=pg(this,t,e);return i=Math.max(i,e.currentTime),r});return e.currentTime=i,{type:3,steps:r,options:kg(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return Dg(Qm(t,e).duration,0,"");const i=t;if(i.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=Dg(0,0,"");return t.dynamic=!0,t.strValue=i,t}return n=n||Qm(i,e),Dg(n.duration,n.delay,n.easing)}(t.timings,e.errors);let i;e.currentAnimateTimings=n;let r=t.styles?t.styles:pm({});if(5==r.type)i=this.visitKeyframes(r,e);else{let r=t.styles,s=!1;if(!r){s=!0;const t={};n.easing&&(t.easing=n.easing),r=pm(t)}e.currentTime+=n.duration+n.delay;const o=this.visitStyle(r,e);o.isEmptyStep=s,i=o}return e.currentAnimateTimings=null,{type:4,timings:n,style:i,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==cm?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let i=!1,r=null;return n.forEach(t=>{if(Eg(t)){const e=t,n=e.easing;if(n&&(r=n,delete e.easing),!i)for(let t in e)if(e[t].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:n,easing:r,offset:t.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let i=e.currentTime,r=e.currentTime;n&&r>0&&(r-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=e.collectedStyles[e.currentQuerySelector],o=s[n];let a=!0;o&&(r!=i&&r>=o.startTime&&i<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${r}ms" and "${i}ms"`),a=!1),r=o.startTime),a&&(s[n]={startTime:r,endTime:i}),e.options&&function(t,e,n){const i=e.params||{},r=ag(t);r.length&&r.forEach(t=>{i.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let i=0;const r=[];let s=!1,o=!1,a=0;const l=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let l=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(Eg(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(Eg(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),u=0;return null!=l&&(i++,u=n.offset=l),o=o||u<0||u>1,s=s||u<a,a=u,r.push(u),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&e.errors.push("Please ensure that all keyframe offsets are in order");const u=t.steps.length;let c=0;i>0&&i<u?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(c=1/(u-1));const h=u-1,d=e.currentTime,f=e.currentAnimateTimings,p=f.duration;return l.forEach((t,i)=>{const s=c>0?i==h?1:c*i:r[i],o=s*p;e.currentTime=d+f.delay+o,f.duration=o,this._validateStyleAst(t,e),t.offset=s,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:pg(this,sg(t.animation),e),options:kg(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:kg(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:kg(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;const[r,s]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(xg,"")),[t=t.replace(/@\*/g,Gm).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,Ym),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+r:r,Fm(e.collectedStyles,e.currentQuerySelector,{});const o=pg(this,sg(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:r,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:o,originalSelector:t.selector,options:kg(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Qm(t.timings,e.errors,!0);return{type:12,animation:pg(this,sg(t.animation),e),timings:n,options:null}}}class Ag{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Eg(t){return!Array.isArray(t)&&"object"==typeof t}function kg(t){var e;return t?(t=Jm(t)).params&&(t.params=(e=t.params)?Jm(e):null):t={},t}function Dg(t,e,n){return{duration:t,delay:e,easing:n}}function Sg(t,e,n,i,r,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class Fg{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const Og=new RegExp(":enter","g"),Mg=new RegExp(":leave","g");function Tg(t,e,n,i,r,s={},o={},a,l,u=[]){return(new Pg).buildKeyframes(t,e,n,i,r,s,o,a,l,u)}class Pg{buildKeyframes(t,e,n,i,r,s,o,a,l,u=[]){l=l||new Fg;const c=new Bg(t,e,l,i,r,u,[]);c.options=a,c.currentTimeline.setStyles([s],null,c.errors,a),pg(this,n,c);const h=c.timelines.filter(t=>t.containsAnimation());if(h.length&&Object.keys(o).length){const t=h[h.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,c.errors,a)}return h.length?h.map(t=>t.buildKeyframes()):[Sg(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const i=e.createSubContext(t.options),r=e.currentTimeline.currentTime,s=this._visitSubInstructions(n,i,i.options);r!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let i=e.currentTimeline.currentTime;const r=null!=n.duration?Km(n.duration):null,s=null!=n.delay?Km(n.delay):null;return 0!==r&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,r,s);i=Math.max(i,n.duration+n.delay)}),i}visitReference(t,e){e.updateOptions(t.options,!0),pg(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let i=e;const r=t.options;if(r&&(r.params||r.delay)&&(i=e.createSubContext(r),i.transformIntoNewTimeline(),null!=r.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Rg);const t=Km(r.delay);i.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>pg(this,t,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>n&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let i=e.currentTimeline.currentTime;const r=t.options&&t.options.delay?Km(t.options.delay):0;t.steps.forEach(s=>{const o=e.createSubContext(t.options);r&&o.delayNextStep(r),pg(this,s,o),i=Math.max(i,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return Qm(e.params?lg(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),i.snapshotCurrentStyles());const r=t.style;5==r.type?this.visitKeyframes(r,e):(e.incrementTime(n.duration),this.visitStyle(r,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,i=e.currentAnimateTimings;!i&&n.getCurrentStyleProperties().length&&n.forwardFrame();const r=i&&i.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(r):n.setStyles(t.styles,r,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,i=e.currentTimeline.duration,r=n.duration,s=e.createSubContext().currentTimeline;s.easing=n.easing,t.styles.forEach(t=>{s.forwardTime((t.offset||0)*r),s.setStyles(t.styles,t.easing,e.errors,e.options),s.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(s),e.transformIntoNewTimeline(i+r),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,i=t.options||{},r=i.delay?Km(i.delay):0;r&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=Rg);let s=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=o.length;let a=null;o.forEach((n,i)=>{e.currentQueryIndex=i;const o=e.createSubContext(t.options,n);r&&o.delayNextStep(r),n===e.element&&(a=o.currentTimeline),pg(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,i=e.currentTimeline,r=t.timings,s=Math.abs(r.duration),o=s*(e.currentQueryTotal-1);let a=s*e.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const l=e.currentTimeline;a&&l.delayNextStep(a);const u=l.currentTime;pg(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=i.currentTime-u+(i.startTime-n.currentTimeline.startTime)}}const Rg={};class Bg{constructor(t,e,n,i,r,s,o,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=i,this._leaveClassName=r,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Rg,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new Ig(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let i=this.options;null!=n.duration&&(i.duration=Km(n.duration)),null!=n.delay&&(i.delay=Km(n.delay));const r=n.params;if(r){let t=i.params;t||(t=this.options.params={}),Object.keys(r).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=lg(r[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const i=e||this.element,r=new Bg(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,n||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(t),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(t){return this.previousNode=Rg,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const i={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},r=new Ng(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(r),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,i,r,s){let o=[];if(i&&o.push(this.element),t.length>0){t=(t=t.replace(Og,"."+this._enterClassName)).replace(Mg,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return r||0!=o.length||s.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class Ig{constructor(t,e,n,i){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Ig(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||cm,this._currentKeyframe[t]=cm}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,i){e&&(this._previousKeyframe.easing=e);const r=i&&i.params||{},s=function(t,e){const n={};let i;return t.forEach(t=>{"*"===t?(i=i||Object.keys(e),i.forEach(t=>{n[t]=cm})):tg(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(s).forEach(t=>{const e=lg(s[t],r,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:cm),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],i=t._styleSummary[e];(!n||i.time>n.time)&&this._updateStyle(e,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((r,s)=>{const o=tg(r,!0);Object.keys(o).forEach(n=>{const i=o[n];"!"==i?t.add(n):i==cm&&e.add(n)}),n||(o.offset=s/this.duration),i.push(o)});const r=t.size?ug(t.values()):[],s=e.size?ug(e.values()):[];if(n){const t=i[0],e=Jm(t);t.offset=0,e.offset=1,i=[t,e]}return Sg(this.element,i,r,s,this.duration,this.startTime,this.easing,!1)}}class Ng extends Ig{constructor(t,e,n,i,r,s,o=!1){super(t,e,s.delay),this.keyframes=n,this.preStyleProps=i,this.postStyleProps=r,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){const r=[],s=n+e,o=e/s,a=tg(t[0],!1);a.offset=0,r.push(a);const l=tg(t[0],!1);l.offset=Lg(o),r.push(l);const u=t.length-1;for(let i=1;i<=u;i++){let o=tg(t[i],!1);o.offset=Lg((e+o.offset*n)/s),r.push(o)}n=s,e=0,i="",t=r}return Sg(this.element,t,this.preStyleProps,this.postStyleProps,n,e,i,!0)}}function Lg(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class $g{}class zg extends $g{normalizePropertyName(t,e){return hg(t)}normalizeStyleValue(t,e,n,i){let r="";const s=n.toString().trim();if(jg[e]&&0!==n&&"0"!==n)if("number"==typeof n)r="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&i.push(`Please provide a CSS unit value for ${t}:${n}`)}return s+r}}const jg=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Ug(t,e,n,i,r,s,o,a,l,u,c,h,d){return{type:0,element:t,triggerName:e,isRemovalTransition:r,fromState:n,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:c,totalTime:h,errors:d}}const Vg={};class qg{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,i){return function(t,e,n,i,r){return t.some(t=>t(e,n,i,r))}(this.ast.matchers,t,e,n,i)}buildStyles(t,e,n){const i=this._stateStyles["*"],r=this._stateStyles[t],s=i?i.buildStyles(e,n):{};return r?r.buildStyles(e,n):s}build(t,e,n,i,r,s,o,a,l,u){const c=[],h=this.ast.options&&this.ast.options.params||Vg,d=this.buildStyles(n,o&&o.params||Vg,c),f=a&&a.params||Vg,p=this.buildStyles(i,f,c),m=new Set,g=new Map,y=new Map,v="void"===i,_={params:Object.assign(Object.assign({},h),f)},b=u?[]:Tg(t,e,this.ast.animation,r,s,d,p,_,l,c);let x=0;if(b.forEach(t=>{x=Math.max(t.duration+t.delay,x)}),c.length)return Ug(e,this._triggerName,n,i,v,d,p,[],[],g,y,x,c);b.forEach(t=>{const n=t.element,i=Fm(g,n,{});t.preStyleProps.forEach(t=>i[t]=!0);const r=Fm(y,n,{});t.postStyleProps.forEach(t=>r[t]=!0),n!==e&&m.add(n)});const w=ug(m.values());return Ug(e,this._triggerName,n,i,v,d,p,b,w,g,y,x)}}class Hg{constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){const n={},i=Jm(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(i[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const r=t;Object.keys(r).forEach(t=>{let s=r[t];s.length>1&&(s=lg(s,i,e));const o=this.normalizer.normalizePropertyName(t,e);s=this.normalizer.normalizeStyleValue(t,o,s,e),n[o]=s})}}),n}}class Wg{constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new Hg(t.style,t.options&&t.options.params||{},n)}),Gg(this.states,"true","1"),Gg(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new qg(t,e,this.states))}),this.fallbackTransition=new qg(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,i){return this.transitionFactories.find(r=>r.match(t,e,n,i))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function Gg(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const Xg=new Fg;class Yg{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],i=wg(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=i}_buildPlayer(t,e,n){const i=t.element,r=Em(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(i,r,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const i=[],r=this._animations[t];let s;const o=new Map;if(r?(s=Tg(this._driver,e,r,qm,Hm,{},{},n,Xg,i),s.forEach(t=>{const e=Fm(o,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),s=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);o.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,cm)})});const a=Am(s.map(t=>{const e=o.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,i){const r=Sm(e,"","","");return km(this._getPlayer(t),n,r,i),()=>{}}command(t,e,n,i){if("register"==n)return void this.register(t,i[0]);if("create"==n)return void this.create(t,e,i[0]||{});const r=this._getPlayer(t);switch(n){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t)}}}const Kg="ng-animate-queued",Zg="ng-animate-disabled",Qg=".ng-animate-disabled",Jg=[],ty={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ey={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class ny{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(i=n?t.value:t)?i:null,n){const e=Jm(t);delete e.value,this.options=e}else this.options={};var i;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const iy="void",ry=new ny(iy);class sy{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,dy(e,this._hostClassName)}listen(t,e,n,i){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(r=n)&&"done"!=r)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var r;const s=Fm(this._elementListeners,t,[]),o={name:e,phase:n,callback:i};s.push(o);const a=Fm(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(dy(t,Wm),dy(t,"ng-trigger-"+e),a[e]=ry),()=>{this._engine.afterFlush(()=>{const t=s.indexOf(o);t>=0&&s.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,i=!0){const r=this._getTrigger(e),s=new ay(this.id,e,t);let o=this._engine.statesByElement.get(t);o||(dy(t,Wm),dy(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,o={}));let a=o[e];const l=new ny(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&l.absorbOptions(a.options),o[e]=l,a||(a=ry),l.value!==iy&&a.value===l.value){if(!function(t,e){const n=Object.keys(t),i=Object.keys(e);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){const i=n[r];if(!e.hasOwnProperty(i)||t[i]!==e[i])return!1}return!0}(a.params,l.params)){const e=[],n=r.matchStyles(a.value,a.params,e),i=r.matchStyles(l.value,l.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{rg(t,n),ig(t,i)})}return}const u=Fm(this._engine.playersByElement,t,[]);u.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let c=r.matchTransition(a.value,l.value,t,l.params),h=!1;if(!c){if(!i)return;c=r.fallbackTransition,h=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:c,fromState:a,toState:l,player:s,isFallbackTransition:h}),h||(dy(t,Kg),s.onStart(()=>{fy(t,Kg)})),s.onDone(()=>{let e=this.players.indexOf(s);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(s);t>=0&&n.splice(t,1)}}),this.players.push(s),u.push(s),s}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,Gm,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,i){const r=this._engine.statesByElement.get(t);if(r){const s=[];if(Object.keys(r).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,iy,i);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&Am(s).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const i=new Set;e.forEach(e=>{const r=e.name;if(i.has(r))return;i.add(r);const s=this._triggers[r].fallbackTransition,o=n[r]||ry,a=new ny(iy),l=new ay(this.id,r,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:r,transition:s,fromState:o,toState:a,player:l,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)i=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)n.markElementAsRemoved(this.id,t,!1,e);else{const i=t.__ng_removed;i&&i!==ty||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){dy(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const i=n.player;if(i.destroyed)return;const r=n.element,s=this._elementListeners.get(r);s&&s.forEach(e=>{if(e.name==n.triggerName){const i=Sm(r,n.triggerName,n.fromState.value,n.toState.value);i._data=t,km(n.player,e.phase,i,e.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,i=e.transition.ast.depCount;return 0==n||0==i?n-i:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class oy{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new sy(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let i=!1;for(let r=n;r>=0;r--)if(this.driver.containsElement(this._namespaceList[r].hostElement,e)){this._namespaceList.splice(r+1,0,t),i=!0;break}i||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let i=this._namespaceLookup[t];i&&i.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=n[t[i]].namespaceId;if(r){const t=this._fetchNamespace(r);t&&e.add(t)}}}return e}trigger(t,e,n,i){if(ly(e)){const r=this._fetchNamespace(t);if(r)return r.trigger(e,n,i),!0}return!1}insertNode(t,e,n,i){if(!ly(e))return;const r=e.__ng_removed;if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const i=this._fetchNamespace(t);i&&i.insertNode(e,n)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),dy(t,Zg)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),fy(t,Zg))}removeNode(t,e,n,i){if(ly(e)){const r=t?this._fetchNamespace(t):null;if(r?r.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,i)}}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,n,i){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:i,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,i,r){return ly(e)?this._fetchNamespace(t).listen(e,n,i,r):()=>{}}_buildInstruction(t,e,n,i,r){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,i,t.fromState.options,t.toState.options,e,r)}destroyInnerAnimations(t){let e=this.driver.query(t,Gm,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Ym,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return Am(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=ty,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,Qg)&&this.markElementAsDisabled(t,!1),this.driver.query(t,Qg,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)dy(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?Am(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new Fg,i=[],r=new Map,s=[],o=new Map,a=new Map,l=new Map,u=new Set;this.disabledNodes.forEach(t=>{u.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)u.add(e[n])});const c=this.bodyNode,h=Array.from(this.statesByElement.keys()),d=hy(h,this.collectedEnterElements),f=new Map;let p=0;d.forEach((t,e)=>{const n=qm+p++;f.set(e,n),t.forEach(t=>dy(t,n))});const m=[],g=new Set,y=new Set;for(let O=0;O<this.collectedLeaveElements.length;O++){const t=this.collectedLeaveElements[O],e=t.__ng_removed;e&&e.setForRemoval&&(m.push(t),g.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>g.add(t)):y.add(t))}const v=new Map,_=hy(h,Array.from(g));_.forEach((t,e)=>{const n=Hm+p++;v.set(e,n),t.forEach(t=>dy(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>fy(t,n))}),_.forEach((t,e)=>{const n=v.get(e);t.forEach(t=>fy(t,n))}),m.forEach(t=>{this.processLeaveNode(t)})});const b=[],x=[];for(let O=this._namespaceList.length-1;O>=0;O--)this._namespaceList[O].drainQueuedTransitions(e).forEach(t=>{const e=t.player,r=t.element;if(b.push(e),this.collectedEnterElements.length){const t=r.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const u=!c||!this.driver.containsElement(c,r),h=v.get(r),d=f.get(r),p=this._buildInstruction(t,n,d,h,u);if(p.errors&&p.errors.length)x.push(p);else{if(u)return e.onStart(()=>rg(r,p.fromStyles)),e.onDestroy(()=>ig(r,p.toStyles)),void i.push(e);if(t.isFallbackTransition)return e.onStart(()=>rg(r,p.fromStyles)),e.onDestroy(()=>ig(r,p.toStyles)),void i.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(r,p.timelines),s.push({instruction:p,player:e,element:r}),p.queriedElements.forEach(t=>Fm(o,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let i=l.get(e);i||l.set(e,i=new Set),n.forEach(t=>i.add(t))})}});if(x.length){const t=[];x.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),b.forEach(t=>t.destroy()),this.reportError(t)}const w=new Map,C=new Map;s.forEach(t=>{const e=t.element;n.has(e)&&(C.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,w))}),i.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{Fm(w,e,[]).push(t),t.destroy()})});const A=m.filter(t=>gy(t,a,l)),E=new Map;cy(E,this.driver,y,l,cm).forEach(t=>{gy(t,a,l)&&A.push(t)});const k=new Map;d.forEach((t,e)=>{cy(k,this.driver,new Set(t),a,"!")}),A.forEach(t=>{const e=E.get(t),n=k.get(t);E.set(t,Object.assign(Object.assign({},e),n))});const D=[],S=[],F={};s.forEach(t=>{const{element:e,player:s,instruction:o}=t;if(n.has(e)){if(u.has(e))return s.onDestroy(()=>ig(e,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void i.push(s);let t=F;if(C.size>1){let n=e;const i=[];for(;n=n.parentNode;){const e=C.get(n);if(e){t=e;break}i.push(n)}i.forEach(e=>C.set(e,t))}const n=this._buildAnimation(s.namespaceId,o,w,r,k,E);if(s.setRealPlayer(n),t===F)D.push(s);else{const e=this.playersByElement.get(t);e&&e.length&&(s.parentPlayer=Am(e)),i.push(s)}}else rg(e,o.fromStyles),s.onDestroy(()=>ig(e,o.toStyles)),S.push(s),u.has(e)&&i.push(s)}),S.forEach(t=>{const e=r.get(t.element);if(e&&e.length){const n=Am(e);t.setRealPlayer(n)}}),i.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let O=0;O<m.length;O++){const t=m[O],e=t.__ng_removed;if(fy(t,Hm),e&&e.hasAnimation)continue;let n=[];if(o.size){let e=o.get(t);e&&e.length&&n.push(...e);let i=this.driver.query(t,Ym,!0);for(let t=0;t<i.length;t++){let e=o.get(i[t]);e&&e.length&&n.push(...e)}}const i=n.filter(t=>!t.destroyed);i.length?py(this,t,i):this.processLeaveNode(t)}return m.length=0,D.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),D}elementContainsData(t,e){let n=!1;const i=e.__ng_removed;return i&&i.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,i,r){let s=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(s=e)}else{const e=this.playersByElement.get(t);if(e){const t=!r||r==iy;e.forEach(e=>{e.queued||(t||e.triggerName==i)&&s.push(e)})}}return(n||i)&&(s=s.filter(t=>!(n&&n!=t.namespaceId||i&&i!=t.triggerName))),s}_beforeAnimationBuild(t,e,n){const i=e.element,r=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,a=t!==i,l=Fm(n,t,[]);this._getPreviousPlayers(t,a,r,s,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),l.push(t)})}rg(i,e.fromStyles)}_buildAnimation(t,e,n,i,r,s){const o=e.triggerName,a=e.element,l=[],u=new Set,c=new Set,h=e.timelines.map(e=>{const h=e.element;u.add(h);const d=h.__ng_removed;if(d&&d.removedBeforeQueried)return new bm(e.duration,e.delay);const f=h!==a,p=function(t){const e=[];return my(t,e),e}((n.get(h)||Jg).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===h),m=r.get(h),g=s.get(h),y=Em(0,this._normalizer,0,e.keyframes,m,g),v=this._buildPlayer(e,y,p);if(e.subTimeline&&i&&c.add(h),f){const e=new ay(t,o,h);e.setRealPlayer(v),l.push(e)}return v});l.forEach(t=>{Fm(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let i;if(t instanceof Map){if(i=t.get(e),i){if(i.length){const t=i.indexOf(n);i.splice(t,1)}0==i.length&&t.delete(e)}}else if(i=t[e],i){if(i.length){const t=i.indexOf(n);i.splice(t,1)}0==i.length&&delete t[e]}return i}(this.playersByQueriedElement,t.element,t))}),u.forEach(t=>dy(t,Xm));const d=Am(h);return d.onDestroy(()=>{u.forEach(t=>fy(t,Xm)),ig(a,e.toStyles)}),c.forEach(t=>{Fm(i,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new bm(t.duration,t.delay)}}class ay{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new bm,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>km(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){Fm(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function ly(t){return t&&1===t.nodeType}function uy(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function cy(t,e,n,i,r){const s=[];n.forEach(t=>s.push(uy(t)));const o=[];i.forEach((n,i)=>{const s={};n.forEach(t=>{const n=s[t]=e.computeStyle(i,t,r);n&&0!=n.length||(i.__ng_removed=ey,o.push(i))}),t.set(i,s)});let a=0;return n.forEach(t=>uy(t,s[a++])),o}function hy(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const i=new Set(e),r=new Map;function s(t){if(!t)return 1;let e=r.get(t);if(e)return e;const o=t.parentNode;return e=n.has(o)?o:i.has(o)?1:s(o),r.set(t,e),e}return e.forEach(t=>{const e=s(t);1!==e&&n.get(e).push(t)}),n}function dy(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function fy(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function py(t,e,n){Am(n).onDone(()=>t.processLeaveNode(e))}function my(t,e){for(let n=0;n<t.length;n++){const i=t[n];i instanceof xm?my(i.players,e):e.push(i)}}function gy(t,e,n){const i=n.get(t);if(!i)return!1;let r=e.get(t);return r?i.forEach(t=>r.add(t)):e.set(t,i),n.delete(t),!0}class yy{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new oy(t,e,n),this._timelineEngine=new Yg(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,i,r){const s=t+"-"+i;let o=this._triggerCache[s];if(!o){const t=[],e=wg(this._driver,r,t);if(t.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e,n){return new Wg(t,e,n)}(i,e,this._normalizer),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(e,i,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,i){this._transitionEngine.insertNode(t,e,n,i)}onRemove(t,e,n,i){this._transitionEngine.removeNode(t,e,i||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,i){if("@"==n.charAt(0)){const[t,r]=Om(n);this._timelineEngine.command(t,e,r,i)}else this._transitionEngine.trigger(t,e,n,i)}listen(t,e,n,i,r){if("@"==n.charAt(0)){const[t,i]=Om(n);return this._timelineEngine.listen(t,e,i,r)}return this._transitionEngine.listen(t,e,n,i,r)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function vy(t,e){let n=null,i=null;return Array.isArray(e)&&e.length?(n=by(e[0]),e.length>1&&(i=by(e[e.length-1]))):e&&(n=by(e)),n||i?new _y(t,n,i):null}class _y{constructor(t,e,n){this._element=t,this._startStyles=e,this._endStyles=n,this._state=0;let i=_y.initialStylesByElement.get(t);i||_y.initialStylesByElement.set(t,i={}),this._initialStyles=i}start(){this._state<1&&(this._startStyles&&ig(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(ig(this._element,this._initialStyles),this._endStyles&&(ig(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(_y.initialStylesByElement.delete(this._element),this._startStyles&&(rg(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(rg(this._element,this._endStyles),this._endStyles=null),ig(this._element,this._initialStyles),this._state=3)}}function by(t){let e=null;const n=Object.keys(t);for(let i=0;i<n.length;i++){const r=n[i];xy(r)&&(e=e||{},e[r]=t[r])}return e}function xy(t){return"display"===t||"position"===t}_y.initialStylesByElement=new WeakMap;const wy="animation",Cy="animationend";class Ay{constructor(t,e,n,i,r,s,o){this._element=t,this._name=e,this._duration=n,this._delay=i,this._easing=r,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=Oy(t,"").trim();n.length&&(function(t,e){let n=0;for(let i=0;i<t.length;i++)","===t.charAt(i)&&n++}(n),e=`${n}, ${e}`),Fy(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Sy(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Ey(this._element,this._name,"paused")}resume(){Ey(this._element,this._name,"running")}setPosition(t){const e=ky(this._element,this._name);this._position=t*this._duration,Fy(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Sy(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=Oy(t,"").split(","),i=Dy(n,e);i>=0&&(n.splice(i,1),Fy(t,"",n.join(",")))}(this._element,this._name))}}function Ey(t,e,n){Fy(t,"PlayState",n,ky(t,e))}function ky(t,e){const n=Oy(t,"");return n.indexOf(",")>0?Dy(n.split(","),e):Dy([n],e)}function Dy(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function Sy(t,e,n){n?t.removeEventListener(Cy,e):t.addEventListener(Cy,e)}function Fy(t,e,n,i){const r=wy+e;if(null!=i){const e=t.style[r];if(e.length){const t=e.split(",");t[i]=n,n=t.join(",")}}t.style[r]=n}function Oy(t,e){return t.style[wy+e]||""}class My{constructor(t,e,n,i,r,s,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=i,this._delay=r,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=i+r,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Ay(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:mg(this.element,n))})}this.currentSnapshot=t}}class Ty extends bm{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=jm(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class Py{constructor(){this._count=0}validateStyleProperty(t){return Nm(t)}matchesElement(t,e){return Lm(t,e)}containsElement(t,e){return $m(t,e)}query(t,e,n){return zm(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>jm(t));let i=`@keyframes ${e} {\n`,r="";n.forEach(t=>{r=" ";const e=parseFloat(t.offset);i+=`${r}${100*e}% {\n`,r+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(i+=`${r}animation-timing-function: ${n};\n`));default:return void(i+=`${r}${e}: ${n};\n`)}}),i+=`${r}}\n`}),i+="}\n";const s=document.createElement("style");return s.textContent=i,s}animate(t,e,n,i,r,s=[],o){const a=s.filter(t=>t instanceof My),l={};dg(n,i)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const u=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=fg(t,e,l));if(0==n)return new Ty(t,u);const c="gen_css_kf_"+this._count++,h=this.buildKeyframeElement(t,c,e);(function(t){var e;const n=null===(e=t.getRootNode)||void 0===e?void 0:e.call(t);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(t).appendChild(h);const d=vy(t,e),f=new My(t,e,c,n,i,r,u,d);return f.onDestroy(()=>{var t;(t=h).parentNode.removeChild(t)}),f}}class Ry{constructor(t,e,n,i){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:mg(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class By{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(Iy().toString()),this._cssKeyframesDriver=new Py}validateStyleProperty(t){return Nm(t)}matchesElement(t,e){return Lm(t,e)}containsElement(t,e){return $m(t,e)}query(t,e,n){return zm(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,i,r,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,i,r,s);const a={duration:n,delay:i,fill:0==i?"both":"forwards"};r&&(a.easing=r);const l={},u=s.filter(t=>t instanceof Ry);dg(n,i)&&u.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const c=vy(t,e=fg(t,e=e.map(t=>tg(t,!1)),l));return new Ry(t,e,a,c)}}function Iy(){return wm()&&Element.prototype.animate||{}}let Ny=(()=>{class t extends um{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:Ft.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?fm(t):t;return zy(this._renderer,null,e,"register",[n]),new Ly(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(pi(Va),pi(gc))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();class Ly extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new $y(this._id,t,e||{},this._renderer)}}class $y{constructor(t,e,n,i){this.id=t,this.element=e,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return zy(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function zy(t,e,n,i,r){return t.setProperty(e,`@@${n}:${i}`,r)}const jy="@",Uy="@.disabled";let Vy=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new qy("",n,this.engine),this._rendererCache.set(n,t)),t}const i=e.id,r=e.id+"-"+this._currentId;this._currentId++,this.engine.register(r,t);const s=e=>{Array.isArray(e)?e.forEach(s):this.engine.registerTrigger(i,r,t,e.name,e)};return e.data.animation.forEach(s),new Hy(this,r,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(pi(Va),pi(yy),pi(Nu))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();class qy{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,i=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,i)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,i){this.delegate.setAttribute(t,e,n,i)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,i){this.delegate.setStyle(t,e,n,i)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==jy&&e==Uy?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Hy extends qy{constructor(t,e,n,i){super(e,n,i),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==jy?"."==e.charAt(1)&&e==Uy?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==jy){const i=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let r=e.substr(1),s="";return r.charAt(0)!=jy&&([r,s]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(r)),this.engine.listen(this.namespaceId,i,r,s,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let Wy=(()=>{class t extends yy{constructor(t,e,n){super(t.body,e,n)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(e){return new(e||t)(pi(gc),pi(Vm),pi($g))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const Gy=new Kn("AnimationModuleType"),Xy=[{provide:um,useClass:Ny},{provide:$g,useFactory:function(){return new zg}},{provide:yy,useClass:Wy},{provide:Va,useFactory:function(t,e,n){return new Vy(t,e,n)},deps:[rd,yy,Nu]}],Yy=[{provide:Vm,useFactory:function(){return"function"==typeof Iy()?new By:new Py}},{provide:Gy,useValue:"BrowserAnimations"},...Xy],Ky=[{provide:Vm,useClass:Um},{provide:Gy,useValue:"NoopAnimations"},...Xy];let Zy=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?Ky:Yy}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({providers:Yy,imports:[_d]}),t})();function Qy(t,e){if(1&t&&Mo(0,"mat-pseudo-checkbox",4),2&t){const t=Vo();Do("state",t.selected?"checked":"unchecked")("disabled",t.disabled)}}function Jy(t,e){if(1&t&&(Fo(0,"span",5),fa(1),Oo()),2&t){const t=Vo();Kr(1),ma("(",t.group.label,")")}}const tv=["*"],ev=new Ga("12.1.4"),nv=new Kn("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let iv,rv=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checksAreEnabled(){return Zu()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&ev.full!==lm.full&&console.warn("The Angular Material version ("+ev.full+") does not match the Angular CDK version ("+lm.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275fac=function(e){return new(e||t)(pi(am),pi(nv,8),pi(gc))},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[cp],cp]}),t})();function sv(t){return class extends t{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=yf(t)}}}function ov(t,e){return class extends t{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const e=t||this.defaultColor;e!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),e&&this._elementRef.nativeElement.classList.add(`mat-${e}`),this._color=e)}}}function av(t){return class extends t{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=yf(t)}}}function lv(t,e=0){return class extends t{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?vf(t):this.defaultTabIndex}}}function uv(t){return class extends t{constructor(...t){super(...t),this.stateChanges=new k,this.errorState=!1}updateErrorState(){const t=this.errorState,e=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);e!==t&&(this.errorState=e,this.stateChanges.next())}}}try{iv="undefined"!=typeof Intl}catch(mR){iv=!1}let cv=(()=>{class t{isErrorState(t,e){return!!(t&&t.invalid&&(t.touched||e&&e.submitted))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({factory:function(){return new t},token:t,providedIn:"root"}),t})();class hv{constructor(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const dv={enterDuration:225,exitDuration:150},fv=hf({passive:!0}),pv=["mousedown","touchstart"],mv=["mouseup","mouseleave","touchend","touchcancel"];class gv{constructor(t,e,n,i){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=xf(n))}fadeInRipple(t,e,n={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),r=Object.assign(Object.assign({},dv),n.animation);n.centered&&(t=i.left+i.width/2,e=i.top+i.height/2);const s=n.radius||function(t,e,n){const i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}(t,e,i),o=t-i.left,a=e-i.top,l=r.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=o-s+"px",u.style.top=a-s+"px",u.style.height=2*s+"px",u.style.width=2*s+"px",null!=n.color&&(u.style.backgroundColor=n.color),u.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(u),window.getComputedStyle(u).getPropertyValue("opacity"),u.style.transform="scale(1)";const c=new hv(this,u,n);return c.state=0,this._activeRipples.add(c),n.persistent||(this._mostRecentTransientRipple=c),this._runTimeoutOutsideZone(()=>{const t=c===this._mostRecentTransientRipple;c.state=1,n.persistent||t&&this._isPointerDown||c.fadeOut()},l),c}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=t.element,i=Object.assign(Object.assign({},dv),t.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,n.parentNode.removeChild(n)},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=xf(t);e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(pv))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(mv),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=Wp(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||e||n||(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!Gp(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let t=0;t<e.length;t++)this.fadeInRipple(e[t].clientX,e[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(t=>{this._triggerElement.addEventListener(t,this,fv)})})}_removeTriggerEvents(){this._triggerElement&&(pv.forEach(t=>{this._triggerElement.removeEventListener(t,this,fv)}),this._pointerUpEventsRegistered&&mv.forEach(t=>{this._triggerElement.removeEventListener(t,this,fv)}))}}const yv=new Kn("mat-ripple-global-options");let vv=(()=>{class t{constructor(t,e,n,i,r){this._elementRef=t,this._animationMode=r,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=i||{},this._rippleRenderer=new gv(this,e,t,n)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,e=0,n){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return t.\u0275fac=function(e){return new(e||t)(ko(ja),ko(Nu),ko(uf),ko(yv,8),ko(Gy,8))},t.\u0275dir=Zt({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,e){2&t&&ta("mat-ripple-unbounded",e.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),t})(),_v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[rv,cf],rv]}),t})(),bv=(()=>{class t{constructor(t){this._animationMode=t,this.state="unchecked",this.disabled=!1}}return t.\u0275fac=function(e){return new(e||t)(ko(Gy,8))},t.\u0275cmp=Ht({type:t,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:function(t,e){2&t&&ta("mat-pseudo-checkbox-indeterminate","indeterminate"===e.state)("mat-pseudo-checkbox-checked","checked"===e.state)("mat-pseudo-checkbox-disabled",e.disabled)("_mat-animation-noopable","NoopAnimations"===e._animationMode)},inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:function(t,e){},styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:transparent}._mat-animation-noopable.mat-pseudo-checkbox{transition:none;animation:none}._mat-animation-noopable.mat-pseudo-checkbox::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}\n'],encapsulation:2,changeDetection:0}),t})(),xv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[rv]]}),t})();const wv=new Kn("MAT_OPTION_PARENT_COMPONENT"),Cv=sv(class{});let Av=0,Ev=(()=>{class t extends Cv{constructor(t){var e;super(),this._labelId="mat-optgroup-label-"+Av++,this._inert=null!==(e=null==t?void 0:t.inertGroups)&&void 0!==e&&e}}return t.\u0275fac=function(e){return new(e||t)(ko(wv,8))},t.\u0275dir=Zt({type:t,inputs:{label:"label"},features:[uo]}),t})();const kv=new Kn("MatOptgroup");let Dv=0;class Sv{constructor(t,e=!1){this.source=t,this.isUserInput=e}}let Fv=(()=>{class t{constructor(t,e,n,i){this._element=t,this._changeDetectorRef=e,this._parent=n,this.group=i,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+Dv++,this.onSelectionChange=new Yl,this._stateChanges=new k}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(t){this._disabled=yf(t)}get disableRipple(){return this._parent&&this._parent.disableRipple}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(t,e){const n=this._getHostElement();"function"==typeof n.focus&&n.focus(e)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(t){13!==t.keyCode&&32!==t.keyCode||_p(t)||(this._selectViaInteraction(),t.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const t=this.viewValue;t!==this._mostRecentViewValue&&(this._mostRecentViewValue=t,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(t=!1){this.onSelectionChange.emit(new Sv(this,t))}}return t.\u0275fac=function(e){return new(e||t)(ko(ja),ko(fl),ko(void 0),ko(Ev))},t.\u0275dir=Zt({type:t,inputs:{id:"id",disabled:"disabled",value:"value"},outputs:{onSelectionChange:"onSelectionChange"}}),t})(),Ov=(()=>{class t extends Fv{constructor(t,e,n,i){super(t,e,n,i)}}return t.\u0275fac=function(e){return new(e||t)(ko(ja),ko(fl),ko(wv,8),ko(kv,8))},t.\u0275cmp=Ht({type:t,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:function(t,e){1&t&&Lo("click",function(){return e._selectViaInteraction()})("keydown",function(t){return e._handleKeydown(t)}),2&t&&(ga("id",e.id),wo("tabindex",e._getTabIndex())("aria-selected",e._getAriaSelected())("aria-disabled",e.disabled.toString()),ta("mat-selected",e.selected)("mat-option-multiple",e.multiple)("mat-active",e.active)("mat-option-disabled",e.disabled))},exportAs:["matOption"],features:[uo],ngContentSelectors:tv,decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:function(t,e){1&t&&(Ho(),Ao(0,Qy,1,2,"mat-pseudo-checkbox",0),Fo(1,"span",1),Wo(2),Oo(),Ao(3,Jy,2,1,"span",2),Mo(4,"div",3)),2&t&&(Do("ngIf",e.multiple),Kr(3),Do("ngIf",e.group&&e.group._inert),Kr(1),Do("matRippleTrigger",e._getHostElement())("matRippleDisabled",e.disabled||e.disableRipple))},directives:[_h,vv,bv],styles:[".mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:transparent}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.cdk-high-contrast-active .mat-option{margin:0 1px}.cdk-high-contrast-active .mat-option.mat-active{border:solid 1px currentColor;margin:0}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}\n"],encapsulation:2,changeDetection:0}),t})();function Mv(t,e,n){if(n.length){let i=e.toArray(),r=n.toArray(),s=0;for(let e=0;e<t+1;e++)i[e].group&&i[e].group===r[s]&&s++;return s}return 0}let Tv=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[_v,Rh,rv,xv]]}),t})();function Pv(t){return e=>e.lift(new Rv(t))}class Rv{constructor(t){this.value=t}call(t,e){return e.subscribe(new Bv(t,this.value))}}class Bv extends y{constructor(t,e){super(t),this.value=e}_next(t){this.destination.next(this.value)}}const Iv=["*"];function Nv(t,e){if(1&t){const t=Ro();Fo(0,"div",2),Lo("click",function(){return Be(t),Vo()._onBackdropClicked()}),Oo()}2&t&&ta("mat-drawer-shown",Vo()._isShowingBackdrop())}function Lv(t,e){1&t&&(Fo(0,"mat-drawer-content"),Wo(1,2),Oo())}const $v=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],zv=["mat-drawer","mat-drawer-content","*"];function jv(t,e){if(1&t){const t=Ro();Fo(0,"div",2),Lo("click",function(){return Be(t),Vo()._onBackdropClicked()}),Oo()}2&t&&ta("mat-drawer-shown",Vo()._isShowingBackdrop())}function Uv(t,e){1&t&&(Fo(0,"mat-sidenav-content",3),Wo(1,2),Oo())}const Vv=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],qv=["mat-sidenav","mat-sidenav-content","*"],Hv=".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n",Wv={transformDrawer:hm("transform",[mm("open, open-instant",pm({transform:"none",visibility:"visible"})),mm("void",pm({"box-shadow":"none",visibility:"hidden"})),gm("void => open-instant",dm("0ms")),gm("void <=> open, open-instant => void",dm("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},Gv=new Kn("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),Xv=new Kn("MAT_DRAWER_CONTAINER");let Yv=(()=>{class t extends pp{constructor(t,e,n,i,r){super(n,i,r),this._changeDetectorRef=t,this._container=e}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return t.\u0275fac=function(e){return new(e||t)(ko(fl),ko(at(()=>Zv)),ko(ja),ko(fp),ko(Nu))},t.\u0275cmp=Ht({type:t,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,e){2&t&&Jo("margin-left",e._container._contentMargins.left,"px")("margin-right",e._container._contentMargins.right,"px")},features:[uo],ngContentSelectors:Iv,decls:1,vars:0,template:function(t,e){1&t&&(Ho(),Wo(0))},encapsulation:2,changeDetection:0}),t})(),Kv=(()=>{class t{constructor(t,e,n,i,r,s,o){this._elementRef=t,this._focusTrapFactory=e,this._focusMonitor=n,this._platform=i,this._ngZone=r,this._doc=s,this._container=o,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new k,this._animationEnd=new k,this._animationState="void",this.openedChange=new Yl(!0),this._openedStream=this.openedChange.pipe(wd(t=>t),F(()=>{})),this.openedStart=this._animationStarted.pipe(wd(t=>t.fromState!==t.toState&&0===t.toState.indexOf("open")),Pv(void 0)),this._closedStream=this.openedChange.pipe(wd(t=>!t),F(()=>{})),this.closedStart=this._animationStarted.pipe(wd(t=>t.fromState!==t.toState&&"void"===t.toState),Pv(void 0)),this._destroyed=new k,this.onPositionChanged=new Yl,this._modeChanged=new k,this.openedChange.subscribe(t=>{t?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus()}),this._ngZone.runOutsideAngular(()=>{wf(this._elementRef.nativeElement,"keydown").pipe(wd(t=>27===t.keyCode&&!this.disableClose&&!_p(t)),Vf(this._destroyed)).subscribe(t=>this._ngZone.run(()=>{this.close(),t.stopPropagation(),t.preventDefault()}))}),this._animationEnd.pipe(Rf((t,e)=>t.fromState===e.fromState&&t.toState===e.toState)).subscribe(t=>{const{fromState:e,toState:n}=t;(0===n.indexOf("open")&&"void"===e||"void"===n&&0===e.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!=this._position&&(this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=yf(t)}get autoFocus(){const t=this._autoFocus;return null==t?"side"!==this.mode:t}set autoFocus(t){this._autoFocus=yf(t)}get opened(){return this._opened}set opened(t){this.toggle(yf(t))}_takeFocus(){this.autoFocus&&this._focusTrap&&this._focusTrap.focusInitialElementWhenReady().then(t=>{t||"function"!=typeof this._elementRef.nativeElement.focus||this._elementRef.nativeElement.focus()})}_restoreFocus(){this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,this._openedVia):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null,this._openedVia=null)}_isFocusWithinDrawer(){var t;const e=null===(t=this._doc)||void 0===t?void 0:t.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterContentInit(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0)}toggle(t=!this.opened,e){return this._setOpen(t,!t&&this._isFocusWithinDrawer(),e)}_setOpen(t,e,n="program"){return this._opened=t,t?(this._animationState=this._enableAnimations?"open":"open-instant",this._openedVia=n):(this._animationState="void",e&&this._restoreFocus()),this._updateFocusTrapState(),new Promise(t=>{this.openedChange.pipe(Fp(1)).subscribe(e=>t(e?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_animationStartListener(t){this._animationStarted.next(t)}_animationDoneListener(t){this._animationEnd.next(t)}}return t.\u0275fac=function(e){return new(e||t)(ko(ja),ko(Hp),ko(im),ko(uf),ko(Nu),ko(gc,8),ko(Xv,8))},t.\u0275cmp=Ht({type:t,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,e){1&t&&$o("@transform.start",function(t){return e._animationStartListener(t)})("@transform.done",function(t){return e._animationDoneListener(t)}),2&t&&(wo("align",null),ya("@transform",e._animationState),ta("mat-drawer-end","end"===e.position)("mat-drawer-over","over"===e.mode)("mat-drawer-push","push"===e.mode)("mat-drawer-side","side"===e.mode)("mat-drawer-opened",e.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:Iv,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(t,e){1&t&&(Ho(),Fo(0,"div",0),Wo(1),Oo())},directives:[pp],encapsulation:2,data:{animation:[Wv.transformDrawer]},changeDetection:0}),t})(),Zv=(()=>{class t{constructor(t,e,n,i,r,s=!1,o){this._dir=t,this._element=e,this._ngZone=n,this._changeDetectorRef=i,this._animationMode=o,this._drawers=new Zl,this.backdropClick=new Yl,this._destroyed=new k,this._doCheckSubject=new k,this._contentMargins={left:null,right:null},this._contentMarginChanges=new k,t&&t.change.pipe(Vf(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),r.change().pipe(Vf(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=s}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=yf(t)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(t){this._backdropOverride=null==t?null:yf(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(Gf(this._allDrawers),Vf(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(t=>!t._container||t._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(Gf(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(Ap(10),Vf(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,e=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const n=this._left._getWidth();t+=n,e-=n}if(this._right&&this._right.opened)if("side"==this._right.mode)e+=this._right._getWidth();else if("push"==this._right.mode){const n=this._right._getWidth();e+=n,t-=n}t=t||null,e=e||null,t===this._contentMargins.left&&e===this._contentMargins.right||(this._contentMargins={left:t,right:e},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(wd(t=>t.fromState!==t.toState),Vf(this._drawers.changes)).subscribe(t=>{"open-instant"!==t.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(Vf(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){t&&t.onPositionChanged.pipe(Vf(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(Fp(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(Vf(G(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const e=this._element.nativeElement.classList,n="mat-drawer-container-has-open";t?e.add(n):e.remove(n)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return t.\u0275fac=function(e){return new(e||t)(ko(up,8),ko(ja),ko(Nu),ko(fl),ko(mp),ko(Gv),ko(Gy,8))},t.\u0275cmp=Ht({type:t,selectors:[["mat-drawer-container"]],contentQueries:function(t,e,n){if(1&t&&(uu(n,Yv,5),uu(n,Kv,5)),2&t){let t;au(t=cu())&&(e._content=t.first),au(t=cu())&&(e._allDrawers=t)}},viewQuery:function(t,e){if(1&t&&lu(Yv,5),2&t){let t;au(t=cu())&&(e._userContent=t.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,e){2&t&&ta("mat-drawer-container-explicit-backdrop",e._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[Ra([{provide:Xv,useExisting:t}])],ngContentSelectors:zv,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,e){1&t&&(Ho($v),Ao(0,Nv,1,2,"div",0),Wo(1),Wo(2,1),Ao(3,Lv,2,0,"mat-drawer-content",1)),2&t&&(Do("ngIf",e.hasBackdrop),Kr(3),Do("ngIf",!e._content))},directives:[_h,Yv],styles:[Hv],encapsulation:2,changeDetection:0}),t})(),Qv=(()=>{class t extends Yv{constructor(t,e,n,i,r){super(t,e,n,i,r)}}return t.\u0275fac=function(e){return new(e||t)(ko(fl),ko(at(()=>t_)),ko(ja),ko(fp),ko(Nu))},t.\u0275cmp=Ht({type:t,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(t,e){2&t&&Jo("margin-left",e._container._contentMargins.left,"px")("margin-right",e._container._contentMargins.right,"px")},features:[uo],ngContentSelectors:Iv,decls:1,vars:0,template:function(t,e){1&t&&(Ho(),Wo(0))},encapsulation:2,changeDetection:0}),t})(),Jv=(()=>{class t extends Kv{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(t){this._fixedInViewport=yf(t)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(t){this._fixedTopGap=vf(t)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(t){this._fixedBottomGap=vf(t)}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Hn(t)))(n||t)}}(),t.\u0275cmp=Ht({type:t,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(t,e){2&t&&(wo("align",null),Jo("top",e.fixedInViewport?e.fixedTopGap:null,"px")("bottom",e.fixedInViewport?e.fixedBottomGap:null,"px"),ta("mat-drawer-end","end"===e.position)("mat-drawer-over","over"===e.mode)("mat-drawer-push","push"===e.mode)("mat-drawer-side","side"===e.mode)("mat-drawer-opened",e.opened)("mat-sidenav-fixed",e.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[uo],ngContentSelectors:Iv,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(t,e){1&t&&(Ho(),Fo(0,"div",0),Wo(1),Oo())},directives:[pp],encapsulation:2,data:{animation:[Wv.transformDrawer]},changeDetection:0}),t})(),t_=(()=>{class t extends Zv{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Hn(t)))(n||t)}}(),t.\u0275cmp=Ht({type:t,selectors:[["mat-sidenav-container"]],contentQueries:function(t,e,n){if(1&t&&(uu(n,Qv,5),uu(n,Jv,5)),2&t){let t;au(t=cu())&&(e._content=t.first),au(t=cu())&&(e._allDrawers=t)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(t,e){2&t&&ta("mat-drawer-container-explicit-backdrop",e._backdropOverride)},exportAs:["matSidenavContainer"],features:[Ra([{provide:Xv,useExisting:t}]),uo],ngContentSelectors:qv,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],["cdkScrollable","",4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"],["cdkScrollable",""]],template:function(t,e){1&t&&(Ho(Vv),Ao(0,jv,1,2,"div",0),Wo(1),Wo(2,1),Ao(3,Uv,2,0,"mat-sidenav-content",1)),2&t&&(Do("ngIf",e.hasBackdrop),Kr(3),Do("ngIf",!e._content))},directives:[_h,Qv,pp],styles:[Hv],encapsulation:2,changeDetection:0}),t})(),e_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Rh,rv,cf,gp],gp,rv]}),t})();var n_=n(5478);const i_=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function r_(t=null){return e=>e.lift(new s_(t))}class s_{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new o_(t,this.defaultValue))}}class o_ extends y{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function a_(t=c_){return e=>e.lift(new l_(t))}class l_{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new u_(t,this.errorFactory))}}class u_ extends y{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function c_(){return new i_}function h_(t,e){const n=arguments.length>=2;return i=>i.pipe(t?wd((e,n)=>t(e,n,i)):b,Fp(1),n?r_(e):a_(()=>new i_))}const d_=["*"];var f_=(()=>(function(t){t.LineHighlight="line-highlight",t.LineNumbers="line-numbers"}(f_||(f_={})),f_))();class p_{}const m_=new Kn("SECURITY_CONTEXT");let g_=(()=>{class t{constructor(t,e,n,i,r){this.platform=t,this.securityContext=e,this.http=n,this.sanitizer=r,this.initialMarkedOptions={renderer:new n_.Renderer},this.options=i}get options(){return this._options}set options(t){this._options=Object.assign(Object.assign({},this.initialMarkedOptions),t)}get renderer(){return this.options.renderer}set renderer(t){this.options.renderer=t}compile(t,e=!1,n=!1,i=this.options){const r=this.trimIndentation(t),s=e?this.decodeHtml(r):r,o=n?this.renderEmoji(s):s,a=n_.parse(o,i);return this.sanitizer.sanitize(this.securityContext,a)||""}getSource(t){if(!this.http)throw new Error("[ngx-markdown] When using the `src` attribute you *have to* pass the `HttpClient` as a parameter of the `forRoot` method. See README for more information");return this.http.get(t,{responseType:"text"}).pipe(F(e=>this.handleExtension(t,e)))}highlight(t){if(Bh(this.platform)&&"undefined"!=typeof Prism){t||(t=document);const e=t.querySelectorAll('pre code:not([class*="language-"])');Array.prototype.forEach.call(e,t=>t.classList.add("language-none")),Prism.highlightAllUnder(t)}}renderKatex(t,e){if(!Bh(this.platform))return t;if("undefined"==typeof katex||void 0===katex.renderToString)throw new Error("[ngx-markdown] When using the `katex` attribute you *have to* include KaTeX files to `angular.json` or use imports. See README for more information");return t.replace(/\$([^\s][^$]*?[^\s])\$/gm,(t,n)=>katex.renderToString(n,e))}decodeHtml(t){if(!Bh(this.platform))return t;const e=document.createElement("textarea");return e.innerHTML=t,e.value}handleExtension(t,e){const n=t?t.split("?")[0].split(".").splice(-1).join():"";return"md"!==n?"```"+n+"\n"+e+"\n```":e}renderEmoji(t){if(!Bh(this.platform))return t;if("undefined"==typeof joypixels||void 0===joypixels.shortnameToUnicode)throw new Error("[ngx-markdown] When using the `emoji` attribute you *have to* include Emoji-Toolkit files to `angular.json` or use imports. See README for more information");return joypixels.shortnameToUnicode(t)}trimIndentation(t){if(!t)return"";let e;return t.split("\n").map(t=>{let n=e;return t.length>0&&(n=isNaN(n)?t.search(/\S|$/):Math.min(t.search(/\S|$/),n)),isNaN(e)&&(e=n),n?t.substring(n):t}).join("\n")}}return t.\u0275fac=function(e){return new(e||t)(pi(xu),pi(m_),pi(Vd,8),pi(p_,8),pi(pd))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),y_=(()=>{class t{constructor(t,e){this.element=t,this.markdownService=e,this.error=new Yl,this.load=new Yl,this.ready=new Yl,this._emoji=!1,this._katex=!1,this._lineHighlight=!1,this._lineNumbers=!1}get emoji(){return this._emoji}set emoji(t){this._emoji=this.coerceBooleanProperty(t)}get katex(){return this._katex}set katex(t){this._katex=this.coerceBooleanProperty(t)}get lineHighlight(){return this._lineHighlight}set lineHighlight(t){this._lineHighlight=this.coerceBooleanProperty(t)}get lineNumbers(){return this._lineNumbers}set lineNumbers(t){this._lineNumbers=this.coerceBooleanProperty(t)}ngOnChanges(){null==this.data?null==this.src||this.handleSrc():this.handleData()}ngAfterViewInit(){this.data||this.src||this.handleTransclusion()}render(t,e=!1){let n=this.markdownService.compile(t,e,this.emoji);n=this.katex?this.markdownService.renderKatex(n,this.katexOptions):n,this.element.nativeElement.innerHTML=n,this.handlePlugins(),this.markdownService.highlight(this.element.nativeElement),this.ready.emit()}coerceBooleanProperty(t){return null!=t&&"false"!=`${String(t)}`}handleData(){this.render(this.data)}handleSrc(){this.markdownService.getSource(this.src).subscribe(t=>{this.render(t),this.load.emit(t)},t=>this.error.emit(t))}handleTransclusion(){this.render(this.element.nativeElement.innerHTML,!0)}handlePlugins(){this.lineHighlight&&this.setPluginOptions(this.element.nativeElement,{dataLine:this.line,dataLineOffset:this.lineOffset}),this.lineNumbers&&(this.setPluginClass(this.element.nativeElement,f_.LineNumbers),this.setPluginOptions(this.element.nativeElement,{dataStart:this.start}))}setPluginClass(t,e){const n=t.querySelectorAll("pre");for(let i=0;i<n.length;i++){const t=e instanceof Array?e:[e];n.item(i).classList.add(...t)}}setPluginOptions(t,e){const n=t.querySelectorAll("pre");for(let i=0;i<n.length;i++)Object.keys(e).forEach(t=>{const r=e[t];if(r){const e=this.toLispCase(t);n.item(i).setAttribute(e,r.toString())}})}toLispCase(t){const e=t.match(/([A-Z])/g);if(!e)return t;let n=t.toString();for(let i=0,r=e.length;i<r;i++)n=n.replace(new RegExp(e[i]),"-"+e[i].toLowerCase());return"-"===n.slice(0,1)&&(n=n.slice(1)),n}}return t.\u0275fac=function(e){return new(e||t)(ko(ja),ko(g_))},t.\u0275cmp=Ht({type:t,selectors:[["markdown"],["","markdown",""]],inputs:{data:"data",src:"src",emoji:"emoji",katex:"katex",katexOptions:"katexOptions",lineHighlight:"lineHighlight",line:"line",lineOffset:"lineOffset",lineNumbers:"lineNumbers",start:"start"},outputs:{error:"error",load:"load",ready:"ready"},features:[he],ngContentSelectors:d_,decls:1,vars:0,template:function(t,e){1&t&&(Ho(),Wo(0))},encapsulation:2}),t})(),v_=(()=>{class t{static forRoot(e){return{ngModule:t,providers:[g_,e&&e.loader||[],e&&e.markedOptions||[],{provide:m_,useValue:e&&null!=e.sanitize?e.sanitize:tr.HTML}]}}static forChild(){return{ngModule:t}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({}),t})();class __ extends y{notifyNext(t,e,n,i,r){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class b_ extends y{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function x_(t,e,n,i,r=new b_(t,n,i)){if(!r.closed)return e instanceof x?e.subscribe(r):I(e)(r)}const w_={};function C_(...t){let e,n;return S(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&h(t[0])&&(t=t[0]),W(t,n).lift(new A_(e))}class A_{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new E_(t,this.resultSelector))}}class E_ extends __{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(w_),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(x_(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const i=this.values,r=this.toRespond?i[n]===w_?--this.toRespond:this.toRespond:0;i[n]=e,0===r&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function k_(t){return new x(e=>{let n;try{n=t()}catch(i){return void e.error(i)}return(n?L(n):Jf()).subscribe(e)})}function D_(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new S_(t,e,n))}}class S_{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new F_(t,this.accumulator,this.seed,this.hasSeed))}}class F_ extends y{constructor(t,e,n,i){super(t),this.accumulator=e,this._seed=n,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(i){this.destination.error(i)}this.seed=n,this.destination.next(n)}}function O_(t){return function(e){const n=new M_(t),i=e.lift(n);return n.caught=i}}class M_{constructor(t){this.selector=t}call(t,e){return e.subscribe(new T_(t,this.selector,this.caught))}}class T_ extends z{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const i=new $(this);this.add(i);const r=j(n,i);r!==i&&this.add(r)}}}function P_(t){return function(e){return 0===t?Jf():e.lift(new R_(t))}}class R_{constructor(t){if(this.total=t,this.total<0)throw new Sp}call(t,e){return e.subscribe(new B_(t,this.total))}}class B_ extends y{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,i=this.count++;e.length<n?e.push(t):e[i%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,i=this.ring;for(let r=0;r<n;r++){const r=e++%n;t.next(i[r])}}t.complete()}}function I_(t){return e=>e.lift(new N_(t))}class N_{constructor(t){this.callback=t}call(t,e){return e.subscribe(new L_(t,this.callback))}}class L_ extends y{constructor(t,e){super(t),this.add(new p(e))}}class $_{constructor(t,e){this.id=t,this.url=e}}class z_ extends $_{constructor(t,e,n="imperative",i=null){super(t,e),this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class j_ extends $_{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class U_ extends $_{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class V_ extends $_{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class q_ extends $_{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class H_ extends $_{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class W_ extends $_{constructor(t,e,n,i,r){super(t,e),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class G_ extends $_{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class X_ extends $_{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Y_{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class K_{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Z_{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Q_{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class J_{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class tb{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eb{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const nb="primary";class ib{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function rb(t){return new ib(t)}function sb(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function ob(t,e,n){const i=n.path.split("/");if(i.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||i.length<t.length))return null;const r={};for(let s=0;s<i.length;s++){const e=i[s],n=t[s];if(e.startsWith(":"))r[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function ab(t,e){const n=t?Object.keys(t):void 0,i=e?Object.keys(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!lb(t[r],e[r]))return!1;return!0}function lb(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),i=[...e].sort();return n.every((t,e)=>i[e]===t)}return t===e}function ub(t){return Array.prototype.concat.apply([],t)}function cb(t){return t.length>0?t[t.length-1]:null}function hb(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function db(t){return No(t)?t:Bo(t)?L(Promise.resolve(t)):bd(t)}const fb={exact:function t(e,n,i){if(!wb(e.segments,n.segments))return!1;if(!vb(e.segments,n.segments,i))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r],i))return!1}return!0},subset:gb},pb={exact:function(t,e){return ab(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>lb(t[n],e[n]))},ignored:()=>!0};function mb(t,e,n){return fb[n.paths](t.root,e.root,n.matrixParams)&&pb[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function gb(t,e,n){return yb(t,e,e.segments,n)}function yb(t,e,n,i){if(t.segments.length>n.length){const r=t.segments.slice(0,n.length);return!!wb(r,n)&&!e.hasChildren()&&!!vb(r,n,i)}if(t.segments.length===n.length){if(!wb(t.segments,n))return!1;if(!vb(t.segments,n,i))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!gb(t.children[n],e.children[n],i))return!1}return!0}{const r=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!wb(t.segments,r)&&!!vb(t.segments,r,i)&&!!t.children.primary&&yb(t.children.primary,e,s,i)}}function vb(t,e,n){return e.every((e,i)=>pb[n](t[i].parameters,e.parameters))}class _b{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=rb(this.queryParams)),this._queryParamMap}toString(){return Eb.serialize(this)}}class bb{constructor(t,e){this.segments=t,this.children=e,this.parent=null,hb(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kb(this)}}class xb{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=rb(this.parameters)),this._parameterMap}toString(){return Pb(this)}}function wb(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Cb{}class Ab{parse(t){const e=new Lb(t);return new _b(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${Db(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Fb(e)}=${Fb(t)}`).join("&"):`${Fb(e)}=${Fb(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Eb=new Ab;function kb(t){return t.segments.map(t=>Pb(t)).join("/")}function Db(t,e){if(!t.hasChildren())return kb(t);if(e){const e=t.children.primary?Db(t.children.primary,!1):"",n=[];return hb(t.children,(t,e)=>{e!==nb&&n.push(`${e}:${Db(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return hb(t.children,(t,i)=>{i===nb&&(n=n.concat(e(t,i)))}),hb(t.children,(t,i)=>{i!==nb&&(n=n.concat(e(t,i)))}),n}(t,(e,n)=>n===nb?[Db(t.children.primary,!1)]:[`${n}:${Db(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${kb(t)}/${e[0]}`:`${kb(t)}/(${e.join("//")})`}}function Sb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Fb(t){return Sb(t).replace(/%3B/gi,";")}function Ob(t){return Sb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Mb(t){return decodeURIComponent(t)}function Tb(t){return Mb(t.replace(/\+/g,"%20"))}function Pb(t){return`${Ob(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Ob(t)}=${Ob(e[t])}`).join("")}`;var e}const Rb=/^[^\/()?;=#]+/;function Bb(t){const e=t.match(Rb);return e?e[0]:""}const Ib=/^[^=?&#]+/,Nb=/^[^?&#]+/;class Lb{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new bb([],{}):new bb([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new bb(t,e)),n}parseSegment(){const t=Bb(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new xb(Mb(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Bb(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Bb(this.remaining);t&&(n=t,this.capture(n))}t[Mb(e)]=Mb(n)}parseQueryParam(t){const e=function(t){const e=t.match(Ib);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Nb);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const i=Tb(e),r=Tb(n);if(t.hasOwnProperty(i)){let e=t[i];Array.isArray(e)||(e=[e],t[i]=e),e.push(r)}else t[i]=r}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Bb(this.remaining),i=this.remaining[n.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let r;n.indexOf(":")>-1?(r=n.substr(0,n.indexOf(":")),this.capture(r),this.capture(":")):t&&(r=nb);const s=this.parseChildren();e[r]=1===Object.keys(s).length?s.primary:new bb([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class $b{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=zb(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=zb(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=jb(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return jb(t,this._root).map(t=>t.value)}}function zb(t,e){if(t===e.value)return e;for(const n of e.children){const e=zb(t,n);if(e)return e}return null}function jb(t,e){if(t===e.value)return[e];for(const n of e.children){const i=jb(t,n);if(i.length)return i.unshift(e),i}return[]}class Ub{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Vb(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class qb extends $b{constructor(t,e){super(t),this.snapshot=e,Kb(this,t)}toString(){return this.snapshot.toString()}}function Hb(t,e){const n=function(t,e){const n=new Xb([],{},{},"",{},nb,e,null,t.root,-1,{});return new Yb("",new Ub(n,[]))}(t,e),i=new vp([new xb("",{})]),r=new vp({}),s=new vp({}),o=new vp({}),a=new vp(""),l=new Wb(i,r,o,a,s,nb,e,n.root);return l.snapshot=n.root,new qb(new Ub(l,[]),n)}class Wb{constructor(t,e,n,i,r,s,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(F(t=>rb(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(F(t=>rb(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Gb(t,e="emptyOnly"){const n=t.pathFromRoot;let i=0;if("always"!==e)for(i=n.length-1;i>=1;){const t=n[i],e=n[i-1];if(t.routeConfig&&""===t.routeConfig.path)i--;else{if(e.component)break;i--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(i))}class Xb{constructor(t,e,n,i,r,s,o,a,l,u,c){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=u,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=rb(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=rb(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Yb extends $b{constructor(t,e){super(e),this.url=t,Kb(this,e)}toString(){return Zb(this._root)}}function Kb(t,e){e.value._routerState=t,e.children.forEach(e=>Kb(t,e))}function Zb(t){const e=t.children.length>0?` { ${t.children.map(Zb).join(", ")} } `:"";return`${t.value}${e}`}function Qb(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ab(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),ab(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ab(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),ab(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Jb(t,e){var n,i;return ab(t.params,e.params)&&wb(n=t.url,i=e.url)&&n.every((t,e)=>ab(t.parameters,i[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||Jb(t.parent,e.parent))}function tx(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const i=n.value;i._futureSnapshot=e.value;const r=function(t,e,n){return e.children.map(e=>{for(const i of n.children)if(t.shouldReuseRoute(e.value,i.value.snapshot))return tx(t,e,i);return tx(t,e)})}(t,e,n);return new Ub(i,r)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return ex(e,t),t}}const n=new Wb(new vp((i=e.value).url),new vp(i.params),new vp(i.queryParams),new vp(i.fragment),new vp(i.data),i.outlet,i.component,i),r=e.children.map(e=>tx(t,e));return new Ub(n,r)}var i}function ex(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)ex(t.children[n],e.children[n])}function nx(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function ix(t){return"object"==typeof t&&null!=t&&t.outlets}function rx(t,e,n,i,r){let s={};return i&&hb(i,(t,e)=>{s[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new _b(n.root===t?e:sx(n.root,t,e),s,r)}function sx(t,e,n){const i={};return hb(t.children,(t,r)=>{i[r]=t===e?n:sx(t,e,n)}),new bb(t.segments,i)}class ox{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&nx(n[0]))throw new Error("Root segment cannot have matrix parameters");const i=n.find(ix);if(i&&i!==cb(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ax{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function lx(t,e,n){if(t||(t=new bb([],{})),0===t.segments.length&&t.hasChildren())return ux(t,e,n);const i=function(t,e,n){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return s;const e=t.segments[r],o=n[i];if(ix(o))break;const a=`${o}`,l=i<n.length-1?n[i+1]:null;if(r>0&&void 0===a)break;if(a&&l&&"object"==typeof l&&void 0===l.outlets){if(!fx(a,l,e))return s;i+=2}else{if(!fx(a,{},e))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const e=new bb(t.segments.slice(0,i.pathIndex),{});return e.children.primary=new bb(t.segments.slice(i.pathIndex),t.children),ux(e,0,r)}return i.match&&0===r.length?new bb(t.segments,{}):i.match&&!t.hasChildren()?cx(t,e,n):i.match?ux(t,0,r):cx(t,e,n)}function ux(t,e,n){if(0===n.length)return new bb(t.segments,{});{const i=function(t){return ix(t[0])?t[0].outlets:{[nb]:t}}(n),r={};return hb(i,(n,i)=>{"string"==typeof n&&(n=[n]),null!==n&&(r[i]=lx(t.children[i],e,n))}),hb(t.children,(t,e)=>{void 0===i[e]&&(r[e]=t)}),new bb(t.segments,r)}}function cx(t,e,n){const i=t.segments.slice(0,e);let r=0;for(;r<n.length;){const s=n[r];if(ix(s)){const t=hx(s.outlets);return new bb(i,t)}if(0===r&&nx(n[0])){i.push(new xb(t.segments[e].path,dx(n[0]))),r++;continue}const o=ix(s)?s.outlets.primary:`${s}`,a=r<n.length-1?n[r+1]:null;o&&a&&nx(a)?(i.push(new xb(o,dx(a))),r+=2):(i.push(new xb(o,{})),r++)}return new bb(i,{})}function hx(t){const e={};return hb(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=cx(new bb([],{}),0,t))}),e}function dx(t){const e={};return hb(t,(t,n)=>e[n]=`${t}`),e}function fx(t,e,n){return t==n.path&&ab(e,n.parameters)}class px{constructor(t,e,n,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=i}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Qb(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const i=Vb(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,i[e],n),delete i[e]}),hb(i,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const i=t.value,r=e?e.value:null;if(i===r)if(i.component){const r=n.getContext(i.outlet);r&&this.deactivateChildRoutes(t,e,r.children)}else this.deactivateChildRoutes(t,e,n);else r&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:i})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),i=n&&t.value.component?n.children:e,r=Vb(t);for(const s of Object.keys(r))this.deactivateRouteAndItsChildren(r[s],i);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const i=Vb(e);t.children.forEach(t=>{this.activateRoutes(t,i[t.value.outlet],n),this.forwardEvent(new tb(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Q_(t.value.snapshot))}activateRoutes(t,e,n){const i=t.value,r=e?e.value:null;if(Qb(i),i===r)if(i.component){const r=n.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,r.children)}else this.activateChildRoutes(t,e,n);else if(i.component){const e=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const t=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),mx(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),r=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=i,e.resolver=r,e.outlet&&e.outlet.activateWith(i,r),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function mx(t){Qb(t.value),t.children.forEach(mx)}class gx{constructor(t,e){this.routes=t,this.module=e}}function yx(t){return"function"==typeof t}function vx(t){return t instanceof _b}const _x=Symbol("INITIAL_VALUE");function bx(){return Xf(t=>C_(t.map(t=>t.pipe(Fp(1),Gf(_x)))).pipe(D_((t,e)=>{let n=!1;return e.reduce((t,i,r)=>{if(t!==_x)return t;if(i===_x&&(n=!0),!n){if(!1===i)return i;if(r===e.length-1||vx(i))return i}return t},t)},_x),wd(t=>t!==_x),F(t=>vx(t)?t:!0===t),Fp(1)))}let xx=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ht({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&Mo(0,"router-outlet")},directives:function(){return[_w]},encapsulation:2}),t})();function wx(t,e=""){for(let n=0;n<t.length;n++){const i=t[n];Cx(i,Ax(e,i))}}function Cx(t,e){t.children&&wx(t.children,e)}function Ax(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Ex(t){const e=t.children&&t.children.map(Ex),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==nb&&(n.component=xx),n}function kx(t){return t.outlet||nb}function Dx(t,e){const n=t.filter(t=>kx(t)===e);return n.push(...t.filter(t=>kx(t)!==e)),n}const Sx={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Fx(t,e,n){var i;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Sx):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const r=(e.matcher||ob)(n,t,e);if(!r)return Object.assign({},Sx);const s={};hb(r.posParams,(t,e)=>{s[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o,positionalParamSegments:null!==(i=r.posParams)&&void 0!==i?i:{}}}function Ox(t,e,n,i,r="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Mx(t,e,n)&&kx(n)!==nb)}(t,n,i)){const r=new bb(e,function(t,e,n,i){const r={};r.primary=i,i._sourceSegment=t,i._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&kx(s)!==nb){const n=new bb([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,r[kx(s)]=n}return r}(t,e,i,new bb(n,t.children)));return r._sourceSegment=t,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Mx(t,e,n))}(t,n,i)){const s=new bb(t.segments,function(t,e,n,i,r,s){const o={};for(const a of i)if(Mx(t,n,a)&&!r[kx(a)]){const n=new bb([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[kx(a)]=n}return Object.assign(Object.assign({},r),o)}(t,e,n,i,t.children,r));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const s=new bb(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function Mx(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Tx(t,e,n,i){return!!(kx(t)===i||i!==nb&&Mx(e,n,t))&&("**"===t.path||Fx(e,t,n).matched)}function Px(t,e,n){return 0===e.length&&!t.children[n]}class Rx{constructor(t){this.segmentGroup=t||null}}class Bx{constructor(t){this.urlTree=t}}function Ix(t){return new x(e=>e.error(new Rx(t)))}function Nx(t){return new x(e=>e.error(new Bx(t)))}function Lx(t){return new x(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class $x{constructor(t,e,n,i,r){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=r,this.allowRedirects=!0,this.ngModule=t.get(wl)}apply(){const t=Ox(this.urlTree.root,[],[],this.config).segmentGroup,e=new bb(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,nb).pipe(F(t=>this.createUrlTree(zx(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(O_(t=>{if(t instanceof Bx)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Rx)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,nb).pipe(F(e=>this.createUrlTree(zx(e),t.queryParams,t.fragment))).pipe(O_(t=>{if(t instanceof Rx)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const i=t.segments.length>0?new bb([],{[nb]:t}):t;return new _b(i,e,n)}expandSegmentGroup(t,e,n,i){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(F(t=>new bb([],t))):this.expandSegment(t,n,e,n.segments,i,!0)}expandChildren(t,e,n){const i=[];for(const r of Object.keys(n.children))"primary"===r?i.unshift(r):i.push(r);return L(i).pipe(xd(i=>{const r=n.children[i],s=Dx(e,i);return this.expandSegmentGroup(t,s,r,i).pipe(F(t=>({segment:t,outlet:i})))}),D_((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return i=>i.pipe(t?wd((e,n)=>t(e,n,i)):b,P_(1),n?r_(e):a_(()=>new i_))}())}expandSegment(t,e,n,i,r,s){return L(n).pipe(xd(o=>this.expandSegmentAgainstRoute(t,e,n,o,i,r,s).pipe(O_(t=>{if(t instanceof Rx)return bd(null);throw t}))),h_(t=>!!t),O_((t,n)=>{if(t instanceof i_||"EmptyError"===t.name){if(Px(e,i,r))return bd(new bb([],{}));throw new Rx(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,i,r,s,o){return Tx(i,e,r,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,r,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,i,r,s):Ix(e):Ix(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,i,r,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,i,r,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,i){const r=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Nx(r):this.lineralizeSegments(n,r).pipe(U(n=>{const r=new bb(n,{});return this.expandSegment(t,r,e,n,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,i,r,s){const{matched:o,consumedSegments:a,lastChild:l,positionalParamSegments:u}=Fx(e,i,r);if(!o)return Ix(e);const c=this.applyRedirectCommands(a,i.redirectTo,u);return i.redirectTo.startsWith("/")?Nx(c):this.lineralizeSegments(i,c).pipe(U(i=>this.expandSegment(t,e,n,i.concat(r.slice(l)),s,!1)))}matchSegmentAgainstRoute(t,e,n,i,r){if("**"===n.path)return n.loadChildren?(n._loadedConfig?bd(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(F(t=>(n._loadedConfig=t,new bb(i,{})))):bd(new bb(i,{}));const{matched:s,consumedSegments:o,lastChild:a}=Fx(e,n,i);if(!s)return Ix(e);const l=i.slice(a);return this.getChildConfig(t,n,i).pipe(U(t=>{const i=t.module,s=t.routes,{segmentGroup:a,slicedSegments:u}=Ox(e,o,l,s),c=new bb(a.segments,a.children);if(0===u.length&&c.hasChildren())return this.expandChildren(i,s,c).pipe(F(t=>new bb(o,t)));if(0===s.length&&0===u.length)return bd(new bb(o,{}));const h=kx(n)===r;return this.expandSegment(i,c,s,u,h?nb:r,!0).pipe(F(t=>new bb(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?bd(new gx(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?bd(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(U(n=>n?this.configLoader.load(t.injector,e).pipe(F(t=>(e._loadedConfig=t,t))):function(t){return new x(e=>e.error(sb(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):bd(new gx([],t))}runCanLoadGuards(t,e,n){const i=e.canLoad;return i&&0!==i.length?bd(i.map(i=>{const r=t.get(i);let s;if(function(t){return t&&yx(t.canLoad)}(r))s=r.canLoad(e,n);else{if(!yx(r))throw new Error("Invalid CanLoad guard");s=r(e,n)}return db(s)})).pipe(bx(),xp(t=>{if(!vx(t))return;const e=sb(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),F(t=>!0===t)):bd(!0)}lineralizeSegments(t,e){let n=[],i=e.root;for(;;){if(n=n.concat(i.segments),0===i.numberOfChildren)return bd(n);if(i.numberOfChildren>1||!i.children.primary)return Lx(t.redirectTo);i=i.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,i){const r=this.createSegmentGroup(t,e.root,n,i);return new _b(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return hb(t,(t,i)=>{if("string"==typeof t&&t.startsWith(":")){const r=t.substring(1);n[i]=e[r]}else n[i]=t}),n}createSegmentGroup(t,e,n,i){const r=this.createSegments(t,e.segments,n,i);let s={};return hb(e.children,(e,r)=>{s[r]=this.createSegmentGroup(t,e,n,i)}),new bb(r,s)}createSegments(t,e,n,i){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,i):this.findOrReturn(e,n))}findPosParam(t,e,n){const i=n[e.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return i}findOrReturn(t,e){let n=0;for(const i of e){if(i.path===t.path)return e.splice(n),i;n++}return t}}function zx(t){const e={};for(const n of Object.keys(t.children)){const i=zx(t.children[n]);(i.segments.length>0||i.hasChildren())&&(e[n]=i)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new bb(t.segments.concat(e.segments),e.children)}return t}(new bb(t.segments,e))}class jx{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Ux{constructor(t,e){this.component=t,this.route=e}}function Vx(t,e,n){const i=t._root;return Hx(i,e?e._root:null,n,[i.value])}function qx(t,e,n){const i=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:n).get(t)}function Hx(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Vb(e);return t.children.forEach(t=>{!function(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!wb(t.url,e.url);case"pathParamsOrQueryParamsChange":return!wb(t.url,e.url)||!ab(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Jb(t,e)||!ab(t.queryParams,e.queryParams);case"paramsChange":default:return!Jb(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new jx(i)):(s.data=o.data,s._resolvedData=o._resolvedData),Hx(t,e,s.component?a?a.children:null:n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Ux(a.outlet.component,o))}else o&&Wx(e,a,r),r.canActivateChecks.push(new jx(i)),Hx(t,null,s.component?a?a.children:null:n,i,r)}(t,s[t.value.outlet],n,i.concat([t.value]),r),delete s[t.value.outlet]}),hb(s,(t,e)=>Wx(t,n.getContext(e),r)),r}function Wx(t,e,n){const i=Vb(t),r=t.value;hb(i,(t,i)=>{Wx(t,r.component?e?e.children.getContext(i):null:e,n)}),n.canDeactivateChecks.push(new Ux(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}class Gx{}function Xx(t){return new x(e=>e.error(t))}class Yx{constructor(t,e,n,i,r,s){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=i,this.paramsInheritanceStrategy=r,this.relativeLinkResolution=s}recognize(){const t=Ox(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,nb);if(null===e)return null;const n=new Xb([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},nb,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Ub(n,e),r=new Yb(this.url,i);return this.inheritParamsAndData(r._root),r}inheritParamsAndData(t){const e=t.value,n=Gb(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const r of Object.keys(e.children)){const i=e.children[r],s=Dx(t,r),o=this.processSegmentGroup(s,i,r);if(null===o)return null;n.push(...o)}const i=Zx(n);return i.sort((t,e)=>t.value.outlet===nb?-1:e.value.outlet===nb?1:t.value.outlet.localeCompare(e.value.outlet)),i}processSegment(t,e,n,i){for(const r of t){const t=this.processSegmentAgainstRoute(r,e,n,i);if(null!==t)return t}return Px(e,n,i)?[]:null}processSegmentAgainstRoute(t,e,n,i){if(t.redirectTo||!Tx(t,e,n,i))return null;let r,s=[],o=[];if("**"===t.path){const i=n.length>0?cb(n).parameters:{};r=new Xb(n,i,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,tw(t),kx(t),t.component,t,Qx(e),Jx(e)+n.length,ew(t))}else{const i=Fx(e,t,n);if(!i.matched)return null;s=i.consumedSegments,o=n.slice(i.lastChild),r=new Xb(s,i.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,tw(t),kx(t),t.component,t,Qx(e),Jx(e)+s.length,ew(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:l,slicedSegments:u}=Ox(e,s,o,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===u.length&&l.hasChildren()){const t=this.processChildren(a,l);return null===t?null:[new Ub(r,t)]}if(0===a.length&&0===u.length)return[new Ub(r,[])];const c=kx(t)===i,h=this.processSegment(a,l,u,c?nb:i);return null===h?null:[new Ub(r,h)]}}function Kx(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Zx(t){const e=[],n=new Set;for(const i of t){if(!Kx(i)){e.push(i);continue}const t=e.find(t=>i.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...i.children),n.add(t)):e.push(i)}for(const i of n){const t=Zx(i.children);e.push(new Ub(i.value,t))}return e.filter(t=>!n.has(t))}function Qx(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Jx(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function tw(t){return t.data||{}}function ew(t){return t.resolve||{}}function nw(t){return Xf(e=>{const n=t(e);return n?L(n).pipe(F(()=>e)):bd(e)})}class iw extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const rw=new Kn("ROUTES");class sw{constructor(t,e,n,i){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=i}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(F(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new gx(ub(i.injector.get(rw,void 0,Ct.Self|Ct.Optional)).map(Ex),i)}),O_(t=>{throw e._loader$=void 0,t}));return e._loader$=new Z(n,()=>new k).pipe(X()),e._loader$}loadModuleFactory(t){return"string"==typeof t?L(this.loader.load(t)):db(t()).pipe(U(t=>t instanceof Cl?bd(t):L(this.compiler.compileModuleAsync(t))))}}class ow{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new aw,this.attachRef=null}}class aw{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new ow,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class lw{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function uw(t){throw t}function cw(t,e,n){return e.parse("/")}function hw(t,e){return bd(null)}const dw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},fw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let pw=(()=>{class t{constructor(t,e,n,i,r,s,o,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new k,this.errorHandler=uw,this.malformedUriErrorHandler=cw,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:hw,afterPreactivation:hw},this.urlHandlingStrategy=new lw,this.routeReuseStrategy=new iw,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=r.get(wl),this.console=r.get(Cu);const l=r.get(Nu);this.isNgZoneEnabled=l instanceof Nu&&Nu.isInAngularZone(),this.resetConfig(a),this.currentUrlTree=new _b(new bb([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new sw(s,o,t=>this.triggerEvent(new Y_(t)),t=>this.triggerEvent(new K_(t))),this.routerState=Hb(this.currentUrlTree,this.rootComponentType),this.transitions=new vp({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const e=this.events;return t.pipe(wd(t=>0!==t.id),F(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Xf(t=>{let n=!1,i=!1;return bd(t).pipe(xp(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Xf(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return bd(t).pipe(Xf(t=>{const n=this.transitions.getValue();return e.next(new z_(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Qf:Promise.resolve(t)}),function(t,e,n,i){return Xf(r=>function(t,e,n,i,r){return new $x(t,e,n,i,r).apply()}(t,e,n,r.extractedUrl,i).pipe(F(t=>Object.assign(Object.assign({},r),{urlAfterRedirects:t}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),xp(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,i,r){return U(s=>function(t,e,n,i,r="emptyOnly",s="legacy"){try{const o=new Yx(t,e,n,i,r,s).recognize();return null===o?Xx(new Gx):bd(o)}catch(o){return Xx(o)}}(t,e,s.urlAfterRedirects,n(s.urlAfterRedirects),i,r).pipe(F(t=>Object.assign(Object.assign({},s),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),xp(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,t),this.browserUrlTree=t.urlAfterRedirects);const n=new q_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:i,source:r,restoredState:s,extras:o}=t,a=new z_(n,this.serializeUrl(i),r,s);e.next(a);const l=Hb(i,this.rootComponentType).snapshot;return bd(Object.assign(Object.assign({},t),{targetSnapshot:l,urlAfterRedirects:i,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Qf}),nw(t=>{const{targetSnapshot:e,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!s,replaceUrl:!!o})}),xp(t=>{const e=new H_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),F(t=>Object.assign(Object.assign({},t),{guards:Vx(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return U(n=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?bd(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,i){return L(t).pipe(U(t=>function(t,e,n,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?bd(s.map(s=>{const o=qx(s,e,r);let a;if(function(t){return t&&yx(t.canDeactivate)}(o))a=db(o.canDeactivate(t,e,n,i));else{if(!yx(o))throw new Error("Invalid CanDeactivate guard");a=db(o(t,e,n,i))}return a.pipe(h_())})).pipe(bx()):bd(!0)}(t.component,t.route,n,e,i)),h_(t=>!0!==t,!0))}(o,i,r,t).pipe(U(n=>n&&"boolean"==typeof n?function(t,e,n,i){return L(e).pipe(xd(e=>Wf(function(t,e){return null!==t&&e&&e(new Z_(t)),bd(!0)}(e.route.parent,i),function(t,e){return null!==t&&e&&e(new J_(t)),bd(!0)}(e.route,i),function(t,e,n){const i=e[e.length-1],r=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>k_(()=>bd(e.guards.map(r=>{const s=qx(r,e.node,n);let o;if(function(t){return t&&yx(t.canActivateChild)}(s))o=db(s.canActivateChild(i,t));else{if(!yx(s))throw new Error("Invalid CanActivateChild guard");o=db(s(i,t))}return o.pipe(h_())})).pipe(bx())));return bd(r).pipe(bx())}(t,e.path,n),function(t,e,n){const i=e.routeConfig?e.routeConfig.canActivate:null;return i&&0!==i.length?bd(i.map(i=>k_(()=>{const r=qx(i,e,n);let s;if(function(t){return t&&yx(t.canActivate)}(r))s=db(r.canActivate(e,t));else{if(!yx(r))throw new Error("Invalid CanActivate guard");s=db(r(e,t))}return s.pipe(h_())}))).pipe(bx()):bd(!0)}(t,e.route,n))),h_(t=>!0!==t,!0))}(i,s,t,e):bd(n)),F(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),xp(t=>{if(vx(t.guardsResult)){const e=sb(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new W_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),wd(t=>!!t.guardsResult||(this.restoreHistory(t),this.cancelNavigationTransition(t,""),!1)),nw(t=>{if(t.guards.canActivateChecks.length)return bd(t).pipe(xp(t=>{const e=new G_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Xf(t=>{let e=!1;return bd(t).pipe((n=this.paramsInheritanceStrategy,i=this.ngModule.injector,U(t=>{const{targetSnapshot:e,guards:{canActivateChecks:r}}=t;if(!r.length)return bd(t);let s=0;return L(r).pipe(xd(t=>function(t,e,n,i){return function(t,e,n,i){const r=Object.keys(t);if(0===r.length)return bd({});const s={};return L(r).pipe(U(r=>function(t,e,n,i){const r=qx(t,e,i);return db(r.resolve?r.resolve(e,n):r(e,n))}(t[r],e,n,i).pipe(xp(t=>{s[r]=t}))),P_(1),U(()=>Object.keys(s).length===r.length?bd(s):Qf))}(t._resolve,t,e,i).pipe(F(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Gb(t,n).resolve),null)))}(t.route,e,n,i)),xp(()=>s++),P_(1),U(e=>s===r.length?bd(t):Qf))})),xp({next:()=>e=!0,complete:()=>{e||(this.restoreHistory(t),this.cancelNavigationTransition(t,"At least one route resolver didn't emit any value."))}}));var n,i}),xp(t=>{const e=new X_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),nw(t=>{const{targetSnapshot:e,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!s,replaceUrl:!!o})}),F(t=>{const e=function(t,e,n){const i=tx(t,e._root,n?n._root:void 0);return new qb(i,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),xp(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,t),this.browserUrlTree=t.urlAfterRedirects)}),(r=this.rootContexts,s=this.routeReuseStrategy,o=t=>this.triggerEvent(t),F(t=>(new px(s,t.targetRouterState,t.currentRouterState,o).activate(r),t))),xp({next(){n=!0},complete(){n=!0}}),I_(()=>{if(!n&&!i){const e=`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(t),this.cancelNavigationTransition(t,e)):this.cancelNavigationTransition(t,e)}this.currentNavigation=null}),O_(n=>{if(i=!0,(r=n)&&r.ngNavigationCancelingError){const i=vx(n.url);i||(this.navigated=!0,this.restoreHistory(t,!0));const r=new U_(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(r),i?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.restoreHistory(t,!0);const i=new V_(t.id,this.serializeUrl(t.extractedUrl),n);e.next(i);try{t.resolve(this.errorHandler(n))}catch(s){t.reject(s)}}var r;return Qf}));var r,s,o}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:i}=e,r={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,delete t.\u0275routerPageId,0!==Object.keys(t).length&&(r.state=t)}this.scheduleNavigation(i,t,n,r)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){wx(t),this.config=t.map(Ex),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:i,fragment:r,queryParamsHandling:s,preserveFragment:o}=e,a=n||this.routerState.root,l=o?this.currentUrlTree.fragment:r;let u=null;switch(s){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}return null!==u&&(u=this.removeEmptyProps(u)),function(t,e,n,i,r){if(0===n.length)return rx(e.root,e.root,e,i,r);const s=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new ox(!0,0,t);let e=0,n=!1;const i=t.reduce((t,i,r)=>{if("object"==typeof i&&null!=i){if(i.outlets){const e={};return hb(i.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(i.segmentPath)return[...t,i.segmentPath]}return"string"!=typeof i?[...t,i]:0===r?(i.split("/").forEach((i,r)=>{0==r&&"."===i||(0==r&&""===i?n=!0:".."===i?e++:""!=i&&t.push(i))}),t):[...t,i]},[]);return new ox(n,e,i)}(n);if(s.toRoot())return rx(e.root,new bb([],{}),e,i,r);const o=function(t,e,n){if(t.isAbsolute)return new ax(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new ax(t,t===e.root,0)}const i=nx(t.commands[0])?0:1;return function(t,e,n){let i=t,r=e,s=n;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new ax(i,!1,r-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(s,e,t),a=o.processChildren?ux(o.segmentGroup,o.index,s.commands):lx(o.segmentGroup,o.index,s.commands);return rx(o.segmentGroup,a,e,i,r)}(a,this.currentUrlTree,t,u,null!=l?l:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=vx(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},dw):!1===e?Object.assign({},fw):e,vx(t))return mb(this.currentUrlTree,t,n);const i=this.parseUrl(t);return mb(this.currentUrlTree,i,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return null!=i&&(e[n]=i),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new j_(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,i,r){var s,o;if(this.disposed)return Promise.resolve(!1);const a=this.getTransition(),l="imperative"!==e&&"imperative"===(null==a?void 0:a.source),u=(this.lastSuccessfulId===a.id||this.currentNavigation?a.rawUrl:a.urlAfterRedirects).toString()===t.toString();if(l&&u)return Promise.resolve(!0);let c,h,d;r?(c=r.resolve,h=r.reject,d=r.promise):d=new Promise((t,e)=>{c=t,h=e});const f=++this.navigationId;let p;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),p=n&&n.\u0275routerPageId?n.\u0275routerPageId:i.replaceUrl||i.skipLocationChange?null!==(s=this.browserPageId)&&void 0!==s?s:0:(null!==(o=this.browserPageId)&&void 0!==o?o:0)+1):p=0,this.setTransition({id:f,targetPageId:p,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:i,resolve:c,reject:h,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(t=>Promise.reject(t))}setBrowserUrl(t,e){const n=this.urlSerializer.serialize(t),i=Object.assign(Object.assign({},e.extras.state),this.generateNgRouterState(e.id,e.targetPageId));this.location.isCurrentPathEqualTo(n)||e.extras.replaceUrl?this.location.replaceState(n,"",i):this.location.go(n,"",i)}restoreHistory(t,e=!1){var n,i;if("computed"===this.canceledNavigationResolution){const e=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)||0===e?this.currentUrlTree===(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)&&0===e&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(e)}else"replace"===this.canceledNavigationResolution&&(e&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,e){const n=new U_(t.id,this.serializeUrl(t.extractedUrl),e);this.triggerEvent(n),t.resolve(!1)}generateNgRouterState(t,e){return"computed"===this.canceledNavigationResolution?{navigationId:t,"\u0275routerPageId":e}:{navigationId:t}}}return t.\u0275fac=function(e){return new(e||t)(pi(Qn),pi(Cb),pi(aw),pi(Mc),pi(ao),pi(oc),pi(Pu),pi(void 0))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),mw=(()=>{class t{constructor(t,e,n,i,r){this.router=t,this.route=e,this.commands=[],this.onChanges=new k,null==n&&i.setAttribute(r.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:yw(this.skipLocationChange),replaceUrl:yw(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:yw(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(ko(pw),ko(Wb),Gn("tabindex"),ko(qa),ko(ja))},t.\u0275dir=Zt({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&Lo("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[he]}),t})(),gw=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new k,this.subscription=t.events.subscribe(t=>{t instanceof j_&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,i,r){if(0!==t||e||n||i||r)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const s={skipLocationChange:yw(this.skipLocationChange),replaceUrl:yw(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,s),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:yw(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(ko(pw),ko(Wb),ko(kc))},t.\u0275dir=Zt({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&Lo("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(ga("href",e.href,er),wo("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[he]}),t})();function yw(t){return""===t||!!t}let vw=(()=>{class t{constructor(t,e,n,i,r,s){this.router=t,this.element=e,this.renderer=n,this.cdr=i,this.link=r,this.linkWithHref=s,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(t=>{t instanceof j_&&this.update()})}ngAfterContentInit(){bd(this.links.changes,this.linksWithHrefs.changes,bd(null)).pipe(H()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const e=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(t=>!!t).map(t=>t.onChanges);this.linkInputChangesSubscription=L(e).pipe(H()).subscribe(t=>{this.isActive!==this.isLinkActive(this.router)(t)&&this.update()})}set routerLinkActive(t){const e=Array.isArray(t)?t:t.split(" ");this.classes=e.filter(t=>!!t)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){this.links&&this.linksWithHrefs&&this.router.navigated&&Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(e=>{t?this.renderer.addClass(this.element.nativeElement,e):this.renderer.removeClass(this.element.nativeElement,e)}))})}isLinkActive(t){const e="paths"in this.routerLinkActiveOptions?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return n=>t.isActive(n.urlTree,e)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return t.\u0275fac=function(e){return new(e||t)(ko(pw),ko(ja),ko(qa),ko(fl),ko(mw,8),ko(gw,8))},t.\u0275dir=Zt({type:t,selectors:[["","routerLinkActive",""]],contentQueries:function(t,e,n){if(1&t&&(uu(n,mw,5),uu(n,gw,5)),2&t){let t;au(t=cu())&&(e.links=t),au(t=cu())&&(e.linksWithHrefs=t)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[he]}),t})(),_w=(()=>{class t{constructor(t,e,n,i,r){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=r,this.activated=null,this._activatedRoute=null,this.activateEvents=new Yl,this.deactivateEvents=new Yl,this.name=i||nb,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),i=this.parentContexts.getOrCreateContext(this.name).children,r=new bw(t,i,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,r),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(ko(aw),ko(El),ko(Na),Gn("name"),ko(fl))},t.\u0275dir=Zt({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class bw{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Wb?this.route:t===aw?this.childContexts:this.parent.get(t,e)}}class xw{}class ww{preload(t,e){return bd(null)}}let Cw=(()=>{class t{constructor(t,e,n,i,r){this.router=t,this.injector=i,this.preloadingStrategy=r,this.loader=new sw(e,n,e=>t.triggerEvent(new Y_(e)),e=>t.triggerEvent(new K_(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(wd(t=>t instanceof j_),xd(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(wl);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const i of e)if(i.loadChildren&&!i.canLoad&&i._loadedConfig){const t=i._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else i.loadChildren&&!i.canLoad?n.push(this.preloadConfig(t,i)):i.children&&n.push(this.processRoutes(t,i.children));return L(n).pipe(H(),F(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?bd(e._loadedConfig):this.loader.load(t.injector,e)).pipe(U(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(pi(pw),pi(oc),pi(Pu),pi(ao),pi(xw))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),Aw=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof z_?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof j_&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof eb&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new eb(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(pi(pw),pi(Nh),pi(void 0))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const Ew=new Kn("ROUTER_CONFIGURATION"),kw=new Kn("ROUTER_FORROOT_GUARD"),Dw=[Mc,{provide:Cb,useClass:Ab},{provide:pw,useFactory:function(t,e,n,i,r,s,o,a={},l,u){const c=new pw(null,t,e,n,i,r,s,ub(o));return l&&(c.urlHandlingStrategy=l),u&&(c.routeReuseStrategy=u),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,c),a.enableTracing&&c.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),c},deps:[Cb,aw,Mc,ao,oc,Pu,rw,Ew,[class{},new _i],[class{},new _i]]},aw,{provide:Wb,useFactory:function(t){return t.routerState.root},deps:[pw]},{provide:oc,useClass:uc},Cw,ww,class{preload(t,e){return e().pipe(O_(()=>bd(null)))}},{provide:Ew,useValue:{enableTracing:!1}}];function Sw(){return new Ju("Router",pw)}let Fw=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[Dw,Pw(e),{provide:kw,useFactory:Tw,deps:[[pw,new _i,new bi]]},{provide:Ew,useValue:n||{}},{provide:kc,useFactory:Mw,deps:[yc,[new vi(Sc),new _i],Ew]},{provide:Aw,useFactory:Ow,deps:[pw,Nh,Ew]},{provide:xw,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:ww},{provide:Ju,multi:!0,useFactory:Sw},[Rw,{provide:mu,multi:!0,useFactory:Bw,deps:[Rw]},{provide:Nw,useFactory:Iw,deps:[Rw]},{provide:wu,multi:!0,useExisting:Nw}]]}}static forChild(e){return{ngModule:t,providers:[Pw(e)]}}}return t.\u0275fac=function(e){return new(e||t)(pi(kw,8),pi(pw,8))},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({}),t})();function Ow(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Aw(t,e,n)}function Mw(t,e,n={}){return n.useHash?new Oc(t,e):new Fc(t,e)}function Tw(t){return"guarded"}function Pw(t){return[{provide:Zn,multi:!0,useValue:t},{provide:rw,multi:!0,useValue:t}]}let Rw=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new k}appInitializer(){return this.injector.get(_c,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let t=null;const e=new Promise(e=>t=e),n=this.injector.get(pw),i=this.injector.get(Ew);return"disabled"===i.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===i.initialNavigation||"enabledBlocking"===i.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?bd(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Ew),n=this.injector.get(Cw),i=this.injector.get(Aw),r=this.injector.get(pw),s=this.injector.get(rc);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||r.initialNavigation(),n.setUpPreloading(),i.init(),r.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(e){return new(e||t)(pi(ao))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();function Bw(t){return t.appInitializer.bind(t)}function Iw(t){return t.bootstrapListener.bind(t)}const Nw=new Kn("Router Initializer");let Lw=0;const $w=new Kn("CdkAccordion");let zw=(()=>{class t{constructor(){this._stateChanges=new k,this._openCloseAllActions=new k,this.id="cdk-accordion-"+Lw++,this._multi=!1}get multi(){return this._multi}set multi(t){this._multi=yf(t)}openAll(){this._multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(t){this._stateChanges.next(t)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Zt({type:t,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:"multi"},exportAs:["cdkAccordion"],features:[Ra([{provide:$w,useExisting:t}]),he]}),t})(),jw=0,Uw=(()=>{class t{constructor(t,e,n){this.accordion=t,this._changeDetectorRef=e,this._expansionDispatcher=n,this._openCloseAllSubscription=p.EMPTY,this.closed=new Yl,this.opened=new Yl,this.destroyed=new Yl,this.expandedChange=new Yl,this.id="cdk-accordion-child-"+jw++,this._expanded=!1,this._disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=n.listen((t,e)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===e&&this.id!==t&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}get expanded(){return this._expanded}set expanded(t){t=yf(t),this._expanded!==t&&(this._expanded=t,this.expandedChange.emit(t),t?(this.opened.emit(),this._expansionDispatcher.notify(this.id,this.accordion?this.accordion.id:this.id)):this.closed.emit(),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){this._disabled=yf(t)}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(t=>{this.disabled||(this.expanded=t)})}}return t.\u0275fac=function(e){return new(e||t)(ko($w,12),ko(fl),ko(dp))},t.\u0275dir=Zt({type:t,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:"expanded",disabled:"disabled"},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],features:[Ra([{provide:$w,useValue:void 0}])]}),t})(),Vw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({}),t})();class qw{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class Hw extends qw{constructor(t,e,n,i){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=i}}class Ww extends qw{constructor(t,e,n){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class Gw extends qw{constructor(t){super(),this.element=t instanceof ja?t.nativeElement:t}}class Xw{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof Hw?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof Ww?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof Gw?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Yw extends Xw{constructor(t,e,n,i,r){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=i,this.attachDomPortal=t=>{const e=t.element,n=this._document.createComment("dom-portal");e.parentNode.insertBefore(n,e),this.outletElement.appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(e,n)})},this._document=r}attachComponentPortal(t){const e=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let n;return t.viewContainerRef?(n=t.viewContainerRef.createComponent(e,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>n.destroy())):(n=e.create(t.injector||this._defaultInjector),this._appRef.attachView(n.hostView),this.setDisposeFn(()=>{this._appRef.detachView(n.hostView),n.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(n)),this._attachedPortal=t,n}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context);return n.rootNodes.forEach(t=>this.outletElement.appendChild(t)),n.detectChanges(),this.setDisposeFn(()=>{let t=e.indexOf(n);-1!==t&&e.remove(t)}),this._attachedPortal=t,n}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let Kw=(()=>{class t extends Xw{constructor(t,e,n){super(),this._componentFactoryResolver=t,this._viewContainerRef=e,this._isInitialized=!1,this.attached=new Yl,this.attachDomPortal=t=>{const e=t.element,n=this._document.createComment("dom-portal");t.setAttachedHost(this),e.parentNode.insertBefore(n,e),this._getRootNode().appendChild(e),this._attachedPortal=t,super.setDisposeFn(()=>{n.parentNode&&n.parentNode.replaceChild(e,n)})},this._document=n}get portal(){return this._attachedPortal}set portal(t){(!this.hasAttached()||t||this._isInitialized)&&(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(t){t.setAttachedHost(this);const e=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),i=e.createComponent(n,e.length,t.injector||e.injector);return e!==this._viewContainerRef&&this._getRootNode().appendChild(i.hostView.rootNodes[0]),super.setDisposeFn(()=>i.destroy()),this._attachedPortal=t,this._attachedRef=i,this.attached.emit(i),i}attachTemplatePortal(t){t.setAttachedHost(this);const e=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=e,this.attached.emit(e),e}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return t.\u0275fac=function(e){return new(e||t)(ko(Na),ko(El),ko(gc))},t.\u0275dir=Zt({type:t,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[uo]}),t})(),Zw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({}),t})();const Qw=["body"];function Jw(t,e){}const tC=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],eC=["mat-expansion-panel-header","*","mat-action-row"];function nC(t,e){1&t&&Mo(0,"span",2),2&t&&Do("@indicatorRotate",Vo()._getExpandedState())}const iC=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],rC=["mat-panel-title","mat-panel-description","*"],sC=new Kn("MAT_ACCORDION"),oC="225ms cubic-bezier(0.4,0.0,0.2,1)",aC={indicatorRotate:hm("indicatorRotate",[mm("collapsed, void",pm({transform:"rotate(0deg)"})),mm("expanded",pm({transform:"rotate(180deg)"})),gm("expanded <=> collapsed, void => collapsed",dm(oC))]),bodyExpansion:hm("bodyExpansion",[mm("collapsed, void",pm({height:"0px",visibility:"hidden"})),mm("expanded",pm({height:"*",visibility:"visible"})),gm("expanded <=> collapsed, void => collapsed",dm(oC))])};let lC=(()=>{class t{constructor(t){this._template=t}}return t.\u0275fac=function(e){return new(e||t)(ko(vl))},t.\u0275dir=Zt({type:t,selectors:[["ng-template","matExpansionPanelContent",""]]}),t})(),uC=0;const cC=new Kn("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS");let hC=(()=>{class t extends Uw{constructor(t,e,n,i,r,s,o){super(t,e,n),this._viewContainerRef=i,this._animationMode=s,this._hideToggle=!1,this.afterExpand=new Yl,this.afterCollapse=new Yl,this._inputChanges=new k,this._headerId="mat-expansion-panel-header-"+uC++,this._bodyAnimationDone=new k,this.accordion=t,this._document=r,this._bodyAnimationDone.pipe(Rf((t,e)=>t.fromState===e.fromState&&t.toState===e.toState)).subscribe(t=>{"void"!==t.fromState&&("expanded"===t.toState?this.afterExpand.emit():"collapsed"===t.toState&&this.afterCollapse.emit())}),o&&(this.hideToggle=o.hideToggle)}get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(t){this._hideToggle=yf(t)}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(t){this._togglePosition=t}_hasSpacing(){return!!this.accordion&&this.expanded&&"default"===this.accordion.displayMode}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this.opened.pipe(Gf(null),wd(()=>this.expanded&&!this._portal),Fp(1)).subscribe(()=>{this._portal=new Ww(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(t){this._inputChanges.next(t)}ngOnDestroy(){super.ngOnDestroy(),this._bodyAnimationDone.complete(),this._inputChanges.complete()}_containsFocus(){if(this._body){const t=this._document.activeElement,e=this._body.nativeElement;return t===e||e.contains(t)}return!1}}return t.\u0275fac=function(e){return new(e||t)(ko(sC,12),ko(fl),ko(dp),ko(El),ko(gc),ko(Gy,8),ko(cC,8))},t.\u0275cmp=Ht({type:t,selectors:[["mat-expansion-panel"]],contentQueries:function(t,e,n){if(1&t&&uu(n,lC,5),2&t){let t;au(t=cu())&&(e._lazyContent=t.first)}},viewQuery:function(t,e){if(1&t&&lu(Qw,5),2&t){let t;au(t=cu())&&(e._body=t.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(t,e){2&t&&ta("mat-expanded",e.expanded)("_mat-animation-noopable","NoopAnimations"===e._animationMode)("mat-expansion-panel-spacing",e._hasSpacing())},inputs:{disabled:"disabled",expanded:"expanded",hideToggle:"hideToggle",togglePosition:"togglePosition"},outputs:{opened:"opened",closed:"closed",expandedChange:"expandedChange",afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],features:[Ra([{provide:sC,useValue:void 0}]),uo,he],ngContentSelectors:eC,decls:7,vars:4,consts:[["role","region",1,"mat-expansion-panel-content",3,"id"],["body",""],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(t,e){1&t&&(Ho(tC),Wo(0),Fo(1,"div",0,1),Lo("@bodyExpansion.done",function(t){return e._bodyAnimationDone.next(t)}),Fo(3,"div",2),Wo(4,1),Ao(5,Jw,0,0,"ng-template",3),Oo(),Wo(6,2),Oo()),2&t&&(Kr(1),Do("@bodyExpansion",e._getExpandedState())("id",e.id),wo("aria-labelledby",e._headerId),Kr(4),Do("cdkPortalOutlet",e._portal))},directives:[Kw],styles:[".mat-expansion-panel{box-sizing:content-box;display:block;margin:0;border-radius:4px;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:4px;border-top-left-radius:4px}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:4px;border-bottom-left-radius:4px}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px}.mat-action-row button.mat-button-base,.mat-action-row button.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row button.mat-button-base,[dir=rtl] .mat-action-row button.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[aC.bodyExpansion]},changeDetection:0}),t})();class dC{}const fC=lv(dC);let pC=(()=>{class t extends fC{constructor(t,e,n,i,r,s,o){super(),this.panel=t,this._element=e,this._focusMonitor=n,this._changeDetectorRef=i,this._animationMode=s,this._parentChangeSubscription=p.EMPTY;const a=t.accordion?t.accordion._stateChanges.pipe(wd(t=>!(!t.hideToggle&&!t.togglePosition))):Qf;this.tabIndex=parseInt(o||"")||0,this._parentChangeSubscription=G(t.opened,t.closed,a,t._inputChanges.pipe(wd(t=>!!(t.hideToggle||t.disabled||t.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),t.closed.pipe(wd(()=>t._containsFocus())).subscribe(()=>n.focusVia(e,"program")),r&&(this.expandedHeight=r.expandedHeight,this.collapsedHeight=r.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){const t=this._isExpanded();return t&&this.expandedHeight?this.expandedHeight:!t&&this.collapsedHeight?this.collapsedHeight:null}_keydown(t){switch(t.keyCode){case 32:case 13:_p(t)||(t.preventDefault(),this._toggle());break;default:return void(this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(t))}}focus(t,e){t?this._focusMonitor.focusVia(this._element,t,e):this._element.nativeElement.focus(e)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(t=>{t&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}}return t.\u0275fac=function(e){return new(e||t)(ko(hC,1),ko(ja),ko(im),ko(fl),ko(cC,8),ko(Gy,8),Gn("tabindex"))},t.\u0275cmp=Ht({type:t,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(t,e){1&t&&Lo("click",function(){return e._toggle()})("keydown",function(t){return e._keydown(t)}),2&t&&(wo("id",e.panel._headerId)("tabindex",e.tabIndex)("aria-controls",e._getPanelId())("aria-expanded",e._isExpanded())("aria-disabled",e.panel.disabled),Jo("height",e._getHeaderHeight()),ta("mat-expanded",e._isExpanded())("mat-expansion-toggle-indicator-after","after"===e._getTogglePosition())("mat-expansion-toggle-indicator-before","before"===e._getTogglePosition())("_mat-animation-noopable","NoopAnimations"===e._animationMode))},inputs:{tabIndex:"tabIndex",expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight"},features:[uo],ngContentSelectors:rC,decls:5,vars:1,consts:[[1,"mat-content"],["class","mat-expansion-indicator",4,"ngIf"],[1,"mat-expansion-indicator"]],template:function(t,e){1&t&&(Ho(iC),Fo(0,"span",0),Wo(1),Wo(2,1),Wo(3,2),Oo(),Ao(4,nC,1,1,"span",1)),2&t&&(Kr(4),Do("ngIf",e._showToggle()))},directives:[_h],styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;margin-right:16px}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header-description{flex-grow:2}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle}.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-keyboard-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel .mat-expansion-panel-header.cdk-program-focused:not([aria-disabled=true])::before,.cdk-high-contrast-active .mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:hover:not([aria-disabled=true])::before{top:0;left:0;right:0;bottom:0;position:absolute;box-sizing:border-box;pointer-events:none;border:3px solid;border-radius:4px;content:""}\n'],encapsulation:2,data:{animation:[aC.indicatorRotate]},changeDetection:0}),t})(),mC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Zt({type:t,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"]}),t})(),gC=(()=>{class t extends zw{constructor(){super(...arguments),this._ownHeaders=new Zl,this._hideToggle=!1,this.displayMode="default",this.togglePosition="after"}get hideToggle(){return this._hideToggle}set hideToggle(t){this._hideToggle=yf(t)}ngAfterContentInit(){this._headers.changes.pipe(Gf(this._headers)).subscribe(t=>{this._ownHeaders.reset(t.filter(t=>t.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new zp(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(t){this._keyManager.onKeydown(t)}_handleHeaderFocus(t){this._keyManager.updateActiveItem(t)}ngOnDestroy(){super.ngOnDestroy(),this._ownHeaders.destroy()}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Hn(t)))(n||t)}}(),t.\u0275dir=Zt({type:t,selectors:[["mat-accordion"]],contentQueries:function(t,e,n){if(1&t&&uu(n,pC,5),2&t){let t;au(t=cu())&&(e._headers=t)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(t,e){2&t&&ta("mat-accordion-multi",e.multi)},inputs:{multi:"multi",displayMode:"displayMode",togglePosition:"togglePosition",hideToggle:"hideToggle"},exportAs:["matAccordion"],features:[Ra([{provide:sC,useExisting:t}]),uo]}),t})(),yC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Rh,rv,Vw,Zw]]}),t})();const vC=[{path:"",component:(()=>{class t{constructor(){this.clsName="agc-about"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ht({type:t,selectors:[["agc-about"]],hostVars:2,hostBindings:function(t,e){2&t&&ea(e.clsName)},decls:25,vars:0,consts:[[1,"header"],[1,"content"],["src","assets/pages/about/index.md",1,"index"],["multi","",1,"panels"],["src","assets/pages/about/helping.md"],["src","assets/pages/about/data.md"],["src","assets/pages/about/connect.md"],["src","assets/pages/about/credits.md"]],template:function(t,e){1&t&&(Fo(0,"div",0),fa(1,"ADDICTIONS DATA ANALYSES AND VISUALIZATIONS"),Oo(),Fo(2,"div",1),Mo(3,"markdown",2),Fo(4,"mat-accordion",3),Fo(5,"mat-expansion-panel"),Fo(6,"mat-expansion-panel-header"),Fo(7,"mat-panel-title"),fa(8,"HOW WE'RE HELPING"),Oo(),Oo(),Mo(9,"markdown",4),Oo(),Fo(10,"mat-expansion-panel"),Fo(11,"mat-expansion-panel-header"),Fo(12,"mat-panel-title"),fa(13,"THE DATA"),Oo(),Oo(),Mo(14,"markdown",5),Oo(),Fo(15,"mat-expansion-panel"),Fo(16,"mat-expansion-panel-header"),Fo(17,"mat-panel-title"),fa(18,"CONNECT WITH US"),Oo(),Oo(),Mo(19,"markdown",6),Oo(),Fo(20,"mat-expansion-panel"),Fo(21,"mat-expansion-panel-header"),Fo(22,"mat-panel-title"),fa(23,"CREDITS"),Oo(),Oo(),Mo(24,"markdown",7),Oo(),Oo(),Oo())},directives:[y_,gC,hC,pC,mC],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   markdown[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;height:4rem;margin-bottom:4.5rem;padding:0 1rem;align-items:center}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{padding-left:1rem;padding-right:1rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .index[_ngcontent-%COMP%]{padding-bottom:2rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{font-weight:700}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]{padding:1rem .5rem 0}"],changeDetection:0}),t})()}];let _C=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Fw.forChild(vC)],Fw]}),t})(),bC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Rh,yC,v_,_C]]}),t})();const xC=[{path:"",component:(()=>{class t{constructor(){this.clsName="change-log"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ht({type:t,selectors:[["agc-change-log"]],hostVars:2,hostBindings:function(t,e){2&t&&ea(e.clsName)},decls:4,vars:0,consts:[[1,"header"],[1,"content"],["src","assets/generated/CHANGELOG.md"]],template:function(t,e){1&t&&(Fo(0,"div",0),fa(1,"Marion County Opioid Addiction Report"),Oo(),Fo(2,"div",1),Mo(3,"markdown",2),Oo())},directives:[y_],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;height:4rem;margin-bottom:4.5rem;padding:0 1rem;align-items:center}"],changeDetection:0}),t})()}];let wC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Fw.forChild(xC)],Fw]}),t})(),CC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Rh,wC,v_.forChild()]]}),t})();const AC=[{path:"",component:(()=>{class t{constructor(){this.clsName="data-er-diagram"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ht({type:t,selectors:[["agc-data-er-diagram"]],hostVars:2,hostBindings:function(t,e){2&t&&ea(e.clsName)},decls:7,vars:0,consts:[[1,"header"],[1,"title"],[1,"description"],["title","Data ER Diagram","src","assets/schema/relationships.html",1,"schema-frame"]],template:function(t,e){1&t&&(Fo(0,"div",0),fa(1,"Marion County Opioid Addiction Report"),Oo(),Fo(2,"div",1),fa(3,"Data ER Diagram"),Oo(),Fo(4,"div",2),fa(5,"Entity-relationship diagram of all data tables and columns in the database"),Oo(),Mo(6,"iframe",3))},styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;height:4rem;margin-bottom:4.5rem;padding:0 1rem;align-items:center}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;font-size:1.25rem}[_nghost-%COMP%]   .description[_ngcontent-%COMP%]{font-size:1.25rem}[_nghost-%COMP%]   .schema-frame[_ngcontent-%COMP%]{margin-top:2rem;width:100%;height:calc(100vh)}"],changeDetection:0}),t})()}];let EC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Fw.forChild(AC)],Fw]}),t})(),kC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Rh,EC]]}),t})();const DC=[{path:"",component:(()=>{class t{constructor(){this.clsName="data-schema-browser"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ht({type:t,selectors:[["agc-data-schema-browser"]],hostVars:2,hostBindings:function(t,e){2&t&&ea(e.clsName)},decls:7,vars:0,consts:[[1,"header"],[1,"title"],[1,"description"],["title","A2AGC Database Schema","src","assets/schema/index.html",1,"schema-frame"]],template:function(t,e){1&t&&(Fo(0,"div",0),fa(1,"Marion County Opioid Addiction Report"),Oo(),Fo(2,"div",1),fa(3,"Data Schema Browser"),Oo(),Fo(4,"div",2),fa(5,"Browse the A2AGC Database Schema"),Oo(),Mo(6,"iframe",3))},styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;height:4rem;margin-bottom:4.5rem;padding:0 1rem;align-items:center}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;font-size:1.25rem}[_nghost-%COMP%]   .description[_ngcontent-%COMP%]{font-size:1.25rem}[_nghost-%COMP%]   .schema-frame[_ngcontent-%COMP%]{margin-top:2rem;width:100%;height:calc(100vh)}"],changeDetection:0}),t})()}];let SC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Fw.forChild(DC)],Fw]}),t})(),FC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Rh,SC]]}),t})();function OC(...t){const e=t.length;if(0===e)throw new Error("list of properties cannot be empty.");return n=>F(function(t,e){return n=>{let i=n;for(let r=0;r<e;r++){const e=null!=i?i[t[r]]:void 0;if(void 0===e)return;i=e}return i}}(t,e))(n)}function MC(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}function TC(t,e){return function(n,i){e(n,i,t)}}function PC(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function RC(t,e,n,i){return new(n||(n=Promise))(function(r,s){function o(t){try{l(i.next(t))}catch(e){s(e)}}function a(t){try{l(i.throw(t))}catch(e){s(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,a)}l((i=i.apply(t,e||[])).next())})}function BC(t){return!0===t}function IC(t){return null==t}function NC(t){return!IC(t)}function LC(t){return Boolean(t)}function $C(t){return IC(t)?t:JSON.parse(JSON.stringify(t))}const zC=t=>{const e=t instanceof Date;if("object"!=typeof t||null===t||e)return t;Object.freeze(t);const n="function"==typeof t,i=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(t).forEach(e=>{!i.call(t,e)||n&&("caller"===e||"callee"===e||"arguments"===e)||null===t[e]||"object"!=typeof t[e]&&"function"!=typeof t[e]||Object.isFrozen(t[e])||zC(t[e])}),t};function jC(t){return NC(t)&&"object"==typeof t&&"[object Object]"===Object.prototype.toString.call(t)}function UC(t,e){return t===e}function VC(t,e,n){if(null===e||null===n||e.length!==n.length)return!1;const i=e.length;for(let r=0;r<i;r++)if(!t(e[r],n[r]))return!1;return!0}function qC(t,e=UC){let n=null,i=null;function r(){return VC(e,n,arguments)||(i=t.apply(null,arguments)),n=arguments,i}return r.reset=function(){n=null,i=null},r}const HC=qC(function(){const t=ec();if(!t)return!1;const e=t.injector.get(Ru,null);return!!e&&e.some(t=>(t&&t.providers||[]).some(t=>t&&t.provide&&"MockNgModuleResolver"===t.provide.name||!1))});let WC=(()=>{class t{constructor(){this.bootstrap$=new sp(1)}get appBootstrapped$(){return this.bootstrap$.asObservable()}bootstrap(){this.bootstrap$.next(!0),this.bootstrap$.complete()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const GC=new Kn("INITIAL_STATE_TOKEN");let XC=(()=>{class t{static set(t){this.value=t}static pop(){const t=this.value;return this.value={},t}}return t.value={},t})();const YC=new Kn("Internals.StateContextFactory"),KC=new Kn("Internals.StateFactory");function ZC(...t){if(1===t.length){const e=t[0];if(h(e))return QC(e,null);if(d(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return QC(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return QC(t=1===t.length&&h(t[0])?t[0]:t,null).pipe(F(t=>e(...t)))}return QC(t,null)}function QC(t,e){return new x(n=>{const i=t.length;if(0===i)return void n.complete();const r=new Array(i);let s=0,o=0;for(let a=0;a<i;a++){const l=L(t[a]);let u=!1;n.add(l.subscribe({next:t=>{u||(u=!0,o++),r[a]=t},error:t=>n.error(t),complete:()=>{s++,s!==i&&u||(o===i&&n.next(e?e.reduce((t,e,n)=>(t[e]=r[n],t),{}):r),n.complete())}}))}})}function JC(t,e){return e?n=>n.pipe(JC((n,i)=>L(t(n,i)).pipe(F((t,r)=>e(n,t,i,r))))):e=>e.lift(new tA(t))}class tA{constructor(t){this.project=t}call(t,e){return e.subscribe(new eA(t,this.project))}}class eA extends z{constructor(t,e){super(t),this.project=e,this.hasSubscription=!1,this.hasCompleted=!1,this.index=0}_next(t){this.hasSubscription||this.tryNext(t)}tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this.hasSubscription=!0,this._innerSub(e)}_innerSub(t){const e=new $(this),n=this.destination;n.add(e);const i=j(t,e);i!==e&&n.add(i)}_complete(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()}}const nA={STATE_NAME:t=>`${t} is not a valid state name. It needs to be a valid object property name.`,STATE_NAME_PROPERTY:()=>"States must register a 'name' property",STATE_UNIQUE:(t,e,n)=>`State name '${t}' from ${e} already exists in ${n}`,STATE_DECORATOR:()=>"States must be decorated with @State() decorator",INCORRECT_PRODUCTION:()=>"Angular is running in production mode but NGXS is still running in the development mode!\nPlease set developmentMode to false on the NgxsModule options when in production mode.\nNgxsModule.forRoot(states, { developmentMode: !environment.production })",INCORRECT_DEVELOPMENT:()=>"RECOMMENDATION: Set developmentMode to true on the NgxsModule when Angular is running in development mode.\nNgxsModule.forRoot(states, { developmentMode: !environment.production })",SELECT_FACTORY_NOT_CONNECTED:()=>"You have forgotten to import the NGXS module!",ACTION_DECORATOR:()=>"@Action() decorator cannot be used with static methods",SELECTOR_DECORATOR:()=>"Selectors only work on methods",ZONE_WARNING:()=>"Your application was bootstrapped with nooped zone and your execution strategy requires an actual NgZone!\nPlease set the value of the executionStrategy property to NoopNgxsExecutionStrategy.\nNgxsModule.forRoot(states, { executionStrategy: NoopNgxsExecutionStrategy })",PATCHING_ARRAY:()=>"Patching arrays is not supported.",PATCHING_PRIMITIVE:()=>"Patching primitives is not supported.",UNDECORATED_STATE_IN_IVY:t=>`'${t}' class should be decorated with @Injectable() right after the @State() decorator`};let iA=(()=>{class t{constructor(t,e){this._ngZone=t,this._platformId=e,this.verifyZoneIsNotNooped(this._ngZone)}enter(t){return Ih(this._platformId)?this.runInsideAngular(t):this.runOutsideAngular(t)}leave(t){return this.runInsideAngular(t)}runInsideAngular(t){return Nu.isInAngularZone()?t():this._ngZone.run(t)}runOutsideAngular(t){return Nu.isInAngularZone()?this._ngZone.runOutsideAngular(t):t()}verifyZoneIsNotNooped(t){t instanceof Nu||console.warn(nA.ZONE_WARNING())}}return t.\u0275fac=function(e){return new(e||t)(pi(Nu),pi(xu))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const rA=new Kn("ROOT_STATE_TOKEN"),sA=new Kn("FEATURE_STATE_TOKEN"),oA=new Kn("NGXS_PLUGINS"),aA=new Kn("NG_TEST_MODE"),lA=new Kn("NG_DEV_MODE"),uA="NGXS_META",cA="NGXS_SELECTOR_META";let hA=(()=>{class t{constructor(){this.defaultsState={},this.selectorOptions={injectContainerState:!0,suppressErrors:!0},this.compatibility={strictContentSecurityPolicy:!1},this.executionStrategy=iA}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();class dA{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}}const fA=new Kn("NGXS_EXECUTION_STRATEGY");function pA(t){return t.constructor&&t.constructor.type?t.constructor.type:t.type}const mA=(t,e,n)=>{t=Object.assign({},t);const i=e.split("."),r=i.length-1;return i.reduce((t,e,i)=>(t[e]=i===r?n:Array.isArray(t[e])?t[e].slice():Object.assign({},t[e]),t&&t[e]),t),t},gA=(t,e)=>e.split(".").reduce((t,e)=>t&&t[e],t),yA=t=>t&&"object"==typeof t&&!Array.isArray(t),vA=(t,...e)=>{if(!e.length)return t;const n=e.shift();if(yA(t)&&yA(n))for(const i in n)yA(n[i])?(t[i]||Object.assign(t,{[i]:{}}),vA(t[i],n[i])):Object.assign(t,{[i]:n[i]});return vA(t,...e)};function _A(t){if(!t.hasOwnProperty(uA)){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(t,uA,{value:e})}return bA(t)}function bA(t){return t.NGXS_META}function xA(t){return t.hasOwnProperty(cA)||Object.defineProperty(t,cA,{value:{makeRootSelector:null,originalFn:null,containerClass:null,selectorName:null,getSelectorOptions:()=>({})}}),wA(t)}function wA(t){return t.NGXS_SELECTOR_META}function CA(t,e){const n=gA(e.currentAppState,t.path),i=gA(e.newAppState,t.path);return new dA(n,i,!t.isInitialised)}function AA(...t){return EA(t,["DISPATCHED"])}function EA(t,e,n=DA){const i=t.reduce((t,e)=>(t[pA(e)]=!0,t),{}),r=e&&function(t){return t.reduce((t,e)=>(t[e]=!0,t),{})}(e);return function(t){return t.pipe(function(t,e){return wd(n=>{const i=pA(n.action);return t[i]&&(!e||e[n.status])})}(i,r),n())}}function kA(){return F(({action:t,status:e,error:n})=>({action:t,result:{successful:"SUCCESSFUL"===e,canceled:"CANCELED"===e,error:n}}))}function DA(){return F(t=>t.action)}function SA(t){return e=>new x(n=>e.subscribe({next(e){t.leave(()=>n.next(e))},error(e){t.leave(()=>n.error(e))},complete(){t.leave(()=>n.complete())}}))}let FA=(()=>{class t{constructor(t){this._executionStrategy=t}enter(t){return this._executionStrategy.enter(t)}leave(t){return this._executionStrategy.leave(t)}}return t.\u0275fac=function(e){return new(e||t)(pi(fA))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();class OA extends k{constructor(){super(...arguments),this._itemQueue=[],this._busyPushingNext=!1}next(t){if(this._busyPushingNext)this._itemQueue.unshift(t);else{for(this._busyPushingNext=!0,super.next(t);this._itemQueue.length>0;){const t=this._itemQueue.pop();super.next(t)}this._busyPushingNext=!1}}}let MA=(()=>{class t extends OA{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Hn(t)))(n||t)}}(),t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),TA=(()=>{class t extends x{constructor(t,e){super(n=>{const i=t.pipe(SA(e)).subscribe({next:t=>n.next(t),error:t=>n.error(t),complete:()=>n.complete()});n.add(i)})}}return t.\u0275fac=function(e){return new(e||t)(pi(MA),pi(FA))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const PA=t=>(...e)=>t.shift()(...e,(...e)=>PA(t)(...e));let RA=(()=>{class t extends vp{constructor(){super({})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),BA=(()=>{class t{constructor(t,e){this._parentManager=t,this._pluginHandlers=e,this.plugins=[],this.registerHandlers()}get rootPlugins(){return this._parentManager&&this._parentManager.plugins||this.plugins}registerHandlers(){const t=this.getPluginHandlers();this.rootPlugins.push(...t)}getPluginHandlers(){return(this._pluginHandlers||[]).map(t=>t.handle?t.handle.bind(t):t)}}return t.\u0275fac=function(e){return new(e||t)(pi(t,12),pi(oA,8))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),IA=(()=>{class t extends k{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Hn(t)))(n||t)}}(),t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),NA=(()=>{class t{constructor(t,e,n,i,r,s){this._injector=t,this._actions=e,this._actionResults=n,this._pluginManager=i,this._stateStream=r,this._ngxsExecutionStrategy=s}dispatch(t){const e=this._ngxsExecutionStrategy.enter(()=>this.dispatchByEvents(t));return e.subscribe({error:t=>this._ngxsExecutionStrategy.leave(()=>{try{this._errorHandler=this._errorHandler||this._injector.get(or),this._errorHandler.handleError(t)}catch(mR){}})}),e.pipe(SA(this._ngxsExecutionStrategy))}dispatchByEvents(t){return Array.isArray(t)?0===t.length?bd(this._stateStream.getValue()):ZC(t.map(t=>this.dispatchSingle(t))):this.dispatchSingle(t)}dispatchSingle(t){if(!pA(t))return tp(new Error(`This action doesn't have a type property: ${t.constructor.name}`));const e=this._stateStream.getValue();return PA([...this._pluginManager.plugins,(t,n)=>{t!==e&&this._stateStream.next(t);const i=this.getActionResultStream(n);return i.subscribe(t=>this._actions.next(t)),this._actions.next({action:n,status:"DISPATCHED"}),this.createDispatchObservable(i)}])(e,t).pipe(ap())}getActionResultStream(t){return this._actionResults.pipe(wd(e=>e.action===t&&"DISPATCHED"!==e.status),Fp(1),ap())}createDispatchObservable(t){return t.pipe(JC(t=>{switch(t.status){case"SUCCESSFUL":return bd(this._stateStream.getValue());case"ERRORED":return tp(t.error);default:return Qf}})).pipe(ap())}}return t.\u0275fac=function(e){return new(e||t)(pi(ao),pi(MA),pi(IA),pi(BA),pi(RA),pi(FA))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const LA=t=>{Object.freeze(t);const e="function"==typeof t,n=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(t).forEach(function(i){!n.call(t,i)||e&&("caller"===i||"callee"===i||"arguments"===i)||null===t[i]||"object"!=typeof t[i]&&"function"!=typeof t[i]||Object.isFrozen(t[i])||LA(t[i])}),t};let $A=(()=>{class t{constructor(t,e){this.isDevMode=t,this.isTestMode=e}}return t.\u0275fac=function(e){return new(e||t)(pi(lA),pi(aA))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),zA=(()=>{class t{constructor(t,e){this._host=t,this._config=e}get isIncorrectProduction(){return!this._host.isDevMode()&&this._config.developmentMode}get isIncorrectDevelopment(){return this._host.isDevMode()&&!this._config.developmentMode}verifyDevMode(){this._host.isTestMode()||(this.isIncorrectProduction?console.warn(nA.INCORRECT_PRODUCTION()):this.isIncorrectDevelopment&&console.warn(nA.INCORRECT_DEVELOPMENT()))}}return t.\u0275fac=function(e){return new(e||t)(pi($A),pi(hA))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),jA=(()=>{class t{constructor(t,e,n,i){this._stateStream=t,this._dispatcher=e,this._config=n,i.verifyDevMode()}getRootStateOperations(){const t={getState:()=>this._stateStream.getValue(),setState:t=>this._stateStream.next(t),dispatch:t=>this._dispatcher.dispatch(t)};return this._config.developmentMode?this.ensureStateAndActionsAreImmutable(t):t}ensureStateAndActionsAreImmutable(t){return{getState:()=>t.getState(),setState:e=>{const n=LA(e);return t.setState(n)},dispatch:e=>t.dispatch(e)}}setStateToTheCurrentWithNew(t){const e=this.getRootStateOperations(),n=e.getState();e.setState(Object.assign({},n,t.defaults))}}return t.\u0275fac=function(e){return new(e||t)(pi(RA),pi(NA),pi(hA),pi(zA))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),UA=(()=>{class t{constructor(t){this._internalStateOperations=t}createStateContext(t){const e=this._internalStateOperations.getRootStateOperations();function n(e){return gA(e,t.path)}function i(n,i){const r=mA(n,t.path,i),s=t.instance;if(s.ngxsOnChanges){const e=CA(t,{currentAppState:n,newAppState:r});s.ngxsOnChanges(e)}return e.setState(r),r}function r(t,e){return i(t,e(n(t)))}return{getState:()=>n(e.getState()),patchState:t=>r(e.getState(),function(t){return e=>{if(Array.isArray(t))throw new Error(nA.PATCHING_ARRAY());if("object"!=typeof t)throw new Error(nA.PATCHING_PRIMITIVE());const n=Object.assign({},e);for(const i in t)n[i]=t[i];return n}}(t)),setState(t){const n=e.getState();return"function"==typeof t?r(n,t):i(n,t)},dispatch:t=>e.dispatch(t)}}}return t.\u0275fac=function(e){return new(e||t)(pi(jA))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();class VA{static stateNameErrorMessage(t){return nA.STATE_NAME(t)}static checkCorrectStateName(t){if(!t)throw new Error(nA.STATE_NAME_PROPERTY());if(!this.stateNameRegex.test(t))throw new Error(this.stateNameErrorMessage(t))}static checkStateNameIsUnique(t,e){const n=this.getValidStateMeta(t).name,i=e[n];if(i&&i!==t)throw new Error(nA.STATE_UNIQUE(n,t.name,i.name));return n}static getValidStateMeta(t){const e=bA(t);if(!e)throw new Error(nA.STATE_DECORATOR());return e}}VA.stateNameRegex=new RegExp("^[a-zA-Z0-9_]+$");let qA=(()=>{class t{constructor(t,e,n,i,r,s,o){this._injector=t,this._config=e,this._parentFactory=n,this._actions=i,this._actionResults=r,this._stateContextFactory=s,this._initialState=o,this._actionsSubscription=null,this._states=[],this._statesByName={},this._statePaths={},this.getRuntimeSelectorContext=qC(()=>{const t=this;function e(e){const n=t.statePaths[e];return n?function(t,e){return e&&e.compatibility&&e.compatibility.strictContentSecurityPolicy?function(t){const e=t.slice();return t=>e.reduce((t,e)=>t&&t[e],t)}(t):function(t){const e=t;let n="store."+e[0],i=0;const r=e.length;let s=n;for(;++i<r;)s=s+" && "+(n=n+"."+e[i]);return new Function("store","return "+s+";")}(t)}(n.split("."),t._config):null}return this._parentFactory?this._parentFactory.getRuntimeSelectorContext():{getStateGetter(t){let n=e(t);return n||((...i)=>(n||(n=e(t)),n?n(...i):void 0))},getSelectorOptions:e=>Object.assign({},t._config.selectorOptions,e||{})}})}get states(){return this._parentFactory?this._parentFactory.states:this._states}get statesByName(){return this._parentFactory?this._parentFactory.statesByName:this._statesByName}get statePaths(){return this._parentFactory?this._parentFactory.statePaths:this._statePaths}static cloneDefaults(t){let e={};var n;return e=Array.isArray(t)?t.slice():"object"==typeof(n=t)&&null!==n||"function"==typeof n?Object.assign({},t):void 0===t?{}:t,e}static checkStatesAreValid(t){t.forEach(VA.getValidStateMeta)}ngOnDestroy(){this._actionsSubscription.unsubscribe()}add(e){t.checkStatesAreValid(e);const{newStates:n}=this.addToStatesMap(e);if(!n.length)return[];const i=function(t){const e=e=>{const n=t.find(t=>t===e);if(!n)throw new Error(`Child state not found: ${e}. \r\nYou may have forgotten to add states to module`);return n.NGXS_META.name};return t.reduce((t,n)=>{const{name:i,children:r}=n.NGXS_META;return t[i]=(r||[]).map(e),t},{})}(n),r=function(t){const e=[],n={},i=(r,s=[])=>{Array.isArray(s)||(s=[]),s.push(r),n[r]=!0,t[r].forEach(t=>{if(s.indexOf(t)>=0)throw new Error(`Circular dependency '${t}' is required by '${r}': ${s.join(" -> ")}`);n[t]||i(t,s.slice(0))}),e.indexOf(r)<0&&e.push(r)};return Object.keys(t).forEach(t=>i(t)),e.reverse()}(i),s=function(t,e={}){const n=(t,e)=>{for(const i in t)if(t.hasOwnProperty(i)&&t[i].indexOf(e)>=0){const e=n(t,i);return null!==e?`${e}.${i}`:i}return null};for(const i in t)if(t.hasOwnProperty(i)){const r=n(t,i);e[i]=r?`${r}.${i}`:i}return e}(i),o=n.reduce((t,e)=>(t[e.NGXS_META.name]=e,t),{}),a=[];for(const l of r){const e=o[l],n=s[l],i=e.NGXS_META;this.addRuntimeInfoToMeta(i,n);const r={name:l,path:n,isInitialised:!1,actions:i.actions,instance:this._injector.get(e),defaults:t.cloneDefaults(i.defaults)};this.hasBeenMountedAndBootstrapped(l,n)||a.push(r),this.states.push(r)}return a}addAndReturnDefaults(t){const e=this.add(t||[]);return{defaults:e.reduce((t,e)=>mA(t,e.path,e.defaults),{}),states:e}}connectActionHandlers(){null===this._actionsSubscription&&(this._actionsSubscription=this._actions.pipe(wd(t=>"DISPATCHED"===t.status),U(({action:t})=>this.invokeActions(this._actions,t).pipe(F(()=>({action:t,status:"SUCCESSFUL"})),r_({action:t,status:"CANCELED"}),O_(e=>bd({action:t,status:"ERRORED",error:e}))))).subscribe(t=>this._actionResults.next(t)))}invokeActions(t,e){const n=pA(e),i=[];for(const s of this.states){const o=s.actions[n];if(o)for(const n of o){const o=this._stateContextFactory.createStateContext(s);try{let r=s.instance[n.fn](o,e);r instanceof Promise&&(r=L(r)),r instanceof x?(r=r.pipe(r_({})),n.options.cancelUncompleted&&(r=r.pipe(Vf(t.pipe(AA(e)))))):r=bd({}).pipe(ap()),i.push(r)}catch(r){i.push(tp(r))}}}return i.length||i.push(bd({})),ZC(i)}addToStatesMap(t){const e=[],n=this.statesByName;for(const i of t){const t=VA.checkStateNameIsUnique(i,n);!n[t]&&(e.push(i),n[t]=i)}return{newStates:e}}addRuntimeInfoToMeta(t,e){this.statePaths[t.name]=e,t.path=e}hasBeenMountedAndBootstrapped(t,e){const n=void 0!==gA(this._initialState,e);return this.statesByName[t]&&n}}return t.\u0275fac=function(e){return new(e||t)(pi(ao),pi(hA),pi(t,12),pi(MA),pi(IA),pi(UA),pi(GC,8))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),HA=(()=>{class t{constructor(t,e,n){this.internalStateOperations=t,this.stateContextFactory=e,this.bootstrapper=n}ngxsBootstrap(t,e){this.internalStateOperations.getRootStateOperations().dispatch(t).pipe(wd(()=>!!e),xp(()=>this.invokeInit(e.states)),U(()=>this.bootstrapper.appBootstrapped$),wd(t=>!!t)).subscribe(()=>this.invokeBootstrap(e.states))}invokeInit(t){for(const e of t){const t=e.instance;if(t.ngxsOnChanges){const n=CA(e,{currentAppState:{},newAppState:this.internalStateOperations.getRootStateOperations().getState()});t.ngxsOnChanges(n)}t.ngxsOnInit&&t.ngxsOnInit(this.getStateContext(e)),e.isInitialised=!0}}invokeBootstrap(t){for(const e of t){const t=e.instance;t.ngxsAfterBootstrap&&t.ngxsAfterBootstrap(this.getStateContext(e))}}getStateContext(t){return this.stateContextFactory.createStateContext(t)}}return t.\u0275fac=function(e){return new(e||t)(pi(jA),pi(UA),pi(WC))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const WA=t=>t&&t.NGXS_SELECTOR_OPTIONS_META||{};function GA(t){const e=wA(t)||bA(t);return e&&e.makeRootSelector||(()=>t)}let XA=(()=>{class t{constructor(t,e,n,i,r,s){this._stateStream=t,this._internalStateOperations=e,this._config=n,this._internalExecutionStrategy=i,this._stateFactory=r,this.initStateStream(s)}dispatch(t){return this._internalStateOperations.getRootStateOperations().dispatch(t)}select(t){const e=this.getStoreBoundSelectorFn(t);return this._stateStream.pipe(F(e),O_(t=>{const{suppressErrors:e}=this._config.selectorOptions;return t instanceof TypeError&&e?bd(void 0):tp(t)}),Rf(),SA(this._internalExecutionStrategy))}selectOnce(t){return this.select(t).pipe(Fp(1))}selectSnapshot(t){return this.getStoreBoundSelectorFn(t)(this._stateStream.getValue())}subscribe(t){return this._stateStream.pipe(SA(this._internalExecutionStrategy)).subscribe(t)}snapshot(){return this._internalStateOperations.getRootStateOperations().getState()}reset(t){return this._internalStateOperations.getRootStateOperations().setState(t)}getStoreBoundSelectorFn(t){return GA(t)(this._stateFactory.getRuntimeSelectorContext())}initStateStream(t){const e=this._stateStream.value;if(!e||0===Object.keys(e).length){const e=Object.keys(this._config.defaultsState).length>0?Object.assign({},this._config.defaultsState,t):t;this._stateStream.next(e)}}}return t.\u0275fac=function(e){return new(e||t)(pi(RA),pi(jA),pi(hA),pi(FA),pi(qA),pi(GC,8))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),YA=(()=>{class t{constructor(e,n){t.store=e,t.config=n}ngOnDestroy(){t.store=null,t.config=null}}return t.\u0275fac=function(e){return new(e||t)(pi(XA),pi(hA))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t.store=null,t.config=null,t})();class KA{static get type(){return"@@INIT"}}class ZA{constructor(t){this.addedStates=t}static get type(){return"@@UPDATE_STATE"}}const QA=new sp(1);let JA=(()=>{class t{constructor(t,e,n,i,r=[],s){!function(){try{const t=window.ng,e=!(t.probe&&t.coreTokens)&&Zu();QA.next(e)}catch(mR){QA.next(!1)}finally{QA.complete()}}();const o=t.addAndReturnDefaults(r);e.setStateToTheCurrentWithNew(o),t.connectActionHandlers(),s.ngxsBootstrap(new KA,o)}}return t.\u0275fac=function(e){return new(e||t)(pi(qA),pi(jA),pi(XA),pi(YA),pi(rA,8),pi(HA))},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({}),t})(),tE=(()=>{class t{constructor(e,n,i,r=[],s){const o=t.flattenStates(r),a=i.addAndReturnDefaults(o);a.states.length&&(n.setStateToTheCurrentWithNew(a),s.ngxsBootstrap(new ZA(a.defaults),a))}static flattenStates(t=[]){return t.reduce((t,e)=>t.concat(e),[])}}return t.\u0275fac=function(e){return new(e||t)(pi(XA),pi(jA),pi(qA),pi(sA,8),pi(HA))},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({}),t})();class eE{static forRoot(t=[],e={}){return{ngModule:JA,providers:[qA,UA,TA,MA,WC,zA,$A,HA,NA,IA,jA,FA,XA,RA,YA,BA,...t,...eE.ngxsTokenProviders(t,e)]}}static forFeature(t=[]){return{ngModule:tE,providers:[qA,BA,...t,{provide:sA,multi:!0,useValue:t}]}}static ngxsTokenProviders(t,e){return[{provide:aA,useValue:HC},{provide:lA,useValue:Zu},{provide:fA,useClass:e.executionStrategy||iA},{provide:rA,useValue:t},{provide:eE.ROOT_OPTIONS,useValue:e},{provide:hA,useFactory:eE.ngxsConfigFactory,deps:[eE.ROOT_OPTIONS]},{provide:wu,useFactory:eE.appBootstrapListenerFactory,multi:!0,deps:[WC]},{provide:GC,useFactory:eE.getInitialState},{provide:YC,useExisting:UA},{provide:KC,useExisting:qA}]}static ngxsConfigFactory(t){return vA(new hA,t)}static appBootstrapListenerFactory(t){return()=>t.bootstrap()}static getInitialState(){return XC.pop()}}function nE(t,e){return(n,i)=>{if(n.hasOwnProperty("prototype"))throw new Error(nA.ACTION_DECORATOR());const r=_A(n.constructor);Array.isArray(t)||(t=[t]);for(const s of t){const t=s.type;r.actions[t]||(r.actions[t]=[]),r.actions[t].push({fn:i,options:e||{},type:t})}}}function iE(t){return e=>{!function(t){QA.subscribe(e=>{e&&(t.\u0275prov||console.warn(nA.UNDECORATED_STATE_IN_IVY(t.name)))})}(e);const n=e,i=_A(n),r=Object.getPrototypeOf(n),s=function(e){return Object.assign({},e.NGXS_OPTIONS_META||{},t)}(r);!function(t){const{meta:e,inheritedStateClass:n,optionsWithInheritance:i}=t,{children:r,defaults:s,name:o}=i,a="string"==typeof o?o:o&&o.getName()||null;VA.checkCorrectStateName(a),n.hasOwnProperty(uA)&&(e.actions=Object.assign({},e.actions,(n.NGXS_META||{}).actions)),e.children=r,e.defaults=s,e.name=a}({meta:i,inheritedStateClass:r,optionsWithInheritance:s}),n.NGXS_OPTIONS_META=s}}function rE(t){return(e,n,i)=>{if(!i||null===i.value)throw new Error(nA.SELECTOR_DECORATOR());const r=i.value,s=function(t,e,n){const i=n&&n.containerClass,r=qC(function(...t){const n=e.apply(i,t);return n instanceof Function?qC.apply(null,[n]):n});Object.setPrototypeOf(r,e);const s=function(t,e){const n=xA(t);n.originalFn=t;let i=()=>({});e&&(n.containerClass=e.containerClass,n.selectorName=e.selectorName,i=e.getSelectorOptions||i);const r=Object.assign({},n);return n.getSelectorOptions=()=>function(t,e){return Object.assign({},WA(t.containerClass)||{},WA(t.originalFn)||{},t.getSelectorOptions()||{},e)}(r,i()),n}(e,n);return s.makeRootSelector=e=>{const{argumentSelectorFunctions:n,selectorOptions:i}=function(t,e,n=[]){const i=e.getSelectorOptions(),r=t.getSelectorOptions(i);return{selectorOptions:r,argumentSelectorFunctions:function(t=[],e,n){const i=[];return n&&(0===t.length||e.injectContainerState)&&bA(n)&&i.push(n),t&&i.push(...t),i}(n,r,e.containerClass).map(e=>GA(e)(t))}}(e,s,t);return function(t){const e=n.map(e=>e(t));try{return r(...e)}catch(s){if(s instanceof TypeError&&i.suppressErrors)return;throw s}}},r}(t,r,{containerClass:e,selectorName:n.toString(),getSelectorOptions:()=>({})}),o={configurable:!0,get:()=>s};return o.originalFn=r,o}}eE.\u0275fac=function(t){return new(t||eE)},eE.\u0275mod=Yt({type:eE}),eE.\u0275inj=mt({}),eE.ROOT_OPTIONS=new Kn("ROOT_OPTIONS");const sE="NGXS_META";let oE=(()=>{class t{constructor(t){this.sequence$=new vp(0),this.subscription=null,t&&(this.subscription=t.subscribe(()=>this.updateSequence()))}get sequenceValue(){return this.sequence$.getValue()}ngOnDestroy(){var t;this.sequence$.next(0),null===(t=this.subscription)||void 0===t||t.unsubscribe()}updateSequence(){this.sequence$.next(this.sequenceValue+1)}}return t.\u0275fac=function(e){return new(e||t)(pi(XA,8))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();function aE(t){return t.NGXS_DATA_META}let lE=(()=>{class t{constructor(e,n,i){t.store=e.get(XA),t.ngZone=e.get(Nu),t.factory=n,t.context=i,t.computed=e.get(oE)}}return t.store=null,t.computed=null,t.context=null,t.factory=null,t.ngZone=null,t.\u0275fac=function(e){return new(e||t)(pi(ao),pi(KC),pi(YC))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();class uE{constructor(){uE.statesCachedMeta.clear()}static createStateContext(t){return lE.context.createStateContext(t)}static ensureMappedState(t){if(IC(lE.factory)||IC(t))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return(NC(t.name)?uE.statesCachedMeta.get(t.name):null)||uE.ensureMeta(t)}static getRepositoryByInstance(t){var e;const n=null!==(e=aE(uE.getStateClassByInstance(t)))&&void 0!==e?e:null;if(IC(n))throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return n}static getStateClassByInstance(t){return(null!=t?t:{}).constructor}static clearMetaByInstance(t){const e=uE.getRepositoryByInstance(t);e.stateMeta.actions={},e.operations={}}static createPayload(t,e){const n={},i=Array.from(t);for(let r=0;r<i.length;r++){const t=null==e?void 0:e.getPayloadTypeByIndex(r);NC(t)&&(n[t]=i[r])}return Object.keys(n).length>0?n:null}static createAction(t,e,n){const i=uE.createPayload(e,n);var r;return new(r=t.type,class{constructor(t){t&&Object.keys(t).forEach(e=>{this[e]=t[e]})}static get type(){return r}})(i)}static ensureMeta(t){var e;const n=NC(t.name)?null===(e=lE.factory.states)||void 0===e?void 0:e.find(e=>e.name===t.name):null;return NC(n)&&NC(t.name)&&uE.statesCachedMeta.set(t.name,n),n}}uE.statesCachedMeta=new Map,uE.\u0275fac=function(t){return new(t||uE)},uE.\u0275prov=pt({token:uE,factory:uE.\u0275fac}),new sp(1);class cE extends Error{constructor(t){super(`Child states can only be added to an object. Cannot convert ${NC(null==t?void 0:t.constructor)?t.constructor.name:t} to PlainObject`)}}function hE(t){var e;return null!==(e=t.NGXS_OPTIONS_META)&&void 0!==e?e:{name:""}}function dE(t){var e;const n=hE(t),i=null!==(e=n.children)&&void 0!==e?e:[],r=$C(void 0===n.defaults?{}:n.defaults);if(i.length){if(jC(r))return function(t,e){return e.reduce((t,e)=>{const n=hE(e);if(function(t){const e="string"==typeof t?t.trim():t;return[void 0,null,NaN,"",1/0].includes(e)}(n.name))throw new Error("State name not provided in class");return t[n.name.toString()]=dE(e),t},null!=t?t:{})}(r,i);throw new cE(r)}return r}function fE(t){var e;return null!==(e=t.__NGXS_COMPUTED_OPTION__)&&void 0!==e?e:null}function pE(){var t,e;return null!==(e=null===(t=null==lE?void 0:lE.computed)||void 0===t?void 0:t.sequenceValue)&&void 0!==e?e:0}function mE(t){let e=!1;return Pf(t)&&(e=!0),e}function gE(t){return t.NGXS_ARGUMENT_REGISTRY_META}class yE extends Error{constructor(t,e){super(`An argument with the name '${t}' already exists in the method '${e}'`)}}class vE{constructor(){this.payloadMap=new Map,this.argumentMap=new Map}getPayloadTypeByIndex(t){var e;return null!==(e=this.payloadMap.get(t))&&void 0!==e?e:null}getArgumentNameByIndex(t){var e;return null!==(e=this.argumentMap.get(t))&&void 0!==e?e:null}createPayloadType(t,e,n){this.checkDuplicateName(t,e),this.payloadMap.set(n,t),this.payloadMap.set(t,t)}createArgumentName(t,e,n){this.checkDuplicateName(t,e),this.argumentMap.set(n,t),this.argumentMap.set(t,t)}checkDuplicateName(t,e){if(LC(this.argumentMap.has(t))||LC(this.payloadMap.has(t)))throw new yE(t,e)}}function _E(t){return Zu()?zC(t):t}function bE(t){return{enumerable:!0,configurable:!0,get(){const e=aE(t),n=uE.ensureMappedState(e.stateMeta);return uE.createStateContext(n)}}}function xE(t){if(!t)throw new Error("You forgot add decorator @StateRepository or initialize state!\nExample: NgxsModule.forRoot([ .. ]), or NgxsModule.forFeature([ .. ])");return Object.assign(Object.assign({},t),{getState:()=>Zu()?zC(t.getState()):t.getState(),setState(e){t.setState(e)},patchState(e){t.patchState(e)}})}function wE(){return(t,e,n)=>{!function(t,e){if(!function(t,e){var n;let i=t,r=!1;if(jC(i))for(;null!==i;){if(BC(null==i?void 0:i.hasOwnProperty(e))){r=!!(null===(n=Object.getOwnPropertyDescriptor(i,e))||void 0===n?void 0:n.get);break}i=Object.getPrototypeOf(i)}return r}(t,null==e?void 0:e.toString()))throw new Error(`The method must be a getter for the computed decorator to work properly.\nExample: \n@Computed() get ${e.toString()}() { \n\t .. \n}`)}(t,e);const i=n.get;return n.get=function(...t){const e=function(t){return IC(fE(t))&&Object.defineProperties(t,{__NGXS_COMPUTED_OPTION__:{enumerable:!0,configurable:!0,value:new WeakMap}}),fE(t)}(this),n=null==e?void 0:e.get(i);if(BC(null==n?void 0:n.isObservable))return null==n?void 0:n.value;if(IC(n)||n.sequenceId!==pE()){e.delete(i);const n=i.apply(this,t);return e.set(i,{value:n,sequenceId:pE(),isObservable:mE(n)}),n}return n.value},n}}const CE={cancelUncompleted:!0,insideZone:!1};function AE(t=CE){return(e,n,i)=>{!function(t,e){if(t.hasOwnProperty("prototype"))throw new Error("Cannot support static methods with @DataAction()");if(void 0===e)throw new Error("@DataAction() can only decorate a method implementation")}(e,i);const r=i.value,s=n.toString();return i.value=function(...e){const n=this;let i=null;const o=uE.getRepositoryByInstance(n),a=o.operations;let l=a[s];const u=o.stateMeta,c=gE(r);if(IC(l)){const e=null!==(f=null===(d=null===(h=(r+"").replace(/[/][/].*$/gm,"").replace(/\s+/g,"").replace(/[/][*][^/*]*[*][/]/g,"").split("){",1))||void 0===h?void 0:h[0])||void 0===d?void 0:d.replace(/^[^(]*[(]/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean))&&void 0!==f?f:[],n=function(t){const{statePath:e,argumentsNames:n,methodName:i,argumentRegistry:r}=t;let s="";for(let o=0;o<n.length;o++)NC(null==r?void 0:r.getArgumentNameByIndex(o))?s+=null==r?void 0:r.getArgumentNameByIndex(o):NC(null==r?void 0:r.getPayloadTypeByIndex(o))?s+=null==r?void 0:r.getPayloadTypeByIndex(o):s+=`$arg${o}`,o!==n.length-1&&(s+=", ");return`@${e.replace(/\./g,"/")}.${i}(${s})`}({statePath:u.path,methodName:s,argumentsNames:e,argumentRegistry:c});l=a[s]={type:n,options:{cancelUncompleted:t.cancelUncompleted}},u.actions[l.type]=[{type:l.type,options:l.options,fn:l.type}]}var h,d,f;uE.ensureMappedState(u).instance[l.type]=()=>{var s;return BC(t.insideZone)?null===(s=lE.ngZone)||void 0===s||s.run(()=>{i=r.apply(n,e)}):i=r.apply(n,e),Pf(i)?bd(null).pipe(F(()=>i)):i};const p=uE.createAction(l,e,c),m=lE.store.dispatch(p);return Pf(i)?function(t,e){return ZC([t,e]).pipe(F(t=>t.pop()))}(m,i):i},i}}function EE(t){return(e,n,i)=>{const r=t.trim();if(!r)throw new Error("Payload name should be initialized");(function(t,e){const n=t[e];return IC(gE(n))&&Object.defineProperties(n,{NGXS_ARGUMENT_REGISTRY_META:{enumerable:!0,configurable:!0,value:new vE}}),gE(n)})(e,n).createPayloadType(r,n,i)}}function kE(){return t=>{const e=function(t){if(!LC(t.hasOwnProperty(sE))){const e={name:null,actions:{},defaults:{},path:null,makeRootSelector:t=>t.getStateGetter(e.name),children:[]};Object.defineProperty(t,sE,{value:e})}return function(t){var e;return null===(e=t)||void 0===e?void 0:e.NGXS_META}(t)}(t);if(IC(e.name))throw new Error("@StateRepository should be add before decorator @State");!function(t,e){(function(t){var e;const n=null!==(e=aE(t))&&void 0!==e?e:null;return(IC(n)||(null==n?void 0:n.stateClass)!==t)&&function(t){Object.defineProperty(t,"NGXS_DATA_META",{writable:!0,configurable:!0,enumerable:!0,value:{stateMeta:null,operations:{},stateClass:t}})}(t),aE(t)}(t)).stateMeta=e}(t,e),function(t,e,n){Object.defineProperties(t.prototype,{name:{enumerable:!0,configurable:!0,value:e.name},initialState:{enumerable:!0,configurable:!0,get:()=>$C(n)},context:bE(t)})}(t,e,dE(t)),function(t){var e,n;const i=aE(t),r=null!==(n=null===(e=null==i?void 0:i.stateMeta)||void 0===e?void 0:e.name)&&void 0!==n?n:null;if(NC(r)){const e=`__${r}__selector`;Object.defineProperties(t.prototype,{[e]:{writable:!0,enumerable:!1,configurable:!0},state$:{enumerable:!0,configurable:!0,get(){if(NC(this[e]))return this[e];if(IC(lE.store))throw new Error("Metadata not created \n Maybe you forgot to import the NgxsDataPluginModule\n Also, you cannot use this.ctx.* until the application is fully rendered \n (use by default ngxsOnInit(ctx: StateContext), or ngxsAfterBootstrap(ctx: StateContext) !!!");return this[e]=lE.store.select(t).pipe(F(t=>Zu()?zC(t):t),ap({refCount:!0,bufferSize:1})),this[e]}}})}}(t)}}var DE=(()=>(function(t){t.ID="id"}(DE||(DE={})),DE))(),SE=(()=>(function(t){t.ASC="asc",t.DESC="desc"}(SE||(SE={})),SE))();let FE=(()=>{class t{constructor(){this.browserStorageEvents$=new k,this.isInitialised=!1,this.isBootstrapped=!1,this._dirty=!0}get dirty(){return this._dirty}set dirty(t){this._dirty=t}ngxsOnChanges(t){var e;this.dirty&&this.isBootstrapped&&(this.dirty=!1,null===(e=this.ngxsDataDoCheck)||void 0===e||e.call(this))}ngxsOnInit(){this.isInitialised=!0}ngxsAfterBootstrap(){var t;this.isBootstrapped=!0,this.dirty&&(this.dirty=!1,null===(t=this.ngxsDataDoCheck)||void 0===t||t.call(this))}markAsDirtyAfterReset(){var t;this.dirty=!0,null===(t=this.ngxsDataAfterReset)||void 0===t||t.call(this)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),OE=(()=>{class t extends FE{constructor(){super(...arguments),this.primaryKey=DE.ID,this.comparator=null}get snapshot(){return _E(this.getState())}get ids(){return this.snapshot.ids}get entities(){return this.snapshot.entities}get entitiesArray(){const t=this.snapshot;return t.ids.map(e=>t.entities[e])}get ids$(){return this.state$.pipe(F(t=>t.ids))}get entities$(){return this.state$.pipe(F(t=>t.entities))}get entitiesArray$(){return this.state$.pipe(F(t=>t.ids.map(e=>t.entities[e])))}get ctx(){return xE(this.context)}setComparator(t){return this.comparator=t,this}dispatch(t){return this.ctx.dispatch(t)}getState(){return this.ctx.getState()}selectId(t){var e;return null===(e=t)||void 0===e?void 0:e[this.primaryKey]}selectOne(t){var e;return null!==(e=this.snapshot.entities[t])&&void 0!==e?e:null}selectAll(){const t=this.getState();return t.ids.map(e=>t.entities[e])}reset(){this.setEntitiesState(this.initialState),this.markAsDirtyAfterReset()}addOne(t){this.addEntityOne(t)}addMany(t){this.addEntitiesMany(t)}setOne(t){this.setEntityOne(t)}setMany(t){this.setEntitiesMany(t)}setAll(t){this.setEntitiesAll(t)}updateOne(t){this.updateEntitiesMany([t])}updateMany(t){this.updateEntitiesMany(t)}upsertOne(t){this.upsertEntitiesMany([t])}upsertMany(t){this.upsertEntitiesMany(t)}removeOne(t){this.removeEntitiesMany([t])}removeMany(t){this.removeEntitiesMany(t)}removeByEntity(t){const e=this.selectId(t);this.removeEntitiesMany([e])}removeByEntities(t){const e=[];for(const n of t){const t=this.selectId(n);e.push(t)}this.removeEntitiesMany(e)}removeAll(){this.setEntitiesState(this.initialState)}sort(t){this.comparator=null!=t?t:this.comparator,IC(this.comparator)?console.warn("You must set the compare function before sorting."):this.setEntitiesState(this.getState())}addEntityOne(t){const e=this.getState(),n=this.selectIdValue(t);n in e.entities||this.setEntitiesState(Object.assign(Object.assign({},e),{ids:[...e.ids,n],entities:Object.assign(Object.assign({},e.entities),{[n]:t})}))}addEntitiesMany(t){const e=this.getState(),n={},i=[];for(const r of t){const t=this.selectIdValue(r);t in e.entities||t in n||(i.push(t),n[t]=r)}i.length&&this.setEntitiesState(Object.assign(Object.assign({},e),{ids:[...e.ids,...i],entities:Object.assign(Object.assign({},e.entities),n)}))}setEntitiesAll(t){const e=this.getState(),n={},i=[];for(const r of t){const t=this.selectIdValue(r);t in n||(i.push(t),n[t]=r)}this.setEntitiesState(Object.assign(Object.assign({},e),{ids:i,entities:n}))}setEntityOne(t){const e=this.getState(),n=this.selectIdValue(t);this.setEntitiesState(Object.assign(Object.assign({},e),n in e.entities?{entities:Object.assign(Object.assign({},e.entities),{[n]:t})}:{ids:[...e.ids,n],entities:Object.assign(Object.assign({},e.entities),{[n]:t})}))}setEntitiesMany(t){for(const e of t)this.setEntityOne(e)}updateEntitiesMany(t){const e=this.getState(),n=t.filter(t=>t.id in e.entities);if(0===n.length)return;const i=this.generateKeyMap(e),r=Object.assign({},e.entities);for(const s of n){const t=this.updateOrigin(r,s),e=this.selectIdValue(t);e!==s.id&&(delete i[s.id],delete r[s.id]),i[s.id]=e,r[e]=t}this.setEntitiesState(Object.assign(Object.assign({},e),{ids:e.ids.map(t=>{var e;return null!==(e=i[t])&&void 0!==e?e:t}),entities:r}))}upsertEntitiesMany(t){const e=this.getState(),n=[],i=[];for(const r of t){const t=this.selectIdValue(r);t in e.entities?n.push({id:t,changes:r}):i.push(r)}this.updateMany(n),this.addMany(i)}removeEntitiesMany(t){const e=this.getState(),n=this.generateKeyMap(e),i=Object.assign({},e.entities);for(const r of t)r in i&&(delete n[r],delete i[r]);this.setEntitiesState(Object.assign(Object.assign({},e),{ids:e.ids.filter(t=>t in n),entities:i}))}setEntitiesState(t){const e=this.sortKeysByComparator(t.ids,t.entities);this.ctx.setState(Object.assign(Object.assign({},t),{ids:e,entities:t.entities}))}sortKeysByComparator(t,e){if(IC(this.comparator))return t;const n=t.slice(),i=this.comparator;return"function"==typeof i?n.sort((t,n)=>i(e[t],e[n])):this.sortByComparatorOptions(n,i,e)}sortByComparatorOptions(t,e,n){switch(null==e?void 0:e.sortByOrder){case SE.ASC:return t.sort((t,i)=>function(t,e,n){return(null==e?void 0:e[t])>(null==n?void 0:n[t])?1:(null==e?void 0:e[t])<(null==n?void 0:n[t])?-1:0}(null==e?void 0:e.sortBy,n[t],n[i]));case SE.DESC:return t.sort((t,i)=>function(t,e,n){return(null==e?void 0:e[t])>(null==n?void 0:n[t])?-1:(null==e?void 0:e[t])<(null==n?void 0:n[t])?1:0}(null==e?void 0:e.sortBy,n[t],n[i]));default:return Zu()&&console.warn(`Invalid --\x3e { sortByOrder: "${null==e?void 0:e.sortByOrder}" } not supported!`),t}}generateKeyMap(t){return t.ids.reduce((t,e)=>(t[e]=e,t),{})}updateOrigin(t,e){return Object.assign(Object.assign({},t[e.id]),e.changes)}selectIdValue(t){const e=this.selectId(t);return IC(e)&&Zu()&&console.warn(`The entity passed to the 'selectId' implementation returned ${e}.`,"You should probably provide your own 'selectId' implementation.","The entity that was passed:",t,"The current `selectId` implementation: (entity: V): K => entity.id"),e}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Hn(t)))(n||t)}}(),t.\u0275prov=pt({token:t,factory:t.\u0275fac}),MC([wE(),PC("design:type",Object),PC("design:paramtypes",[])],t.prototype,"snapshot",null),MC([wE(),PC("design:type",Array),PC("design:paramtypes",[])],t.prototype,"ids",null),MC([wE(),PC("design:type",Object),PC("design:paramtypes",[])],t.prototype,"entities",null),MC([wE(),PC("design:type",Array),PC("design:paramtypes",[])],t.prototype,"entitiesArray",null),MC([wE(),PC("design:type",x),PC("design:paramtypes",[])],t.prototype,"ids$",null),MC([wE(),PC("design:type",x),PC("design:paramtypes",[])],t.prototype,"entities$",null),MC([wE(),PC("design:type",x),PC("design:paramtypes",[])],t.prototype,"entitiesArray$",null),MC([AE(),PC("design:type",Function),PC("design:paramtypes",[]),PC("design:returntype",void 0)],t.prototype,"reset",null),MC([AE(),TC(0,EE("entity")),PC("design:type",Function),PC("design:paramtypes",[Object]),PC("design:returntype",void 0)],t.prototype,"addOne",null),MC([AE(),TC(0,EE("entities")),PC("design:type",Function),PC("design:paramtypes",[Array]),PC("design:returntype",void 0)],t.prototype,"addMany",null),MC([AE(),TC(0,EE("entity")),PC("design:type",Function),PC("design:paramtypes",[Object]),PC("design:returntype",void 0)],t.prototype,"setOne",null),MC([AE(),TC(0,EE("entities")),PC("design:type",Function),PC("design:paramtypes",[Array]),PC("design:returntype",void 0)],t.prototype,"setMany",null),MC([AE(),TC(0,EE("entities")),PC("design:type",Function),PC("design:paramtypes",[Array]),PC("design:returntype",void 0)],t.prototype,"setAll",null),MC([AE(),TC(0,EE("update")),PC("design:type",Function),PC("design:paramtypes",[Object]),PC("design:returntype",void 0)],t.prototype,"updateOne",null),MC([AE(),TC(0,EE("updates")),PC("design:type",Function),PC("design:paramtypes",[Array]),PC("design:returntype",void 0)],t.prototype,"updateMany",null),MC([AE(),TC(0,EE("entity")),PC("design:type",Function),PC("design:paramtypes",[Object]),PC("design:returntype",void 0)],t.prototype,"upsertOne",null),MC([AE(),TC(0,EE("entities")),PC("design:type",Function),PC("design:paramtypes",[Array]),PC("design:returntype",void 0)],t.prototype,"upsertMany",null),MC([AE(),TC(0,EE("id")),PC("design:type",Function),PC("design:paramtypes",[Object]),PC("design:returntype",void 0)],t.prototype,"removeOne",null),MC([AE(),TC(0,EE("ids")),PC("design:type",Function),PC("design:paramtypes",[Array]),PC("design:returntype",void 0)],t.prototype,"removeMany",null),MC([AE(),TC(0,EE("entity")),PC("design:type",Function),PC("design:paramtypes",[Object]),PC("design:returntype",void 0)],t.prototype,"removeByEntity",null),MC([AE(),TC(0,EE("entities")),PC("design:type",Function),PC("design:paramtypes",[Array]),PC("design:returntype",void 0)],t.prototype,"removeByEntities",null),MC([AE(),PC("design:type",Function),PC("design:paramtypes",[]),PC("design:returntype",void 0)],t.prototype,"removeAll",null),MC([AE(),TC(0,EE("comparator")),PC("design:type",Function),PC("design:paramtypes",[Object]),PC("design:returntype",void 0)],t.prototype,"sort",null),t})(),ME=(()=>{class t extends FE{get snapshot(){return _E(this.getState())}get ctx(){return xE(this.context)}getState(){return this.ctx.getState()}dispatch(t){return this.ctx.dispatch(t)}patchState(t){this.ctx.patchState(t)}setState(t){this.ctx.setState(t)}reset(){this.ctx.setState(this.initialState),this.markAsDirtyAfterReset()}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Hn(t)))(n||t)}}(),t.\u0275prov=pt({token:t,factory:t.\u0275fac}),MC([wE(),PC("design:type",Object),PC("design:paramtypes",[])],t.prototype,"snapshot",null),MC([AE(),TC(0,EE("patchValue")),PC("design:type",Function),PC("design:paramtypes",[Object]),PC("design:returntype",void 0)],t.prototype,"patchState",null),MC([AE(),TC(0,EE("stateValue")),PC("design:type",Function),PC("design:paramtypes",[Object]),PC("design:returntype",void 0)],t.prototype,"setState",null),MC([AE(),PC("design:type",Function),PC("design:paramtypes",[]),PC("design:returntype",void 0)],t.prototype,"reset",null),t})();function TE(t){return e=>(function(t,e){var n;const i=null!==(n=t.signals)&&void 0!==n?n:t.signals=[],r=t.projections?t.projections[0]:void 0;r&&"albersUsa"!==r.type&&(i.push({name:"tx",update:"width / 2 - 300"},{name:"ty",update:"height / 2"},{name:"scale",value:null!=e.initialZoom?e.initialZoom:e.zoomLevels[0],on:[{events:{type:"wheel",consume:!0,filter:"event.shiftKey"},update:["clamp(scale * pow(1.0015, -event.deltaY * pow(48, event.deltaMode)), ",e.zoomLevels[0],", ",e.zoomLevels[1],")"].join("")}]},{name:"angles",value:[0,0],on:[{events:"mousedown",update:"[rotateX, centerY]"}]},{name:"cloned",value:null,on:[{events:"mousedown",update:"copy('"+r.name+"')"}]},{name:"start",value:null,on:[{events:"mousedown",update:"invert(cloned, xy())"}]},{name:"drag",value:null,on:[{events:"[mousedown[event.shiftKey], window:mouseup] > window:mousemove",update:"invert(cloned, xy())"}]},{name:"delta",value:null,on:[{events:{signal:"drag"},update:"[drag[0] - start[0], start[1] - drag[1]]"}]},{name:"rotateX",value:e.center[0],on:[{events:{signal:"delta"},update:"angles[0] + delta[0]"}]},{name:"centerY",value:e.center[1],on:[{events:{signal:"delta"},update:"clamp(angles[1] + delta[1], -60, 60)"}]}),Object.assign(r,{scale:{signal:"scale"},rotate:[{signal:"rotateX"},0,0],center:[0,{signal:"centerY"}],translate:[{signal:"tx"},{signal:"ty"}]}),delete r.size)}(e,t),e)}TE({center:[86.44305475,39.76622477],zoomLevels:[3200,25e4],initialZoom:6400}),TE({center:[96,39],zoomLevels:[10,25e4],initialZoom:600});var PE=n(4965);const RE={Gender:"SEX",Age:"AGE","Opioid Prescriptions within last year before death":"OPIOID_PRESCRIPTIONS_1YEAR","Any Opioid Prescriptions before death":"ANY_PRESCRIPTIONS","Prescription vs. Illicit Drugs":"ILLICIT_V_PRESCRIPTION"};class BE{constructor(t){this.view=t,this.subsets={},this.setData(),this.view.addSignalListener("data_variable_selection",(t,e)=>this.updateDataVariable(e.LABEL&&e.LABEL.length>0?e.LABEL[0]:void 0))}setData(){return RC(this,void 0,void 0,function*(){const t=yield(0,PE.loader)().load("assets/generated/vis-geomap-opioid-deaths.csv").then(t=>(0,PE.read)(t,{type:"csv",parse:{N_OPIOID_PRESCRIPTIONS:"number",LATITUDE:"number",LONGITUDE:"number",PERIOD:"date"}}));Object.entries(RE).forEach(([e,n])=>{this.subsets[e]=t.filter(t=>t.DATA_VARIABLE===n)}),this.updateDataVariable("Age")})}updateDataVariable(t){return RC(this,void 0,void 0,function*(){t&&(yield this.view.runAsync(),this.view.data("source",this.subsets[t]||[]))})}finalize(){this.subsets={}}}const IE=[{id:"vis1-geomap-of-opioid-deaths",title:"Accidental Drug Overdose Deaths",description:"Marion County by Place of Injury (2010-2018)",spec:"assets/pages/vis1-geomap-of-opioid-deaths/vis.vl.json",options:{renderer:"canvas",actions:!0,patch:t=>((t=TE({center:[87.44305475,38.76622477],zoomLevels:[3200,25e4],initialZoom:6400})(t)).width=941,t.height=941,t),viewClass:class extends PE.View{constructor(t,e){super(t,e),this.dataHandler=new BE(this)}finalize(){return this.dataHandler.finalize(),super.finalize()}}},content:"assets/pages/vis1-geomap-of-opioid-deaths/README.md",sql:"assets/pages/vis1-geomap-of-opioid-deaths/data.sql",csv:"assets/generated/vis-geomap-opioid-deaths.csv"},{id:"vis2-age-and-gender",title:"Age Group & Gender of Accidental Drug Overdose",description:"Marion County Deaths & Population (2010-2018)",spec:"assets/pages/vis2-age-and-gender/vis.vl.json",options:{},content:"assets/pages/vis2-age-and-gender/README.md",sql:"assets/pages/vis2-age-and-gender/data.sql",csv:"assets/generated/vis2-data/death-counts.csv"},{id:"vis3-heatmap-of-accidental-overdoses",title:"Age Group & Gender of Accidental Drug Overdose",description:"Marion County by Deaths & Population (2010-2018)",spec:"assets/pages/vis3-heatmap-of-accidental-overdoses/vis.vl.json",options:{},content:"assets/pages/vis3-heatmap-of-accidental-overdoses/README.md",sql:"assets/pages/vis4-combined-visualization/data.sql",csv:"assets/generated/visualization4/data.csv"},{id:"vis4-combined-visualization",title:"Accidental Drug Overdose Deaths",description:"Marion County by Substance, Sex, & Age (2010-2018)",spec:"assets/pages/vis4-combined-visualization/vis.vl.json",options:{},content:"assets/pages/vis4-combined-visualization/README.md",sql:"assets/pages/vis4-combined-visualization/data.sql",csv:"assets/generated/visualization4/data.csv"},{id:"vis5-opioid-trajectories",title:"Opioid Death Datasets",description:"Marion County by History of Opioid Prescription, Previous Overdose, Incarceration, Health Data (2010-2018)",spec:"assets/pages/vis5-opioid-trajectories/vis.vl.json",options:{},content:"assets/pages/vis5-opioid-trajectories/README.md",sql:"assets/pages/vis5-opioid-trajectories/data.sql",csv:"assets/generated/visualization5/data.csv"},{id:"vis6-maps-of-health",title:"Maps of Health #1",description:"Marion County Encounters Over Time (2010 - 2018)",spec:"assets/pages/vis6-maps-of-health/vis.vl.json",options:{renderer:"svg",actions:!0,width:1268},content:"assets/pages/vis6-maps-of-health/README.md",sql:"assets/pages/vis6-maps-of-health/data.sql",csv:"assets/generated/visualization6/data.csv"},{id:"vis6-maps-of-health-v2",title:"Maps of Health #2",description:"Marion County Encounters Over Time (2010 - 2018)",spec:"assets/pages/vis6-maps-of-health/vis2.vl.json",options:{renderer:"svg",actions:!0,width:1268},content:"assets/pages/vis6-maps-of-health/README.md",sql:"assets/pages/vis6-maps-of-health/data.sql",csv:"assets/generated/visualization6/data.csv"},{id:"vis6-maps-of-health-v3",title:"Maps of Health #3",description:"Marion County Encounters Over Time (2010 - 2018)",spec:"assets/pages/vis6-maps-of-health/vis3.vl.json",options:{renderer:"svg",actions:!0,width:1268},content:"assets/pages/vis6-maps-of-health/README.md",sql:"assets/pages/vis6-maps-of-health/data.sql",csv:"assets/generated/visualization6/data.csv"}];let NE=(()=>{let t=class extends OE{ngxsOnInit(){this.setAll(IE)}};return t.\u0275fac=function(){let e;return function(n){return(e||(e=Hn(t)))(n||t)}}(),t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t=MC([kE(),iE({name:"visualizations"})],t),t})(),LE=(()=>{class t{constructor(t){this.service=t}resolve(t){const e=t.paramMap.get("id");return null===e?Qf:this.service.entities$.pipe(OC(e),Fp(1))}}return t.\u0275fac=function(e){return new(e||t)(pi(NE))},t.\u0275prov=pt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class $E{constructor(t,e){this.predicate=t,this.inclusive=e}call(t,e){return e.subscribe(new zE(t,this.predicate,this.inclusive))}}class zE extends y{constructor(t,e,n){super(t),this.predicate=e,this.inclusive=n,this.index=0}_next(t){const e=this.destination;let n;try{n=this.predicate(t,this.index++)}catch(i){return void e.error(i)}this.nextOrComplete(t,n)}nextOrComplete(t,e){const n=this.destination;Boolean(e)?n.next(t):(this.inclusive&&n.next(t),n.complete())}}const jE=df();class UE{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=bf(-this._previousScrollPosition.left),t.style.top=bf(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,e=t.style,n=this._document.body.style,i=e.scrollBehavior||"",r=n.scrollBehavior||"";this._isEnabled=!1,e.left=this._previousHTMLStyles.left,e.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),jE&&(e.scrollBehavior=n.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),jE&&(e.scrollBehavior=i,n.scrollBehavior=r)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const t=this._document.body,e=this._viewportRuler.getViewportSize();return t.scrollHeight>e.height||t.scrollWidth>e.width}}class VE{constructor(t,e,n,i){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=i,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const t=this._viewportRuler.getViewportScrollPosition().top;Math.abs(t-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class qE{enable(){}disable(){}attach(){}}function HE(t,e){return e.some(e=>t.bottom<e.top||t.top>e.bottom||t.right<e.left||t.left>e.right)}function WE(t,e){return e.some(e=>t.top<e.top||t.bottom>e.bottom||t.left<e.left||t.right>e.right)}class GE{constructor(t,e,n,i){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=i,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const t=this._overlayRef.overlayElement.getBoundingClientRect(),{width:e,height:n}=this._viewportRuler.getViewportSize();HE(t,[{width:e,height:n,bottom:n,right:e,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let XE=(()=>{class t{constructor(t,e,n,i){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this.noop=()=>new qE,this.close=t=>new VE(this._scrollDispatcher,this._ngZone,this._viewportRuler,t),this.block=()=>new UE(this._viewportRuler,this._document),this.reposition=t=>new GE(this._scrollDispatcher,this._viewportRuler,this._ngZone,t),this._document=i}}return t.\u0275fac=function(e){return new(e||t)(pi(fp),pi(mp),pi(Nu),pi(gc))},t.\u0275prov=pt({factory:function(){return new t(pi(fp),pi(mp),pi(Nu),pi(gc))},token:t,providedIn:"root"}),t})();class YE{constructor(t){if(this.scrollStrategy=new qE,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const n of e)void 0!==t[n]&&(this[n]=t[n])}}}class KE{constructor(t,e,n,i,r){this.offsetX=n,this.offsetY=i,this.panelClass=r,this.originX=t.originX,this.originY=t.originY,this.overlayX=e.overlayX,this.overlayY=e.overlayY}}class ZE{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let QE=(()=>{class t{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const e=this._attachedOverlays.indexOf(t);e>-1&&this._attachedOverlays.splice(e,1),0===this._attachedOverlays.length&&this.detach()}}return t.\u0275fac=function(e){return new(e||t)(pi(gc))},t.\u0275prov=pt({factory:function(){return new t(pi(gc))},token:t,providedIn:"root"}),t})(),JE=(()=>{class t extends QE{constructor(t){super(t),this._keydownListener=t=>{const e=this._attachedOverlays;for(let n=e.length-1;n>-1;n--)if(e[n]._keydownEvents.observers.length>0){e[n]._keydownEvents.next(t);break}}}add(t){super.add(t),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return t.\u0275fac=function(e){return new(e||t)(pi(gc))},t.\u0275prov=pt({factory:function(){return new t(pi(gc))},token:t,providedIn:"root"}),t})(),tk=(()=>{class t extends QE{constructor(t,e){super(t),this._platform=e,this._cursorStyleIsSet=!1,this._clickListener=t=>{const e=gf(t),n=this._attachedOverlays.slice();for(let i=n.length-1;i>-1;i--){const r=n[i];if(!(r._outsidePointerEvents.observers.length<1)&&r.hasAttached()){if(r.overlayElement.contains(e))break;r._outsidePointerEvents.next(t)}}}}add(t){if(super.add(t),!this._isAttached){const t=this._document.body;t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=t.style.cursor,t.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return t.\u0275fac=function(e){return new(e||t)(pi(gc),pi(uf))},t.\u0275prov=pt({factory:function(){return new t(pi(gc),pi(uf))},token:t,providedIn:"root"}),t})();const ek="undefined"!=typeof window?window:{},nk=void 0!==ek.__karma__&&!!ek.__karma__||void 0!==ek.jasmine&&!!ek.jasmine||void 0!==ek.jest&&!!ek.jest||void 0!==ek.Mocha&&!!ek.Mocha;let ik=(()=>{class t{constructor(t,e){this._platform=e,this._document=t}ngOnDestroy(){const t=this._containerElement;t&&t.parentNode&&t.parentNode.removeChild(t)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||nk){const e=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let t=0;t<e.length;t++)e[t].parentNode.removeChild(e[t])}const e=this._document.createElement("div");e.classList.add(t),nk?e.setAttribute("platform","test"):this._platform.isBrowser||e.setAttribute("platform","server"),this._document.body.appendChild(e),this._containerElement=e}}return t.\u0275fac=function(e){return new(e||t)(pi(gc),pi(uf))},t.\u0275prov=pt({factory:function(){return new t(pi(gc),pi(uf))},token:t,providedIn:"root"}),t})();class rk{constructor(t,e,n,i,r,s,o,a,l){this._portalOutlet=t,this._host=e,this._pane=n,this._config=i,this._ngZone=r,this._keyboardDispatcher=s,this._document=o,this._location=a,this._outsideClickDispatcher=l,this._backdropElement=null,this._backdropClick=new k,this._attachments=new k,this._detachments=new k,this._locationChanges=p.EMPTY,this._backdropClickHandler=t=>this._backdropClick.next(t),this._keydownEvents=new k,this._outsidePointerEvents=new k,i.scrollStrategy&&(this._scrollStrategy=i.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=i.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){let e=this._portalOutlet.attach(t);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Fp(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this.detachBackdrop(),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=bf(this._config.width),t.height=bf(this._config.height),t.minWidth=bf(this._config.minWidth),t.minHeight=bf(this._config.minHeight),t.maxWidth=bf(this._config.maxWidth),t.maxHeight=bf(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t,e=this._backdropElement;if(!e)return;let n=()=>{e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",n),e.parentNode&&e.parentNode.removeChild(e)),this._backdropElement==e&&(this._backdropElement=null),this._config.backdropClass&&this._toggleClasses(e,this._config.backdropClass,!1),clearTimeout(t)};e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",n)}),e.style.pointerEvents="none",t=this._ngZone.runOutsideAngular(()=>setTimeout(n,500))}_toggleClasses(t,e,n){const i=t.classList;_f(e).forEach(t=>{t&&(n?i.add(t):i.remove(t))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(Vf(G(this._attachments,this._detachments))).subscribe(()=>{this._pane&&this._host&&0!==this._pane.children.length||(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}}const sk="cdk-overlay-connected-position-bounding-box",ok=/([A-Za-z%]+)$/;class ak{constructor(t,e,n,i,r){this._viewportRuler=e,this._document=n,this._platform=i,this._overlayContainer=r,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new k,this._resizeSubscription=p.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(sk),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const t=this._originRect,e=this._overlayRect,n=this._viewportRect,i=[];let r;for(let s of this._preferredPositions){let o=this._getOriginPoint(t,s),a=this._getOverlayPoint(o,e,s),l=this._getOverlayFit(a,e,n,s);if(l.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(s,o);this._canFitWithFlexibleDimensions(l,a,n)?i.push({position:s,origin:o,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(o,s)}):(!r||r.overlayFit.visibleArea<l.visibleArea)&&(r={overlayFit:l,overlayPoint:a,originPoint:o,position:s,overlayRect:e})}if(i.length){let t=null,e=-1;for(const n of i){const i=n.boundingBoxRect.width*n.boundingBoxRect.height*(n.position.weight||1);i>e&&(e=i,t=n)}return this._isPushed=!1,void this._applyPosition(t.position,t.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(r.position,r.originPoint);this._applyPosition(r.position,r.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&lk(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(sk),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const t=this._lastPosition||this._preferredPositions[0],e=this._getOriginPoint(this._originRect,t);this._applyPosition(t,e)}}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e){let n,i;if("center"==e.originX)n=t.left+t.width/2;else{const i=this._isRtl()?t.right:t.left,r=this._isRtl()?t.left:t.right;n="start"==e.originX?i:r}return i="center"==e.originY?t.top+t.height/2:"top"==e.originY?t.top:t.bottom,{x:n,y:i}}_getOverlayPoint(t,e,n){let i,r;return i="center"==n.overlayX?-e.width/2:"start"===n.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,r="center"==n.overlayY?-e.height/2:"top"==n.overlayY?0:-e.height,{x:t.x+i,y:t.y+r}}_getOverlayFit(t,e,n,i){const r=ck(e);let{x:s,y:o}=t,a=this._getOffset(i,"x"),l=this._getOffset(i,"y");a&&(s+=a),l&&(o+=l);let u=0-o,c=o+r.height-n.height,h=this._subtractOverflows(r.width,0-s,s+r.width-n.width),d=this._subtractOverflows(r.height,u,c),f=h*d;return{visibleArea:f,isCompletelyWithinViewport:r.width*r.height===f,fitsInViewportVertically:d===r.height,fitsInViewportHorizontally:h==r.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){const i=n.bottom-e.y,r=n.right-e.x,s=uk(this._overlayRef.getConfig().minHeight),o=uk(this._overlayRef.getConfig().minWidth),a=t.fitsInViewportHorizontally||null!=o&&o<=r;return(t.fitsInViewportVertically||null!=s&&s<=i)&&a}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const i=ck(e),r=this._viewportRect,s=Math.max(t.x+i.width-r.width,0),o=Math.max(t.y+i.height-r.height,0),a=Math.max(r.top-n.top-t.y,0),l=Math.max(r.left-n.left-t.x,0);let u=0,c=0;return u=i.width<=r.width?l||-s:t.x<this._viewportMargin?r.left-n.left-t.x:0,c=i.height<=r.height?a||-o:t.y<this._viewportMargin?r.top-n.top-t.y:0,this._previousPushAmount={x:u,y:c},{x:t.x+u,y:t.y+c}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const e=this._getScrollVisibility(),n=new ZE(t,e);this._positionChanges.next(n)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let n,i=t.overlayY;n="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let r=0;r<e.length;r++)e[r].style.transformOrigin=`${n} ${i}`}_calculateBoundingBoxRect(t,e){const n=this._viewportRect,i=this._isRtl();let r,s,o,a,l,u;if("top"===e.overlayY)s=t.y,r=n.height-s+this._viewportMargin;else if("bottom"===e.overlayY)o=n.height-t.y+2*this._viewportMargin,r=n.height-o+this._viewportMargin;else{const e=Math.min(n.bottom-t.y+n.top,t.y),i=this._lastBoundingBoxSize.height;r=2*e,s=t.y-e,r>i&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-i/2)}if("end"===e.overlayX&&!i||"start"===e.overlayX&&i)u=n.width-t.x+this._viewportMargin,a=t.x-this._viewportMargin;else if("start"===e.overlayX&&!i||"end"===e.overlayX&&i)l=t.x,a=n.right-t.x;else{const e=Math.min(n.right-t.x+n.left,t.x),i=this._lastBoundingBoxSize.width;a=2*e,l=t.x-e,a>i&&!this._isInitialRender&&!this._growAfterOpen&&(l=t.x-i/2)}return{top:s,left:l,bottom:o,right:u,width:a,height:r}}_setBoundingBoxStyles(t,e){const n=this._calculateBoundingBoxRect(t,e);this._isInitialRender||this._growAfterOpen||(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));const i={};if(this._hasExactPosition())i.top=i.left="0",i.bottom=i.right=i.maxHeight=i.maxWidth="",i.width=i.height="100%";else{const t=this._overlayRef.getConfig().maxHeight,r=this._overlayRef.getConfig().maxWidth;i.height=bf(n.height),i.top=bf(n.top),i.bottom=bf(n.bottom),i.width=bf(n.width),i.left=bf(n.left),i.right=bf(n.right),i.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",i.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",t&&(i.maxHeight=bf(t)),r&&(i.maxWidth=bf(r))}this._lastBoundingBoxSize=n,lk(this._boundingBox.style,i)}_resetBoundingBoxStyles(){lk(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){lk(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const n={},i=this._hasExactPosition(),r=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(i){const i=this._viewportRuler.getViewportScrollPosition();lk(n,this._getExactOverlayY(e,t,i)),lk(n,this._getExactOverlayX(e,t,i))}else n.position="static";let o="",a=this._getOffset(e,"x"),l=this._getOffset(e,"y");a&&(o+=`translateX(${a}px) `),l&&(o+=`translateY(${l}px)`),n.transform=o.trim(),s.maxHeight&&(i?n.maxHeight=bf(s.maxHeight):r&&(n.maxHeight="")),s.maxWidth&&(i?n.maxWidth=bf(s.maxWidth):r&&(n.maxWidth="")),lk(this._pane.style,n)}_getExactOverlayY(t,e,n){let i={top:"",bottom:""},r=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(r=this._pushOverlayOnScreen(r,this._overlayRect,n));let s=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return r.y-=s,"bottom"===t.overlayY?i.bottom=this._document.documentElement.clientHeight-(r.y+this._overlayRect.height)+"px":i.top=bf(r.y),i}_getExactOverlayX(t,e,n){let i,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),i=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===i?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=bf(s.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(t=>t.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:WE(t,n),isOriginOutsideView:HE(t,n),isOverlayClipped:WE(e,n),isOverlayOutsideView:HE(e,n)}}_subtractOverflows(t,...e){return e.reduce((t,e)=>t-Math.max(e,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&_f(t).forEach(t=>{""!==t&&-1===this._appliedPanelClasses.indexOf(t)&&(this._appliedPanelClasses.push(t),this._pane.classList.add(t))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof ja)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}}function lk(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function uk(t){if("number"!=typeof t&&null!=t){const[e,n]=t.split(ok);return n&&"px"!==n?null:parseFloat(e)}return t||null}function ck(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}class hk{constructor(t,e,n,i,r,s,o){this._preferredPositions=[],this._positionStrategy=new ak(n,i,r,s,o).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(t,e),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(t){this._overlayRef=t,this._positionStrategy.attach(t),this._direction&&(t.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(t){this._positionStrategy.withScrollableContainers(t)}withFallbackPosition(t,e,n,i){const r=new KE(t,e,n,i);return this._preferredPositions.push(r),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(t){return this._overlayRef?this._overlayRef.setDirection(t):this._direction=t,this}withOffsetX(t){return this._positionStrategy.withDefaultOffsetX(t),this}withOffsetY(t){return this._positionStrategy.withDefaultOffsetY(t),this}withLockedPosition(t){return this._positionStrategy.withLockedPosition(t),this}withPositions(t){return this._preferredPositions=t.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(t){return this._positionStrategy.setOrigin(t),this}}const dk="cdk-global-overlay-wrapper";class fk{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(dk),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:i,height:r,maxWidth:s,maxHeight:o}=n,a=!("100%"!==i&&"100vw"!==i||s&&"100%"!==s&&"100vw"!==s),l=!("100%"!==r&&"100vh"!==r||o&&"100%"!==o&&"100vh"!==o);t.position=this._cssPosition,t.marginLeft=a?"0":this._leftOffset,t.marginTop=l?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,a?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(dk),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let pk=(()=>{class t{constructor(t,e,n,i){this._viewportRuler=t,this._document=e,this._platform=n,this._overlayContainer=i}global(){return new fk}connectedTo(t,e,n){return new hk(e,n,t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(t){return new ak(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return t.\u0275fac=function(e){return new(e||t)(pi(mp),pi(gc),pi(uf),pi(ik))},t.\u0275prov=pt({factory:function(){return new t(pi(mp),pi(gc),pi(uf),pi(ik))},token:t,providedIn:"root"}),t})(),mk=0,gk=(()=>{class t{constructor(t,e,n,i,r,s,o,a,l,u,c){this.scrollStrategies=t,this._overlayContainer=e,this._componentFactoryResolver=n,this._positionBuilder=i,this._keyboardDispatcher=r,this._injector=s,this._ngZone=o,this._document=a,this._directionality=l,this._location=u,this._outsideClickDispatcher=c}create(t){const e=this._createHostElement(),n=this._createPaneElement(e),i=this._createPortalOutlet(n),r=new YE(t);return r.direction=r.direction||this._directionality.value,new rk(i,e,n,r,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(t){const e=this._document.createElement("div");return e.id="cdk-overlay-"+mk++,e.classList.add("cdk-overlay-pane"),t.appendChild(e),e}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(rc)),new Yw(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return t.\u0275fac=function(e){return new(e||t)(pi(XE),pi(ik),pi(Na),pi(pk),pi(JE),pi(ao),pi(Nu),pi(gc),pi(up),pi(Mc),pi(tk))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const yk=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],vk=new Kn("cdk-connected-overlay-scroll-strategy");let _k=(()=>{class t{constructor(t){this.elementRef=t}}return t.\u0275fac=function(e){return new(e||t)(ko(ja))},t.\u0275dir=Zt({type:t,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]}),t})(),bk=(()=>{class t{constructor(t,e,n,i,r){this._overlay=t,this._dir=r,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=p.EMPTY,this._attachSubscription=p.EMPTY,this._detachSubscription=p.EMPTY,this._positionSubscription=p.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new Yl,this.positionChange=new Yl,this.attach=new Yl,this.detach=new Yl,this.overlayKeydown=new Yl,this.overlayOutsideClick=new Yl,this._templatePortal=new Ww(e,n),this._scrollStrategyFactory=i,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(t){this._offsetX=t,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(t){this._offsetY=t,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(t){this._hasBackdrop=yf(t)}get lockPosition(){return this._lockPosition}set lockPosition(t){this._lockPosition=yf(t)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(t){this._flexibleDimensions=yf(t)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(t){this._growAfterOpen=yf(t)}get push(){return this._push}set push(t){this._push=yf(t)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(t){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),t.origin&&this.open&&this._position.apply()),t.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){this.positions&&this.positions.length||(this.positions=yk);const t=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=t.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=t.detachments().subscribe(()=>this.detach.emit()),t.keydownEvents().subscribe(t=>{this.overlayKeydown.next(t),27!==t.keyCode||this.disableClose||_p(t)||(t.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(t=>{this.overlayOutsideClick.next(t)})}_buildConfig(){const t=this._position=this.positionStrategy||this._createPositionStrategy(),e=new YE({direction:this._dir,positionStrategy:t,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(e.width=this.width),(this.height||0===this.height)&&(e.height=this.height),(this.minWidth||0===this.minWidth)&&(e.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(e.minHeight=this.minHeight),this.backdropClass&&(e.backdropClass=this.backdropClass),this.panelClass&&(e.panelClass=this.panelClass),e}_updatePositionStrategy(t){const e=this.positions.map(t=>({originX:t.originX,originY:t.originY,overlayX:t.overlayX,overlayY:t.overlayY,offsetX:t.offsetX||this.offsetX,offsetY:t.offsetY||this.offsetY,panelClass:t.panelClass||void 0}));return t.setOrigin(this.origin.elementRef).withPositions(e).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const t=this._overlay.position().flexibleConnectedTo(this.origin.elementRef);return this._updatePositionStrategy(t),t}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(t=>{this.backdropClick.emit(t)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(function(t,e=!1){return n=>n.lift(new $E(t,e))}(()=>this.positionChange.observers.length>0)).subscribe(t=>{this.positionChange.emit(t),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(ko(gk),ko(vl),ko(El),ko(vk),ko(up,8))},t.\u0275dir=Zt({type:t,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"],positions:["cdkConnectedOverlayPositions","positions"],origin:["cdkConnectedOverlayOrigin","origin"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[he]}),t})();const xk={provide:vk,deps:[gk],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};let wk=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({providers:[gk,xk],imports:[[cp,Zw,yp],yp]}),t})();function Ck(t,e){}class Ak{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus=!0,this.restoreFocus=!0,this.closeOnNavigation=!0}}const Ek={dialogContainer:hm("dialogContainer",[mm("void, exit",pm({opacity:0,transform:"scale(0.7)"})),mm("enter",pm({transform:"none"})),gm("* => enter",dm("150ms cubic-bezier(0, 0, 0.2, 1)",pm({transform:"none",opacity:1}))),gm("* => void, * => exit",dm("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",pm({opacity:0})))])};let kk=(()=>{class t extends Xw{constructor(t,e,n,i,r,s){super(),this._elementRef=t,this._focusTrapFactory=e,this._changeDetectorRef=n,this._config=r,this._focusMonitor=s,this._animationStateChanged=new Yl,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=t=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(t)),this._ariaLabelledBy=r.ariaLabelledBy||null,this._document=i}_initializeWithAttachedContent(){this._setupFocusTrap(),this._capturePreviouslyFocusedElement(),this._focusDialogContainer()}attachComponentPortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(t)}_recaptureFocus(){this._containsFocus()||(!this._config.autoFocus||!this._focusTrap.focusInitialElement())&&this._elementRef.nativeElement.focus()}_trapFocus(){this._config.autoFocus?this._focusTrap.focusInitialElementWhenReady():this._containsFocus()||this._elementRef.nativeElement.focus()}_restoreFocus(){const t=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&t&&"function"==typeof t.focus){const e=mf(),n=this._elementRef.nativeElement;e&&e!==this._document.body&&e!==n&&!n.contains(e)||(this._focusMonitor?(this._focusMonitor.focusVia(t,this._closeInteractionType),this._closeInteractionType=null):t.focus())}this._focusTrap&&this._focusTrap.destroy()}_setupFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement)}_capturePreviouslyFocusedElement(){this._document&&(this._elementFocusedBeforeDialogWasOpened=mf())}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,e=mf();return t===e||t.contains(e)}}return t.\u0275fac=function(e){return new(e||t)(ko(ja),ko(Hp),ko(fl),ko(gc,8),ko(Ak),ko(im))},t.\u0275dir=Zt({type:t,viewQuery:function(t,e){if(1&t&&lu(Kw,7),2&t){let t;au(t=cu())&&(e._portalOutlet=t.first)}},features:[uo]}),t})(),Dk=(()=>{class t extends kk{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:t,totalTime:e}){"enter"===t?(this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})):"exit"===t&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:e}))}_onAnimationStart({toState:t,totalTime:e}){"enter"===t?this._animationStateChanged.next({state:"opening",totalTime:e}):"exit"!==t&&"void"!==t||this._animationStateChanged.next({state:"closing",totalTime:e})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Hn(t)))(n||t)}}(),t.\u0275cmp=Ht({type:t,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(t,e){1&t&&$o("@dialogContainer.start",function(t){return e._onAnimationStart(t)})("@dialogContainer.done",function(t){return e._onAnimationDone(t)}),2&t&&(ga("id",e._id),wo("role",e._config.role)("aria-labelledby",e._config.ariaLabel?null:e._ariaLabelledBy)("aria-label",e._config.ariaLabel)("aria-describedby",e._config.ariaDescribedBy||null),ya("@dialogContainer",e._state))},features:[uo],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,e){1&t&&Ao(0,Ck,0,0,"ng-template",0)},directives:[Kw],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Ek.dialogContainer]}}),t})(),Sk=0;class Fk{constructor(t,e,n="mat-dialog-"+Sk++){this._overlayRef=t,this._containerInstance=e,this.id=n,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new k,this._afterClosed=new k,this._beforeClosed=new k,this._state=0,e._id=n,e._animationStateChanged.pipe(wd(t=>"opened"===t.state),Fp(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(wd(t=>"closed"===t.state),Fp(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(wd(t=>27===t.keyCode&&!this.disableClose&&!_p(t))).subscribe(t=>{t.preventDefault(),Ok(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():Ok(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(wd(t=>"closing"===t.state),Fp(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._overlayRef.updateSize({width:t,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function Ok(t,e,n){return void 0!==t._containerInstance&&(t._containerInstance._closeInteractionType=e),t.close(n)}const Mk=new Kn("MatDialogData"),Tk=new Kn("mat-dialog-default-options"),Pk=new Kn("mat-dialog-scroll-strategy"),Rk={provide:Pk,deps:[gk],useFactory:function(t){return()=>t.scrollStrategies.block()}};let Bk=(()=>{class t{constructor(t,e,n,i,r,s,o,a,l){this._overlay=t,this._injector=e,this._defaultOptions=n,this._parentDialog=i,this._overlayContainer=r,this._dialogRefConstructor=o,this._dialogContainerType=a,this._dialogDataToken=l,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new k,this._afterOpenedAtThisLevel=new k,this._ariaHiddenElements=new Map,this.afterAllClosed=k_(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Gf(void 0))),this._scrollStrategy=s}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(t,e){(e=function(t,e){return Object.assign(Object.assign({},e),t)}(e,this._defaultOptions||new Ak)).id&&this.getDialogById(e.id);const n=this._createOverlay(e),i=this._attachDialogContainer(n,e),r=this._attachDialogContent(t,i,n,e);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(r),r.afterClosed().subscribe(()=>this._removeOpenDialog(r)),this.afterOpened.next(r),i._initializeWithAttachedContent(),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(e=>e.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(t){const e=this._getOverlayConfig(t);return this._overlay.create(e)}_getOverlayConfig(t){const e=new YE({positionStrategy:this._overlay.position().global(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(e.backdropClass=t.backdropClass),e}_attachDialogContainer(t,e){const n=ao.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:Ak,useValue:e}]}),i=new Hw(this._dialogContainerType,e.viewContainerRef,n,e.componentFactoryResolver);return t.attach(i).instance}_attachDialogContent(t,e,n,i){const r=new this._dialogRefConstructor(n,e,i.id);if(t instanceof vl)e.attachTemplatePortal(new Ww(t,null,{$implicit:i.data,dialogRef:r}));else{const n=this._createInjector(i,r,e),s=e.attachComponentPortal(new Hw(t,i.viewContainerRef,n));r.componentInstance=s.instance}return r.updateSize(i.width,i.height).updatePosition(i.position),r}_createInjector(t,e,n){const i=t&&t.viewContainerRef&&t.viewContainerRef.injector,r=[{provide:this._dialogContainerType,useValue:n},{provide:this._dialogDataToken,useValue:t.data},{provide:this._dialogRefConstructor,useValue:e}];return!t.direction||i&&i.get(up,null,Ct.Optional)||r.push({provide:up,useValue:{value:t.direction,change:bd()}}),ao.create({parent:i||this._injector,providers:r})}_removeOpenDialog(t){const e=this.openDialogs.indexOf(t);e>-1&&(this.openDialogs.splice(e,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((t,e)=>{t?e.setAttribute("aria-hidden",t):e.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const e=t.parentElement.children;for(let n=e.length-1;n>-1;n--){let i=e[n];i===t||"SCRIPT"===i.nodeName||"STYLE"===i.nodeName||i.hasAttribute("aria-live")||(this._ariaHiddenElements.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}}}_closeDialogs(t){let e=t.length;for(;e--;)t[e].close()}}return t.\u0275fac=function(e){return new(e||t)(ko(gk),ko(ao),ko(void 0),ko(void 0),ko(ik),ko(void 0),ko(Qn),ko(Qn),ko(Kn))},t.\u0275dir=Zt({type:t}),t})(),Ik=(()=>{class t extends Bk{constructor(t,e,n,i,r,s,o){super(t,e,i,s,o,r,Fk,Dk,Mk)}}return t.\u0275fac=function(e){return new(e||t)(pi(gk),pi(ao),pi(Mc,8),pi(Tk,8),pi(Pk),pi(t,12),pi(ik))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})(),Nk=0,Lk=(()=>{class t{constructor(t,e,n){this.dialogRef=t,this._elementRef=e,this._dialog=n,this.type="button"}ngOnInit(){this.dialogRef||(this.dialogRef=jk(this._elementRef,this._dialog.openDialogs))}ngOnChanges(t){const e=t._matDialogClose||t._matDialogCloseResult;e&&(this.dialogResult=e.currentValue)}_onButtonClick(t){Ok(this.dialogRef,0===t.screenX&&0===t.screenY?"keyboard":"mouse",this.dialogResult)}}return t.\u0275fac=function(e){return new(e||t)(ko(Fk,8),ko(ja),ko(Ik))},t.\u0275dir=Zt({type:t,selectors:[["","mat-dialog-close",""],["","matDialogClose",""]],hostVars:2,hostBindings:function(t,e){1&t&&Lo("click",function(t){return e._onButtonClick(t)}),2&t&&wo("aria-label",e.ariaLabel||null)("type",e.type)},inputs:{type:"type",dialogResult:["mat-dialog-close","dialogResult"],ariaLabel:["aria-label","ariaLabel"],_matDialogClose:["matDialogClose","_matDialogClose"]},exportAs:["matDialogClose"],features:[he]}),t})(),$k=(()=>{class t{constructor(t,e,n){this._dialogRef=t,this._elementRef=e,this._dialog=n,this.id="mat-dialog-title-"+Nk++}ngOnInit(){this._dialogRef||(this._dialogRef=jk(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{const t=this._dialogRef._containerInstance;t&&!t._ariaLabelledBy&&(t._ariaLabelledBy=this.id)})}}return t.\u0275fac=function(e){return new(e||t)(ko(Fk,8),ko(ja),ko(Ik))},t.\u0275dir=Zt({type:t,selectors:[["","mat-dialog-title",""],["","matDialogTitle",""]],hostAttrs:[1,"mat-dialog-title"],hostVars:1,hostBindings:function(t,e){2&t&&ga("id",e.id)},inputs:{id:"id"},exportAs:["matDialogTitle"]}),t})(),zk=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Zt({type:t,selectors:[["","mat-dialog-content",""],["mat-dialog-content"],["","matDialogContent",""]],hostAttrs:[1,"mat-dialog-content"]}),t})();function jk(t,e){let n=t.nativeElement.parentElement;for(;n&&!n.classList.contains("mat-dialog-container");)n=n.parentElement;return n?e.find(t=>t.id===n.id):null}let Uk=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({providers:[Ik,Rk],imports:[[wk,Zw,rv],rv]}),t})();const Vk=["*"];function qk(t){return Error(`Unable to find icon with the name "${t}"`)}function Hk(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function Wk(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}class Gk{constructor(t,e,n){this.url=t,this.svgText=e,this.options=n}}let Xk=(()=>{class t{constructor(t,e,n,i){this._httpClient=t,this._sanitizer=e,this._errorHandler=i,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=n}addSvgIcon(t,e,n){return this.addSvgIconInNamespace("",t,e,n)}addSvgIconLiteral(t,e,n){return this.addSvgIconLiteralInNamespace("",t,e,n)}addSvgIconInNamespace(t,e,n,i){return this._addSvgIconConfig(t,e,new Gk(n,null,i))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,e,n,i){const r=this._sanitizer.sanitize(tr.HTML,n);if(!r)throw Wk(n);return this._addSvgIconConfig(t,e,new Gk("",r,i))}addSvgIconSet(t,e){return this.addSvgIconSetInNamespace("",t,e)}addSvgIconSetLiteral(t,e){return this.addSvgIconSetLiteralInNamespace("",t,e)}addSvgIconSetInNamespace(t,e,n){return this._addSvgIconSetConfig(t,new Gk(e,null,n))}addSvgIconSetLiteralInNamespace(t,e,n){const i=this._sanitizer.sanitize(tr.HTML,e);if(!i)throw Wk(e);return this._addSvgIconSetConfig(t,new Gk("",i,n))}registerFontClassAlias(t,e=t){return this._fontCssClassesByAlias.set(t,e),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const e=this._sanitizer.sanitize(tr.RESOURCE_URL,t);if(!e)throw Hk(t);const n=this._cachedIconsByUrl.get(e);return n?bd(Yk(n)):this._loadSvgIconFromConfig(new Gk(t,null)).pipe(xp(t=>this._cachedIconsByUrl.set(e,t)),F(t=>Yk(t)))}getNamedSvgIcon(t,e=""){const n=Kk(e,t);let i=this._svgIconConfigs.get(n);if(i)return this._getSvgFromConfig(i);if(i=this._getIconConfigFromResolvers(e,t),i)return this._svgIconConfigs.set(n,i),this._getSvgFromConfig(i);const r=this._iconSetConfigs.get(e);return r?this._getSvgFromIconSetConfigs(t,r):tp(qk(n))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?bd(Yk(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe(F(t=>Yk(t)))}_getSvgFromIconSetConfigs(t,e){const n=this._extractIconWithNameFromAnySet(t,e);return n?bd(n):ZC(e.filter(t=>!t.svgText).map(t=>this._loadSvgIconSetFromConfig(t).pipe(O_(e=>{const n=this._sanitizer.sanitize(tr.RESOURCE_URL,t.url);return this._errorHandler.handleError(new Error(`Loading icon set URL: ${n} failed: ${e.message}`)),bd(null)})))).pipe(F(()=>{const n=this._extractIconWithNameFromAnySet(t,e);if(!n)throw qk(t);return n}))}_extractIconWithNameFromAnySet(t,e){for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.svgText&&i.svgText.indexOf(t)>-1){const e=this._svgElementFromConfig(i),n=this._extractSvgIconFromSet(e,t,i.options);if(n)return n}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe(xp(e=>t.svgText=e),F(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?bd(null):this._fetchIcon(t).pipe(xp(e=>t.svgText=e))}_extractSvgIconFromSet(t,e,n){const i=t.querySelector(`[id="${e}"]`);if(!i)return null;const r=i.cloneNode(!0);if(r.removeAttribute("id"),"svg"===r.nodeName.toLowerCase())return this._setSvgAttributes(r,n);if("symbol"===r.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(r),n);const s=this._svgElementFromString("<svg></svg>");return s.appendChild(r),this._setSvgAttributes(s,n)}_svgElementFromString(t){const e=this._document.createElement("DIV");e.innerHTML=t;const n=e.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(t){const e=this._svgElementFromString("<svg></svg>"),n=t.attributes;for(let i=0;i<n.length;i++){const{name:t,value:r}=n[i];"id"!==t&&e.setAttribute(t,r)}for(let i=0;i<t.childNodes.length;i++)t.childNodes[i].nodeType===this._document.ELEMENT_NODE&&e.appendChild(t.childNodes[i].cloneNode(!0));return e}_setSvgAttributes(t,e){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),e&&e.viewBox&&t.setAttribute("viewBox",e.viewBox),t}_fetchIcon(t){var e;const{url:n,options:i}=t,r=null!==(e=null==i?void 0:i.withCredentials)&&void 0!==e&&e;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const s=this._sanitizer.sanitize(tr.RESOURCE_URL,n);if(!s)throw Hk(n);const o=this._inProgressUrlFetches.get(s);if(o)return o;const a=this._httpClient.get(s,{responseType:"text",withCredentials:r}).pipe(I_(()=>this._inProgressUrlFetches.delete(s)),et());return this._inProgressUrlFetches.set(s,a),a}_addSvgIconConfig(t,e,n){return this._svgIconConfigs.set(Kk(t,e),n),this}_addSvgIconSetConfig(t,e){const n=this._iconSetConfigs.get(t);return n?n.push(e):this._iconSetConfigs.set(t,[e]),this}_svgElementFromConfig(t){if(!t.svgElement){const e=this._svgElementFromString(t.svgText);this._setSvgAttributes(e,t.options),t.svgElement=e}return t.svgElement}_getIconConfigFromResolvers(t,e){for(let i=0;i<this._resolvers.length;i++){const r=this._resolvers[i](e,t);if(r)return(n=r).url&&n.options?new Gk(r.url,null,r.options):new Gk(r,null)}var n}}return t.\u0275fac=function(e){return new(e||t)(pi(Vd,8),pi(pd),pi(gc,8),pi(or))},t.\u0275prov=pt({factory:function(){return new t(pi(Vd,8),pi(pd),pi(gc,8),pi(or))},token:t,providedIn:"root"}),t})();function Yk(t){return t.cloneNode(!0)}function Kk(t,e){return t+":"+e}const Zk=ov(class{constructor(t){this._elementRef=t}}),Qk=new Kn("mat-icon-location",{providedIn:"root",factory:function(){const t=mi(gc),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),Jk=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],tD=Jk.map(t=>`[${t}]`).join(", "),eD=/^url\(['"]?#(.*?)['"]?\)$/;let nD=(()=>{class t extends Zk{constructor(t,e,n,i,r){super(t),this._iconRegistry=e,this._location=i,this._errorHandler=r,this._inline=!1,this._currentIconFetch=p.EMPTY,n||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=yf(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const e=this._cleanupFontValue(t);e!==this._fontSet&&(this._fontSet=e,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const e=this._cleanupFontValue(t);e!==this._fontIcon&&(this._fontIcon=e,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const t=this._location.getPathname();t!==this._previousPath&&(this._previousPath=t,this._prependPathToReferences(t))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const e=t.querySelectorAll("style");for(let i=0;i<e.length;i++)e[i].textContent+=" ";const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let e=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();e--;){const n=t.childNodes[e];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||t.removeChild(n)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,e=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();e!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),e&&t.classList.add(e),this._previousFontSetClass=e),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const e=this._elementsWithExternalReferences;e&&e.forEach((e,n)=>{e.forEach(e=>{n.setAttribute(e.name,`url('${t}#${e.value}')`)})})}_cacheChildrenWithExternalReferences(t){const e=t.querySelectorAll(tD),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let i=0;i<e.length;i++)Jk.forEach(t=>{const r=e[i],s=r.getAttribute(t),o=s?s.match(eD):null;if(o){let e=n.get(r);e||(e=[],n.set(r,e)),e.push({name:t,value:o[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[e,n]=this._splitIconName(t);e&&(this._svgNamespace=e),n&&(this._svgName=n),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(n,e).pipe(Fp(1)).subscribe(t=>this._setSvgElement(t),t=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${e}:${n}! ${t.message}`))})}}}return t.\u0275fac=function(e){return new(e||t)(ko(ja),ko(Xk),Gn("aria-hidden"),ko(Qk),ko(or))},t.\u0275cmp=Ht({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,e){2&t&&(wo("data-mat-icon-type",e._usingFontIcon()?"font":"svg")("data-mat-icon-name",e._svgName||e.fontIcon)("data-mat-icon-namespace",e._svgNamespace||e.fontSet),ta("mat-icon-inline",e.inline)("mat-icon-no-color","primary"!==e.color&&"accent"!==e.color&&"warn"!==e.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[uo],ngContentSelectors:Vk,decls:1,vars:0,template:function(t,e){1&t&&(Ho(),Wo(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),t})(),iD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[rv],rv]}),t})(),rD=(()=>{class t{constructor(t){this.dialogRef=t,this.disableAnimation=!0}ngAfterViewInit(){setTimeout(()=>{this.disableAnimation=!1})}close(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(ko(Fk))},t.\u0275cmp=Ht({type:t,selectors:[["agc-help-modal"]],decls:42,vars:1,consts:[[1,"agc-about","wrapper"],[1,"container"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"content"],["mat-dialog-title","",1,"title"],[1,"mat-typography"],[1,"help-title"],[1,"help-text"],[1,"gif-container"],["src","assets/images/help-year-range-selector.gif","alt","help-year-range-selector.gif"],["src","assets/images/help-variables-filterby3.gif","alt","help-variables-filterby3.gif"],["src","assets/images/help-filter-controls.gif","alt","help-filter-controls.gif"],["src","assets/images/help-pan-zoom.gif","alt","help-pan-zoom.gif"]],template:function(t,e){1&t&&(Fo(0,"div",0),Fo(1,"div",1),Fo(2,"div",2),Fo(3,"mat-icon",3),Lo("click",function(){return e.close()}),fa(4,"clear"),Oo(),Oo(),Fo(5,"div",4),Fo(6,"h2",5),fa(7,"Help"),Oo(),Fo(8,"mat-dialog-content",6),Fo(9,"mat-accordion"),Fo(10,"mat-expansion-panel"),Fo(11,"mat-expansion-panel-header"),Fo(12,"mat-panel-title",7),fa(13,"SELECT YEAR RANGE"),Oo(),Oo(),Fo(14,"div",8),fa(15," Set year ranges by clicking with your mouse cursor then dragging and releasing. Click again to reset. "),Oo(),Fo(16,"div",9),Mo(17,"img",10),Oo(),Oo(),Fo(18,"mat-expansion-panel"),Fo(19,"mat-expansion-panel-header"),Fo(20,"mat-panel-title",7),fa(21,"SELECT VARIABLES & FILTERS"),Oo(),Oo(),Fo(22,"div",8),fa(23," Click on Variables and filter by items. SHIFT + CLICK to add more items. "),Oo(),Fo(24,"div",9),Mo(25,"img",11),Oo(),Oo(),Fo(26,"mat-expansion-panel"),Fo(27,"mat-expansion-panel-header"),Fo(28,"mat-panel-title",7),fa(29,"USE CONTROLS TO FILTER"),Oo(),Oo(),Fo(30,"div",8),fa(31," Click on controls to update visualizations. Use SHIFT + CLICK to add more items. "),Oo(),Fo(32,"div",9),Mo(33,"img",12),Oo(),Oo(),Fo(34,"mat-expansion-panel"),Fo(35,"mat-expansion-panel-header"),Fo(36,"mat-panel-title",7),fa(37,"PAN AND ZOOM"),Oo(),Oo(),Fo(38,"div",8),fa(39," Hold down SHIFT key then use the scroll-wheel to zoom. SHIFT + CLICK (Hold) to pan. "),Oo(),Fo(40,"div",9),Mo(41,"img",13),Oo(),Oo(),Oo(),Oo(),Oo(),Oo(),Oo()),2&t&&Do("@.disabled",e.disableAnimation)},directives:[nD,$k,zk,gC,hC,pC,mC],styles:[".mat-dialog-container{padding:0;overflow:hidden}  .mat-expansion-panel-header{background-color:#fafafa}.agc-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:2rem;min-height:43rem}.agc-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem}.agc-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]   .help-title[_ngcontent-%COMP%]{font-weight:700;font-size:.875rem;line-height:1.5rem}.agc-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]{font-size:1rem}.agc-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]   .gif-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding:2rem}.agc-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{float:right;margin-top:1rem;margin-right:1rem;cursor:pointer}.agc-about.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:2.25rem;margin-bottom:.5rem;text-align:left;font-weight:lighter}"]}),t})();function sD(t,e){if(1&t){const t=Ro();Fo(0,"div",17),Lo("click",function(){const e=Be(t).index;return Vo().setSlide(e)}),Oo()}if(2&t){const t=e.index;ta("active",Vo().currentSlide===t)}}let oD=(()=>{class t{constructor(t){this.dialogRef=t,this.slides=[{title:"Select year range...",text:"Set year ranges by clicking with your mouse cursor then dragging and releasing. Click again to reset.",img:"assets/images/help-year-range-selector.gif"},{title:"Select variables and filters...",text:"Click on Variables and filter by items.  SHIFT + CLICK to add more items.",img:"assets/images/help-variables-filterby3.gif"},{title:"Use controls to filter...",text:"Click on controls to update visualizations.  Use SHIFT + CLICK to add more items.",img:"assets/images/help-filter-controls.gif"},{title:"Pan and zoom...",text:"Hold down SHIFT key then use the scroll-wheel to zoom.  SHIFT + CLICK (Hold) to pan.",img:"assets/images/help-pan-zoom.gif"}],this.currentSlide=0}close(){this.dialogRef.close()}incrementSlide(){this.currentSlide!==this.slides.length-1&&(this.currentSlide=this.currentSlide+1)}decrementSlide(){0!==this.currentSlide&&(this.currentSlide=this.currentSlide-1)}setSlide(t){t<0||t>=this.slides.length||(this.currentSlide=t)}}return t.\u0275fac=function(e){return new(e||t)(ko(Fk))},t.\u0275cmp=Ht({type:t,selectors:[["agc-help-tour-modal"]],decls:24,vars:9,consts:[[1,"agc-tour","wrapper"],[1,"container"],[1,"close"],[1,"material-icons","close-icon",3,"click"],[1,"content"],["mat-dialog-title","",1,"title"],[1,"mat-typography"],[1,"help-text"],[1,"carousel"],[1,"material-icons","chevron-icon",3,"click"],[1,"gif-container"],[3,"src","alt"],[1,"slide-row"],[1,"slide-dots"],["class","slide",3,"active","click",4,"ngFor","ngForOf"],[1,"button-row"],[1,"btn-outline",3,"click"],[1,"slide",3,"click"]],template:function(t,e){1&t&&(Fo(0,"div",0),Fo(1,"div",1),Fo(2,"div",2),Fo(3,"mat-icon",3),Lo("click",function(){return e.close()}),fa(4,"clear"),Oo(),Oo(),Fo(5,"div",4),Fo(6,"h2",5),fa(7),Oo(),Fo(8,"mat-dialog-content",6),Fo(9,"div",7),fa(10),Oo(),Fo(11,"div",8),Fo(12,"mat-icon",9),Lo("click",function(){return e.decrementSlide()}),fa(13,"chevron_left"),Oo(),Fo(14,"div",10),Mo(15,"img",11),Oo(),Fo(16,"mat-icon",9),Lo("click",function(){return e.incrementSlide()}),fa(17,"chevron_right"),Oo(),Oo(),Fo(18,"div",12),Fo(19,"div",13),Ao(20,sD,1,2,"div",14),Oo(),Oo(),Fo(21,"div",15),Fo(22,"button",16),Lo("click",function(){return e.close()}),fa(23,"Got it!"),Oo(),Oo(),Oo(),Oo(),Oo(),Oo()),2&t&&(Kr(7),pa(e.slides[e.currentSlide].title),Kr(3),pa(e.slides[e.currentSlide].text),Kr(2),ta("disabled",0===e.currentSlide),Kr(3),Do("src",e.slides[e.currentSlide].img,er)("alt",e.slides[e.currentSlide].img.split("/")[6]),Kr(1),ta("disabled",e.currentSlide===e.slides.length-1),Kr(4),Do("ngForOf",e.slides))},directives:[nD,$k,zk,yh],styles:[".mat-dialog-container{padding:0;overflow:hidden}  .mat-expansion-panel-header{background-color:#fafafa}.agc-tour.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:2rem}.agc-tour.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .mat-dialog-content[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem;overflow:hidden}.agc-tour.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]   .close-icon[_ngcontent-%COMP%]{float:right;margin-top:1rem;margin-right:1rem;cursor:pointer}.agc-tour.wrapper[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:2.25rem;margin-bottom:.5rem;text-align:left;font-weight:lighter}.agc-tour.wrapper[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.agc-tour.wrapper[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]{font-size:1rem}.agc-tour.wrapper[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .gif-container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding:2rem}.agc-tour.wrapper[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .chevron-icon[_ngcontent-%COMP%]{font-size:4rem;height:4rem;width:4rem;cursor:pointer}.agc-tour.wrapper[_ngcontent-%COMP%]   .carousel[_ngcontent-%COMP%]   .chevron-icon.disabled[_ngcontent-%COMP%]{color:#d3d3d3}.agc-tour.wrapper[_ngcontent-%COMP%]   .slide-row[_ngcontent-%COMP%], .agc-tour.wrapper[_ngcontent-%COMP%]   .slide-row[_ngcontent-%COMP%]   .slide-dots[_ngcontent-%COMP%]{justify-content:space-around;display:flex}.agc-tour.wrapper[_ngcontent-%COMP%]   .slide-row[_ngcontent-%COMP%]   .slide-dots[_ngcontent-%COMP%]{align-items:center;width:9rem}.agc-tour.wrapper[_ngcontent-%COMP%]   .slide-row[_ngcontent-%COMP%]   .slide-dots[_ngcontent-%COMP%]   .slide[_ngcontent-%COMP%]{width:1rem;height:1rem;border-radius:50%;border:1px solid #a9a9a9;background-color:#fff;cursor:pointer}.agc-tour.wrapper[_ngcontent-%COMP%]   .slide-row[_ngcontent-%COMP%]   .slide-dots[_ngcontent-%COMP%]   .slide.active[_ngcontent-%COMP%]{background-color:#2a4d87}.agc-tour.wrapper[_ngcontent-%COMP%]   .button-row[_ngcontent-%COMP%]{justify-content:flex-end;display:flex}.agc-tour.wrapper[_ngcontent-%COMP%]   .button-row[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]{border-radius:5px;border:1px solid #6880aa;color:#6880aa;background-color:#fff;width:9rem;height:2.5rem;font-size:1rem;cursor:pointer}.agc-tour.wrapper[_ngcontent-%COMP%]   .button-row[_ngcontent-%COMP%]   .btn-outline[_ngcontent-%COMP%]:hover{background-color:#6880aa;color:#fff}"],changeDetection:0}),t})();const aD="HELP_POPUP_SHOWN";let lD=(()=>{let t=class extends ME{get hasShownHelpModal$(){return this.state$.pipe(OC("hasShownHelpModal"))}ngxsOnInit(){var t;super.ngxsOnInit();const e="true"===(null===(t=localStorage.getItem(aD))||void 0===t?void 0:t.toLowerCase());this.patchState({hasShownHelpModal:e})}setHasShownHelpModal(t){localStorage.setItem(aD,t.toString()),this.ctx.patchState({hasShownHelpModal:t})}};return t.\u0275fac=function(){let e;return function(n){return(e||(e=Hn(t)))(n||t)}}(),t.\u0275prov=pt({token:t,factory:t.\u0275fac}),MC([wE()],t.prototype,"hasShownHelpModal$",null),MC([AE()],t.prototype,"setHasShownHelpModal",null),t=MC([kE(),iE({name:"page",defaults:{hasShownHelpModal:!1}})],t),t})();function uD(t,e){if(1&t&&(un(),Mo(0,"circle",3)),2&t){const t=Vo();Jo("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),wo("r",t._getCircleRadius())}}function cD(t,e){if(1&t&&(un(),Mo(0,"circle",3)),2&t){const t=Vo();Jo("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),wo("r",t._getCircleRadius())}}function hD(t,e){if(1&t&&(un(),Mo(0,"circle",3)),2&t){const t=Vo();Jo("animation-name","mat-progress-spinner-stroke-rotate-"+t._spinnerAnimationLabel)("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),wo("r",t._getCircleRadius())}}function dD(t,e){if(1&t&&(un(),Mo(0,"circle",3)),2&t){const t=Vo();Jo("stroke-dashoffset",t._getStrokeDashOffset(),"px")("stroke-dasharray",t._getStrokeCircumference(),"px")("stroke-width",t._getCircleStrokeWidth(),"%"),wo("r",t._getCircleRadius())}}const fD=".mat-progress-spinner{display:block;position:relative;overflow:hidden}.mat-progress-spinner svg{position:absolute;transform:rotate(-90deg);top:0;left:0;transform-origin:center;overflow:visible}.mat-progress-spinner circle{fill:transparent;transform-origin:center;transition:stroke-dashoffset 225ms linear}._mat-animation-noopable.mat-progress-spinner circle{transition:none;animation:none}.cdk-high-contrast-active .mat-progress-spinner circle{stroke:currentColor;stroke:CanvasText}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{animation:mat-progress-spinner-linear-rotate 2000ms linear infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition-property:stroke;animation-duration:4000ms;animation-timing-function:cubic-bezier(0.35, 0, 0.25, 1);animation-iteration-count:infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-animation[mode=indeterminate] circle{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{animation:mat-progress-spinner-stroke-rotate-fallback 10000ms cubic-bezier(0.87, 0.03, 0.33, 1) infinite}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] svg{transition:none;animation:none}.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition-property:stroke}._mat-animation-noopable.mat-progress-spinner.mat-progress-spinner-indeterminate-fallback-animation[mode=indeterminate] circle{transition:none;animation:none}@keyframes mat-progress-spinner-linear-rotate{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes mat-progress-spinner-stroke-rotate-100{0%{stroke-dashoffset:268.606171575px;transform:rotate(0)}12.5%{stroke-dashoffset:56.5486677px;transform:rotate(0)}12.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(72.5deg)}25%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(72.5deg)}25.0001%{stroke-dashoffset:268.606171575px;transform:rotate(270deg)}37.5%{stroke-dashoffset:56.5486677px;transform:rotate(270deg)}37.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(161.5deg)}50%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(161.5deg)}50.0001%{stroke-dashoffset:268.606171575px;transform:rotate(180deg)}62.5%{stroke-dashoffset:56.5486677px;transform:rotate(180deg)}62.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(251.5deg)}75%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(251.5deg)}75.0001%{stroke-dashoffset:268.606171575px;transform:rotate(90deg)}87.5%{stroke-dashoffset:56.5486677px;transform:rotate(90deg)}87.5001%{stroke-dashoffset:56.5486677px;transform:rotateX(180deg) rotate(341.5deg)}100%{stroke-dashoffset:268.606171575px;transform:rotateX(180deg) rotate(341.5deg)}}@keyframes mat-progress-spinner-stroke-rotate-fallback{0%{transform:rotate(0deg)}25%{transform:rotate(1170deg)}50%{transform:rotate(2340deg)}75%{transform:rotate(3510deg)}100%{transform:rotate(4680deg)}}\n",pD=ov(class{constructor(t){this._elementRef=t}},"primary"),mD=new Kn("mat-progress-spinner-default-options",{providedIn:"root",factory:function(){return{diameter:100}}});class gD extends pD{constructor(t,e,n,i,r){super(t),this._document=n,this._diameter=100,this._value=0,this._fallbackAnimation=!1,this.mode="determinate";const s=gD._diameters;this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),s.has(n.head)||s.set(n.head,new Set([100])),this._fallbackAnimation=e.EDGE||e.TRIDENT,this._noopAnimations="NoopAnimations"===i&&!!r&&!r._forceAnimations,r&&(r.diameter&&(this.diameter=r.diameter),r.strokeWidth&&(this.strokeWidth=r.strokeWidth))}get diameter(){return this._diameter}set diameter(t){this._diameter=vf(t),this._spinnerAnimationLabel=this._getSpinnerAnimationLabel(),!this._fallbackAnimation&&this._styleRoot&&this._attachStyleNode()}get strokeWidth(){return this._strokeWidth||this.diameter/10}set strokeWidth(t){this._strokeWidth=vf(t)}get value(){return"determinate"===this.mode?this._value:0}set value(t){this._value=Math.max(0,Math.min(100,vf(t)))}ngOnInit(){const t=this._elementRef.nativeElement;this._styleRoot=pf(t)||this._document.head,this._attachStyleNode(),t.classList.add(`mat-progress-spinner-indeterminate${this._fallbackAnimation?"-fallback":""}-animation`)}_getCircleRadius(){return(this.diameter-10)/2}_getViewBox(){const t=2*this._getCircleRadius()+this.strokeWidth;return`0 0 ${t} ${t}`}_getStrokeCircumference(){return 2*Math.PI*this._getCircleRadius()}_getStrokeDashOffset(){return"determinate"===this.mode?this._getStrokeCircumference()*(100-this._value)/100:this._fallbackAnimation&&"indeterminate"===this.mode?.2*this._getStrokeCircumference():null}_getCircleStrokeWidth(){return this.strokeWidth/this.diameter*100}_attachStyleNode(){const t=this._styleRoot,e=this._diameter,n=gD._diameters;let i=n.get(t);if(!i||!i.has(e)){const r=this._document.createElement("style");r.setAttribute("mat-spinner-animation",this._spinnerAnimationLabel),r.textContent=this._getAnimationText(),t.appendChild(r),i||(i=new Set,n.set(t,i)),i.add(e)}}_getAnimationText(){const t=this._getStrokeCircumference();return"\n @keyframes mat-progress-spinner-stroke-rotate-DIAMETER {\n    0%      { stroke-dashoffset: START_VALUE;  transform: rotate(0); }\n    12.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(0); }\n    12.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(72.5deg); }\n    25%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(72.5deg); }\n\n    25.0001%   { stroke-dashoffset: START_VALUE;  transform: rotate(270deg); }\n    37.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(270deg); }\n    37.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(161.5deg); }\n    50%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(161.5deg); }\n\n    50.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(180deg); }\n    62.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(180deg); }\n    62.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(251.5deg); }\n    75%     { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(251.5deg); }\n\n    75.0001%  { stroke-dashoffset: START_VALUE;  transform: rotate(90deg); }\n    87.5%   { stroke-dashoffset: END_VALUE;    transform: rotate(90deg); }\n    87.5001%  { stroke-dashoffset: END_VALUE;    transform: rotateX(180deg) rotate(341.5deg); }\n    100%    { stroke-dashoffset: START_VALUE;  transform: rotateX(180deg) rotate(341.5deg); }\n  }\n".replace(/START_VALUE/g,""+.95*t).replace(/END_VALUE/g,""+.2*t).replace(/DIAMETER/g,`${this._spinnerAnimationLabel}`)}_getSpinnerAnimationLabel(){return this.diameter.toString().replace(".","_")}}gD.\u0275fac=function(t){return new(t||gD)(ko(ja),ko(uf),ko(gc,8),ko(Gy,8),ko(mD))},gD.\u0275cmp=Ht({type:gD,selectors:[["mat-progress-spinner"]],hostAttrs:["role","progressbar","tabindex","-1",1,"mat-progress-spinner"],hostVars:10,hostBindings:function(t,e){2&t&&(wo("aria-valuemin","determinate"===e.mode?0:null)("aria-valuemax","determinate"===e.mode?100:null)("aria-valuenow","determinate"===e.mode?e.value:null)("mode",e.mode),Jo("width",e.diameter,"px")("height",e.diameter,"px"),ta("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color",mode:"mode",diameter:"diameter",strokeWidth:"strokeWidth",value:"value"},exportAs:["matProgressSpinner"],features:[uo],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(un(),Fo(0,"svg",0),Ao(1,uD,1,9,"circle",1),Ao(2,cD,1,7,"circle",2),Oo()),2&t&&(Jo("width",e.diameter,"px")("height",e.diameter,"px"),Do("ngSwitch","indeterminate"===e.mode),wo("viewBox",e._getViewBox()),Kr(1),Do("ngSwitchCase",!0),Kr(1),Do("ngSwitchCase",!1))},directives:[Ch,Ah],styles:[fD],encapsulation:2,changeDetection:0}),gD._diameters=new WeakMap;let yD=(()=>{class t extends gD{constructor(t,e,n,i,r){super(t,e,n,i,r),this.mode="indeterminate"}}return t.\u0275fac=function(e){return new(e||t)(ko(ja),ko(uf),ko(gc,8),ko(Gy,8),ko(mD))},t.\u0275cmp=Ht({type:t,selectors:[["mat-spinner"]],hostAttrs:["role","progressbar","mode","indeterminate",1,"mat-spinner","mat-progress-spinner"],hostVars:6,hostBindings:function(t,e){2&t&&(Jo("width",e.diameter,"px")("height",e.diameter,"px"),ta("_mat-animation-noopable",e._noopAnimations))},inputs:{color:"color"},features:[uo],decls:3,vars:8,consts:[["preserveAspectRatio","xMidYMid meet","focusable","false","aria-hidden","true",3,"ngSwitch"],["cx","50%","cy","50%",3,"animation-name","stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%",3,"stroke-dashoffset","stroke-dasharray","stroke-width",4,"ngSwitchCase"],["cx","50%","cy","50%"]],template:function(t,e){1&t&&(un(),Fo(0,"svg",0),Ao(1,hD,1,9,"circle",1),Ao(2,dD,1,7,"circle",2),Oo()),2&t&&(Jo("width",e.diameter,"px")("height",e.diameter,"px"),Do("ngSwitch","indeterminate"===e.mode),wo("viewBox",e._getViewBox()),Kr(1),Do("ngSwitchCase",!0),Kr(1),Do("ngSwitchCase",!1))},directives:[Ch,Ah],styles:[fD],encapsulation:2,changeDetection:0}),t})(),vD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[rv,Rh],rv]}),t})();const _D=["mat-button",""],bD=["*"],xD=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],wD=ov(sv(av(class{constructor(t){this._elementRef=t}})));let CD=(()=>{class t extends wD{constructor(t,e,n){super(t),this._focusMonitor=e,this._animationMode=n,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const i of xD)this._hasHostAttributes(i)&&this._getHostElement().classList.add(i);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,e){t?this._focusMonitor.focusVia(this._getHostElement(),t,e):this._getHostElement().focus(e)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(t=>this._getHostElement().hasAttribute(t))}}return t.\u0275fac=function(e){return new(e||t)(ko(ja),ko(im),ko(Gy,8))},t.\u0275cmp=Ht({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,e){if(1&t&&lu(vv,5),2&t){let t;au(t=cu())&&(e.ripple=t.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,e){2&t&&(wo("disabled",e.disabled||null),ta("_mat-animation-noopable","NoopAnimations"===e._animationMode)("mat-button-disabled",e.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[uo],attrs:_D,ngContentSelectors:bD,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,e){1&t&&(Ho(),Fo(0,"span",0),Wo(1),Oo(),Mo(2,"span",1),Mo(3,"span",2)),2&t&&(Kr(2),ta("mat-button-ripple-round",e.isRoundButton||e.isIconButton),Do("matRippleDisabled",e._isRippleDisabled())("matRippleCentered",e.isIconButton)("matRippleTrigger",e._getHostElement()))},directives:[vv],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),t})(),AD=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[_v,rv],rv]}),t})();var ED=n(7266);function kD(){return Xf(b)}var DD,SD=(DD=function(t,e){return(DD=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}DD(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),FD=Object.prototype.hasOwnProperty;function OD(t,e){return FD.call(t,e)}function MD(t){if(Array.isArray(t)){for(var e=new Array(t.length),n=0;n<e.length;n++)e[n]=""+n;return e}if(Object.keys)return Object.keys(t);for(var i in e=[],t)OD(t,i)&&e.push(i);return e}function TD(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function PD(t){for(var e,n=0,i=t.length;n<i;){if(!((e=t.charCodeAt(n))>=48&&e<=57))return!1;n++}return!0}function RD(t){return-1===t.indexOf("/")&&-1===t.indexOf("~")?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function BD(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function ID(t){if(void 0===t)return!0;if(t)if(Array.isArray(t)){for(var e=0,n=t.length;e<n;e++)if(ID(t[e]))return!0}else if("object"==typeof t){var i=MD(t),r=i.length;for(e=0;e<r;e++)if(ID(t[i[e]]))return!0}return!1}function ND(t,e){var n=[t];for(var i in e){var r="object"==typeof e[i]?JSON.stringify(e[i],null,2):e[i];void 0!==r&&n.push(i+": "+r)}return n.join("\n")}var LD=function(t){function e(e,n,i,r,s){var o=this.constructor,a=t.call(this,ND(e,{name:n,index:i,operation:r,tree:s}))||this;return a.name=n,a.index=i,a.operation=r,a.tree=s,Object.setPrototypeOf(a,o.prototype),a.message=ND(e,{name:n,index:i,operation:r,tree:s}),a}return SD(e,t),e}(Error),$D=LD,zD=TD,jD={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var i=t[e];return delete t[e],{newDocument:n,removed:i}},replace:function(t,e,n){var i=t[e];return t[e]=this.value,{newDocument:n,removed:i}},move:function(t,e,n){var i=VD(n,this.path);i&&(i=TD(i));var r=qD(n,{op:"remove",path:this.from}).removed;return qD(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(t,e,n){var i=VD(n,this.from);return qD(n,{op:"add",path:this.path,value:TD(i)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:YD(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}},UD={add:function(t,e,n){return PD(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){return{newDocument:n,removed:t.splice(e,1)[0]}},replace:function(t,e,n){var i=t[e];return t[e]=this.value,{newDocument:n,removed:i}},move:jD.move,copy:jD.copy,test:jD.test,_get:jD._get};function VD(t,e){if(""==e)return t;var n={op:"_get",path:e};return qD(t,n),n.value}function qD(t,e,n,i,r,s){if(void 0===n&&(n=!1),void 0===i&&(i=!0),void 0===r&&(r=!0),void 0===s&&(s=0),n&&("function"==typeof n?n(e,0,t,e.path):GD(e,0)),""===e.path){var o={newDocument:t};if("add"===e.op)return o.newDocument=e.value,o;if("replace"===e.op)return o.newDocument=e.value,o.removed=t,o;if("move"===e.op||"copy"===e.op)return o.newDocument=VD(t,e.from),"move"===e.op&&(o.removed=t),o;if("test"===e.op){if(o.test=YD(t,e.value),!1===o.test)throw new $D("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return o.newDocument=t,o}if("remove"===e.op)return o.removed=t,o.newDocument=null,o;if("_get"===e.op)return e.value=t,o;if(n)throw new $D("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,e,t);return o}i||(t=TD(t));var a=(e.path||"").split("/"),l=t,u=1,c=a.length,h=void 0,d=void 0,f=void 0;for(f="function"==typeof n?n:GD;;){if(d=a[u],r&&"__proto__"==d)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===h&&(void 0===l[d]?h=a.slice(0,u).join("/"):u==c-1&&(h=e.path),void 0!==h&&f(e,0,t,h)),u++,Array.isArray(l)){if("-"===d)d=l.length;else{if(n&&!PD(d))throw new $D("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,e,t);PD(d)&&(d=~~d)}if(u>=c){if(n&&"add"===e.op&&d>l.length)throw new $D("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,e,t);if(!1===(o=UD[e.op].call(e,l,d,t)).test)throw new $D("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return o}}else if(d&&-1!=d.indexOf("~")&&(d=BD(d)),u>=c){if(!1===(o=jD[e.op].call(e,l,d,t)).test)throw new $D("Test operation failed","TEST_OPERATION_FAILED",s,e,t);return o}l=l[d]}}function HD(t,e,n,i,r){if(void 0===i&&(i=!0),void 0===r&&(r=!0),n&&!Array.isArray(e))throw new $D("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(t=TD(t));for(var s=new Array(e.length),o=0,a=e.length;o<a;o++)s[o]=qD(t,e[o],n,!0,r,o),t=s[o].newDocument;return s.newDocument=t,s}function WD(t,e,n){var i=qD(t,e);if(!1===i.test)throw new $D("Test operation failed","TEST_OPERATION_FAILED",n,e,t);return i.newDocument}function GD(t,e,n,i){if("object"!=typeof t||null===t||Array.isArray(t))throw new $D("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(!jD[t.op])throw new $D("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n);if("string"!=typeof t.path)throw new $D("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(0!==t.path.indexOf("/")&&t.path.length>0)throw new $D('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if(("move"===t.op||"copy"===t.op)&&"string"!=typeof t.from)throw new $D("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&void 0===t.value)throw new $D("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if(("add"===t.op||"replace"===t.op||"test"===t.op)&&ID(t.value))throw new $D("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n)if("add"==t.op){var r=t.path.split("/").length,s=i.split("/").length;if(r!==s+1&&r!==s)throw new $D("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if("replace"===t.op||"remove"===t.op||"_get"===t.op){if(t.path!==i)throw new $D("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if("move"===t.op||"copy"===t.op){var o=XD([{op:"_get",path:t.from,value:void 0}],n);if(o&&"OPERATION_PATH_UNRESOLVABLE"===o.name)throw new $D("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}function XD(t,e,n){try{if(!Array.isArray(t))throw new $D("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)HD(TD(e),TD(t),n||!0);else{n=n||GD;for(var i=0;i<t.length;i++)n(t[i],i,e,void 0)}}catch(r){if(r instanceof $D)return r;throw r}}function YD(t,e){if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){var n,i,r,s=Array.isArray(t),o=Array.isArray(e);if(s&&o){if((i=t.length)!=e.length)return!1;for(n=i;0!=n--;)if(!YD(t[n],e[n]))return!1;return!0}if(s!=o)return!1;var a=Object.keys(t);if((i=a.length)!==Object.keys(e).length)return!1;for(n=i;0!=n--;)if(!e.hasOwnProperty(a[n]))return!1;for(n=i;0!=n--;)if(!YD(t[r=a[n]],e[r]))return!1;return!0}return t!=t&&e!=e}var KD=new WeakMap,ZD=function(t){this.observers=new Map,this.obj=t},QD=function(t,e){this.callback=t,this.observer=e};function JD(t,e){e.unobserve()}function tS(t,e){var n,i=function(t){return KD.get(t)}(t);if(i){var r=function(t,e){return t.observers.get(e)}(i,e);n=r&&r.observer}else i=new ZD(t),KD.set(t,i);if(n)return n;if(n={},i.value=TD(t),e){n.callback=e,n.next=null;var s=function(){eS(n)},o=function(){clearTimeout(n.next),n.next=setTimeout(s)};"undefined"!=typeof window&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return n.patches=[],n.object=t,n.unobserve=function(){eS(n),clearTimeout(n.next),function(t,e){t.observers.delete(e.callback)}(i,n),"undefined"!=typeof window&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},i.observers.set(e,new QD(e,n)),n}function eS(t,e){void 0===e&&(e=!1);var n=KD.get(t.object);nS(n.value,t.object,t.patches,"",e),t.patches.length&&HD(n.value,t.patches);var i=t.patches;return i.length>0&&(t.patches=[],t.callback&&t.callback(i)),i}function nS(t,e,n,i,r){if(e!==t){"function"==typeof e.toJSON&&(e=e.toJSON());for(var s=MD(e),o=MD(t),a=!1,l=o.length-1;l>=0;l--){var u=t[h=o[l]];if(!OD(e,h)||void 0===e[h]&&void 0!==u&&!1===Array.isArray(e))Array.isArray(t)===Array.isArray(e)?(r&&n.push({op:"test",path:i+"/"+RD(h),value:TD(u)}),n.push({op:"remove",path:i+"/"+RD(h)}),a=!0):(r&&n.push({op:"test",path:i,value:t}),n.push({op:"replace",path:i,value:e}));else{var c=e[h];"object"==typeof u&&null!=u&&"object"==typeof c&&null!=c?nS(u,c,n,i+"/"+RD(h),r):u!==c&&(r&&n.push({op:"test",path:i+"/"+RD(h),value:TD(u)}),n.push({op:"replace",path:i+"/"+RD(h),value:TD(c)}))}}if(a||s.length!=o.length)for(l=0;l<s.length;l++){var h;OD(t,h=s[l])||void 0===e[h]||n.push({op:"add",path:i+"/"+RD(h),value:TD(e[h])})}}}function iS(t,e,n){void 0===n&&(n=!1);var i=[];return nS(t,e,i,"",n),i}Object.assign({},i,r,{JsonPatchError:LD,deepClone:TD,escapePathComponent:RD,unescapePathComponent:BD});var rS=n(5078),sS=n.n(rS),oS=n(198),aS=n(4141);const lS=function(t){const[e,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(t).slice(1,3);return{library:e,version:n}},uS="#fff",cS={background:"#333",title:{color:uS,subtitleColor:uS},style:{"guide-label":{fill:uS},"guide-title":{fill:uS}},axis:{domainColor:uS,gridColor:"#888",tickColor:uS}},hS="#4572a7",dS={background:"#fff",arc:{fill:hS},area:{fill:hS},line:{stroke:hS,strokeWidth:2},path:{stroke:hS},rect:{fill:hS},shape:{stroke:hS},symbol:{fill:hS,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},fS="#30a2da",pS="#cbcbcb",mS="#f0f0f0",gS="#333",yS={arc:{fill:fS},area:{fill:fS},axis:{domainColor:pS,grid:!0,gridColor:pS,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:pS,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:mS,group:{fill:mS},legend:{labelColor:gS,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:gS,titleFontSize:14,titlePadding:10},line:{stroke:fS,strokeWidth:2},path:{stroke:fS,strokeWidth:.5},rect:{fill:fS},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:fS},bar:{binSpacing:2,fill:fS,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},vS="#000",_S={group:{fill:"#e5e5e5"},arc:{fill:vS},area:{fill:vS},line:{stroke:vS},path:{stroke:vS},rect:{fill:vS},shape:{stroke:vS},symbol:{fill:vS,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},bS="Benton Gothic, sans-serif",xS="#82c6df",wS="Benton Gothic Bold, sans-serif",CS="normal",AS={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},ES={background:"#ffffff",title:{anchor:"start",color:"#000000",font:wS,fontSize:22,fontWeight:"normal"},arc:{fill:xS},area:{fill:xS},line:{stroke:xS,strokeWidth:2},path:{stroke:xS},rect:{fill:xS},shape:{stroke:xS},symbol:{fill:xS,size:30},axis:{labelFont:bS,labelFontSize:11.5,labelFontWeight:"normal",titleFont:wS,titleFontSize:13,titleFontWeight:CS},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:bS,labelFontSize:11.5,symbolType:"square",titleFont:wS,titleFontSize:13,titleFontWeight:CS},range:{category:AS["category-6"],diverging:AS["fireandice-6"],heatmap:AS["fire-7"],ordinal:AS["fire-7"],ramp:AS["fire-7"]}},kS="#ab5787",DS="#979797",SS={background:"#f9f9f9",arc:{fill:kS},area:{fill:kS},line:{stroke:kS},path:{stroke:kS},rect:{fill:kS},shape:{stroke:kS},symbol:{fill:kS,size:30},axis:{domainColor:DS,domainWidth:.5,gridWidth:.2,labelColor:DS,tickColor:DS,tickWidth:.2,titleColor:DS},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},FS="#3e5c69",OS={background:"#fff",arc:{fill:FS},area:{fill:FS},line:{stroke:FS},path:{stroke:FS},rect:{fill:FS},shape:{stroke:FS},symbol:{fill:FS},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},MS="#1696d2",TS="#000000",PS="Lato",RS="Lato",BS={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},IS={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:PS},axisX:{domain:!0,domainColor:TS,domainWidth:1,grid:!1,labelFontSize:12,labelFont:RS,labelAngle:0,tickColor:TS,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:PS},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:RS,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:PS,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:RS,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:PS,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:BS["six-groups-cat-1"],diverging:BS["diverging-colors"],heatmap:BS["diverging-colors"],ordinal:BS["six-groups-seq"],ramp:BS["shades-blue"]},area:{fill:MS},rect:{fill:MS},line:{color:MS,stroke:MS,strokeWidth:5},trail:{color:MS,stroke:MS,strokeWidth:0,size:1},path:{stroke:MS,strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:MS,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:MS,stroke:null}},arc:{fill:MS},shape:{stroke:MS},symbol:{fill:MS,size:30}},NS="#3366CC",LS="#ccc",$S="Arial, sans-serif",zS={arc:{fill:NS},area:{fill:NS},path:{stroke:NS},rect:{fill:NS},shape:{stroke:NS},symbol:{stroke:NS},circle:{fill:NS},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:$S,fontSize:12},"guide-title":{font:$S,fontSize:12},"group-title":{font:$S,fontSize:12}},title:{font:$S,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:LS,tickColor:LS,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},jS="2.10.0";var US=n(303);const VS="vg-tooltip-element",qS={offsetX:10,offsetY:10,id:VS,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2};function HS(t,e){return JSON.stringify(t,function(t){const e=[];return function(n,i){if("object"!=typeof i||null===i)return i;const r=e.indexOf(this)+1;return e.length=r,e.length>t?"[Object]":e.indexOf(i)>=0?"[Circular]":(e.push(i),i)}}(e))}class WS{constructor(t){this.options=Object.assign(Object.assign({},qS),t);const e=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const t=document.createElement("style");t.setAttribute("id",this.options.styleId),t.innerHTML=function(t){if(!/^[A-Za-z]+[-:.\w]*$/.test(t))throw new Error("Invalid HTML ID");return"#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element img {\n    max-width: 200px;\n    max-height: 200px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n".toString().replace(VS,t)}(e);const n=document.head;n.childNodes.length>0?n.insertBefore(t,n.childNodes[0]):n.appendChild(t)}}tooltipHandler(t,e,n,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el)),(null!=document.fullscreenElement?document.fullscreenElement:document.body).appendChild(this.el),null==i||""===i)return void this.el.classList.remove("visible",`${this.options.theme}-theme`);this.el.innerHTML=function(t,e,n){if((0,US.kJ)(t))return`[${t.map(t=>e((0,US.HD)(t)?t:HS(t,n))).join(", ")}]`;if((0,US.Kn)(t)){let i="";const r=t,{title:s,image:o}=r,a=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}(r,["title","image"]);s&&(i+=`<h2>${e(s)}</h2>`),o&&(i+=`<img src="${e(o)}">`);const l=Object.keys(a);if(l.length>0){i+="<table>";for(const t of l){let r=a[t];void 0!==r&&((0,US.Kn)(r)&&(r=HS(r,n)),i+=`<tr><td class="key">${e(t)}:</td><td class="value">${e(r)}</td></tr>`)}i+="</table>"}return i||"{}"}return e(t)}(i,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:r,y:s}=function(t,e,n,i){let r=t.clientX+n;r+e.width>window.innerWidth&&(r=+t.clientX-n-e.width);let s=t.clientY+i;return s+e.height>window.innerHeight&&(s=+t.clientY-i-e.height),{x:r,y:s}}(e,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${s}px; left: ${r}px`)}}function GS(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function XS(t,e,n,i,r,s,o){try{var a=t[s](o),l=a.value}catch(u){return void n(u)}a.done?e(l):Promise.resolve(l).then(i,r)}function YS(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var s=t.apply(e,n);function o(t){XS(s,i,r,o,a,"next",t)}function a(t){XS(s,i,r,o,a,"throw",t)}o(void 0)})}}var KS,ZS=Object.prototype,QS=ZS.hasOwnProperty,JS="function"==typeof Symbol?Symbol:{},tF=JS.iterator||"@@iterator",eF=JS.asyncIterator||"@@asyncIterator",nF=JS.toStringTag||"@@toStringTag";function iF(t,e,n,i){var r=Object.create((e&&e.prototype instanceof cF?e:cF).prototype),s=new CF(i||[]);return r._invoke=function(t,e,n){var i=sF;return function(r,s){if(i===aF)throw new Error("Generator is already running");if(i===lF){if("throw"===r)throw s;return EF()}for(n.method=r,n.arg=s;;){var o=n.delegate;if(o){var a=bF(o,n);if(a){if(a===uF)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===sF)throw i=lF,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=aF;var l=rF(t,e,n);if("normal"===l.type){if(i=n.done?lF:oF,l.arg===uF)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=lF,n.method="throw",n.arg=l.arg)}}}(t,n,s),r}function rF(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(i){return{type:"throw",arg:i}}}var sF="suspendedStart",oF="suspendedYield",aF="executing",lF="completed",uF={};function cF(){}function hF(){}function dF(){}var fF={};fF[tF]=function(){return this};var pF=Object.getPrototypeOf,mF=pF&&pF(pF(AF([])));mF&&mF!==ZS&&QS.call(mF,tF)&&(fF=mF);var gF=dF.prototype=cF.prototype=Object.create(fF);function yF(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function vF(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===hF||"GeneratorFunction"===(e.displayName||e.name))}function _F(t,e){function n(i,r,s,o){var a=rF(t[i],t,r);if("throw"!==a.type){var l=a.arg,u=l.value;return u&&"object"==typeof u&&QS.call(u,"__await")?e.resolve(u.__await).then(function(t){n("next",t,s,o)},function(t){n("throw",t,s,o)}):e.resolve(u).then(function(t){l.value=t,s(l)},function(t){return n("throw",t,s,o)})}o(a.arg)}var i;this._invoke=function(t,r){function s(){return new e(function(e,i){n(t,r,e,i)})}return i=i?i.then(s,s):s()}}function bF(t,e){var n=t.iterator[e.method];if(n===KS){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=KS,bF(t,e),"throw"===e.method))return uF;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return uF}var i=rF(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,uF;var r=i.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=KS),e.delegate=null,uF):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,uF)}function xF(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function wF(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function CF(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(xF,this),this.reset(!0)}function AF(t){if(t){var e=t[tF];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(QS.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=KS,e.done=!0,e};return i.next=i}}return{next:EF}}function EF(){return{value:KS,done:!0}}hF.prototype=gF.constructor=dF,dF.constructor=hF,dF[nF]=hF.displayName="GeneratorFunction",yF(_F.prototype),_F.prototype[eF]=function(){return this},yF(gF),gF[nF]="Generator",gF[tF]=function(){return this},gF.toString=function(){return"[object Generator]"},CF.prototype={constructor:CF,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=KS,this.done=!1,this.delegate=null,this.method="next",this.arg=KS,this.tryEntries.forEach(wF),!t)for(var e in this)"t"===e.charAt(0)&&QS.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=KS)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,i){return s.type="throw",s.arg=t,e.next=n,i&&(e.method="next",e.arg=KS),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],s=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var o=QS.call(r,"catchLoc"),a=QS.call(r,"finallyLoc");if(o&&a){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(o){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&QS.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var s=r?r.completion:{};return s.type=t,s.arg=e,r?(this.method="next",this.next=r.finallyLoc,uF):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),uF},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),wF(n),uF}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;wF(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:AF(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=KS),uF}};var kF={wrap:iF,isGeneratorFunction:vF,AsyncIterator:_F,mark:function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,dF):(t.__proto__=dF,nF in t||(t[nF]="GeneratorFunction")),t.prototype=Object.create(gF),t},awrap:function(t){return{__await:t}},async:function(t,e,n,i,r){void 0===r&&(r=Promise);var s=new _F(iF(t,e,n,i),r);return vF(e)?s:s.next().then(function(t){return t.done?t.value:s.next()})},keys:function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},values:AF};function DF(t,e,n){var i=t.open(e),r=new URL(e).origin,s=40;t.addEventListener("message",function e(n){n.source===i&&(s=0,t.removeEventListener("message",e,!1))},!1),setTimeout(function t(){s<=0||(i.postMessage(n,r),setTimeout(t,250),s-=1)},250)}var SF,FF='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box; }\n  .vega-embed.has-actions {\n    padding-right: 38px; }\n  .vega-embed details:not([open]) > :not(summary) {\n    display: none !important; }\n  .vega-embed summary {\n    list-style: none;\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 6px;\n    z-index: 1000;\n    background: white;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n    color: #1b1e23;\n    border: 1px solid #aaa;\n    border-radius: 999px;\n    opacity: 0.2;\n    transition: opacity 0.4s ease-in;\n    outline: none;\n    cursor: pointer;\n    line-height: 0px; }\n    .vega-embed summary::-webkit-details-marker {\n      display: none; }\n    .vega-embed summary:active {\n      box-shadow: #aaa 0px 0px 0px 1px inset; }\n    .vega-embed summary svg {\n      width: 14px;\n      height: 14px; }\n  .vega-embed details[open] summary {\n    opacity: 0.7; }\n  .vega-embed:hover summary,\n  .vega-embed:focus summary {\n    opacity: 1 !important;\n    transition: opacity 0.2s ease; }\n  .vega-embed .vega-actions {\n    position: absolute;\n    z-index: 1001;\n    top: 35px;\n    right: -9px;\n    display: flex;\n    flex-direction: column;\n    padding-bottom: 8px;\n    padding-top: 8px;\n    border-radius: 4px;\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n    border: 1px solid #d9d9d9;\n    background: white;\n    animation-duration: 0.15s;\n    animation-name: scale-in;\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n    text-align: left; }\n    .vega-embed .vega-actions a {\n      padding: 8px 16px;\n      font-family: sans-serif;\n      font-size: 14px;\n      font-weight: 600;\n      white-space: nowrap;\n      color: #434a56;\n      text-decoration: none; }\n      .vega-embed .vega-actions a:hover {\n        background-color: #f7f7f9;\n        color: black; }\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n      content: "";\n      display: inline-block;\n      position: absolute; }\n    .vega-embed .vega-actions::before {\n      left: auto;\n      right: 14px;\n      top: -16px;\n      border: 8px solid #0000;\n      border-bottom-color: #d9d9d9; }\n    .vega-embed .vega-actions::after {\n      left: auto;\n      right: 15px;\n      top: -14px;\n      border: 7px solid #0000;\n      border-bottom-color: #fff; }\n  .vega-embed .chart-wrapper.fit-x {\n    width: 100%; }\n  .vega-embed .chart-wrapper.fit-y {\n    height: 100%; }\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px; }\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6); }\n  to {\n    opacity: 1;\n    transform: scale(1); } }\n';function OF(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];for(var r=0,s=n;r<s.length;r++){var o=s[r];MF(t,o)}return t}function MF(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var r=i[n];(0,PE.writeConfig)(t,r,e[r],!0)}}function TF(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function PF(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?TF(Object(n),!0).forEach(function(e){GS(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TF(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return this.substr(!e||e<0?0:+e,t.length)===t});var RF=PE,BF=aS,IF="undefined"!=typeof window?window:void 0;void 0===BF&&null!=IF&&null!==(SF=IF.vl)&&void 0!==SF&&SF.compile&&(BF=IF.vl);var NF={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},LF={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},$F={vega:"Vega","vega-lite":"Vega-Lite"},zF={vega:RF.version,"vega-lite":BF?BF.version:"not available"},jF={vega:t=>t,"vega-lite":(t,e)=>BF.compile(t,{config:e}).spec},UF='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',VF="chart-wrapper";function qF(t){return"function"==typeof t}function HF(t,e,n,i){var r="<html><head>".concat(e,'</head><body><pre><code class="json">'),s="</code></pre>".concat(n,"</body></html>"),o=window.open("");o.document.write(r+t+s),o.document.title="".concat($F[i]," JSON Source")}function WF(t,e){if(t.$schema){var n,i=lS(t.$schema);e&&e!==i.library&&console.warn("The given visualization spec is written in ".concat($F[i.library],", but mode argument sets ").concat(null!==(n=$F[e])&&void 0!==n?n:e,"."));var r=i.library;return(0,oS.satisfies)(zF[r],"^".concat(i.version.slice(1)))||console.warn("The input spec uses ".concat($F[r]," ").concat(i.version,", but the current version of ").concat($F[r]," is v").concat(zF[r],".")),r}return"mark"in t||"encoding"in t||"layer"in t||"hconcat"in t||"vconcat"in t||"facet"in t||"repeat"in t?"vega-lite":"marks"in t||"signals"in t||"scales"in t||"axes"in t?"vega":null!=e?e:"vega"}function GF(t){return(e=t)&&"load"in e?t:RF.loader(t);var e}function XF(t){var e;return null!==(e=t.usermeta&&t.usermeta.embedOptions)&&void 0!==e?e:{}}function YF(){return(YF=YS(kF.mark(function t(e,n){var i,r,s,o,a,l,u,c,h,d,f=arguments;return kF.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=f.length>2&&void 0!==f[2]?f[2]:{},!(0,PE.isString)(n)){t.next=10;break}return a=GF(s.loader),t.t0=JSON,t.next=6,a.load(n);case 6:t.t1=t.sent,o=t.t0.parse.call(t.t0,t.t1),t.next=11;break;case 10:o=n;case 11:return l=XF(o).loader,a&&!l||(a=GF(null!==(u=s.loader)&&void 0!==u?u:l)),t.next=15,KF(XF(o),a);case 15:return c=t.sent,t.next=18,KF(s,a);case 18:return d=PF(PF({},OF(h=t.sent,c)),{},{config:(0,PE.mergeConfig)(null!==(i=h.config)&&void 0!==i?i:{},null!==(r=c.config)&&void 0!==r?r:{})}),t.next=22,JF(e,o,d,a);case 22:return t.abrupt("return",t.sent);case 23:case"end":return t.stop()}},t)}))).apply(this,arguments)}function KF(t,e){return ZF.apply(this,arguments)}function ZF(){return(ZF=YS(kF.mark(function t(e,n){var i,r,s;return kF.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(0,PE.isString)(e.config)){t.next=8;break}return t.t1=JSON,t.next=4,n.load(e.config);case 4:t.t2=t.sent,t.t0=t.t1.parse.call(t.t1,t.t2),t.next=9;break;case 8:t.t0=null!==(i=e.config)&&void 0!==i?i:{};case 9:if(r=t.t0,!(0,PE.isString)(e.patch)){t.next=18;break}return t.t4=JSON,t.next=14,n.load(e.patch);case 14:t.t5=t.sent,t.t3=t.t4.parse.call(t.t4,t.t5),t.next=19;break;case 18:t.t3=e.patch;case 19:return s=t.t3,t.abrupt("return",PF(PF(PF({},e),s?{patch:s}:{}),r?{config:r}:{}));case 21:case"end":return t.stop()}},t)}))).apply(this,arguments)}function QF(t){var e,n=t.getRootNode?t.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:null!==(e=document.head)&&void 0!==e?e:document.body}}function JF(t,e){return tO.apply(this,arguments)}function tO(){return(tO=YS(kF.mark(function t(e,n){var i,r,o,a,l,u,c,h,d,f,p,m,g,y,v,_,b,x,w,C,A,E,k,D,S,F,O,M,T,P,R,B,I,N,L,$,z,j,U,V,q,H,W,G,X=arguments;return kF.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(G=function(){R&&document.removeEventListener("click",R),O.finalize()},c=X.length>3?X[3]:void 0,h=(u=X.length>2&&void 0!==X[2]?X[2]:{}).theme?(0,PE.mergeConfig)(s[u.theme],null!==(i=u.config)&&void 0!==i?i:{}):u.config,d=(0,PE.isBoolean)(u.actions)?u.actions:OF({},NF,null!==(r=u.actions)&&void 0!==r?r:{}),f=PF(PF({},LF),u.i18n),p=null!==(o=u.renderer)&&void 0!==o?o:"canvas",m=null!==(a=u.logLevel)&&void 0!==a?a:RF.Warn,g=null!==(l=u.downloadFileName)&&void 0!==l?l:"visualization",y="string"==typeof e?document.querySelector(e):e){t.next=12;break}throw new Error("".concat(e," does not exist"));case 12:return!1!==u.defaultStyle&&(v="vega-embed-style",_=QF(y),b=_.rootContainer,_.root.getElementById(v)||((x=document.createElement("style")).id=v,x.innerText=void 0===u.defaultStyle||!0===u.defaultStyle?FF.toString():u.defaultStyle,b.appendChild(x))),w=WF(n,u.mode),C=jF[w](n,h),"vega-lite"===w&&C.$schema&&(A=lS(C.$schema),(0,oS.satisfies)(zF.vega,"^".concat(A.version.slice(1)))||console.warn("The compiled spec uses Vega ".concat(A.version,", but current version is v").concat(zF.vega,"."))),y.classList.add("vega-embed"),d&&y.classList.add("has-actions"),y.innerHTML="",E=y,d&&((k=document.createElement("div")).classList.add(VF),y.appendChild(k),E=k),(D=u.patch)&&(C=D instanceof Function?D(C):HD(C,D,!0,!1).newDocument),u.formatLocale&&RF.formatLocale(u.formatLocale),u.timeFormatLocale&&RF.timeFormatLocale(u.timeFormatLocale),F=RF.parse(C,"vega-lite"===w?{}:h,{ast:S=u.ast}),(O=new(u.viewClass||RF.View)(F,PF({loader:c,logLevel:m,renderer:p},S?{expr:RF.expressionInterpreter}:{}))).addSignalListener("autosize",(t,e)=>{var n=e.type;"fit-x"==n?(E.classList.add("fit-x"),E.classList.remove("fit-y")):"fit-y"==n?(E.classList.remove("fit-x"),E.classList.add("fit-y")):"fit"==n?E.classList.add("fit-x","fit-y"):E.classList.remove("fit-x","fit-y")}),!1!==u.tooltip&&(M=qF(u.tooltip)?u.tooltip:new WS(!0===u.tooltip?{}:u.tooltip).call,O.tooltip(M)),void 0===(T=u.hover)&&(T="vega"===w),T&&O.hover((P="boolean"==typeof T?{}:T).hoverSet,P.updateSet),u&&(null!=u.width&&O.width(u.width),null!=u.height&&O.height(u.height),null!=u.padding&&O.padding(u.padding)),t.next=36,O.initialize(E,u.bind).runAsync();case 36:if(!1!==d){if(B=y,!1!==u.defaultStyle&&((I=document.createElement("details")).title=f.CLICK_TO_VIEW_ACTIONS,y.append(I),B=I,(N=document.createElement("summary")).innerHTML=UF,I.append(N),R=t=>{I.contains(t.target)||I.removeAttribute("open")},document.addEventListener("click",R)),L=document.createElement("div"),B.append(L),L.classList.add("vega-actions"),!0===d||!1!==d.export)for($=function(){var t=j[z];if(!0===d||!0===d.export||d.export[t]){var e=f["".concat(t.toUpperCase(),"_ACTION")],n=document.createElement("a");n.text=e,n.href="#",n.target="_blank",n.download="".concat(g,".").concat(t),n.addEventListener("mousedown",function(){var e=YS(kF.mark(function e(n){return kF.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,O.toImageURL(t,u.scaleFactor);case 3:this.href=e.sent;case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),L.append(n)}},z=0,j=["svg","png"];z<j.length;z++)$();!0!==d&&!1===d.source||((U=document.createElement("a")).text=f.SOURCE_ACTION,U.href="#",U.addEventListener("click",function(t){var e,i;HF(sS()(n),null!==(e=u.sourceHeader)&&void 0!==e?e:"",null!==(i=u.sourceFooter)&&void 0!==i?i:"",w),t.preventDefault()}),L.append(U)),"vega-lite"!==w||!0!==d&&!1===d.compiled||((V=document.createElement("a")).text=f.COMPILED_ACTION,V.href="#",V.addEventListener("click",function(t){var e,n;HF(sS()(C),null!==(e=u.sourceHeader)&&void 0!==e?e:"",null!==(n=u.sourceFooter)&&void 0!==n?n:"","vega"),t.preventDefault()}),L.append(V)),!0!==d&&!1===d.editor||(H=null!==(q=u.editorUrl)&&void 0!==q?q:"https://vega.github.io/editor/",(W=document.createElement("a")).text=f.EDITOR_ACTION,W.href="#",W.addEventListener("click",function(t){DF(window,H,{config:h,mode:w,renderer:p,spec:sS()(n)}),t.preventDefault()}),L.append(W))}return t.abrupt("return",{view:O,spec:n,vgSpec:C,finalize:G});case 38:case"end":return t.stop()}},t)}))).apply(this,arguments)}let eO=(()=>{class t{constructor(){this.loader$=new sp(1),this.subscriptions=new p,this.event$=this.loader$.pipe(kD(),ap(1)),this.view$=this.event$.pipe(wd(t=>"ready"===t.type),OC("view")),this.loading$=this.event$.pipe(F(t=>"loading"===t.type),Rf()),this.error$=this.event$.pipe(wd(t=>"error"===t.type),OC("error"))}ngOnDestroy(){this.loader$.complete(),this.subscriptions.unsubscribe()}create(...t){const e=function(t,e){return YF.apply(this,arguments)}(...t),n=this.subscriptions,i=new p(()=>e.then(t=>t.finalize())),r=e.then(t=>t.view),s=L(r).pipe(F(t=>({type:"ready",view:t})),O_(t=>L([{type:"error",error:t}])),Gf({type:"loading",loader:r}));i.add(n),e.finally(()=>n.unsubscribe()),this.subscriptions=i,this.loader$.next(s)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();function nO(){}let iO=(()=>{class t{constructor(t,e,n,i){this.manager=e,this.renderer=n,this.cdr=i,this._autosize={width:!0,height:!0},this.minSizeChange=1,this.viewChange=this.manager.view$,this.viewLoading=this.manager.loading$,this.viewError=this.manager.error$,this.subscriptions=this.manager.event$.subscribe(this.handleEvents.bind(this)),this.detach=nO,this.container=t.nativeElement}set autosize(t){this._autosize="boolean"==typeof t?{width:t,height:t}:Object.assign({width:!1,height:!1},t)}get autosize(){return this._autosize}ngOnChanges(t){("spec"in t||"options"in t)&&this.create()}ngOnDestroy(){this.subscriptions.unsubscribe(),this.detach()}create(){const{spec:t,options:e,manager:n,renderer:i}=this;if(t){const r=i.createElement("div");n.create(r,t,e)}else this.detach()}handleEvents(t){"ready"===t.type?this.attach(t.view):"error"===t.type&&this.detach()}attach(t){const{cdr:e,container:n,renderer:i}=this,r=this.getRoot(t.container()),s=new ED.ResizeSensor(r,({width:e,height:n})=>{this.updateSize(r,t,e,n)});this.detach(),this.detach=()=>{s.detach(),i.removeChild(n,r),e.markForCheck(),this.detach=nO},i.appendChild(n,r),e.markForCheck()}updateSize(t,e,n,i){const{_autosize:r}=this,s=r.width&&this.updateWidth(t,e,n),o=r.height&&this.updateHeight(t,e,i);(s||o)&&e.runAsync()}updateWidth(t,e,n){const{minSizeChange:i}=this,r=t.classList.contains("has-actions")?38:0;return Math.abs(n-e.width()-r)>=i&&(e.width(n-r),!0)}updateHeight(t,e,n){const{minSizeChange:i}=this;return Math.abs(n-e.height())>=i&&(e.height(n),!0)}getRoot(t){const{renderer:e}=this;let n=e.parentNode(t);for(;n;)t=n,n=e.parentNode(n);return t}}return t.\u0275fac=function(e){return new(e||t)(ko(ja),ko(eO),ko(qa),ko(fl))},t.\u0275cmp=Ht({type:t,selectors:[["ngx-vega"]],inputs:{minSizeChange:"minSizeChange",autosize:"autosize",spec:"spec",options:"options"},outputs:{viewChange:"viewChange",viewLoading:"viewLoading",viewError:"viewError"},features:[Ra([eO]),he],decls:0,vars:0,template:function(t,e){},styles:['[_nghost-%COMP%]{display:block}[_nghost-%COMP%], [_nghost-%COMP%] > div[_ngcontent-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]     .vega-embed{display:inline-block;position:relative}[_nghost-%COMP%]     .vega-embed.has-actions{padding-right:38px}[_nghost-%COMP%]     .vega-embed details:not([open])>:not(summary){display:none!important}[_nghost-%COMP%]     .vega-embed summary{background:#fff;border:1px solid #aaa;border-radius:999px;box-shadow:1px 1px 3px rgba(0,0,0,.1);color:#1b1e23;cursor:pointer;line-height:0;list-style:none;opacity:.2;outline:none;padding:6px;position:absolute;right:0;top:0;transition:opacity .4s ease-in;z-index:1000}[_nghost-%COMP%]     .vega-embed summary::-webkit-details-marker{display:none}[_nghost-%COMP%]     .vega-embed summary:active{box-shadow:inset 0 0 0 1px #aaa}[_nghost-%COMP%]     .vega-embed summary svg{height:14px;width:14px}[_nghost-%COMP%]     .vega-embed details[open] summary{opacity:.7}[_nghost-%COMP%]     .vega-embed:focus summary, [_nghost-%COMP%]     .vega-embed:hover summary{opacity:1!important;transition:opacity .2s ease}[_nghost-%COMP%]     .vega-embed .vega-actions{-webkit-animation-duration:.15s;-webkit-animation-name:scale-in;-webkit-animation-timing-function:cubic-bezier(.2,0,.13,1.5);animation-duration:.15s;animation-name:scale-in;animation-timing-function:cubic-bezier(.2,0,.13,1.5);background:#fff;border:1px solid #d9d9d9;border-radius:4px;box-shadow:0 2px 8px 0 rgba(0,0,0,.2);display:flex;flex-direction:column;padding-bottom:8px;padding-top:8px;position:absolute;right:-9px;text-align:left;top:35px;z-index:1001}[_nghost-%COMP%]     .vega-embed .vega-actions a{color:#434a56;font-family:sans-serif;font-size:14px;font-weight:600;padding:8px 16px;text-decoration:none;white-space:nowrap}[_nghost-%COMP%]     .vega-embed .vega-actions a:hover{background-color:#f7f7f9;color:#000}[_nghost-%COMP%]     .vega-embed .vega-actions:after, [_nghost-%COMP%]     .vega-embed .vega-actions:before{content:"";display:inline-block;position:absolute}[_nghost-%COMP%]     .vega-embed .vega-actions:before{border:8px solid transparent;border-bottom-color:#d9d9d9;left:auto;right:14px;top:-16px}[_nghost-%COMP%]     .vega-embed .vega-actions:after{border:7px solid transparent;border-bottom-color:#fff;left:auto;right:15px;top:-14px}[_nghost-%COMP%]     .vega-embed-wrapper{max-width:100%;overflow:scroll;padding-right:14px}@-webkit-keyframes scale-in{0%{opacity:0;transform:scale(.6)}to{opacity:1;transform:scale(1)}}@keyframes scale-in{0%{opacity:0;transform:scale(.6)}to{opacity:1;transform:scale(1)}}'],changeDetection:0}),t})(),rO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({}),t})();function sO(t,e){if(1&t&&(Fo(0,"div",15),fa(1),Oo()),2&t){const t=Vo();Kr(1),pa(t.headline)}}function oO(t,e){if(1&t&&(Fo(0,"div",16),fa(1),Oo()),2&t){const t=Vo();Kr(1),pa(t.title)}}function aO(t,e){if(1&t&&(Fo(0,"div",17),fa(1),Oo()),2&t){const t=Vo();Kr(1),pa(t.description)}}const lO=function(){return{width:!0,height:!1}};function uO(t,e){if(1&t){const t=Ro();Fo(0,"ngx-vega",18),Lo("viewLoading",function(e){return Be(t),Vo().loadingVegaVisualization=e}),Oo()}if(2&t){const t=Vo();Do("spec",t.spec)("options",t.options)("autosize",zl(3,lO))}}function cO(t,e){1&t&&Mo(0,"markdown",19),2&t&&Do("src",Vo().content)}function hO(t,e){if(1&t){const t=Ro();Fo(0,"markdown",26),Lo("load",function(){return Be(t),Vo(2).disableSpinner("sql")}),Oo()}2&t&&Do("src",Vo(2).sql)}function dO(t,e){if(1&t){const t=Ro();Fo(0,"mat-expansion-panel",20,21),Lo("closed",function(){return Be(t),Vo().enableSpinner("sql")}),Fo(2,"mat-expansion-panel-header"),Fo(3,"mat-panel-title"),fa(4," Data Extraction Source Code (SQL) "),Oo(),Oo(),Fo(5,"div",22),Fo(6,"a",23),Fo(7,"mat-icon"),fa(8,"cloud_download"),Oo(),Oo(),Oo(),Mo(9,"mat-spinner",24),Ao(10,hO,1,1,"markdown",25),Oo()}if(2&t){const t=Eo(1),e=Vo();Kr(6),Do("href",e.sql,er),Kr(3),ta("smooth-hide",!e.spinners.sql),Kr(1),Do("ngIf",e.sql&&t.expanded)}}function fO(t,e){if(1&t){const t=Ro();Fo(0,"markdown",29),Lo("load",function(){return Be(t),Vo(2).disableSpinner("csv")}),Oo()}2&t&&Do("src",Vo(2).csv)}function pO(t,e){if(1&t){const t=Ro();Fo(0,"mat-expansion-panel",20,27),Lo("closed",function(){return Be(t),Vo().enableSpinner("csv")}),Fo(2,"mat-expansion-panel-header"),Fo(3,"mat-panel-title"),fa(4," Extracted Data (CSV) "),Oo(),Oo(),Fo(5,"div",22),Fo(6,"a",23),Fo(7,"mat-icon"),fa(8,"cloud_download"),Oo(),Oo(),Oo(),Mo(9,"mat-spinner",24),Ao(10,fO,1,1,"markdown",28),Oo()}if(2&t){const t=Eo(1),e=Vo();Kr(6),Do("href",e.csv,er),Kr(3),ta("smooth-hide",!e.spinners.csv),Kr(1),Do("ngIf",e.csv&&t.expanded)}}function mO(t,e){if(1&t){const t=Ro();Fo(0,"markdown",26),Lo("load",function(){return Be(t),Vo(2).disableSpinner("spec")}),Oo()}2&t&&Do("src",Vo(2).specString)}function gO(t,e){if(1&t){const t=Ro();Fo(0,"mat-expansion-panel",20,30),Lo("closed",function(){return Be(t),Vo().enableSpinner("spec")}),Fo(2,"mat-expansion-panel-header"),Fo(3,"mat-panel-title"),fa(4," Visualization Source Code (Vega Lite Spec) "),Oo(),Oo(),Fo(5,"div",22),Fo(6,"a",23),Fo(7,"mat-icon"),fa(8,"cloud_download"),Oo(),Oo(),Oo(),Mo(9,"mat-spinner",24),Ao(10,mO,1,1,"markdown",25),Oo()}if(2&t){const t=Eo(1),e=Vo();Kr(6),Do("href",e.specString,er),Kr(3),ta("smooth-hide",!e.spinners.spec),Kr(1),Do("ngIf",e.spec&&t.expanded)}}let yO=(()=>{class t{constructor(t,e){this.dialog=t,this.page=e,this.clsName="agc-visualization-page",this.headline="Marion County Opioid Addiction Report",this.options={renderer:"canvas",actions:!0,width:1268},this.csvSpinnerActive=!0,this.spinners={sql:!0,csv:!0,spec:!0},this.loadingVegaVisualization=!0}get specString(){return this.spec}ngOnInit(){this.page.snapshot.hasShownHelpModal||(this.dialog.open(oD,{width:"50rem",data:{}}),this.page.setHasShownHelpModal(!0))}disableSpinner(t){this.spinners=Object.assign(Object.assign({},this.spinners),{[t]:!1})}enableSpinner(t){this.spinners=Object.assign(Object.assign({},this.spinners),{[t]:!0})}launchHelpDialog(){this.dialog.open(rD,{width:"60rem",data:{}})}}return t.\u0275fac=function(e){return new(e||t)(ko(Ik),ko(lD))},t.\u0275cmp=Ht({type:t,selectors:[["agc-visualization-page"]],hostVars:2,hostBindings:function(t,e){2&t&&ea(e.clsName)},inputs:{headline:"headline",title:"title",description:"description",spec:"spec",options:"options",content:"content",sql:"sql",csv:"csv"},decls:22,vars:12,consts:[["class","header",4,"ngIf"],[1,"content"],[1,"center-box"],["class","title",4,"ngIf"],["class","description",4,"ngIf"],[1,"loading-message"],[1,"visualization"],[3,"spec","options","autosize","viewLoading",4,"ngIf"],["mat-icon-button","","color","accent","disableRipple","",1,"help",3,"click"],["title","Help",1,"qmark"],["ngClass","info"],["ngClass","storage-icon","svgIcon","menu:data-storage"],[3,"src",4,"ngIf"],["multi",""],[3,"closed",4,"ngIf"],[1,"header"],[1,"title"],[1,"description"],[3,"spec","options","autosize","viewLoading"],[3,"src"],[3,"closed"],["sqlPanel",""],[1,"file-download-area"],["target","_blank","rel","noreferrer noopener",1,"file-download",3,"href"],[1,"spinner"],["lineNumbers","",3,"src","load",4,"ngIf"],["lineNumbers","",3,"src","load"],["csvPanel",""],["class","csvContent","lineNumbers","",3,"src","load",4,"ngIf"],["lineNumbers","",1,"csvContent",3,"src","load"],["specPanel",""]],template:function(t,e){1&t&&(Ao(0,sO,2,1,"div",0),Fo(1,"div",1),Fo(2,"div",2),Ao(3,oO,2,1,"div",3),Ao(4,aO,2,1,"div",4),Fo(5,"div",5),Mo(6,"mat-spinner"),Oo(),Fo(7,"div",6),Ao(8,uO,1,4,"ngx-vega",7),Fo(9,"button",8),Lo("click",function(){return e.launchHelpDialog()}),Fo(10,"span",9),fa(11,"?"),Oo(),Oo(),Oo(),Fo(12,"mat-expansion-panel",10),Fo(13,"mat-expansion-panel-header"),Fo(14,"mat-panel-title"),Mo(15,"mat-icon",11),fa(16," DATA & GRAPHIC VARIABLE EXTRACTION INFORMATION "),Oo(),Oo(),Ao(17,cO,1,1,"markdown",12),Fo(18,"mat-accordion",13),Ao(19,dO,11,4,"mat-expansion-panel",14),Ao(20,pO,11,4,"mat-expansion-panel",14),Ao(21,gO,11,4,"mat-expansion-panel",14),Oo(),Oo(),Oo(),Oo()),2&t&&(Do("ngIf",e.headline),Kr(3),Do("ngIf",e.title),Kr(1),Do("ngIf",e.description),Kr(1),ta("smooth-hide",!e.loadingVegaVisualization),Kr(3),Do("ngIf",e.spec),Kr(4),ta("smooth-show",!e.loadingVegaVisualization),Kr(5),Do("ngIf",e.content),Kr(2),Do("ngIf",e.sql),Kr(1),Do("ngIf",e.csv),Kr(1),Do("ngIf",e.spec))},directives:[_h,yD,CD,hC,mh,pC,mC,nD,gC,iO,y_],styles:[".mat-expanded .mat-expanded .mat-expansion-panel-content{min-height:13rem}[_nghost-%COMP%]{display:block;width:100%}[_nghost-%COMP%]   markdown[_ngcontent-%COMP%]{display:block}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;height:4rem;margin-bottom:4.5rem;padding:0 1rem;align-items:center;font-weight:300;font-size:2.25rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{align-items:center;width:100%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .center-box[_ngcontent-%COMP%]{display:block;width:100%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;font-size:1.25rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:1.25rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .loading-message[_ngcontent-%COMP%]{position:fixed;z-index:2;left:50%;top:50%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .visualization[_ngcontent-%COMP%]{position:relative;padding-right:2.375rem;display:flex;width:100%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .visualization[_ngcontent-%COMP%]:hover   .help[_ngcontent-%COMP%], [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .visualization[_ngcontent-%COMP%]:hover   ngx-vega[_ngcontent-%COMP%]     summary{opacity:1;transition:opacity .2s ease}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .visualization[_ngcontent-%COMP%]   .help[_ngcontent-%COMP%]{position:absolute;top:0;right:0;cursor:pointer;opacity:.2;transition:opacity .4s ease-in;border-width:1px;border-style:solid;border-radius:50%;box-shadow:1px 1px 3px #0000001a;background:#fff;color:#1b1e23}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .visualization[_ngcontent-%COMP%]   .help[_ngcontent-%COMP%], [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .visualization[_ngcontent-%COMP%]   .help[_ngcontent-%COMP%]   .qmark[_ngcontent-%COMP%]{width:1.75rem;height:1.75rem;line-height:1.75rem;font-size:1.25rem;vertical-align:initial}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .visualization[_ngcontent-%COMP%]   .help[_ngcontent-%COMP%]     .mat-button-focus-overlay{display:none}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .info[_ngcontent-%COMP%]{opacity:0;margin-top:2rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{font-weight:700;font-size:.875rem;line-height:1.5rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.5rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .file-download-area[_ngcontent-%COMP%]{margin-top:.625rem;margin-bottom:2.5rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .file-download-area[_ngcontent-%COMP%]   .file-download[_ngcontent-%COMP%]{position:absolute;right:2rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{position:absolute;z-index:1;left:50%;top:8rem}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]   markdown[_ngcontent-%COMP%]{padding:1rem .5rem 0}[_nghost-%COMP%]   .smooth-show[_ngcontent-%COMP%]{opacity:1!important;transition:opacity .75s}[_nghost-%COMP%]   .smooth-hide[_ngcontent-%COMP%]{opacity:0!important;transition:opacity .5s}"],changeDetection:0}),t})();function vO(t,e){if(1&t&&Mo(0,"agc-visualization-page",1),2&t){const t=Vo();Do("title",t.visualization.title)("description",t.visualization.description)("spec",t.visualization.spec)("options",t.visualization.options)("content",t.visualization.content)("sql",t.visualization.sql)("csv",t.visualization.csv)}}const _O=[{path:"",component:(()=>{class t{constructor(t){this.subscriptions=new p;const e=t.data.subscribe(t=>{this.visualization=t.visualization});this.subscriptions.add(e)}ngOnDestroy(){this.subscriptions.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(ko(Wb))},t.\u0275cmp=Ht({type:t,selectors:[["agc-visualization"]],decls:1,vars:1,consts:[[3,"title","description","spec","options","content","sql","csv",4,"ngIf"],[3,"title","description","spec","options","content","sql","csv"]],template:function(t,e){1&t&&Ao(0,vO,1,7,"agc-visualization-page",0),2&t&&Do("ngIf",e.visualization)},directives:[_h,yO],styles:[""]}),t})(),resolve:{visualization:LE}}];let bO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Fw.forChild(_O)],Fw]}),t})(),xO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Rh,Uk,iD,yC]]}),t})(),wO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Rh,Uk,iD]]}),t})(),CO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Rh,AD,yC,iD,v_.forChild(),rO,xO,wO,vD]]}),t})(),AO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Rh,bO,CO]]}),t})(),EO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Rh]]}),t})(),kO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Rh,vD,rO]]}),t})();const DO=["underline"],SO=["connectionContainer"],FO=["inputContainer"],OO=["label"];function MO(t,e){1&t&&(To(0),Fo(1,"div",14),Mo(2,"div",15),Mo(3,"div",16),Mo(4,"div",17),Oo(),Fo(5,"div",18),Mo(6,"div",15),Mo(7,"div",16),Mo(8,"div",17),Oo(),Po())}function TO(t,e){1&t&&(Fo(0,"div",19),Wo(1,1),Oo())}function PO(t,e){if(1&t&&(To(0),Wo(1,2),Fo(2,"span"),fa(3),Oo(),Po()),2&t){const t=Vo(2);Kr(3),pa(t._control.placeholder)}}function RO(t,e){1&t&&Wo(0,3,["*ngSwitchCase","true"])}function BO(t,e){1&t&&(Fo(0,"span",23),fa(1," *"),Oo())}function IO(t,e){if(1&t){const t=Ro();Fo(0,"label",20,21),Lo("cdkObserveContent",function(){return Be(t),Vo().updateOutlineGap()}),Ao(2,PO,4,1,"ng-container",12),Ao(3,RO,1,0,"ng-content",12),Ao(4,BO,2,0,"span",22),Oo()}if(2&t){const t=Vo();ta("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),Do("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),wo("for",t._control.id)("aria-owns",t._control.id),Kr(2),Do("ngSwitchCase",!1),Kr(1),Do("ngSwitchCase",!0),Kr(1),Do("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function NO(t,e){1&t&&(Fo(0,"div",24),Wo(1,4),Oo())}function LO(t,e){if(1&t&&(Fo(0,"div",25,26),Mo(2,"span",27),Oo()),2&t){const t=Vo();Kr(2),ta("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function $O(t,e){1&t&&(Fo(0,"div"),Wo(1,5),Oo()),2&t&&Do("@transitionMessages",Vo()._subscriptAnimationState)}function zO(t,e){if(1&t&&(Fo(0,"div",31),fa(1),Oo()),2&t){const t=Vo(2);Do("id",t._hintLabelId),Kr(1),pa(t.hintLabel)}}function jO(t,e){if(1&t&&(Fo(0,"div",28),Ao(1,zO,2,2,"div",29),Wo(2,6),Mo(3,"div",30),Wo(4,7),Oo()),2&t){const t=Vo();Do("@transitionMessages",t._subscriptAnimationState),Kr(1),Do("ngIf",t.hintLabel)}}const UO=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],VO=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],qO=new Kn("MatError"),HO={transitionMessages:hm("transitionMessages",[mm("enter",pm({opacity:1,transform:"translateY(0%)"})),gm("void => enter",[pm({opacity:0,transform:"translateY(-5px)"}),dm("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let WO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Zt({type:t}),t})();const GO=new Kn("MatHint");let XO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Zt({type:t,selectors:[["mat-label"]]}),t})(),YO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Zt({type:t,selectors:[["mat-placeholder"]]}),t})();const KO=new Kn("MatPrefix"),ZO=new Kn("MatSuffix");let QO=0;const JO=ov(class{constructor(t){this._elementRef=t}},"primary"),tM=new Kn("MAT_FORM_FIELD_DEFAULT_OPTIONS"),eM=new Kn("MatFormField");let nM=(()=>{class t extends JO{constructor(t,e,n,i,r,s,o,a){super(t),this._changeDetectorRef=e,this._dir=i,this._defaults=r,this._platform=s,this._ngZone=o,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new k,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+QO++,this._labelId="mat-form-field-label-"+QO++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==a,this.appearance=r&&r.appearance?r.appearance:"legacy",this._hideRequiredMarker=!(!r||null==r.hideRequiredMarker)&&r.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const e=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&e!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=yf(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(Gf(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Vf(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Vf(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),G(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(Gf(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(Gf(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Vf(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const e=this._control?this._control.ngControl:null;return e&&e[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,wf(this._label.nativeElement,"transitionend").pipe(Fp(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const e=this._hintChildren?this._hintChildren.find(t=>"start"===t.align):null,n=this._hintChildren?this._hintChildren.find(t=>"end"===t.align):null;e?t.push(e.id):this._hintLabel&&t.push(this._hintLabelId),n&&t.push(n.id)}else this._errorChildren&&t.push(...this._errorChildren.map(t=>t.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null;if("outline"!==this.appearance||!t||!t.children.length||!t.textContent.trim())return;if(!this._platform.isBrowser)return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let e=0,n=0;const i=this._connectionContainerRef.nativeElement,r=i.querySelectorAll(".mat-form-field-outline-start"),s=i.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const r=i.getBoundingClientRect();if(0===r.width&&0===r.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const s=this._getStartEnd(r),o=t.children,a=this._getStartEnd(o[0].getBoundingClientRect());let l=0;for(let t=0;t<o.length;t++)l+=o[t].offsetWidth;e=Math.abs(a-s)-5,n=l>0?.75*l+10:0}for(let o=0;o<r.length;o++)r[o].style.width=`${e}px`;for(let o=0;o<s.length;o++)s[o].style.width=`${n}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const e=t.getRootNode();return e&&e!==t}return document.documentElement.contains(t)}}return t.\u0275fac=function(e){return new(e||t)(ko(ja),ko(fl),ko(ja),ko(up,8),ko(tM,8),ko(uf),ko(Nu),ko(Gy,8))},t.\u0275cmp=Ht({type:t,selectors:[["mat-form-field"]],contentQueries:function(t,e,n){if(1&t&&(uu(n,WO,5),uu(n,WO,7),uu(n,XO,5),uu(n,XO,7),uu(n,YO,5),uu(n,qO,5),uu(n,GO,5),uu(n,KO,5),uu(n,ZO,5)),2&t){let t;au(t=cu())&&(e._controlNonStatic=t.first),au(t=cu())&&(e._controlStatic=t.first),au(t=cu())&&(e._labelChildNonStatic=t.first),au(t=cu())&&(e._labelChildStatic=t.first),au(t=cu())&&(e._placeholderChild=t.first),au(t=cu())&&(e._errorChildren=t),au(t=cu())&&(e._hintChildren=t),au(t=cu())&&(e._prefixChildren=t),au(t=cu())&&(e._suffixChildren=t)}},viewQuery:function(t,e){if(1&t&&(lu(DO,5),lu(SO,7),lu(FO,5),lu(OO,5)),2&t){let t;au(t=cu())&&(e.underlineRef=t.first),au(t=cu())&&(e._connectionContainerRef=t.first),au(t=cu())&&(e._inputContainerRef=t.first),au(t=cu())&&(e._label=t.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,e){2&t&&ta("mat-form-field-appearance-standard","standard"==e.appearance)("mat-form-field-appearance-fill","fill"==e.appearance)("mat-form-field-appearance-outline","outline"==e.appearance)("mat-form-field-appearance-legacy","legacy"==e.appearance)("mat-form-field-invalid",e._control.errorState)("mat-form-field-can-float",e._canLabelFloat())("mat-form-field-should-float",e._shouldLabelFloat())("mat-form-field-has-label",e._hasFloatingLabel())("mat-form-field-hide-placeholder",e._hideControlPlaceholder())("mat-form-field-disabled",e._control.disabled)("mat-form-field-autofilled",e._control.autofilled)("mat-focused",e._control.focused)("ng-untouched",e._shouldForward("untouched"))("ng-touched",e._shouldForward("touched"))("ng-pristine",e._shouldForward("pristine"))("ng-dirty",e._shouldForward("dirty"))("ng-valid",e._shouldForward("valid"))("ng-invalid",e._shouldForward("invalid"))("ng-pending",e._shouldForward("pending"))("_mat-animation-noopable",!e._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Ra([{provide:eM,useExisting:t}]),uo],ngContentSelectors:VO,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,e){1&t&&(Ho(UO),Fo(0,"div",0),Fo(1,"div",1,2),Lo("click",function(t){return e._control.onContainerClick&&e._control.onContainerClick(t)}),Ao(3,MO,9,0,"ng-container",3),Ao(4,TO,2,0,"div",4),Fo(5,"div",5,6),Wo(7),Fo(8,"span",7),Ao(9,IO,5,16,"label",8),Oo(),Oo(),Ao(10,NO,2,0,"div",9),Oo(),Ao(11,LO,3,4,"div",10),Fo(12,"div",11),Ao(13,$O,2,1,"div",12),Ao(14,jO,5,2,"div",13),Oo(),Oo()),2&t&&(Kr(3),Do("ngIf","outline"==e.appearance),Kr(1),Do("ngIf",e._prefixChildren.length),Kr(5),Do("ngIf",e._hasFloatingLabel()),Kr(1),Do("ngIf",e._suffixChildren.length),Kr(1),Do("ngIf","outline"!=e.appearance),Kr(1),Do("ngSwitch",e._getDisplayedMessages()),Kr(1),Do("ngSwitchCase","error"),Kr(1),Do("ngSwitchCase","hint"))},directives:[_h,Ch,Ah,Ip],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[HO.transitionMessages]},changeDetection:0}),t})(),iM=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Rh,rv,Np],rv]}),t})();const rM=new Kn("NgValidators"),sM=new Kn("NgAsyncValidators");function oM(t){return null!=t}function aM(t){const e=Bo(t)?L(t):t;return No(e),e}function lM(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function uM(t,e){return e.map(e=>e(t))}function cM(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function hM(t){return null!=t?function(t){if(!t)return null;const e=t.filter(oM);return 0==e.length?null:function(t){return lM(uM(t,e))}}(cM(t)):null}function dM(t){return null!=t?function(t){if(!t)return null;const e=t.filter(oM);return 0==e.length?null:function(t){return ZC(uM(t,e).map(aM)).pipe(F(lM))}}(cM(t)):null}function fM(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function pM(t){return t._rawValidators}function mM(t){return t._rawAsyncValidators}let gM=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=hM(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=dM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=Zt({type:t}),t})(),yM=(()=>{class t extends gM{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Hn(t)))(n||t)}}(),t.\u0275dir=Zt({type:t,features:[uo]}),t})();class vM extends gM{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}function _M(t,e){wM(t,e),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&AM(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&AM(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function bM(t,e,n=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),CM(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function xM(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function wM(t,e){const n=pM(t);null!==e.validator?t.setValidators(fM(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const i=mM(t);null!==e.asyncValidator?t.setAsyncValidators(fM(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);const r=()=>t.updateValueAndValidity();xM(e._rawValidators,r),xM(e._rawAsyncValidators,r)}function CM(t,e){let n=!1;if(null!==t){if(null!==e.validator){const i=pM(t);if(Array.isArray(i)&&i.length>0){const r=i.filter(t=>t!==e.validator);r.length!==i.length&&(n=!0,t.setValidators(r))}}if(null!==e.asyncValidator){const i=mM(t);if(Array.isArray(i)&&i.length>0){const r=i.filter(t=>t!==e.asyncValidator);r.length!==i.length&&(n=!0,t.setAsyncValidators(r))}}}const i=()=>{};return xM(e._rawValidators,i),xM(e._rawAsyncValidators,i),n}function AM(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function EM(t,e){wM(t,e)}function kM(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function DM(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const SM="VALID",FM="INVALID",OM="PENDING",MM="DISABLED";function TM(t){return(IM(t)?t.validators:t)||null}function PM(t){return Array.isArray(t)?hM(t):t||null}function RM(t,e){return(IM(e)?e.asyncValidators:t)||null}function BM(t){return Array.isArray(t)?dM(t):t||null}function IM(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class NM{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=PM(this._rawValidators),this._composedAsyncValidatorFn=BM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===SM}get invalid(){return this.status===FM}get pending(){return this.status==OM}get disabled(){return this.status===MM}get enabled(){return this.status!==MM}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=PM(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=BM(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=OM,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=MM,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=SM,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==SM&&this.status!==OM||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?MM:SM}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=OM,this._hasOwnPendingAsyncValidator=!0;const e=aM(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let i=t;return e.forEach(t=>{i=i instanceof $M?i.controls.hasOwnProperty(t)?i.controls[t]:null:i instanceof zM&&i.at(t)||null}),i}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Yl,this.statusChanges=new Yl}_calculateStatus(){return this._allControlsDisabled()?MM:this.errors?FM:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(OM)?OM:this._anyControlsHaveStatus(FM)?FM:SM}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){IM(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class LM extends NM{constructor(t=null,e,n){super(TM(e),RM(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){DM(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){DM(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class $M extends NM{constructor(t,e,n){super(TM(e),RM(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,i)=>{n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof LM?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,i)=>{n=e(n,t,i)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class zM extends NM{constructor(t,e,n){super(TM(e),RM(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,i)=>{n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof LM?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const jM={provide:yM,useExisting:at(()=>VM)},UM=(()=>Promise.resolve(null))();let VM=(()=>{class t extends yM{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new Yl,this.form=new $M({},hM(t),dM(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){UM.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),_M(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){UM.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),DM(this._directives,t)})}addFormGroup(t){UM.then(()=>{const e=this._findContainer(t.path),n=new $M({});EM(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){UM.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){UM.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,kM(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(ko(rM,10),ko(sM,10))},t.\u0275dir=Zt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&Lo("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ra([jM]),uo]}),t})();const qM={provide:yM,useExisting:at(()=>HM)};let HM=(()=>{class t extends yM{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Yl,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(CM(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return _M(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){bM(t.control||null,t,!1),DM(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,kM(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,n=this.form.get(t.path);e!==n&&(bM(e||null,t),n instanceof LM&&(_M(n,t),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);EM(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return CM(t,e)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){wM(this.form,this),this._oldForm&&CM(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(ko(rM,10),ko(sM,10))},t.\u0275dir=Zt({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&Lo("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ra([qM]),uo,he]}),t})();const WM=["trigger"],GM=["panel"];function XM(t,e){if(1&t&&(Fo(0,"span",8),fa(1),Oo()),2&t){const t=Vo();Kr(1),pa(t.placeholder)}}function YM(t,e){if(1&t&&(Fo(0,"span",12),fa(1),Oo()),2&t){const t=Vo(2);Kr(1),pa(t.triggerValue)}}function KM(t,e){1&t&&Wo(0,0,["*ngSwitchCase","true"])}function ZM(t,e){1&t&&(Fo(0,"span",9),Ao(1,YM,2,1,"span",10),Ao(2,KM,1,0,"ng-content",11),Oo()),2&t&&(Do("ngSwitch",!!Vo().customTrigger),Kr(2),Do("ngSwitchCase",!0))}function QM(t,e){if(1&t){const t=Ro();Fo(0,"div",13),Fo(1,"div",14,15),Lo("@transformPanel.done",function(e){return Be(t),Vo()._panelDoneAnimatingStream.next(e.toState)})("keydown",function(e){return Be(t),Vo()._handleKeydown(e)}),Wo(3,1),Oo(),Oo()}if(2&t){const t=Vo();Do("@transformPanelWrap",void 0),Kr(1),"mat-select-panel ",n=t._getPanelTheme(),"",ra(ri,na,Co(Pe(),"mat-select-panel ",n,""),!0),Jo("transform-origin",t._transformOrigin)("font-size",t._triggerFontSize,"px"),Do("ngClass",t.panelClass)("@transformPanel",t.multiple?"showing-multiple":"showing"),wo("id",t.id+"-panel")("aria-multiselectable",t.multiple)("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby())}var n}const JM=[[["mat-select-trigger"]],"*"],tT=["mat-select-trigger","*"],eT={transformPanelWrap:hm("transformPanelWrap",[gm("* => void",vm("@transformPanel",[ym()],{optional:!0}))]),transformPanel:hm("transformPanel",[mm("void",pm({transform:"scaleY(0.8)",minWidth:"100%",opacity:0})),mm("showing",pm({opacity:1,minWidth:"calc(100% + 32px)",transform:"scaleY(1)"})),mm("showing-multiple",pm({opacity:1,minWidth:"calc(100% + 64px)",transform:"scaleY(1)"})),gm("void => *",dm("120ms cubic-bezier(0, 0, 0.2, 1)")),gm("* => void",dm("100ms 25ms linear",pm({opacity:0})))])};let nT=0;const iT=256,rT=new Kn("mat-select-scroll-strategy"),sT=new Kn("MAT_SELECT_CONFIG"),oT={provide:rT,deps:[gk],useFactory:function(t){return()=>t.scrollStrategies.reposition()}};class aT{constructor(t,e){this.source=t,this.value=e}}const lT=av(lv(sv(uv(class{constructor(t,e,n,i,r){this._elementRef=t,this._defaultErrorStateMatcher=e,this._parentForm=n,this._parentFormGroup=i,this.ngControl=r}})))),uT=new Kn("MatSelectTrigger");let cT=(()=>{class t extends lT{constructor(t,e,n,i,r,s,o,a,l,u,c,h,d,f){var p,m,g;super(r,i,o,a,u),this._viewportRuler=t,this._changeDetectorRef=e,this._ngZone=n,this._dir=s,this._parentFormField=l,this._liveAnnouncer=d,this._defaultOptions=f,this._panelOpen=!1,this._compareWith=(t,e)=>t===e,this._uid="mat-select-"+nT++,this._triggerAriaLabelledBy=null,this._destroy=new k,this._onChange=()=>{},this._onTouched=()=>{},this._valueId="mat-select-value-"+nT++,this._panelDoneAnimatingStream=new k,this._overlayPanelClass=(null===(p=this._defaultOptions)||void 0===p?void 0:p.overlayPanelClass)||"",this._focused=!1,this.controlType="mat-select",this._required=!1,this._multiple=!1,this._disableOptionCentering=null!==(g=null===(m=this._defaultOptions)||void 0===m?void 0:m.disableOptionCentering)&&void 0!==g&&g,this.ariaLabel="",this.optionSelectionChanges=k_(()=>{const t=this.options;return t?t.changes.pipe(Gf(t),Xf(()=>G(...t.map(t=>t.onSelectionChange)))):this._ngZone.onStable.pipe(Fp(1),Xf(()=>this.optionSelectionChanges))}),this.openedChange=new Yl,this._openedStream=this.openedChange.pipe(wd(t=>t),F(()=>{})),this._closedStream=this.openedChange.pipe(wd(t=>!t),F(()=>{})),this.selectionChange=new Yl,this.valueChange=new Yl,this.ngControl&&(this.ngControl.valueAccessor=this),null!=(null==f?void 0:f.typeaheadDebounceInterval)&&(this._typeaheadDebounceInterval=f.typeaheadDebounceInterval),this._scrollStrategyFactory=h,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(c)||0,this.id=this.id}get focused(){return this._focused||this._panelOpen}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.stateChanges.next()}get required(){return this._required}set required(t){this._required=yf(t),this.stateChanges.next()}get multiple(){return this._multiple}set multiple(t){this._multiple=yf(t)}get disableOptionCentering(){return this._disableOptionCentering}set disableOptionCentering(t){this._disableOptionCentering=yf(t)}get compareWith(){return this._compareWith}set compareWith(t){this._compareWith=t,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(t){(t!==this._value||this._multiple&&Array.isArray(t))&&(this.options&&this._setSelectionByValue(t),this._value=t)}get typeaheadDebounceInterval(){return this._typeaheadDebounceInterval}set typeaheadDebounceInterval(t){this._typeaheadDebounceInterval=vf(t)}get id(){return this._id}set id(t){this._id=t||this._uid,this.stateChanges.next()}ngOnInit(){this._selectionModel=new hp(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Rf(),Vf(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen))}ngAfterContentInit(){this._initKeyManager(),this._selectionModel.changed.pipe(Vf(this._destroy)).subscribe(t=>{t.added.forEach(t=>t.select()),t.removed.forEach(t=>t.deselect())}),this.options.changes.pipe(Gf(null),Vf(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){const t=this._getTriggerAriaLabelledby();if(t!==this._triggerAriaLabelledBy){const e=this._elementRef.nativeElement;this._triggerAriaLabelledBy=t,t?e.setAttribute("aria-labelledby",t):e.removeAttribute("aria-labelledby")}this.ngControl&&this.updateErrorState()}ngOnChanges(t){t.disabled&&this.stateChanges.next(),t.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this._typeaheadDebounceInterval)}ngOnDestroy(){this._destroy.next(),this._destroy.complete(),this.stateChanges.complete()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck())}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched())}writeValue(t){this.value=t}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel.selected:this._selectionModel.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){const t=this._selectionModel.selected.map(t=>t.viewValue);return this._isRtl()&&t.reverse(),t.join(", ")}return this._selectionModel.selected[0].viewValue}_isRtl(){return!!this._dir&&"rtl"===this._dir.value}_handleKeydown(t){this.disabled||(this.panelOpen?this._handleOpenKeydown(t):this._handleClosedKeydown(t))}_handleClosedKeydown(t){const e=t.keyCode,n=40===e||38===e||37===e||39===e,i=13===e||32===e,r=this._keyManager;if(!r.isTyping()&&i&&!_p(t)||(this.multiple||t.altKey)&&n)t.preventDefault(),this.open();else if(!this.multiple){const e=this.selected;r.onKeydown(t);const n=this.selected;n&&e!==n&&this._liveAnnouncer.announce(n.viewValue,1e4)}}_handleOpenKeydown(t){const e=this._keyManager,n=t.keyCode,i=40===n||38===n,r=e.isTyping();if(i&&t.altKey)t.preventDefault(),this.close();else if(r||13!==n&&32!==n||!e.activeItem||_p(t))if(!r&&this._multiple&&65===n&&t.ctrlKey){t.preventDefault();const e=this.options.some(t=>!t.disabled&&!t.selected);this.options.forEach(t=>{t.disabled||(e?t.select():t.deselect())})}else{const n=e.activeItemIndex;e.onKeydown(t),this._multiple&&i&&t.shiftKey&&e.activeItem&&e.activeItemIndex!==n&&e.activeItem._selectViaInteraction()}else t.preventDefault(),e.activeItem._selectViaInteraction()}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this.disabled||this.panelOpen||(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(Fp(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this._setSelectionByValue(this.ngControl?this.ngControl.value:this._value),this.stateChanges.next()})}_setSelectionByValue(t){if(this._selectionModel.selected.forEach(t=>t.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&t)Array.isArray(t),t.forEach(t=>this._selectValue(t)),this._sortValues();else{const e=this._selectValue(t);e?this._keyManager.updateActiveItem(e):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectValue(t){const e=this.options.find(e=>{if(this._selectionModel.isSelected(e))return!1;try{return null!=e.value&&this._compareWith(e.value,t)}catch(n){return!1}});return e&&this._selectionModel.select(e),e}_initKeyManager(){this._keyManager=new $p(this.options).withTypeAhead(this._typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withAllowedModifierKeys(["shiftKey"]),this._keyManager.tabOut.pipe(Vf(this._destroy)).subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.pipe(Vf(this._destroy)).subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):this._panelOpen||this.multiple||!this._keyManager.activeItem||this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){const t=G(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Vf(t)).subscribe(t=>{this._onSelect(t.source,t.isUserInput),t.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),G(...this.options.map(t=>t._stateChanges)).pipe(Vf(t)).subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}_onSelect(t,e){const n=this._selectionModel.isSelected(t);null!=t.value||this._multiple?(n!==t.selected&&(t.selected?this._selectionModel.select(t):this._selectionModel.deselect(t)),e&&this._keyManager.setActiveItem(t),this.multiple&&(this._sortValues(),e&&this.focus())):(t.deselect(),this._selectionModel.clear(),null!=this.value&&this._propagateChanges(t.value)),n!==this._selectionModel.isSelected(t)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){const t=this.options.toArray();this._selectionModel.sort((e,n)=>this.sortComparator?this.sortComparator(e,n,t):t.indexOf(e)-t.indexOf(n)),this.stateChanges.next()}}_propagateChanges(t){let e=null;e=this.multiple?this.selected.map(t=>t.value):this.selected?this.selected.value:t,this._value=e,this.valueChange.emit(e),this._onChange(e),this.selectionChange.emit(this._getChangeEvent(e)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){this._keyManager&&(this.empty?this._keyManager.setFirstItemActive():this._keyManager.setActiveItem(this._selectionModel.selected[0]))}_canOpen(){var t;return!this._panelOpen&&!this.disabled&&(null===(t=this.options)||void 0===t?void 0:t.length)>0}focus(t){this._elementRef.nativeElement.focus(t)}_getPanelAriaLabelledby(){var t;if(this.ariaLabel)return null;const e=null===(t=this._parentFormField)||void 0===t?void 0:t.getLabelId();return this.ariaLabelledby?(e?e+" ":"")+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){var t;if(this.ariaLabel)return null;const e=null===(t=this._parentFormField)||void 0===t?void 0:t.getLabelId();let n=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(n+=" "+this.ariaLabelledby),n}_panelDoneAnimating(t){this.openedChange.emit(t)}setDescribedByIds(t){this._ariaDescribedby=t.join(" ")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this._panelOpen||!this.empty||this._focused&&!!this._placeholder}}return t.\u0275fac=function(e){return new(e||t)(ko(mp),ko(fl),ko(Nu),ko(cv),ko(ja),ko(up,8),ko(VM,8),ko(HM,8),ko(eM,8),ko(vM,10),Gn("tabindex"),ko(rT),ko(tm),ko(sT,8))},t.\u0275dir=Zt({type:t,viewQuery:function(t,e){if(1&t&&(lu(WM,5),lu(GM,5),lu(bk,5)),2&t){let t;au(t=cu())&&(e.trigger=t.first),au(t=cu())&&(e.panel=t.first),au(t=cu())&&(e._overlayDir=t.first)}},inputs:{ariaLabel:["aria-label","ariaLabel"],id:"id",placeholder:"placeholder",required:"required",multiple:"multiple",disableOptionCentering:"disableOptionCentering",compareWith:"compareWith",value:"value",typeaheadDebounceInterval:"typeaheadDebounceInterval",panelClass:"panelClass",ariaLabelledby:["aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",sortComparator:"sortComparator"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},features:[uo,he]}),t})(),hT=(()=>{class t extends cT{constructor(){super(...arguments),this._scrollTop=0,this._triggerFontSize=0,this._transformOrigin="top",this._offsetY=0,this._positions=[{originX:"start",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom"}]}_calculateOverlayScroll(t,e,n){const i=this._getItemHeight();return Math.min(Math.max(0,i*t-e+i/2),n)}ngOnInit(){super.ngOnInit(),this._viewportRuler.change().pipe(Vf(this._destroy)).subscribe(()=>{this.panelOpen&&(this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._changeDetectorRef.markForCheck())})}open(){super._canOpen()&&(super.open(),this._triggerRect=this.trigger.nativeElement.getBoundingClientRect(),this._triggerFontSize=parseInt(getComputedStyle(this.trigger.nativeElement).fontSize||"0"),this._calculateOverlayPosition(),this._ngZone.onStable.pipe(Fp(1)).subscribe(()=>{this._triggerFontSize&&this._overlayDir.overlayRef&&this._overlayDir.overlayRef.overlayElement&&(this._overlayDir.overlayRef.overlayElement.style.fontSize=`${this._triggerFontSize}px`)}))}_scrollOptionIntoView(t){const e=Mv(t,this.options,this.optionGroups),n=this._getItemHeight();var i,r,s;this.panel.nativeElement.scrollTop=0===t&&1===e?0:(r=n,(i=(t+e)*n)<(s=this.panel.nativeElement.scrollTop)?i:i+r>s+256?Math.max(0,i-256+r):s)}_positioningSettled(){this._calculateOverlayOffsetX(),this.panel.nativeElement.scrollTop=this._scrollTop}_panelDoneAnimating(t){this.panelOpen?this._scrollTop=0:(this._overlayDir.offsetX=0,this._changeDetectorRef.markForCheck()),super._panelDoneAnimating(t)}_getChangeEvent(t){return new aT(this,t)}_calculateOverlayOffsetX(){const t=this._overlayDir.overlayRef.overlayElement.getBoundingClientRect(),e=this._viewportRuler.getViewportSize(),n=this._isRtl(),i=this.multiple?56:32;let r;if(this.multiple)r=40;else if(this.disableOptionCentering)r=16;else{let t=this._selectionModel.selected[0]||this.options.first;r=t&&t.group?32:16}n||(r*=-1);const s=0-(t.left+r-(n?i:0)),o=t.right+r-e.width+(n?0:i);s>0?r+=s+8:o>0&&(r-=o+8),this._overlayDir.offsetX=Math.round(r),this._overlayDir.overlayRef.updatePosition()}_calculateOverlayOffsetY(t,e,n){const i=this._getItemHeight(),r=(i-this._triggerRect.height)/2,s=Math.floor(iT/i);let o;return this.disableOptionCentering?0:(o=0===this._scrollTop?t*i:this._scrollTop===n?(t-(this._getItemCount()-s))*i+(i-(this._getItemCount()*i-iT)%i):e-i/2,Math.round(-1*o-r))}_checkOverlayWithinViewport(t){const e=this._getItemHeight(),n=this._viewportRuler.getViewportSize(),i=this._triggerRect.top-8,r=n.height-this._triggerRect.bottom-8,s=Math.abs(this._offsetY),o=Math.min(this._getItemCount()*e,iT)-s-this._triggerRect.height;o>r?this._adjustPanelUp(o,r):s>i?this._adjustPanelDown(s,i,t):this._transformOrigin=this._getOriginBasedOnOption()}_adjustPanelUp(t,e){const n=Math.round(t-e);this._scrollTop-=n,this._offsetY-=n,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop<=0&&(this._scrollTop=0,this._offsetY=0,this._transformOrigin="50% bottom 0px")}_adjustPanelDown(t,e,n){const i=Math.round(t-e);if(this._scrollTop+=i,this._offsetY+=i,this._transformOrigin=this._getOriginBasedOnOption(),this._scrollTop>=n)return this._scrollTop=n,this._offsetY=0,void(this._transformOrigin="50% top 0px")}_calculateOverlayPosition(){const t=this._getItemHeight(),e=this._getItemCount(),n=Math.min(e*t,iT),i=e*t-n;let r;r=this.empty?0:Math.max(this.options.toArray().indexOf(this._selectionModel.selected[0]),0),r+=Mv(r,this.options,this.optionGroups);const s=n/2;this._scrollTop=this._calculateOverlayScroll(r,s,i),this._offsetY=this._calculateOverlayOffsetY(r,s,i),this._checkOverlayWithinViewport(i)}_getOriginBasedOnOption(){const t=this._getItemHeight(),e=(t-this._triggerRect.height)/2;return`50% ${Math.abs(this._offsetY)-e+t/2}px 0px`}_getItemHeight(){return 3*this._triggerFontSize}_getItemCount(){return this.options.length+this.optionGroups.length}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=Hn(t)))(n||t)}}(),t.\u0275cmp=Ht({type:t,selectors:[["mat-select"]],contentQueries:function(t,e,n){if(1&t&&(uu(n,uT,5),uu(n,Ov,5),uu(n,kv,5)),2&t){let t;au(t=cu())&&(e.customTrigger=t.first),au(t=cu())&&(e.options=t),au(t=cu())&&(e.optionGroups=t)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","true",1,"mat-select"],hostVars:20,hostBindings:function(t,e){1&t&&Lo("keydown",function(t){return e._handleKeydown(t)})("focus",function(){return e._onFocus()})("blur",function(){return e._onBlur()}),2&t&&(wo("id",e.id)("tabindex",e.tabIndex)("aria-controls",e.panelOpen?e.id+"-panel":null)("aria-expanded",e.panelOpen)("aria-label",e.ariaLabel||null)("aria-required",e.required.toString())("aria-disabled",e.disabled.toString())("aria-invalid",e.errorState)("aria-describedby",e._ariaDescribedby||null)("aria-activedescendant",e._getAriaActiveDescendant()),ta("mat-select-disabled",e.disabled)("mat-select-invalid",e.errorState)("mat-select-required",e.required)("mat-select-empty",e.empty)("mat-select-multiple",e.multiple))},inputs:{disabled:"disabled",disableRipple:"disableRipple",tabIndex:"tabIndex"},exportAs:["matSelect"],features:[Ra([{provide:WO,useExisting:t},{provide:wv,useExisting:t}]),uo],ngContentSelectors:tT,decls:9,vars:12,consts:[["cdk-overlay-origin","",1,"mat-select-trigger",3,"click"],["origin","cdkOverlayOrigin","trigger",""],[1,"mat-select-value",3,"ngSwitch"],["class","mat-select-placeholder mat-select-min-line",4,"ngSwitchCase"],["class","mat-select-value-text",3,"ngSwitch",4,"ngSwitchCase"],[1,"mat-select-arrow-wrapper"],[1,"mat-select-arrow"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayMinWidth","cdkConnectedOverlayOffsetY","backdropClick","attach","detach"],[1,"mat-select-placeholder","mat-select-min-line"],[1,"mat-select-value-text",3,"ngSwitch"],["class","mat-select-min-line",4,"ngSwitchDefault"],[4,"ngSwitchCase"],[1,"mat-select-min-line"],[1,"mat-select-panel-wrap"],["role","listbox","tabindex","-1",3,"ngClass","keydown"],["panel",""]],template:function(t,e){if(1&t&&(Ho(JM),Fo(0,"div",0,1),Lo("click",function(){return e.toggle()}),Fo(3,"div",2),Ao(4,XM,2,1,"span",3),Ao(5,ZM,3,2,"span",4),Oo(),Fo(6,"div",5),Mo(7,"div",6),Oo(),Oo(),Ao(8,QM,4,14,"ng-template",7),Lo("backdropClick",function(){return e.close()})("attach",function(){return e._onAttached()})("detach",function(){return e.close()})),2&t){const t=Eo(1);wo("aria-owns",e.panelOpen?e.id+"-panel":null),Kr(3),Do("ngSwitch",e.empty),wo("id",e._valueId),Kr(1),Do("ngSwitchCase",!0),Kr(1),Do("ngSwitchCase",!1),Kr(3),Do("cdkConnectedOverlayPanelClass",e._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",e._scrollStrategy)("cdkConnectedOverlayOrigin",t)("cdkConnectedOverlayOpen",e.panelOpen)("cdkConnectedOverlayPositions",e._positions)("cdkConnectedOverlayMinWidth",null==e._triggerRect?null:e._triggerRect.width)("cdkConnectedOverlayOffsetY",e._offsetY)}},directives:[_k,Ch,Ah,bk,Eh,mh],styles:['.mat-select{display:inline-block;width:100%;outline:none}.mat-select-trigger{display:inline-table;cursor:pointer;position:relative;box-sizing:border-box}.mat-select-disabled .mat-select-trigger{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.mat-select-value{display:table-cell;max-width:0;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-select-arrow-wrapper{display:table-cell;vertical-align:middle}.mat-form-field-appearance-fill .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-outline .mat-select-arrow-wrapper{transform:translateY(-25%)}.mat-form-field-appearance-standard.mat-form-field-has-label .mat-select:not(.mat-select-empty) .mat-select-arrow-wrapper{transform:translateY(-50%)}.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable.mat-form-field-appearance-standard .mat-select.mat-select-empty .mat-select-arrow-wrapper{transition:none}.mat-select-arrow{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;margin:0 4px}.mat-select-panel-wrap{flex-basis:100%}.mat-select-panel{min-width:112px;max-width:280px;overflow:auto;-webkit-overflow-scrolling:touch;padding-top:0;padding-bottom:0;max-height:256px;min-width:100%;border-radius:4px;outline:0}.cdk-high-contrast-active .mat-select-panel{outline:solid 1px}.mat-select-panel .mat-optgroup-label,.mat-select-panel .mat-option{font-size:inherit;line-height:3em;height:3em}.mat-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-form-field-flex{cursor:pointer}.mat-form-field-type-mat-select .mat-form-field-label{width:calc(100% - 18px)}.mat-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}._mat-animation-noopable .mat-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-select-placeholder{color:transparent;-webkit-text-fill-color:transparent;transition:none;display:block}.mat-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;opacity:0}\n'],encapsulation:2,data:{animation:[eT.transformPanelWrap,eT.transformPanel]},changeDetection:0}),t})(),dT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({providers:[oT],imports:[[Rh,wk,Tv,rv],gp,iM,Tv,rv]}),t})(),fT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Rh,dT]]}),t})(),pT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Rh,dT,fT]]}),t})(),mT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Rh,AD,Uk,iD,v_]]}),t})(),gT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Rh]]}),t})(),yT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Rh,kO,mT,gT,CO],kO,mT,gT,CO]}),t})();function vT(t,e,n){return n?vT(t,e).pipe(F(t=>h(t)?n(...t):n(t))):new x(n=>{const i=(...t)=>n.next(1===t.length?t[0]:t);let r;try{r=t(i)}catch(s){return void n.error(s)}if(o(e))return()=>e(i,r)})}const _T={datasetsPath:"assets/generated/aggregate-table-data.json",subLabel:"Drug",subLabelFlag:"Tox lab flag",timeSliderSource:["deaths","DOD"]};var bT=(()=>(function(t){t.pie="pie-chart",t.verticalBar="vertical-bar-chart",t.horizontalBar="horizontal-bar-chart"}(bT||(bT={})),bT))();const xT={[bT.pie]:{maxDistinctValues:4},[bT.verticalBar]:{maxDistinctValues:50},[bT.horizontalBar]:{maxDistinctValues:500}};function wT(t){return null!=t?t:{ids:[],entities:{}}}let CT=(()=>{let t=class extends OE{selectId(t){return"string"==typeof t?t:t.name}};return t.\u0275fac=function(){let e;return function(n){return(e||(e=Hn(t)))(n||t)}}(),t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t=MC([kE(),iE({name:"datasets",defaults:wT()})],t),t})();var AT=(()=>(function(t){t.all="all",t.sub="sub",t.nonSub="non-sub"}(AT||(AT={})),AT))();let ET=(()=>{let t=class extends OE{constructor(t){super(),this.datasetsState=t}get subLabel$(){return this.state$.pipe(OC("subLabel"),Rf())}get subLabelFlag$(){return this.state$.pipe(OC("subLabelFlag"),Rf())}selectId(t,e){return"object"==typeof t&&"dataset"in t&&(e=t,t=t.dataset),`${this.datasetsState.selectId(t)}:${"string"==typeof e?e:e.name}`}getVariable(t){return this.entities$.pipe(OC(t),Rf())}getVariables(t,e){const n=this.createVariableSelector(t,e);return this.entitiesArray$.pipe(F(t=>t.filter(n)))}getSubVariables(t){return this.getVariables(t,AT.sub)}getMetadata(t){return this.getVariable(t).pipe(F(t=>{if(void 0===t)return[];const e=[{label:"Type",value:t.type},{label:"Description",value:t.description},{label:"Missing values",value:`${t.percentMissing}%`}];if("summary"===t.distribution.type){const{distribution:{summary:{distinct:n,min:i,max:r}}}=t;e.push({label:"Distinct entries",value:""+n},{label:"Minimum value/length",value:""+i},{label:"Maximum value/length",value:""+r})}return e}))}createVariableSelector(t,e){const n=[];if(void 0!==t){const{datasetsState:e}=this,i=e.selectId.bind(e),r=i(t);n.push(t=>i(t.dataset)===r)}const{snapshot:{subLabelFlag:i}}=this;switch(e){case AT.nonSub:n.push(t=>t.description!==i);break;case AT.sub:n.push(t=>t.description===i)}return 0===n.length?()=>!0:1===n.length?n[0]:t=>n.every(e=>e(t))}};return t.\u0275fac=function(e){return new(e||t)(pi(CT))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),MC([wE()],t.prototype,"subLabel$",null),MC([wE()],t.prototype,"subLabelFlag$",null),t=MC([kE(),iE({name:"datasetVariables",defaults:Object.assign(Object.assign({},wT()),{subLabel:_T.subLabel,subLabelFlag:_T.subLabelFlag})})],t),t})();const kT={leading:!0,trailing:!1};class DT{constructor(t,e,n,i){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=i}call(t,e){return e.subscribe(new ST(t,this.duration,this.scheduler,this.leading,this.trailing))}}class ST extends y{constructor(t,e,n,i,r){super(t),this.duration=e,this.scheduler=n,this.leading=i,this.trailing=r,this._hasTrailingValue=!1,this._trailingValue=null}_next(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(FT,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)}}function FT(t){const{subscriber:e}=t;e.clearThrottle()}var OT=(()=>(function(t){t.pie="pie-chart",t.histogram="histogram",t.verticalBar="bar-chart",t.horizontalBar="horizontal-bar-chart",t.summary="summary"}(OT||(OT={})),OT))();function MT(t,e=[],n={}){return{$schema:"https://vega.github.io/schema/vega-lite/v5.json",width:"container",autosize:{resize:!0},data:{name:"distribution"},view:{strokeOpacity:0},config:{concat:{spacing:200,columns:2}},hconcat:[{title:{text:`${t.dataset} by ${t.name}`,align:"left",anchor:"start"},view:{strokeOpacity:0},layer:[{data:{values:[{y:1.7,label:"Type:"},{y:1.55,label:"Description:"},{y:1.4,label:"Missing values:"}]},mark:{type:"text",align:"left",fontWeight:"bold",xOffset:-50},encoding:{text:{type:"nominal",field:"label"},y:{type:"quantitative",field:"y",axis:null},color:{value:"#212121"}}},{data:{values:[{y:1.7,value:`${t.type}`},{y:1.55,value:`${t.description}`},{y:1.4,value:`${t.percentMissing.toFixed(1)}%`}]},mark:{type:"text",align:"left",xOffset:40},encoding:{text:{type:"nominal",field:"value"},y:{type:"quantitative",field:"y",axis:null},color:{value:"#212121"}}}]},{view:{strokeOpacity:0},width:500,transform:[{aggregate:[{op:"sum",field:"count",as:"total"}],groupby:["value"]},{calculate:'format(datum.total, ",")',as:"totalFinal"}],encoding:n.flipAxes?{y:{field:"value",type:"nominal",axis:{titlePadding:10,minExtent:0,titleColor:"#212121",titleFontSize:12,titleFontWeight:"bold",tickColor:"#757575",domainColor:"#757575",labelFlush:!1,grid:!1,title:n.yLabel}},x:{field:"total",type:"quantitative",title:"Count of Records",axis:{titlePadding:10,titleColor:"#212121",titleFontSize:12,titleFontWeight:"bold",gridColor:"#e0e0e0",tickColor:"#757575",domainColor:"#757575",labelFontSize:10,title:n.xLabel}}}:{x:{field:"value",type:"nominal",axis:{titlePadding:10,minExtent:0,titleColor:"#212121",titleFontSize:12,titleFontWeight:"bold",tickColor:"#757575",domainColor:"#757575",labelFlush:!1,grid:!1,title:n.xLabel,labelAngle:0}},y:{field:"total",type:"quantitative",title:"Count of Records",axis:{titlePadding:10,titleColor:"#212121",titleFontSize:12,titleFontWeight:"bold",gridColor:"#e0e0e0",tickColor:"#757575",domainColor:"#757575",labelFontSize:10,title:n.yLabel}}},layer:[{mark:{type:"bar",width:24,color:"#77ACF0",strokeWidth:1,stroke:"white",orient:n.flipAxes?"horizontal":"vertical"}},{mark:{type:"text",align:n.flipAxes?"left":"center",baseline:"middle",dx:n.flipAxes?3:0,dy:n.flipAxes?0:-10},encoding:{text:{field:"totalFinal",type:"nominal"}}}]}],datasets:{distribution:e}}}function TT(t,e=[]){return{$schema:"https://vega.github.io/schema/vega-lite/v5.json",width:"container",height:350,data:{name:"distribution"},view:{strokeOpacity:0},transform:[{aggregate:[{op:"sum",field:"count",as:"total"}],groupby:["value"]},{joinaggregate:[{op:"sum",field:"total",as:"totalCount"}]},{calculate:'format(100 * datum.total / datum.totalCount, ",.2f") + "%"',as:"percent"},{calculate:'"(" + datum.total + ")"',as:"total2"}],encoding:{color:{field:"value",type:"nominal",scale:{domain:["True","False"],range:["#77ACF0","#2a4d87"]},legend:{orient:"none",title:null,symbolType:"square",legendX:20,legendY:60,labelFontWeight:"bold"}}},layer:[{title:{text:`${t.dataset} by ${t.name}`,align:"left",anchor:"start"},mark:{type:"arc",outerRadius:130,strokeWidth:2,stroke:"white"},encoding:{theta:{field:"total",type:"quantitative",stack:!0}}},{mark:{type:"text",radius:170,fill:"black"},encoding:{text:{field:"total2",type:"nominal"},theta:{field:"total",type:"quantitative",stack:!0}}},{mark:{type:"text",radius:150,fontWeight:"bold",fill:"black"},encoding:{text:{field:"percent",type:"nominal"},theta:{field:"total",type:"quantitative",stack:!0}}},{data:{values:[{y:1.7,label:"Type:"},{y:1.6,label:"Description:"},{y:1.5,label:"Missing values:"}]},mark:{type:"text",align:"left",fontWeight:"bold",yOffset:100,xOffset:-560},encoding:{text:{type:"nominal",field:"label"},y:{type:"quantitative",field:"y",axis:null},color:{value:"black"}}},{data:{values:[{y:1.7,value:`${t.type}`},{y:1.6,value:`${t.description}`},{y:1.5,value:`${t.percentMissing.toFixed(1)}%`}]},mark:{type:"text",align:"left",yOffset:100,xOffset:-470},encoding:{text:{type:"nominal",field:"value"},y:{type:"quantitative",field:"y",axis:null},color:{value:"black"}}}],datasets:{distribution:e}}}function PT(t=[]){return{$schema:"https://vega.github.io/schema/vega-lite/v5.json",height:150,width:"container",data:{name:"distribution"},view:{strokeOpacity:0},title:{text:"Select Date Range to Update Datasets",dy:-20,dx:-360},layer:[{mark:{type:"line"},params:[{name:"period",select:{type:"interval",encodings:["x"],mark:{fill:"#6ea7ef",fillOpacity:.15}}}],encoding:{x:{field:"period",type:"temporal",title:"Year",axis:{titlePadding:10,minExtent:0,titleFontSize:14,tickColor:"#757575",domainColor:"#757575",labelFlush:!1,labelExpr:'[timeFormat(datum.value, "%m") == "01" ? timeFormat(datum.value, "%Y") : ""]',gridDash:{condition:{test:{field:"value",timeUnit:"month",equal:7},value:[2,2]},value:[]},gridColor:{condition:{test:{field:"value",timeUnit:"month",equal:1},value:"#BDBDBD"},value:"#e0e0e0"}}},y:{aggregate:"sum",field:"count",type:"quantitative",title:"# Deaths",axis:{titlePadding:10,titleFontSize:14,gridColor:"#e0e0e0",tickColor:"#757575",domainColor:"#757575",gridOpacity:{condition:{test:{field:"index",equal:1},value:0},value:1},tickOpacity:{condition:{test:{field:"index",equal:1},value:0},value:1},labelFontSize:{condition:{test:{field:"index",equal:1},value:0},value:10}}},color:{value:"#6ea7ef"}}}],datasets:{distribution:t}}}let RT=(()=>{class t{constructor(){this.createBarChart=MT,this.createPieChart=TT,this.createTimeSlider=PT}createChart(t){const{type:e,distribution:{type:n,summary:{distinct:i}}}=t;if(Object.values(OT).includes(n)&&n!==OT.summary)switch(n){case OT.pie:if(i<=2&&"BOOLEAN"===e)return TT(t);case OT.histogram:case OT.verticalBar:if(i<=xT[bT.verticalBar].maxDistinctValues)return this.createBarChart(t,[],{xLabel:t.name,yLabel:"Count of Records"});case OT.horizontalBar:if(i<=xT[bT.horizontalBar].maxDistinctValues||"DATE"===e)return this.createBarChart(t,[],{flipAxes:!0,xLabel:"# Total Deaths",yLabel:t.name});default:return}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=pt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var BT=n(593);function IT(t){const e=new Date(t);return Number.isNaN(+e)?void 0:e}let NT=(()=>{class t{constructor(t){this.http=t}load(t){const{distribution:{url:e}}=t,n=this.getTransformHandlers(t),i={header:!0,delimiter:",",skipEmptyLines:!0,dynamicTyping:this.getDynamicTypingConfig(t),transform:(t,e)=>{const i=n[e];return i?i(t):t}};return this.http.get(e,{responseType:"text"}).pipe(F(t=>(0,BT.parse)(t,i)),F(e=>this.aggregateResult(t,e.data)))}getDynamicTypingConfig(t){return{value:void 0===this.getValueTransform(t)}}getTransformHandlers(t){return{period:IT,value:this.getValueTransform(t),count:Number}}aggregateResult(t,e){switch(t.type){case"DATE":return this.aggregateByYear(e);default:return e}}getValueTransform(t){switch(t.type){case"BOOLEAN":return t=>"0"===t?"False":"True";case"DATE":return IT;default:return}}aggregateByYear(t){const e=t.reduce((t,{value:e,count:n})=>{var i,r;const s=null===(i=null==e?void 0:e.getFullYear)||void 0===i?void 0:i.call(e),o=(null!==(r=t.get(s))&&void 0!==r?r:0)+n;return t.set(s,o)},new Map);return Array.from(e.keys()).sort((t,e)=>void 0===t?1:void 0===e?-1:t-e).map(t=>{const n=void 0!==t?new Date(t,0):void 0;return{period:n,value:null!=n?n:"<date unavailable>",count:e.get(t)}})}}return t.\u0275fac=function(e){return new(e||t)(pi(Vd))},t.\u0275prov=pt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),LT=(()=>{class t{constructor(t,e,n){this.chartFactory=t,this.dataLoader=e,this.variableStore=n,this.visualizations=[],this.filterSources$=new sp(1),this.filterSources$.next(bd(void 0))}setVariables(t){this.visualizations=t.map(t=>{const e=this.variableStore.selectId(t),n=this.variableStore.getMetadata(e),i=this.chartFactory.createChart(t);return{variable:t,metadata:n,spec:i,data:i&&this.createDataSource(t)}})}setFilterSource(t){this.filterSources$.next(t)}createDataSource(t){const e=this.filterSources$.pipe(kD(),Gf(void 0));return C_([this.dataLoader.load(t),e]).pipe(function(t,e=Nf,n=kT){return i=>i.lift(new DT(t,e,n.leading,n.trailing))}(100)).pipe(F(([t,e])=>this.filterData(t,e)))}filterData(t,e){if(void 0===e)return t;const[n,i]=e;return t.filter(({period:t})=>void 0===t||n<=+t&&+t<=i)}}return t.\u0275fac=function(e){return new(e||t)(pi(RT),pi(NT),pi(ET))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();function $T(t,e){if(1&t&&(Fo(0,"mat-option",6),fa(1),Oo()),2&t){const t=e.$implicit;Do("value",t),Kr(1),pa(t)}}function zT(t,e){if(1&t){const t=Ro();Fo(0,"div",11),Lo("click",function(){const e=Be(t).$implicit;return Vo(2).changeSelection(e)}),fa(1),Oo()}if(2&t){const t=e.$implicit;ta("selected",t===Vo(2).selection),Kr(1),pa(t)}}function jT(t,e){if(1&t){const t=Ro();Fo(0,"div",18),Lo("click",function(){const e=Be(t).$implicit;return Vo(3).subOptionFilter=e}),fa(1),Oo()}if(2&t){const t=e.$implicit,n=Vo(3);ta("selected",n.subOptionFilter===t)("disabled",!n.validSubOption(t)),Kr(1),pa(t)}}function UT(t,e){if(1&t){const t=Ro();Fo(0,"div",11),Lo("click",function(){const e=Be(t).$implicit;return Vo(3).changeSelection(e)}),fa(1),Oo()}if(2&t){const t=e.$implicit;ta("selected",t===Vo(3).selection),Kr(1),pa(t)}}function VT(t,e){1&t&&(Fo(0,"div",19),fa(1,"No options match the selected filter."),Oo())}function qT(t,e){if(1&t&&(Fo(0,"div",12),Fo(1,"div",13),Fo(2,"div",14),fa(3),Oo(),Fo(4,"div",15),Ao(5,jT,2,5,"div",16),Oo(),Oo(),Fo(6,"div",8),Ao(7,UT,2,3,"div",9),Ao(8,VT,2,0,"div",17),Oo(),Oo()),2&t){const t=Vo(2);Kr(3),ma("",t.subLabel,":"),Kr(2),Do("ngForOf",t.LETTERS),Kr(2),Do("ngForOf",t.getFilteredSubOptions()),Kr(1),Do("ngIf",t.getFilteredSubOptions().length<1)}}function HT(t,e){if(1&t&&(Fo(0,"div",7),Fo(1,"div",8),Ao(2,zT,2,3,"div",9),Oo(),Ao(3,qT,9,4,"div",10),Oo()),2&t){const t=Vo();Kr(2),Do("ngForOf",t.options),Kr(1),Do("ngIf",t.subOptions.length>0)}}let WT=(()=>{class t{constructor(){this.clsName="agc-sub-selector",this.label="",this.selection="",this.options=[],this.subLabel="",this.subOptions=[],this.selectionChange=new Yl,this.showMenu=!1,this.subOptionFilter="A",this.LETTERS=[...Array(26)].map((t,e)=>String.fromCharCode(e+65))}ngOnInit(){this.subOptions.length>0&&(this.subOptionFilter=this.subOptions[0].charAt(0))}ngOnChanges(t){"selection"in t&&(this.showMenu=!1)}get allOptions(){return this.subOptions.length<1?this.options:this.options.concat(this.subOptions)}get enabled(){return this.options.length>0}toggleMenu(){this.showMenu=!(!this.options||this.options.length<=0||this.showMenu)}changeSelection(t){this.selection=t===this.selection?"":t,this.showMenu=!1,this.selectionChange.emit(this.selection)}getFilteredSubOptions(){return""===this.subOptionFilter?this.subOptions:this.subOptions.filter(t=>t.charAt(0).toLowerCase()===this.subOptionFilter.toLowerCase())}validSubOption(t){return!(!this.subOptions||this.subOptions.map(t=>t.charAt(0).toLowerCase()).indexOf(t.toLowerCase())<0)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ht({type:t,selectors:[["agc-sub-selector"]],hostVars:2,hostBindings:function(t,e){2&t&&ea(e.clsName)},inputs:{label:"label",selection:"selection",options:"options",subLabel:"subLabel",subOptions:"subOptions"},outputs:{selectionChange:"selectionChange"},features:[he],decls:8,vars:4,consts:[[1,"select-container"],["id","selection"],["aria-label","selection",3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[1,"select-cover",3,"click"],["class","select-menu mat-elevation-z3",4,"ngIf"],[3,"value"],[1,"select-menu","mat-elevation-z3"],[1,"options"],["class","option",3,"selected","click",4,"ngFor","ngForOf"],["class","sub-options-container",4,"ngIf"],[1,"option",3,"click"],[1,"sub-options-container"],[1,"sub-options-header"],[1,"option"],[1,"sub-options-filters"],["class","letter-filter",3,"selected","disabled","click",4,"ngFor","ngForOf"],["class","empty-message",4,"ngIf"],[1,"letter-filter",3,"click"],[1,"empty-message"]],template:function(t,e){1&t&&(Fo(0,"div",0),Fo(1,"mat-form-field"),Fo(2,"mat-label",1),fa(3),Oo(),Fo(4,"mat-select",2),Lo("valueChange",function(t){return e.selection=t}),Ao(5,$T,2,2,"mat-option",3),Oo(),Oo(),Fo(6,"div",4),Lo("click",function(){return e.toggleMenu()}),Oo(),Ao(7,HT,4,2,"div",5),Oo()),2&t&&(Kr(3),pa(e.label),Kr(1),Do("value",e.selection),Kr(1),Do("ngForOf",e.allOptions),Kr(2),Do("ngIf",e.showMenu))},directives:[nM,XO,hT,yh,_h,Ov],styles:["[_nghost-%COMP%]   .select-container[_ngcontent-%COMP%]{position:relative;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content}[_nghost-%COMP%]   .select-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{z-index:1}[_nghost-%COMP%]   .select-container[_ngcontent-%COMP%]   .select-cover[_ngcontent-%COMP%]{width:100%;height:100%;z-index:2;position:absolute;left:0;top:0;cursor:pointer}[_nghost-%COMP%]   .select-container[_ngcontent-%COMP%]   .select-cover.inactive[_ngcontent-%COMP%]{cursor:disabled!important}[_nghost-%COMP%]   .select-container[_ngcontent-%COMP%]   .select-menu[_ngcontent-%COMP%]{width:45rem;min-height:5rem;max-height:45vh;overflow:auto;position:absolute;left:0;display:block;margin-top:-1rem;background-color:#fff;padding:.5rem;z-index:3}[_nghost-%COMP%]   .select-container[_ngcontent-%COMP%]   .select-menu.hidden[_ngcontent-%COMP%]{display:none}[_nghost-%COMP%]   .select-container[_ngcontent-%COMP%]   .select-menu[_ngcontent-%COMP%]   .sub-options-container[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .select-container[_ngcontent-%COMP%]   .select-menu[_ngcontent-%COMP%]   .sub-options-container[_ngcontent-%COMP%]   .sub-options-header[_ngcontent-%COMP%]{width:100%;display:flex;padding:.5rem}[_nghost-%COMP%]   .select-container[_ngcontent-%COMP%]   .select-menu[_ngcontent-%COMP%]   .sub-options-container[_ngcontent-%COMP%]   .sub-options-header[_ngcontent-%COMP%]   .sub-options-filters[_ngcontent-%COMP%]{width:100%;display:flex;padding:.75rem 0;cursor:pointer}[_nghost-%COMP%]   .select-container[_ngcontent-%COMP%]   .select-menu[_ngcontent-%COMP%]   .sub-options-container[_ngcontent-%COMP%]   .sub-options-header[_ngcontent-%COMP%]   .sub-options-filters[_ngcontent-%COMP%]   .letter-filter[_ngcontent-%COMP%]{padding:.25rem;color:#000;border-bottom:1px solid #fff}[_nghost-%COMP%]   .select-container[_ngcontent-%COMP%]   .select-menu[_ngcontent-%COMP%]   .sub-options-container[_ngcontent-%COMP%]   .sub-options-header[_ngcontent-%COMP%]   .sub-options-filters[_ngcontent-%COMP%]   .letter-filter.selected[_ngcontent-%COMP%]{background-color:#fafafa;font-weight:700;color:#000;border-bottom:1px solid #000}[_nghost-%COMP%]   .select-container[_ngcontent-%COMP%]   .select-menu[_ngcontent-%COMP%]   .sub-options-container[_ngcontent-%COMP%]   .sub-options-header[_ngcontent-%COMP%]   .sub-options-filters[_ngcontent-%COMP%]   .letter-filter.disabled[_ngcontent-%COMP%]{color:#d3d3d3;cursor:not-allowed}[_nghost-%COMP%]   .options[_ngcontent-%COMP%]{width:100%;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;display:flex;flex-wrap:wrap;flex-basis:24%}[_nghost-%COMP%]   .options[_ngcontent-%COMP%]   .option[_ngcontent-%COMP%]:hover{background-color:#fafafa;cursor:pointer}[_nghost-%COMP%]   .options[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]{width:100%;text-align:center;font-style:italic;padding-bottom:1rem}[_nghost-%COMP%]   .option[_ngcontent-%COMP%]{width:11rem;min-width:11rem;padding:1rem 0;text-align:center;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]   .option.selected[_ngcontent-%COMP%]{background-color:#fafafa}"],changeDetection:0}),t})();function GT(t,e){if(1&t&&(Fo(0,"mat-option",7),fa(1),Oo()),2&t){const t=e.$implicit;Do("value",e.index),Kr(1),pa(t.name)}}function XT(t,e){if(1&t&&(Fo(0,"div",8),fa(1),Oo()),2&t){const t=Vo();Kr(1),pa(t.selectedDataset.description)}}let YT=(()=>{class t{constructor(){this.clsName="agc-table-data-selector",this.datasets=[],this.variables=[],this.subLabel="",this.subVariables=[],this.datasetChange=new Yl,this.dataVariableChange=new Yl,this.selectAll=new Yl}get variableNames(){return this.variables.map(t=>t.name)}get subVariableNames(){return this.subVariables.map(t=>t.name)}setDataset(t){void 0!==t&&t!==this.selectedDataset&&(this.selectedDataset=t,this.selectedVariable=void 0,this.datasetChange.emit(t))}setVariableFromName(t){var e;if(void 0!==this.selectedDataset){const n=null!==(e=this.variables.find(e=>e.name===t))&&void 0!==e?e:this.subVariables.find(e=>e.name===t);(null==n?void 0:n.dataset)===this.selectedDataset.name&&(this.selectedVariable=n,this.dataVariableChange.emit(n))}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ht({type:t,selectors:[["agc-table-data-selector"]],hostVars:2,hostBindings:function(t,e){2&t&&ea(e.clsName)},inputs:{datasets:"datasets",variables:"variables",subLabel:"subLabel",subVariables:"subVariables"},outputs:{datasetChange:"datasetChange",dataVariableChange:"dataVariableChange",selectAll:"selectAll"},decls:10,vars:7,consts:[[1,"selections-container"],["id","datasetLabel"],["aria-label","datasetLabel",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["label","Data Variable",3,"options","subLabel","subOptions","selection","selectionChange"],["mat-raised-button","",1,"all",3,"disabled","click"],["class","description",4,"ngIf"],[3,"value"],[1,"description"]],template:function(t,e){if(1&t&&(Fo(0,"div",0),Fo(1,"mat-form-field"),Fo(2,"mat-label",1),fa(3,"Dataset"),Oo(),Fo(4,"mat-select",2),Lo("selectionChange",function(t){return e.setDataset(e.datasets[t.value])}),Ao(5,GT,2,2,"mat-option",3),Oo(),Oo(),Fo(6,"agc-sub-selector",4),Lo("selectionChange",function(t){return e.setVariableFromName(t)}),Oo(),Fo(7,"button",5),Lo("click",function(){return e.selectAll.emit()}),fa(8," Select All Variables "),Oo(),Oo(),Ao(9,XT,2,1,"div",6)),2&t){let t;Kr(5),Do("ngForOf",e.datasets),Kr(1),Do("options",e.variableNames)("subLabel",e.subLabel)("subOptions",e.subVariableNames)("selection",null!==(t=null==e.selectedVariable?null:e.selectedVariable.name)&&void 0!==t?t:""),Kr(1),Do("disabled",void 0===e.selectedDataset),Kr(2),Do("ngIf",null==e.selectedDataset?null:e.selectedDataset.description)}},directives:[nM,XO,hT,yh,WT,_h,Ov],styles:["[_nghost-%COMP%]   .selections-container[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]   .selections-container[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:first-of-type{margin-right:2rem}[_nghost-%COMP%]   .selections-container[_ngcontent-%COMP%]   .all[_ngcontent-%COMP%]{margin-left:2rem;margin-bottom:1.25em}[_nghost-%COMP%]   .description[_ngcontent-%COMP%]{margin-top:3rem}"],changeDetection:0}),t})();function KT(t,e){1&t&&Mo(0,"mat-spinner")}let ZT=(()=>{class t{constructor(){this.clsName="agc-lazy-visualization",this.data=[],this.autosize={},this.loading=!0}ngOnChanges(t){"spec"in t?this.loading=!0:("dataBindingName"in t||"data"in t)&&this.attachData()}setView(t){return RC(this,void 0,void 0,function*(){this.vegaInstance=t,yield this.attachData()})}attachData(){var t,e;return RC(this,void 0,void 0,function*(){null===(t=this.vegaInstance)||void 0===t||t.data(this.dataBindingName,this.data),yield null===(e=this.vegaInstance)||void 0===e?void 0:e.runAsync()})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ht({type:t,selectors:[["agc-lazy-visualization"]],hostVars:2,hostBindings:function(t,e){2&t&&ea(e.clsName)},inputs:{spec:"spec",dataBindingName:"dataBindingName",data:"data",autosize:"autosize",options:"options"},features:[he],decls:2,vars:4,consts:[[1,"visualization",3,"spec","autosize","options","viewChange","viewLoading"],[4,"ngIf"]],template:function(t,e){1&t&&(Fo(0,"ngx-vega",0),Lo("viewChange",function(t){return e.setView(t)})("viewLoading",function(t){return e.loading=t}),Oo(),Ao(1,KT,1,0,"mat-spinner",1)),2&t&&(Do("spec",e.spec)("autosize",e.autosize)("options",e.options),Kr(1),Do("ngIf",e.loading))},directives:[iO,_h,yD],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}"],changeDetection:0}),t})();function QT(t,e){if(1&t&&(Fo(0,"div",3),Fo(1,"div",4),fa(2),Oo(),Fo(3,"div",5),fa(4),Oo(),Oo()),2&t){const t=e.$implicit;Kr(2),ma("",t.label,":"),Kr(2),pa(t.value)}}let JT=(()=>{class t{constructor(){this.clsName="dataset-summary",this.summary=[],this.title=""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ht({type:t,selectors:[["agc-dataset-summary"]],hostVars:2,hostBindings:function(t,e){2&t&&ea(e.clsName)},inputs:{summary:"summary",title:"title"},decls:4,vars:2,consts:[[1,"title"],[1,"summary"],["class","summary-item",4,"ngFor","ngForOf"],[1,"summary-item"],[1,"label"],[1,"value"]],template:function(t,e){1&t&&(Fo(0,"div",0),fa(1),Oo(),Fo(2,"div",1),Ao(3,QT,5,2,"div",2),Oo()),2&t&&(Kr(1),pa(e.title),Kr(2),Do("ngForOf",e.summary))},directives:[yh],styles:["[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;color:#000}[_nghost-%COMP%]   .summary[_ngcontent-%COMP%]{padding-top:.5em;padding-left:1rem}[_nghost-%COMP%]   .summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{display:flex;font-size:.8rem}[_nghost-%COMP%]   .summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:700;color:#000;margin-right:.5rem}[_nghost-%COMP%]   .summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:lighter}"],changeDetection:0}),t})();const tP=function(){return[]};function eP(t,e){if(1&t&&(Mo(0,"agc-lazy-visualization",9),Vl(1,"async")),2&t){const t=Vo().$implicit,e=Vo(2);let n;Do("spec",t.spec)("autosize",e.autosize)("data",null!==(n=ql(1,3,t.data))&&void 0!==n?n:zl(5,tP))}}function nP(t,e){if(1&t&&(Mo(0,"agc-dataset-summary",10),Vl(1,"async")),2&t){const t=Vo().$implicit;Do("summary",ql(1,2,t.metadata))("title",t.variable.name)}}function iP(t,e){if(1&t&&(Fo(0,"div",6),Ao(1,eP,2,6,"agc-lazy-visualization",7),Ao(2,nP,2,4,"ng-template",null,8,pu),Oo()),2&t){const t=e.$implicit,n=Eo(3),i=Vo(2);Kr(1),Do("ngIf",i.hasSpec(t))("ngIfElse",n)}}const rP=function(){return{actions:!1}};function sP(t,e){if(1&t){const t=Ro();Fo(0,"ngx-vega",11),Lo("viewChange",function(e){return Be(t),Vo(2).attachPeriodSelector(e)}),Oo()}if(2&t){const t=Vo(2);ta("sticky",t.visualizations.length>1),Do("spec",t.timeSliderSpec)("autosize",t.autosize)("options",zl(5,rP))}}function oP(t,e){if(1&t&&(Fo(0,"div",3),Ao(1,iP,4,2,"div",4),Ao(2,sP,1,6,"ngx-vega",5),Oo()),2&t){const t=Vo();Kr(1),Do("ngForOf",t.visualizations),Kr(1),Do("ngIf",t.showTimeSlider)}}const aP=[{path:"",component:(()=>{class t{constructor(t,e,n,i,r){this.variablesState=e,this.dataLoaderService=n,this.chartFactoryService=i,this.visManager=r,this.clsName="agc-data-distributions",this.autosize={width:!0,height:!1},this.variableObservables$=new sp(1),this.subVariableObservables$=new sp(1),this.datasets$=t.entitiesArray$,this.subLabel$=e.subLabel$,this.variables$=this.variableObservables$.pipe(kD()),this.subVariables$=this.subVariableObservables$.pipe(kD()),this.createTimeSliderVisualization()}get visualizations(){return this.visManager.visualizations}get showTimeSlider(){return void 0!==this.timeSliderSpec&&this.visualizations.some(this.hasSpec)}hasSpec(t){return"spec"in t&&void 0!==t.spec}setSelectedDataset(t){t!==this.selectedDataset&&(this.selectedDataset=t,this.selectedVariable=void 0,this.variableObservables$.next(this.variablesState.getVariables(t,AT.nonSub)),this.subVariableObservables$.next(this.variablesState.getSubVariables(t)))}setSelectedVariable(t){t!==this.selectedVariable&&void 0!==this.selectedDataset&&(this.selectedVariable=t,this.visManager.setVariables([t]))}setSelectAllVariables(){const{selectedDataset:t}=this;if(void 0!==t){const e=this.variablesState.entitiesArray.filter(e=>e.dataset===t.name);this.selectedVariable=void 0,this.visManager.setVariables(e)}}attachPeriodSelector(t){const e=vT(e=>t.addSignalListener("period",e),e=>t.removeSignalListener("period",e)).pipe(F(([t,{period:e}])=>e));this.visManager.setFilterSource(e)}createTimeSliderVisualization(){const t=this.variablesState.selectId(..._T.timeSliderSource);this.variablesState.getVariable(t).pipe(wd(t=>void 0!==t),Xf(t=>this.dataLoaderService.load(t)),Fp(1)).subscribe(t=>{this.timeSliderSpec=this.chartFactoryService.createTimeSlider(t)})}}return t.\u0275fac=function(e){return new(e||t)(ko(CT),ko(ET),ko(NT),ko(RT),ko(LT))},t.\u0275cmp=Ht({type:t,selectors:[["agc-data-distributions"]],hostVars:2,hostBindings:function(t,e){2&t&&ea(e.clsName)},features:[Ra([LT])],decls:8,vars:16,consts:[[1,"header"],[3,"subLabel","datasets","variables","subVariables","datasetChange","dataVariableChange","selectAll"],["class","data-block",4,"ngIf"],[1,"data-block"],["class","visualization",4,"ngFor","ngForOf"],["class","time-slider",3,"sticky","spec","autosize","options","viewChange",4,"ngIf"],[1,"visualization"],["dataBindingName","distribution",3,"spec","autosize","data",4,"ngIf","ngIfElse"],["summary",""],["dataBindingName","distribution",3,"spec","autosize","data"],[3,"summary","title"],[1,"time-slider",3,"spec","autosize","options","viewChange"]],template:function(t,e){if(1&t&&(Fo(0,"div",0),fa(1,"Data Distributions"),Oo(),Fo(2,"agc-table-data-selector",1),Lo("datasetChange",function(t){return e.setSelectedDataset(t)})("dataVariableChange",function(t){return e.setSelectedVariable(t)})("selectAll",function(){return e.setSelectAllVariables()}),Vl(3,"async"),Vl(4,"async"),Vl(5,"async"),Vl(6,"async"),Oo(),Ao(7,oP,3,2,"div",2)),2&t){let t,n,i,r;Kr(2),Do("subLabel",null!==(t=ql(3,5,e.subLabel$))&&void 0!==t?t:"")("datasets",null!==(n=ql(4,7,e.datasets$))&&void 0!==n?n:zl(13,tP))("variables",null!==(i=ql(5,9,e.variables$))&&void 0!==i?i:zl(14,tP))("subVariables",null!==(r=ql(6,11,e.subVariables$))&&void 0!==r?r:zl(15,tP)),Kr(5),Do("ngIf",0!==e.visualizations.length)}},directives:[YT,_h,yh,ZT,JT,iO],pipes:[Mh],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;height:4rem;margin-bottom:4.5rem;padding:0 1rem;align-items:center}[_nghost-%COMP%]   .data-block[_ngcontent-%COMP%]{width:100%;height:100%;margin-top:2rem}[_nghost-%COMP%]   .data-block[_ngcontent-%COMP%]   .visualization[_ngcontent-%COMP%]{margin-bottom:2rem}[_nghost-%COMP%]   .data-block[_ngcontent-%COMP%]   .time-slider[_ngcontent-%COMP%]{margin-top:2rem;width:100%}[_nghost-%COMP%]   .data-block[_ngcontent-%COMP%]   .time-slider.sticky[_ngcontent-%COMP%]{position:sticky;bottom:0;z-index:1001}"],changeDetection:0}),t})()}];let lP=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Fw.forChild(aP)],Fw]}),t})(),uP=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Rh,AD,rO,yT,EO,kO,pT,lP]]}),t})();const cP=[{path:"",pathMatch:"full",redirectTo:"about"},{path:"about",loadChildren:()=>bC},{path:"change-log",loadChildren:()=>CC},{path:"data-er-diagram",loadChildren:()=>kC},{path:"data-schema-browser",loadChildren:()=>FC},{path:"visualization/:id",loadChildren:()=>AO},{path:"data-distributions",loadChildren:()=>uP}];let hP=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Fw.forRoot(cP)],Fw]}),t})();const dP={version:"1.0.0",lastCommitDate:new Date(1603996553e3),buildDate:new Date(1603996944707)};let fP=(()=>{class t{constructor(t){this.data=t}}return t.\u0275fac=function(e){return new(e||t)(ko(Mk))},t.\u0275cmp=Ht({type:t,selectors:[["agc-markdown-modal"]],decls:10,vars:4,consts:[["mat-dialog-title","",1,"header"],[1,"title"],[1,"filler"],["mat-icon-button","","mat-dialog-close","","tabindex","-1",1,"close"],[3,"src"]],template:function(t,e){1&t&&(Fo(0,"h2",0),Fo(1,"div",1),fa(2),Vl(3,"uppercase"),Oo(),Mo(4,"div",2),Fo(5,"button",3),Fo(6,"mat-icon"),fa(7,"close"),Oo(),Oo(),Oo(),Fo(8,"mat-dialog-content"),Mo(9,"markdown",4),Oo()),2&t&&(Kr(2),pa(ql(3,2,e.data.title)),Kr(7),Do("src",e.data.src))},directives:[$k,CD,Lk,nD,zk,y_],pipes:[Th],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .filler[_ngcontent-%COMP%]{flex-grow:1}"],changeDetection:0}),t})();var pP;function mP(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}function gP(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}class yP{constructor(t,e,n){this.path=t,this.queryParams=e,this.extras=n}static get type(){return"[Router] Navigate"}}class vP{constructor(t,e,n="none"){this.routerState=t,this.event=e,this.trigger=n}static get type(){return"[Router] RouterNavigation"}}class _P{constructor(t,e,n,i="none"){this.routerState=t,this.storeState=e,this.event=n,this.trigger=i}static get type(){return"[Router] RouterCancel"}}class bP{constructor(t,e,n,i="none"){this.routerState=t,this.storeState=e,this.event=n,this.trigger=i}static get type(){return"[Router] RouterError"}}class xP{constructor(t,e,n="none"){this.routerState=t,this.event=e,this.trigger=n}static get type(){return"[Router] RouterDataResolved"}}class wP{}class CP{serialize(t){return{root:this.serializeRoute(t.root),url:t.url}}serializeRoute(t){const e=t.children.map(t=>this.serializeRoute(t));return{url:t.url,params:t.params,queryParams:t.queryParams,fragment:t.fragment,data:t.data,outlet:t.outlet,component:null,routeConfig:null,root:null,parent:null,firstChild:e[0],children:e,pathFromRoot:null,paramMap:t.paramMap,queryParamMap:t.queryParamMap,toString:t.toString}}}let AP=pP=class{constructor(t,e,n,i,r,s,o){this._store=t,this._router=e,this._serializer=n,this._ngZone=i,this._urlSerializer=r,this._locationStrategy=s,this._location=o,this._trigger="none",this._routerState=null,this._storeState=null,this._lastRoutesRecognized=null,this.setUpStoreListener(),this.setUpRouterEventsListener(),this.checkInitialNavigationOnce()}static state(t){return t&&t.state}static url(t){return t&&t.state&&t.state.url}navigate(t,e){return this._ngZone.run(()=>this._router.navigate(e.path,Object.assign({queryParams:e.queryParams},e.extras)))}angularRouterAction(t,e){t.setState(Object.assign({},t.getState(),{trigger:e.trigger,state:e.routerState,navigationId:e.event.id}))}setUpStoreListener(){this._store.select(pP).subscribe(t=>{this.navigateIfNeeded(t)})}setUpRouterEventsListener(){this._router.events.subscribe(t=>{t instanceof z_?this.navigationStart():t instanceof q_?this._lastRoutesRecognized=t:t instanceof X_?this.dispatchRouterDataResolved(t):t instanceof U_?(this.dispatchRouterCancel(t),this.reset()):t instanceof V_?(this.dispatchRouterError(t),this.reset()):t instanceof j_&&(this.navigationEnd(),this.reset())})}navigationStart(){this._routerState=this._serializer.serialize(this._router.routerState.snapshot),"none"!==this._trigger&&(this._storeState=this._store.selectSnapshot(pP))}navigationEnd(){this.shouldDispatchRouterNavigation()&&this.dispatchRouterNavigation()}shouldDispatchRouterNavigation(){return!this._storeState||"store"!==this._trigger}navigateIfNeeded(t){!this._storeState||!this._storeState.state||!t||"router"===t.trigger||this._router.url===this._storeState.state.url||(this._trigger="store",this._ngZone.run(()=>{this._router.navigateByUrl(this._storeState.state.url)}))}dispatchRouterNavigation(){const t=this._serializer.serialize(this._lastRoutesRecognized.state);this.dispatchRouterAction(new vP(t,new q_(this._lastRoutesRecognized.id,this._lastRoutesRecognized.url,this._lastRoutesRecognized.urlAfterRedirects,t),this._trigger))}dispatchRouterCancel(t){this.dispatchRouterAction(new _P(this._routerState,this._storeState,t,this._trigger))}dispatchRouterError(t){this.dispatchRouterAction(new bP(this._routerState,this._storeState,new V_(t.id,t.url,`${t}`),this._trigger))}dispatchRouterAction(t){this._trigger="router";try{this._store.dispatch(t)}finally{this._trigger="none"}}dispatchRouterDataResolved(t){const e=this._serializer.serialize(t.state);this.dispatchRouterAction(new xP(e,t,this._trigger))}reset(){this._trigger="none",this._storeState=null,this._routerState=null}checkInitialNavigationOnce(){HC()||this._router.events.pipe(h_(t=>t instanceof q_)).subscribe(({url:t})=>{const e=this._location.normalize(this._locationStrategy.path(!0)),n=this._urlSerializer.parse(e);this._urlSerializer.serialize(n)!==t&&this._router.navigateByUrl(e)})}};AP.\u0275fac=function(t){return new(t||AP)(pi(XA),pi(pw),pi(wP),pi(Nu),pi(Cb),pi(kc),pi(Mc))},AP.\u0275prov=pt({token:AP,factory:function(t){return AP.\u0275fac(t)}}),AP.ctorParameters=()=>[{type:XA},{type:pw},{type:wP},{type:Nu},{type:Cb},{type:kc},{type:Mc}],AP.ctorParameters=()=>[{type:XA},{type:pw},{type:wP},{type:Nu},{type:Cb},{type:kc},{type:Mc}],mP([nE(yP),gP("design:type",Function),gP("design:paramtypes",[Object,yP]),gP("design:returntype",void 0)],AP.prototype,"navigate",null),mP([nE([vP,bP,_P,xP]),gP("design:type",Function),gP("design:paramtypes",[Object,Object]),gP("design:returntype",void 0)],AP.prototype,"angularRouterAction",null),mP([rE(),gP("design:type",Function),gP("design:paramtypes",[Object]),gP("design:returntype",void 0)],AP,"state",null),mP([rE(),gP("design:type",Function),gP("design:paramtypes",[Object]),gP("design:returntype",Object)],AP,"url",null),AP=pP=mP([iE({name:"router",defaults:{state:void 0,navigationId:void 0,trigger:"none"}}),gP("design:paramtypes",[XA,pw,wP,Nu,Cb,kc,Mc])],AP);let EP=(()=>{class t{static forRoot(){return{ngModule:t,providers:[{provide:wP,useClass:CP}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[eE.forFeature([AP])]]}),t})(),kP=(()=>{let t=class extends ME{constructor(t,e){super(),this.actions$=t,this.router=e,this.destroy$=new k,this.navigationStart$=this.router.events.pipe(wd(t=>t instanceof z_),F(t=>t.url),Vf(this.destroy$)),this.navigationEnd$=this.actions$.pipe(function(...t){return EA(t,["SUCCESSFUL","CANCELED","ERRORED"],kA)}(vP),F(t=>t.action.event.url),Vf(this.destroy$))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}};return t.\u0275fac=function(e){return new(e||t)(pi(TA),pi(pw))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t=MC([kE(),iE({name:"routerFacade"})],t),t})(),DP=(()=>{class t{constructor(){this.clsName="agc-menu-icon",this.alternateIcon=!1}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ht({type:t,selectors:[["agc-menu-icon"]],hostVars:2,hostBindings:function(t,e){2&t&&ea(e.clsName)},inputs:{alternateIcon:"alternateIcon"},decls:6,vars:2,consts:[[1,"icon"],[1,"bar"],[1,"text"]],template:function(t,e){1&t&&(Fo(0,"div",0),Mo(1,"div",1),Mo(2,"div",1),Mo(3,"div",1),Oo(),Fo(4,"div",2),fa(5,"MENU"),Oo()),2&t&&ta("alternate",e.alternateIcon)},styles:["[_nghost-%COMP%]{display:block;width:2.25rem;height:2.25rem;cursor:pointer}[_nghost-%COMP%]   .icon[_ngcontent-%COMP%]{margin-bottom:.25rem}[_nghost-%COMP%]   .icon[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]{width:1.875rem;height:.25rem;border-radius:.625rem;transition:.4s}[_nghost-%COMP%]   .icon[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-of-type(2){width:2.25rem;margin:.25rem 0}[_nghost-%COMP%]   .icon.alternate[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:first-of-type{width:1.75rem;transform:translate(.375rem,.5rem) rotate(45deg)}[_nghost-%COMP%]   .icon.alternate[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-of-type(2){opacity:0}[_nghost-%COMP%]   .icon.alternate[_ngcontent-%COMP%]   .bar[_ngcontent-%COMP%]:nth-of-type(3){width:1.75rem;transform:translate(.375rem,-.5rem) rotate(-45deg)}"],changeDetection:0}),t})(),SP=(()=>{class t{constructor(){this.clsName="agc-page-header",this.elevation=!0,this.menuOpen=!1,this.menuOpenChange=new Yl}toggleMenuOpen(){this.menuOpen=!this.menuOpen,this.menuOpenChange.emit(this.menuOpen)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ht({type:t,selectors:[["agc-page-header"]],hostVars:4,hostBindings:function(t,e){2&t&&(ea(e.clsName),ta("mat-elevation-z3",e.elevation))},inputs:{menuOpen:"menuOpen"},outputs:{menuOpenChange:"menuOpenChange"},decls:7,vars:1,consts:[["mat-flat-button","","color","primary",1,"menu",3,"click"],[3,"alternateIcon"],[1,"logos"],["href","https://cns.iu.edu","target","_blank","rel","noreferrer noopener"],["src","assets/images/iu-white.svg","alt","Indiana University logo"],["href","https://www.regenstrief.org","target","_blank","rel","noreferrer noopener"],["src","assets/images/regenstrief-white.svg","alt","Regenstrief Institute logo"]],template:function(t,e){1&t&&(Fo(0,"button",0),Lo("click",function(){return e.toggleMenuOpen()}),Mo(1,"agc-menu-icon",1),Oo(),Fo(2,"div",2),Fo(3,"a",3),Mo(4,"img",4),Oo(),Fo(5,"a",5),Mo(6,"img",6),Oo(),Oo()),2&t&&(Kr(1),Do("alternateIcon",e.menuOpen))},directives:[CD,DP],styles:["[_nghost-%COMP%]{display:flex;height:3.5rem;align-items:center}[_nghost-%COMP%]   .menu[_ngcontent-%COMP%]{display:flex;width:5rem;height:3.5rem;align-items:center;justify-content:center;border-radius:0;border-right-width:1px;border-right-style:solid}[_nghost-%COMP%]   .logos[_ngcontent-%COMP%]{display:flex;flex-direction:row;height:100%;justify-content:flex-start;align-items:center;border-radius:0;border-left-width:1px;border-left-style:solid}[_nghost-%COMP%]   .logos[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{height:2.25rem;margin-left:1rem}[_nghost-%COMP%]   .logos[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:2.25rem}"],changeDetection:0}),t})(),FP=(()=>{class t{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(t){this._vertical=yf(t)}get inset(){return this._inset}set inset(t){this._inset=yf(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ht({type:t,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(t,e){2&t&&(wo("aria-orientation",e.vertical?"vertical":"horizontal"),ta("mat-divider-vertical",e.vertical)("mat-divider-horizontal",!e.vertical)("mat-divider-inset",e.inset))},inputs:{vertical:"vertical",inset:"inset"},decls:0,vars:0,template:function(t,e){},styles:[".mat-divider{display:block;margin:0;border-top-width:1px;border-top-style:solid}.mat-divider.mat-divider-vertical{border-top:0;border-right-width:1px;border-right-style:solid}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}\n"],encapsulation:2,changeDetection:0}),t})(),OP=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[rv],rv]}),t})(),MP=(()=>{class t{constructor(t){this.locale=t}transform(t,e,n,i){if(!t||0===t.length||void 0===e)return t;const r=new Intl.Collator(this.locale||void 0,{usage:"sort",numeric:!0,sensitivity:"nocase"===i?"accent":"variant"});return[...t].sort((t,i)=>{const s=t[e],o=i[e];return null==s?null==o?0:1:null==o?-1:"desc"===n?-r.compare(s,o):r.compare(s,o)})}}return t.\u0275fac=function(e){return new(e||t)(ko(Au,24))},t.\u0275pipe=Qt({name:"orderBy",type:t,pure:!0}),t})();const TP=function(t){return["/visualization",t]};function PP(t,e){if(1&t&&(Fo(0,"a",12),Fo(1,"div",6),fa(2),Oo(),Fo(3,"div",13),fa(4),Oo(),Mo(5,"mat-divider"),Oo()),2&t){const t=e.$implicit;Do("routerLink",(3,n=TP,i=t.path,Ul(Pe(),Ve(),3,n,i,undefined))),Kr(2),pa(t.title),Kr(2),pa(t.description)}var n,i}let RP=(()=>{class t{constructor(){this.clsName="agc-page-menu",this.header="",this.pages=[]}linkId(t,e){return e.path}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ht({type:t,selectors:[["agc-page-menu"]],hostVars:2,hostBindings:function(t,e){2&t&&ea(e.clsName)},inputs:{header:"header",pages:"pages"},decls:34,vars:6,consts:[[1,"header"],[1,"pages"],["class","link","routerLinkActive","active",3,"routerLink",4,"ngFor","ngForOf","ngForTrackBy"],[1,"info"],["routerLink","/data-distributions","routerLinkActive","active",1,"link","distributions"],["svgIcon","menu:data-distributions"],[1,"title"],["routerLink","/about","routerLinkActive","active",1,"link","about"],["routerLink","/data-schema-browser","routerLinkActive","active",1,"link","schema"],["svgIcon","menu:data-storage"],["routerLink","/data-er-diagram","routerLinkActive","active",1,"link","er-diagram"],["routerLink","/change-log","routerLinkActive","active",1,"link","changelog"],["routerLinkActive","active",1,"link",3,"routerLink"],[1,"description"]],template:function(t,e){1&t&&(Fo(0,"div",0),fa(1),Oo(),Fo(2,"nav",1),Ao(3,PP,6,5,"a",2),Vl(4,"orderBy"),Oo(),Fo(5,"div",3),Fo(6,"a",4),Mo(7,"mat-icon",5),Fo(8,"span",6),fa(9,"Data Distributions"),Oo(),Oo(),Mo(10,"mat-divider"),Fo(11,"a",7),Fo(12,"mat-icon"),fa(13,"info_outlined"),Oo(),Fo(14,"span",6),fa(15,"About"),Oo(),Oo(),Mo(16,"mat-divider"),Fo(17,"a",8),Mo(18,"mat-icon",9),Fo(19,"span",6),fa(20,"Data Schema Browser"),Oo(),Oo(),Mo(21,"mat-divider"),Fo(22,"a",10),Fo(23,"mat-icon"),fa(24,"bar_chart_outline"),Oo(),Fo(25,"span",6),fa(26,"Data ER Diagram"),Oo(),Oo(),Mo(27,"mat-divider"),Fo(28,"a",11),Fo(29,"mat-icon"),fa(30,"published_with_changes_outline"),Oo(),Fo(31,"span",6),fa(32,"Changelog"),Oo(),Oo(),Mo(33,"mat-divider"),Oo()),2&t&&(Kr(1),ma(" ",e.header,"\n"),Kr(2),Do("ngForOf",Hl(4,3,e.pages,"order"))("ngForTrackBy",e.linkId))},directives:[yh,gw,vw,nD,FP],pipes:[MP],styles:["[_nghost-%COMP%]{display:block;width:30rem;padding-bottom:2rem}[_nghost-%COMP%]   .header[_ngcontent-%COMP%], [_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%], [_nghost-%COMP%]   .pages[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:not(mat-divider){padding-left:1.5rem;padding-right:1.5rem}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;height:4rem;align-items:center}[_nghost-%COMP%]   .pages[_ngcontent-%COMP%]{padding-top:2rem}[_nghost-%COMP%]   .pages[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{outline:none;text-decoration:none}[_nghost-%COMP%]   .pages[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-top:1rem}[_nghost-%COMP%]   .pages[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{padding-bottom:1rem}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{display:flex;height:2.25rem;align-items:center;cursor:pointer;outline:none;text-decoration:none;transition:color .3s ease-in-out}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.5rem}"],changeDetection:0}),t})(),BP=(()=>{class t{constructor(){this.clsName="agc-sub-bar",this.visible=!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ht({type:t,selectors:[["agc-sub-bar"]],hostVars:4,hostBindings:function(t,e){2&t&&(ea(e.clsName),ta("visible",e.visible))},inputs:{visible:"visible"},decls:0,vars:0,template:function(t,e){},styles:["[_nghost-%COMP%]{display:block;height:2.625rem;transition:height .3s ease-in-out}[_nghost-%COMP%]:not(.visible){height:0}"],changeDetection:0}),t})(),IP=(()=>{class t{constructor(){this.clsName="agc-banner"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ht({type:t,selectors:[["agc-banner"]],hostVars:2,hostBindings:function(t,e){2&t&&ea(e.clsName)},decls:4,vars:0,consts:[[1,"info"],[1,"filler"],["src","assets/images/hero-banner.jpg","alt","Image of a pill bottle",1,"image"]],template:function(t,e){1&t&&(Fo(0,"div",0),fa(1," Indiana Opioid Dashboard\n"),Oo(),Mo(2,"div",1),Mo(3,"img",2))},styles:["[_nghost-%COMP%]{display:flex;flex-direction:row;height:15rem;align-items:center}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]{display:flex;height:4rem;padding-left:2rem;padding-right:1rem;align-items:center}[_nghost-%COMP%]   .image[_ngcontent-%COMP%]{height:15rem}[_nghost-%COMP%]   .filler[_ngcontent-%COMP%]{flex-grow:1}"],changeDetection:0}),t})(),NP=(()=>{class t{constructor(){this.clsName="agc-page-footer",this.buildDate=new Date,this.contactClick=new Yl,this.privacyClick=new Yl}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Ht({type:t,selectors:[["agc-page-footer"]],hostVars:2,hostBindings:function(t,e){2&t&&ea(e.clsName)},inputs:{buildDate:"buildDate"},outputs:{contactClick:"contactClick",privacyClick:"privacyClick"},decls:12,vars:4,consts:[[1,"resources"],["mat-button","","disableRipple","",1,"contact",3,"click"],["mat-button","","disableRipple","",1,"privacy",3,"click"],[1,"filler"],[1,"build-date"],[1,"copyright"]],template:function(t,e){1&t&&(Fo(0,"div",0),Fo(1,"button",1),Lo("click",function(){return e.contactClick.emit()}),fa(2,"Contact Us"),Oo(),Fo(3,"button",2),Lo("click",function(){return e.privacyClick.emit()}),fa(4,"Privacy Policy"),Oo(),Mo(5,"div",3),Fo(6,"span",4),fa(7),Vl(8,"date"),Oo(),Oo(),Fo(9,"div",5),Fo(10,"span"),fa(11,"Copyright \xa9 2020 Indiana University, Regenstrief Institute - All rights reserved."),Oo(),Oo()),2&t&&(Kr(7),ma(" This site was last updated on ",Hl(8,1,e.buildDate,"MM/dd/yyyy, h:mm a")," "))},directives:[CD],pipes:[Ph],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]   .resources[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;height:4.5rem;align-items:center;padding-left:1rem;padding-right:1rem}[_nghost-%COMP%]   .resources[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%], [_nghost-%COMP%]   .resources[_ngcontent-%COMP%]   .privacy[_ngcontent-%COMP%]{transition:color .3s}[_nghost-%COMP%]   .resources[_ngcontent-%COMP%]   .filler[_ngcontent-%COMP%]{flex-grow:1}[_nghost-%COMP%]   .copyright[_ngcontent-%COMP%]{display:flex;flex-direction:row;width:100%;height:3rem;justify-content:center;align-items:center}"],changeDetection:0}),t})(),LP=(()=>{class t{constructor(t,e,n){this.dialog=e,this.zone=n,this.clsName="agc-root",this.menuHeader="Marion County Opioid Addiction Report",this.pages=IE.map(t=>({path:t.id,title:t.title,description:t.description})),this.subBarVisible=!0,this.menuOpen=!1,this.buildDate=dP.buildDate,t.navigationStart$.subscribe(()=>{this.menuOpen=!1})}ngAfterViewInit(){this.sidenavContainer.scrollable.elementScrolled().subscribe(()=>{const t=0===this.sidenavContainer.scrollable.measureScrollOffset("top");this.subBarVisible!==t&&this.zone.run(()=>{this.subBarVisible=t})})}openContactUs(){this.dialog.open(fP,{width:"800px",height:"600px",data:{title:"Contact us",src:"assets/footer/contact-us.md"}})}openPrivacyPolicy(){this.dialog.open(fP,{width:"800px",height:"600px",data:{title:"Privacy Policy",src:"assets/footer/privacy-policy.md"}})}}return t.\u0275fac=function(e){return new(e||t)(ko(kP),ko(Ik),ko(Nu))},t.\u0275cmp=Ht({type:t,selectors:[["agc-root"]],viewQuery:function(t,e){if(1&t&&lu(t_,5),2&t){let t;au(t=cu())&&(e.sidenavContainer=t.first)}},hostVars:2,hostBindings:function(t,e){2&t&&ea(e.clsName)},decls:12,vars:6,consts:[[3,"menuOpen","menuOpenChange"],["mode","over",3,"opened","openedChange","closedStart"],[3,"header","pages"],[3,"visible"],[1,"content"],[1,"outlet-wrapper"],[1,"space-filler"],[3,"buildDate","contactClick","privacyClick"]],template:function(t,e){1&t&&(Fo(0,"agc-page-header",0),Lo("menuOpenChange",function(t){return e.menuOpen=t}),Oo(),Fo(1,"mat-sidenav-container"),Fo(2,"mat-sidenav",1),Lo("openedChange",function(t){return e.menuOpen=t})("closedStart",function(){return e.menuOpen=!1}),Mo(3,"agc-page-menu",2),Oo(),Fo(4,"mat-sidenav-content"),Mo(5,"agc-sub-bar",3),Mo(6,"agc-banner"),Fo(7,"div",4),Fo(8,"div",5),Mo(9,"router-outlet"),Oo(),Mo(10,"div",6),Oo(),Fo(11,"agc-page-footer",7),Lo("contactClick",function(){return e.openContactUs()})("privacyClick",function(){return e.openPrivacyPolicy()}),Oo(),Oo(),Oo()),2&t&&(Do("menuOpen",e.menuOpen),Kr(2),Do("opened",e.menuOpen),Kr(1),Do("header",e.menuHeader)("pages",e.pages),Kr(2),Do("visible",e.subBarVisible),Kr(6),Do("buildDate",e.buildDate))},directives:[SP,t_,Jv,RP,Qv,BP,IP,_w,NP],styles:["[_nghost-%COMP%]{display:block;height:100%;overflow-y:auto}[_nghost-%COMP%]   agc-page-header[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10}[_nghost-%COMP%]   mat-sidenav-container[_ngcontent-%COMP%]{height:calc(100% - 3.5rem)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex-flow:column;max-width:1328px;min-height:calc(100% - 25.125rem);padding:4.5rem 4rem;align-items:center;margin:auto}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .outlet-wrapper[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .space-filler[_ngcontent-%COMP%]{flex-grow:1}"]}),t})(),$P=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Rh]]}),t})(),zP=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Rh,AD]]}),t})(),jP=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Rh,AD,iD,yT]]}),t})(),UP=(()=>{class t{constructor(t,e){t.addSvgIconInNamespace("menu","data-storage",e.bypassSecurityTrustResourceUrl("assets/icons/data-storage.svg")),t.addSvgIconInNamespace("menu","data-distributions",e.bypassSecurityTrustResourceUrl("assets/icons/data-distributions.svg"))}}return t.\u0275fac=function(e){return new(e||t)(pi(Xk),pi(pd))},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Rh,Fw,OP,iD,yT]]}),t})(),VP=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[Rh]]}),t})();const qP=new Kn("Theme options");let HP=(()=>{class t{constructor(t,e){var n,i;this.elements=[],this.defaultTheme=null!==(n=t.default)&&void 0!==n?n:"",this.currentTheme=null!==(i=t.theme)&&void 0!==i?i:this.defaultTheme;const r=null==e?void 0:e.getContainerElement();r&&this.addElement(r)}get theme(){return this.currentTheme}set theme(t){const e=t||this.defaultTheme,n=this.currentTheme;this.currentTheme=e,this.switchTheme(this.elements,e,n)}ngOnDestroy(){const t=[...this.elements];for(const e of t)this.removeElement(e)}addBootstrapComponent(t){const e=t.location.nativeElement;e&&(this.addElement(e),t.onDestroy(()=>this.removeElement(e)))}addElement(t){this.switchTheme([t],this.currentTheme,""),this.elements.push(t)}removeElement(t){const e=this.elements.indexOf(t);e>=0&&(this.elements.splice(e,1),this.switchTheme([t],"",this.currentTheme))}switchTheme(t,e,n){this.addClass(t,"color-transitions-disabled"),this.removeClass(t,n),this.addClass(t,e),setTimeout(()=>this.removeClass(t,"color-transitions-disabled"))}addClass(t,e){if(e)for(const n of t)n.classList.add(e)}removeClass(t,e){if(e)for(const n of t)n.classList.remove(e)}}return t.\u0275fac=function(e){return new(e||t)(pi(qP),pi(ik,8))},t.\u0275prov=pt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),WP=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[{provide:wu,useFactory:t=>e=>t.addBootstrapComponent(e),deps:[HP],multi:!0},{provide:qP,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({}),t})(),GP=(()=>{class t{constructor(t,e){this.accessor=t,this.injector=e}static forRoot(e=[]){return{ngModule:t,providers:[uE,lE,oE,...e]}}}return t.\u0275fac=function(e){return new(e||t)(pi(uE,2),pi(lE,2))},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({}),t})();const XP=(t,e)=>{return n=e-t.toString().length,new Array(n+1).join("0")+t;var n};class YP{constructor(t,e,n){this.action=t,this.store=e,this.logWriter=n}dispatched(t){const e=pA(this.action),n=(i=new Date,XP(i.getHours(),2)+":"+XP(i.getMinutes(),2)+":"+XP(i.getSeconds(),2)+"."+XP(i.getMilliseconds(),3));var i;this.logWriter.startGroup(`action ${e} @ ${n}`),this._hasPayload(this.action)&&this.logWriter.logGrey("payload",Object.assign({},this.action)),this.logWriter.logGrey("prev state",t)}completed(t){this.logWriter.logGreen("next state",t),this.logWriter.endGroup()}errored(t){this.logWriter.logRedish("next state after error",this.store.snapshot()),this.logWriter.logRedish("error",t),this.logWriter.endGroup()}_hasPayload(t){return this._getNonEmptyProperties(t).length>0}_getNonEmptyProperties(t){return Object.keys(t).map(e=>t[e]).filter(t=>void 0!==t)}}class KP{constructor(t){this.options=t,this.options=this.options||{},this.logger=t.logger||console}startGroup(t){const e=this.options.collapsed?this.logger.groupCollapsed:this.logger.group;try{e.call(this.logger,t)}catch(n){console.log(t)}}endGroup(){try{this.logger.groupEnd()}catch(t){this.logger.log("\u2014\u2014 log end \u2014\u2014")}}logGrey(t,e){this.log(t,"color: #9E9E9E; font-weight: bold",e)}logGreen(t,e){this.log(t,"color: #4CAF50; font-weight: bold",e)}logRedish(t,e){this.log(t,"color: #FD8182; font-weight: bold",e)}log(t,e,n){this.isIE()?this.logger.log(t,n):this.logger.log("%c "+t,e,n)}isIE(){const t="undefined"!=typeof window&&window.navigator.userAgent?window.navigator.userAgent:"";let e=!1;const n=t.indexOf("MSIE "),i=t.indexOf("Trident/");return(n>-1||i>-1)&&(e=!0),e}}const ZP=new Kn("NGXS_LOGGER_PLUGIN_OPTIONS");let QP=(()=>{class t{constructor(t,e){this._options=t,this._injector=e}handle(t,e,n){if(this._options.disabled||!this._options.filter(e,t))return n(t,e);this._logWriter=this._logWriter||new KP(this._options),this._store=this._store||this._injector.get(XA);const i=new YP(e,this._store,this._logWriter);return i.dispatched(t),n(t,e).pipe(xp(t=>{i.completed(t)}),O_(t=>{throw i.errored(t),t}))}}return t.\u0275fac=function(e){return new(e||t)(pi(ZP),pi(ao))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const JP=new Kn("LOGGER_USER_OPTIONS");function tR(t){const e={logger:console,collapsed:!1,disabled:!1,filter:()=>!0};return Object.assign({},e,t)}let eR=(()=>{class t{static forRoot(e){return{ngModule:t,providers:[{provide:oA,useClass:QP,multi:!0},{provide:JP,useValue:e},{provide:ZP,useFactory:tR,deps:[JP]}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({}),t})();const nR=new Kn("NGXS_STORAGE_PLUGIN_OPTION"),iR=new Kn("STORAGE_ENGINE"),rR="@@STATE";function sR(t){return void 0!==t&&t.key&&(t.key=(e=t.key,Array.isArray(e)||(e=[e]),e.map(t=>(t.hasOwnProperty("NGXS_OPTIONS_META")&&(t=t.NGXS_OPTIONS_META.name),t instanceof class{constructor(t){this.name=t,xA(this).makeRootSelector=t=>t.getStateGetter(this.name)}getName(){return this.name}toString(){return`StateToken[${this.name}]`}}?t.getName():t)))),Object.assign({key:[rR],storage:0,serialize:JSON.stringify,deserialize:JSON.parse,beforeSerialize:t=>t,afterDeserialize:t=>t},t);var e}function oR(t,e){return Ih(e)?null:0===t.storage?localStorage:1===t.storage?sessionStorage:null}let aR=(()=>{class t{constructor(t,e,n){this._options=t,this._engine=e,this._platformId=n}handle(t,e,n){if(Ih(this._platformId)&&null===this._engine)return n(t,e);const i=this._options.key,r=function(t){const e=pA(t);return function(t){return e===pA(t)}}(e),s=r(KA)||r(ZA);let o=!1;if(s)for(const l of i){const e=l===rR;let n=this._engine.getItem(l);if("undefined"!==n&&null!=n){try{const t=this._options.deserialize(n);n=this._options.afterDeserialize(t,l)}catch(a){console.error("Error ocurred while deserializing the store value, falling back to empty object."),n={}}this._options.migrations&&this._options.migrations.forEach(t=>{t.version===gA(n,t.versionKey||"version")&&(!t.key&&e||t.key===l)&&(n=t.migrate(n),o=!0)}),t=e?Object.assign({},t,n):mA(t,l,n)}}return n(t,e).pipe(xp(t=>{if(!s||s&&o)for(const e of i){let n=t;e!==rR&&(n=gA(t,e));try{const t=this._options.beforeSerialize(n,e);this._engine.setItem(e,this._options.serialize(t))}catch(a){console.error("Error ocurred while serializing the store value, value not updated.")}}}))}}return t.\u0275fac=function(e){return new(e||t)(pi(nR),pi(iR),pi(xu))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t})();const lR=new Kn("USER_OPTIONS");let uR=(()=>{class t{static forRoot(e){return{ngModule:t,providers:[{provide:oA,useClass:aR,multi:!0},{provide:lR,useValue:e},{provide:nR,useFactory:sR,deps:[lR]},{provide:iR,useFactory:oR,deps:[nR,xu]}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({}),t})();let cR=(()=>{class t{constructor(t){this.http=t}load(t){return this.http.get(t,{responseType:"json"}).pipe(F(this.parseRawData.bind(this)))}parseRawData(t){const e=[],n=[];for(const i of Object.values(t))e.push(this.parseRawDataset(i)),n.push(...Object.values(i.columns).map(t=>this.parseRawDatasetVariable(i,t)));return{datasets:e,variables:n}}parseRawDataset(t){return{name:t.name,description:t.remarks,variables:Object.keys(t.columns)}}parseRawDatasetVariable(t,e){return{dataset:t.name,name:e.name,description:e.remarks,type:e.type,nonNullCount:e.n_non_null,percentMissing:e.pct_missing,distribution:{type:e.dist_type,url:e.dist_data.url,summary:{distinct:e.dist_data.distinct,min:e.dist_data.min,max:e.dist_data.max}}}}}return t.\u0275fac=function(e){return new(e||t)(pi(Vd))},t.\u0275prov=pt({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const hR=[kP,lD,NE,(()=>{let t=class extends ME{constructor(t,e,n){super(),this.datasetLoader=t,this.datasetsState=e,this.variablesState=n}ngxsOnInit(){super.ngxsOnInit(),this.datasetLoader.load(_T.datasetsPath).subscribe(t=>{this.datasetsState.addMany(t.datasets),this.variablesState.addMany(t.variables)})}};return t.\u0275fac=function(e){return new(e||t)(pi(cR),pi(CT),pi(ET))},t.\u0275prov=pt({token:t,factory:t.\u0275fac}),t=MC([kE(),iE({name:"data",children:[CT,ET]})],t),t})(),CT,ET];let dR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[GP.forRoot(),eE.forRoot(hR,{developmentMode:!1}),uR.forRoot({key:[]}),EP.forRoot(),eR.forRoot({disabled:true})]]}),t})(),fR=(()=>{class t{constructor(t){if(t)throw new Error("CoreModule should only be imported once in the AppModule!")}}return t.\u0275fac=function(e){return new(e||t)(pi(t,12))},t.\u0275mod=Yt({type:t}),t.\u0275inj=mt({imports:[[WP.forRoot(),dR,$P,zP,jP,UP,VP],$P,zP,jP,UP,VP]}),t})(),pR=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Yt({type:t,bootstrap:[LP]}),t.\u0275inj=mt({providers:[],imports:[[_d,Zy,rf,e_,v_.forRoot({loader:Vd,markedOptions:{provide:p_,useValue:{gfm:!0}}}),hP,fR,yT]]}),t})();(function(){if(Ku)throw new Error("Cannot enable prod mode after platform setup.");Yu=!1})(),yd().bootstrapModule(pR).catch(t=>console.error(t))}},t=>{"use strict";t(t.s=9734)}]);