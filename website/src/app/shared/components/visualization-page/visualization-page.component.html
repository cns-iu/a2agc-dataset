<div *ngIf="headline" class="header">{{ headline }}</div>

<div *ngIf="title" class="title">{{ title }}</div>
<div *ngIf="description" class="description">{{ description }}</div>

<div class="content">
  <div class="visualization">
    <ngx-vega *ngIf="spec" [spec]="spec" [options]="{renderer: 'canvas', actions: true}"></ngx-vega>
    <span class="help-button" (click)="launchHelpDialog()">?</span>
  </div>

  <mat-expansion-panel ngClass="info">
    <mat-expansion-panel-header>
      <mat-panel-title>
        <mat-icon ngClass="storage-icon" svgIcon="menu:data-storage"></mat-icon> DATA &amp; GRAPHIC VARIABLE EXTRACTION INFORMATION
      </mat-panel-title>
    </mat-expansion-panel-header>

    <markdown *ngIf="content" [src]="content"></markdown>

    <mat-accordion>
      <mat-expansion-panel *ngIf="sql">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Data Extraction Source Code (SQL)
          </mat-panel-title>
        </mat-expansion-panel-header>

        <markdown *ngIf="sql" lineNumbers [src]="sql"></markdown>
      </mat-expansion-panel>
      <mat-expansion-panel *ngIf="spec">
        <mat-expansion-panel-header>
          <mat-panel-title>
            Visualization Source Code (Vega Lite Spec)
          </mat-panel-title>
        </mat-expansion-panel-header>

        <markdown *ngIf="spec" lineNumbers [src]="specString"></markdown>
      </mat-expansion-panel>
    </mat-accordion>
  </mat-expansion-panel>
</div>
